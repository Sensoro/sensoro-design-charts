/*! For license information please see 490.7c677deb.js.LICENSE.txt */
(self.webpackChunksensoro_design_charts=self.webpackChunksensoro_design_charts||[]).push([["490"],{1859:function(t,e,i){"use strict";i.d(e,{ri:()=>te,LX:()=>tn,E9:()=>tu,R0:()=>tt,Vi:()=>tm,i6:()=>to,TH:()=>tp,AP:()=>ta,s0:()=>tg,pV:()=>tr,yv:()=>ts,pJ:()=>tv,VK:()=>J,aw:()=>tf,Ni:()=>ti,e7:()=>td,Jr:()=>tc,Tm:()=>tl,VY:()=>Q,Ww:()=>th});var r=i(5271),s=i(967);let n=(0,r.createContext)({}),a=(0,r.createContext)({});var o=i(2676),l=i(6186),h=i(6780),u=i(3572);let d=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("887")]).then(i.bind(i,1414))),c=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("833")]).then(i.bind(i,8815))),p=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("218")]).then(i.bind(i,9042))),g=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("94")]).then(i.bind(i,5201))),m=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("886")]).then(i.bind(i,9309))),f=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("142"),i.e("950")]).then(i.bind(i,8194))),v=(0,u.lazyWithPreload)(()=>i.e("841").then(i.bind(i,312))),y=(0,u.lazyWithPreload)(()=>i.e("612").then(i.bind(i,6496))),_=(0,u.lazyWithPreload)(()=>i.e("799").then(i.bind(i,8301))),b=(0,u.lazyWithPreload)(()=>i.e("414").then(i.bind(i,8873))),x=(0,u.lazyWithPreload)(()=>i.e("11").then(i.bind(i,1185))),S=(0,u.lazyWithPreload)(()=>i.e("933").then(i.bind(i,8073))),A=(0,u.lazyWithPreload)(()=>i.e("890").then(i.bind(i,5846))),k=(0,u.lazyWithPreload)(()=>i.e("142").then(i.bind(i,5127))),w=(0,u.lazyWithPreload)(()=>i.e("77").then(i.bind(i,5130))),C=(0,u.lazyWithPreload)(()=>i.e("859").then(i.bind(i,1142))),T=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("240")]).then(i.bind(i,4117))),E=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("587")]).then(i.bind(i,8793))),M=(0,u.lazyWithPreload)(()=>i.e("531").then(i.bind(i,6426))),B=(0,u.lazyWithPreload)(()=>i.e("664").then(i.bind(i,2819))),D=(0,u.lazyWithPreload)(()=>i.e("590").then(i.bind(i,4273))),O=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("143")]).then(i.bind(i,9132))),P=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("532")]).then(i.bind(i,3363))),I=(0,u.lazyWithPreload)(()=>Promise.all([i.e("212"),i.e("81"),i.e("418")]).then(i.bind(i,9634))),R=(0,u.lazyWithPreload)(()=>i.e("849").then(i.bind(i,3043))),L=(0,u.lazyWithPreload)(()=>i.e("219").then(i.bind(i,3136))),F=(0,u.lazyWithPreload)(()=>i.e("639").then(i.bind(i,299))),j=(0,u.lazyWithPreload)(()=>Promise.resolve().then(i.bind(i,5567))),Z=(0,u.lazyWithPreload)(()=>i.e("59").then(i.bind(i,245))),H=[{path:"/sensoro-design-charts/charts/Area",element:r.createElement(d),filePath:"charts/Area.mdx",preload:async()=>(await d.preload(),Promise.all([i.e("212"),i.e("81"),i.e("887")]).then(i.bind(i,1414))),lang:"",version:""},{path:"/sensoro-design-charts/charts/Bar",element:r.createElement(c),filePath:"charts/Bar.mdx",preload:async()=>(await c.preload(),Promise.all([i.e("212"),i.e("81"),i.e("833")]).then(i.bind(i,8815))),lang:"",version:""},{path:"/sensoro-design-charts/charts/Line",element:r.createElement(p),filePath:"charts/Line.mdx",preload:async()=>(await p.preload(),Promise.all([i.e("212"),i.e("81"),i.e("218")]).then(i.bind(i,9042))),lang:"",version:""},{path:"/sensoro-design-charts/charts/Pie",element:r.createElement(g),filePath:"charts/Pie.mdx",preload:async()=>(await g.preload(),Promise.all([i.e("212"),i.e("81"),i.e("94")]).then(i.bind(i,5201))),lang:"",version:""},{path:"/sensoro-design-charts/charts/RangeColumn",element:r.createElement(m),filePath:"charts/RangeColumn.mdx",preload:async()=>(await m.preload(),Promise.all([i.e("212"),i.e("81"),i.e("886")]).then(i.bind(i,9309))),lang:"",version:""},{path:"/sensoro-design-charts/charts/Sankey",element:r.createElement(f),filePath:"charts/Sankey.mdx",preload:async()=>(await f.preload(),Promise.all([i.e("212"),i.e("81"),i.e("142"),i.e("950")]).then(i.bind(i,8194))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Area/basic",element:r.createElement(v),filePath:"charts/demo/Area/basic.tsx",preload:async()=>(await v.preload(),i.e("841").then(i.bind(i,312))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Bar/basic",element:r.createElement(y),filePath:"charts/demo/Bar/basic.tsx",preload:async()=>(await y.preload(),i.e("612").then(i.bind(i,6496))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Line/basic",element:r.createElement(_),filePath:"charts/demo/Line/basic.tsx",preload:async()=>(await _.preload(),i.e("799").then(i.bind(i,8301))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Line/step1",element:r.createElement(b),filePath:"charts/demo/Line/step1.tsx",preload:async()=>(await b.preload(),i.e("414").then(i.bind(i,8873))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Pie/basic",element:r.createElement(x),filePath:"charts/demo/Pie/basic.tsx",preload:async()=>(await x.preload(),i.e("11").then(i.bind(i,1185))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Pie/ring",element:r.createElement(S),filePath:"charts/demo/Pie/ring.tsx",preload:async()=>(await S.preload(),i.e("933").then(i.bind(i,8073))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/RangeColumn/stack",element:r.createElement(A),filePath:"charts/demo/RangeColumn/stack.tsx",preload:async()=>(await A.preload(),i.e("890").then(i.bind(i,5846))),lang:"",version:""},{path:"/sensoro-design-charts/charts/demo/Sankey/basic",element:r.createElement(k),filePath:"charts/demo/Sankey/basic.tsx",preload:async()=>(await k.preload(),i.e("142").then(i.bind(i,5127))),lang:"",version:""},{path:"/sensoro-design-charts/charts/start/getting-started",element:r.createElement(w),filePath:"charts/start/getting-started.mdx",preload:async()=>(await w.preload(),i.e("77").then(i.bind(i,5130))),lang:"",version:""},{path:"/sensoro-design-charts/charts/start/introduction",element:r.createElement(C),filePath:"charts/start/introduction.mdx",preload:async()=>(await C.preload(),i.e("859").then(i.bind(i,1142))),lang:"",version:""},{path:"/sensoro-design-charts/custom/DoubleOverlapArea",element:r.createElement(T),filePath:"custom/DoubleOverlapArea.mdx",preload:async()=>(await T.preload(),Promise.all([i.e("212"),i.e("81"),i.e("240")]).then(i.bind(i,4117))),lang:"",version:""},{path:"/sensoro-design-charts/custom/HideAxesStackBar",element:r.createElement(E),filePath:"custom/HideAxesStackBar.mdx",preload:async()=>(await E.preload(),Promise.all([i.e("212"),i.e("81"),i.e("587")]).then(i.bind(i,8793))),lang:"",version:""},{path:"/sensoro-design-charts/custom/demo/DoubleOverlapArea/basic",element:r.createElement(M),filePath:"custom/demo/DoubleOverlapArea/basic.tsx",preload:async()=>(await M.preload(),i.e("531").then(i.bind(i,6426))),lang:"",version:""},{path:"/sensoro-design-charts/custom/demo/DoubleOverlapArea/decimal",element:r.createElement(B),filePath:"custom/demo/DoubleOverlapArea/decimal.tsx",preload:async()=>(await B.preload(),i.e("664").then(i.bind(i,2819))),lang:"",version:""},{path:"/sensoro-design-charts/custom/demo/HideAxesStackBar/basic",element:r.createElement(D),filePath:"custom/demo/HideAxesStackBar/basic.tsx",preload:async()=>(await D.preload(),i.e("590").then(i.bind(i,4273))),lang:"",version:""},{path:"/sensoro-design-charts/custom/",element:r.createElement(O),filePath:"custom/index.mdx",preload:async()=>(await O.preload(),Promise.all([i.e("212"),i.e("81"),i.e("143")]).then(i.bind(i,9132))),lang:"",version:""},{path:"/sensoro-design-charts/demos/config/Pie",element:r.createElement(P),filePath:"demos/config/Pie.mdx",preload:async()=>(await P.preload(),Promise.all([i.e("212"),i.e("81"),i.e("532")]).then(i.bind(i,3363))),lang:"",version:""},{path:"/sensoro-design-charts/demos/config/RangeColumn",element:r.createElement(I),filePath:"demos/config/RangeColumn.mdx",preload:async()=>(await I.preload(),Promise.all([i.e("212"),i.e("81"),i.e("418")]).then(i.bind(i,9634))),lang:"",version:""},{path:"/sensoro-design-charts/demos/config/demo/Pie/basic",element:r.createElement(R),filePath:"demos/config/demo/Pie/basic.tsx",preload:async()=>(await R.preload(),i.e("849").then(i.bind(i,3043))),lang:"",version:""},{path:"/sensoro-design-charts/demos/config/demo/RangeColumn/stack",element:r.createElement(L),filePath:"demos/config/demo/RangeColumn/stack.tsx",preload:async()=>(await L.preload(),i.e("219").then(i.bind(i,3136))),lang:"",version:""},{path:"/sensoro-design-charts/demos/",element:r.createElement(F),filePath:"demos/index.mdx",preload:async()=>(await F.preload(),i.e("639").then(i.bind(i,299))),lang:"",version:""},{path:"/sensoro-design-charts/global/ChartTheme",element:r.createElement(j),filePath:"global/ChartTheme.tsx",preload:async()=>(await j.preload(),Promise.resolve().then(i.bind(i,5567))),lang:"",version:""},{path:"/sensoro-design-charts/",element:r.createElement(Z),filePath:"index.md",preload:async()=>(await Z.preload(),i.e("59").then(i.bind(i,245))),lang:"",version:""}];var N=i(2817);function z(t){return decodeURIComponent(t).replace(/\.html$/,"").replace(/\/index$/,"/")}let V=new Map;function U(t){var e;let i=V.get(t);if(i)return i;let r=(0,N.fp)(H,z(t)),s=null==r?void 0:null===(e=r[0])||void 0===e?void 0:e.route;return s&&V.set(t,s),s}let W=(0,r.memo)(function(t){var e;let i=t.el;return(null===h.default||void 0===h.default?void 0:null===(e=h.default.themeConfig)||void 0===e?void 0:e.enableContentAnimation)&&(i=function(t){let[e,i]=(0,r.useState)(t);return(0,r.useLayoutEffect)(()=>{document.startViewTransition&&e!==t?document.startViewTransition(()=>{(0,s.flushSync)(()=>{i(t)}),window.dispatchEvent(new Event("RspressReloadContent"))}):((0,s.flushSync)(()=>{i(t)}),window.dispatchEvent(new Event("RspressReloadContent")))},[t]),e}(t.el)),i},(t,e)=>t.el===e.el);var G=i(9449);function $(t="/"){return(0,G.pJ)(t,h.default.base)}function X(t){var e;let i=!!(null===h.default||void 0===h.default?void 0:null===(e=h.default.route)||void 0===e?void 0:e.cleanUrls);return(0,G.yc)(t,i)}G.nY;var Y=G.yv;G.Kw,G.Qj;var K=i(9267),q=i(3810),J=K.VK,Q=({fallback:t=(0,o.jsx)(o.Fragment,{})})=>{let{pathname:e}=(0,l.TH)(),i=U(e);if(!i)return(0,o.jsx)("div",{});let s=i.element;return(0,o.jsx)(r.Suspense,{fallback:t,children:(0,o.jsx)(W,{el:s})})},tt=n;q.ql;var te=function(t){let{children:e}=t,[i,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{s(!0)},[]),i)?(0,o.jsx)(o.Fragment,{children:e}):null},ti=a,tr=function(t,e){return $(X((0,G.lm)(t)))===$(X((0,G.lm)(e)))},ts=Y,tn=N.LX;N.fp;var ta=X,to=function(t){var e;return!(0,G.yv)()||(e=t,(0,G.xf)(e)||(0,G.pZ)(e)||e.startsWith("//"))||!t.startsWith("/")?t:$(t)},tl=z,th=U,tu=function(t){return(0,G.E9)(t,h.default.base)},td=function(){return"dark"===(0,r.useContext)(a).theme},tc=function(){return(0,r.useContext)(n).data.page.lang||""},tp=l.TH,tg=l.s0,tm=function(){return(0,r.useContext)(n).data};K.lr;var tf=function(){return(0,r.useContext)(n).data.page.version||""},tv=$},633:function(t,e,i){"use strict";i.d(e,{T:()=>y});var r=i(4312),s=i(8068),n=i(3885),a=i(8469),o=i(666),l=i(6979);class h extends o.I{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["point","line","area","seriesMark","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","areaLabel"])}transformSpec(t){super.transformSpec(t),(0,l.R2)(t)}}var u=i(5839),d=i(7773),c=i(4224);class p extends u.P{constructor(){super(...arguments),this.transformerConstructor=h,this.type="area",this.seriesType=n.A.area}}p.type="area",p.seriesType=n.A.area,p.transformerConstructor=h,(0,d.jB)(p,c.T);var g=i(1637),m=i(4871),f=i(8869),v=i(1522);let y=(0,f.C)("AreaChart",{type:"area",vchartConstrouctor:r.H},[()=>{(0,s.w)(),a.F.registerChart(p.type,p)},g.U,m.v$,...v.l])},1886:function(t,e,i){"use strict";i.d(e,{v:()=>_});var r=i(4312),s=i(3418),n=i(3885),a=i(8469),o=i(4154),l=i(666),h=i(6979);class u extends l.I{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barMinHeight","sampling","samplingFactor","barBackground","stackCornerRadius"])}transformSpec(t){super.transformSpec(t),(0,h.R2)(t)}_transformAxisSpec(t){var e,i;if(super._transformAxisSpec(t),!t.axes)return;let r=t.series.some(t=>"horizontal"===t.direction),s=null!==(e=t.axes.find(t=>"band"===t.type))&&void 0!==e?e:t.axes.find(t=>(r?["left","right"]:["top","bottom"]).includes(t.orient));if(s&&!s.bandSize&&!s.maxBandSize&&!s.minBandSize&&t.autoBandSize){let e=(0,o.Z)(t.autoBandSize)&&null!==(i=t.autoBandSize.extend)&&void 0!==i?i:0,{barMaxWidth:r,barMinWidth:n,barWidth:a,barGapInGroup:l}=t.series.find(t=>"bar"===t.type);this._applyAxisBandSize(s,e,{barMaxWidth:r,barMinWidth:n,barWidth:a,barGapInGroup:l})}}}var d=i(5839),c=i(7773),p=i(4224);class g extends d.P{constructor(){super(...arguments),this.transformerConstructor=u,this.type="bar",this.seriesType=n.A.bar}}g.type="bar",g.seriesType=n.A.bar,g.transformerConstructor=u,(0,c.jB)(g,p.T);var m=i(1637),f=i(4871),v=i(8869),y=i(1522);let _=(0,v.C)("BarChart",{type:"bar",vchartConstrouctor:r.H},[()=>{(0,s.QD)(),a.F.registerChart(g.type,g)},m.U,f.v$,...y.l])},8869:function(t,e,i){"use strict";i.d(e,{C:()=>E});var r=i(5271),s=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let n=r.createContext(null);n.displayName="ChartContext";var a=i(6082),o=i(9198),l=i(7623),h=i(9730);let u=r.createContext(null);u.displayName="ViewContext";var d=i(6479);let c=t=>{let e=[];return r.Children.forEach(t,t=>{(0,a.Z)(t)||((0,d.isFragment)(t)?e=e.concat(c(t.props.children)):e.push(t))}),e},p={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"},g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{onLegendItemHover:"legendItemHover",onLegendItemUnHover:"legendItemUnHover",onLegendItemClick:"legendItemClick",onLegendFilter:"legendFilter",onLegendSelectedDataChange:"legendSelectedDataChange"}),{onBrushStart:"brushStart",onBrushChange:"brushChange",onBrushEnd:"brushEnd",onBrushClear:"brushClear"}),{onPlayerPlay:"playerPlay",onPlayerPause:"playerPause",onPlayerEnd:"playerEnd",onPlayerChange:"playerChange",onPlayerForward:"playerForward",onPlayerBackward:"playerBackward"}),{onDataZoomChange:"dataZoomChange"}),{onScrollBarChange:"scrollBarChange"}),{onDimensionHover:"dimensionHover",onDimensionClick:"dimensionClick"}),{onInitialized:"initialized",onRendered:"rendered",onRenderFinished:"renderFinished",onAnimationFinished:"animationFinished",onLayoutStart:"layoutStart",onLayoutEnd:"layoutEnd"}),{onDrill:"drill"}),p),m=Object.keys(g).concat(Object.keys(p).map(t=>`${t}Filter`));Object.keys(p),Object.keys(p).reduce((t,e)=>(t[p[e]]=e,t),{});let f=(t,e=p)=>{let i={};return Object.keys(t).forEach(r=>{e[r]&&t[r]&&(i[r]=t[r])}),i},v=(t,e,i,r=p)=>{if(!e&&!i||!t)return!1;let s=i?f(i,r):null,n=e?f(e,r):null;return s&&Object.keys(s).forEach(e=>{n&&n[e]&&n[e]===s[e]||t.off(r[e],s[e])}),n&&Object.keys(n).forEach(i=>{if(!s||!s[i]||s[i]!==n[i]){let s=e[`${i}Filter`];s?t.on(r[i],s,n[i]):t.on(r[i],n[i])}}),!0};var y=i(4154),_=i(3685);let b=`${_.Bq}_REACT_TOOLTIP`;var x=i(967);let S=(t,e,i)=>{let s;if((null==i?void 0:i.tooltipRender)?(s=i.tooltipRender,delete i.tooltipRender):(null==i?void 0:i.children)?s=(t,e,s)=>r.Children.map(i.children,i=>(0,y.Z)(i)?r.cloneElement(i,{tooltipElement:t,actualTooltip:e,params:s}):i):e.tooltipRender&&(s=e.tooltipRender),s){let n;return(null==i?void 0:i.reserveDefaultTooltip)?(n=i.reserveDefaultTooltip,delete i.reserveDefaultTooltip):n=e.reserveDefaultTooltip,Object.assign(Object.assign({},i),{updateElement:(e,i,a)=>{let{changePositionOnly:o}=a;if(!o){if(!n){e.style.width="auto",e.style.height="auto",e.style.minHeight="auto",e.style.padding="0px";for(let t=0;t<e.children.length;t++){let i=e.children[t];i.className!==b&&"none"!==i.style.display&&(i.style.display="none")}}t((0,x.createPortal)(r.createElement("div",{className:b},s(e,i,a)),e))}}})}return i},A=["children","hooks","ref",...m,"vchartConstrouctor","useSyncRender","skipFunctionDiff","onError","onReady","spec","container","options","morphConfig"],k={morph:!1,enableExitAnimation:!1},w=(t,e)=>`${t&&t.type&&(t.type.displayName||t.type.name)}-${e}`,C=t=>{let e={};return c(t.children).map((t,i)=>{let r=t&&t.type&&t.type.parseSpec;if(r&&t.props){let s=r((0,a.Z)(t.props.componentId)?Object.assign(Object.assign({},t.props),{componentId:w(t,i)}):t.props);s.isSingle?e[s.specName]=s.spec:(e[s.specName]||(e[s.specName]=[]),e[s.specName].push(s.spec))}}),e},T=r.forwardRef((t,e)=>{let[i,s]=(0,r.useState)(0),a=(0,r.useRef)({});(0,r.useImperativeHandle)(e,()=>{var t;return null===(t=a.current)||void 0===t?void 0:t.chart});let d=!!t.spec,[p,m]=(0,r.useState)(null),f=(0,r.useRef)(!1),y=(0,r.useRef)((0,o.Z)(t,A)),_=(0,r.useRef)(null),b=r.useRef(null),x=!!t.skipFunctionDiff,[T,E]=(0,r.useState)(null),M=t=>{let e;d&&t.spec?(e=t.spec,(0,l.Z)(t.data)&&(e=Object.assign(Object.assign({},t.spec),{data:t.data}))):e=Object.assign(Object.assign({},y.current),_.current);let i=S(E,t,e.tooltip);return i&&(e.tooltip=i),e},B=()=>{if(!f.current){if(!a.current||!a.current.chart)return;v(a.current.chart,t,b.current,g);let e=a.current.chart.getCompiler().getVGrammarView();s(i+1),t.onReady&&t.onReady(a.current.chart,0===i),m(e)}};return(0,r.useEffect)(()=>{var e,i,r;let s=d?null:C(t);if(!(null===(e=a.current)||void 0===e?void 0:e.chart))return d||(_.current=s),(t=>{let e=new t.vchartConstrouctor(M(t),Object.assign(Object.assign({},t.options),{onError:t.onError,autoFit:!0,dom:t.container}));a.current=Object.assign(Object.assign({},a.current),{chart:e}),f.current=!1})(t),a.current.chart&&(a.current.chart.renderSync({reuse:!1}),B()),void(b.current=t);if(d)return void((0,h.X)(b.current.spec,t.spec,{skipFunction:x})?b.current.data!==t.data&&(a.current.chart.updateFullDataSync(t.data),B(),b.current=t):(a.current.chart.updateSpecSync(M(t),void 0,null!==(i=t.morphConfig)&&void 0!==i?i:k),B(),b.current=t));let n=(0,o.Z)(t,A);(0,h.X)(n,y.current,{skipFunction:x})&&(0,h.X)(s,_.current)||(y.current=n,_.current=s,a.current.chart.updateSpecSync(M(t),void 0,null!==(r=t.morphConfig)&&void 0!==r?r:k),B(),b.current=t)},[t]),(0,r.useEffect)(()=>()=>{a&&a.current&&a.current.chart&&(a.current.chart.release(),a.current.chart=null),b.current=null,f.current=!0},[]),r.createElement(n.Provider,{value:a.current},r.createElement(u.Provider,{value:p},c(t.children).map((t,e)=>{if("string"==typeof t)return null;let s=w(t,e);return r.createElement(r.Fragment,{key:s},r.cloneElement(t,{updateId:i,componentId:s}))}),T))}),E=(t,e,i)=>{i&&i.length&&e.vchartConstrouctor&&e.vchartConstrouctor.useRegisters(i);let n=function(t,e="ChartContainer",i){let n=r.forwardRef((e,n)=>{let a=(0,r.useRef)(),[o,l]=(0,r.useState)(!1),{className:h,style:u,width:d}=e,c=s(e,["className","style","width"]);return(0,r.useLayoutEffect)(()=>{l(!0)},[]),r.createElement("div",{ref:a,className:h,style:Object.assign({position:"relative",height:e.height||"100%",width:e.width||"100%"},u)},o?r.createElement(t,Object.assign({ref:n,container:a.current},i?i(c):c)):r.createElement(r.Fragment,null))});return n.displayName=e||t.name,n}(T,t,t=>e?Object.assign(t,e):t);return n.displayName=t,n}},1696:function(t,e,i){"use strict";i.d(e,{h:()=>tt});var r=i(4312),s=i(5839),n=i(8469),a=i(4154),o=i(1130),l=i(5507),h=i(6979),u=i(4218);class d extends l.w{_getDefaultSeriesSpec(t){let e=super._getDefaultSeriesSpec(t);return delete e.data,e}_transformAxisSpec(t){t.axes&&t.autoBandSize&&t.series.forEach((e,i)=>{var r;if("bar"===e.type){let s=this._findBandAxisBySeries(e,i,t.axes);if(s&&!s.bandSize&&!s.maxBandSize&&!s.minBandSize){let t=(0,a.Z)(e.autoBandSize)&&null!==(r=e.autoBandSize.extend)&&void 0!==r?r:0,{barMaxWidth:i,barMinWidth:n,barWidth:o,barGapInGroup:l}=e;this._applyAxisBandSize(s,t,{barMaxWidth:i,barMinWidth:n,barWidth:o,barGapInGroup:l})}}})}transformSpec(t){if(super.transformSpec(t),t.series&&t.series.length){let e=this._getDefaultSeriesSpec(t);t.series.forEach(t=>{this._isValidSeries(t.type)&&Object.keys(e).forEach(i=>{i in t||(t[i]=e[i])})})}t.axes&&t.axes.length&&t.axes.forEach(e=>{(0,o.Z)(e,"trimPadding")&&(0,u.H)(e,(0,h.Sh)(this.type,t))}),this._transformAxisSpec(t)}}var c=i(4224),p=i(7773);class g extends s.P{constructor(){super(...arguments),this.transformerConstructor=d,this.type="common"}}g.type="common",g.transformerConstructor=d,(0,p.jB)(g,c.T);var m=i(7501),f=i(1532),v=i(5103),y=i(6818),_=i(9026),b=i(1637),x=i(4871),S=i(8068),A=i(3418),k=i(9208),w=i(3685),C=i(5287),T=i(9038),E=i(7636),M=i(6082),B=i(1601),D=i(9904);let O=t=>"string"==typeof t&&!isNaN(Number(t))&&!isNaN(parseFloat(t));var P=i(7623),I=i(9231),R=i(3885),L=i(5208),F=i(5173);let j=[10,20],Z=F._f.Linear,H="circle",N=F._f.Ordinal,z=["circle","square","triangle","diamond","star"];var V=i(208),U=i(4380);let W=(t,e)=>"fadeIn"===e?{type:"fadeIn"}:{type:"scaleIn"},G=()=>{n.F.registerAnimation("scatter",(t,e)=>Object.assign({appear:W(0,e)},U.tF))};var $=i(3679);let X=Object.assign(Object.assign({},i(4331).UI),{point:{name:"point",type:"symbol"}});var Y=i(9540);class K extends Y.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"point")}}var q=i(4498);class J extends C.i{constructor(){super(...arguments),this.type=R.A.scatter,this.transformerConstructor=K,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(t,e,{defaultScaleType:i,defaultRange:r},s){var n,o,l,h;if((0,T.Z)(e))return e;if((0,E.Z)(e)){if((0,M.Z)(t))return null===(n=this._option)||void 0===n||n.onError(`${s}Field is required.`),e;if("ordinal"!==i&&e.length>2)return null===(o=this._option)||void 0===o||o.onError(`${s} length is invalid, specify up to 2 ${s}s.`),e;let r=`${w.Bq}_series_scatter_${this.id}_scale_${s}`;return this._option.globalScale.registerModelScale({id:r,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:e}),{scale:r,field:t}}if((0,a.Z)(e)){if((0,M.Z)(t))return null===(l=this._option)||void 0===l||l.onError(`${s}Field is required.`),e;let n=Object.assign({id:`${w.Bq}_series_scatter_${this.id}_scale_${s}`,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:r},e);return this._option.globalScale.registerModelScale(n),{scale:n.id,field:t}}return null===(h=this._option)||void 0===h||h.onError(`${s} attribute is invalid.`),e}getSizeAttribute(t,e){return(0,M.Z)(e)?10:(0,B.Z)(e)?e:(0,D.Z)(e)&&O(e)?parseFloat(e):this._getSeriesAttribute(t,e,{defaultScaleType:Z,defaultRange:j},"size")}getShapeAttribute(t,e){return(0,M.Z)(e)?H:(0,D.Z)(e)?e:this._getSeriesAttribute(t,e,{defaultScaleType:N,defaultRange:z},"shape")}initMark(){var t,e;this._symbolMark=this._createMark(J.mark.point,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:null===(t=this._spec.point)||void 0===t?void 0:t.stateSort},{progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold,morph:(0,V.yx)(this._spec,J.mark.point.name),morphElementKey:this.getDimensionField()[0],setCustomizedShape:null===(e=this._spec.point)||void 0===e?void 0:e.customShape})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var t,e,i;let r=(0,q.mh)(this),s=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;this._symbolMark.setAnimationConfig((0,V._8)(null===(i=n.F.getAnimationInKey("scatter"))||void 0===i?void 0:i({},s),(0,V.hT)("point",this._spec,this._markAttributeContext),r))}initSymbolMarkStyle(){let t=this._symbolMark;t&&("zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:(0,B.Z)(this._size)||(0,T.Z)(this._size)?this._size:10,symbolType:(0,D.Z)(this._shape)||(0,T.Z)(this._shape)?this._shape:H},L.q.STATE_NORMAL,I.W.Series),((0,P.Z)(this._sizeField)||(0,P.Z)(this._size))&&this.setMarkStyle(t,{size:this.getSizeAttribute(this._sizeField,this._size)},L.q.STATE_NORMAL,I.W.User_Mark),((0,P.Z)(this._shapeField)||(0,P.Z)(this._shape))&&this.setMarkStyle(t,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},L.q.STATE_NORMAL,I.W.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t);let e=[this.getDimensionField()[0],this.getStackValueField()].every(t=>{var e,i,r;return t&&(null===(r=null===(i=null===(e=this.getViewDataStatistics())||void 0===e?void 0:e.latestData)||void 0===i?void 0:i[t])||void 0===r?void 0:r.allValid)});"zero"===this._invalidType||e?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",I.W.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",I.W.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},L.q.STATE_NORMAL,I.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},L.q.STATE_NORMAL,I.W.Series))}handleZoom(t){var e,i;this.getMarksWithoutRoot().forEach(t=>{let e=t.getProduct();e&&e.elements&&e.elements.length&&e.elements.forEach((t,e)=>{let i=t.getGraphicItem(),r=t.getDatum(),s=this.dataToPosition(r);s&&i&&i.translateTo(s.x,s.y)})});let r=null===(i=null===(e=this._labelMark)||void 0===e?void 0:e.getComponent())||void 0===i?void 0:i.getProduct();r&&r.evaluate(null,null)}handlePan(t){this.handleZoom(t)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}J.type=R.A.scatter,J.mark=X,J.transformerConstructor=K;var Q=i(168);let tt=(0,i(8869).C)("CommonChart",{type:"common",vchartConstrouctor:r.H},[()=>{n.F.registerChart(g.type,g)},m.E,f.N,v.w,y.K,_.i,b.U,x.v$,S.w,A.QD,k.i,()=>{(0,$.Ou)(),G(),(0,f.N)(),(0,m.E)(),n.F.registerSeries(J.type,J)},Q.iA])},4852:function(t,e,i){"use strict";i.d(e,{w:()=>v});var r=i(4312),s=i(3885),n=i(9208),a=i(8469),o=i(666),l=i(6979);class h extends o.I{_getDefaultSeriesSpec(t){var e;let i=super._getDefaultSeriesSpec(t,["point","line","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","lineLabel"]);return i.seriesMark=null!==(e=t.seriesMark)&&void 0!==e?e:"line",i}transformSpec(t){super.transformSpec(t),(0,l.R2)(t)}}var u=i(5839),d=i(4224),c=i(7773);class p extends u.P{constructor(){super(...arguments),this.transformerConstructor=h,this.type="line",this.seriesType=s.A.line}}p.type="line",p.seriesType=s.A.line,p.transformerConstructor=h,(0,c.jB)(p,d.T);var g=i(1637),m=i(8869),f=i(1522);let v=(0,m.C)("LineChart",{type:"line",vchartConstrouctor:r.H},[()=>{(0,n.i)(),a.F.registerChart(p.type,p)},g.U,...f.l])},292:function(t,e,i){"use strict";i.d(e,{u:()=>G});var r=i(4312),s=i(168),n=i(3885),a=i(5839),o=i(4546),l=i(7623),h=i(6082),u=i(7636),d=i(5507);class c extends d.w{_isValidSeries(t){return!this.seriesType||t===this.seriesType}getIndicatorSpec(t){var e,i,r;let s=(0,o.IX)(t.indicator),n=null!==(e=t.innerRadius)&&void 0!==e?e:null===(r=null===(i=t.series)||void 0===i?void 0:i[0])||void 0===r?void 0:r.innerRadius;return(0,l.Z)(n)&&s.forEach(t=>{(0,h.Z)(t.limitRatio)&&(t.limitRatio=n)}),s}_getDefaultSeriesSpec(t,e){return super._getDefaultSeriesSpec(t,["radius","outerRadius","innerRadius","startAngle","endAngle","sortDataByAxis"],e)}transformSpec(t){super.transformSpec(t),(0,u.Z)(t.dataZoom)&&t.dataZoom.length>0&&t.dataZoom.forEach(t=>{"axis"===t.filterMode&&(t.filterMode="filter")}),this.transformSeriesSpec(t),(0,l.Z)(t.indicator)&&(t.indicator=this.getIndicatorSpec(t))}}class p extends c{needAxes(){return!1}_getDefaultSeriesSpec(t){var e;let i=super._getDefaultSeriesSpec(t,["center","centerOffset","cornerRadius","padAngle","minAngle","emptyPlaceholder","showAllZero","supportNegative","layoutRadius"]);return i.categoryField=t.categoryField||t.seriesField,i.valueField=t.valueField||t.angleField,i.emptyCircle=null===(e=t.emptyPlaceholder)||void 0===e?void 0:e.emptyCircle,i}}class g extends a.P{constructor(){super(...arguments),this.transformerConstructor=p}}g.transformerConstructor=p;var m=i(8469);class f extends g{constructor(){super(...arguments),this.transformerConstructor=p,this.type="pie",this.seriesType=n.A.pie}}f.type="pie",f.seriesType=n.A.pie,f.transformerConstructor=p;var v=i(1637),y=i(6338),_=i(6542),b=i(7602),x=i(8746),S=i(4218),A=i(123),k=i(1960),w=i(9198),C=i(9730),T=i(9038);let E=(t,e)=>{let{datum:i,title:r,content:s}=e,n=[],a=i.call(null);return r.visible&&n.push({type:"title",index:0,datum:a,spec:r}),(0,o.IX)(s).forEach((t,e)=>{t.visible&&n.push({type:"content",index:e,datum:a,spec:t})}),n};var M=i(6358),B=i(3558),D=i(325),O=i(1130),P=i(8378),I=i(3e3),R=i(8144);let L={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};var F=i(9367),j=i(5757),Z=i(4683);(0,F.M)(),(0,j.g)(),(0,Z.v)();class H extends I.k{constructor(){super(...arguments),this.name="indicator"}_renderText(t,e,i,r,s,n){if(!1!==e.visible){let a=(0,D.Z)({},(0,O.Z)(L,s),e.style,{visible:e.visible});a.lineHeight=(0,l.Z)(a.lineHeight)?a.lineHeight:a.fontSize,e.formatMethod&&(a._originText=a.text,a.text=e.formatMethod(a.text,a));let o=(0,R.vS)(a);return o.name=n,t.appendChild(o),e.autoFit&&(0,P.Z)(i)&&this._setLocalAutoFit(i,o,e),e.autoLimit&&(0,P.Z)(r)&&o.setAttribute("maxLineWidth",i),o}}render(){var t,e;if(this.removeAllChild(!0),!0!==this.attribute.visible)return;let{title:i={},content:r,size:s,limitRatio:n=1/0}=this.attribute,a=Math.min(s.width,s.height)*n,h=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1,pickable:null===(t=this.attribute.pickable)||void 0===t||t},"group");if((0,l.Z)(i)&&(this._title=this._renderText(h,i,a,n,"title.style","indicator-title")),(0,l.Z)(r)){let t=(0,o.IX)(r),e=[];t.forEach((t,i)=>{!1!==t.visible&&e.push(this._renderText(h,t,a,n,"content.style","indicator-content-"+i))}),this._content=e}this._setGlobalAutoFit(a),this._setYPosition();let u=null!==(e=null==h?void 0:h.AABBBounds.height())&&void 0!==e?e:0;h.setAttribute("y",s.height/2-u/2),h.setAttribute("x",s.width/2)}_setLocalAutoFit(t,e,i){var r,s,n,a,o,h,u,d,c;if("default"!==(null!==(r=i.fitStrategy)&&void 0!==r?r:"default"))return;let p=(0,R.fe)(null!==(n=null===(s=i.style)||void 0===s?void 0:s.text)&&void 0!==n?n:"",null!==(a=i.style)&&void 0!==a?a:{},null===(h=null===(o=this.stage)||void 0===o?void 0:o.getTheme())||void 0===h?void 0:h.text).width;if(p>0){let r=t*(null!==(u=i.fitPercent)&&void 0!==u?u:.5)/p,s=Math.floor((null!==(c=null===(d=i.style)||void 0===d?void 0:d.fontSize)&&void 0!==c?c:20)*r);e.setAttribute("fontSize",s),e.setAttribute("lineHeight",(0,l.Z)(i.style.lineHeight)?i.style.lineHeight:s)}}_setGlobalAutoFit(t){var e,i,r,s,n,a,h;let u=[],d=0,c=null!==(e=this.attribute.title)&&void 0!==e?e:{};c.autoFit&&"inscribed"===c.fitStrategy?(this._title.setAttribute("fontSize",12),u.push({text:this._title,spec:null!==(i=this.attribute.title)&&void 0!==i?i:{}})):d+=null!==(a=null===(n=null===(s=null===(r=this._title)||void 0===r?void 0:r.AABBBounds)||void 0===s?void 0:s.height)||void 0===n?void 0:n.call(s))&&void 0!==a?a:0;let p=null!==(h=c.space)&&void 0!==h?h:0;if(d+=p,(0,o.IX)(this.attribute.content).filter(t=>!1!==t.visible).forEach((t,e)=>{var i,r,s,n;let a=this._content[e];t.autoFit&&"inscribed"===t.fitStrategy?(a.setAttribute("fontSize",12),u.push({text:a,spec:t})):d+=null!==(s=null===(r=null===(i=null==a?void 0:a.AABBBounds)||void 0===i?void 0:i.height)||void 0===r?void 0:r.call(i))&&void 0!==s?s:0;let o=null!==(n=t.space)&&void 0!==n?n:0;d+=o}),u.length<=0)return;let g=12/u.reduce((t,e)=>Math.max(t,e.text.AABBBounds.width()),0)*u.length,m=d/2,f=g**2+1,v=2*m*g,y=2*((-v+Math.sqrt(v**2-4*f*(m**2-(t/2)**2)))/(2*f)*g+m),_=(y-d)/u.length;(0,P.Z)(y)&&u.forEach(t=>{var e;let i=null===(e=t.spec.style)||void 0===e?void 0:e.lineHeight;t.text.setAttribute("fontSize",_),t.text.setAttribute("lineHeight",(0,l.Z)(i)?i:_)})}_setYPosition(){var t,e,i,r,s,n;let a=0,l=null!==(r=null===(i=null===(e=null===(t=this._title)||void 0===t?void 0:t.AABBBounds)||void 0===e?void 0:e.height)||void 0===i?void 0:i.call(e))&&void 0!==r?r:0,h=null!==(n=null===(s=this.attribute.title)||void 0===s?void 0:s.space)&&void 0!==n?n:0;(0,o.IX)(this.attribute.content).filter(t=>!1!==t.visible).forEach((t,e)=>{var i;let r=this._content[e];r.setAttribute("y",l+h+a);let s=null!==(i=t.space)&&void 0!==i?i:0;a+=r.AABBBounds.height()+s})}}var N=i(2096),z=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class V extends x.H{constructor(){super(...arguments),this.type=b.L.indicator,this.name=b.L.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=_.Ai.Indicator,this.layoutLevel=_.pM.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(t){return(0,N.ts)(t,this.specKey,this.type,t=>t&&!1!==t.visible)}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=(0,o.IX)(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex((0,o.IX)(this._spec.regionId),(0,o.IX)(this._spec.regionIndex))}onRender(t){}changeRegions(t){}initEvent(){var t;if(this._option.disableTriggerEvent||"none"===this._spec.trigger)return;let e=null===(t=this.getCompiler())||void 0===t?void 0:t.getVGrammarView();e&&("hover"===this._spec.trigger?(e.addEventListener("element-highlight:start",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(t.elements[0].getDatum())}),e.addEventListener("element-highlight:reset",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(null)})):(e.addEventListener("element-select:start",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(t.elements[0].getDatum())}),e.addEventListener("element-select:reset",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(null)})))}updateDatum(t){this._activeDatum=t,this._displayData.updateData();let e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e)}initData(){(0,M.U)(this._option.dataSet,"indicatorFilter",E);let t=new y.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});t.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),t.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new B.O(this._option,t)}updateLayoutAttribute(){let t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t),super.updateLayoutAttribute()}_getIndicatorAttrs(){if(!1===this._spec.visible||!1===this._spec.fixed&&null===this._activeDatum)return{visible:!1};let t=this._regions[0],{width:e,height:i}=t.getLayoutRect(),{x:r,y:s}=t.getLayoutStartPoint(),n=this._spec,{content:a,offsetX:h,offsetY:u,limitRatio:d,title:c}=n,p=z(n,["content","offsetX","offsetY","limitRatio","title"]),g=[];return(0,o.IX)(a).forEach(t=>{let e=(0,S.H)({},this._theme.content,t);g.push({visible:!1!==e.visible&&(!e.field||null!==this._activeDatum),space:e.space||this._gap,autoLimit:e.autoLimit,autoFit:e.autoFit,fitPercent:e.fitPercent,fitStrategy:e.fitStrategy,style:Object.assign(Object.assign({},(0,A.ko)((0,w.Z)(e.style,["text"]),this._activeDatum)),{text:this._createText(e.field,e.style.text)})})}),Object.assign({visible:!0,size:{width:e,height:i},zIndex:this.layoutZIndex,x:r,y:s,dx:h?(0,k.uj)(h,this._computeLayoutRadius()):0,dy:u?(0,k.uj)(u,this._computeLayoutRadius()):0,limitRatio:d||1/0,title:{visible:!1!==c.visible&&(!(0,l.Z)(c.field)||null!==this._activeDatum),space:c.space||this._gap,autoLimit:c.autoLimit,autoFit:c.autoFit,fitPercent:c.fitPercent,fitStrategy:c.fitStrategy,style:Object.assign(Object.assign({},(0,A.ko)((0,w.Z)(c.style,["text"]),this._activeDatum)),{text:this._createText(c.field,c.style.text)})},content:g},p)}_createOrUpdateIndicatorComponent(t){if(!1===t.visible)return this._indicatorComponent&&this._indicatorComponent.parent&&this._indicatorComponent.parent.removeChild(this._indicatorComponent),void(this._indicatorComponent=null);if(this._indicatorComponent)(0,C.X)(t,this._cacheAttrs)||this._indicatorComponent.setAttributes(t);else{let e=this.getContainer(),i=new H(t);i.name="indicator",e.add(i),this._indicatorComponent=i,this._indicatorComponent.on("*",(t,e)=>this._delegateEvent(this._indicatorComponent,t,e))}this._cacheAttrs=t}_createText(t,e){var i;return t?this._activeDatum?this._activeDatum[t]:"":(0,T.Z)(e)?null!==(i=e(this._activeDatum,void 0))&&void 0!==i?i:"":null!=e?e:""}_computeLayoutRadius(){let{width:t,height:e}=this._regions[0].getLayoutRect();return Math.min(t/2,e/2)}isRelativeModel(t){return this._regions.some(e=>e.id===t)}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}}V.type=b.L.indicator,V.specKey="indicator";var U=i(8869),W=i(5593);let G=(0,U.C)("PieChart",{type:"pie",vchartConstrouctor:r.H},[()=>{(0,s.iA)(),m.F.registerChart(f.type,f)},v.U,()=>{m.F.registerComponent(V.type,V)},...W.l])},7782:function(t,e,i){"use strict";i.d(e,{Q:()=>I});var r=i(4312),s=i(3885),n=i(8469),a=i(3418),o=i(6264),l=i(5595),h=i(9231),u=i(208),d=i(1889);class c extends d.O{constructor(){super(...arguments),this._getMeasureData=t=>"horizontal"===this.series.getSpec().direction?t[this.series.getSpec().xField[0]]+"-"+t[this.series.getSpec().xField[1]]:t[this.series.getSpec().yField[0]]+"-"+t[this.series.getSpec().yField[1]]}}var p=i(4380);let g=t=>({type:"growCenterIn",options:{direction:"horizontal"===t.direction?"x":"y"}}),m={type:"fadeIn"},f=t=>({type:"growCenterOut",options:{direction:"horizontal"===t.direction?"x":"y"}}),v=()=>{n.F.registerAnimation("rangeColumn",(t,e)=>({appear:"fadeIn"===e?m:g(t),enter:g(t),exit:f(t),disappear:f(t)}))};var y=i(6843);let _=Object.assign(Object.assign({},y.w),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});Object.assign(Object.assign({},y.S),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});var b=i(4498),x=i(3610);class S extends x.w{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){var e;"bothEnd"!==(null===(e=t.label)||void 0===e?void 0:e.position)&&this._addMarkLabelSpec(t,"bar")}}var A=i(1532),k=i(7501);class w extends a.QG{constructor(){super(...arguments),this.type=s.A.rangeColumn,this._barMarkType="rect",this._barName=s.A.bar,this.transformerConstructor=S}initMark(){var t,e,i,r,s,n,a,o,l,h;this._initBarBackgroundMark();let d=null===(t=this._spec.label)||void 0===t?void 0:t.position;this._barMark=this._createMark(w.mark.bar,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:null===(e=this._spec.bar)||void 0===e?void 0:e.stateSort},{setCustomizedShape:null===(i=this._spec.bar)||void 0===i?void 0:i.customShape,morph:(0,u.yx)(this._spec,w.mark.bar.name),morphElementKey:this.getDimensionField()[0]}),!1!==(null===(r=this._spec.label)||void 0===r?void 0:r.visible)&&"bothEnd"===d&&(!1!==(null===(n=null===(s=this._spec.label)||void 0===s?void 0:s.minLabel)||void 0===n?void 0:n.visible)&&(this._minLabelMark=this._createMark(w.mark.minLabel,{markSpec:null===(a=this._spec.label)||void 0===a?void 0:a.minLabel})),!1!==(null===(l=null===(o=this._spec.label)||void 0===o?void 0:o.maxLabel)||void 0===l?void 0:l.visible)&&(this._maxLabelMark=this._createMark(w.mark.maxLabel,{markSpec:null===(h=this._spec.label)||void 0===h?void 0:h.maxLabel})))}initMarkStyle(){var t,e;super.initMarkStyle(),this._initLabelMarkPos(this._minLabelMark,null===(t=this._spec.label)||void 0===t?void 0:t.minLabel,0,"end"),this._initLabelMarkPos(this._maxLabelMark,null===(e=this._spec.label)||void 0===e?void 0:e.maxLabel,1,"start")}_initLabelMarkPos(t,e,i,r){var s,n,a,o,l,u,d,c,p;if(t){this.setMarkStyle(t,{fill:null!==(n=null===(s=null==e?void 0:e.style)||void 0===s?void 0:s.fill)&&void 0!==n?n:this.getColorAttribute(),text:t=>{let r="horizontal"===this._spec.direction?t[this._spec.xField[i]]:t[this._spec.yField[i]];return(null==e?void 0:e.formatMethod)?e.formatMethod(r,t):r}});let g=null!==(a=null==e?void 0:e.position)&&void 0!==a?a:r,m=null!==(o=null==e?void 0:e.offset)&&void 0!==o?o:"vertical"===this._direction?-20:-25;l=t=>this._barMark.getAttribute("x",t),u=t=>"vertical"===this._direction?this._barMark.getAttribute("x",t)+this._barMark.getAttribute("width",t):this._barMark.getAttribute("x1",t),d=t=>this._barMark.getAttribute("y",t),c=t=>"vertical"===this._direction?this._barMark.getAttribute("y1",t):this._barMark.getAttribute("y",t)+this._barMark.getAttribute("height",t),p=()=>this._direction,this.setMarkStyle(t,{textAlign:t=>{if("vertical"===p())return"center";let e=l(t),i=u(t);if("middle"===g)return"center";if(e>=i){if("start"===g)return"left";if("end"===g)return"right";if("outside"===g)return"left"}else{if("start"===g)return"right";if("end"===g)return"left";if("outside"===g)return"right"}return"center"},textBaseline:t=>{if("horizontal"===p())return"middle";let e=d(t),i=c(t);if("middle"===g)return"middle";if(i>=e){if("start"===g)return"bottom";if("end"===g)return"top";if("outside"===g)return"bottom"}else{if("start"===g)return"top";if("end"===g)return"bottom";if("outside"===g)return"top"}return"middle"}}),this.setMarkStyle(t,{x:t=>{let e=p(),i=l(t),r=u(t);if("vertical"===e||"middle"===g)return(i+r)/2;if(i>=r){if("start"===g)return r+m;if("end"===g)return i-m;if("outside"===g)return i+m}else{if("start"===g)return r-m;if("end"===g)return i+m;if("outside"===g)return i-m}return(i+r)/2},y:t=>{let e=p(),i=d(t),r=c(t);if("horizontal"===e||"middle"===g)return(i+r)/2;if(i>=r){if("start"===g)return r+m;if("end"===g)return i-m;if("outside"===g)return i+m}else{if("start"===g)return r-m;if("end"===g)return i+m;if("outside"===g)return i-m}return(i+r)/2}},"normal",h.W.Series)}}initLabelMarkStyle(t){t&&(this.setMarkStyle(t,{text:t=>{let e,i;return"horizontal"===this._spec.direction?(e=t[this._spec.xField[0]],i=t[this._spec.xField[1]]):(e=t[this._spec.yField[0]],i=t[this._spec.yField[1]]),e+"-"+i},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=t)}_dataToPosX(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var t,e,i,r,s;let a=(0,b.mh)(this),o=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;this._barMark.setAnimationConfig((0,u._8)(null===(i=n.F.getAnimationInKey("rangeColumn"))||void 0===i?void 0:i({direction:this.direction},o),(0,u.hT)("bar",this._spec,this._markAttributeContext),a)),this._minLabelMark&&this._minLabelMark.setAnimationConfig((0,u._8)(null===(r=n.F.getAnimationInKey("fadeInOut"))||void 0===r?void 0:r(),(0,u.hT)("label",this._spec,this._markAttributeContext),a)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig((0,u._8)(null===(s=n.F.getAnimationInKey("fadeInOut"))||void 0===s?void 0:s(),(0,u.hT)("label",this._spec,this._markAttributeContext),a))}initTooltip(){this._tooltipHelper=new c(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}w.type=s.A.rangeColumn,w.mark=_,w.transformerConstructor=S;let C=()=>{(0,o.Y)(),(0,l.k)(),v(),(0,p.wy)(),(0,A.N)(),(0,k.E)(),n.F.registerSeries(w.type,w)};var T=i(666),E=i(6979);class M extends T.I{_getDefaultSeriesSpec(t){var e,i;let r=super._getDefaultSeriesSpec(t,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar"]);return"horizontal"===t.direction?r.xField=null!==(e=t.xField)&&void 0!==e?e:[t.minField,t.maxField]:r.yField=null!==(i=t.yField)&&void 0!==i?i:[t.minField,t.maxField],r}transformSpec(t){super.transformSpec(t),(0,E.R2)(t)}}var B=i(5839);class D extends B.P{constructor(){super(...arguments),this.transformerConstructor=M,this.type="rangeColumn",this.seriesType=s.A.rangeColumn}}D.type="rangeColumn",D.seriesType=s.A.rangeColumn,D.transformerConstructor=M;var O=i(1637),P=i(1522);let I=(0,i(8869).C)("RangeColumnChart",{type:"rangeColumn",vchartConstrouctor:r.H},[()=>{C(),n.F.registerChart(D.type,D)},O.U,...P.l])},5813:function(t,e,i){"use strict";i.d(e,{s:()=>tz});var r,s=i(4312),n=i(5839),a=i(3885),o=i(5287),l=i(4761),h=i(6082);let u=t=>{let e=0;return t.forEach((t,i)=>{var r;(0,h.Z)(t.value)&&((null===(r=t.children)||void 0===r?void 0:r.length)?t.value=u(t.children):t.value=0),e+=Math.abs(t.value)}),e};var d=i(4546),c=i(1319),p=i(9038),g=i(4659),m=i(8378);function f(t){if((0,m.Z)(t))return t;let e=+t;return(0,m.Z)(e)?e:0}var v=i(9198),y=i(9904),_=i(3604),b=i(1601),x=i(9280);function S(t){return"vertical"===t}function A(t){return t.depth}function k(t,e){return e-1-t.endDepth}let w=(t,e)=>(null==t?void 0:t.y0)-(null==e?void 0:e.y0),C=(t,e)=>{if((0,h.Z)(t.value))return null;let i=(e?t.targetLinks:t.sourceLinks).reduce((t,e)=>((0,h.Z)(e.value)?t.count+=1:t.sum+=e.value,t),{sum:0,count:0});return i.count>0?(t.value-i.sum)/i.count:null},T={left:A,right:k,justify:function(t,e){return t.sourceLinks.length?t.depth:e-1},center:function(t,e,i){return t.targetLinks.length?t.depth:t.sourceLinks.length?(0,d.iH)(t.sourceLinks.map(t=>i[t.target].depth))-1:0},start:A,end:k},E=(0,c.i)(0,1);class M{constructor(t){this._ascendingSourceBreadth=(t,e)=>w(this._nodeMap[t.source],this._nodeMap[e.source])||t.index-e.index,this._ascendingTargetBreadth=(t,e)=>w(this._nodeMap[t.target],this._nodeMap[e.target])||t.index-e.index,this.options=Object.assign({},M.defaultOptions,t);let e=this.options.nodeKey,i=(0,p.Z)(e)?e:e?(0,x.E)(e):null;this._getNodeKey=i,this._logger=g.Y.getInstance(),this._alignFunc=(0,p.Z)(this.options.setNodeLayer)?t=>this.options.setNodeLayer(t.datum):T[this.options.nodeAlign]}layout(t,e){if(!t)return null;let i="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};S(this.options.direction)?this._viewBox={x0:i.y0,x1:i.y1,y0:i.x0,y1:i.x1,width:i.height,height:i.width}:this._viewBox=i;let r=this.computeNodeLinks(t),s=r.nodes,n=r.links;if(this._nodeMap=r.nodeMap,this.computeNodeValues(s),this.computeNodeDepths(s),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(s),this._maxDepth<=0)return null;let a=this.computeNodeBreadths(s);if(this.computeLinkBreadths(s),s.forEach(t=>{t.sourceLinks=t.sourceLinks.filter(t=>!(0,h.Z)(t.source)&&!(0,h.Z)(t.target)),t.targetLinks=t.targetLinks.filter(t=>!(0,h.Z)(t.source)&&!(0,h.Z)(t.target))}),n=n.filter(t=>!(0,h.Z)(t.source)&&!(0,h.Z)(t.target)),S(this.options.direction)){if(this.options.inverse){let t=this._viewBox.x1;s.forEach(e=>{let{y0:i,y1:r,x0:s,x1:n}=e;e.y0=t-n,e.y1=t-s,e.x0=i,e.x1=r}),n.forEach(e=>{e.vertical=!0;let{x0:i,x1:r,y0:s,y1:n}=e;e.x0=s,e.x1=n,e.y0=t-i,e.y1=t-r})}else s.forEach(t=>{let{y0:e,y1:i}=t;t.y0=t.x0,t.y1=t.x1,t.x0=e,t.x1=i}),n.forEach(t=>{t.vertical=!0;let e=t.x0,i=t.x1;t.x0=t.y0,t.x1=t.y1,t.y0=e,t.y1=i})}else this.options.inverse&&(s.forEach(t=>{let{x0:e,x1:r}=t;t.x0=i.x1-r,t.x1=i.x1-e}),n.forEach(t=>{t.x0=i.x1-t.x0,t.x1=i.x1-t.x1}));return n.forEach(t=>{let e=this._nodeMap[t.source],i=this._nodeMap[t.target];t.sourceRect={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},t.targetRect={x0:i.x0,x1:i.x1,y1:i.y1,y0:i.y0}}),{nodes:s,links:n,columns:a}}computeHierarchicNodeLinks(t){let e=[],i=[],r={},s={},n=[];u(t);let a=(t,i,s)=>{t.forEach((t,o)=>{let l=this._getNodeKey?this._getNodeKey(t):s?`${s[s.length-1].key}-${o}`:`${i}-${o}`,u=(0,h.Z)(t.value)?0:f(t.value);if(r[l])r[l].value=void 0;else{let s={depth:i,datum:t,index:o,key:l,value:u,sourceLinks:[],targetLinks:[]};r[l]=s,e.push(s)}s&&n.push({source:s[s.length-1].key,target:l,value:u,parents:s}),t.children&&t.children.length&&a(t.children,i+1,s?s.concat([r[l]]):[r[l]])})};return a(t,0,null),n.forEach((t,e)=>{let n=`${t.source}-${t.target}`,a=(0,v.Z)(t,["parents"]);if(a.parents=t.parents.map(t=>(0,v.Z)(t,["sourceLinks","targetLinks"])),s[n])return s[n].value+=f(t.value),void s[n].datum.push(a);let o={index:e,key:`${t.source}-${t.target}`,source:t.source,target:t.target,datum:[a],value:t.value,parents:t.parents.map(t=>t.key)};i.push(o),r[t.source].sourceLinks.push(o),r[t.target].targetLinks.push(o),s[n]=o}),{nodes:e,links:i,nodeMap:r}}computeSourceTargetNodeLinks(t){let e=[],i=[],r={};t.nodes&&t.nodes.forEach((t,i)=>{let s={depth:-1,datum:t,index:i,key:this._getNodeKey?this._getNodeKey(t):i,value:t.value,sourceLinks:[],targetLinks:[]};r[s.key]=s,e.push(s)});let s=[];return t.links.forEach((n,a)=>{let o=!(0,h.Z)(n.source),l=!(0,h.Z)(n.target);if(t.nodes&&(!r[n.source]||!r[n.target]))return;t.nodes||!o||r[n.source]||(r[n.source]={value:void 0,depth:-1,index:e.length,key:n.source,datum:null,sourceLinks:[],targetLinks:[]},e.push(r[n.source])),t.nodes||!l||r[n.target]||(r[n.target]={value:void 0,depth:-1,index:e.length,key:n.target,datum:null,sourceLinks:[],targetLinks:[]},e.push(r[n.target]));let u={index:a,source:n.source,target:n.target,datum:n,value:n.value};this.options.divideNodeValueToLink&&(0,h.Z)(n.value)&&s.push(u),i.push(u),o&&r[n.source].sourceLinks.push(u),l&&r[n.target].targetLinks.push(u)}),this.options.divideNodeValueToLink&&s.length&&s.forEach(t=>{let e=[C(r[t.source]),C(r[t.target],!0)].filter(t=>!(0,h.Z)(t));e.length&&(t.value=(0,d.iH)(e))}),{nodeMap:r,nodes:e,links:i}}computeNodeLinks(t){let e;"links"in t?e=this.computeSourceTargetNodeLinks(t):(this._isHierarchic=!0,e=this.computeHierarchicNodeLinks(t.nodes));let i=e.nodes,r=e.links;if(this.options.linkSortBy)for(let t=0,e=i.length;t<e;t++)i[t].sourceLinks.sort(this.options.linkSortBy),i[t].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(i=i.filter(t=>t.targetLinks.length||t.sourceLinks.length)),{nodes:i,links:r,nodeMap:e.nodeMap}}computeNodeValues(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.value=Math.max((0,h.Z)(i.value)?0:f(i.value),i.sourceLinks.reduce((t,e)=>{var i;return t+(null!==(i=f(e.value))&&void 0!==i?i:0)},0),i.targetLinks.reduce((t,e)=>{var i;return t+(null!==(i=f(e.value))&&void 0!==i?i:0)},0))}}computeNodeDepths(t){var e;let i=t.length,r,s,n=t,a=0,o=-1,l=(0,p.Z)(this.options.setNodeLayer)?this.options.setNodeLayer:null;for(;n.length&&a<i;){r=[],s={};for(let t=0,i=n.length;t<i;t++){let i=n[t];if(i&&(i.depth=l&&null!==(e=l(i.datum))&&void 0!==e?e:a,l&&(o=Math.max(i.depth,o)),i.sourceLinks&&i.sourceLinks.length))for(let t=0,e=i.sourceLinks.length;t<e;t++){let e=i.sourceLinks[t];s[e.target]||(r.push(this._nodeMap[e.target]),s[e.target]=!0)}}n=r,a+=1}a>i&&this._logger.warn("Error: there is a circular link"),this._maxDepth=l?o+1:a}computeNodeEndDepths(t){let e=t.length,i,r,s=t,n=0;for(;s.length&&n<e;){i=[],r={};for(let t=0,e=s.length;t<e;t++){let e=s[t];if(e){e.endDepth=n;for(let t=0,s=e.targetLinks.length;t<s;t++){let s=e.targetLinks[t];r[s.source]||(i.push(this._nodeMap[s.source]),r[s.source]=!0)}}}s=i,n+=1}n>e&&this._logger.warn("Error: there is a circular link")}computeNodeLayers(t){let e=this.options.nodeWidth,i=this.options.linkWidth,r=this.options.minStepWidth,s=this._viewBox.width,n=null,a=null,o=!1;if((0,y.Z)(e)){let t=(0,_.Z)(parseFloat(e.replace("%",""))/100,0,1),i=s/(this._maxDepth-1+t);r>0&&(i=Math.max(r,i)),n=i*t,a=i*(1-t),o=!0}else if((0,b.Z)(e)){if(n=e,(0,b.Z)(i))a=i;else if((0,h.Z)(i)){let t=(s-e)/(this._maxDepth-1);r>0&&(t=Math.max(r,t)),a=t-e}o=!0}else(0,p.Z)(e)&&(0,b.Z)(i)&&(a=i);let l=[];for(let e=0,i=t.length;e<i;e++){let i=t[e];i.layer=this._isHierarchic?i.depth:(0,_.Z)(Math.floor(this._alignFunc(i,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);let r=i.layer;r===this._maxDepth-1&&(i.isLastLayer=!0),o&&(i.x0=this._viewBox.x0+r*(n+a),i.x1=i.x0+n),l[r]?l[r].push(i):l[r]=[i]}if(this.options.nodeSortBy)for(let t=0,e=l.length;t<e;t++)l[t].sort(this.options.nodeSortBy);if(!o&&(0,p.Z)(e)){let t=this._viewBox.x0;for(let r=0;r<this._maxDepth;r++){let s=l[r],o=0,h=0;for(let r=0,l=s&&s.length;r<l;r++){let l=s[r],u=e(l);l.x0=t,l.x1=t+u,o=Math.max(n,u);let d=l.sourceLinks;for(let t=0,e=d.length;t<e;t++){let e=d[t];h=Math.max(h,(0,p.Z)(i)?i(e,this._viewBox):a)}}t+=o+h}}return l}initializeNodeBreadths(t){var e,i,r;let s=null!==(e=this.options.minLinkHeight)&&void 0!==e?e:0,n=null!==(i=this.options.minNodeHeight)&&void 0!==i?i:0,a=null!==(r=this.options.maxNodeHeight)&&void 0!==r?r:1/0,o=this.options.maxLinkHeight;((0,h.Z)(n)||n<s)&&(n=s),((0,h.Z)(o)||o>a)&&(o=a);let l=0,u=null,d=null;if((0,p.Z)(this.options.nodeGap))u=this.options.nodeGap,l=t.reduce((t,e)=>{let i=e.reduce((t,e)=>t+e.value,0),r=e.reduce((t,e)=>t+this.options.nodeGap(e),0);return Math.min(t,(this._viewBox.height-r)/i)},1/0);else{let e=t.reduce((t,e)=>Math.max(t,e.length),0),i=this._viewBox.height/e,r=Math.min(this.options.nodeGap,i);if(n+r>i&&(r=n>=i?i/2:(i-n)/2,n=Math.min(i-r,n)),u=()=>r,this._gapY=r,this.options.equalNodeHeight)d=this._viewBox.height/e-r;else{let e=n>0?Math.max(r,n):r;l=t.reduce((t,i)=>{let r=i.reduce((t,e)=>t+e.value,0);return Math.min(t,(this._viewBox.height-((i.length-1)*e+n))/r)},1/0)}}let c="start"===this.options.gapPosition,g=!c&&"end"!==this.options.gapPosition,m=(0,b.Z)(this.options.nodeHeight)?t=>this.options.nodeHeight:(0,p.Z)(this.options.nodeHeight)?this.options.nodeHeight:d>0?t=>d:t=>Math.max(t.value*l,0),f=(0,b.Z)(this.options.linkHeight)?()=>this.options.linkHeight:(0,p.Z)(this.options.linkHeight)?this.options.linkHeight:(t,e,i)=>Math.min(Math.max(e.value?i*E(t.value/e.value):0,s,0),o);for(let e=0,i=t.length;e<i;e++){let i=t[e];if(!i||!i.length)continue;let r=this._viewBox.y0,s=0,o=0,l=0;for(let t=0,e=i.length;t<e;t++){let e=i[t];s=u(e),c&&(r+=s),o=Math.min(Math.max(l=m(e),n),a),e.y0=r,e.y1=r+o,r=c?e.y1:e.y1+s;for(let t=0,i=e.sourceLinks.length;t<i;t++){let i=e.sourceLinks[t];i.thickness=f(i,e,l)}}let h=this._viewBox.y1-r+(g?s:0);if(h>0){if("start"===this.options.crossNodeAlign);else if("end"===this.options.crossNodeAlign)for(let t=0,e=i.length;t<e;++t){let e=i[t];e.y0+=h,e.y1+=h}else if("parent"===this.options.crossNodeAlign){let r=i.reduce((t,e)=>(e.targetLinks&&e.targetLinks.length&&e.targetLinks.forEach(e=>{t[e.source]=!0}),t),{});if(Object.keys(r).length&&t[e-1]&&t[e-1].length){let s=t[e-1].filter(t=>r[t.key]);if(s&&s.length&&s[0].y0!==i[0].y0){let t=s[0].y0-i[0].y0;for(let e=0,r=i.length;e<r;++e){let r=i[e];r.y0+=t,r.y1+=t}}}}else{h/=i.length+1;for(let t=0,e=i.length;t<e;++t){let e=i[t];e.y0+=h*(t+1),e.y1+=h*(t+1)}}}else if(h<0&&i.length>1&&s+(h/=i.length-1)>=0){s+=h,this._gapY=Math.min(s);for(let t=1,e=i.length;t<e;++t){let e=i[t];e.y0+=h*t,e.y1+=h*t}}this.reorderLinks(i)}}computeNodeBreadths(t){let e=this.computeNodeLayers(t);this.initializeNodeBreadths(e);let i=this.options.iterations;if(!this._isHierarchic&&!(0,p.Z)(this.options.setNodeLayer)&&!(0,p.Z)(this.options.nodeGap))for(let t=0;t<i;++t){let r=Math.pow(.99,t),s=Math.max(1-r,(t+1)/i);this.relaxRightToLeft(e,r,s),this.relaxLeftToRight(e,r,s)}return e}relaxLeftToRight(t,e,i){for(let r=1,s=t.length;r<s;++r){let s=t[r];for(let t=0,i=s.length;t<i;t++){let i=s[t],r=0,n=0;for(let t=0,e=i.targetLinks.length;t<e;t++){let e=i.targetLinks[t],s=e.value*(i.layer-this._nodeMap[e.source].layer);r+=this.targetTop(this._nodeMap[e.source],i)*s,n+=s}if(!(n>0))continue;let a=(r/n-i.y0)*e;i.y0+=a,i.y1+=a,this.reorderNodeLinks(i)}(0,h.Z)(this.options.nodeSortBy)&&s.sort(w),this.resolveCollisions(s,i)}}relaxRightToLeft(t,e,i){for(let r=t.length-2;r>=0;--r){let s=t[r];for(let t=0,i=s.length;t<i;t++){let i=s[t],r=0,n=0;for(let t=0,e=i.sourceLinks.length;t<e;t++){let e=i.sourceLinks[t],s=e.value*(this._nodeMap[e.target].layer-i.layer);r+=this.sourceTop(i,this._nodeMap[e.target])*s,n+=s}if(!(n>0))continue;let a=(r/n-i.y0)*e;i.y0+=a,i.y1+=a,this.reorderNodeLinks(i)}void 0===this.options.nodeSortBy&&s.sort(w),this.resolveCollisions(s,i)}}resolveCollisions(t,e){let i=t.length>>1,r=t[i];this.resolveCollisionsBottomToTop(t,r.y0-this._gapY,i-1,e),this.resolveCollisionsTopToBottom(t,r.y1+this._gapY,i+1,e),this.resolveCollisionsBottomToTop(t,this._viewBox.y1,t.length-1,e),this.resolveCollisionsTopToBottom(t,this._viewBox.y0,0,e)}resolveCollisionsTopToBottom(t,e,i,r){for(;i<t.length;++i){let s=t[i],n=(e-s.y0)*r;n>1e-6&&(s.y0+=n,s.y1+=n),e=s.y1+this._gapY}}resolveCollisionsBottomToTop(t,e,i,r){for(;i>=0;--i){let s=t[i],n=(s.y1-e)*r;n>1e-6&&(s.y0-=n,s.y1-=n),e=s.y0-this._gapY}}targetTop(t,e){let i,r,s,n=t.y0-(t.sourceLinks.length-1)*this._gapY/2;for(i=0,r=t.sourceLinks.length;i<r&&(s=t.sourceLinks[i]).target!==e.key;i++)n+=s.thickness+this._gapY;for(i=0,r=e.targetLinks.length;i<r&&(s=e.targetLinks[i]).source!==t.key;i++)n-=s.thickness;return n}sourceTop(t,e){let i,r,s,n=e.y0-(e.targetLinks.length-1)*this._gapY/2;for(i=0,r=e.targetLinks.length;i<r&&(s=e.targetLinks[i]).source!==t.key;i++)n+=s.thickness+this._gapY;for(i=0,r=t.sourceLinks.length;i<r&&(s=t.sourceLinks[i]).target!==e.key;i++)n-=s.thickness;return n}computeLinkBreadthsNoOverlap(t){for(let e=0,i=t.length;e<i;e++){let i=t[e],r=i.y0,s=!1;for(let t=0,e=i.sourceLinks.length;t<e;t++){let e=i.sourceLinks[t];s||(e.y0=r+e.thickness/2),e.x0=i.x1,r+e.thickness>i.y1||s?(e.y0=i.y1-e.thickness/2,s=!0):r+=e.thickness}let n=i.y0;s=!1;for(let t=0,e=i.targetLinks.length;t<e;t++){let e=i.targetLinks[t];s||(e.y1=n+e.thickness/2),e.x1=i.x0,n+e.thickness>i.y1||s?(e.y1=i.y1-e.thickness/2,s=!0):n+=e.thickness}}}computeLinkBreadthsOverlap(t){let e=this.options.linkOverlap;for(let i=0,r=t.length;i<r;i++){let r=t[i],s="start"===e?r.y0:"end"===e?r.y1:(r.y0+r.y1)/2,n="start"===e?.5:"end"===e?-.5:0;for(let t=0,e=r.sourceLinks.length;t<e;t++){let e=r.sourceLinks[t];e.y0=s+n*e.thickness,e.x0=r.x1}for(let t=0,e=r.targetLinks.length;t<e;t++){let e=r.targetLinks[t];e.y1=s+n*e.thickness,e.x1=r.x0}}}computeLinkBreadths(t){this.options.linkOverlap?this.computeLinkBreadthsOverlap(t):this.computeLinkBreadthsNoOverlap(t)}reorderNodeLinks(t){if((0,h.Z)(this.options.linkSortBy)){let e=t.targetLinks,i=t.sourceLinks;for(let t=0,i=e.length;t<i;t++){let i=e[t];this._nodeMap[i.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(let t=0,e=i.length;t<e;t++){let e=i[t];this._nodeMap[e.target].targetLinks.sort(this._ascendingSourceBreadth)}}}reorderLinks(t){if((0,h.Z)(this.options.linkSortBy))for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sourceLinks.sort(this._ascendingTargetBreadth),i.targetLinks.sort(this._ascendingSourceBreadth)}}}M.defaultOptions={iterations:6,nodeAlign:"justify",direction:"horizontal",nodeWidth:24,nodeGap:8,crossNodeAlign:"middle",dropIsolatedNode:!0};let B=(t,e)=>{let i=new M(t).layout(Array.isArray(e)?e[0]:e,"width"in t?{width:t.width,height:t.height}:{x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1});return i?[i]:[]},D=()=>{l.F.registerTransform("sankey",{transform:B,markPhase:"beforeJoin"},!0)};var O=i(208),P=i(4380),I=i(6358),R=i(7636);let L=(t,e,i)=>{e.forEach(e=>{(0,h.Z)(e[i])||t.add(e[i]),e.children&&e.children.length>0&&L(t,e.children,i)})},F=t=>{var e;if(!t||!(0,R.Z)(t))return[];if(t.length>1){let e={links:[],nodes:[]};return t.forEach(t=>{"links"!==t.id&&"nodes"!==t.id||(e[t.id]=t.values)}),[e]}return(null===(e=t[0])||void 0===e?void 0:e.latestData)?t[0].latestData:t},j=(t,e)=>{if(!t||!(null==e?void 0:e.view)||!t.length)return[];let i=e.view();if(i.x1-i.x0==0||i.y1-i.y0==0||i.x1-i.x0==-1/0||i.x1-i.x0==1/0||i.y1-i.y0==-1/0||i.y1-i.y0==1/0)return[];let r=t[0];if(("source"!==e.sourceField||"target"!==e.targetField||"value"!==e.valueField)&&r.links){let t=[];r.links.forEach(i=>{let r={};for(let t in i)t===e.sourceField?r.source=i[e.sourceField]:t===e.targetField?r.target=i[e.targetField]:t===e.valueField?r.value=i[e.valueField]:r[t]=i[t];t.push(r)}),r.links=t}let s=new M(e),n=[];return n.push(s.layout(r,i)),n},Z=t=>{var e,i;return t&&(0,R.Z)(t)&&(null===(e=t[0])||void 0===e?void 0:e.latestData)&&t[0].latestData.length&&t[0].latestData[0]&&null!==(i=t[0].latestData[0].nodes)&&void 0!==i?i:[]},H=t=>{var e,i;return t&&(0,R.Z)(t)&&(null===(e=t[0])||void 0===e?void 0:e.latestData)&&t[0].latestData.length&&t[0].latestData[0]&&null!==(i=t[0].latestData[0].links)&&void 0!==i?i:[]};var N=i(5208),z=i(6338),V=i(6542),U=i(9231),W=i(3722),G=i(7479),$=i(1889);class X extends $.O{constructor(){super(...arguments),this._getDimensionData=t=>{if(t.source){if((0,b.Z)(t.source)){let e=this.series.getSeriesKeys();return e[t.source]+" => "+e[t.target]}return t.source+" => "+t.target}return t.datum?t.datum[this.series.getSpec().categoryField]:t.key},this.markTooltipValueCallback=t=>t.value}}var Y=i(7393),K=i(7623),q=i(8469);let J=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthIn":"growHeightIn",options:{overall:e?t.growFrom():e,orient:"positive"}}),Q=(t,e)=>"fadeIn"===e?{type:"fadeIn"}:J(t),tt=t=>"fadeIn"===t?{type:"fadeIn"}:{type:"linkPathGrowIn"},te=()=>{q.F.registerAnimation("sankeyNode",(t,e)=>Object.assign({appear:Q(t,e)},P.Vs)),q.F.registerAnimation("sankeyLinkPath",(t,e)=>({appear:tt(e),enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{type:"linkPathGrowOut"}}))};var ti=i(2193),tr=i(6264),ts=i(5595),tn=i(2550),ta=i(21),to=i(704);let tl=(t,e)=>{var i;let r=null!==(i=t.curvature)&&void 0!==i?i:.5,s="number"==typeof e?t.thickness*e:t.thickness,n=t.x0,a=t.x1,o=t.y0,l=t.y1,h=n+r*(a-n),u=a+r*(n-a),d=t=>t;!1!==t.round&&(n=Math.round(n),a=Math.round(a),o=Math.round(o),l=Math.round(l),h=Math.round(h),u=Math.round(u),d=Math.round),"line"===t.pathType||t.pathType,"center"===t.align?(o=d(t.y0-s/2),l=d(t.y1-s/2)):"end"===t.align?(o=d(t.y0+t.thickness/2-s),l=d(t.y1+t.thickness/2-s)):(o=d(t.y0-t.thickness/2),l=d(t.y1-t.thickness/2));let c=d(o+s),p=d(l+s),g=Math.abs(a-n)>1e-6,m=t.endArrow&&g?`L${a},${d(l-s/2)}L${d(a+s)},${d((l+p)/2)}L${a},${d(p+s/2)}`:"",f=t.startArrow&&g?`L${n},${d(c+s/2)}L${d(n-s)},${d((o+c)/2)}L${n},${d(o-s/2)}`:"";return"line"===t.pathType?`M${n},${o}L${a},${l}${m}L${a},${p}L${n},${c}${f}Z`:"polyline"===t.pathType?`M${n},${o}L${h},${o}L${h},${l}L${a},${l}
    ${m}L${a},${p}L${h},${p}L${h},${c}L${n},${c}${f}Z`:`M${n},${o}C${h},${o},${u},${l},${a},${l}
  ${m}L${a},${p}C${u},${p},${h},${c},${n},${c}${f}Z`},th=(t,e)=>{var i;let r=null!==(i=t.curvature)&&void 0!==i?i:.5,s="number"==typeof e?t.thickness*e:t.thickness,n=t.y0,a=t.y1,o=t.x0,l=t.x1,h=n+r*(a-n),u=a+r*(n-a),d=t=>t;!1!==t.round&&(d=Math.round,n=Math.round(n),a=Math.round(a),o=Math.round(o),l=Math.round(l),h=Math.round(h),u=Math.round(u)),"line"===t.pathType||t.pathType,"center"===t.align?(o=d(t.x0-s/2),l=d(t.x1-s/2)):"end"===t.align?(o=d(t.x0+t.thickness/2-s),l=d(t.x1+t.thickness/2-s)):(o=d(t.x0-t.thickness/2),l=d(t.x1-t.thickness/2));let c=d(o+s),p=d(l+s),g=Math.abs(a-n)>1e-6,m=t.endArrow&&g?`L${d(l-s/2)},${a}L${d((l+p)/2)},${d(a+s)}L${d(p+s/2)},${a}`:"",f=t.startArrow&&g?`L${d(c+s/2)},${n}L${d((c+o)/2)},${d(n-s)}L${d(o-s/2)},${n}`:"";return"line"===t.pathType?`M${o},${n}L${l},${a}${m}L${p},${a}L${c},${n}${f}Z`:"polyline"===t.pathType?`M${o},${n}L${o},${h}L${l},${h}L${l},${a}
    ${m}L${p},${a}L${p},${h}L${c},${h}L${c},${n}${f}Z`:`M${o},${n}C${o},${h},${l},${u},${l},${a}
  ${m}L${p},${a}C${p},${u},${c},${h},${c},${n}${f}Z`},tu=(t,e,i,r)=>{var s;let n=["vertical","TB","BT"].includes(null!==(s=t.direction)&&void 0!==s?s:null==r?void 0:r.direction)?th:tl,a="number"==typeof t.ratio&&t.ratio>=0&&t.ratio<=1,o=Object.keys(t);return["x0","y0","x1","y1"].every(t=>o.includes(t))?{back:{path:a?n(t,1):""},front:{path:n(t,a?t.ratio:1)}}:{}},td=(t,e,i)=>{let r={x0:t.getGraphicAttribute("x0",!1),x1:t.getGraphicAttribute("x1",!1),y0:t.getGraphicAttribute("y0",!1),y1:t.getGraphicAttribute("y1",!1),thickness:t.getGraphicAttribute("thickness",!1),round:t.getGraphicAttribute("round",!1),align:t.getGraphicAttribute("align",!1),pathType:t.getGraphicAttribute("pathType",!1),endArrow:t.getGraphicAttribute("endArrow",!1),startArrow:t.getGraphicAttribute("startArrow",!1)};return Object.keys(r).forEach(t=>{(0,h.Z)(r[t])&&delete r[t]}),{from:Object.assign({},r,{x1:r.x0,y1:r.y0}),to:r}},tc=(t,e,i)=>{let r={x0:t.getGraphicAttribute("x0",!0),x1:t.getGraphicAttribute("x1",!0),y0:t.getGraphicAttribute("y0",!0),y1:t.getGraphicAttribute("y1",!0),thickness:t.getGraphicAttribute("thickness",!0),round:t.getGraphicAttribute("round",!0),align:t.getGraphicAttribute("align",!0),pathType:t.getGraphicAttribute("pathType",!0),endArrow:t.getGraphicAttribute("endArrow",!0),startArrow:t.getGraphicAttribute("startArrow",!0)};return Object.keys(r).forEach(t=>{(0,h.Z)(r[t])&&delete r[t]}),{from:r,to:Object.assign({},r,{x1:r.x0,y1:r.y0})}},tp=(t,e,i)=>{let r={thickness:t.getGraphicAttribute("thickness",!1),round:t.getGraphicAttribute("round",!1),align:t.getGraphicAttribute("align",!1),pathType:t.getGraphicAttribute("pathType",!1),endArrow:t.getGraphicAttribute("endArrow",!1),startArrow:t.getGraphicAttribute("startArrow",!1)};return Object.keys(r).forEach(t=>{(0,h.Z)(r[t])&&delete r[t]}),{from:Object.assign(Object.assign({x0:t.getGraphicAttribute("x0",!0),x1:t.getGraphicAttribute("x1",!0),y0:t.getGraphicAttribute("y0",!0),y1:t.getGraphicAttribute("y1",!0)},r),r),to:Object.assign({x0:t.getGraphicAttribute("x0",!1),x1:t.getGraphicAttribute("x1",!1),y0:t.getGraphicAttribute("y0",!1),y1:t.getGraphicAttribute("y1",!1)},r)}},tg=()=>{l.F.registerGlyph("linkPath",{back:"path",front:"path"}).registerFunctionEncoder(tu).registerChannelEncoder("backgroundStyle",(t,e)=>({back:e})).registerDefaultEncoder(()=>({back:{zIndex:0},front:{zIndex:1}})),l.F.registerAnimationType("linkPathGrowIn",td),l.F.registerAnimationType("linkPathGrowOut",tc),l.F.registerAnimationType("linkPathUpdate",tp),(0,to.c)(),(0,ta.MM)(),(0,ta.O6)()};class tm extends tn.c{constructor(){super(...arguments),this.type=tm.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,x0:0,y0:0,x1:100,y1:100,thickness:1,round:!0})}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId(),r=this.getStyle("direction");this._product=e.glyph("linkPath",null!=t?t:e.rootMark).id(i).configureGlyph({direction:r}),this._compiledProductId=i}}tm.type="linkPath";let tf=()=>{tg(),q.F.registerMark(tm.type,tm)},tv=Object.assign(Object.assign({},i(4331).UI),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}}),ty=(t,e=[],i)=>{let r=(null==i?void 0:i.maxDepth)>=0;return t.forEach(t=>{(!r||t.depth<=i.maxDepth)&&(e.push((null==i?void 0:i.callback)?i.callback(t):t),t.children&&(r&&t.depth===i.maxDepth?(t.children=null,t.isLeaf=!0):ty(t.children,e,i)))}),e},t_=(t,e={})=>{if(!t)return[];let i=[];return ty(t,i,e),i};var tb=i(2990),tx=i(1766),tS=i(9540);class tA extends tS.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"node")}}var tk=i(2096);class tw extends o.i{constructor(){super(...arguments),this.type=a.A.sankey,this.transformerConstructor=tA,this._nodeLayoutZIndex=V.Ai.Node,this._labelLayoutZIndex=V.Ai.Label,this._viewBox=new Y.YZ,this._fillByNode=t=>{var e,i,r,s,n;if(t&&t.sourceRect&&t.targetRect)return this._fillByLink(t);let a=null===(i=null===(e=this._spec.node)||void 0===e?void 0:e.style)||void 0===i?void 0:i.fill;if((0,K.Z)(a))return a;if((0,K.Z)(this._spec.seriesField)){let e=null===(s=null===(r=this._option)||void 0===r?void 0:r.globalScale)||void 0===s?void 0:s.getScale("color"),i=(null==t?void 0:t.datum)?t.datum:t;return null==e?void 0:e.scale(null==i?void 0:i[this._spec.seriesField])}return null===(n=this._colorScale)||void 0===n?void 0:n.scale(this._getNodeNameFromData(t))},this._fillByLink=t=>{var e,i,r,s,n,a,o;let l=null===(i=null===(e=this._spec.link)||void 0===e?void 0:e.style)||void 0===i?void 0:i.fill;if(l)return l;if((0,K.Z)(this._spec.seriesField)){let e=null===(s=null===(r=this._nodesSeriesData)||void 0===r?void 0:r.getLatestData())||void 0===s?void 0:s.find(e=>t.source===e.key),i=null==e?void 0:e.datum,o=null===(a=null===(n=this._option)||void 0===n?void 0:n.globalScale)||void 0===a?void 0:a.getScale("color");return null==o?void 0:o.scale(null==i?void 0:i[this._spec.seriesField])}let h=(0,b.Z)(t.source)?this.getNodeList()[t.source]:t.source;return null===(o=this._colorScale)||void 0===o?void 0:o.scale(h)},this._handleEmphasisElement=t=>{var e,i,r,s,n;let a=null!==(e=this._spec.emphasis)&&void 0!==e?e:{},o=t.item;"adjacency"===a.effect?o&&o.mark===(null===(i=this._nodeMark)||void 0===i?void 0:i.getProduct())?this._handleNodeAdjacencyClick(o):o&&o.mark===(null===(r=this._linkMark)||void 0===r?void 0:r.getProduct())?this._handleLinkAdjacencyClick(o):this._handleClearEmpty():"related"===a.effect&&(o&&o.mark===(null===(s=this._nodeMark)||void 0===s?void 0:s.getProduct())?this._handleNodeRelatedClick(o):o&&o.mark===(null===(n=this._linkMark)||void 0===n?void 0:n.getProduct())?this._handleLinkRelatedClick(o):this._handleClearEmpty())},this._handleClearEmpty=()=>{var t,e;if(!this._needClear)return;let i=null===(t=this._nodeMark)||void 0===t?void 0:t.getProductElements();if(!i||!i.length)return;let r=null===(e=this._linkMark)||void 0===e?void 0:e.getProductElements();if(!r||!r.length)return;let s=[N.q.STATE_SANKEY_EMPHASIS,N.q.STATE_SANKEY_EMPHASIS_REVERSE];i.forEach(t=>{t.removeState(s)}),r.forEach(t=>{t.removeState(s)}),this._needClear=!1},this._handleNodeAdjacencyClick=t=>{let e=t.getDatum(),i=[e.key];if(this._linkMark){let t=this._linkMark.getProductElements();if(!t||!t.length)return;t.forEach((t,r)=>{let s=t.getDatum();s.source===e.key?(i.includes(s.target)||i.push(s.target),t.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),t.addState(N.q.STATE_SANKEY_EMPHASIS)):s.target===e.key?(i.includes(s.source)||i.push(s.source),t.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),t.addState(N.q.STATE_SANKEY_EMPHASIS)):(t.removeState(N.q.STATE_SANKEY_EMPHASIS),t.addState(N.q.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),i),this._needClear=!0},this._handleLinkAdjacencyClick=t=>{let e=t.getDatum(),i=[e.source,e.target];if(this._linkMark){let e=this._linkMark.getProductElements();if(!e||!e.length)return;e.forEach(e=>{e===t?(e.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),e.addState(N.q.STATE_SANKEY_EMPHASIS,{ratio:1})):(e.removeState(N.q.STATE_SANKEY_EMPHASIS),e.addState(N.q.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),i),this._needClear=!0},this._handleNodeRelatedClick=t=>{var e;let i=t.getDatum(),r=this._nodeMark.getProductElements();if(!r||!r.length)return;let s=this._linkMark.getProductElements();if(!s||!s.length)return;let n=(null===(e=s[0].getDatum())||void 0===e?void 0:e.parents)?"parents":"source";if("source"===n){let t=[i.key],e=[];if(s.forEach((s,n)=>{var a,o,l,h;let u=s.getDatum(),c=(null==u?void 0:u.parents)?"parents":"source";if((0,d.IX)(u[c]).includes(i.key)){if(e.includes(null!==(a=u.key)&&void 0!==a?a:u.index)||e.push(null!==(o=u.key)&&void 0!==o?o:u.index),t.includes(u.source)||t.push(u.source),!t.includes(u.target)){t.push(u.target);let i=r.find(t=>t.data[0].key===u.target).data[0].sourceLinks;for(;(null==i?void 0:i.length)>0;){let s=[];return i.forEach(i=>{var n,a;if(!e.includes(null!==(n=i.key)&&void 0!==n?n:i.index)&&(e.push(null!==(a=i.key)&&void 0!==a?a:i.index),!t.includes(i.target))){t.push(i.target);let e=r.find(t=>t.data[0].key===i.target);s.push(e.data[0].targetLinks)}}),void(i=s)}}}else if(u.target===i.key&&(e.includes(null!==(l=u.key)&&void 0!==l?l:u.index)||e.push(null!==(h=u.key)&&void 0!==h?h:u.index),!t.includes(u.source))){t.push(u.source);let i=r.find(t=>t.data[0].key===u.source).data[0].targetLinks;for(;(null==i?void 0:i.length)>0;){let s=[];return i.forEach(i=>{var n,a;if(!e.includes(null!==(n=i.key)&&void 0!==n?n:i.index)&&(e.push(null!==(a=i.key)&&void 0!==a?a:i.index),!t.includes(i.source))){t.push(i.source);let e=r.find(t=>t.data[0].key===i.source);s.push(e.data[0].targetLinks)}}),void(i=s)}}}),this._linkMark){let t=this._linkMark.getProductElements();if(!t||!t.length)return;t.forEach((t,i)=>{var r;e.includes(null!==(r=t.getDatum().key)&&void 0!==r?r:t.getDatum().index)?(t.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),t.addState(N.q.STATE_SANKEY_EMPHASIS)):(t.removeState(N.q.STATE_SANKEY_EMPHASIS),t.addState(N.q.STATE_SANKEY_EMPHASIS_REVERSE))})}this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),t)}else{let t=[i.key],e=i.targetLinks.reduce((t,e)=>((0,d.IX)(e.datum).forEach(e=>{let r=e.parents,s=r.length;for(let n=0;n<s;n++){let s=r[n].key,a=r[n+1]?r[n+1].key:i.key,o=e.value,l=t.find(t=>t.source===s&&t.target===a);l?l.value+=o:t.push({source:s,target:a,value:o})}}),t),[]);s.forEach((r,s)=>{let a=r.getDatum(),o=a.datum,l=o?o.filter(t=>t[n].some(t=>t.key===i.key)):null,h=e.find(t=>t.source===a.source&&t.target===a.target);if(l&&l.length){t.includes(a.source)||t.push(a.source),t.includes(a.target)||t.push(a.target);let e=l.reduce((t,e)=>t+e.value,0)/a.value;return r.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),void r.addState(N.q.STATE_SANKEY_EMPHASIS,{ratio:e})}if(h)return t.includes(a.source)||t.push(a.source),t.includes(a.target)||t.push(a.target),r.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),void r.addState(N.q.STATE_SANKEY_EMPHASIS,{ratio:h.value/a.value});r.removeState(N.q.STATE_SANKEY_EMPHASIS),r.addState(N.q.STATE_SANKEY_EMPHASIS_REVERSE)}),this._nodeMark&&this._highLightElements(this._nodeMark.getProductElements(),t)}this._needClear=!0},this._handleLinkRelatedClick=t=>{var e;let i=this._nodeMark.getProductElements();if(!i||!i.length)return;let r=this._linkMark.getProductElements();if(r&&r.length){if("source"==((null===(e=t.getDatum())||void 0===e?void 0:e.parents)?"parents":"source")){let t=[N.q.STATE_SANKEY_EMPHASIS,N.q.STATE_SANKEY_EMPHASIS_REVERSE];this._linkMark&&r.forEach(e=>{e.removeState(t)}),this._nodeMark&&i.forEach(e=>{e.removeState(t)})}else{let e=t.getDatum(),s=[e.source,e.target],n=[];(0,d.IX)(e.datum).forEach(t=>{let e=t.parents,i=e.length;for(let r=0;r<i-1;r++){let i=e[r].key,s=e[r+1].key,a=t.value,o=n.find(t=>t.source===i&&t.target===s);n.push({source:e[r].key,target:e[r+1].key,value:t.value}),o?o.value+=a:n.push({source:i,target:s,value:a})}}),r.forEach(t=>{let i=t.getDatum(),r=i.datum;if(i.source===e.source&&i.target===e.target)return t.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),void t.addState(N.q.STATE_SANKEY_EMPHASIS,{ratio:1});let a=r?r.filter(t=>{let i=t.parents.map(t=>t.key);return i.includes(e.source)&&i.includes(e.target)}):null;if(a&&a.length){s.includes(i.source)||s.push(i.source),s.includes(i.target)||s.push(i.target);let r=a.filter(t=>t.parents.some((i,r)=>{var s;return i.key===e.source&&(null===(s=t.parents[r+1])||void 0===s?void 0:s.key)===e.target})).reduce((t,e)=>t+e.value,0)/i.value;return t.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),void t.addState(N.q.STATE_SANKEY_EMPHASIS,{ratio:r})}let o=n.find(t=>t.source===i.source&&t.target===i.target);if(o)return s.includes(i.source)||s.push(i.source),s.includes(i.target)||s.push(i.target),t.removeState(N.q.STATE_SANKEY_EMPHASIS_REVERSE),void t.addState(N.q.STATE_SANKEY_EMPHASIS,{ratio:o.value/i.value});t.removeState(N.q.STATE_SANKEY_EMPHASIS),t.addState(N.q.STATE_SANKEY_EMPHASIS_REVERSE)}),this._highLightElements(i,s)}this._needClear=!0}}}get direction(){var t;return null!==(t=this._spec.direction)&&void 0!==t?t:"horizontal"}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(t=this._spec.seriesField)&&void 0!==t?t:this._spec.categoryField)}initData(){var t,e,i,r;super.initData();let s=this.getViewData(),n=this.getRawData();if(n&&s){(0,I.U)(this._dataSet,"sankeyLayout",j),(0,I.U)(this._dataSet,"sankeyFormat",F),n.transform({type:"sankeyFormat"},!1),s.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this.direction,crossNodeAlign:this._spec.crossNodeAlign,nodeAlign:null!==(t=this._spec.nodeAlign)&&void 0!==t?t:"justify",nodeGap:null!==(e=this._spec.nodeGap)&&void 0!==e?e:8,nodeWidth:null!==(i=this._spec.nodeWidth)&&void 0!==i?i:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:null!==(r=this._spec.minNodeHeight)&&void 0!==r?r:4,maxNodeHeight:this._spec.maxNodeHeight,minLinkHeight:this._spec.minLinkHeight,maxLinkHeight:this._spec.maxLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer,dropIsolatedNode:this._spec.dropIsolatedNode,nodeHeight:this._spec.nodeHeight,linkHeight:this._spec.linkHeight,equalNodeHeight:this._spec.equalNodeHeight,linkOverlap:this._spec.linkOverlap,inverse:this._spec.inverse},level:tb.BV.sankeyLayout});let{dataSet:a}=this._option;(0,I.U)(a,"sankeyNodes",Z),(0,I.U)(a,"flatten",t_);let o=new z.VO(a,{name:`sankey-node-${this.id}-data`});o.parse([this.getViewData()],{type:"dataview"}),o.transform({type:"sankeyNodes"}),o.transform({type:"flatten",options:{callback:t=>{if(t.datum){let e=t.datum[t.depth];return Object.assign(Object.assign({},t),e)}return t}}},!1),o.transform({type:"addVChartProperty",options:{beforeCall:tx.cJ.bind(this),call:tx.CL}},!1),this._nodesSeriesData=new G.z(this._option,o),(0,I.U)(a,"sankeyLinks",H);let l=new z.VO(a,{name:`sankey-link-${this.id}-data`});l.parse([this.getViewData()],{type:"dataview"}),l.transform({type:"sankeyLinks"}),l.transform({type:"addVChartProperty",options:{beforeCall:tx.cJ.bind(this),call:tx.CL}},!1),this._linksSeriesData=new G.z(this._option,l)}}compileData(){var t,e;super.compileData(),null===(t=this._linksSeriesData)||void 0===t||t.compile(),null===(e=this._nodesSeriesData)||void 0===e||e.compile()}initMark(){var t,e,i,r;this._rootMark.setMarkConfig({overflow:this._spec.overflow,interactive:!!this._spec.overflow});let s=this._createMark(tw.mark.node,{isSeriesMark:!0,dataView:this._nodesSeriesData.getDataView(),dataProductId:this._nodesSeriesData.getProductId(),stateSort:null===(t=this._spec.node)||void 0===t?void 0:t.stateSort},{setCustomizedShape:null===(e=this._spec.node)||void 0===e?void 0:e.customShape});s&&(s.setMarkConfig({zIndex:this._nodeLayoutZIndex}),this._nodeMark=s);let n=this._createMark(tw.mark.link,{dataView:this._linksSeriesData.getDataView(),dataProductId:this._linksSeriesData.getProductId(),stateSort:null===(i=this._spec.link)||void 0===i?void 0:i.stateSort},{setCustomizedShape:null===(r=this._spec.link)||void 0===r?void 0:r.customShape});n&&(this._linkMark=n)}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)}valueToNode(t){let e=this._nodesSeriesData.getLatestData(),i=(0,d.IX)(t)[0];return e&&e.find(t=>t.key===i)}valueToLink(t){let e=this._linksSeriesData.getLatestData(),i=(0,d.IX)(t);return e&&e.find(t=>t&&t.source===i[0]&&t.target===i[1])}valueToPositionX(t){let e=this.valueToNode(t);return null==e?void 0:e.x0}valueToPositionY(t){let e=this.valueToNode(t);return null==e?void 0:e.y0}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle()}_initNodeMarkStyle(){var t,e;let i=this._nodeMark;i&&(this.setMarkStyle(i,{x:t=>t.x0,x1:t=>t.x1,y:t=>t.y0,y1:t=>t.y1},N.q.STATE_NORMAL,U.W.Mark),this.setMarkStyle(i,{fill:null!==(e=null===(t=this._spec.node.style)||void 0===t?void 0:t.fill)&&void 0!==e?e:this._fillByNode},"normal",U.W.User_Mark))}_initLinkMarkStyle(){var t,e;let i=this._linkMark;i&&(this.setMarkStyle(i,{x0:t=>t.x0,x1:t=>t.x1,y0:t=>t.y0,y1:t=>t.y1,thickness:t=>t.thickness,direction:this.direction},N.q.STATE_NORMAL,U.W.Series),this.setMarkStyle(i,{fill:null!==(e=null===(t=this._spec.link.style)||void 0===t?void 0:t.fill)&&void 0!==e?e:this._fillByLink},"normal",U.W.User_Mark))}initLabelMarkStyle(t,e){if(!t)return;let i=e.position;i&&i.includes("inside")?this.setMarkStyle(t,{fill:"#ffffff",text:t=>this._createText(t,e),maxLineWidth:t=>{var i;return null!==(i=e.limit)&&void 0!==i?i:t.x1-t.x0}}):this.setMarkStyle(t,{fill:this._fillByNode,text:t=>this._createText(t,e),maxLineWidth:e.limit}),t.setMarkConfig({zIndex:this._labelLayoutZIndex})}_createText(t,e){if((0,h.Z)(t)||(0,h.Z)(t.datum))return"";let i=t.datum[this._spec.categoryField]||"",{formatMethod:r,formatter:s}=e||{},{formatFunc:n,args:a}=(0,tk.HJ)(r,s,i,t.datum);return n&&(i=n(...a,{series:this})),i}initAnimation(){var t,e,i,r;let s={direction:this.direction,growFrom:()=>{var t,e;return"horizontal"===this.direction?null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale(0).scale(0):null===(e=this._yAxisHelper)||void 0===e?void 0:e.getScale(0).scale(0)}},n=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;this._nodeMark&&this._nodeMark.setAnimationConfig((0,O._8)(null===(i=q.F.getAnimationInKey("sankeyNode"))||void 0===i?void 0:i(s,n),(0,O.hT)("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig((0,O._8)(null===(r=q.F.getAnimationInKey("sankeyLinkPath"))||void 0===r?void 0:r(s,n),(0,O.hT)("link",this._spec,this._markAttributeContext)))}initEvent(){var t,e,i;super.initEvent(),null===(t=this._nodesSeriesData.getDataView())||void 0===t||t.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),null===(e=this._linksSeriesData.getDataView())||void 0===e||e.target.addListener("change",this.linksSeriesDataUpdate.bind(this));let r=null!==(i=this._spec.emphasis)&&void 0!==i?i:{};if(!0!==this._option.disableTriggerEvent&&r.enable&&("adjacency"===r.effect||"related"===r.effect)){let t="hover"===r.trigger?"pointerover":"pointerdown";this.event.on(t,{level:W.l.chart},this._handleEmphasisElement)}}nodesSeriesDataUpdate(){this._nodesSeriesData.updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linksSeriesData.updateData()}_highLightElements(t,e){t&&t.length&&t.forEach(t=>{t.removeState([N.q.STATE_SANKEY_EMPHASIS_REVERSE,N.q.STATE_SANKEY_EMPHASIS]),e.includes(t.getDatum().key)?t.addState(N.q.STATE_SANKEY_EMPHASIS):t.addState(N.q.STATE_SANKEY_EMPHASIS_REVERSE)})}initTooltip(){this._tooltipHelper=new X(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark)}_setNodeOrdinalColorScale(){var t,e,i,r,s;let n,a;let o=null===(e=null===(t=this._option)||void 0===t?void 0:t.globalScale)||void 0===e?void 0:e.getScale("color");if(null==o?void 0:o._specified)return void(this._colorScale=o);o&&(n=o.domain(),a=o.range()),a||(a=this._getDataScheme()),n&&!(0,h.Z)(n[0])||(n=this.getNodeList()).length>10&&(a=null===(i=this._getDataScheme()[1])||void 0===i?void 0:i.scheme);let l=new ti.m;null===(s=(r=l.domain(n)).range)||void 0===s||s.call(r,a),this._colorScale=l}getNodeList(){var t,e;if(this._nodeList)return this._nodeList;let i=this._rawData.latestData[0],r=(null==i?void 0:i.nodes)?(null===(t=i.nodes[0])||void 0===t?void 0:t.children)?Array.from(this.extractNamesFromTree(i.nodes,this._spec.categoryField)):i.nodes.map((t,e)=>t[this._spec.categoryField]):(null==i?void 0:i.links)?Array.from(this.extractNamesFromLink(i.links)):null===(e=null==i?void 0:i.values)||void 0===e?void 0:e.map((t,e)=>t[this._spec.categoryField]);return this._nodeList=r,r}_getNodeNameFromData(t){var e;return(null==t?void 0:t.datum)?t.datum[this._spec.categoryField]:null!==(e=t.key)&&void 0!==e?e:t[this._spec.categoryField]}extractNamesFromTree(t,e){let i=new Set;return t.forEach(t=>{i.add(t[e]),t.children&&this.extractNamesFromTree(t.children,e).forEach(t=>i.add(t))}),i}extractNamesFromLink(t){let e=new Set,{sourceField:i,targetField:r}=this._spec;return t.forEach(t=>{(0,K.Z)(t[i])&&e.add(t[i]),(0,K.Z)(t[r])&&e.add(t[r])}),e}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(t,e){var i;return this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]&&(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(null===(i=this._viewDataStatistics.latestData)||void 0===i?void 0:i[t])?this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t]:this._rawData&&(this._rawStatisticsCache[t]={values:this._collectByField(t)})),this._rawStatisticsCache[t]}_collectByField(t){var e,i,r;let s=[],n=null===(i=null===(e=this.getRawData())||void 0===e?void 0:e.latestData)||void 0===i?void 0:i[0];if(!n)return[];if(n.links)(null===(r=n.nodes)||void 0===r?void 0:r.length)&&n.nodes.forEach(t=>{t[this._seriesField]&&s.push(t[this._seriesField])});else if(n.nodes){let t=new Set;return L(t,n.nodes,this._seriesField),Array.from(t)}return s}onLayoutEnd(t){super.onLayoutEnd(t),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()}getDefaultShapeType(){return"square"}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._nodeMark,this._linkMark]}getMarkData(t){return t.datum?(0,R.Z)(t.datum)?t.datum[t.datum.length-1]:t.datum:t}}tw.type=a.A.sankey,tw.transformerConstructor=tA,tw.mark=tv;let tC=()=>{D(),(0,tr.Y)(),tf(),(0,ts.k)(),te(),(0,P.wy)(),q.F.registerSeries(tw.type,tw)};var tT=i(5507);class tE extends tT.w{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","sourceField","targetField","direction","nodeAlign","crossNodeAlign","nodeGap","nodeWidth","linkWidth","minStepWidth","minNodeHeight","maxNodeHeight","minLinkHeight","maxLinkHeight","dropIsolatedNode","nodeHeight","linkHeight","equalNodeHeight","linkOverlap","iterations","nodeKey","linkSortBy","nodeSortBy","setNodeLayer","node","link","emphasis","inverse","overflow"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}var tM=i(8429),tB=i(7050),tD=i(6480),tO=i(86),tP=i(7428),tI=i(5767),tR=i(8103),tL=i(9167);let tF=r=class{constructor(){this.name="scrollbar",this.activeEvent="onRegister",this._uid=tO.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.scroll=t=>{var e,i;let r=t.target,s=this.getScrollContainer(r);if(!s&&!this.scrollContainer)return;if(!s&&this.scrollContainer){if(!this.scrollContainer.g.stage||this.scrollContainer.g.stage!==r.stage)return;let t=this.formatScrollContainer(this.scrollContainer.g);if(!t)return void this.clearScrollbar(this.scrollContainer.g,"all");this.scrollContainer.showH&&!t.showH&&this.clearScrollbar(this.scrollContainer.g,"horizontal"),this.scrollContainer.showV&&!t.showV&&this.clearScrollbar(this.scrollContainer.g,"vertical"),this.scrollContainer=t}else s&&this.scrollContainer&&s.g!==this.scrollContainer.g&&this.clearScrollbar(this.scrollContainer.g,"all");if(this.scrollContainer=null!=s?s:this.scrollContainer,!s)return;let n=s.g;if(!n)return;let{width:a,height:o,scrollX:l=0,scrollY:h=0}=n.attribute,u=l,d=h,{showH:c,showV:p}=s;this.scrollContainerBounds=(new Y.YZ).set(0,0,n.attribute.width,n.attribute.height),c&&c&&((0,tR.Wn)(t.deltaX)>(0,tR.Wn)(t.deltaY)?(c=c&&!0,p=p&&!1):(c=c&&!1,p=p&&!0));let g=this.childrenBounds.width(),m=this.childrenBounds.height();c&&((u=l-(null!==(e=t.deltaX)&&void 0!==e?e:0))>0?u=0:u<a-g&&(u=a-g)),p&&((d=h-(null!==(i=t.deltaY)&&void 0!==i?i:0))>0?d=0:d<o-m&&(d=o-m)),n.setAttributes({scrollX:u,scrollY:d}),this.addOrUpdateScroll(c,p,n.parent,n)},this.handleScrollBarChange=t=>{if(!(this.scrollContainer&&this.scrollContainerBounds&&this.childrenBounds&&t&&t.target&&t.detail&&t.detail.value))return;let e=t.target,i=t.detail.value;if("horizontal"===e.attribute.direction){let t=this.childrenBounds.width();this.scrollContainer.g.setAttributes({scrollX:-i[0]*t})}else{let t=this.childrenBounds.height();this.scrollContainer.g.setAttributes({scrollY:-i[0]*t})}}}activate(t){this.pluginService=t;let{stage:e}=this.pluginService;this.childrenBounds=new Y.FB,e.addEventListener("wheel",this.scroll),this.params=r.defaultParams}initEventOfScrollbar(t,e,i){t.addEventListener("pointerover",()=>{e.setAttribute("visibleAll",!0)}),t.addEventListener("pointermove",()=>{e.setAttribute("visibleAll",!0)}),t.addEventListener("pointerout",()=>{e.setAttribute("visibleAll",!1)}),e.addEventListener("pointerover",()=>{e.setAttribute("visibleAll",!0)}),e.addEventListener("pointerout",()=>{e.setAttribute("visibleAll",!0)}),e.addEventListener("scrollUp",this.handleScrollBarChange),e.addEventListener(tL.eV,this.handleScrollBarChange)}addOrUpdateScroll(t,e,i,r){if(t){let{scrollBar:t,isUpdate:e}=this.addOrUpdateHScroll(r,i,!0);e||this.initEventOfScrollbar(r,t,!0)}else this.clearScrollbar(r,"horizontal");if(e){let{scrollBar:t,isUpdate:e}=this.addOrUpdateHScroll(r,i,!1);e||this.initEventOfScrollbar(r,t,!1)}else this.clearScrollbar(r,"vertical")}getDirection(t){return t?"horizontal":"vertical"}addOrUpdateHScroll(t,e,i){var r,s;let n=this.getDirection(i),a=`${null!==(r=t.name)&&void 0!==r?r:t._uid}_${this.getDirection(i)}_${this.name}`,o=e.children.filter(t=>t.name===a),l=!0,h=o[0],{y:u=0,dy:d=0,x:c=0,dx:p=0,height:g,width:m,zIndex:f=0}=this.scrollContainer.g.attribute,v={x:0,y:0,direction:n,zIndex:f+1,visibleAll:!0,padding:[2,0],railStyle:{fill:"rgba(0, 0, 0, .1)"},range:[0,.05]};i?(v.width=this.scrollContainerBounds.width(),v.height=12):(v.height=this.scrollContainerBounds.height(),v.width=12),h?o.length>1&&o.forEach((t,e)=>{var i;e&&(null===(i=t.parent)||void 0===i||i.removeChild(t))}):(l=!1,(h=new tI.B(v)).name=a,e.add(h),h.isScrollBar=!0);let y=this.childrenBounds,{scrollX:_,scrollY:b}=t.attribute;if(i){let t=Math.min(this.scrollContainerBounds.width()/y.width(),1),e=Math.max(Math.min(_/this.childrenBounds.width(),0),t-1);v.x=c+p,v.y=u+d+g-(null!==(s=v.height)&&void 0!==s?s:0),v.range=[-e,-e+t]}else{let t=Math.min(this.scrollContainerBounds.height()/y.height(),1),e=Math.max(Math.min(b/this.childrenBounds.height(),0),t-1);v.x=c+p+m-this.scrollContainerBounds.width(),v.y=u+d,v.range=[-e,-e+t]}return h.setAttributes(v),{scrollBar:h,isUpdate:l}}clearScrollbar(t,e){t.parent&&t.parent.children.filter(t=>t.isScrollBar&&("all"===e||t.attribute.direction===e)).forEach(t=>{t.parent.removeChild(t)})}formatScrollContainer(t){if(!t||"group"!==t.type||!t.attribute)return null;let{overflow:e,width:i,height:r}=t.attribute;if(!e||"hidden"===e)return null;let s=!1,n=!1;"scroll"===e?(s=!0,n=!0):n=!(s="scroll-x"===e);let a=this.childrenBounds;return a.clear(),t.forEachChildren(t=>{a.union(t.AABBBounds)}),t.AABBBounds.empty()||(s&&(s=i<a.width()),n&&(n=r<a.height())),s||n?{g:t,showH:s,showV:n}:null}getScrollContainer(t){let e=t;for(;e;){let t=this.formatScrollContainer(e);if(t)return t;e=e.parent}return null}deactivate(t){let{stage:e}=this.pluginService;e.removeEventListener("wheel",this.scroll)}};tF.defaultParams={timeout:500},tF=r=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)()],tF);let tj=new tM.n((t,e,i,r)=>{i(tF)||(t(tF).toSelf(),t(tB.X).toService(tF))});class tZ extends n.P{constructor(){super(...arguments),this.transformerConstructor=tE,this.type="sankey",this.seriesType=a.A.sankey}_setStateInDatum(t,e,i,r,s){let n=(0,R.Z)(i)?i[0]:i,a=n?Object.keys(n):null;this.getRegionsInQuerier(s).forEach(i=>{if(!n)return void i.interaction.clearEventElement(t,!0);let s=!1;i.getSeries().forEach(e=>{var o;let l=null;e.getMarksWithoutRoot().forEach(o=>{if("text"===o.type)return;let h=null,u=o.getProduct();u&&((!r||(0,p.Z)(r)&&r(e,o))&&(h=u.elements.find(t=>a.every(e=>{var i;let r=null===(i=t.getDatum())||void 0===i?void 0:i.datum;return(0,R.Z)(r)&&(r=r[0]),n[e]==(null==r?void 0:r[e])}))),h&&(s=!0,i.interaction.startInteraction(t,h),(u.id().includes("node")||u.id().includes("link"))&&(l=h)))}),l&&(null===(o=e._handleEmphasisElement)||void 0===o||o.call(e,{item:l}))}),e&&s&&i.interaction.reverseEventElement(t)})}}tZ.type="sankey",tZ.seriesType=a.A.sankey,tZ.transformerConstructor=tE;var tH=i(1637),tN=i(5593);let tz=(0,i(8869).C)("SankeyChart",{type:"sankey",vchartConstrouctor:s.H},[()=>{tD.n.load(tj),tC(),q.F.registerChart(tZ.type,tZ)},tH.U,...tN.l])},1522:function(t,e,i){"use strict";i.d(e,{l:()=>ia});var r,s,n,a,o,l,h,u,d,c,p,g,m=i(7484),f=i(4159),v=i(7694),y=i(5014),_=i(7501),b=i(1532),x=i(5103),S=i(6818),A=i(9026),k=i(3722),w=i(9231),C=i(6542),T=i(8746),E=i(7602),M=i(8612),B=i(7578),D=i(2937),O=i(6689),P=i(325),I=i(4546),R=i(8654);function L(t,e,i){let r=0,s=t[0];if(!s)return!1;for(let n=1;n<t.length;n++){let a=t[n];r+=F(s.x,s.y,a.x,a.y,e,i),s=a}let n=t[0];return j(s.x,n.x)&&j(s.y,n.y)||(r+=F(s.x,s.y,n.x,n.y,e,i)),0!==r}function F(t,e,i,r,s,n){if(n>e&&n>r||n<e&&n<r||r===e)return 0;let a=(n-e)/(r-e),o=r<e?1:-1;1!==a&&0!==a||(o=r<e?.5:-.5);let l=a*(i-t)+t;return l===s?1/0:l>s?o:0}function j(t,e){return 1e-8>Math.abs(t-e)}function Z(t,e){for(let i=0;i<e.length;i++)if(L(t,e[i].x,e[i].y)||i>0&&function(t,e,i,r,s){for(let n=0,a=s[s.length-1];n<s.length;n++){let o=s[n];if((0,R.Kj)([t,e],[i,r],[o.x,o.y],[a.x,a.y]))return!0;a=o}return!1}(e[i-1].x,e[i-1].y,e[i].x,e[i].y,t))return!0;return!1}var H=i(645),N=i(3e3);(r=h||(h={})).drawStart="drawStart",r.drawEnd="drawEnd",r.drawing="drawing",r.moving="moving",r.moveStart="moveStart",r.moveEnd="moveEnd",r.brushClear="brushClear";let z={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:"pointerup",resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{y1:-1/0,y2:1/0,x1:-1/0,x2:1/0}};var V=i(9367),U=i(4914);let W={debounce:D.Z,throttle:O.Z};(0,V.M)(),(0,U.M)();class G extends N.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,P.Z)({},G.defaultAttributes,t)),this.name="brush",this._activeDrawState=!1,this._cacheDrawPoints=[],this._isDrawedBeforeEnd=!1,this._isDownBeforeUpOutside=!1,this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._onBrushStart=t=>{var e;if(this._outOfInteractiveRange(t))return void(this._isDownBeforeUpOutside=!0);t.stopPropagation();let i=null===(e=this.attribute.brushMoved)||void 0===e||e;this._activeMoveState=i&&this._isPosInBrushMask(t),this._activeDrawState=!this._activeMoveState,this._activeDrawState&&this._initDraw(t),this._activeMoveState&&this._initMove(t)},this._onBrushing=t=>{this._outOfInteractiveRange(t)||((this._activeDrawState||this._activeMoveState)&&t.stopPropagation(),this._activeDrawState&&this._drawing(t),this._activeMoveState&&this._moving(t))},this._onBrushingWithDelay=0===this.attribute.delayTime?this._onBrushing:W[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=t=>{var e;if(!this._activeDrawState&&!this._activeMoveState)return;t.preventDefault();let{removeOnClick:i=!0}=this.attribute;this._activeDrawState&&!this._isDrawedBeforeEnd&&i?((null===(e=this._operatingMask)||void 0===e?void 0:e._AABBBounds.empty())&&this._dispatchEvent(h.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}):(this._activeDrawState&&this._dispatchEvent(h.drawEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}),this._activeMoveState&&this._dispatchEvent(h.moveEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)},this._onBrushClear=t=>{t.preventDefault();let{removeOnClick:e=!0}=this.attribute;this._isDownBeforeUpOutside&&e&&(this._dispatchEvent(h.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._isDownBeforeUpOutside=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)}}_bindBrushEvents(){if(this.attribute.disableTriggerEvent)return;let{trigger:t=z.trigger,updateTrigger:e=z.updateTrigger,endTrigger:i=z.endTrigger,resetTrigger:r=z.resetTrigger}=this.attribute;(0,I.IX)(t).forEach(t=>M.rF.addEventListener(t,this._onBrushStart)),(0,I.IX)(e).forEach(t=>this.stage.addEventListener(t,this._onBrushingWithDelay)),(0,I.IX)(i).forEach(t=>this.stage.addEventListener(t,this._onBrushEnd)),(0,I.IX)(r).forEach(t=>this.stage.addEventListener(t,this._onBrushClear))}_isPosInBrushMask(t){let e=this.eventPosToStagePos(t),i=this._container.getChildren();for(let t=0;t<i.length;t++){let{points:r=[],dx:s=0,dy:n=0}=i[t].attribute;if(L(r.map(t=>({x:t.x+s,y:t.y+n})),e.x,e.y))return this._operatingMask=i[t],!0}return!1}_initDraw(t){let{brushMode:e}=this.attribute,i=this.eventPosToStagePos(t);this._cacheDrawPoints=[i],this._isDrawedBeforeEnd=!1,"single"===e&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(h.drawStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_initMove(t){var e,i;this._cacheMovePoint=this.eventPosToStagePos(t),this._operatingMaskMoveDx=null!==(e=this._operatingMask.attribute.dx)&&void 0!==e?e:0,this._operatingMaskMoveDy=null!==(i=this._operatingMask.attribute.dy)&&void 0!==i?i:0;let{interactiveRange:r}=this.attribute,{minY:s=-1/0,maxY:n=1/0,minX:a=-1/0,maxX:o=1/0}=r,{x1:l,x2:u,y1:d,y2:c}=this._operatingMask.globalAABBBounds;this._operatingMaskMoveRangeX=[a-l,o-u],this._operatingMaskMoveRangeY=[s-d,n-c],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(h.moveStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_drawing(t){var e,i;let r=this.eventPosToStagePos(t),{sizeThreshold:s=5,brushType:n}=this.attribute,a=this._cacheDrawPoints.length;if(a>0){let t=null!==(e=this._cacheDrawPoints[this._cacheDrawPoints.length-1])&&void 0!==e?e:{};if(r.x===t.x&&r.y===t.y)return}"polygon"===n||a<=1?this._cacheDrawPoints.push(r):this._cacheDrawPoints[a-1]=r;let o=this._computeMaskPoints();this._operatingMask.setAttribute("points",o);let{x1:l=0,x2:u=0,y1:d=0,y2:c=0}=null===(i=this._operatingMask)||void 0===i?void 0:i._AABBBounds;this._isDrawedBeforeEnd=!this._operatingMask._AABBBounds.empty()&&!!(Math.abs(u-l)>s||Math.abs(d-c)>s),this._isDrawedBeforeEnd&&(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(h.drawing,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}))}_moving(t){let e=this._cacheMovePoint,i=this.eventPosToStagePos(t);if(i.x===(null==e?void 0:e.x)&&i.y===(null==e?void 0:e.y))return;let r=i.x-e.x,s=i.y-e.y,n=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],r))+this._operatingMaskMoveDx,a=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],s))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:n,dy:a}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(h.moving,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_computeMaskPoints(){let{brushType:t,xRange:e=[0,0],yRange:i=[0,0]}=this.attribute,r=this._cacheDrawPoints[0],s=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return"rect"===t?[r,{x:s.x,y:r.y},s,{x:r.x,y:s.y}]:"x"===t?[{x:r.x,y:i[0]},{x:s.x,y:i[0]},{x:s.x,y:i[1]},{x:r.x,y:i[1]}]:"y"===t?[{x:e[0],y:r.y},{x:e[0],y:s.y},{x:e[1],y:s.y},{x:e[1],y:r.y}]:(0,H.Z)(this._cacheDrawPoints)}_addBrushMask(){var t;let{brushStyle:e,hasMask:i}=this.attribute,r=B.i.polygon(Object.assign(Object.assign({points:(0,H.Z)(this._cacheDrawPoints),cursor:"move",pickable:!1},e),{opacity:i?null!==(t=e.opacity)&&void 0!==t?t:1:0}));r.name=`brush-${Date.now()}`,this._operatingMask=r,this._container.add(r),this._brushMaskAABBBoundsDict[r.name]=r.AABBBounds}_outOfInteractiveRange(t){let{interactiveRange:e}=this.attribute,{minY:i=-1/0,maxY:r=1/0,minX:s=-1/0,maxX:n=1/0}=e,a=this.eventPosToStagePos(t);return a.x>n||a.x<s||a.y>r||a.y<i}eventPosToStagePos(t){return this.stage.eventPointTransform(t)}render(){this._bindBrushEvents();let t=this.createOrUpdateChild("brush-container",{},"group");this._container=t}releaseBrushEvents(){let{delayType:t="throttle",delayTime:e=0,trigger:i=z.trigger,updateTrigger:r=z.updateTrigger,endTrigger:s=z.endTrigger,resetTrigger:n=z.resetTrigger}=this.attribute;(0,I.IX)(i).forEach(t=>M.rF.removeEventListener(t,this._onBrushStart)),(0,I.IX)(r).forEach(t=>this.stage.removeEventListener(t,this._onBrushingWithDelay)),(0,I.IX)(s).forEach(t=>this.stage.removeEventListener(t,this._onBrushEnd)),(0,I.IX)(n).forEach(t=>this.stage.removeEventListener(t,this._onBrushClear))}}G.defaultAttributes=z;var $=i(7623),X=i(123),Y=i(9730),K=i(8469),q=i(2096);class J extends T.H{constructor(){super(...arguments),this.layoutType="none",this.type=E.L.brush,this.name=E.L.brush,this.specKey="brush",this.layoutZIndex=C.Ai.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._needInitOutState=!0,this._cacheInteractiveRangeAttrs=[],this._needDisablePickable=!1,this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}init(){let t=this._transformBrushedMarkAttr(this._spec.inBrush),e=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(i=>{i.getActiveMarks().forEach(r=>{r&&(i.setMarkStyle(r,Object.assign({},t),"inBrush",w.W.Series),i.setMarkStyle(r,Object.assign({},e),"outOfBrush",w.W.Series))})})}static getSpecInfo(t){return(0,q.ts)(t,this.specKey,this.type,t=>!1!==t.visible)}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_extendDataInBrush(t){var e,i;let r=[];for(let s in t)for(let n in t[s])r.push(Object.assign({},null===(i=null===(e=t[s][n])||void 0===e?void 0:e.data)||void 0===i?void 0:i[0]));return r}_extendDatumOutOfBrush(t){var e;let i=[];for(let r in t)i.push(null===(e=t[r].data)||void 0===e?void 0:e[0]);return i}_getBrushInteractiveAttr(t){let e=t.getLayoutStartPoint(),i=t.getLayoutRect(),r=e.x,s=r+i.width,n=e.y,a=n+i.height;return{interactiveRange:{minY:n,maxY:a,minX:r,maxX:s},xRange:[r,s],yRange:[n,a]}}_updateBrushComponent(t,e){let i=this._getBrushInteractiveAttr(t),r=this._brushComponents[e];r.setAttributes(i),this._initMarkBrushState(e,""),r.children[0].removeAllChild(),this._needInitOutState=!0}_createBrushComponent(t,e){var i,r;let s=this._getBrushInteractiveAttr(t),n=new G(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:(0,X.h_)(null===(i=this._spec)||void 0===i?void 0:i.style)},s),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));n.id=null!==(r=this._spec.id)&&void 0!==r?r:`brush-${this.id}`,this.getContainer().add(n);let{brushMode:a="single"}=this._spec;this._brushComponents.push(n),this._cacheInteractiveRangeAttrs.push(s),n.addEventListener(h.drawStart,e=>{this._emitEvent(k.$7.brushStart,t)}),n.addEventListener(h.moveStart,e=>{this._emitEvent(k.$7.brushStart,t)}),n.addEventListener(h.drawing,i=>{this._needInitOutState&&"single"===a&&this._initMarkBrushState(e,"outOfBrush"),this._needInitOutState=!1,this._needDisablePickable=!0,this._handleBrushChange(k.$7.brushChange,t,i),this._emitEvent(k.$7.brushChange,t)}),n.addEventListener(h.moving,e=>{this._handleBrushChange(k.$7.brushChange,t,e),this._emitEvent(k.$7.brushChange,t)}),n.addEventListener(h.brushClear,i=>{this._initMarkBrushState(e,""),this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(k.$7.brushChange,t,i),this._handleBrushChange(k.$7.brushClear,t,i),this._emitEvent(k.$7.brushChange,t),this._emitEvent(k.$7.brushClear,t)}),n.addEventListener(h.drawEnd,e=>{this._needInitOutState=!0,this._needDisablePickable=!1;let{operateMask:i}=e.detail;this._handleBrushChange(k.$7.brushEnd,t,e);let r=this._extendDataInBrush(this._inBrushElementsMap);!this._spec.zoomWhenEmpty&&r.length>0&&this._setAxisAndDataZoom(i,t),this._emitEvent(k.$7.brushEnd,t)}),n.addEventListener(h.moveEnd,e=>{let{operateMask:i}=e.detail;this._handleBrushChange(k.$7.brushEnd,t,e);let r=this._extendDataInBrush(this._inBrushElementsMap);!this._spec.zoomWhenEmpty&&r.length>0&&this._setAxisAndDataZoom(i,t),this._emitEvent(k.$7.brushEnd,t)})}_handleBrushChange(t,e,i){let{operateMask:r}=i.detail;this._reconfigItem(r,e),this._reconfigLinkedItem(r,e)}_emitEvent(t,e){this.event.emit(t,{model:this,value:{operateType:t,operateRegion:e,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord}})}_transformBrushedMarkAttr(t){let e={};return(null==t?void 0:t.symbol)&&(e.symbolType=t.symbol),(null==t?void 0:t.symbolSize)&&(e.size=t.symbolSize),(null==t?void 0:t.color)&&(e.fill=t.color),(null==t?void 0:t.colorAlpha)&&(e.fillOpacity=t.colorAlpha),Object.assign(Object.assign({},(0,X.h_)(t)),e)}_reconfigItem(t,e){this._itemMap[e.id].forEach(e=>{let i=e.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach(i=>{var r,s,n;let a=i.getGraphicItem(),o=e.id+"_"+i.key;(null===(r=this._outOfBrushElementsMap)||void 0===r?void 0:r[o])&&this._isBrushContainItem(t,a)?(i.addState("inBrush"),this._inBrushElementsMap[null==t?void 0:t.name]||(this._inBrushElementsMap[null==t?void 0:t.name]={}),this._inBrushElementsMap[null==t?void 0:t.name][o]=i,delete this._outOfBrushElementsMap[o]):(null===(n=null===(s=this._inBrushElementsMap)||void 0===s?void 0:s[null==t?void 0:t.name])||void 0===n?void 0:n[o])&&!this._isBrushContainItem(t,a)&&(i.removeState("inBrush"),i.addState("outOfBrush"),this._outOfBrushElementsMap[o]=i,delete this._inBrushElementsMap[t.name][o]),a.setAttribute("pickable",!this._needDisablePickable)})})}_reconfigLinkedItem(t,e){let i=e.getLayoutStartPoint(),r=e.getSeries().map(t=>t.id);this._linkedSeries.forEach(e=>{if(!r.includes(e.id)){let r=e.getRegion().getLayoutStartPoint(),s=r.x-i.x,n=r.y-i.y;this._linkedItemMap[e.id].forEach(e=>{let i=e.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach(i=>{var r,a,o;let l=i.getGraphicItem(),h=e.id+"_"+i.key;(null===(r=this._linkedOutOfBrushElementsMap)||void 0===r?void 0:r[h])&&this._isBrushContainItem(t,l,{dx:s,dy:n})?(i.addState("inBrush"),this._linkedInBrushElementsMap[null==t?void 0:t.name]||(this._linkedInBrushElementsMap[null==t?void 0:t.name]={}),this._linkedInBrushElementsMap[null==t?void 0:t.name][h]=i,delete this._linkedOutOfBrushElementsMap[h]):(null===(o=null===(a=this._linkedInBrushElementsMap)||void 0===a?void 0:a[null==t?void 0:t.name])||void 0===o?void 0:o[h])&&!this._isBrushContainItem(t,l,{dx:s,dy:n})&&(i.removeState("inBrush"),i.addState("outOfBrush"),this._linkedOutOfBrushElementsMap[h]=i),l.setAttribute("pickable",!this._needDisablePickable)})})}})}_isBrushContainItem(t,e,i){var r,s,n;if(!(null==t?void 0:t.globalTransMatrix)||!(null===(r=null==t?void 0:t.attribute)||void 0===r?void 0:r.points))return!1;let a=null!==(n=null===(s=null==t?void 0:t.attribute)||void 0===s?void 0:s.points)&&void 0!==n?n:[],{a:o,b:l,c:h,d:u,e:d,f:c}=t.globalTransMatrix,p=(null==i?void 0:i.dx)||0,g=(null==i?void 0:i.dy)||0,m=a.map(t=>({x:o*t.x+h*t.y+d+p,y:l*t.x+u*t.y+c+g}));t.globalAABBBounds.clone().set(t.globalAABBBounds.x1+p,t.globalAABBBounds.y1+g,t.globalAABBBounds.x2+p,t.globalAABBBounds.y2+g);let f=e.globalTransMatrix.e,v=e.globalTransMatrix.f,y=[];if("symbol"===e.type){let{size:t=0}=null==e?void 0:e.attribute,i=(0,I.IX)(t)[0]/2;return Z(m,[{x:f-i,y:v-i},{x:f+i,y:v-i},{x:f+i,y:v+i},{x:f-i,y:v+i}])}if("rect"===e.type){let{x1:t,x2:i,y1:r,y2:s}=null==e?void 0:e.AABBBounds,n=Math.abs(t-i),a=Math.abs(r-s);return Z(m,[{x:f,y:v},{x:f+n,y:v},{x:f+n,y:v+a},{x:f,y:v+a}])}return t.globalAABBBounds.intersects(e.globalAABBBounds)}_stateClamp(t){return Math.min(Math.max(0,t),1)}_setAxisAndDataZoom(t,e){var i;if(this._zoomRecord=[],this._spec.zoomAfterBrush){let r=t.AABBBounds;null===(i=this._regionAxisMap["region_"+e.id])||void 0===i||i.forEach(t=>{var i,s;let n="bottom"===t.layoutOrient||"top"===t.layoutOrient,a=null!==(i=this._spec.axisRangeExpand)&&void 0!==i?i:0,{x1:o,x2:l,y1:h,y2:u}=r,d=n?"x":"y",c=n?o:h,p=n?l:u;if(this._axisDataZoomMap[t.id]){let i=this._axisDataZoomMap[t.id],r=i.relatedAxisComponent,s=r.getScale().invert(c-e.getLayoutStartPoint()[d]),n=r.getScale().invert(p-e.getLayoutStartPoint()[d]),o=i.dataToStatePoint(s),l=i.dataToStatePoint(n),h=this._stateClamp(o-a),u=this._stateClamp(l+a);i.setStartAndEnd(Math.min(h,u),Math.max(h,u),["percent","percent"]),this._zoomRecord.push({operateComponent:i,start:h,end:u,startValue:i.statePointToData(h),endValue:i.statePointToData(u)})}else{let i=t.getScale().range(),r=null!==(s=t.getScale().rangeFactor())&&void 0!==s?s:[0,1],n=(0,I.Z$)(i)<i[0],o=c-e.getLayoutStartPoint()[d],l=p-e.getLayoutStartPoint()[d],h=n?Math.min(o,l):Math.max(o,l),u=n?Math.max(o,l):Math.min(o,l),g=(u-i[0])/((0,I.Z$)(i)-i[0])*(r[1]-r[0])+r[0],m=(h-i[0])/((0,I.Z$)(i)-i[0])*(r[1]-r[0])+r[0],f=this._stateClamp(g-a),v=this._stateClamp(m+a);t.getScale().rangeFactor([f,v]),t.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:t,start:f,end:v,startValue:t.getScale().invert(u),endValue:t.getScale().invert(h)})}})}}_bindRegions(){(0,$.Z)(this._spec.regionId)&&(0,$.Z)(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex((0,I.IX)(this._spec.regionId),(0,I.IX)(this._spec.regionIndex))}_bindLinkedSeries(){(0,$.Z)(this._spec.brushLinkSeriesId)&&(0,$.Z)(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex((0,I.IX)(this._spec.brushLinkSeriesId),(0,I.IX)(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){(0,$.Z)(this._spec.axisId)?(0,I.IX)(this._spec.axisId).forEach(t=>{this._releatedAxes.push(this._option.getComponentByUserId(t))}):(0,$.Z)(this._spec.axisIndex)?(0,I.IX)(this._spec.axisIndex).forEach(t=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",t))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(t=>{null==t||t.getRegions().forEach(e=>{this._regionAxisMap["region_"+e.id]?this._regionAxisMap["region_"+e.id].push(t):this._regionAxisMap["region_"+e.id]=[t]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(t=>{t.relatedAxisComponent&&(this._axisDataZoomMap[t.relatedAxisComponent.id]=t)})}_initNeedOperatedItem(){let t=this._spec.seriesId,e=this._spec.seriesIndex;this._relativeRegions.forEach(i=>{let r=[];i.getSeries().forEach(s=>{(t&&(0,I.IX)(t).includes(s.userId.toString())||e&&(0,I.IX)(e).includes(s.getSpecIndex())||!e&&!t)&&r.push(...s.getMarksWithoutRoot()),this._itemMap[i.id]=r})}),this._linkedSeries.forEach(t=>{this._linkedItemMap[t.id]=t.getMarksWithoutRoot()})}_initMarkBrushState(t,e){this._brushComponents.forEach((e,i)=>{i!==t&&e.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach(t=>{t.getMarksWithoutRoot().forEach(t=>{let i=t.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach(i=>{let r=t.id+"_"+i.key;i.removeState("inBrush"),i.removeState("outOfBrush"),i.addState(e),this._outOfBrushElementsMap[r]=i,this._linkedOutOfBrushElementsMap[r]=i})})})}initEvent(){}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return this._brushComponents}_compareSpec(t,e){this._brushComponents&&this._relativeRegions.forEach((t,e)=>{this._updateBrushComponent(t,e)});let i=super._compareSpec(t,e);return(0,Y.X)(e,t)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(t){var e;super.onLayoutEnd(t),!this._option.disableTriggerEvent&&(null===(e=this._spec.visible)||void 0===e||e)&&(this._brushComponents?this._relativeRegions.forEach((t,e)=>{this._updateBrushComponent(t,e)}):(this._brushComponents=[],this._relativeRegions.forEach((t,e)=>{this._createBrushComponent(t,e)})))}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(t=>{t._container.incrementalClearChild()})}clear(){if(this._brushComponents){let t=this.getContainer();this._brushComponents.forEach(e=>{e.removeAllChild(),e.releaseBrushEvents(),t&&t.removeChild(e)}),this._brushComponents=null}}}J.type=E.L.brush,J.specKey="brush";var Q=i(5022),tt=i(1036),te=i(6082),ti=i(1601),tr=i(9038),ts=i(4218),tn=i(9114),ta=i(7636);let to=(t,e)=>{let{getNewDomain:i,isContinuous:r,field:s,originalFields:n}=e,a=s(),o=i();if((0,te.Z)(o)||(0,te.Z)(a))return t;let l=n(),h=(0,ta.Z)(a)?a[0]:a;return t[h]&&l&&l[h]&&l[h].lockStatisticsByDomain&&!r()&&(t[h].values=o),t},tl=(t,e)=>{let{getNewDomain:i,isContinuous:r,field:s}=e,n=s(),a=i();if((0,te.Z)(a)||(0,te.Z)(n))return t;if(0===a.length)return[];let o={};a.forEach(t=>{o[t]||(o[t]=1)});let l=null;return l=r()?t=>{let e=!1;return(0,I.IX)(n).every(i=>{t[i]>=a[0]&&t[i]<=(0,I.Z$)(a)&&(e=!0)}),e}:t=>{let e=!1;return(0,I.IX)(n).every(i=>{(o[t[i]+""]||o[t[i]])&&(e=!0)}),e},t.filter(l)},th=(t,e)=>{let{stateFields:i,valueFields:r,dataCollection:s}=e.input,{stateField:n,valueField:a}=e.output,o={},l=[];return s.forEach((t,e)=>{var s;if((0,te.Z)(i[e]))return;let n=null===(s=t.getFields())||void 0===s?void 0:s[i[e]];n&&n.lockStatisticsByDomain&&n.domain.forEach(t=>{o[t]=0}),t.latestData.forEach(t=>{(0,I.IX)(i[e]).forEach(i=>{(0,te.Z)(t[i])||((0,te.Z)(o[t[i]])&&(o[t[i]]=0),(0,te.Z)(r[e])||(o[t[i]]+=isNaN(parseFloat(t[r[e]]))?1:parseFloat(t[r[e]])))})})}),Object.keys(o).forEach((t,e)=>{let i={[n]:t};a&&(i[a]=o[t]),l.push(i)}),l};var tu=i(6358),td=i(5173),tc=i(1287),tp=i(3881),tg=i(3604),tm=i(8103),tf=i(7773),tv=i(5795),ty=i(6338),t_=i(3558),tb=i(6962),tx=i(7631);class tS{parserScrollEvent(t){return t?!(t.ctrlKey||0===t.deltaY&&0===t.deltaX)&&(t.scrollX=t.deltaX,t.scrollY=t.deltaY,t):t}parserZoomEvent(t){if(!t)return t;let e=Math.pow(1.0005,-t.deltaY*Math.pow(16,t.deltaMode));return t.zoomDelta=e,t.zoomX=t.canvasX,t.zoomY=t.canvasY,t}clearZoom(){}clearScroll(){}clearDrag(){}parserDragEvent(){return!0}}class tA{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0,this.pointerId=null}parserDragEvent(t){return!0}parserZoomEvent(t){let e=t.scale;if(0===this._lastScale)return this._lastScale=e,t;t.zoomDelta=e/this._lastScale;let i=t.center;return t.zoomX=i.x,t.zoomY=i.y,this._lastScale=e,t}parserScrollEvent(t){return t}clearScroll(){}clearDrag(){}}function tk(t){return t===tb.i["desktop-browser"]||t===tb.i["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:tS}:(0,tx.wx)(t)||(0,tx.Oy)(t)?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:tA}:null}let tw={debounce:D.Z,throttle:O.Z};var tC=i(2990);class tT extends T.H{get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(t,e,i=["percent","percent"]){let[r="percent",s="percent"]=i,n="percent"===r?t:this.dataToStatePoint(t),a="percent"===s?e:this.dataToStatePoint(e);this._handleChange(n,a,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(t){this._handleChartZoom({zoomDelta:1.2,zoomX:null==t?void 0:t.x,zoomY:null==t?void 0:t.y})}zoomOut(t){this._handleChartZoom({zoomDelta:.8,zoomX:null==t?void 0:t.x,zoomY:null==t?void 0:t.y})}_handleChange(t,e,i){var r,s;null!==(s=null===(r=this._spec)||void 0===r?void 0:r.zoomLock)&&void 0!==s&&s||e-t!==this._spanCache&&(e-t<this._minSpan||e-t>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=e-t)}_isReverse(){let t=this._relatedAxisComponent;if(!t)return!1;let e=t.getScale();return e.range()[0]>e.range()[1]&&(!t.getInverse()||this._isHorizontal)}_updateRangeFactor(t){let e=this._relatedAxisComponent.getScale(),i=this._isReverse(),r=i?[1-this._end,1-this._start]:[this._start,this._end];if(i)switch(t){case"startHandler":e.rangeFactorEnd(r[1]);break;case"endHandler":e.rangeFactorStart(r[0]);break;default:e.rangeFactorStart(r[0],!0),e.rangeFactorEnd(r[1])}else switch(t){case"startHandler":e.rangeFactorStart(r[0]);break;case"endHandler":e.rangeFactorEnd(r[1]);break;default:e.rangeFactorEnd(r[1],!0),e.rangeFactorStart(r[0])}let s=e.rangeFactor();s?(this._start=i?1-s[1]:s[0],this._end=i?1-s[0]:s[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(t,e){super(t,e),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._shouldChange=!0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:t=>{var e,i;let r=this._relatedAxisComponent;if(r&&"axis"===this._filterMode){let s=r.getScale(),n=r.getSpec();this._auto&&this._getAxisBandSize(n)&&this._spec.ignoreBandSize&&(s.bandwidth("auto"),s.maxBandwidth("auto"),s.minBandwidth("auto")),this._updateRangeFactor(t),this._auto&&(null===(i=null===(e=this._component)||void 0===e?void 0:e.setStartAndEnd)||void 0===i||i.call(e,this._start,this._end)),r.effect.scaleUpdate({value:"force"})}else(0,tn.xV)(this._regions,t=>{var e;null===(e=t.getViewData())||void 0===e||e.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),(0,tn.xV)(this._regions,t=>{t.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(t,e,i)=>{var r,s;return this._startValue=t,this._endValue=e,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),null===(s=(r=this.effect).onZoomChange)||void 0===s||s.call(r,i),!0},this._handleChartZoom=(t,e)=>{var i,r;if(!this._activeRoam||this._zoomAttr.filter&&!this._zoomAttr.filter(t,e))return;let{zoomDelta:s,zoomX:n,zoomY:a}=t,{x:o,y:l}=this._regions[0].getLayoutStartPoint(),{width:h,height:u}=this._regions[0].getLayoutRect(),d=Math.abs(this._start-this._end),c=null!==(r=null===(i=this._spec.roamZoom)||void 0===i?void 0:i.rate)&&void 0!==r?r:1;if(d>=1&&s<1||d<=.01&&s>1)return;let p=this._isHorizontal?n:a,g=d*(s-1)*c,m=g/2,f=g/2;if(p){let t=this._isHorizontal?o:l,e=this._isHorizontal?h:u;m=Math.abs(t-p)/Math.abs(e-t)*g,f=Math.abs(e-p)/Math.abs(e-t)*g}let v=(0,tg.Z)(this._start+m,0,1),y=(0,tg.Z)(this._end-f,0,1);this._handleChange(Math.min(v,y),Math.max(v,y),!0)},this._handleChartScroll=(t,e)=>{var i;if(!this._activeRoam||this._scrollAttr.filter&&!this._scrollAttr.filter(t,e))return!1;let{scrollX:r,scrollY:s}=t,n=this._isHorizontal?r:s,a=this._isHorizontal?(0,tm.Wn)(r/s)>=.5:(0,tm.Wn)(s/r)>=.5;this._scrollAttr.reverse||(n=-n),a&&this._handleChartMove(n,null!==(i=this._scrollAttr.rate)&&void 0!==i?i:1);let o=0!==this._start&&1!==this._end;return a&&o},this._handleChartDrag=(t,e)=>{var i;if(!this._activeRoam||this._dragAttr.filter&&!this._dragAttr.filter(t,e))return;let[r,s]=t,n=this._isHorizontal?r:s;this._dragAttr.reverse&&(n=-n),this._handleChartMove(n,null!==(i=this._dragAttr.rate)&&void 0!==i?i:1)},this._handleChartMove=(t,e)=>{let i=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(t)>=1e-6){if(t>0&&this._end<1){let r=Math.min(1-this._end,t/i)*e;this._handleChange(this._start+r,this._end+r,!0)}else if(t<0&&this._start>0){let r=Math.max(-this._start,t/i)*e;this._handleChange(this._start+r,this._end+r,!0)}}return!1},this._orient=(0,tp.x)(t),this._isHorizontal="horizontal"===(0,tp._Q)(this._orient)}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if((0,$.Z)(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):(0,$.Z)(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),(0,te.Z)(this._spec.field)&&!this._relatedAxisComponent){let t=this._option.getComponentsByKey("axes"),e=t.find(t=>t._orient===this._orient);if(e)this._relatedAxisComponent=e;else{let e=t.find(t=>!(0,td.z2)(t.getScale().type));this._relatedAxisComponent=e}}this._relatedAxisComponent&&"axis"===this._filterMode&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var t,e;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();let i=this._relatedAxisComponent?null===(e=(t=this._relatedAxisComponent).getBindSeriesFilter)||void 0===e?void 0:e.call(t):null;if((0,$.Z)(i)&&((0,$.Z)(i.userId)&&(this._seriesUserId=(0,I.IX)(i.userId)),(0,$.Z)(i.specIndex)&&(this._seriesIndex=(0,I.IX)(i.specIndex))),(0,$.Z)(this._spec.seriesId)){let t=(0,I.IX)(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(e=>t.includes(e)):this._seriesUserId=t}if((0,$.Z)(this._spec.seriesIndex)){let t=(0,I.IX)(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(e=>t.includes(e)):this._seriesIndex=t}if((0,$.Z)(this._spec.regionIndex)){let t=this._option.getRegionsInIndex((0,I.IX)(this._spec.regionIndex));this._regions=this._regions.filter(e=>t.includes(e))}else if((0,$.Z)(this._spec.regionId)){let t=(0,I.IX)(this._spec.regionId);this._regions=t.length?this._regions.filter(e=>t.includes(e.id)):[]}}onDataUpdate(){var t;let e=this._computeDomainOfStateScale((0,td.z2)(this._stateScale.type));this._stateScale.domain(e,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&!(0,Y.X)(this._domainCache,e)&&(this._domainCache=e,this._dataUpdating=!0,null===(t=this.getChart())||void 0===t||t.setLayoutTag(!0,null,!1))}_computeDomainOfStateScale(t){if(this._spec.customDomain)return this._spec.customDomain;let e=this._data.getLatestData().map(t=>t[this._stateField]);if(t){let t=e.map(t=>1*t);return e.length?[(0,I.iH)(t),(0,I.CE)(t)]:[-1/0,1/0]}return e}_initEvent(){this._initCommonEvent()}_initData(){let t=[],e=[],i=[];if(this._relatedAxisComponent){let r={};(0,tn.xV)(this._regions,s=>{var n,a;let o="cartesian"===s.coordinate?s.getXAxisHelper():"polar"===s.coordinate?s.angleAxisHelper:null,l="cartesian"===s.coordinate?s.getYAxisHelper():"polar"===s.coordinate?s.radiusAxisHelper:null;if(!o||!l)return;let h=o.getAxisId()===this._relatedAxisComponent.id?o:l.getAxisId()===this._relatedAxisComponent.id?l:this._isHorizontal?o:l,u=h===o?l:o,d=(0,td.z2)(u.getScale(0).type),c=(0,td.z2)(h.getScale(0).type);t.push(s.getRawData());let p=s.getSpec(),g="cartesian"===s.coordinate?(0,I.IX)(p.xField):(0,I.IX)(null!==(n=p.angleField)&&void 0!==n?n:p.categoryField),m="cartesian"===s.coordinate?(0,I.IX)(p.yField):(0,I.IX)(null!==(a=p.radiusField)&&void 0!==a?a:p.valueField);if(r[s.id]="link"===s.type?["from_xField"]:h===o?g:m,c?e.push(r[s.id]):e.push(r[s.id][0]),this._valueField){let t="link"===s.type?["from_yField"]:u===o?g:m;d&&i.push(...t)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=r}else(0,tn.xV)(this._regions,r=>{t.push(r.getRawData()),e.push(this._field),this._valueField&&i.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});let{dataSet:r}=this._option;(0,tu.I)(r,"dataview",tv.i),(0,tu.U)(r,"dataFilterComputeDomain",th);let s=new ty.VO(r,{name:`${this.type}_${this.id}_data`});s.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,stateFields:e,valueFields:i},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new t_.O(this._option,s),s.reRunAllTransform(),r.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var t;super.setAttrFromSpec(),!0===this._spec.roamZoom||this._spec.roamZoom?this._zoomAttr=(0,P.Z)({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,!0===this._spec.roamDrag||this._spec.roamDrag?this._dragAttr=(0,P.Z)({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,!0===this._spec.roamScroll||this._spec.roamScroll?this._scrollAttr=(0,P.Z)({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=null===(t=this._spec.visible)||void 0===t||t}statePointToData(t){let e=this._stateScale,i=e.domain();if((0,td.z2)(e.type))return this._isReverse()?i[0]+((0,I.Z$)(i)-i[0])*(1-t):i[0]+((0,I.Z$)(i)-i[0])*t;let r=e.range();this._isReverse()&&(r=r.slice().reverse());let s=r[0]+((0,I.Z$)(r)-r[0])*t;return e.invert(s)}dataToStatePoint(t){let e=this._stateScale,i=e.scale(t),r=e.range();return!this._isHorizontal&&(0,td.z2)(e.type)&&(r=r.slice().reverse()),(i-r[0])/((0,I.Z$)(r)-r[0])}_modeCheck(t,e){return"start"===t?"percent"===e&&(0,$.Z)(this._spec.start)||"value"===e&&(0,$.Z)(this._spec.startValue):"percent"===e&&(0,$.Z)(this._spec.end)||"value"===e&&(0,$.Z)(this._spec.endValue)}_setStateFromSpec(){var t,e;let i,r;if(this._auto=!!this._spec.auto,this._spec.rangeMode){let[t,e]=this._spec.rangeMode;this._modeCheck("start",t)&&this._modeCheck("end",e)&&(i="percent"===t?this._spec.start:this.dataToStatePoint(this._spec.startValue),r="percent"===e?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else i=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,r=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this.statePointToData(i),this._endValue=this.statePointToData(r),this._start=i,this._end=r,this._minSpan=null!==(t=this._spec.minSpan)&&void 0!==t?t:0,this._maxSpan=null!==(e=this._spec.maxSpan)&&void 0!==e?e:1,(0,td.z2)(this._stateScale.type)&&this._stateScale.domain()[0]!==(0,I.Z$)(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/((0,I.Z$)(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/((0,I.Z$)(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&"axis"===this._filterMode||0===this._start&&1===this._end||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(t){var e;return null===(e=this._originalStateFields)||void 0===e?void 0:e[t.id]}_initStateScale(){let t=[0,1];if(this._relatedAxisComponent){let e=this._relatedAxisComponent.getScale(),i=(0,td.z2)(e.type),r=this._computeDomainOfStateScale(i);if(this._stateScale=e.clone(),i){let e=r.map(t=>1*t);this._stateScale.domain(r.length?[(0,I.iH)(e),(0,I.CE)(e)]:[0,1],!0).range(t)}else this._stateScale.domain(r,!0).range(t)}else this._stateScale=new tc.j,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(t)}init(t){super.init(t),this._addTransformToSeries(),0===this._start&&1===this._end||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&"axis"===this._filterMode||((0,tu.U)(this._option.dataSet,"dataFilterWithNewDomain",tl),(0,tu.U)(this._option.dataSet,"lockStatisticsFilter",to),(0,tn.xV)(this._regions,t=>{t.getViewDataStatistics().transform({type:"lockStatisticsFilter",options:{originalFields:()=>t.getViewDataStatistics().getFields(),getNewDomain:()=>this._newDomain,field:()=>{var e;return null!==(e=this._field)&&void 0!==e?e:this._parseFieldOfSeries(t)},isContinuous:()=>(0,td.z2)(this._stateScale.type)},level:1},!1),t.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var e;return null!==(e=this._field)&&void 0!==e?e:this._parseFieldOfSeries(t)},isContinuous:()=>(0,td.z2)(this._stateScale.type)},level:tC.BV.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onRender(t){}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(0,Y.X)(e,t)||(i.reRender=!0,i.reMake=!0),i}reInit(t){super.reInit(t),this._marks.forEach(t=>{t.getMarks().forEach(t=>{this.initMarkStyleWithSpec(t,this._spec[t.name])})})}changeRegions(){}update(t){}resize(t){}_parseDomainFromState(t,e){if((0,td.z2)(this._stateScale.type))return[Math.min(e,t),Math.max(e,t)];let i=this._stateScale.domain(),r=i.indexOf(t),s=i.indexOf(e);return i.slice(Math.min(r,s),Math.max(r,s)+1)}_initCommonEvent(){var t,e,i,r,s,n,a;let o={delayType:null!==(e=null===(t=this._spec)||void 0===t?void 0:t.delayType)&&void 0!==e?e:"throttle",delayTime:(0,$.Z)(null===(i=this._spec)||void 0===i?void 0:i.delayType)?null!==(s=null===(r=this._spec)||void 0===r?void 0:r.delayTime)&&void 0!==s?s:30:0,realTime:null===(a=null===(n=this._spec)||void 0===n?void 0:n.realTime)||void 0===a||a,allowComponentZoom:!0};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,o),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,o),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,o)}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}_autoVisible(t){if(!this._auto)return;t?this.show():this.hide();let e=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[e]:t?this[`_${e}`]:0},{[e]:w.W.Built_In})}onLayoutStart(t,e,i){super.onLayoutStart(t,e,i);let r=this._autoUpdate(t);this._autoVisible(r),this._dataUpdating=!1}onLayoutEnd(t){let e=!(0===this._start&&1===this._end);this._autoVisible(e),super.onLayoutEnd(t)}getBoundsInRect(t){let e={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(e.y2=e.y1+this._height,e.x2=e.x1+t.width):(e.x2=e.x1+this._width,e.y2=e.y1+t.height),e}hide(){var t;null===(t=this._component)||void 0===t||t.hideAll()}show(){var t;null===(t=this._component)||void 0===t||t.showAll()}_getAxisBandSize(t){let e=null==t?void 0:t.bandSize,i=null==t?void 0:t.maxBandSize,r=null==t?void 0:t.minBandSize;if(e||r||i)return{bandSize:e,maxBandSize:i,minBandSize:r}}_autoUpdate(t){var e,i,r,s,n,a;if(!this._auto)return this._cacheVisibility=void 0,!0;let o=this._relatedAxisComponent,l=null==o?void 0:o.getSpec(),h=null==o?void 0:o.getScale(),u=this._getAxisBandSize(l);if(!this._dataUpdating&&(0,td.lK)(h.type)&&(null==t?void 0:t.height)===(null===(e=this._cacheRect)||void 0===e?void 0:e.height)&&(null==t?void 0:t.width)===(null===(i=this._cacheRect)||void 0===i?void 0:i.width)&&this._fixedBandSize===(null==u?void 0:u.bandSize))return this._cacheVisibility;let d=!0;if(this._isHorizontal&&(null==t?void 0:t.width)!==(null===(r=this._cacheRect)||void 0===r?void 0:r.width)?h.range(o.getInverse()?[t.width,0]:[0,t.width]):(null==t?void 0:t.height)!==(null===(s=this._cacheRect)||void 0===s?void 0:s.height)&&h.range(o.getInverse()?[0,t.height]:[t.height,0]),this._cacheRect={width:null==t?void 0:t.width,height:null==t?void 0:t.height},this._fixedBandSize=null==u?void 0:u.bandSize,(0,td.lK)(h.type)){u&&(this._start||this._end)&&(this.type===E.L.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());let[t,e]=null!==(n=h.rangeFactor())&&void 0!==n?n:[];d=(!(0,te.Z)(t)||!(0,te.Z)(e))&&!(0===t&&1===e)}else{let[t,e]=null!==(a=h.rangeFactor())&&void 0!==a?a:[this._start,this._end];d=!(0===t&&1===e)}return this.setStartAndEnd(this._start,this._end),this._cacheVisibility=d,d}_getNeedClearVRenderComponents(){return[this._component]}}(0,tf.jB)(tT,class{constructor(){this._isGestureListener=!1}initZoomable(t,e=tb.i["desktop-browser"]){this._eventObj=t,this._renderMode=e,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=(0,tx.wx)(this._renderMode)||(0,tx.Oy)(this._renderMode),tk(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(t){return tk(this._renderMode)[t]}_zoomEventDispatch(t,e,i,r){if(!this._isGestureListener&&!t.event)return;let s=this._isGestureListener?t:t.event.clone();this._zoomableTrigger.parserZoomEvent(s);let{zoomDelta:n,zoomX:a,zoomY:o,path:l}=s;if(!r&&!l.some(t=>t.name&&t.name.includes("region"))||(0,te.Z)(n)||!(0,R.qr)({x:a,y:o},this._getRegionOrSeriesLayout(e),!1))return;let h={};i&&(h=i({zoomDelta:n,zoomX:a,zoomY:o},s)),this._eventObj.emit("zoom",Object.assign(Object.assign({scale:s.zoomDelta,scaleCenter:{x:s.zoomX,y:s.zoomY}},h),{model:this}))}_getRegionOrSeriesLayout(t){"region"!==t.type&&(t=t.getRegion());let{x:e,y:i,width:r,height:s}=t.layout.getLayout();return{x1:e,y1:i,x2:e+r,y2:i+s}}_bindZoomEventAsRegion(t,e,i,r){var s,n;let a=null!==(s=null==r?void 0:r.delayType)&&void 0!==s?s:"throttle",o=null!==(n=null==r?void 0:r.delayTime)&&void 0!==n?n:0,l=this._isGestureListener?this._gestureController:t,h=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:k.l.chart,consume:!0}],u=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:k.l.chart,consume:!1}];l.on(...u,tw[a](t=>{this._zoomableTrigger.clearZoom()},o)),l.on(...h,tw[a](t=>{var s;this._zoomEventDispatch(t,e,i,null!==(s=null==r?void 0:r.allowComponentZoom)&&void 0!==s&&s)},o))}initZoomEventOfSeries(t,e,i){this._option.disableTriggerEvent||tk(this._renderMode)&&this._bindZoomEventAsRegion(t.event,t,e,i)}initZoomEventOfRegions(t,e,i,r){this._option.disableTriggerEvent||tk(this._renderMode)&&t.forEach(t=>{e?t.getSeries().forEach(t=>{e(t)&&this._bindZoomEventAsRegion(t.event,t,i,r)}):this._bindZoomEventAsRegion(this._eventObj,t,i,r)})}_scrollEventDispatch(t,e,i){let r=!1;if(!this._isGestureListener&&(!t.event||this._option.disableTriggerEvent))return r;let s=this._isGestureListener?t:t.event;this._zoomableTrigger.parserScrollEvent(s);let{scrollX:n,scrollY:a,canvasX:o,canvasY:l}=s;return(0,te.Z)(n)&&(0,te.Z)(a)||(0,R.qr)({x:o,y:l},this._getRegionOrSeriesLayout(e),!1)&&(i&&(r=i({scrollX:n,scrollY:a},s)),this._eventObj.emit("scroll",{scrollX:n,scrollY:a,model:this})),r}_bindScrollEventAsRegion(t,e,i,r){var s,n;let a=null!==(s=null==r?void 0:r.delayType)&&void 0!==s?s:"throttle",o=null!==(n=null==r?void 0:r.delayTime)&&void 0!==n?n:0,l=this._isGestureListener?this._gestureController:t,h=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:k.l.chart,consume:!0}],u=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:k.l.chart,consume:!1}];l.on(...u,tw[a](t=>{this._zoomableTrigger.clearScroll()},o)),l.on(...h,tw[a](t=>this._scrollEventDispatch(t,e,i),o))}initScrollEventOfSeries(t,e,i){tk(this._renderMode)&&this._bindScrollEventAsRegion(t.event,t,e,i)}initScrollEventOfRegions(t,e,i,r){this._option.disableTriggerEvent||tk(this._renderMode)&&t.forEach(t=>{e?t.getSeries().forEach(t=>{e(t)&&this._bindScrollEventAsRegion(t.event,t,i,r)}):this._bindScrollEventAsRegion(this._eventObj,t,i,r)})}_bindDragEventAsRegion(t,e,i,r){t.on(this._getZoomTriggerEvent("start"),{level:k.l.chart},t=>{if(!t.event)return;let{event:s}=t;(0,R.qr)({x:s.canvasX,y:s.canvasY},this._getRegionOrSeriesLayout(e),!1)&&this._handleDrag(t,i,r)}),t.on("click",{level:k.l.chart},()=>!this._clickEnable)}initDragEventOfSeries(t,e,i){this._option.disableTriggerEvent||tk(this._renderMode)&&t.event.on(this._getZoomTriggerEvent("start"),{level:k.l.model,filter:({model:e})=>(null==e?void 0:e.id)===t.id},t=>{this._handleDrag(t,e,i)})}initDragEventOfRegions(t,e,i,r){this._option.disableTriggerEvent||tk(this._renderMode)&&t.forEach(t=>{e?t.getSeries().forEach(t=>{e(t)&&(t.event.on(this._getZoomTriggerEvent("start"),{level:k.l.model,filter:({model:e})=>(null==e?void 0:e.id)===t.id},t=>{this._handleDrag(t,i)}),t.event.on("click",{level:k.l.model,filter:({model:e})=>(null==e?void 0:e.id)===t.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,t,i,r)})}_handleDrag(t,e,i){var r,s,n;if(this._option.disableTriggerEvent||(this._clickEnable=!1,!this._zoomableTrigger.parserDragEvent(t.event)))return;let a=null!==(r=null==i?void 0:i.delayType)&&void 0!==r?r:"throttle",o=null!==(s=null==i?void 0:i.delayTime)&&void 0!==s?s:0,l=null===(n=null==i?void 0:i.realTime)||void 0===n||n,h=this._getZoomTriggerEvent("move"),u=this._getZoomTriggerEvent("end"),d=t.event,c=d.canvasX,p=d.canvasY,g=d.canvasX,m=d.canvasY,f=tw[a](t=>{this._clickEnable=!0;let i=t.event,r=[i.canvasX-g,i.canvasY-m];g=i.canvasX,m=i.canvasY,!l&&e&&e(r,t.event),this._eventObj.emit("panend",{delta:r,model:this}),this._zoomableTrigger.pointerId=null,this._eventObj.off(h,{level:k.l.chart,source:k.AY.chart},v),u.forEach(t=>{this._eventObj.off(t,{level:k.l.chart,source:k.AY.chart},f),this._eventObj.allow(t)})},o),v=tw[a](t=>{if(!this._zoomableTrigger.parserDragEvent(t.event))return;this._clickEnable=!1,u.forEach(t=>this._eventObj.prevent(t,f));let i=t.event,r=[i.canvasX-c,i.canvasY-p];c=i.canvasX,p=i.canvasY,l&&e&&e(r,t.event),this._eventObj.emit("panmove",{delta:r,model:this})},o);this._eventObj.on(h,{level:k.l.chart,source:k.AY.chart},v),u.forEach(t=>{this._eventObj.on(t,{level:k.l.chart,source:k.AY.chart},f)})}});var tE=i(7393),tM=i(7078);let tB="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",tD={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}};(s=u||(u={})).startHandler="startHandler",s.endHandler="endHandler",s.middleHandler="middleHandler",s.background="background";var tO=i(7307),tP=i(489),tI=i(3483),tR=i(9536),tL=i(5049),tF=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let tj={debounce:D.Z,throttle:O.Z};(0,tL.b)(),(0,tO.k)(),(0,tP.k)(),(0,tI.d)(),(0,tR.N)();class tZ extends N.k{setPropsFromAttrs(){let{start:t,end:e,orient:i,previewData:r,previewPointsX:s,previewPointsY:n,previewPointsX1:a,previewPointsY1:o}=this.attribute;t&&(this.state.start=t),e&&(this.state.end=e);let{width:l,height:h}=this.getLayoutAttrFromConfig();this._spanCache=this.state.end-this.state.start,this._isHorizontal="top"===i||"bottom"===i,this._layoutCache.max=this._isHorizontal?l:h,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",r&&(this._previewData=r),(0,tr.Z)(s)&&(this._previewPointsX=s),(0,tr.Z)(n)&&(this._previewPointsY=n),(0,tr.Z)(a)&&(this._previewPointsX1=a),(0,tr.Z)(o)&&(this._previewPointsY1=o)}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,P.Z)({},tZ.defaultAttributes,t)),this.name="dataZoom",this._previewData=[],this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",max:0},this.state={start:0,end:1},this._statePointToData=t=>t,this._onHandlerPointerDown=(t,e)=>{t.stopPropagation(),"start"===e?(this._activeTag=u.startHandler,this._activeItem=this._startHandlerMask):"end"===e?(this._activeTag=u.endHandler,this._activeItem=this._endHandlerMask):"middleRect"===e?(this._activeTag=u.middleHandler,this._activeItem=this._middleHandlerRect):"middleSymbol"===e?(this._activeTag=u.middleHandler,this._activeItem=this._middleHandlerSymbol):"background"===e&&(this._activeTag=u.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this.eventPosToStagePos(t),this._activeCache.lastPos=this.eventPosToStagePos(t),"browser"===M.rF.env&&(M.rF.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),M.rF.addEventListener("pointerup",this._onHandlerPointerUp)),this.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})},this._pointerMove=t=>{t.stopPropagation();let{start:e,end:i,brushSelect:r,realTime:s=!0}=this.attribute,n=this.eventPosToStagePos(t),{attPos:a,max:o}=this._layoutCache,l=(n[a]-this._activeCache.lastPos[a])/o,{start:h,end:d}=this.state;this._activeState&&(this._activeTag===u.middleHandler?this.moveZoomWithMiddle((this.state.start+this.state.end)/2+l):this._activeTag===u.startHandler?h+l>d?(d=(h=d)+l,this._activeTag=u.endHandler):h+=l:this._activeTag===u.endHandler&&(d+l<h?(h=(d=h)+l,this._activeTag=u.startHandler):d+=l),this._activeCache.lastPos=n,r&&this.renderDragMask()),h=Math.min(Math.max(h,0),1),d=Math.min(Math.max(d,0),1),e===h&&i===d||(this.setStateAttr(h,d,!0),s&&this._dispatchEvent("change",{start:h,end:d,tag:this._activeTag}))},this._onHandlerPointerMove=0===this.attribute.delayTime?this._pointerMove:tj[this.attribute.delayType](this._pointerMove,this.attribute.delayTime),this._onHandlerPointerUp=t=>{t.preventDefault();let{start:e,end:i,brushSelect:r,realTime:s=!0}=this.attribute;if(this._activeState&&this._activeTag===u.background){let e=this.eventPosToStagePos(t);this.backgroundDragZoom(this._activeCache.startPos,e)}this._activeState=!1,r&&this.renderDragMask(),this._dispatchEvent("change",{start:this.state.start,end:this.state.end,tag:this._activeTag}),"browser"===M.rF.env&&(M.rF.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),M.rF.removeEventListener("pointerup",this._onHandlerPointerUp)),this.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.removeEventListener("pointerup",this._onHandlerPointerUp)};let{position:i,showDetail:r}=t;this._activeCache.startPos=i,this._activeCache.lastPos=i,this._showText="auto"!==r&&r,this.setPropsFromAttrs()}setAttributes(t,e){super.setAttributes(t,e),this.setPropsFromAttrs()}bindEvents(){if(this.attribute.disableTriggerEvent)return void this.setAttribute("childrenPickable",!1);let{showDetail:t,brushSelect:e}=this.attribute;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"start")),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"end")),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"middleSymbol")),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"middleRect"));let i=e?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,i)),e&&this._background&&this._background.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"background")),e&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"background")),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,i)),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),"auto"===t&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}dragMaskSize(){let{position:t}=this.attribute,{attPos:e,max:i}=this._layoutCache;return this._activeCache.lastPos[e]-t[e]>i?i+t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-t[e]<0?t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-this._activeCache.startPos[e]}setStateAttr(t,e,i){let{zoomLock:r=!1,minSpan:s=0,maxSpan:n=1}=this.attribute,a=e-t;a!==this._spanCache&&(r||a<s||a>n)||(this._spanCache=a,this.state.start=t,this.state.end=e,i&&this.setAttributes({start:t,end:e}))}eventPosToStagePos(t){var e,i;return null!==(i=null===(e=this.stage)||void 0===e?void 0:e.eventPointTransform(t))&&void 0!==i?i:{x:0,y:0}}_onHandlerPointerEnter(t){t.stopPropagation(),this._showText=!0,this.renderText()}_onHandlerPointerLeave(t){t.stopPropagation(),this._showText=!1,this.renderText()}backgroundDragZoom(t,e){let{attPos:i,max:r}=this._layoutCache,{position:s}=this.attribute,n=t[i]-s[i],a=e[i]-s[i],o=Math.min(Math.max(Math.min(n,a)/r,0),1),l=Math.min(Math.max(Math.max(n,a)/r,0),1);.01>Math.abs(o-l)?this.moveZoomWithMiddle(o):this.setStateAttr(o,l,!1)}moveZoomWithMiddle(t){let e=t-(this.state.start+this.state.end)/2;0!==e&&(e>0?this.state.end+e>1&&(e=1-this.state.end):e<0&&this.state.start+e<0&&(e=-this.state.start),this.setStateAttr(this.state.start+e,this.state.end+e,!1))}renderDragMask(){let{dragMaskStyle:t}=this.attribute,{position:e,width:i,height:r}=this.getLayoutAttrFromConfig();this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:(0,tg.Z)(0>this.dragMaskSize()?this._activeCache.lastPos.x:this._activeCache.startPos.x,e.x,e.x+i),y:e.y,width:this._activeState&&this._activeTag===u.background&&Math.abs(this.dragMaskSize())||0,height:r},t),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:e.x,y:(0,tg.Z)(0>this.dragMaskSize()?this._activeCache.lastPos.y:this._activeCache.startPos.y,e.y,e.y+r),width:i,height:this._activeState&&this._activeTag===u.background&&Math.abs(this.dragMaskSize())||0},t),"rect")}isTextOverflow(t,e,i){if(!e)return!1;if(this._isHorizontal){if("start"===i){if(e.x1<t.x1)return!0}else if(e.x2>t.x2)return!0}else if("start"===i){if(e.y1<t.y1)return!0}else if(e.y2>t.y2)return!0;return!1}setTextAttr(t,e){var i,r,s,n,a,o,l,h;let u,d,c,p;let{startTextStyle:g,endTextStyle:m}=this.attribute,{formatMethod:f}=g,v=tF(g,["formatMethod"]),{formatMethod:y}=m,_=tF(m,["formatMethod"]),{start:b,end:x}=this.state;this._startValue=this._statePointToData(b),this._endValue=this._statePointToData(x);let{position:S,width:A,height:k}=this.getLayoutAttrFromConfig(),w=f?f(this._startValue):this._startValue,C=y?y(this._endValue):this._endValue,T={x1:S.x,y1:S.y,x2:S.x+A,y2:S.y+k};this._isHorizontal?(u={x:S.x+b*A,y:S.y+k/2},d={x:S.x+x*A,y:S.y+k/2},c={textAlign:this.isTextOverflow(T,t,"start")?"left":"right",textBaseline:null!==(r=null===(i=null==v?void 0:v.textStyle)||void 0===i?void 0:i.textBaseline)&&void 0!==r?r:"middle"},p={textAlign:this.isTextOverflow(T,e,"end")?"right":"left",textBaseline:null!==(n=null===(s=null==_?void 0:_.textStyle)||void 0===s?void 0:s.textBaseline)&&void 0!==n?n:"middle"}):(u={x:S.x+A/2,y:S.y+b*k},d={x:S.x+A/2,y:S.y+x*k},c={textAlign:null!==(o=null===(a=null==v?void 0:v.textStyle)||void 0===a?void 0:a.textAlign)&&void 0!==o?o:"center",textBaseline:this.isTextOverflow(T,t,"start")?"top":"bottom"},p={textAlign:null!==(h=null===(l=null==_?void 0:_.textStyle)||void 0===l?void 0:l.textAlign)&&void 0!==h?h:"center",textBaseline:this.isTextOverflow(T,e,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,(0,P.Z)({},v,{text:w,x:u.x,y:u.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:c}),`data-zoom-start-text-${S}`),this._endText=this.maybeAddLabel(this._container,(0,P.Z)({},_,{text:C,x:d.x,y:d.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:p}),`data-zoom-end-text-${S}`)}renderText(){let t=null,e=null;this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds,this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds;let{x1:i,x2:r,y1:s,y2:n}=t,{dx:a=0,dy:o=0}=this.attribute.startTextStyle;if((new tE.YZ).set(i,s,r,n).intersects(e)){let t="bottom"===this.attribute.orient||"right"===this.attribute.orient?-1:1;this._isHorizontal?this._startText.setAttribute("dy",o+t*Math.abs(e.y1-e.y2)):this._startText.setAttribute("dx",a+t*Math.abs(e.x1-e.x2))}else this._isHorizontal?this._startText.setAttribute("dy",o):this._startText.setAttribute("dx",a)}getLayoutAttrFromConfig(){var t,e,i,r,s,n;let a,o,l;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;let{position:h,size:u,orient:d,middleHandlerStyle:c={},startHandlerStyle:p={},endHandlerStyle:g={},backgroundStyle:m={}}=this.attribute,{width:f,height:v}=u,y=null!==(e=null===(t=c.background)||void 0===t?void 0:t.size)&&void 0!==e?e:10;c.visible?this._isHorizontal?(a=f,o=v-y,l={x:h.x,y:h.y+y}):(a=f-y,o=v,l={x:h.x+("left"===d?y:0),y:h.y}):(a=f,o=v,l=h);let _=null!==(i=p.size)&&void 0!==i?i:this._isHorizontal?o:a,b=null!==(r=g.size)&&void 0!==r?r:this._isHorizontal?o:a;return p.visible&&(this._isHorizontal?(a-=(_+b)/2,l={x:l.x+_/2,y:l.y}):(o-=(_+b)/2,l={x:l.x,y:l.y+_/2})),o+=s=m.lineWidth/2,a+=n=m.lineWidth/2,this._layoutAttrFromConfig={position:l,width:a,height:o},this._layoutAttrFromConfig}render(){var t,e,i,r,s,n,a,o,l,h,u,d,c,p,g,m,f,v,y,_,b,x,S,A,k,w,C,T,E,M,B,D,O,P;this._layoutAttrFromConfig=null;let{orient:I,backgroundStyle:R,backgroundChartStyle:L={},selectedBackgroundStyle:F={},selectedBackgroundChartStyle:j={},middleHandlerStyle:Z={},startHandlerStyle:H={},endHandlerStyle:N={},brushSelect:z,zoomLock:V}=this.attribute,{start:U,end:W}=this.state,{position:G,width:$,height:X}=this.getLayoutAttrFromConfig(),Y=null!==(t=H.triggerMinSize)&&void 0!==t?t:40,K=null!==(e=N.triggerMinSize)&&void 0!==e?e:40,q=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=q,this._background=q.createOrUpdateChild("background",Object.assign(Object.assign({x:G.x,y:G.y,width:$,height:X,cursor:z?"crosshair":"auto"},R),{pickable:!V&&(null===(i=R.pickable)||void 0===i||i)}),"rect"),(null===(r=L.line)||void 0===r?void 0:r.visible)&&this.setPreviewAttributes("line",q),(null===(s=L.area)||void 0===s?void 0:s.visible)&&this.setPreviewAttributes("area",q),z&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=q.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:G.x+U*$,y:G.y,width:(W-U)*$,height:X,cursor:z?"crosshair":"move"},F),{pickable:!V&&(null===(n=j.pickable)||void 0===n||n)}),"rect"):this._selectedBackground=q.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:G.x,y:G.y+U*X,width:$,height:(W-U)*X,cursor:z?"crosshair":"move"},F),{pickable:!V&&(null===(a=F.pickable)||void 0===a||a)}),"rect"),(null===(o=j.line)||void 0===o?void 0:o.visible)&&this.setSelectedPreviewAttributes("line",q),(null===(l=j.area)||void 0===l?void 0:l.visible)&&this.setSelectedPreviewAttributes("area",q),this._isHorizontal){if(Z.visible){let t=(null===(h=Z.background)||void 0===h?void 0:h.size)||10;this._middleHandlerRect=q.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:G.x+U*$,y:G.y-t,width:(W-U)*$,height:t},null===(u=Z.background)||void 0===u?void 0:u.style),{pickable:!V&&(null===(p=null===(c=null===(d=Z.background)||void 0===d?void 0:d.style)||void 0===c?void 0:c.pickable)||void 0===p||p)}),"rect"),this._middleHandlerSymbol=q.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:G.x+(U+W)/2*$,y:G.y-t/2,strokeBoundsBuffer:0,angle:0,symbolType:null!==(m=null===(g=Z.icon)||void 0===g?void 0:g.symbolType)&&void 0!==m?m:"square"},Z.icon),{pickable:!V&&(null===(f=Z.icon.pickable)||void 0===f||f)}),"symbol")}this._startHandler=q.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:G.x+U*$,y:G.y+X/2,size:X,symbolType:null!==(v=H.symbolType)&&void 0!==v?v:"square"},tD.horizontal),H),{pickable:!V&&(null===(y=H.pickable)||void 0===y||y)}),"symbol"),this._endHandler=q.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:G.x+W*$,y:G.y+X/2,size:X,symbolType:null!==(_=N.symbolType)&&void 0!==_?_:"square"},tD.horizontal),N),{pickable:!V&&(null===(b=N.pickable)||void 0===b||b)}),"symbol");let t=Math.max(this._startHandler.AABBBounds.width(),Y),e=Math.max(this._startHandler.AABBBounds.height(),Y),i=Math.max(this._endHandler.AABBBounds.width(),K),r=Math.max(this._endHandler.AABBBounds.height(),K);this._startHandlerMask=q.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:G.x+U*$-t/2,y:G.y+X/2-e/2,width:t,height:e,fill:"white",fillOpacity:0,zIndex:999},tD.horizontal),{pickable:!V}),"rect"),this._endHandlerMask=q.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:G.x+W*$-i/2,y:G.y+X/2-r/2,width:i,height:r,fill:"white",fillOpacity:0,zIndex:999},tD.horizontal),{pickable:!V}),"rect")}else{if(Z.visible){let t=(null===(x=Z.background)||void 0===x?void 0:x.size)||10;this._middleHandlerRect=q.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:"left"===I?G.x-t:G.x+$,y:G.y+U*X,width:t,height:(W-U)*X},null===(S=Z.background)||void 0===S?void 0:S.style),{pickable:!V&&(null===(w=null===(k=null===(A=Z.background)||void 0===A?void 0:A.style)||void 0===k?void 0:k.pickable)||void 0===w||w)}),"rect"),this._middleHandlerSymbol=q.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:"left"===I?G.x-t/2:G.x+$+t/2,y:G.y+(U+W)/2*X,angle:Math.PI/180*90,symbolType:null!==(T=null===(C=Z.icon)||void 0===C?void 0:C.symbolType)&&void 0!==T?T:"square",strokeBoundsBuffer:0},Z.icon),{pickable:!V&&(null===(M=null===(E=Z.icon)||void 0===E?void 0:E.pickable)||void 0===M||M)}),"symbol")}this._startHandler=q.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:G.x+$/2,y:G.y+U*X,size:$,symbolType:null!==(B=H.symbolType)&&void 0!==B?B:"square"},tD.vertical),H),{pickable:!V&&(null===(D=H.pickable)||void 0===D||D)}),"symbol"),this._endHandler=q.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:G.x+$/2,y:G.y+W*X,size:$,symbolType:null!==(O=N.symbolType)&&void 0!==O?O:"square"},tD.vertical),N),{pickable:!V&&(null===(P=N.pickable)||void 0===P||P)}),"symbol");let t=Math.max(this._startHandler.AABBBounds.width(),Y),e=Math.max(this._startHandler.AABBBounds.height(),Y),i=Math.max(this._endHandler.AABBBounds.width(),K),r=Math.max(this._endHandler.AABBBounds.height(),K);this._startHandlerMask=q.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:G.x+$/2+t/2,y:G.y+U*X-e/2,width:r,height:i,fill:"white",fillOpacity:0,zIndex:999},tD.vertical),{pickable:!V}),"rect"),this._endHandlerMask=q.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:G.x+$/2+i/2,y:G.y+W*X-r/2,width:r,height:i,fill:"white",fillOpacity:0,zIndex:999},tD.vertical),{pickable:!V}),"rect")}this._showText&&this.renderText()}computeBasePoints(){let t,e;let{orient:i}=this.attribute,{position:r,width:s,height:n}=this.getLayoutAttrFromConfig();return this._isHorizontal?(t=[{x:r.x,y:r.y+n}],e=[{x:r.x+s,y:r.y+n}]):"left"===i?(t=[{x:r.x+s,y:r.y}],e=[{x:r.x+s,y:r.y+n}]):(t=[{x:r.x,y:r.y+n}],e=[{x:r.x,y:r.y}]),{basePointStart:t,basePointEnd:e}}simplifyPoints(t){var e,i;if(t.length>1e4){let r=null!==(e=this.attribute.tolerance)&&void 0!==e?e:this._previewData.length/1e4;return(i=t).length<=10?i:i=function(t,e){let i,r,s=t[0].x,n=t[0].y,a=[t[0]];for(let o=1,l=t.length;o<l;o++)(i=t[o].x-s)*i+(r=t[o].y-n)*r>e&&(s=t[o].x,n=t[o].y,a.push(t[o]));return t[t.length-1].x===s&&t[t.length-1].y===n||a.push(t[t.length-1]),a}(i,void 0!==r?r*r:1)}return t}getPreviewLinePoints(){let t=this._previewData.map(t=>({x:this._previewPointsX&&this._previewPointsX(t),y:this._previewPointsY&&this._previewPointsY(t)}));if(0===t.length)return t;t=this.simplifyPoints(t);let{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}getPreviewAreaPoints(){let t=this._previewData.map(t=>({x:this._previewPointsX&&this._previewPointsX(t),y:this._previewPointsY&&this._previewPointsY(t),x1:this._previewPointsX1&&this._previewPointsX1(t),y1:this._previewPointsY1&&this._previewPointsY1(t)}));if(0===t.length)return t;t=this.simplifyPoints(t);let{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}setPreviewAttributes(t,e){this._previewGroup||(this._previewGroup=e.createOrUpdateChild("previewGroup",{pickable:!1},"group")),"line"===t?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");let{backgroundChartStyle:i={}}=this.attribute;"line"===t&&this._previewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===t&&this._previewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}setSelectedPreviewAttributes(t,e){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=e.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),"line"===t?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area");let{selectedBackgroundChartStyle:i={}}=this.attribute,{start:r,end:s}=this.state,{position:n,width:a,height:o}=this.getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?n.x+r*a:n.x,y:this._isHorizontal?n.y:n.y+r*o,width:this._isHorizontal?(s-r)*a:a,height:this._isHorizontal?o:(s-r)*o,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?n.x+r*a:n.x),y:-(this._isHorizontal?n.y:n.y+r*o),width:this._isHorizontal?(s-r)*a:a,height:this._isHorizontal?o:(s-r)*o,pickable:!1}),"line"===t&&this._selectedPreviewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===t&&this._selectedPreviewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}maybeAddLabel(t,e,i){let r=this.find(t=>t.name===i,!0);return r?r.setAttributes(e):(r=new tM.V(e)).name=i,t.add(r),r}setStartAndEnd(t,e){let{start:i,end:r}=this.attribute;(0,$.Z)(t)&&(0,$.Z)(e)&&(t!==this.state.start||e!==this.state.end)&&(this.state.start=t,this.state.end=e,i===this.state.start&&r===this.state.end||(this.setStateAttr(t,e,!0),this._dispatchEvent("change",{start:t,end:e,tag:this._activeTag})))}setPreviewData(t){this._previewData=t}setText(t,e){"start"===e?this._startText.setAttribute("text",t):this._endText.setAttribute("text",t)}getStartValue(){return this._startValue}getEndTextValue(){return this._endValue}getMiddleHandlerSize(){var t,e,i,r;let{middleHandlerStyle:s={}}=this.attribute,n=null!==(e=null===(t=s.background)||void 0===t?void 0:t.size)&&void 0!==e?e:10,a=null!==(r=null===(i=s.icon)||void 0===i?void 0:i.size)&&void 0!==r?r:10;return Math.max(n,...(0,I.IX)(a))}setPreviewPointsX(t){(0,tr.Z)(t)&&(this._previewPointsX=t)}setPreviewPointsY(t){(0,tr.Z)(t)&&(this._previewPointsY=t)}setPreviewPointsX1(t){(0,tr.Z)(t)&&(this._previewPointsX1=t)}setPreviewPointsY1(t){(0,tr.Z)(t)&&(this._previewPointsY1=t)}setStatePointToData(t){(0,tr.Z)(t)&&(this._statePointToData=t)}}tZ.defaultAttributes={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:tB,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:tB,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}};var tH=i(6132),tN=i(2930);class tz extends tN.r{_mergeThemeToSpec(t,e){let i=this._theme,r=t;if(this._shouldMergeThemeToSpec()){let e=t=>{let e=(0,ts.H)({selectedBackgroundChart:{line:{},area:{}}},this._theme,t),{selectedBackgroundChart:i={}}=t,{line:r,area:s}=i;return r&&!1!==r.visible&&(e.selectedBackgroundChart.line.style=Object.assign(Object.assign({},e.selectedBackgroundChart.line.style),{visible:!0})),s&&!1!==s.visible&&(e.selectedBackgroundChart.area.style=Object.assign(Object.assign({},e.selectedBackgroundChart.area.style),{visible:!0})),e};r=(0,ta.Z)(t)?t.map(t=>e(t)):e(t)}return this._adjustPadding(r),{spec:r,theme:i}}}class tV extends tT{constructor(t,e){var i;super(t,e),this.type=E.L.dataZoom,this.name=E.L.dataZoom,this.transformerConstructor=tz,this.specKey="dataZoom",this.layoutZIndex=C.Ai.DataZoom,this.layoutLevel=C.pM.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=t=>{let e="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,r=this._isHorizontal?this._stateScale:this._valueScale,s=this._isHorizontal?this._stateField:this._valueField;return r.scale(t[s])+this.getLayoutStartPoint().x+e+i},this._dataToPositionX2=t=>{let e="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,r=this._isHorizontal?this._stateScale:this._valueScale,s=r.domain()[0];return r.scale(s)+this.getLayoutStartPoint().x+e+i},this._dataToPositionY=t=>{let e=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,r=this._isHorizontal?this._valueScale:this._stateScale,s=this._isHorizontal?this._valueField:this._stateField;return r.scale(t[s])+this.getLayoutStartPoint().y+e+i},this._dataToPositionY2=t=>{let e=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,r=this._isHorizontal?this._valueScale:this._stateScale,s=r.domain()[0];return r.scale(s)+this.getLayoutStartPoint().y+e+i},this._valueField="y",this._filterMode=null!==(i=t.filterMode)&&void 0!==i?i:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var t,e,i,r,s,n,a,o,l,h;super.setAttrFromSpec(),(0,tt.Z)(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=null!==(e=null===(t=this._spec.background)||void 0===t?void 0:t.size)&&void 0!==e?e:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),(0,te.Z)(null===(s=null===(r=null===(i=this._spec)||void 0===i?void 0:i.startHandler)||void 0===r?void 0:r.style)||void 0===s?void 0:s.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),(0,te.Z)(null===(o=null===(a=null===(n=this._spec)||void 0===n?void 0:n.endHandler)||void 0===a?void 0:a.style)||void 0===o?void 0:o.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);let u=null===(l=this._spec.startHandler.style.visible)||void 0===l||l,d=null===(h=this._spec.endHandler.style.visible)||void 0===h||h;this._startHandlerSize=u?this._spec.startHandler.style.size:0,this._endHandlerSize=d?this._spec.endHandler.style.size:0}onLayoutEnd(t){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),!1!==this._cacheVisibility&&super.onLayoutEnd(t)}_initValueScale(){let t=this._computeDomainOfValueScale();if(t){let e=new tH.f;e.domain(t),this._valueScale=e}}_updateScaleRange(){var t,e;let i;let r=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale||!this._valueScale)return;let s=this._isHorizontal?this.getLayoutRect().width-r:this.getLayoutRect().height-r,n=null!==(e=null===(t=this._relatedAxisComponent)||void 0===t?void 0:t.getScale().range())&&void 0!==e?e:[this._startHandlerSize/2,s+this._startHandlerSize/2],a=this._computeWidth(),o=this._computeHeight();this._isHorizontal?(i=this._visible?[this._startHandlerSize/2,a-r+this._startHandlerSize/2]:n,this._stateScale.range(i),this._valueScale.range([o-this._middleHandlerSize,0])):(i=this._visible?[this._startHandlerSize/2,o-r+this._startHandlerSize/2]:n,this._stateScale.range(i),"left"===this.layoutOrient?this._valueScale.range([a-this._middleHandlerSize,0]):this._valueScale.range([0,a-this._middleHandlerSize])),this._component&&!1!==this._cacheVisibility&&this._component.setAttributes({size:{width:a,height:o},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){let t=this._data.getLatestData().map(t=>t[this._valueField]),e=t.map(t=>1*t);return t.length?[(0,I.iH)(e),(0,I.CE)(e)]:null}_computeMiddleHandlerSize(){var t,e,i,r;let s=0;return(null===(e=null===(t=this._spec)||void 0===t?void 0:t.middleHandler)||void 0===e?void 0:e.visible)&&(s+=Math.max(null!==(i=this._spec.middleHandler.icon.style.size)&&void 0!==i?i:8,null!==(r=this._spec.middleHandler.background.size)&&void 0!==r?r:40)),s}_computeWidth(){return!1===this._visible?0:(0,ti.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return!1===this._visible?0:(0,ti.Z)(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height}_isScaleValid(t){if(!t||!t.domain())return!1;let e=t.domain();return(!(0,td.z2)(t.type)||e[0]!==(0,I.Z$)(e))&&(!(0,td.lK)(t.type)||1!==(0,I.V4)(e).length)}_getAttrs(t){var e,i,r,s,n;let a=null!==(e=this._spec)&&void 0!==e?e:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this._computeWidth(),height:this._computeHeight()},showDetail:a.showDetail,brushSelect:null!==(i=a.brushSelect)&&void 0!==i&&i,zoomLock:null!==(r=a.zoomLock)&&void 0!==r&&r,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:a.delayType,delayTime:(0,$.Z)(a.delayType)?null!==(s=a.delayTime)&&void 0!==s?s:30:0,realTime:null===(n=a.realTime)||void 0===n||n,previewData:t&&this._data.getLatestData(),previewPointsX:t&&this._dataToPositionX,previewPointsY:t&&this._dataToPositionY,tolerance:this._spec.tolerance},this._getComponentAttrs(t))}_createOrUpdateComponent(){if(this._visible){let t=this._isHorizontal?this._stateScale:this._valueScale,e=this._isHorizontal?this._valueScale:this._stateScale,i=this._isScaleValid(t)&&this._isScaleValid(e)&&!1!==this._spec.showBackgroundChart,r=this._getAttrs(i);if(this._component)this._component.setAttributes(r);else{let t=this.getContainer();this._component=new tZ(r),this._isHorizontal?i&&this._component.setPreviewPointsY1(this._dataToPositionY2):i&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(t=>this.statePointToData(t)),this._component.addEventListener("change",t=>{let{start:e,end:i,tag:r}=t.detail;this._handleChange(e,i,void 0,r)}),t.add(this._component),this._updateScaleRange()}}}_handleChange(t,e,i,r){if(super._handleChange(t,e,i),this._shouldChange){i&&this._component&&this._component.setStartAndEnd(t,e),this._start=t,this._end=e;let s=this.statePointToData(t),n=this.statePointToData(e);((0,tr.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,s,n):this._handleStateChange(s,n,r))&&this.event.emit(k.$7.dataZoomChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:t,end:e,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){var t;let e=this._data.getDataView();if(e.reRunAllTransform(),null===(t=this._component)||void 0===t||t.setPreviewData(e.latestData),this._valueScale){let t=this._computeDomainOfValueScale();t&&this._valueScale.domain(t)}}_getComponentAttrs(t){var e,i,r,s,n,a,o,l,h,u,d;let{middleHandler:c={},startText:p={},endText:g={},backgroundChart:m={},selectedBackgroundChart:f={}}=this._spec;return{backgroundStyle:(0,X.h_)(null===(e=this._spec.background)||void 0===e?void 0:e.style),startHandlerStyle:(0,X.h_)(null===(i=this._spec.startHandler)||void 0===i?void 0:i.style),middleHandlerStyle:c.visible?{visible:!0,icon:(0,X.h_)(null===(r=c.icon)||void 0===r?void 0:r.style),background:{size:null===(s=c.background)||void 0===s?void 0:s.size,style:(0,X.h_)(null===(n=c.background)||void 0===n?void 0:n.style)}}:{visible:!1},endHandlerStyle:(0,X.h_)(null===(a=this._spec.endHandler)||void 0===a?void 0:a.style),startTextStyle:{padding:p.padding,formatMethod:this._getHandlerTextFormatMethod(p),textStyle:(0,X.h_)(p.style)},endTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:(0,X.h_)(g.style)},selectedBackgroundStyle:(0,X.h_)(this._spec.selectedBackground.style),dragMaskStyle:(0,X.h_)(null===(o=this._spec.dragMask)||void 0===o?void 0:o.style),backgroundChartStyle:t?{line:(0,ts.H)((0,X.h_)(null===(l=m.line)||void 0===l?void 0:l.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},(0,X.h_)(null===(h=m.area)||void 0===h?void 0:h.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:t?{line:(0,ts.H)((0,X.h_)(null===(u=f.line)||void 0===u?void 0:u.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},(0,X.h_)(null===(d=f.area)||void 0===d?void 0:d.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(t){let{formatMethod:e,formatter:i}=t,{formatFunc:r}=(0,q.HJ)(e,i);return r?t=>r(t,{label:t},i):void 0}_getNeedClearVRenderComponents(){return[this._component]}clear(){if(this._component){let t=this.getContainer();this._component.removeAllChild(),t&&t.removeChild(this._component),this._component=null}super.clear()}}tV.type=E.L.dataZoom,tV.transformerConstructor=tz,tV.specKey="dataZoom";var tU=i(7378),tW=i(3127),tG=i(5466),t$=i(3215),tX=i(1960);let tY=["sum","average","min","max","variance","standardDeviation","median"];var tK=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};function tq(t,e,i){if(!i)return!1;let r=t.map(t=>1*t),s=(0,I.iH)(r),n=(0,I.CE)(r);return e<s||e>n}function tJ(t,e,i,r,s,n){var a,o;let l;let{relativeSeries:h}=r;return(0,ti.Z)(t.x)&&tq(e,t.x,i)&&(null===(o=null==h?void 0:(a=h.getXAxisHelper()).setExtendDomain)||void 0===o||o.call(a,"marker_xAxis_extend",t.x)),(0,tX.hU)(t.x)?t0(t.x,s)+n.x:h.getXAxisHelper().dataToPosition([t.x])+n.x}function tQ(t,e,i,r,s,n){var a,o;let l;let{relativeSeries:h}=r;return(0,ti.Z)(t.y)&&tq(e,t.y,i)&&(null===(o=null===(a=h.getYAxisHelper())||void 0===a?void 0:a.setExtendDomain)||void 0===o||o.call(a,"marker_yAxis_extend",t.y)),(0,tX.hU)(t.y)?t0(t.y,s)+n.y:h.getYAxisHelper().dataToPosition([t.y])+n.y}function t0(t,e){return Number(t.substring(0,t.length-1))*e/100}function t1(t){return tY.includes(t)}function t2(t,e,i,r,s){let n=e.getRegion(),a=n.getLayoutStartPoint(),o=i.getRegion(),l=o.getLayoutStartPoint(),h=Math.abs(Math.min(a.x,l.x)-Math.max(a.x+n.getLayoutRect().width,l.x+o.getLayoutRect().width)),u=Math.abs(Math.min(a.y,l.y)-Math.max(a.y+n.getLayoutRect().height,l.y+o.getLayoutRect().height)),d={relativeSeries:r,startRelativeSeries:e,endRelativeSeries:i},c=[],p=t.latestData[0]&&t.latestData[0].latestData?t.latestData[0].latestData:t.latestData,g=r.getXAxisHelper().getScale(0).domain(),m=r.getYAxisHelper().getScale(0).domain();return p.forEach(t=>{let e=(0,$.Z)(t.x),i=(0,$.Z)(t.y);if(e&&i){let e=tJ(t,g,s,d,h,a),i=tQ(t,m,s,d,u,a);c.push([{x:e,y:i}])}else if(e){let e=tJ(t,g,s,d,h,a),i=Math.max(a.y+n.getLayoutRect().height,l.y+o.getLayoutRect().height),r=Math.min(a.y,l.y);c.push([{x:e,y:i},{x:e,y:r}])}else if(i){let e=Math.min(a.x,l.x),i=tQ(t,m,s,d,u,a),r=Math.max(a.x+n.getLayoutRect().width,l.x+o.getLayoutRect().width);c.push([{x:e,y:i},{x:r,y:i}])}}),c}function t3(t,e,i,r){let s=[],n=t.latestData[0]&&t.latestData[0].latestData?t.latestData[0].latestData:t.latestData,a=(0,ta.Z)(r);return n.forEach((t,n)=>{var o,l,h,u;let d=(null==t?void 0:t.getRefRelativeSeries)?t.getRefRelativeSeries():e,c=d.getRegion(),p=c.getLayoutStartPoint(),{width:g,height:m}=c.getLayoutRect(),f=0,v=0;if(r){let t=a?r[n]:r,e=t.x,i=t.y;e&&(f=(0,tX.hU)(e)?Number(e.substring(0,e.length-1))*g/100:e),i&&(v=(0,tX.hU)(i)?Number(i.substring(0,i.length-1))*m/100:i)}let y=d.getXAxisHelper().getScale(0).domain(),_=d.getYAxisHelper().getScale(0).domain(),b=(0,I.IX)(t.x),x=(0,I.IX)(t.y);1===b.length&&(0,ti.Z)(b[0])&&tq(y,b[0],i)&&(null===(l=null===(o=d.getXAxisHelper())||void 0===o?void 0:o.setExtendDomain)||void 0===l||l.call(o,"marker_xAxis_extend",b[0])),1===x.length&&(0,ti.Z)(x[0])&&tq(_,x[0],i)&&(null===(u=null===(h=d.getYAxisHelper())||void 0===h?void 0:h.setExtendDomain)||void 0===u||u.call(h,"marker_yAxis_extend",x[0])),s.push({x:d.getXAxisHelper().dataToPosition(b)+p.x+f,y:d.getYAxisHelper().dataToPosition(x)+p.y+v})}),s}function t5(t,e,i){let{x:r,y:s}=t;return(0,tX.hU)(r)&&(r=t0(r,e)),(0,tX.hU)(s)&&(s=t0(s,i)),{x:r,y:s}}function t4(t,e,i){let r;if(r=(0,tr.Z)(t)?(0,I.IX)(t(e.getData().getLatestData(),e)):(0,I.IX)(t),i){let t=e.getRegion(),{x:i,y:s}=t.getLayoutStartPoint(),{width:n,height:a}=t.getLayoutRect();return r.map(t=>{let{x:e,y:r}=t5(t,n,a);return{x:e+=i,y:r+=s}})}let{width:s,height:n}=e.getOption().getChart().getViewRect();return r.map(t=>t5(t,s,n))}function t6(t){let e=1/0,i=-1/0,r=1/0,s=-1/0;return t.forEach(t=>{let n=t.getLayoutStartPoint(),a=t.getLayoutRect();n.x<e&&(e=n.x),n.x+a.width>i&&(i=n.x+a.width),n.y<r&&(r=n.y),n.y+a.height>s&&(s=n.y+a.height)}),{minX:e,maxX:i,minY:r,maxY:s}}function t8(t,e,i){let{labelBackground:r={},style:s,shape:n}=t,a=tK(t,["labelBackground","style","shape"]);return!1!==t.visible?((null==n?void 0:n.visible)?a.shape=Object.assign({visible:!0},(0,X.h_)(n.style)):a.shape={visible:!1},!1!==r.visible?(a.panel=Object.assign({visible:!0,customShape:r.customShape},t9((0,X.h_)(r.style),e,i)),(0,$.Z)(r.padding)&&(a.padding=(0,t$.o)(r.padding))):(a.panel={visible:!1},a.padding=0),s&&(a.textStyle=t9((0,X.h_)(s),e,i)),a):{visible:!1}}function t7(t,e,i){for(let r in t)(0,tr.Z)(t[r])&&(t[r]=t[r](e,i));return t}function t9(t,e,i){return(0,tr.Z)(t)?t(e,i):t}function et(t,e){return(0,tr.Z)(t)?t(e):t}function ee(t,e,i){return(0,$.Z)(t)?"regionLeft"===e?i.getLayoutStartPoint().x-t.x:"regionRight"===e?i.getLayoutStartPoint().x+i.getLayoutRect().width-t.x:"regionTop"===e?i.getLayoutStartPoint().y-t.y:"regionBottom"===e?i.getLayoutStartPoint().y+i.getLayoutRect().height-t.y:e:e}function ei(t){let e="x"in t,i="y"in t,r="x1"in t,s="y1"in t,n="angle"in t,a="radius"in t,o="angle1"in t,l="radius1"in t;return{doXProcess:e&&!i&&!s,doXYY1Process:e&&i&&s,doYProcess:i&&!e&&!r,doYXX1Process:i&&e&&r,doXYProcess:e&&i&&r&&s,doAngleProcess:n&&!o&&!a&&!l,doRadiusProcess:a&&!l&&!n&&!o,doAngRadRad1Process:n&&!o&&a&&l,doRadAngAng1Process:a&&n&&o&&!l,doRadAngProcess:n&&a&&o&&l,doCoordinatesProcess:"coordinates"in t&&(!("process"in t)||"process"in t&&"xy"in t.process)}}function er(t){let e="x"in t,i="x1"in t,r="y"in t,s="y1"in t,n="angle"in t,a="radius"in t,o="angle1"in t,l="radius1"in t;return{doXProcess:e&&i&&!r&&!s,doYProcess:r&&s&&!e&&!i,doXYProcess:e&&i&&r&&s,doAngleProcess:n&&o&&!a&&!l,doRadiusProcess:a&&l&&!n&&!o,doRadAngProcess:n&&a&&o&&l,doCoordinatesProcess:"coordinates"in t}}function es(t){return{doXYProcess:(0,$.Z)(t.x)&&(0,$.Z)(t.y),doPolarProcess:(0,$.Z)(t.angle)&&(0,$.Z)(t.radius),doGeoProcess:(0,$.Z)(t.areaName)}}var en=i(8378),ea=i(3151),eo=i(4154);class el extends N.k{constructor(){super(...arguments),this.name="marker",this._onHover=t=>{this._lastHover=(0,ea.fM)(t,this._container,this._lastHover)},this._onUnHover=t=>{this._lastHover=(0,ea.lO)(t,this._container,this._lastHover)},this._onClick=t=>{this._lastSelect=(0,ea.Q6)(t,this._container,this._lastSelect)}}transAnimationConfig(){var t,e,i;if(!1!==this.attribute.animation){let r=(0,eo.Z)(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:(0,P.Z)({},this.defaultUpdateAnimation,r,null!==(t=this.attribute.animationEnter)&&void 0!==t?t:{}),exit:(0,P.Z)({},this.defaultExitAnimation,r,null!==(e=this.attribute.animationExit)&&void 0!==e?e:{}),update:(0,P.Z)({},this.defaultUpdateAnimation,r,null!==(i=this.attribute.animationUpdate)&&void 0!==i?i:{})}}}setAttribute(t,e,i){super.setAttribute(t,e,i),"visible"===t&&this.render()}_bindEvent(){var t,e,i;if(!this.attribute.interactive)return;let{hover:r,select:s}=this.attribute;r&&(null===(t=this._container)||void 0===t||t.addEventListener("pointermove",this._onHover),null===(e=this._container)||void 0===e||e.addEventListener("pointerout",this._onUnHover)),s&&(null===(i=this._container)||void 0===i||i.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var t,e,i;null===(t=this._container)||void 0===t||t.removeEventListener("pointermove",this._onHover),null===(e=this._container)||void 0===e||e.removeEventListener("pointerout",this._onUnHover),null===(i=this._container)||void 0===i||i.removeEventListener("pointerdown",this._onClick)}_initContainer(){var t,e;let i;let{limitRect:r={},clipInRange:s}=this.attribute;if(s){let s=B.i.group(Object.assign(Object.assign({},r),{clip:!0,pickable:!1}));i=B.i.group({x:-(null!==(t=r.x)&&void 0!==t?t:0),y:-(null!==(e=r.y)&&void 0!==e?e:0),pickable:!1}),s.add(i),this._containerClip=s,this.add(s)}else i=B.i.group({x:0,y:0,pickable:!1}),this.add(i);i.name="marker-container",this._container=i}_updateContainer(){var t,e;let{limitRect:i={},clipInRange:r}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},i)),this._container.setAttributes({x:r?-(null!==(t=i.x)&&void 0!==t?t:0):0,y:r?-(null!==(e=i.y)&&void 0!==e?e:0):0})}render(){var t;this.transAnimationConfig(),this.setAttribute("pickable",!1);let e=null===(t=this.attribute.visible)||void 0===t||t;!1===this.attribute.interactive&&this.setAttribute("childrenPickable",!1),e&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}(n=d||(d={})).start="start",n.startTop="startTop",n.startBottom="startBottom",n.insideStart="insideStart",n.insideStartTop="insideStartTop",n.insideStartBottom="insideStartBottom",n.middle="middle",n.insideMiddleTop="insideMiddleTop",n.insideMiddleBottom="insideMiddleBottom",n.end="end",n.endTop="endTop",n.endBottom="endBottom",n.insideEnd="insideEnd",n.insideEndTop="insideEndTop",n.insideEndBottom="insideEndBottom",(a=c||(c={})).left="left",a.right="right",a.top="top",a.bottom="bottom",a.topLeft="topLeft",a.topRight="topRight",a.bottomLeft="bottomLeft",a.bottomRight="bottomRight",a.middle="middle",a.insideLeft="insideLeft",a.insideRight="insideRight",a.insideTop="insideTop",a.insideBottom="insideBottom",a.insideTopLeft="insideTopLeft",a.insideTopRight="insideTopRight",a.insideBottomLeft="insideBottomLeft",a.insideBottomRight="insideBottomRight",(o=p||(p={})).arcInnerStart="arcInnerStart",o.arcInnerEnd="arcInnerEnd",o.arcInnerMiddle="arcInnerMiddle",o.arcOuterStart="arcOuterStart",o.arcOuterEnd="arcOuterEnd",o.arcOuterMiddle="arcOuterMiddle",o.center="center",(l=g||(g={})).top="top",l.bottom="bottom",l.middle="middle",l.insideTop="insideTop",l.insideBottom="insideBottom",l.insideMiddle="insideMiddle";let eh={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:d.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},eu={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}};p.arcOuterMiddle;let ed={interactive:!0,label:{position:c.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}};p.arcOuterMiddle;let ec={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"},topLeft:{textAlign:"right",textBaseline:"top"},insideTopLeft:{textAlign:"left",textBaseline:"top"},topRight:{textAlign:"left",textBaseline:"top"},insideTopRight:{textAlign:"right",textBaseline:"top"},bottomLeft:{textAlign:"right",textBaseline:"bottom"},insideBottomLeft:{textAlign:"left",textBaseline:"bottom"},bottomRight:{textAlign:"left",textBaseline:"bottom"},insideBottomRight:{textAlign:"right",textBaseline:"bottom"}},ep={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};function eg(t,e){let{x1:i,y1:r,x2:s,y2:n}=e,{x1:a,y1:o,x2:l,y2:h}=t.AABBBounds,u=0,d=0;return a<i&&(u=i-a),o<r&&(d=r-o),l>s&&(u=s-l),h>n&&(d=n-h),{dx:u,dy:d}}function em(t,e){let{dx:i,dy:r}=eg(t,e),{dx:s=0,dy:n=0}=t.attribute;i&&t.setAttribute("dx",i+s),r&&t.setAttribute("dy",r+n)}var ef=i(4437),ev=i(1679);function ey(){(0,V.M)(),(0,tL.b)()}var e_=i(9167);function eb(t,e,i,r){var s,n,a,o,l;if(!t)return;null===(s=null==t?void 0:t.animates)||void 0===s||s.forEach(t=>t.stop("end"));let h=null!==(a=null===(n=t.attribute)||void 0===n?void 0:n.fillOpacity)&&void 0!==a?a:1,u=null!==(l=null===(o=t.attribute)||void 0===o?void 0:o.strokeOpacity)&&void 0!==l?l:1;t.setAttributes({fillOpacity:0,strokeOpacity:0}),t.animate().wait(e).to({fillOpacity:h,strokeOpacity:u},i,r)}function ex(t,e,i,r){t&&(eb(t.startSymbol,e,i,r),t.lines.forEach(t=>eb(t,e,i,r)),eb(t.line,e,i,r),eb(t.endSymbol,e,i,r))}function eS(t,e,i,r){t&&(eb(t.getTextShape(),e,i,r),eb(t.getBgRect(),e,i,r))}function eA(t,e,i,r){var s,n,a,o;t&&(t.setAttributes({fillOpacity:null!==(n=null===(s=t.attribute)||void 0===s?void 0:s.fillOpacity)&&void 0!==n?n:1,strokeOpacity:null!==(o=null===(a=t.attribute)||void 0===a?void 0:a.strokeOpacity)&&void 0!==o?o:1}),t.animate().wait(e).to({fillOpacity:0,strokeOpacity:0},i,r))}function ek(t,e,i,r){t&&(eA(t.startSymbol,e,i,r),t.lines.forEach(t=>eA(t,e,i,r)),eA(t.line,e,i,r),eA(t.endSymbol,e,i,r))}function ew(t,e,i,r){t&&(eA(t.getTextShape(),e,i,r),eA(t.getBgRect(),e,i,r))}function eC(t,e,i,r,s){let n=.1*i,a=.7*i,o=.1*i,l=.1*i;eb(t.startSymbol,r,n,s),t.lines.forEach(t=>t.setAttribute("clipRange",0)),t.lines.forEach((e,i)=>{let o=a/t.lines.length;e.animate().wait(r+n+i*o).to({clipRange:1},o,s)}),eb(t.endSymbol,r+n+a,o,s),eb(e.getTextShape(),r+n+a+o,l,s),eb(e.getBgRect(),r+n+a+o,l,s)}function eT(t,e,i,r,s){ex(t,r,i,s),eS(e,r,i,s)}function eE(t,e,i,r,s){eb(t,r,i,s),eS(e,r,i,s)}function eM(t,e,i,r,s,n){var a;ex(t,s,r,n),eb(e,s,r,n),(null===(a=i.getTextShape)||void 0===a?void 0:a.call(i))?eS(i,s,r,n):eb(i,s,r,n)}function eB(t,e,i,r,s,n){var a;let o=.1*r,l=.65*r,h=.05*r,u=.1*r,d=.1*r;eb(t.startSymbol,s,o,n),t.lines.forEach(t=>t.setAttribute("clipRange",0)),t.lines.forEach((e,i)=>{let r=l/t.lines.length;e.animate().wait(s+o+i*r).to({clipRange:1},r,n)}),eb(e,s+o+l,h,n),eb(t.endSymbol,s+o+l+h,u,n),(null===(a=i.getTextShape)||void 0===a?void 0:a.call(i))?(eb(i.getTextShape(),s+o+l+h+u,d,n),eb(i.getBgRect(),s+o+l+u,d,n)):eb(i,s+o+l+u,d,n)}function eD(t,e,i,r){let{enter:s,update:n,exit:a}=i;if("enter"===r){let{type:i,duration:r,delay:n,easing:a}=s;"clipIn"===i?eC(t,e,r,n,a):"fadeIn"===i&&eT(t,e,r,n,a)}else if("update"===r){let{type:i,duration:r,delay:s,easing:a}=n;"clipIn"===i?eC(t,e,r,s,a):"fadeIn"===i&&eT(t,e,r,s,a)}else if("exit"===r){let{duration:i,delay:r,easing:s}=a;ek(t,r,i,s),ew(e,r,i,s)}}function eO(t,e,i,r){let{enter:s,update:n,exit:a}=i;if("enter"===r){let{type:i,duration:r,delay:n,easing:a}=s;"fadeIn"===i&&eE(t,e,r,n,a)}else if("update"===r){let{type:i,duration:r,delay:s,easing:a}=n;"fadeIn"===i&&eE(t,e,r,s,a)}else if("exit"===r){let{duration:i,delay:r,easing:s}=a;eA(t,r,i,s),ew(e,r,i,s)}}function eP(t,e,i,r){let[s,n]=t,{enter:a,update:o,exit:l}=i;if("enter"===r){let{type:t,duration:i,delay:r,easing:o}=a;"fadeIn"===t?eM(s,n,e,i,r,o):"callIn"===t&&eB(s,n,e,i,r,o)}else if("update"===r){let{type:t,duration:i,delay:r,easing:a}=o;"fadeIn"===t?eM(s,n,e,i,r,a):"callIn"===t&&eB(s,n,e,i,r,a)}else if("exit"===r){var h;let{duration:t,delay:i,easing:r}=l;ek(s,i,t,r),eA(n,i,t,r),(null===(h=e.getTextShape)||void 0===h?void 0:h.call(e))?ew(e,i,t,r):eA(e,i,t,r)}}let eI={type:"clipIn",duration:500,easing:"linear",delay:0},eR={type:"fadeIn",duration:500,easing:"linear",delay:0},eL={type:"callIn",duration:500,easing:"linear",delay:0},eF={type:"fadeOut",duration:500,easing:"linear",delay:0};ey(),(0,U.M)();class ej extends el{markerAnimate(t){ej._animate&&this._animationConfig&&ej._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}getLabel(){return this._label}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,P.Z)({},ej.defaultAttributes,t)),this.name="markArea",this.defaultUpdateAnimation=eR,this.defaultExitAnimation=eF}getPointAttrByPosition(t){let{x1:e,x2:i,y1:r,y2:s}=this._area.AABBBounds,n={x:(e+i)/2,y:(r+s)/2};return(t.includes("left")||t.includes("Left"))&&(n.x=e),(t.includes("right")||t.includes("Right"))&&(n.x=i),(t.includes("top")||t.includes("Top"))&&(n.y=r),(t.includes("bottom")||t.includes("Bottom"))&&(n.y=s),n}setLabelPos(){var t;if(this._label&&this._area){let{label:e={}}=this.attribute,i=null!==(t=e.position)&&void 0!==t?t:"middle",r=this.getPointAttrByPosition(i);if(this._label.setAttributes(Object.assign(Object.assign({},r),{textStyle:Object.assign(Object.assign({},ec[i]),e.textStyle)})),this.attribute.limitRect&&e.confine){let{x:t,y:e,width:i,height:r}=this.attribute.limitRect;em(this._label,{x1:t,y1:e,x2:t+i,y2:e+r})}}}initMarker(t){let{points:e,label:i,areaStyle:r,state:s}=this.attribute,n=B.i.polygon(Object.assign({points:e},r));n.states=(0,P.Z)({},e_.n0,null==s?void 0:s.area),n.name="mark-area-polygon",this._area=n,t.add(n);let a=new tM.V(Object.assign(Object.assign({},i),{state:{panel:(0,P.Z)({},e_.n0,null==s?void 0:s.labelBackground),text:(0,P.Z)({},e_.n0,null==s?void 0:s.label)}}));a.name="mark-area-label",this._label=a,t.add(a),this.setLabelPos()}updateMarker(){let{points:t,label:e,areaStyle:i,state:r}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:t},i)),this._area.states=(0,P.Z)({},e_.n0,null==r?void 0:r.area)),this._label&&this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},e),{state:{panel:(0,P.Z)({},e_.n0,null==r?void 0:r.labelBackground),text:(0,P.Z)({},e_.n0,null==r?void 0:r.label)}})),this.setLabelPos()}isValidPoints(){let{points:t}=this.attribute;if(!t||t.length<3)return!1;let e=!0;return t.forEach(t=>{(0,en.Z)(t.x)&&(0,en.Z)(t.y)||(e=!1)}),e}}ej.defaultAttributes=ed;var eZ=i(2449),eH=i(9904),eN=i(1697),ez=i(5890),eV=i(2732),eU=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};function eW(t,e){let i;if(e.coordinates){let t,r;let{coordinates:s,coordinateType:n,getSeriesByIdOrIndex:a}=e,o=eU(e,["coordinates","coordinateType","getSeriesByIdOrIndex"]);if((0,tr.Z)(s)){let i=e.getRelativeSeries();t=s(i.getData().getLatestData(),i)}else t=s;i=(t=(0,I.IX)(t)).map(t=>{let e=a(t.refRelativeSeriesId,t.refRelativeSeriesIndex);if("cartesian"===n){let{xField:i,yField:s}=e.getSpec(),{xFieldDim:n,xFieldIndex:a,yFieldDim:l,yFieldIndex:h}=t,u=i;(0,$.Z)(a)&&(u=(0,I.IX)(i)[a]),n&&(0,I.IX)(i).includes(n)&&(u=n);let d=s;(0,$.Z)(h)&&(d=(0,I.IX)(s)[h]),l&&(0,I.IX)(s).includes(l)&&(d=l),r=Object.assign({x:void 0,y:void 0},o),(0,eH.Z)(t[u])&&t1(t[u])?r.x={field:u,aggrType:t[u]}:r.x=(0,I.IX)(u).map(e=>t[e]),(0,eH.Z)(t[d])&&t1(t[d])?r.y={field:d,aggrType:t[d]}:r.y=(0,I.IX)(d).map(e=>t[e])}else if("polar"===n){let{valueField:i,categoryField:s}=e.getSpec(),{angleFieldDim:n,angleFieldIndex:a}=t,l=s;(0,$.Z)(a)&&(l=(0,I.IX)(s)[a]),n&&(0,I.IX)(s).includes(n)&&(l=n),r=Object.assign({angle:void 0,radius:void 0},o),(0,eH.Z)(t[l])&&t1(t[l])?r.angle={field:l,aggrType:t[l]}:r.angle=(0,I.IX)(l).map(e=>t[e]),(0,eH.Z)(t[i])&&t1(t[i])?r.radius={field:i,aggrType:t[i]}:r.radius=(0,I.IX)(i).map(e=>t[e])}return r.getRefRelativeSeries=()=>e,r})}else i=e;let r=[];return i.forEach(e=>{let i={x:null,y:null,angle:null,radius:null,areaName:null};if((0,$.Z)(e.x)){let r=e.x;(0,ta.Z)(r)?i.x=r.map(i=>e$(i,t,e)):i.x=e$(r,t,e)}if((0,$.Z)(e.y)){let r=e.y;(0,ta.Z)(r)?i.y=r.map(i=>e$(i,t,e)):i.y=e$(r,t,e)}if((0,$.Z)(e.angle)){let r=e.angle;(0,ta.Z)(r)?i.angle=r.map(i=>e$(i,t,e)):i.angle=e$(r,t,e)}if((0,$.Z)(e.radius)){let r=e.radius;(0,ta.Z)(r)?i.radius=r.map(i=>e$(i,t,e)):i.radius=e$(r,t,e)}if((0,$.Z)(e.areaName)){let r=e.areaName;i.areaName=e$(r,t,e)}e.getRefRelativeSeries&&(i.getRefRelativeSeries=e.getRefRelativeSeries),r.push(i)}),r}let eG={min:(t,e)=>{let i=t[0].latestData;return(0,eV.VV)(i,e.field)},max:(t,e)=>{let i=t[0].latestData;return(0,eV.Fp)(i,e.field)},sum:function(t,e){let i=t[0].latestData;return(0,eV.Sm)(i,e.field)},average:function(t,e){let i=t[0].latestData;return(0,eV.Y8)(i,e.field)},variance:function(t,e){let i=t[0].latestData;return(0,eV.CA)(i,e.field)},standardDeviation:function(t,e){let i=t[0].latestData;return(0,eV.IN)(i,e.field)},median:function(t,e){let i=t[0].latestData;return(0,eV.C2)(i,e.field)}};function e$(t,e,i){let r=i.getRelativeSeries(),s=i.getStartRelativeSeries(),n=i.getEndRelativeSeries(),a=r.getData().getLatestData(),o=s.getData().getLatestData(),l=n.getData().getLatestData();if((0,tr.Z)(t))return t(a,o,l,r,s,n);if((0,ez.Z)(t)){let{aggrType:i,field:r}=t;return eG[i](e,{field:r})}return t}function eX(t,e){if(e&&e.getRelativeSeries){let i=e.getRelativeSeries();if(i){let e=i.getViewData();return e&&e.latestData&&e.latestData.length?t:[]}}return t}class eY extends T.H{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(t){return"cartesian"}static getSpecInfo(t){return(0,q.ts)(t,this.specKey,this.type,t=>!1!==t.visible&&this._getMarkerCoordinateType(t)===this.coordinateType)}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkerAttributeContext(){this._markAttributeContext={relativeSeries:this._relativeSeries,startRelativeSeries:this._startRelativeSeries,endRelativeSeries:this._endRelativeSeries,vchart:this._option.globalInstance}}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent(),this._buildMarkerAttributeContext()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(t,e,i){return(0,eH.Z)(e)&&t1(e)?{field:i.getSpec()[({x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"})[t]],aggrType:e}:e}_processSpecByDims(t){let e=this._relativeSeries,i={};return t.forEach(t=>i[t.dim]=this._getFieldInfoFromSpec(t.dim,t.specValue,e)),Object.assign(Object.assign({},i),this._getAllRelativeSeries())}_processSpecCoo(t){return Object.assign(Object.assign({coordinates:t.coordinates||t.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(t,e)=>this._getSeriesByIdOrIndex(t,e),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let t=[];(0,I.IX)(this._specifiedDataSeries).forEach(e=>{t=t.concat(e.getViewData().latestData)});let e=new eZ.q;return e.registerParser("array",eN.Q),new ty.VO(e).parse(t,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var t,e,i;if(null===(t=this._spec.visible)||void 0===t||t){if(!this._markerComponent){let t=this._createMarkerComponent();t.name=null!==(e=this._spec.name)&&void 0!==e?e:this.type,t.id=null!==(i=this._spec.id)&&void 0!==i?i:`${this.type}-${this.id}`,this._markerComponent=t,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(t,e)=>{this._delegateEvent(this._markerComponent,t,e,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(t,e){var i,r;let s;return(s=null===(i=this._option.getSeriesInUserIdOrIndex((0,$.Z)(t)?[t]:[],[e]))||void 0===i?void 0:i[0])||(s=null!==(r=this._relativeSeries)&&void 0!==r?r:this._getFirstSeries()),s}_bindSeries(){let t=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(t.relativeSeriesId,t.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(t.startRelativeSeriesId,t.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(t.endRelativeSeriesId,t.endRelativeSeriesIndex),t.specifiedDataSeriesIndex&&"all"===t.specifiedDataSeriesIndex||t.specifiedDataSeriesId&&"all"===t.specifiedDataSeriesId?this._specifiedDataSeries=this._option.getAllSeries():(t.specifiedDataSeriesIndex||t.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(t.specifiedDataSeriesId,t.specifiedDataSeriesIndex))}initEvent(){"cartesian"!==this._relativeSeries.coordinate&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}onRender(t){}changeRegions(t){}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var t;if(this._firstSeries)return this._firstSeries;let e=(0,tn.Sr)(this._regions);return e?(this._firstSeries=e,e):(null===(t=this._option)||void 0===t||t.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(t,e,i){(0,te.Z)(this._spec.offsetX)||(this._layoutOffsetX=(0,tX.Mv)(this._spec.offsetX,e.width,e)),(0,te.Z)(this._spec.offsetY)||(this._layoutOffsetY=(0,tX.Mv)(this._spec.offsetY,e.height,e)),super.onLayoutStart(t,e,i)}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,Y.X)(e,t)||(i.reRender=!0,i.reMake=!0,i.change=!0),i}_initCommonDataView(){let{options:t}=this._computeOptions(),e=this._getRelativeDataView();(0,tu.U)(this._option.dataSet,"markerAggregation",eW),(0,tu.U)(this._option.dataSet,"markerFilter",eX);let i=new ty.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});i.parse([e],{type:"dataview"}),i.transform({type:"markerAggregation",options:t}),i.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),i.target.on("change",()=>{this._markerLayout()}),this._markerData=i}}class eK extends eY{constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=C.Ai.MarkArea}static _getMarkerCoordinateType(t){let{doAngleProcess:e,doRadiusProcess:i,doRadAngProcess:r}=er(t);return"polar"===t.coordinateType||e||i||r?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,r,s,n,a,o,l,h,u,d;let c=null!==(t=this._spec.label)&&void 0!==t?t:{},p={zIndex:this.layoutZIndex,interactive:null===(e=this._spec.interactive)||void 0===e||e,hover:null===(i=this._spec.interactive)||void 0===i||i,select:null===(r=this._spec.interactive)||void 0===r||r,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:t9((0,X.h_)(null===(s=this._spec.area)||void 0===s?void 0:s.style),this._markerData,this._markAttributeContext),clipInRange:null!==(n=this._spec.clip)&&void 0!==n&&n,label:t8(c,this._markerData,this._markAttributeContext),state:{area:t7(null===(a=this._spec.area)||void 0===a?void 0:a.state,this._markerData,this._markAttributeContext),label:t7(null===(o=this._spec.label)||void 0===o?void 0:o.state,this._markerData,this._markAttributeContext),labelBackground:t7(null===(u=null===(h=null===(l=this._spec)||void 0===l?void 0:l.label)||void 0===h?void 0:h.labelBackground)||void 0===u?void 0:u.state,this._markerData,this._markAttributeContext)},animation:null!==(d=this._spec.animation)&&void 0!==d&&d,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(p)}_markerLayout(){var t,e,i,r;let s;let n=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,h=this._relativeSeries,u=this._computePointsAttr(),d=this._getRelativeDataView().latestData,c=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:d;if(n.clip||(null===(t=n.label)||void 0===t?void 0:t.confine)){let{minX:t,maxX:e,minY:i,maxY:r}=t6([o.getRegion(),l.getRegion(),h.getRegion()]);s={x:t,y:i,width:e-t,height:r-i}}this._markerComponent&&this._markerComponent.setAttributes(Object.assign(Object.assign({},u),{label:Object.assign(Object.assign({},null===(e=this._markerComponent.attribute)||void 0===e?void 0:e.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(c,d):null===(r=null===(i=this._markerComponent.attribute)||void 0===i?void 0:i.label)||void 0===r?void 0:r.text}),limitRect:s,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}_initDataView(){let{doXProcess:t,doYProcess:e,doXYProcess:i,doAngleProcess:r,doRadiusProcess:s,doRadAngProcess:n,doCoordinatesProcess:a}=er(this._spec);if(!(t||e||i||r||s||n||a))return null;this._initCommonDataView()}}eK.specKey="markArea";class eq extends eK{constructor(){super(...arguments),this.type=E.L.markArea,this.name=E.L.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(t){return new ej(t)}_computePointsAttr(){var t;let e=this._spec,i=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,n=this._relativeSeries,{doXProcess:a,doYProcess:o,doXYProcess:l,doCoordinatesProcess:h}=er(e),u=(0,$.Z)(e.positions),d=null!==(t=e.autoRange)&&void 0!==t&&t,c=[],p=[];if(l){let[t,e]=t2(i,r,s,n,d);t&&t.length&&e&&e.length&&(c=[{x:t[0].x,y:e[0].y},t[0],{x:e[0].x,y:t[0].y},e[0]])}else if(a||o){let[t,e]=t2(i,r,s,n,d);t&&t.length&&e&&e.length&&(c=[...t,e[1],e[0]])}else h?c=t3(i,n,d,e.coordinatesOffset):u&&(c=t4(e.positions,n,e.regionRelative));return{points:c}}_computeOptions(){let t;let e=this._spec,{doXProcess:i,doYProcess:r,doXYProcess:s,doCoordinatesProcess:n}=er(e);return s?t=[this._processSpecByDims([{dim:"x",specValue:e.x},{dim:"y",specValue:e.y}]),this._processSpecByDims([{dim:"x",specValue:e.x1},{dim:"y",specValue:e.y1}])]:i?t=[this._processSpecByDims([{dim:"x",specValue:e.x}]),this._processSpecByDims([{dim:"x",specValue:e.x1}])]:r?t=[this._processSpecByDims([{dim:"y",specValue:e.y}]),this._processSpecByDims([{dim:"y",specValue:e.y1}])]:n&&(t=this._processSpecCoo(e)),{options:t}}}eq.type=E.L.markArea,eq.coordinateType="cartesian";class eJ extends el{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=eI,this.defaultExitAnimation=eF}getLine(){return this._line}getLabel(){return this._label}setLabelPos(){let{label:t={},limitRect:e}=this.attribute,{position:i,confine:r,autoRotate:s}=t,n=this.getPointAttrByPosition(i),a=i.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(this._label.setAttributes(Object.assign(Object.assign({},n.position),{angle:s?this.getRotateByAngle(n.angle):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(i,a,s)),t.textStyle)})),e&&r){let{x:t,y:i,width:r,height:s}=e;em(this._label,{x1:t,y1:i,x2:t+r,y2:i+s})}}initMarker(t){let{label:e,state:i}=this.attribute,r=this.createSegment();r.name="mark-common-line-line",this._line=r,t.add(r);let s=new tM.V(Object.assign(Object.assign({},e),{state:{panel:(0,P.Z)({},e_.n0,null==i?void 0:i.labelBackground),text:(0,P.Z)({},e_.n0,null==i?void 0:i.label)}}));s.name="mark-common-line-label",this._label=s,t.add(s),this.setLabelPos()}updateMarker(){let{label:t,state:e}=this.attribute;this.setLineAttributes(),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},t),{state:{panel:(0,P.Z)({},e_.n0,null==e?void 0:e.labelBackground),text:(0,P.Z)({},e_.n0,null==e?void 0:e.label)}})),this.setLabelPos())}}var eQ=i(114),e0=i(3745);ey(),(0,ev.j)();class e1 extends eJ{markerAnimate(t){e1._animate&&this._animationConfig&&e1._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,P.Z)({},e1.defaultAttributes,t)),this.name="markLine"}getPointAttrByPosition(t){var e;let{label:i={}}=this.attribute,{refX:r=0,refY:s=0}=i,n=this._line.getMainSegmentPoints(),a=null!==(e=this._line.getEndAngle())&&void 0!==e?e:0,o=((0,e0.WF)(a),a),l=r*Math.cos(o)+s*Math.cos(o-Math.PI/2),h=r*Math.sin(o)+s*Math.sin(o-Math.PI/2);return t.includes("start")||t.includes("Start")?{position:{x:n[0].x+l,y:n[0].y+h},angle:o}:t.includes("middle")||t.includes("Middle")?{position:{x:(n[0].x+n[n.length-1].x)/2+l,y:(n[0].y+n[n.length-1].y)/2+h},angle:o}:{position:{x:n[n.length-1].x+l,y:n[n.length-1].y+h},angle:o}}getRotateByAngle(t){var e;return((0,e0.WF)(t)?t:t-Math.PI)+(null!==(e=this.attribute.label.refAngle)&&void 0!==e?e:0)}getTextStyle(t,e,i){return(0,e0.U4)(Math.abs(e),Math.PI/2,.001)||(0,e0.U4)(Math.abs(e),3*Math.PI/2,.001)?(0,e0.ic)(i,e,t):(0,e0.WF)(e)?eu.postiveXAxis[t]:eu.negativeXAxis[t]}createSegment(){let{points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:n,state:a}=this.attribute;return new eQ.X({points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:n,pickable:!1,state:{line:(0,P.Z)({},e_.n0,null==a?void 0:a.line),startSymbol:(0,P.Z)({},e_.n0,null==a?void 0:a.lineStartSymbol),endSymbol:(0,P.Z)({},e_.n0,null==a?void 0:a.lineEndSymbol)}})}setLineAttributes(){let{points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:n,state:a}=this.attribute;this._line&&this._line.setAttributes({points:t,startSymbol:e,endSymbol:i,lineStyle:r,mainSegmentIndex:s,multiSegment:n,state:{line:(0,P.Z)({},e_.n0,null==a?void 0:a.line),startSymbol:(0,P.Z)({},e_.n0,null==a?void 0:a.lineStartSymbol),endSymbol:(0,P.Z)({},e_.n0,null==a?void 0:a.lineEndSymbol)}})}isValidPoints(){let{points:t}=this.attribute;if(!t||t.length<2)return!1;let e=!0;return t.forEach(t=>{if(t.length)t.forEach(t=>{(0,en.Z)(t.x)&&(0,en.Z)(t.y)||(e=!1)});else if(!(0,en.Z)(t.x)||!(0,en.Z)(t.y))return void(e=!1)}),e}}function e2(t,e){let i=t[0].latestData;return(0,eV.VC)(i,e.fieldX,e.fieldY)}e1.defaultAttributes=eh;class e3 extends eY{constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=C.Ai.MarkLine}static _getMarkerCoordinateType(t){let{doAngleProcess:e,doRadiusProcess:i,doAngRadRad1Process:r,doRadAngAng1Process:s,doRadAngProcess:n}=ei(t);return"polar"===t.coordinateType||e||i||r||s||n?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,r,s,n,a,o,l,h,u,d,c,p,g,m,f,v,y;let{label:_={},startSymbol:b={},endSymbol:x={}}=this._spec,S={zIndex:this.layoutZIndex,interactive:null===(t=this._spec.interactive)||void 0===t||t,hover:null===(e=this._spec.interactive)||void 0===e||e,select:null===(i=this._spec.interactive)||void 0===i||i,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:t9((0,X.h_)(null===(r=this._spec.line)||void 0===r?void 0:r.style),this._markerData,this._markAttributeContext),clipInRange:null!==(s=this._spec.clip)&&void 0!==s&&s,label:t8(_,this._markerData,this._markAttributeContext),state:{line:t7(null!==(a=null===(n=this._spec.line)||void 0===n?void 0:n.state)&&void 0!==a?a:{},this._markerData,this._markAttributeContext),lineStartSymbol:t7(null!==(l=null===(o=this._spec.startSymbol)||void 0===o?void 0:o.state)&&void 0!==l?l:{},this._markerData,this._markAttributeContext),lineEndSymbol:t7(null!==(u=null===(h=this._spec.endSymbol)||void 0===h?void 0:h.state)&&void 0!==u?u:{},this._markerData,this._markAttributeContext),label:t7(null!==(p=null===(c=null===(d=this._spec)||void 0===d?void 0:d.label)||void 0===c?void 0:c.state)&&void 0!==p?p:{},this._markerData,this._markAttributeContext),labelBackground:t7(null!==(v=null===(f=null===(m=null===(g=this._spec)||void 0===g?void 0:g.label)||void 0===m?void 0:m.labelBackground)||void 0===f?void 0:f.state)&&void 0!==v?v:{},this._markerData,this._markAttributeContext)},animation:null!==(y=this._spec.animation)&&void 0!==y&&y,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return b.visible?S.startSymbol=Object.assign(Object.assign({},b),{visible:!0,style:t9((0,X.h_)(b.style),this._markerData,this._markAttributeContext)}):S.startSymbol={visible:!1},x.visible?S.endSymbol=Object.assign(Object.assign({},x),{visible:!0,style:t9((0,X.h_)(x.style),this._markerData,this._markAttributeContext)}):S.endSymbol={visible:!1},this._newMarkLineComponent(S)}_getUpdateMarkerAttrs(){var t,e,i,r;let s;let n=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,h=this._relativeSeries,u=this._computePointsAttr(),d=h.getViewData().latestData,c=a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData;if(n.clip||(null===(t=n.label)||void 0===t?void 0:t.confine)){let{minX:t,maxX:e,minY:i,maxY:r}=t6([o.getRegion(),l.getRegion(),h.getRegion()]);s={x:t,y:i,width:e-t,height:r-i}}let p=null!==(i=null===(e=this._markerComponent)||void 0===e?void 0:e.attribute)&&void 0!==i?i:{},g=Object.assign(Object.assign({},p.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(c,d):null===(r=p.label)||void 0===r?void 0:r.text});return Object.assign(Object.assign({},u),{label:g,limitRect:s,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var t;let e=this._getUpdateMarkerAttrs();null===(t=this._markerComponent)||void 0===t||t.setAttributes(e)}_initDataView(){let t=this._spec,e="coordinates"in t,{doXProcess:i,doYProcess:r,doXYY1Process:s,doYXX1Process:n,doXYProcess:a,doAngleProcess:o,doRadiusProcess:l,doAngRadRad1Process:h,doRadAngAng1Process:u,doRadAngProcess:d}=ei(t);if(this._markerData=this._getRelativeDataView(),!(i||r||s||n||a||o||l||h||u||d||e))return;(0,tu.U)(this._option.dataSet,"markerAggregation",eW),(0,tu.U)(this._option.dataSet,"markerRegression",e2),(0,tu.U)(this._option.dataSet,"markerFilter",eX);let{options:c,needAggr:p,needRegr:g,processData:m}=this._computeOptions(),f=new ty.VO(this._option.dataSet);f.parse([m],{type:"dataview"}),p&&f.transform({type:"markerAggregation",options:c}),g&&f.transform({type:"markerRegression",options:c}),f.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),f.target.on("change",()=>{this._markerLayout()}),this._markerData=f}}e3.specKey="markLine";class e5 extends e3{constructor(){super(...arguments),this.type=E.L.markLine,this.name=E.L.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(t){return new e1(t)}_computePointsAttr(){var t;let e=this._spec,i=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,n=this._relativeSeries,a=(0,$.Z)(e.coordinates),o=(0,$.Z)(e.process),l=o&&(0,$.Z)(e.process.x),h=o&&(0,$.Z)(e.process.y),u=(0,$.Z)(e.positions),d=null!==(t=e.autoRange)&&void 0!==t&&t,{doXProcess:c,doYProcess:p,doXYY1Process:g,doYXX1Process:m,doXYProcess:f,doCoordinatesProcess:v}=ei(e),y=[];if(c||g||p||m||f||a&&l||a&&h){let t=t2(i,r,s,n,d);y=1===t.length?t[0]:t.map(t=>t[0])}else v?y=t3(i,n,d,e.coordinatesOffset):u&&(y=t4(e.positions,n,e.regionRelative));return{points:y}}_markerLayout(){var t,e,i,r,s,n,a,o;let l=this._getUpdateMarkerAttrs();if("type-step"===this._spec.type){let o,h;let u=this._startRelativeSeries,d=this._endRelativeSeries,{multiSegment:c,mainSegmentIndex:p}=this._spec.line||{},{connectDirection:g,expandDistance:m=0}=this._spec;if((0,tX.hU)(m)){let t=u.getRegion(),e=t.getLayoutStartPoint(),i=d.getRegion(),r=i.getLayoutStartPoint();if("bottom"===g||"top"===g){let s=Math.abs(Math.min(e.y,r.y)-Math.max(e.y+t.getLayoutRect().height,r.y+i.getLayoutRect().height));o=Number(m.substring(0,m.length-1))*s/100}else{let s=Math.abs(Math.min(e.x,r.x)-Math.max(e.x+t.getLayoutRect().width,r.x+i.getLayoutRect().width));o=Number(m.substring(0,m.length-1))*s/100}}else o=m;let{points:f,label:v,limitRect:y}=l,_=function(t,e,i,r=0){let s=[],n=t.y-e.y,a=t.x-e.x;switch(i){case"top":s.push(t),s.push({x:t.x,y:n>0?t.y-r-Math.abs(n):t.y-r}),s.push({x:e.x,y:n>0?e.y-r:e.y-r-Math.abs(n)}),s.push(e);break;case"bottom":s.push(t),s.push({x:t.x,y:n<0?t.y+r+Math.abs(n):t.y+r}),s.push({x:e.x,y:n<0?e.y+r:e.y+r+Math.abs(n)}),s.push(e);break;case"left":s.push(t),s.push({x:a>0?t.x-r-Math.abs(a):t.x-r,y:t.y}),s.push({x:a>0?e.x-r:e.x-r-Math.abs(a),y:e.y}),s.push(e);break;case"right":s.push(t),s.push({x:a>0?t.x+r:t.x+r+Math.abs(a),y:t.y}),s.push({x:a>0?e.x+r+Math.abs(a):e.x+r,y:e.y}),s.push(e)}return s}(f[0],f[1],g,o);h=c&&(0,$.Z)(p)?{position:"middle",autoRotate:!1,refX:0,refY:0}:Object.assign(Object.assign({position:"start",autoRotate:!1},function(t,e,i,r=0){let s=t.y-e.y,n=t.x-e.x;return"bottom"===i?{dx:n>0?-n/2:Math.abs(n/2),dy:s>0?r:Math.abs(s)+r}:"top"===i?{dx:n>0?-Math.abs(n/2):+Math.abs(n/2),dy:s>0?-(Math.abs(s)+r):-r}:"left"===i?{dx:n>0?-n-r:-r,dy:s>0?-s/2:Math.abs(s/2)}:"right"===i?{dx:n>0?r:Math.abs(n)+r,dy:s>0?-s/2:Math.abs(s/2)}:{}}(f[0],f[1],g,o)),{refX:0,refY:0}),(0,en.Z)(null===(t=this._spec.label)||void 0===t?void 0:t.refX)&&(h.refX+=this._spec.label.refX),(0,en.Z)(null===(e=this._spec.label)||void 0===e?void 0:e.refY)&&(h.refY+=this._spec.label.refY),(0,en.Z)(null===(i=this._spec.label)||void 0===i?void 0:i.dx)&&(h.dx=(h.dx||0)+this._spec.label.dx),(0,en.Z)(null===(r=this._spec.label)||void 0===r?void 0:r.dy)&&(h.dy=(h.dy||0)+this._spec.label.dy);let b=null!==(n=null===(s=this._markerComponent)||void 0===s?void 0:s.attribute)&&void 0!==n?n:{};null===(a=this._markerComponent)||void 0===a||a.setAttributes({points:c?[[_[0],_[1]],[_[1],_[2]],[_[2],_[3]]]:_,label:Object.assign(Object.assign(Object.assign({},v),h),{textStyle:Object.assign(Object.assign({},b.label.textStyle),{textAlign:"center",textBaseline:"middle"})}),limitRect:y,multiSegment:c,mainSegmentIndex:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else null===(o=this._markerComponent)||void 0===o||o.setAttributes(l)}_computeOptions(){let t,e=this._getRelativeDataView(),i=!0,r=!1,s=this._spec,n=this._relativeSeries,{doXProcess:a,doYProcess:o,doXYY1Process:l,doYXX1Process:h,doXYProcess:u,doCoordinatesProcess:d}=ei(s);if(u)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x1},{dim:"y",specValue:s.y1}])];else if(a)t=[this._processSpecByDims([{dim:"x",specValue:s.x}])];else if(o)t=[this._processSpecByDims([{dim:"y",specValue:s.y}])];else if(l)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y1}])];else if(h)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x1},{dim:"y",specValue:s.y}])];else if(d){if(t=this._processSpecCoo(s),i=!1,e=new ty.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([n.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:t}),s.process&&"x"in s.process&&(t=[this._processSpecByDims([{dim:"x",specValue:s.process.x}])],i=!0),s.process&&"y"in s.process&&(t=t=[this._processSpecByDims([{dim:"y",specValue:s.process.y}])],i=!0),s.process&&"xy"in s.process){let{xField:e,yField:i}=n.getSpec();t={fieldX:e,fieldY:i},r=!0}}else i=!1;return{options:t,needAggr:i,needRegr:r,processData:e}}}e5.type=E.L.markLine,e5.coordinateType="cartesian";var e4=i(1121);(0,ev.O)();class e6 extends eQ.X{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,P.Z)({},eQ.X.defaultAttributes,t)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){let t=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getEndAngle(){let t=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(t){return this.isReverseArc?t+Math.PI:t}_computeEndRotate(t){return this.isReverseArc?t:t+Math.PI}render(){this.removeAllChild(!0),this._reset();let{startSymbol:t,endSymbol:e,lineStyle:i,state:r,visible:s=!0,radius:n,startAngle:a,endAngle:o,center:l}=this.attribute;if(!s)return;this._startAngle=a,this._endAngle=o,this.isReverseArc=a>o;let h={x:l.x+n*Math.cos(this._startAngle),y:l.y+n*Math.sin(this._startAngle)},u={x:l.x+n*Math.cos(this._endAngle),y:l.y+n*Math.sin(this._endAngle)};this._mainSegmentPoints=[h,u];let d=this._renderSymbol(t,this._mainSegmentPoints,"start"),c=this._renderSymbol(e,this._mainSegmentPoints,"end");this.startSymbol=d,this.endSymbol=c;let p=B.i.arc(Object.assign({x:l.x,y:l.y,startAngle:a,endAngle:o,innerRadius:n,outerRadius:n},i));p.name=`${this.name}-line`,p.id=this._getNodeId("arc"),(0,e4.Z)(null==r?void 0:r.line)||(p.states=[].concat(r.line)[0]),this.add(p),this.line=p}}let e8=(t,e)=>{let i=Math.atan2(t,e);return i<0?i+2*Math.PI:i};ey(),(0,ev.j)(),(0,ev.O)(),(0,tP.k)(),(0,ef.i)(),(0,tR.N)();class e7 extends el{markerAnimate(t){e7._animate&&this._animationConfig&&e7._animate([this._line,this._decorativeLine],this._item,this._animationConfig,t)}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,P.Z)({},e7.defaultAttributes,t)),this.name="markPoint",this.defaultUpdateAnimation=eL,this.defaultExitAnimation=eF,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(t,e,i,r,s){return(0,e0.U4)(Math.abs(r),Math.PI/2,.001)||(0,e0.U4)(Math.abs(r),3*Math.PI/2,.001)?(0,e0.ic)(t,r,s):(0,e0.WF)(r)?ep.postiveXAxis[s]:ep.negativeXAxis[s]}setItemAttributes(t,e,i,r,s){var n,a;if(!t)return;let{autoRotate:o=!0,refX:l=0,refY:h=0,refAngle:u=0,textStyle:d={},richTextStyle:c={},imageStyle:p={},position:m=g.middle}=e,{state:f}=this.attribute,v=(null===(n=this._line)||void 0===n?void 0:n.getEndAngle())||0,y=l*Math.cos(v)+h*Math.cos(v-Math.PI/2),_=l*Math.sin(v)+h*Math.sin(v-Math.PI/2);if("text"===s){let s=r.x-i.x,n=r.y-i.y;t.setAttributes(Object.assign(Object.assign({},d),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(o,s,n,v,null!==(a=e.position)&&void 0!==a?a:"end")),d.textStyle),state:{panel:(0,P.Z)({},e_.n0,null==f?void 0:f.textBackground),text:(0,P.Z)({},e_.n0,null==f?void 0:f.text)}}))}else"richText"===s?(t.setAttributes({dx:this.getItemDx(t,m,c)+(c.dx||0),dy:this.getItemDy(t,m,c)+(c.dy||0)}),t.states=(0,P.Z)({},e_.n0,null==f?void 0:f.richText)):"image"===s&&(t.setAttributes({dx:this.getItemDx(t,m,p)+(p.dx||0),dy:this.getItemDy(t,m,p)+(p.dy||0)}),t.states=(0,P.Z)({},e_.n0,null==f?void 0:f.image));let b=(0,e0.WF)(v)?v:v-Math.PI;t.setAttributes({x:r.x+(y||0),y:r.y+(_||0),angle:o&&b+u})}getItemDx(t,e,i){var r,s;let n=null!==(s=null===(r=null==t?void 0:t.AABBBounds)||void 0===r?void 0:r.width())&&void 0!==s?s:(null==i?void 0:i.width)||0;return e.includes("inside")?-n:0}getItemDy(t,e,i){var r,s;let n=null!==(s=null===(r=null==t?void 0:t.AABBBounds)||void 0===r?void 0:r.height())&&void 0!==s?s:(null==i?void 0:i.height)||0;return e.includes("top")||e.includes("Top")?-n:e.includes("middle")||e.includes("Middle")?-n/2:0}initItem(t,e,i){let r;let{state:s}=this.attribute,{type:n="text",symbolStyle:a,richTextStyle:o,imageStyle:l,renderCustomCallback:h}=t;return"symbol"===n?(r=B.i.symbol(Object.assign(Object.assign({},i),a))).states=(0,P.Z)({},e_.n0,null==s?void 0:s.symbol):"text"===n?r=new tM.V(Object.assign(Object.assign({},i),{state:{panel:(0,P.Z)({},e_.n0,null==s?void 0:s.textBackground),text:(0,P.Z)({},e_.n0,null==s?void 0:s.text)}})):"richText"===n?(r=B.i.richtext(Object.assign(Object.assign({},i),o))).states=(0,P.Z)({},e_.n0,null==s?void 0:s.richText):"image"===n?(r=B.i.image(Object.assign(Object.assign({},i),l))).states=(0,P.Z)({},e_.n0,null==s?void 0:s.image):"custom"===n&&h&&((r=h()).states=(0,P.Z)({},e_.n0,null==s?void 0:s.customMark)),r.name=`mark-point-${n}`,this.setItemAttributes(r,t,e,i,n),r}getItemLineAttr(t,e,i){let r=[],s={x:0,y:0},n=0,a=0,o=0,{type:l="type-s",arcRatio:h=.8}=t,u=i.x-e.x,d=i.y-e.y;if(this._isStraightLine=(0,e0.U4)(u,0,.001)||(0,e0.U4)(d,0,.001),this._isArcLine){let{x:t,y:e}=this.attribute.position,{x:r,y:l}=i,u=(t+r)/2,d=u+h*(l>e?-1:1)*u,c=(e===l?0:-(t-r)/(e-l))*(d-u)+(e+l)/2;a=e8(e-c,t-d),o=e8(l-c,r-d),s={x:d,y:c};let p=Math.sqrt((d-t)*(d-t)+(c-e)*(c-e)),g=this.attribute.targetSymbol.style.size/2;a+=2*Math.acos(Math.sqrt(1-g*g/(4*p*p))),h>0?o<a&&(o+=2*Math.PI):a<o&&(a+=2*Math.PI),n=Math.sqrt((d-t)*(d-t)+(c-e)*(c-e))}else r="type-do"!==l||this._isStraightLine?"type-po"!==l||this._isStraightLine?"type-op"!==l||this._isStraightLine?[e,i]:[e,{x:e.x,y:i.y},i]:[e,{x:i.x,y:e.y},i]:[e,{x:(e.x+i.x)/2,y:i.y},i];return{points:r=(0,e0.Bh)(r),center:s,radius:n,startAngle:a,endAngle:o}}reDrawLine(t,e){this._line.release();let{startSymbol:i,endSymbol:r,lineStyle:s,type:n="type-s"}=t,{state:a}=this.attribute,o=this._isArcLine?e6:eQ.X;this._container.removeChild(this._line),this._line=new o(Object.assign(Object.assign({},e),{pickable:!1,startSymbol:i,endSymbol:r,lineStyle:s,visible:t.visible,state:{line:(0,P.Z)({},e_.n0,null==a?void 0:a.line),startSymbol:(0,P.Z)({},e_.n0,null==a?void 0:a.lineStartSymbol),endSymbol:(0,P.Z)({},e_.n0,null==a?void 0:a.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(t,e,i){if(this._line){let{startSymbol:r,endSymbol:s,lineStyle:n,type:a="type-s"}=t,{state:o}=this.attribute,l=this.getItemLineAttr(t,e,i);this._isArcLine&&"arc-segment"===this._line.key||!this._isArcLine&&"segment"===this._line.key?this._line.setAttributes(Object.assign(Object.assign({},l),{startSymbol:r,endSymbol:s,lineStyle:n,visible:t.visible,state:{line:(0,P.Z)({},e_.n0,null==o?void 0:o.line),startSymbol:(0,P.Z)({},e_.n0,null==o?void 0:o.lineStartSymbol),endSymbol:(0,P.Z)({},e_.n0,null==o?void 0:o.lineEndSymbol)}})):this.reDrawLine(t,l)}}getDecorativeLineAttr(t){var e;let i=(null===(e=null==t?void 0:t.decorativeLine)||void 0===e?void 0:e.length)||10,r=this._line.getEndAngle()||0;return{startPointOffsetX:i/2*Math.cos(r-Math.PI/2),startPointOffsetY:i/2*Math.sin(r-Math.PI/2),endPointOffsetX:-i/2*Math.cos(r-Math.PI/2),endPointOffsetY:-i/2*Math.sin(r-Math.PI/2)}}setDecorativeLineAttr(t,e,i){var r;if(this._decorativeLine){let{lineStyle:s}=t,{startPointOffsetX:n,startPointOffsetY:a,endPointOffsetX:o,endPointOffsetY:l}=this.getDecorativeLineAttr(t);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:e.x+n,y:e.y+a},{x:e.x+o,y:e.y+l}]},s),{visible:i})),this._decorativeLine.states=(0,P.Z)({},e_.n0,null===(r=this.attribute.state)||void 0===r?void 0:r.line)}}setTargetItemAttributes(t,e){var i,r;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:e.x,y:e.y,visible:null!==(i=t.visible)&&void 0!==i&&i,size:t.size},t.style)),this._targetItem.states=(0,P.Z)({},e_.n0,null===(r=this.attribute.state)||void 0===r?void 0:r.targetItem))}setAllOfItemsAttr(t,e){var i;let{position:r,itemLine:s={},itemContent:n={},limitRect:a,targetSymbol:o}=this.attribute,{type:l="text",confine:h}=n;if(a&&h){let{x:t,y:i,width:r,height:s}=a,{dx:n,dy:o}=eg(this._item,{x1:t,y1:i,x2:t+r,y2:i+s});e.x=e.x+n,e.y=e.y+o}this.setTargetItemAttributes(o,r),this.setItemLineAttr(s,t,e),this.setItemAttributes(this._item,n,t,e,l),this.setDecorativeLineAttr(s,e,null===(i=s.decorativeLine)||void 0===i?void 0:i.visible)}computeNewPositionAfterTargetItem(t){var e,i;let r;let{itemContent:s={},targetSymbol:n,itemLine:a}=this.attribute,{offsetX:o=0,offsetY:l=0}=s,{offset:h=0,style:u,visible:d=!1,size:c}=n,p=d?null!==(i=null!==(e=u.size)&&void 0!==e?e:c)&&void 0!==i?i:20:0;return r="type-do"===a.type?e8(l,o/2):"type-po"===a.type?e8(0,o):"type-op"===a.type?e8(l,0):e8(l,o),{newPosition:{x:t.x+(p/2+h)*Math.cos(r),y:t.y+(p/2+h)*Math.sin(r)},newItemPosition:{x:t.x+(p/2+h)*Math.cos(r)+o,y:t.y+(p/2+h)*Math.sin(r)+l}}}initMarker(t){let{position:e,itemContent:i={},itemLine:r}=this.attribute,{type:s="type-s",arcRatio:n=.8}=r,{offsetX:a=0,offsetY:o=0}=i;this._isStraightLine=(0,e0.U4)(a,0,.001)||(0,e0.U4)(o,0,.001),this._isArcLine="type-arc"===s&&0!==n&&!this._isStraightLine;let{newPosition:l,newItemPosition:h}=this.computeNewPositionAfterTargetItem(e),u=new(this._isArcLine?e6:eQ.X)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});u.name="mark-point-line",this._line=u,t.add(u);let d=B.i.line({points:[]});d.name="mark-point-decorativeLine",this._decorativeLine=d,t.add(d);let c=B.i.symbol({});c.name="mark-point-targetItem",this._targetItem=c,t.add(this._targetItem);let p=this.initItem(i,l,h);this._item=p,t.add(p),this.setAllOfItemsAttr(l,h)}updateMarker(){let{position:t,itemContent:e={},itemLine:i}=this.attribute,{type:r="text"}=e,{type:s="type-s",arcRatio:n=.8}=i,{offsetX:a=0,offsetY:o=0}=e;this._isStraightLine=(0,e0.U4)(a,0,.001)||(0,e0.U4)(o,0,.001);let l="type-arc"===s&&0!==n&&!this._isStraightLine,{newPosition:h,newItemPosition:u}=this.computeNewPositionAfterTargetItem(t);l!==this._isArcLine?(this._isArcLine=l,this.reDrawLine(i,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=l,this.setItemAttributes(this._item,e,h,u,r),this.setAllOfItemsAttr(h,u)}isValidPoints(){let{position:t}=this.attribute;return!(!(0,en.Z)(t.x)||!(0,en.Z)(t.y))}}e7.defaultAttributes={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10,symbolStyle:{symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},textStyle:{dx:0,dy:0},imageStyle:{width:80,height:80},richTextStyle:{width:100,height:100}}};var e9=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class it extends eY{constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=C.Ai.MarkPoint}static _getMarkerCoordinateType(t){let{doPolarProcess:e,doGeoProcess:i}=es(t);return"polar"===t.coordinateType||e?"polar":"geo"===t.coordinateType||i?"geo":"cartesian"}_createMarkerComponent(){var t,e,i,r,s,n,a,o,l,h,u,d,c,p,g,m,f,v,y,_,b,x,S,A,k,w,C,T;let{itemContent:E={},itemLine:M={},targetSymbol:B={}}=this._spec,{text:D={},symbol:O,image:P,richText:I}=E,R=e9(E,["text","symbol","image","richText"]),L={zIndex:this.layoutZIndex,interactive:null===(t=this._spec.interactive)||void 0===t||t,hover:null===(e=this._spec.interactive)||void 0===e||e,select:null===(i=this._spec.interactive)||void 0===i||i,position:{x:0,y:0},clipInRange:null!==(r=this._spec.clip)&&void 0!==r&&r,itemContent:Object.assign({offsetX:et(E.offsetX,this._relativeSeries.getRegion()),offsetY:et(E.offsetX,this._relativeSeries.getRegion())},R),targetSymbol:{offset:null!==(s=B.offset)&&void 0!==s?s:0,visible:null!==(n=B.visible)&&void 0!==n&&n,size:null!==(a=B.size)&&void 0!==a?a:20,style:t9(B.style,this._markerData,this._markAttributeContext)},state:{line:t7(null!==(l=null===(o=this._spec.itemLine.line)||void 0===o?void 0:o.state)&&void 0!==l?l:{},this._markerData,this._markAttributeContext),lineStartSymbol:t7(null!==(u=null===(h=this._spec.itemLine.startSymbol)||void 0===h?void 0:h.state)&&void 0!==u?u:{},this._markerData,this._markAttributeContext),lineEndSymbol:t7(null!==(c=null===(d=this._spec.itemLine.endSymbol)||void 0===d?void 0:d.state)&&void 0!==c?c:{},this._markerData,this._markAttributeContext),symbol:t7(null!==(g=null===(p=this._spec.itemContent.symbol)||void 0===p?void 0:p.state)&&void 0!==g?g:{},this._markerData,this._markAttributeContext),image:t7(null!==(f=null===(m=this._spec.itemContent.image)||void 0===m?void 0:m.state)&&void 0!==f?f:{},this._markerData,this._markAttributeContext),text:t7(null!==(y=null===(v=this._spec.itemContent.text)||void 0===v?void 0:v.state)&&void 0!==y?y:{},this._markerData,this._markAttributeContext),textBackground:t7(null===(b=null===(_=this._spec.itemContent.text)||void 0===_?void 0:_.labelBackground)||void 0===b?void 0:b.state,this._markerData,this._markAttributeContext),richText:t7(null!==(S=null===(x=this._spec.itemContent.richText)||void 0===x?void 0:x.state)&&void 0!==S?S:{},this._markerData,this._markAttributeContext),customMark:t7(null!==(k=null===(A=this._spec.itemContent.customMark)||void 0===A?void 0:A.state)&&void 0!==k?k:{},this._markerData,this._markAttributeContext),targetItem:t7(null!==(C=null===(w=this._spec.targetSymbol)||void 0===w?void 0:w.state)&&void 0!==C?C:{},this._markerData,this._markAttributeContext)},animation:null!==(T=this._spec.animation)&&void 0!==T&&T,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};(null==O?void 0:O.style)&&(L.itemContent.symbolStyle=(0,X.h_)(t9(O.style,this._markerData,this._markAttributeContext))),(null==P?void 0:P.style)&&(L.itemContent.imageStyle=t9(P.style,this._markerData,this._markAttributeContext)),D&&(L.itemContent.textStyle=t8(D,this._markerData,this._markAttributeContext)),(null==I?void 0:I.style)&&(L.itemContent.richTextStyle=t9(I.style,this._markerData,this._markAttributeContext));let{visible:F,line:j={}}=M,Z=e9(M,["visible","line"]);return L.itemLine=!1!==F?Object.assign(Object.assign({},Z),{visible:!0,lineStyle:(0,X.h_)(j.style)}):{visible:!1},new e7(L)}_markerLayout(){var t,e,i,r,s;let n;let a=this._spec,o=this._markerData,l=this._relativeSeries,{point:h}=this._computePointsAttr(),u=this._getRelativeDataView().latestData,d=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:u;if(a.clip||(null===(t=a.itemContent)||void 0===t?void 0:t.confine)){let{minX:t,maxX:e,minY:i,maxY:r}=t6([l.getRegion()]);n={x:t,y:i,width:e-t,height:r-i}}if(this._markerComponent){let t=null!==(e=this._markerComponent.attribute)&&void 0!==e?e:{},a=null!==(r=null===(i=t.itemContent)||void 0===i?void 0:i.textStyle)&&void 0!==r?r:{};this._markerComponent.setAttributes({position:void 0===h?{x:null,y:null}:h,itemContent:Object.assign(Object.assign({},t.itemContent),{textStyle:Object.assign(Object.assign({},a),{text:(null===(s=this._spec.itemContent.text)||void 0===s?void 0:s.formatMethod)?this._spec.itemContent.text.formatMethod(d,u):a.text}),offsetX:ee(h,t.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:ee(h,t.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:n,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){let t=this._spec,{doXYProcess:e,doPolarProcess:i,doGeoProcess:r}=es(t);((0,$.Z)(t.coordinate)||e||i||r)&&this._initCommonDataView()}}it.specKey="markPoint";class ie extends it{constructor(){super(...arguments),this.type=E.L.markPoint,this.name=E.L.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var t;let e;let i=this._spec,r=this._markerData,s=this._relativeSeries,n="x"in i&&"y"in i,a="coordinate"in i,o="position"in i,l=null!==(t=null==i?void 0:i.autoRange)&&void 0!==t&&t;return n?e=t2(r,s,s,s,l)[0][0]:a?e=t3(r,s,l,i.coordinatesOffset)[0]:o&&(e=t4(i.position,s,i.regionRelative)[0]),{point:e}}_computeOptions(){let t;let e=this._spec,{doXYProcess:i}=es(e),r=(0,$.Z)(e.coordinate);return i?t=[this._processSpecByDims([{dim:"x",specValue:e.x},{dim:"y",specValue:e.y}])]:r&&(t=this._processSpecCoo(e)),{options:t}}}ie.type=E.L.markPoint,ie.coordinateType="cartesian";var ii=i(5767);class ir extends tT{constructor(t,e){var i;super(t,e),this.type=E.L.scrollBar,this.name=E.L.scrollBar,this.specKey="scrollBar",this.layoutZIndex=C.Ai.DataZoom,this.layoutLevel=C.pM.DataZoom,this.layoutType="region-relative",this._filterMode=null!==(i=t.filterMode)&&void 0!==i?i:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),(0,tt.Z)(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(t){var e,i;this._updateScaleRange(),null===(i=(e=this.effect).onZoomChange)||void 0===i||i.call(e),super.onLayoutEnd(t)}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return(0,ti.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:12}_computeHeight(){return(0,ti.Z)(this._spec.height)?this._spec.height:this._isHorizontal?12:this.getLayoutRect().height}_getAttrs(){var t,e,i,r,s,n;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:null===(t=this._spec)||void 0===t?void 0:t.delayType,delayTime:(0,$.Z)(null===(e=this._spec)||void 0===e?void 0:e.delayType)?null!==(r=null===(i=this._spec)||void 0===i?void 0:i.delayTime)&&void 0!==r?r:30:0,realTime:null===(n=null===(s=this._spec)||void 0===s?void 0:s.realTime)||void 0===n||n},this._getComponentAttrs())}_createOrUpdateComponent(){let t=this._getAttrs();if(this._component)this._component.setAttributes(t);else{let e=this.getContainer();this._component=new ii.B(t),this._component.addEventListener("scrollDrag",t=>{let e=t.detail.value;this._handleChange(e[0],e[1])}),this._component.addEventListener("scrollUp",t=>{let e=t.detail.value;this._handleChange(e[0],e[1])}),e.add(this._component)}}_handleChange(t,e,i){super._handleChange(t,e,i);let r=(0,eV.hA)(this._start,t)&&(0,eV.hA)(this._end,e);if(this._shouldChange&&(!r||!1===this._spec.realTime)){i&&this._component&&this._component.setAttribute("range",[t,e]),this._start=t,this._end=e;let r=this.statePointToData(t),s=this.statePointToData(e);((0,tr.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,r,s):this._handleStateChange(this.statePointToData(t),this.statePointToData(e)))&&this.event.emit(k.$7.scrollBarChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._spec.auto&&this._data.getDataView().reRunAllTransform()}_getComponentAttrs(){let{rail:t,slider:e,innerPadding:i}=this._spec,r={};return(0,te.Z)(i)||(r.padding=i),(0,e4.Z)(null==t?void 0:t.style)||(r.railStyle=(0,X.h_)(t.style)),(0,e4.Z)(null==e?void 0:e.style)||(r.sliderStyle=(0,X.h_)(e.style)),r.disableTriggerEvent=this._option.disableTriggerEvent,r}_getNeedClearVRenderComponents(){return[this._component]}}ir.type=E.L.scrollBar,ir.specKey="scrollBar";var is=i(7645);let ia=[m.dz,f.B,v.M,y.v,_.E,b.N,x.w,S.K,A.i,()=>{K.F.registerComponent(J.type,J)},Q.A,()=>{K.F.registerComponent(tV.type,tV)},tU.T,tW.U,tG.BF,()=>{K.F.registerComponent(eq.type,eq),ej._animate=eO},()=>{K.F.registerComponent(e5.type,e5),e1._animate=eD},()=>{K.F.registerComponent(ie.type,ie),e7._animate=eP},()=>{K.F.registerComponent(ir.type,ir)},is._]},5593:function(t,e,i){"use strict";i.d(e,{l:()=>c});var r=i(7484),s=i(4159),n=i(7694),a=i(5014),o=i(7378),l=i(5022),h=i(3127),u=i(5466),d=i(7645);let c=[r.dz,s.B,n.M,a.v,o.T,l.A,h.U,u.BF,d._]},1125:function(t,e,i){"use strict";i.d(e,{W:()=>o});var r=i(0),s=i(3685),n=i(9013),a=i(5719);class o extends r.O{constructor(){super(...arguments),this.id=(0,n.a)(),this.stateKeyToSignalName=t=>`${s.Bq}_animate_${this.id}_${t}`}getAnimationStateSignalName(){return this.stateKeyToSignalName("animationState")}updateAnimateState(t,e){t===a.h.update?this.updateState({animationState:{callback:(t,e)=>e.diffState}},e):t===a.h.appear?this.updateState({animationState:{callback:(t,e)=>"exit"===e.diffState?a.h.none:a.h.appear}},e):this.updateState({animationState:{callback:(e,i)=>t}},e)}_getDefaultStateMap(){return{animationState:{callback:(t,e)=>"exit"===e.diffState?a.h.exit:"update"===e.diffState?a.h.update:a.h.appear}}}}},4380:function(t,e,i){"use strict";i.d(e,{zJ:()=>tz,Eo:()=>tH,rt:()=>tL,Zm:()=>tZ,Vs:()=>tO,zC:()=>tF,tF:()=>tD,wy:()=>tI,BV:()=>tP,cU:()=>tN,cE:()=>tB,sG:()=>tj});var r=i(3337);let s=t=>({type:"clipIn",options:{clipDimension:"horizontal"===t.direction?"y":"x"}}),n={type:"fadeIn"},a=t=>({type:"horizontal"===t.direction?"growPointsXIn":"growPointsYIn",options:{orient:"horizontal"===t.direction?"positive":"negative"}});var o=i(8469),l=i(670);let h=(t,e,i)=>{var r;let s=t.getGraphicAttribute("clipRangeByDimension",!1),n=null!==(r=t.getGraphicAttribute("clipRange",!1))&&void 0!==r?r:1;return e&&e.clipDimension?{from:{clipRange:0,clipRangeByDimension:e.clipDimension},to:{clipRange:n,clipRangeByDimension:s}}:{from:{clipRange:0},to:{clipRange:n}}},u=(t,e,i)=>{var r;let s=t.getGraphicAttribute("clipRangeByDimension",!0),n=null!==(r=t.getGraphicAttribute("clipRange",!0))&&void 0!==r?r:1;return e&&e.clipDimension?{from:{clipRange:n,clipRangeByDimension:e.clipDimension},to:{clipRange:0,clipRangeByDimension:s}}:{from:{clipRange:n},to:{clipRange:0}}},d=(t,e,i)=>{var r,s,n,a;let o=null!==(r=t.getFinalAnimationAttributes())&&void 0!==r?r:{};return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:null!==(s=o.opacity)&&void 0!==s?s:1,fillOpacity:null!==(n=o.fillOpacity)&&void 0!==n?n:1,strokeOpacity:null!==(a=o.strokeOpacity)&&void 0!==a?a:1}}},c=(t,e,i)=>{var r,s,n;return{from:{opacity:null!==(r=t.getGraphicAttribute("opacity",!0))&&void 0!==r?r:1,fillOpacity:null!==(s=t.getGraphicAttribute("fillOpacity",!0))&&void 0!==s?s:1,strokeOpacity:null!==(n=t.getGraphicAttribute("strokeOpacity",!0))&&void 0!==n?n:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}};var p=i(7623),g=i(6082),m=i(1601);let f=(t,e,i)=>{switch(null==e?void 0:e.direction){case"x":{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("x1"),r=t.getFinalAnimationAttribute("width");return{from:(0,p.Z)(r)?{x:e+r/2,x1:void 0,width:0}:{x:(e+i)/2,x1:(e+i)/2,width:void 0},to:{x:e,x1:i,width:r}}}case"y":{let e=t.getFinalAnimationAttribute("y"),i=t.getFinalAnimationAttribute("y1"),r=t.getFinalAnimationAttribute("height");return{from:(0,p.Z)(r)?{y:e+r/2,y1:void 0,height:0}:{y:(e+i)/2,y1:(e+i)/2,height:void 0},to:{y:e,y1:i,height:r}}}default:{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("x1"),r=t.getFinalAnimationAttribute("width"),s=t.getFinalAnimationAttribute("y"),n=t.getFinalAnimationAttribute("y1"),a=t.getFinalAnimationAttribute("height"),o={};return(0,p.Z)(r)?(o.x=e+r/2,o.width=0,o.x1=void 0):(o.x=(e+i)/2,o.x1=(e+i)/2,o.width=void 0),(0,p.Z)(a)?(o.y=s+a/2,o.height=0,o.y1=void 0):(o.y=(s+n)/2,o.y1=(s+n)/2,o.height=void 0),{from:o,to:{x:e,y:s,x1:i,y1:n,width:r,height:a}}}}},v=(t,e,i)=>{switch(null==e?void 0:e.direction){case"x":{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("x1"),r=t.getFinalAnimationAttribute("width");return{to:(0,p.Z)(r)?{x:e+r/2,x1:void 0,width:0}:{x:(e+i)/2,x1:(e+i)/2,width:void 0}}}case"y":{let e=t.getFinalAnimationAttribute("y"),i=t.getFinalAnimationAttribute("y1"),r=t.getFinalAnimationAttribute("height");return{to:(0,p.Z)(r)?{y:e+r/2,y1:void 0,height:0}:{y:(e+i)/2,y1:(e+i)/2,height:void 0}}}default:{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("y"),r=t.getFinalAnimationAttribute("x1"),s=t.getFinalAnimationAttribute("y1"),n=t.getFinalAnimationAttribute("width"),a=t.getFinalAnimationAttribute("height"),o={};return(0,p.Z)(n)?(o.x=e+n/2,o.width=0,o.x1=void 0):(o.x=(e+r)/2,o.x1=(e+r)/2,o.width=void 0),(0,p.Z)(a)?(o.y=i+a/2,o.height=0,o.y1=void 0):(o.y=(i+s)/2,o.y1=(i+s)/2,o.height=void 0),{to:o}}}},y=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?function(t,e,i){var r;let s;let n=t.getFinalAnimationAttribute("x"),a=t.getFinalAnimationAttribute("x1"),o=t.getFinalAnimationAttribute("width");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?s=e.overall:i.group?(s=null!==(r=i.groupWidth)&&void 0!==r?r:i.group.getBounds().width(),i.groupWidth=s):s=i.width:s=(0,m.Z)(null==e?void 0:e.overall)?null==e?void 0:e.overall:0,{from:{x:s,x1:(0,g.Z)(a)?void 0:s,width:(0,g.Z)(o)?void 0:0},to:{x:n,x1:a,width:o}}}(t,e,i):function(t,e,i){let r=t.getFinalAnimationAttribute("x"),s=t.getFinalAnimationAttribute("x1"),n=t.getFinalAnimationAttribute("width");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(r,r+n):Math.max(r,s);return{from:{x:t,x1:(0,g.Z)(s)?void 0:t,width:(0,g.Z)(n)?void 0:0},to:{x:r,x1:s,width:n}}}let a=(0,p.Z)(n)?Math.min(r,r+n):Math.min(r,s);return{from:{x:a,x1:(0,g.Z)(s)?void 0:a,width:(0,g.Z)(n)?void 0:0},to:{x:r,x1:s,width:n}}}(t,e,0)},_=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?function(t,e,i){var r;let s;let n=t.getFinalAnimationAttribute("x1"),a=t.getFinalAnimationAttribute("width");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?s=e.overall:i.group?(s=null!==(r=i.groupWidth)&&void 0!==r?r:i.group.getBounds().width(),i.groupWidth=s):s=i.width:s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{x:s,x1:(0,g.Z)(n)?void 0:s,width:(0,g.Z)(a)?void 0:0}}}(t,e,i):function(t,e,i){let r=t.getFinalAnimationAttribute("x"),s=t.getFinalAnimationAttribute("x1"),n=t.getFinalAnimationAttribute("width");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(r,r+n):Math.max(r,s);return{to:{x:t,x1:(0,g.Z)(s)?void 0:t,width:(0,g.Z)(n)?void 0:0}}}let a=(0,p.Z)(n)?Math.min(r,r+n):Math.min(r,s);return{to:{x:a,x1:(0,g.Z)(s)?void 0:a,width:(0,g.Z)(n)?void 0:0}}}(t,e,0)},b=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?function(t,e,i){var r;let s;let n=t.getFinalAnimationAttribute("y"),a=t.getFinalAnimationAttribute("y1"),o=t.getFinalAnimationAttribute("height");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?s=e.overall:i.group?(s=null!==(r=i.groupHeight)&&void 0!==r?r:i.group.getBounds().height(),i.groupHeight=s):s=i.height:s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0,{from:{y:s,y1:(0,g.Z)(a)?void 0:s,height:(0,g.Z)(o)?void 0:0},to:{y:n,y1:a,height:o}}}(t,e,i):function(t,e,i){let r=t.getFinalAnimationAttribute("y"),s=t.getFinalAnimationAttribute("y1"),n=t.getFinalAnimationAttribute("height");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(r,r+n):Math.max(r,s);return{from:{y:t,y1:(0,g.Z)(s)?void 0:t,height:(0,g.Z)(n)?void 0:0},to:{y:r,y1:s,height:n}}}let a=(0,p.Z)(n)?Math.min(r,r+n):Math.min(r,s);return{from:{y:a,y1:(0,g.Z)(s)?void 0:a,height:(0,g.Z)(n)?void 0:0},to:{y:r,y1:s,height:n}}}(t,e,0)},x=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?function(t,e,i){var r;let s;let n=t.getFinalAnimationAttribute("y1"),a=t.getFinalAnimationAttribute("height");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?s=e.overall:i.group?(s=null!==(r=i.groupHeight)&&void 0!==r?r:i.group.getBounds().height(),i.groupHeight=s):s=i.height:s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{y:s,y1:(0,g.Z)(n)?void 0:s,height:(0,g.Z)(a)?void 0:0}}}(t,e,i):function(t,e,i){let r=t.getFinalAnimationAttribute("y"),s=t.getFinalAnimationAttribute("y1"),n=t.getFinalAnimationAttribute("height");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(r,r+n):Math.max(r,s);return{to:{y:t,y1:(0,g.Z)(s)?void 0:t,height:(0,g.Z)(n)?void 0:0}}}let a=(0,p.Z)(n)?Math.min(r,r+n):Math.min(r,s);return{to:{y:a,y1:(0,g.Z)(s)?void 0:a,height:(0,g.Z)(n)?void 0:0}}}(t,e,0)},S=(t,e,i)=>{let r=t.getFinalAnimationAttributes();return e&&"anticlockwise"===e.orient?{from:{startAngle:null==r?void 0:r.endAngle},to:{startAngle:null==r?void 0:r.startAngle}}:{from:{endAngle:null==r?void 0:r.startAngle},to:{endAngle:null==r?void 0:r.endAngle}}},A=(t,e,i)=>{let r=t.getFinalAnimationAttributes();if(e&&"anticlockwise"===e.orient){let t=(0,m.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t,endAngle:t},to:{startAngle:null==r?void 0:r.startAngle,endAngle:null==r?void 0:r.endAngle}}}let s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:s,endAngle:s},to:{startAngle:null==r?void 0:r.startAngle,endAngle:null==r?void 0:r.endAngle}}},k=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?A(t,e):S(t,e)},w=(t,e,i)=>{let r=t.getFinalAnimationAttributes();return e&&"anticlockwise"===e.orient?{from:{startAngle:t.getGraphicAttribute("startAngle",!0)},to:{startAngle:null==r?void 0:r.endAngle}}:{from:{endAngle:t.getGraphicAttribute("endAngle",!0)},to:{endAngle:null==r?void 0:r.startAngle}}},C=(t,e,i)=>{if(e&&"anticlockwise"===e.orient){let i=(0,m.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t.getGraphicAttribute("startAngle",!0),endAngle:t.getGraphicAttribute("endAngle",!0)},to:{startAngle:i,endAngle:i}}}let r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:t.getGraphicAttribute("startAngle",!0),endAngle:t.getGraphicAttribute("endAngle",!0)},to:{startAngle:r,endAngle:r}}},T=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?C(t,e):w(t,e)},E=(t,e,i)=>{let r=t.getFinalAnimationAttributes();return e&&"inside"===e.orient?{from:{innerRadius:null==r?void 0:r.outerRadius},to:{innerRadius:null==r?void 0:r.innerRadius}}:{from:{outerRadius:null==r?void 0:r.innerRadius},to:{outerRadius:null==r?void 0:r.outerRadius}}},M=(t,e,i)=>{let r=t.getFinalAnimationAttributes(),s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:s,outerRadius:s},to:{innerRadius:null==r?void 0:r.innerRadius,outerRadius:null==r?void 0:r.outerRadius}}},B=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?M(t,e):E(t,e)},D=(t,e,i)=>{let r=t.getFinalAnimationAttributes();return e&&"inside"===e.orient?{from:{innerRadius:t.getGraphicAttribute("innerRadius",!0)},to:{innerRadius:null==r?void 0:r.outerRadius}}:{from:{outerRadius:t.getGraphicAttribute("outerRadius",!0)},to:{outerRadius:null==r?void 0:r.innerRadius}}},O=(t,e,i)=>{let r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:t.getGraphicAttribute("innerRadius",!0),outerRadius:t.getGraphicAttribute("outerRadius",!0)},to:{innerRadius:r,outerRadius:r}}},P=(t,e,i)=>{var r;return!1!==(null!==(r=null==e?void 0:e.overall)&&void 0!==r&&r)?O(t,e):D(t,e)};var I=i(8378);let R=(t,e,i)=>{let r=t.getGraphicAttribute("points",!1),s={x:0,y:0};return r.forEach(t=>{s.x+=t.x,s.y+=t.y}),s.x/=r.length,s.y/=r.length,e&&e.center&&((0,I.Z)(e.center.x)&&(s.x=e.center.x),(0,I.Z)(e.center.y)&&(s.y=e.center.y)),"area"===t.mark.markType&&(s.x1=s.x,s.y1=s.y),r.map(t=>Object.assign({},t,s))},L=(t,e,i)=>({from:{points:R(t,e)},to:{points:t.getGraphicAttribute("points",!1)}}),F=(t,e,i)=>({from:{points:t.getGraphicAttribute("points",!0)},to:{points:R(t,e)}}),j=(t,e,i)=>t.getGraphicAttribute("points",!1).map(t=>{var r;if(e&&"negative"===e.orient){let e=i.width;return i.group&&(e=null!==(r=i.groupWidth)&&void 0!==r?r:i.group.getBounds().width(),i.groupWidth=e),Object.assign(Object.assign({},t),{x:e,y:t.y,x1:e,y1:t.y1,defined:!1!==t.defined})}return Object.assign(Object.assign({},t),{x:0,y:t.y,x1:0,y1:t.y1,defined:!1!==t.defined})}),Z=(t,e,i)=>({from:{points:j(t,e,i)},to:{points:t.getGraphicAttribute("points",!1)}}),H=(t,e,i)=>({from:{points:t.getGraphicAttribute("points",!0)},to:{points:j(t,e,i)}}),N=(t,e,i)=>t.getGraphicAttribute("points",!1).map(t=>{var r;if(e&&"negative"===e.orient){let e=i.height;return i.group&&(e=null!==(r=i.groupHeight)&&void 0!==r?r:i.group.getBounds().height(),i.groupHeight=e),Object.assign(Object.assign({},t),{x:t.x,y:e,x1:t.x1,y1:e,defined:!1!==t.defined})}return Object.assign(Object.assign({},t),{x:t.x,y:0,x1:t.x1,y1:0,defined:!1!==t.defined})}),z=(t,e,i)=>({from:{points:N(t,e,i)},to:{points:t.getGraphicAttribute("points",!1)}}),V=(t,e,i)=>({from:{points:t.getGraphicAttribute("points",!0)},to:{points:N(t,e,i)}});var U=i(9038);let W=(t,e,i)=>{var r,s;let{offset:n=0,orient:a,direction:o,point:l,excludeChannels:h=[]}=null!=e?e:{},u=0,d=0;"negative"===a&&(i.group?(u=null!==(r=i.groupWidth)&&void 0!==r?r:i.group.getBounds().width(),d=null!==(s=i.groupHeight)&&void 0!==s?s:i.group.getBounds().height(),i.groupWidth=u,i.groupHeight=d):(u=i.width,d=i.height)),u+=n,d+=n;let c=(0,U.Z)(l)?l.call(null,t.getDatum(),t,i):l,p=c&&(0,I.Z)(c.x)?c.x:u,g=c&&(0,I.Z)(c.y)?c.y:d,m=h.includes("x")?t.getGraphicAttribute("x"):t.getFinalAnimationAttribute("x"),f=h.includes("y")?t.getGraphicAttribute("y"):t.getFinalAnimationAttribute("y");switch(o){case"x":return{from:{x:p},to:{x:m}};case"y":return{from:{y:g},to:{y:f}};default:return{from:{x:p,y:g},to:{x:m,y:f}}}},G=(t,e,i)=>{var r,s;let{offset:n=0,orient:a,direction:o,point:l}=null!=e?e:{},h=i.group?i.group.getBounds():null,u=null!==(r=null==h?void 0:h.width())&&void 0!==r?r:i.width,d=null!==(s=null==h?void 0:h.height())&&void 0!==s?s:i.height,c=(0,U.Z)(l)?l.call(null,t.getDatum(),t,i):l,p=c&&(0,I.Z)(c.x)?c.x:("negative"===a?u:0)+n,g=c&&(0,I.Z)(c.y)?c.y:("negative"===a?d:0)+n;switch(o){case"x":return{from:{x:t.getGraphicAttribute("x",!0)},to:{x:p}};case"y":return{from:{y:t.getGraphicAttribute("y",!0)},to:{y:g}};default:return{from:{x:t.getGraphicAttribute("x",!0),y:t.getGraphicAttribute("y",!0)},to:{x:p,y:g}}}},$=(t,e,i)=>{var r,s,n,a;let o=t.getFinalAnimationAttributes();switch(null==e?void 0:e.direction){case"x":return{from:{scaleX:0},to:{scaleX:null!==(r=null==o?void 0:o.scaleX)&&void 0!==r?r:1}};case"y":return{from:{scaleY:0},to:{scaleY:null!==(s=null==o?void 0:o.scaleY)&&void 0!==s?s:1}};default:return{from:{scaleX:0,scaleY:0},to:{scaleX:null!==(n=null==o?void 0:o.scaleX)&&void 0!==n?n:1,scaleY:null!==(a=null==o?void 0:o.scaleY)&&void 0!==a?a:1}}}},X=(t,e,i)=>{var r,s,n,a;switch(null==e?void 0:e.direction){case"x":return{from:{scaleX:null!==(r=t.getGraphicAttribute("scaleX",!0))&&void 0!==r?r:1},to:{scaleX:0}};case"y":return{from:{scaleY:null!==(s=t.getGraphicAttribute("scaleY",!0))&&void 0!==s?s:1},to:{scaleY:0}};default:return{from:{scaleX:null!==(n=t.getGraphicAttribute("scaleX",!0))&&void 0!==n?n:1,scaleY:null!==(a=t.getGraphicAttribute("scaleY",!0))&&void 0!==a?a:1},to:{scaleX:0,scaleY:0}}}};var Y=i(4546),K=i(9730);let q={symbol:["_mo_hide_","visible"]},J=(t,e,i)=>{let r;let s=Object.assign({},t.getPrevGraphicAttributes()),n=Object.assign({},t.getNextGraphicAttributes());e&&(0,Y.IX)(e.excludeChannels).forEach(t=>{delete s[t],delete n[t]}),t.mark&&t.mark.markType&&(r=q[t.mark.markType])&&r.forEach(t=>{delete s[t],delete n[t]}),Object.keys(n).forEach(t=>{(0,K.X)(s[t],n[t])&&(delete s[t],delete n[t])});let a=t.getFinalGraphicAttributes();return Object.keys(s).forEach(t=>{(0,g.Z)(n[t])&&((0,g.Z)(a[t])||(0,K.X)(s[t],a[t])?delete s[t]:n[t]=a[t])}),{from:s,to:n}};var Q=i(5859);let tt=(t,e,i)=>{var r;let s=null!==(r=t.getFinalAnimationAttribute("angle"))&&void 0!==r?r:0,n=0;return{from:{angle:(0,Q.Yt)(s/(2*Math.PI),0)?Math.round(s/(2*Math.PI))*Math.PI*2:(0,I.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(s/(2*Math.PI))*Math.PI*2:Math.floor(s/(2*Math.PI))*Math.PI*2},to:{angle:s}}},te=(t,e,i)=>{var r;let s=null!==(r=t.getGraphicAttribute("angle",!0))&&void 0!==r?r:0,n=0;return n=(0,Q.Yt)(s/(2*Math.PI),0)?Math.round(s/(2*Math.PI))*Math.PI*2:(0,I.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(s/(2*Math.PI))*Math.PI*2:Math.floor(s/(2*Math.PI))*Math.PI*2,{from:{angle:s},to:{angle:n}}};var ti=i(4761);let tr=()=>{ti.F.registerAnimationType("clipIn",h)},ts=()=>{ti.F.registerAnimationType("clipOut",u)},tn=()=>{ti.F.registerAnimationType("fadeIn",d)},ta=()=>{ti.F.registerAnimationType("fadeOut",c)},to=()=>{ti.F.registerAnimationType("growCenterIn",f)},tl=()=>{ti.F.registerAnimationType("growCenterOut",v)},th=()=>{ti.F.registerAnimationType("growHeightIn",b)},tu=()=>{ti.F.registerAnimationType("growHeightOut",x)},td=()=>{ti.F.registerAnimationType("growWidthIn",y)},tc=()=>{ti.F.registerAnimationType("growWidthOut",_)},tp=()=>{ti.F.registerAnimationType("growPointsIn",L)},tg=()=>{ti.F.registerAnimationType("growPointsOut",F)},tm=()=>{ti.F.registerAnimationType("growPointsXIn",Z)},tf=()=>{ti.F.registerAnimationType("growPointsXOut",H)},tv=()=>{ti.F.registerAnimationType("growPointsYIn",z)},ty=()=>{ti.F.registerAnimationType("growPointsYOut",V)},t_=()=>{ti.F.registerAnimationType("growAngleIn",k)},tb=()=>{ti.F.registerAnimationType("growAngleOut",T)},tx=()=>{ti.F.registerAnimationType("growRadiusIn",B)},tS=()=>{ti.F.registerAnimationType("growRadiusOut",P)},tA=()=>{ti.F.registerAnimationType("moveIn",W)},tk=()=>{ti.F.registerAnimationType("moveOut",G)},tw=()=>{ti.F.registerAnimationType("scaleIn",$)},tC=()=>{ti.F.registerAnimationType("scaleOut",X)},tT=()=>{ti.F.registerAnimationType("rotateIn",tt)},tE=()=>{ti.F.registerAnimationType("rotateOut",te)},tM=()=>{ti.F.registerAnimationType("update",J)},tB={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"},state:{duration:300,easing:"linear"}},tD={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:{type:"scaleOut"}},tO={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}},tP=()=>{o.F.registerAnimation("scaleInOut",()=>tD)},tI=()=>{o.F.registerAnimation("fadeInOut",()=>tO)},tR=(t,e)=>({appear:function(t,e){switch(e){case"grow":return a(t);case"fadeIn":return n;default:return s(t)}}(t,e),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined","segments"]}},{channel:["points","segments"],custom:r.fN,duration:tB.update.duration,easing:tB.update.easing,customParameters:{clipRangeByDimension:"horizontal"===t.direction?"y":"x"}}],disappear:{type:"clipOut"}}),tL=()=>{o.F.registerAnimation("line",tR)},tF=()=>{o.F.registerAnimation("area",tR)},tj=()=>{l.Z.useRegisters([tw,tC,tn,ta,tA,tk,tT,tE,tM])},tZ=()=>{l.Z.useRegisters([th,tu,td,tc,to,tl])},tH=()=>{l.Z.useRegisters([tx,tS,t_,tb])},tN=()=>{l.Z.useRegisters([tp,tg,tm,tf,tv,ty,tr,ts])},tz=()=>{l.Z.useRegisters([tp,tg])}},5719:function(t,e,i){"use strict";var r,s;i.d(e,{h:()=>r}),(s=r||(r={})).appear="appear",s.disappear="disappear",s.enter="enter",s.update="update",s.state="state",s.exit="exit",s.normal="normal",s.none="none"},208:function(t,e,i){"use strict";i.d(e,{_8:()=>p,hT:()=>g,sB:()=>_,yx:()=>v});var r=i(9038),s=i(8378),n=i(5669),a=i(4380),o=i(7636),l=i(7623),h=i(645),u=i(4154),d=i(4218);let c=[...Object.keys(a.cE),"normal"];function p(t={},e,i){let r={};for(let s=0;s<c.length;s++){let n,l;let h=c[s],u=e?e[h]:void 0;if(!1!==u){if("normal"===h){u&&(r.normal=u);continue}if("state"===h){!1!==u&&(r.state=null!=u?u:a.cE.state);continue}("update"===h||u||t[h])&&((n=(0,o.Z)(t[h])?t[h]:[Object.assign(Object.assign({},a.cE[h]),t[h])],"exit"===h&&n.forEach(t=>{t.controlOptions={stopWhenStateChange:!0}}),u)?(l=(0,o.Z)(u)?u.map((t,e)=>{var r;let s=t;return y(s)&&delete s.type,s.oneByOne&&(s=m(s,null!==(r=null==i?void 0:i.dataIndex)&&void 0!==r?r:f,null==i?void 0:i.dataCount)),s}):n.map((t,e)=>{var r;let s=(0,d.H)({},n[e],u);return y(s)&&delete s.type,s.oneByOne&&(s=m(s,null!==(r=null==i?void 0:i.dataIndex)&&void 0!==r?r:f,null==i?void 0:i.dataCount)),s}),r[h]=l):r[h]=n)}}return r}function g(t,e,i){var s,n,a,d,c,p;let g={};return(0,l.Z)(e.animationAppear)&&(g.appear=null!==(s=e.animationAppear[t])&&void 0!==s?s:e.animationAppear),(0,l.Z)(e.animationDisappear)&&(g.disappear=null!==(n=e.animationDisappear[t])&&void 0!==n?n:e.animationDisappear),(0,l.Z)(e.animationEnter)&&(g.enter=null!==(a=e.animationEnter[t])&&void 0!==a?a:e.animationEnter),(0,l.Z)(e.animationExit)&&(g.exit=null!==(d=e.animationExit[t])&&void 0!==d?d:e.animationExit),(0,l.Z)(e.animationUpdate)&&(g.update=null!==(c=e.animationUpdate[t])&&void 0!==c?c:e.animationUpdate),(0,l.Z)(e.animationState)&&(g.state=null!==(p=e.animationState[t])&&void 0!==p?p:e.animationState),e.animationNormal&&e.animationNormal[t]&&(g.normal=e.animationNormal[t]),function(t,e){if(!t)return t;let i=["custom","customParameters"];return function t(e,i,r=[]){if((0,o.Z)(e))e.forEach((s,n)=>{e[n]=i(e[n],n),t(e[n],i,r)});else if((0,u.Z)(e))for(let s in e)r.includes(s)||(e[s]=i(e[s],s),t(e[s],i,r))}(t=(0,h.Z)(t,null,i),t=>{var i;return(0,r.Z)(t)&&(null===(i=t.prototype)||void 0===i?void 0:i.constructor)!==t?(...i)=>t(...i,e):t},i),t}(g,i)}function m(t,e,i){let{oneByOne:n,duration:a,delay:o,delayAfter:l}=t;return t.delay=(t,i,l)=>{let h=e(t,l),u=(0,r.Z)(a)?a(t,i,l):(0,s.Z)(a)?a:0,d=(0,r.Z)(o)?o(t,i,l):(0,s.Z)(o)?o:0,c=(0,r.Z)(n)?n(t,i,l):n;return!1===c?d:d+h*(u+(c=!0===c?0:c))},t.delayAfter=(t,o,h)=>{let u=e(t,h),d=(0,r.Z)(a)?a(t,o,h):(0,s.Z)(a)?a:0,c=(0,r.Z)(l)?l(t,o,h):(0,s.Z)(l)?l:0,p=(0,r.Z)(n)?n(t,o,h):n;return!1===p?c:(p=!0===p?0:p,c+((i?i():o.mark.elements.length)-u)*(d+p))},delete t.oneByOne,t}function f(t,e){var i,r;return null!==(i=null==t?void 0:t[n.vM])&&void 0!==i?i:null===(r=null==e?void 0:e.VGRAMMAR_ANIMATION_PARAMETERS)||void 0===r?void 0:r.elementIndex}function v(t,e){var i,r,s,n,a;if(!1===t.animation||!1===(null===(i=t.morph)||void 0===i?void 0:i.enable))return!1;let o=!1!==(null!==(s=null===(r=t.animationAppear)||void 0===r?void 0:r[e])&&void 0!==s?s:t.animationAppear),l=!1!==(null!==(a=null===(n=t.animationUpdate)||void 0===n?void 0:n[e])&&void 0!==a?a:t.animationUpdate);return!(!o||!l)}function y(t){return!(0,l.Z)(t.timeSlices)&&(0,l.Z)(t.channel)}function _(t){var e,i,r,s;let n=t.getSpec();if(!1===n.animation||!(0,l.Z)(t.getRegion().animate))return!1;let a=null!==(e=n.animationThreshold)&&void 0!==e?e:Number.MAX_SAFE_INTEGER;return null===(i=t.getMarks())||void 0===i||i.forEach(t=>{let e=t.getMarkConfig();e&&(e.large&&e.largeThreshold&&(a=Math.min(a,e.largeThreshold)),e.progressiveThreshold&&(a=Math.min(a,e.progressiveThreshold)))}),!((null===(s=null===(r=t.getRawData())||void 0===r?void 0:r.latestData)||void 0===s?void 0:s.length)>=a)}},5507:function(t,e,i){"use strict";i.d(e,{w:()=>p});var r=i(7623),s=i(1601),n=i(7636),a=i(8469),o=i(7602),l=i(1071),h=i(4546);let u=(t,e)=>{var i;let{regionId:s,regionIndex:n}=t.spec;if((0,r.Z)(s)){let t=(0,h.IX)(s);return null===(i=e.region)||void 0===i?void 0:i.filter(({spec:e})=>t.includes(e.id))}if((0,r.Z)(n))return(0,h.IX)(n).map(t=>{var i;return null===(i=e.region)||void 0===i?void 0:i[t]}).filter(r.Z)},d=(t,e)=>{var i;let{seriesId:s,seriesIndex:n}=t.spec;if((0,r.Z)(s)){let t=(0,h.IX)(s);return null===(i=e.series)||void 0===i?void 0:i.filter(({spec:e})=>t.includes(e.id))}if((0,r.Z)(n))return(0,h.IX)(n).map(t=>{var i;return null===(i=e.series)||void 0===i?void 0:i[t]}).filter(r.Z)};var c=i(2096);class p{constructor(t){this._option=t,this.type=t.type,this.seriesType=t.seriesType}initChartSpec(t){return this.transformSpec(t),this.transformModelSpec(t)}transformSpec(t){t.region&&0!==t.region.length||(t.region=[{}]),void 0===t.tooltip&&(t.tooltip={}),(0,r.Z)(t.stackInverse)&&t.region.forEach(e=>{(0,r.Z)(e.stackInverse)||(e.stackInverse=t.stackInverse)}),(0,r.Z)(t.stackSort)&&t.region.forEach(e=>{(0,r.Z)(e.stackSort)||(e.stackSort=t.stackSort)})}generateTransform(t,e){return(i,r,s)=>{let{spec:n,specPath:a,specInfoPath:o,type:h}=r,u=new i.transformerConstructor(Object.assign(Object.assign({},this._option),{type:h})),d=u.transformSpec(n,t,s),c=Object.assign(Object.assign({},r),d);e?c.theme=u.getTheme(n,t):(0,l.Hn)(t,a,d.spec),(0,l.Hn)(s,null!=o?o:a,c)}}transformModelSpec(t){return this.createSpecInfo(t,this.generateTransform(t,!1))}createSpecInfo(t,e){var i,r;e||(e=this.generateTransform(t,!0));let s={};return this.forEachRegionInSpec(t,e,s),this.forEachSeriesInSpec(t,e,s),null===(i=s.series)||void 0===i||i.forEach((t,e)=>{var i,r;let n=(null!==(r=null!==(i=u(t,s))&&void 0!==i?i:s.region)&&void 0!==r?r:[])[0];n&&(n.seriesIndexes||(n.seriesIndexes=[]),n.seriesIndexes.push(e),t.regionIndexes=n.regionIndexes.slice())}),this.forEachComponentInSpec(t,e,s),Object.values(null!==(r=s.component)&&void 0!==r?r:{}).forEach(t=>t.forEach((t,e)=>{var i,r,n;if(t){if(!t.regionIndexes){let e=null!==(r=null!==(i=u(t,s))&&void 0!==i?i:s.region)&&void 0!==r?r:[];t.regionIndexes=e.map(t=>t.regionIndexes[0])}if(!t.seriesIndexes){let e=d(t,s);if(e)t.seriesIndexes=e.map(({seriesIndexes:t})=>t[0]);else{let e=new Set;(null!==(n=t.regionIndexes)&&void 0!==n?n:[]).forEach(t=>{var i,r;let n=null===(i=s.region)||void 0===i?void 0:i[t];null===(r=null==n?void 0:n.seriesIndexes)||void 0===r||r.forEach(t=>e.add(t))}),t.seriesIndexes=Array.from(e)}}}})),s}_isValidSeries(t){return!0}_getDefaultSeriesSpec(t,e,i){var r,s,n,a;let o={dataKey:t.dataKey,hover:t.hover,select:t.select,label:t.label,seriesStyle:t.seriesStyle,animation:null!==(r=t.animation)&&void 0!==r?r:this._option.animation,animationThreshold:null!==(s=t.animationThreshold)&&void 0!==s?s:null===(a=(n=this._option).getTheme)||void 0===a?void 0:a.call(n).animationThreshold,animationAppear:t.animationAppear,animationDisappear:t.animationDisappear,animationEnter:t.animationEnter,animationUpdate:t.animationUpdate,animationExit:t.animationExit,animationNormal:t.animationNormal,animationState:t.animationState,extensionMark:t.extensionMark,large:t.large,largeThreshold:t.largeThreshold,progressiveStep:t.progressiveStep,progressiveThreshold:t.progressiveThreshold,background:t.seriesBackground,invalidType:t.invalidType,seriesField:t.seriesField,morph:t.morph,interactions:t.interactions},l=this.seriesType;return l&&(o.type=l,o[l]=t[l]),e&&e.length&&e.forEach(e=>{o[e]=t[e]}),i&&i.length&&i.forEach(e=>{o[e]=t[e]}),o}forEachRegionInSpec(t,e,i){var r;return(null!==(r=t.region)&&void 0!==r?r:[]).map((t,r)=>e(a.F.getRegionInType("region"),{spec:t,specPath:["region",r],type:"region",regionIndexes:[r]},i))}forEachSeriesInSpec(t,e,i){var r;return(null!==(r=t.series)&&void 0!==r?r:[]).map((t,r)=>e(a.F.getSeriesInType(t.type),{spec:t,specPath:["series",r],type:t.type,seriesIndexes:[r]},i))}forEachComponentInSpec(t,e,i){var r,s,n;let l,h,u,d;let p=[],g=a.F.getComponents(),m=[];for(let e=0;e<g.length;e++){let{cmp:i,alwaysCheck:s}=g[e];i.type.startsWith(o.L.cartesianAxis)?l=i:i.type.startsWith(o.L.polarAxis)?h=i:i.type===o.L.geoCoordinate?u=i:(s||t[null!==(r=i.specKey)&&void 0!==r?r:i.type])&&(i.type===o.L.tooltip?d=i:m.push(i))}let f=!1;if(l){let r=l.getSpecInfo(t,i);(null==r?void 0:r.length)>0&&(f=!0,r.forEach(t=>{let r=a.F.getComponentInKey(t.type);p.push(e(r,t,i))}))}if(h&&!f){let r=h.getSpecInfo(t,i);(null==r?void 0:r.length)>0&&(f=!0,r.forEach(t=>{let r=a.F.getComponentInKey(t.type);p.push(e(r,t,i))}))}return u&&!f&&(null===(s=u.getSpecInfo(t,i))||void 0===s||s.forEach(t=>{p.push(e(u,t,i))})),m.forEach(r=>{var s;null===(s=r.getSpecInfo?r.getSpecInfo(t,i):(0,c.ts)(t,r.specKey,r.type))||void 0===s||s.forEach(t=>{p.push(e(r,t,i))})}),d&&(null===(n=(0,c.ts)(t,d.specKey,d.type))||void 0===n||n.forEach(t=>{p.push(e(d,t,i))})),p}transformSeriesSpec(t){let e=this._getDefaultSeriesSpec(t);t.series&&0!==t.series.length?t.series.forEach(t=>{this._isValidSeries(t.type)&&Object.keys(e).forEach(i=>{i in t||(t[i]=e[i])})}):t.series=[e]}_findBandAxisBySeries(t,e,i){let s="horizontal"===(null==t?void 0:t.direction)?["left","right"]:["top","bottom"];return i.find(i=>!!s.includes(i.orient)&&((0,r.Z)(i.seriesId)?(0,h.IX)(i.seriesId).includes(null==t?void 0:t.id):(0,r.Z)(i.seriesIndex)?(0,h.IX)(i.seriesIndex).includes(e):i.type,!0))}_applyAxisBandSize(t,e,i){let{barMaxWidth:r,barMinWidth:a,barWidth:o,barGapInGroup:l}=i,h=!1;(0,s.Z)(a)?(t.minBandSize=a,h=!0):(0,s.Z)(o)?(t.minBandSize=o,h=!0):(0,s.Z)(r)&&(t.minBandSize=r,h=!0),h&&(t.bandSizeLevel=Number.MAX_VALUE,t.bandSizeExtend={extend:e,gap:(0,n.Z)(l)?l[l.length-1]:l})}}},5839:function(t,e,i){"use strict";i.d(e,{P:()=>j});var r=i(4546),s=i(6338),n=i(2990),a=i(5205);class o{get dataList(){return this._dataArr}constructor(t){this._dataArr=[],this._dataSet=t}parseData(t){this._dataArr=[];let e=(0,r.IX)(t);for(let t=0;t<e.length;t++)this._dataArr.push((0,n.J3)(e[t],this._dataSet,this._dataArr))}updateData(t,e=!1,i=!0){let s=(0,r.IX)(t);return(!e||s.length===this._dataArr.length)&&(this._dataValueForEach(s,(t,e)=>{e.markRunning()}),this._dataValueForEach(s,(t,e)=>{(0,n.kk)(e,t,i)}),!0)}_dataValueForEach(t,e){t.forEach((t,i)=>{if(t instanceof s.VO)return;let r=this.getSeriesData(t.id,i);r&&e(t,r,i)})}getSeriesData(t,e){if(!this._dataArr.length)return null;if("string"==typeof t){let e=this._dataArr.filter(e=>e.name===t);if(e[0])return e[0];(0,a.ZK)(`no data matches dataId ${t}!`)}if("number"==typeof e){if(this._dataArr[e])return this._dataArr[e];(0,a.ZK)(`no data matches dataIndex ${e}!`)}return this._dataArr[0]}}var l=i(7636),h=i(9730),u=i(6082),d=i(1121),c=i(5173),p=i(8118),g=i(6948),m=i(9478);class f{constructor(t,e){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=t=>{let e=[];return this._scaleSpecMap.forEach((i,r)=>{(0,g.S5)(i.domain)&&i.domain.forEach(r=>{r.dataId===t&&r.fields.forEach(t=>{(0,m.kL)(e,[{key:t,operations:(0,c.z2)(i.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((i,r)=>{let s=this.getScale(r);i.forEach(i=>{this._getSeriesBySeriesId(i.seriesId).getRawData().name===t&&i.field&&(0,m.kL)(e,[{key:i.field,operations:(0,c.z2)(s.type)?["max","min"]:["values"]}])})}),e},this._spec=t,this._chart=e,this._setAttrFromSpec()}_createFromSpec(t){if(!t.id)return null;let e=this._scaleMap.get(t.id);return e||(e="ordinal"===t.type&&"color"===t.id?(0,p.Mo)("colorOrdinal"):(0,p.Mo)(t.type)),e?((0,l.Z)(t.range)&&e.range(t.range),(0,l.Z)(t.domain)&&((0,g.S5)(t.domain)||e.domain(t.domain)),t.specified&&e.specified&&e.specified(t.specified),t.clamp&&e.clamp&&e.clamp(t.clamp),e):null}_setAttrFromSpec(){var t;if(!(null===(t=this._spec)||void 0===t?void 0:t.length))return;let e=new Map,i=new Map;this._spec.forEach(t=>{let r=this._createFromSpec(t);r&&(e.set(t.id,r),i.set(t.id,t))}),this._modelScaleSpecMap.forEach(t=>{let r=this._createFromSpec(t);r&&(e.set(t.id,r),i.set(t.id,t))}),this._scaleSpecMap=i,this._scaleMap=e}updateSpec(t){let e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if((0,h.X)(t,this._spec))return e;e.change=!0;for(let i=0;i<t.length;i++){let r=t[i],s=this._scaleMap.get(r.id);if(!s)return e.reMake=!0,e;let n=this._spec.find(t=>t.id===r.id);if(!n.id||n.type!==r.type||!(0,h.X)(n.specified,r.specified))return e.reMake=!0,e;r.range&&!(0,h.X)(r.range,s.range())&&(s.range(r.range),e.reRender=!0),(0,g.S5)(r.domain)?e.reRender=!0:(0,h.X)(r.domain,s.domain())||(s.domain(r.domain),e.reRender=!0),this._scaleSpecMap.set(r.id,r)}return this._spec=t,e}registerModelScale(t){let e=this._createFromSpec(t);e&&(this._modelScaleSpecMap.set(t.id,t),this._scaleSpecMap.set(t.id,t),this._scaleMap.set(t.id,e))}removeModelScale(t){this._modelScaleSpecMap.forEach(e=>{t(e)&&(this._modelScaleSpecMap.delete(e.id),this._scaleSpecMap.delete(e.id),this._scaleMap.delete(e.id))})}getScale(t){return this._scaleMap.get(t)}getScaleSpec(t){return this._scaleSpecMap.get(t)}_getSeriesByRawDataId(t){let e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){let r=e[i];if(r.getRawData().name===t)return r}return null}_getSeriesBySeriesId(t){let e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){let r=e[i];if(r.id===t)return r}return null}updateScaleDomain(t){this._scaleSpecMap.forEach((e,i)=>{let r;let s=this._scaleMap.get(i);if(!s)return;if(!(0,g.S5)(e.domain))return e.domain&&0!==e.domain.length||s.domain(t),void this._updateMarkScale(i,s,s.domain().slice());r=(0,c.z2)(e.type)?[null,null]:new Set,e.domain.forEach(t=>{let i=this._getSeriesByRawDataId(t.dataId);if(!i)return;let s=(0,c.z2)(e.type);t.fields.forEach(t=>{let e=i.getRawDataStatisticsByField(t,s);e&&(s?((0,u.Z)(r[0])?r[0]=e.min:r[0]=Math.min(e.min,r[0]),(0,u.Z)(r[1])?r[1]=e.max:r[1]=Math.max(e.max,r[1])):e.values.forEach(t=>{r.add(t)}))})});let n=r;(0,c.z2)(e.type)||(r=Array.from(r)),s.domain(r),this._updateMarkScale(i,s,n)})}_updateMarkScale(t,e,i){let r=this._markAttributeScaleMap.get(t);r&&0!==r.length&&r.forEach(t=>{if(!t.field||!t.markScale||t.markScale===e)return;if((0,u.Z)(t.changeDomain)||"none"===t.changeDomain||(0,u.Z)(t.seriesId))return void((0,c.z2)(e.type)?t.markScale.domain(i):e.domain(Array.from(i)));let r=this._getSeriesBySeriesId(t.seriesId),s=(0,c.z2)(e.type),n=r.getRawDataStatisticsByField(t.field,s);if(!(0,d.Z)(n))return"expand"===t.changeDomain?(s?(i[0]=Math.min(i[0],n.min),i[1]=Math.max(i[1],n.max)):(n.values.forEach(t=>{i.add(t)}),i=Array.from(i)),void t.markScale.domain(i)):void("replace"!==t.changeDomain||(s?t.markScale.domain([n.min,n.max]):t.markScale.domain(n.values)));(0,c.z2)(e.type)?t.markScale.domain(i):e.domain(Array.from(i))})}registerMarkAttributeScale(t,e){let i=this._scaleMap.get(t.scale),r=this._markAttributeScaleMap.get(t.scale);r||(r=[],this._markAttributeScaleMap.set(t.scale,r));let s=i;return!(0,u.Z)(t.field)&&((0,u.Z)(t.changeDomain)||"none"===t.changeDomain||(0,u.Z)(e))||(s=i.clone()),r.push(Object.assign(Object.assign({},t),{seriesId:e,markScale:s})),s}}var v=i(7602),y=i(8469),_=i(4277),b=i(9013),x=i(7623),S=i(1960),A=i(4798),k=i(2550),w=i(3685),C=i(9198),T=i(9904),E=i(9038),M=i(4370),B=i(9567),D=i(5208),O=i(3722),P=i(2698),I=i(2687),R=i(6979),L=i(6542),F=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class j extends B.H{getSpec(){return this._spec}setSpec(t){this._spec=t}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(t,e,i=!0){this._layoutTag=t;let r=this.getCompiler();return(null==r?void 0:r.getVGrammarView())&&(r.getVGrammarView().updateLayoutTag(),t&&i&&r.renderNextTick(e)),this._layoutTag}getGlobalScale(){return this._globalScale}getEvent(){return this._event}get chartData(){return this._chartData}constructor(t,e){var i,s,n;super(e),this.type="chart",this.id=(0,b.a)(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:w.rV,height:w.b},this._viewRect={width:w.rV,height:w.b},this._viewBox={x1:0,y1:0,x2:w.rV,y2:w.b},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var t;return null!==(t=this._series)&&void 0!==t?t:[]},this.getRegionsInIndex=t=>t&&0!==t.length?this._regions.filter((e,i)=>t.includes(i)):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=t=>t?this._regions.filter(e=>t.includes(e.id)):[],this.getRegionsInQuerier=t=>t?this._regions.filter((e,i)=>(0,r.IX)(t).some(t=>(0,x.Z)(t.regionId)&&t.regionId===e.userId||t.regionIndex===i)):this._regions,this.getRegionsInUserId=t=>{if(t)return this._regions.find(e=>e.userId===t)},this.getRegionsInUserIdOrIndex=(t,e)=>this.getAllRegions().filter(i=>(null==t?void 0:t.length)?i.userId&&t.includes(i.userId):!(null==e?void 0:e.length)||e.includes(i.getSpecIndex())),this.getComponents=()=>this._components,this.getSeriesInIndex=t=>t&&0!==t.length?this._series.filter((e,i)=>t.includes(i)):[this._series[0]],this.getSeriesInIds=t=>t?this._series.filter(e=>t.includes(e.id)):[],this.getSeriesInUserId=t=>{if(t)return this._series.find(e=>e.userId===t)},this.getSeriesInUserIdOrIndex=(t,e)=>this.getAllSeries().filter(i=>(null==t?void 0:t.length)?i.userId&&t.includes(i.userId):!(null==e?void 0:e.length)||e.includes(i.getSpecIndex())),this.getComponentByIndex=(t,e)=>{let i=this._components.filter(e=>(e.specKey||e.type)===t);if(i&&0!==i.length)return i[e]},this.getComponentsByKey=t=>this._components.filter(e=>(e.specKey||e.type)===t),this.getComponentByUserId=t=>{let e=this._components.find(e=>e.userId===t);if(e)return e},this.getComponentsByType=t=>this._components.filter(e=>e.type===t),this._paddingSpec=(0,S.Ek)(null!==(i=t.padding)&&void 0!==i?i:e.getTheme().padding),this._event=new _.j(e.eventDispatcher,e.mode),this._dataSet=e.dataSet,this._chartData=new o(this._dataSet),this._modelOption=Object.assign(Object.assign({},e),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:null===(s=this._option)||void 0===s?void 0:s.onError,disableTriggerEvent:!0===(null===(n=this._option)||void 0===n?void 0:n.disableTriggerEvent),getSeriesData:this._chartData.getSeriesData.bind(this._chartData)}),this._spec=t}created(t){this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),t.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),t.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),t.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}init(){var t,e;null===(t=this._beforeInit)||void 0===t||t.call(this),this._regions.forEach(t=>t.init({})),this._series.forEach(t=>t.init({})),this._components.forEach(t=>t.init({dataSet:this._dataSet})),this._initEvent(),null===(e=this._initStack)||void 0===e||e.call(this),this.reDataFlow()}reDataFlow(){this._series.forEach(t=>{var e;return null===(e=t.getRawData())||void 0===e?void 0:e.markRunning()}),this._series.forEach(t=>t.fillData()),this.updateGlobalScaleDomain()}onResize(t,e,i=!0){this._canvasRect={width:t,height:e},this._updateLayoutRect(this._option.viewBox),this.setLayoutTag(!0,null,i)}updateViewBox(t,e){this._option.viewBox=t,this._updateLayoutRect(t),this.setLayoutTag(!0,null,e)}_createBackground(){let t=this._spec.background;if(!t||"object"!=typeof t||(0,x.Z)(t.gradient))return;let e=(0,C.Z)(t,["x","y","width","height","x1","y1","image"]);e.background=t.image,this._backgroundMark=y.F.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},e),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1})),this._backgroundMark.setMarkConfig({zIndex:L.Ai.SeriesGroup-2})}_createRegion(t,e){if(!t)return;let{spec:i}=e,r=F(e,["spec"]),s=new t(i,Object.assign(Object.assign({},this._modelOption),r));s&&(s.created(),this._regions.push(s))}_createSeries(t,e){let i;if(!t)return;let{spec:r}=e,s=F(e,["spec"]);if((0,x.Z)(r.regionId)?i=this.getRegionsInUserId(r.regionId):(0,x.Z)(r.regionIndex)&&(i=this.getRegionsInIndex([r.regionIndex])[0]),!i&&!(i=this._regions[0]))return;let n=new t(r,Object.assign(Object.assign(Object.assign({},this._modelOption),s),{type:r.type,region:i,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));n&&(n.created(),this._series.push(n),i.addSeries(n))}getSeriesById(t){return this._series.find(e=>e.id===t)}_createComponent(t,e){let i=t.createComponent(e,Object.assign(Object.assign({},this._modelOption),{type:t.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey,getComponentsByType:this.getComponentsByType}));i&&(i.created(),this._components.push(i))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(t){if((0,T.Z)(t))return this.getAllModels().find(e=>e.userId===t);if((0,E.Z)(t))return this.getAllModels().find(e=>t(e));let e=0;return this.getAllModels().find(i=>{var r;if((null!==(r=i.specKey)&&void 0!==r?r:i.type)===t.type){if(e===t.index)return!0;e++}return!1})}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(t){this._option.layout=t,this._initLayoutFunc()}_initLayoutFunc(){var t,e,i;if(this._layoutFunc=this._option.layout,!this._layoutFunc){let r=!1;(this._spec.zField||this._spec.series&&this._spec.series.some(t=>t.zField))&&(r=!0);let s=y.F.getLayoutInKey(null!==(e=null===(t=this._spec.layout)||void 0===t?void 0:t.type)&&void 0!==e?e:r?"layout3d":"base");if(s){let t=new s(this._spec.layout,{onError:null===(i=this._option)||void 0===i?void 0:i.onError});this._layoutFunc=t.layoutItems.bind(t)}}}layout(t){var e,i,r,s;if(null===(i=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeLayoutWithSceneGraph)||void 0===i||i.call(e),this.getLayoutTag()){this._event.emit(O.$7.layoutStart,{chart:this,vchart:this._option.globalInstance}),this.onLayoutStart(t);let e=this.getLayoutElements();this._layoutFunc(this,e,this._layoutRect,this._viewBox),this._event.emit(O.$7.afterLayout,{elements:e,chart:this}),this.setLayoutTag(!1),this.onLayoutEnd(t),this._event.emit(O.$7.layoutEnd,{chart:this,vchart:this._option.globalInstance})}null===(s=null===(r=this._option.performanceHook)||void 0===r?void 0:r.afterLayoutWithSceneGraph)||void 0===s||s.call(r)}onLayoutStart(t){this.getAllModels().forEach(e=>e.onLayoutStart(this._layoutRect,this._viewRect,t))}onLayoutEnd(t){this.getAllModels().forEach(e=>{"series"!==e.modelType&&e.onLayoutEnd(t)})}onEvaluateEnd(t){[...this._components,...this._regions,...this._series].forEach(e=>e.onEvaluateEnd(t))}getLayoutElements(){return this.getAllModels().map(t=>t.layout).filter(t=>!!t)}getModelById(t){let e=this._idMap.get(t);if(e&&e instanceof A.g)return e}getModelByUserId(t){let e=this.getSeriesInUserId(t);if(e)return e;let i=this.getRegionsInUserId(t);return i||this.getComponentByUserId(t)||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter(t=>t&&t instanceof k.c)}getMarkById(t){let e=this._idMap.get(t);if(e&&e instanceof k.c)return e}getMarkByUserName(t){return this.getAllMarks().filter(e=>e.name&&e.name===t)}updateData(t,e,i=!0,r){let s=this._dataSet.getDataView(t);s&&(s.markRunning(),s.parseNewData(e,r)),i&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(t=>t.onDataUpdate())}updateFullData(t,e=!0){(0,r.IX)(t).forEach(t=>{let e=this._dataSet.getDataView(t.id);e&&e.markRunning()}),(0,r.IX)(t).forEach(t=>{let e=this._dataSet.getDataView(t.id);e&&(0,n.kk)(e,t,!0)}),e&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(t=>t.onDataUpdate())}onRender(t){}setCanvasRect(t,e){this._canvasRect={width:t,height:e}}getCanvasRect(){return this._canvasRect||(this._canvasRect=(0,R.hK)(this._spec,this._option,{width:w.rV,height:w.b})),this._canvasRect}getSeriesData(t,e){return this._chartData.getSeriesData(t,e)}_transformSpecScale(){var t;let e=this._spec.scales?[...this._spec.scales]:[],i=e.find(t=>"color"===t.id),r=this.getColorScheme();if(!i&&(i={type:"ordinal",id:"color",domain:null,range:null},e.push(i),this._spec.color)){let t=this._spec.color;(0,l.Z)(t)?i.range=t:(Object.prototype.hasOwnProperty.call(t,"type")&&(i.type=t.type),Object.prototype.hasOwnProperty.call(t,"domain")&&(i.domain=t.domain),Object.prototype.hasOwnProperty.call(t,"range")&&(i.range=t.range),Object.prototype.hasOwnProperty.call(t,"specified")&&(i.specified=t.specified),Object.prototype.hasOwnProperty.call(t,"clamp")&&(i.clamp=t.clamp))}return(null===(t=i.range)||void 0===t?void 0:t.length)||(i.range=(0,M.wW)(r),i.rangeTheme=!0),e}_createGlobalScale(){this._globalScale=new f(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){let t=new Set;this._series.forEach(e=>{let i=e.getSeriesKeys();i&&i.forEach(e=>t.add(e))});let e=Array.from(t);this._globalScale.updateScaleDomain(e)}updateGlobalScale(t){(0,R.eo)(t,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){let t=this._globalScale.getScaleSpec("color"),e=this.getColorScheme();t.rangeTheme&&(t.range=(0,M.wW)(e),this._globalScale.getScale("color").range(t.range))}_getSpecKeys(t){let e={width:!0,height:!0};return Object.keys(t).filter(t=>!e[t]).sort()}updateSpec(t){let e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),t.type!==this.type)return e.reMake=!0,e;let i=this._getSpecKeys(this._spec),s=this._getSpecKeys(t);if(!(0,h.X)(i,s))return e.reMake=!0,e;for(let s=0;s<i.length;s++){let n=i[s];if((0,l.Z)(this._spec[n])&&this._spec[n].length!==(0,r.IX)(t[n]).length)return e.reMake=!0,e}let n=this._spec;return this._spec=t,this.updateChartConfig(e,n),e.reMake||(this.updateGlobalScale(e),e.reMake||(this.updateRegionSpec(e),e.reMake||(this.updateComponentSpec(e),e.reMake||(this.updateSeriesSpec(e),e.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain()))))),e}updateChartConfig(t,e){var i,r;this._paddingSpec=(0,S.Ek)(null!==(i=this._spec.padding)&&void 0!==i?i:null===(r=this._option)||void 0===r?void 0:r.getTheme().padding),this._updateLayoutRect(this._viewBox)}updateDataSpec(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(t){var e;(null===(e=this._spec)||void 0===e?void 0:e.region)&&(this._spec.region.length===this._regions.length?this._regions.forEach(e=>{(0,R.eo)(t,e.updateSpec(this._spec.region[e.getSpecIndex()]))}):t.reMake=!0)}updateComponentSpec(t){let e={},i={[v.L.title]:!0,[v.L.brush]:!0,[v.L.mapLabel]:!0,[v.L.indicator]:!0};for(let r in this._components.forEach(r=>{var s,n;if(r.type===v.L.label||r.type===v.L.totalLabel)return;i[r.type]&&(i[r.type]=!1);let a=r.specKey||r.type,o=null!==(s=this._spec[a])&&void 0!==s?s:{};(0,l.Z)(o)?(e[a]=e[a]||{specCount:o.length,componentCount:0},e[a].componentCount++,(0,R.eo)(t,r.updateSpec(null!==(n=o[r.getSpecIndex()])&&void 0!==n?n:{},o))):(0,R.eo)(t,r.updateSpec(o))}),e)if(Object.prototype.hasOwnProperty.call(e,r)){let i=e[r];i.componentCount!==i.specCount&&(t.reMake=!0)}let r=t=>t&&!1!==t.visible;Object.keys(i).forEach(e=>{if(i[e]){let i=this._spec[e];((0,l.Z)(i)?i.some(r):r(i))&&(t.reMake=!0)}})}updateSeriesSpec(t){this._spec.series.length===this._series.length?this._series.forEach(e=>{let i=this._spec.series[e.getSpecIndex()];(0,R.eo)(t,e.updateSpec(i))}):t.reMake=!0}getCanvas(){var t,e;return null!==(e=null===(t=this.getCompiler())||void 0===t?void 0:t.getCanvas())&&void 0!==e?e:null}_updateLayoutRect(t){let e=this.getCanvasRect();if(t){this._viewBox=t;let{x1:i=0,y1:r=0,x2:s,y2:n}=t;e={width:s-i,height:n-r}}else this._viewBox={x1:0,y1:0,x2:e.width,y2:e.height};this._viewRect=e,this.padding=(0,S.qY)(this._paddingSpec,e,e),this._layoutRect.width=e.width-this.padding.left-this.padding.right,this._layoutRect.height=e.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(O.$7.layoutRectUpdate,{chart:this})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()}reInit(){[...this._regions,...this._series,...this._components].forEach(t=>{let e=t.getSpecInfo();e&&e.spec&&t.reInit(e.spec)})}clear(){this.getAllModels().forEach(t=>{var e;return null===(e=t.clear)||void 0===e?void 0:e.call(t)})}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach(t=>{var e;null===(e=t.afterCompile)||void 0===e||e.call(t)}),this.getAllSeries().forEach(t=>{var e;null===(e=t.afterCompile)||void 0===e||e.call(t)}),this.getAllComponents().forEach(t=>{var e;null===(e=t.afterCompile)||void 0===e||e.call(t)})}compileLayout(){let{width:t,height:e}=this.getCanvasRect();this.getCompiler().setSize(t,e)}compileBackground(){var t;this._backgroundMark&&(this._backgroundMark.compile({context:{model:this}}),null===(t=this._backgroundMark.getProduct())||void 0===t||t.layout(()=>{}))}compileRegions(){var t,e,i,r;null===(e=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeRegionCompile)||void 0===e||e.call(t),this.getAllRegions().forEach(t=>{t.compile()}),null===(r=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterRegionCompile)||void 0===r||r.call(i)}compileSeries(){var t,e,i,r;null===(e=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeSeriesCompile)||void 0===e||e.call(t),this.getAllSeries().forEach(t=>{t.compile()}),null===(r=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterSeriesCompile)||void 0===r||r.call(i)}compileComponents(){var t,e,i,r;null===(e=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeComponentCompile)||void 0===e||e.call(t),this.getAllComponents().forEach(t=>{t.compile()}),null===(r=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterComponentCompile)||void 0===r||r.call(i)}release(){[...this._components,...this._regions,...this._series].forEach(t=>{t.beforeRelease()}),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach(t=>{t.release()}),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(t){let e=t.rootMark;this.layout({group:e,srView:t})}updateState(t,e){let i=this.getAllSeries();for(let r in t){if((0,d.Z)(t[r]))continue;let s=t[r],n={stateValue:r};n=(0,E.Z)(s.filter)?Object.assign({filter:s.filter},n):Object.assign(Object.assign({},s.filter),n),s.level&&(n.level=s.level),i.forEach(t=>{t.getMarks().forEach(i=>{i.stateStyle[r]&&(e&&!e(t,i,r)||(i.state.changeStateInfo(n),i.updateMarkState(r)))})})}}setSelected(t,e,i){this._setStateInDatum(D.q.STATE_SELECTED,!0,t,e,i)}setHovered(t,e,i){this._setStateInDatum(D.q.STATE_HOVER,!0,t,e,i)}clearState(t){this.getAllRegions().forEach(e=>{e.interaction.clearEventElement(t,!0),e.interaction.resetInteraction(t,null)})}clearAllStates(){this.getAllRegions().forEach(t=>{t.interaction.clearAllEventElement(),t.interaction.resetAllInteraction()})}clearSelected(){this.clearState(D.q.STATE_SELECTED)}clearHovered(){this.clearState(D.q.STATE_HOVER)}_initEvent(){[O.$7.dataZoomChange,O.$7.scrollBarChange].forEach(t=>{this._event.on(t,({value:t})=>{this._disableMarkAnimation(["exit","update"]);let e=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off(P.ZK.AFTER_MARK_RENDER_END,e)};this._event.on(P.ZK.AFTER_MARK_RENDER_END,e)})})}_enableMarkAnimation(t){this.getAllMarks().forEach(e=>{let i=e.getProduct();i&&i.animate&&i.animate.enableAnimationState(t)})}_disableMarkAnimation(t){this.getAllMarks().forEach(e=>{let i=e.getProduct();i&&i.animate&&i.animate.disableAnimationState(t)})}_setStateInDatum(t,e,i,s,n){let a=(i=i?(0,r.IX)(i):null)?Object.keys(i[0]):null;this.getRegionsInQuerier(n).forEach(r=>{i?(r.getSeries().forEach(e=>{e.getMarks().forEach(n=>{if(n.getProduct()&&(!s||(0,E.Z)(s)&&s(e,n))){let e=n.getProduct().isCollectionMark(),s=n.getProduct().elements,o=[];if(e)o=s.filter(t=>{let e=t.getDatum();i.every((t,i)=>a.every(r=>t[r]==e[i][r]))});else if(i.length>1){let t=i.slice();o=s.filter(e=>{if(0===t.length)return!1;let i=e.getDatum(),r=t.findIndex(t=>a.every(e=>t[e]==i[e]));return r>=0&&(t.splice(r,1),!0)})}else{let t=s.find(t=>a.every(e=>i[0][e]==t.getDatum()[e]));t&&(o=[t])}o.forEach(e=>{r.interaction.startInteraction(t,e)})}})}),e&&r.interaction.reverseEventElement(t)):r.interaction.clearEventElement(t,!0)})}setDimensionIndex(t,e){var i;let r=null;Array.from(this._event.getComposedEventMap().values()).forEach(i=>{let{eventType:s,event:n}=i;if(s===I.C.dimensionHover||s===I.C.dimensionClick){let i=n.dispatch(t,e);(null==i?void 0:i.length)&&(r=i)}});let s=(0,u.Z)(t)||!r||r.every(t=>(0,c.lK)(t.axis.getScale().type)&&(0,u.Z)(t.index));if(!1!==e.tooltip){let t=this.getComponentsByType(v.L.tooltip)[0];if(null==t?void 0:t.getVisible()){if(s)null===(i=t.hideTooltip)||void 0===i||i.call(t);else{let i={};r.forEach(t=>{let{axis:e,value:r,data:s}=t,n="left"===e.getOrient()||"right"===e.getOrient();s.forEach(t=>{var e,s,a;let o=n?t.series.fieldY[0]:t.series.fieldX[0];i[o]=null!==(a=null===(s=null===(e=t.datum)||void 0===e?void 0:e[0])||void 0===s?void 0:s[o])&&void 0!==a?a:r})}),t.showTooltip(i,e.showTooltipOption)}}}if(!1!==e.crosshair){let t=this.getComponentsByType(v.L.cartesianCrosshair)[0];t&&t.clearAxisValue&&t.setAxisValue&&(s?t.hideCrosshair():t.showCrosshair(r))}}getColorScheme(){var t,e;return null===(e=(t=this._option).getTheme)||void 0===e?void 0:e.call(t).colorScheme}}},666:function(t,e,i){"use strict";i.d(e,{I:()=>l});var r=i(6082),s=i(1130),n=i(5507),a=i(6979),o=i(4218);class l extends n.w{needAxes(){return!0}_isValidSeries(t){return!this.seriesType||t===this.seriesType}_getDefaultSeriesSpec(t,e){return super._getDefaultSeriesSpec(t,["xField","yField","zField","direction","stack","percent","stackOffsetSilhouette","totalLabel","sortDataByAxis"],e)}transformSpec(t){super.transformSpec(t),super.transformSeriesSpec(t),this._transformAxisSpec(t)}_setDefaultXAxisSpec(t){return{orient:"bottom"}}_setDefaultYAxisSpec(t){return{orient:"left"}}_setDefaultZAxisSpec(t){return{orient:"z"}}_transformAxisSpec(t){if(this.needAxes()){t.axes||(t.axes=[]);let e={x:!1,y:!1,z:!1};t.axes.forEach(i=>{let{orient:n}=i,l=null;"top"!==n&&"bottom"!==n||(e.x=!0,l=this._setDefaultXAxisSpec(t)),"left"!==n&&"right"!==n||(e.y=!0,l=this._setDefaultYAxisSpec(t)),"z"===n&&(e.z=!0,l=this._setDefaultZAxisSpec(t)),l&&Object.keys(l).forEach(t=>{(0,r.Z)(i[t])&&(i[t]=l[t])}),(0,s.Z)(i,"trimPadding")&&(0,o.H)(i,(0,a.Sh)(this.type,t))}),e.x||t.axes.push(this._setDefaultXAxisSpec(t)),e.y||t.axes.push(this._setDefaultYAxisSpec(t)),t.zField&&!e.z&&t.axes.push(this._setDefaultZAxisSpec(t))}}}},4224:function(t,e,i){"use strict";i.d(e,{T:()=>h});var r=i(3722),s=i(9478),n=i(6358),a=i(6082);let o=(t,e)=>{let i={nodes:{}},{fields:r}=e;if(!(null==r?void 0:r.length))return i;let s=r.length-1,n,o=i;return t.forEach(t=>{t.latestData&&t.latestData.forEach(t=>{o=i;for(let e=0;e<r.length;e++){let i=r[e],l=t[i];if((0,a.Z)(l))break;o.groupField=i,o.nodes[l]||(e===s?o.nodes[l]={values:[]}:(n={nodes:{}},o.nodes[l]=n)),e===s?o.nodes[l].values.push(t):o=o.nodes[l]}})}),i};class l{constructor(t,e){this.stackRegion=({model:t})=>{var e;let i=t.getSeries();if(!i.some(t=>t.getStack()))return;let r=i.some(t=>{var e,i;return null===(i=null===(e=t.getSpec())||void 0===e?void 0:e.totalLabel)||void 0===i?void 0:i.visible}),n=r||i.some(t=>t.getPercent()),a=i.some(t=>t.getStackOffsetSilhouette()),o=(0,s.oW)(t,!0);for(let e in o)for(let i in o[e].nodes)(0,s.kn)(o[e].nodes[i],t.getStackInverse(),n,r);if(a)for(let t in o)for(let e in o[t].nodes)(0,s.Ku)(o[t].nodes[e]);r&&t.getSeries().forEach(t=>{let e=t.getStackData(),i=t.getStackValue(),r=t.getStackValueField();e&&r&&(0,s.Q3)(o[i],r)}),(null===(e=this._options)||void 0===e?void 0:e.afterStackRegion)&&this._options.afterStackRegion(t,o)},this._chart=t,this._options=e}init(){this._chart.getAllRegions().forEach(t=>{t.event.on(r.$7.regionSeriesDataFilterOver,{filter:({model:e})=>(null==e?void 0:e.id)===t.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(t=>{this.stackRegion({model:t})})}}class h{_beforeInit(){this._dataSet&&(0,n.U)(this._dataSet,"stackSplit",o)}_initStack(){this._stack=new l(this),this._stack.init()}}},6979:function(t,e,i){"use strict";i.d(e,{R2:()=>u,Sh:()=>p,eo:()=>c,hK:()=>d});var r=i(1725),s=i(9904),n=i(4546),a=i(7623),o=i(7631),l=i(4218),h=i(8612);function u(t){t.crosshair=(0,n.IX)(t.crosshair||{}).map(e=>(0,l.H)({["horizontal"===t.direction?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},e))}function d(t,e,i){var n;let{width:l,height:u}=t;if((0,a.Z)(l)&&(0,a.Z)(u))return{width:l,height:u};let d=i.width,c=i.height,p=e.container,g=e.canvas;if(p){let{width:t,height:e}=(0,r.Op)(p,i.width,i.height);d=t,c=e}else if(g&&(0,o.qe)(e.mode)){let t;t=(0,s.Z)(g)?h.rF.getElementById(g):g;let{width:e,height:n}=(0,r.Op)(t,i.width,i.height);d=e,c=n}else if((0,o.Oy)(e.mode)&&(null===(n=e.modeParams)||void 0===n?void 0:n.domref)){let t=e.modeParams.domref;d=t.width,c=t.height}return{width:d=null!=l?l:d,height:c=null!=u?u:c}}function c(t,...e){let i=i=>e.reduce((t,e)=>t||(null==e?void 0:e[i]),t[i]);return Object.assign(t,{change:i("change"),reCompile:i("reCompile"),reMake:i("reMake"),reRender:i("reRender"),reSize:i("reSize"),reTransformSpec:i("reTransformSpec"),changeTheme:i("changeTheme"),changeBackground:i("changeBackground")}),t}function p(t,e){return"line"===t||"area"===t||"common"===t&&e.series.every(t=>"area"===t.type||"line"===t.type)?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}},9567:function(t,e,i){"use strict";i.d(e,{H:()=>r});class r{getOption(){return this._option}constructor(t){this._option=t,this.getCompiler=this._option.getCompiler}getVGrammarView(){var t;return null===(t=this.getCompiler())||void 0===t?void 0:t.getVGrammarView()}release(){this._option=null,this.getCompiler=null}}},3558:function(t,e,i){"use strict";i.d(e,{O:()=>a});var r=i(9801),s=i(6082),n=i(6031);class a extends r.F{getDataView(){return this._data}setDataView(t){this._data=t}getLatestData(){var t;return null===(t=this._data)||void 0===t?void 0:t.latestData}constructor(t,e){super(t),this.grammarType=n._.data,this._data=null,this._data=e}release(){super.release(),this._data=null}updateData(t){let e=this.getProduct(),i=this.getLatestData();if(e&&i&&(e.values(i),!t))return this.getCompiler().renderNextTick()}_compileProduct(){let t=this.getLatestData();(0,s.Z)(t)||((0,s.Z)(this.getProduct())?this._initProduct(t):this._product.values(t))}_initProduct(t){var e,i;let r=this.getVGrammarView();if(!r||!t)return;let s=this.getProductId();this._product=null===(i=null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.call(r,t))||void 0===i?void 0:i.id(s),this._compiledProductId=s}generateProductId(){var t;return`${null===(t=this.getDataView())||void 0===t?void 0:t.name}`}_lookupGrammar(t){var e,i;return null===(i=null===(e=this.getCompiler().getVGrammarView())||void 0===e?void 0:e.getDataById)||void 0===i?void 0:i.call(e,t)}}},9801:function(t,e,i){"use strict";i.d(e,{F:()=>a});var r=i(7623),s=i(9013),n=i(9567);class a extends n.H{constructor(){super(...arguments),this.id=(0,s.a)(),this._compiledProductId=null,this._depend=[]}getProduct(){if((0,r.Z)(this._product))return this._product;let t=this.getVGrammarView(),e=this.getProductId();return(0,r.Z)(e)&&(0,r.Z)(t)&&(this._product=this._lookupGrammar(e)),this._product}getProductId(){var t;return null!==(t=this._compiledProductId)&&void 0!==t?t:this.generateProductId()}getDepend(){return this._depend}setDepend(...t){this._depend=t}compile(t){this._compileProduct(t),this._afterCompile(t)}_afterCompile(t){var e;(0,r.Z)(this._product)&&(null===(e=this.getCompiler())||void 0===e||e.addGrammarItem(this))}updateDepend(){if((0,r.Z)(this._product)){let t=this.getDepend().map(t=>t.getProduct()).filter(r.Z);return this._product.depend(t),t.length===this.getDepend().length}return!1}release(){this.removeProduct(),super.release(),this._depend=[]}removeProduct(t){this.getCompiler().removeGrammarItem(this,t),this._product=null,this._compiledProductId=null}}},6031:function(t,e,i){"use strict";var r,s;i.d(e,{_:()=>r}),(s=r||(r={})).data="data",s.signal="signal",s.mark="mark"},5208:function(t,e,i){"use strict";var r,s,n,a;i.d(e,{p:()=>s,q:()=>r}),(n=r||(r={})).STATE_NORMAL="normal",n.STATE_HOVER="hover",n.STATE_HOVER_REVERSE="hover_reverse",n.STATE_DIMENSION_HOVER="dimension_hover",n.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",n.STATE_SELECTED="selected",n.STATE_SELECTED_REVERSE="selected_reverse",n.STATE_SANKEY_EMPHASIS="selected",n.STATE_SANKEY_EMPHASIS_REVERSE="blur",(a=s||(s={})).STATE_HOVER_REVERSE="hover_reverse",a.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",a.STATE_SELECTED_REVERSE="selected_reverse"},1966:function(t,e,i){"use strict";i.d(e,{Aw:()=>h,hx:()=>n,wC:()=>o});var r=i(9038),s=i(5208);function n(t,e,i){var s,n,a;let o=null===(s=e[t])||void 0===s?void 0:s.style;return n=t,a=o,!!(("fill"===n||"stroke"===n)&&(null==a?void 0:a.gradient)&&(null==a?void 0:a.stops)||(0,r.Z)(o))||!(!(null==o?void 0:o.scale)||o.field===i)}let a={};function o(t){return!!a[t]}Object.values(s.q).forEach(t=>{a[t]=!0});let l={[s.q.STATE_HOVER]:s.q.STATE_HOVER_REVERSE,[s.q.STATE_SELECTED]:s.q.STATE_SELECTED_REVERSE,[s.q.STATE_DIMENSION_HOVER]:s.q.STATE_DIMENSION_HOVER_REVERSE};function h(t){return l[t]}},0:function(t,e,i){"use strict";i.d(e,{O:()=>u});var r=i(325),s=i(9801),n=i(7623),a=i(6031);class o extends s.F{getValue(){return this._value}getUpdateFunc(){return this._updateFunc}constructor(t,e,i,r){super(t),this.grammarType=a._.signal,this.name=e,this._value=i,this._updateFunc=r}updateSignal(t,e){this._value=t,this._updateFunc=e,this.compile()}_compileProduct(){let t=this.getVGrammarView();if(t){if(!this.getProduct()){let e=this.getProductId();this._product=t.signal().id(e),this._compiledProductId=e}(0,n.Z)(this._value)&&this._product.value(this._value),(0,n.Z)(this._updateFunc)&&this._product.update(this._updateFunc)}}generateProductId(){return this.name}_lookupGrammar(t){var e;return null===(e=this.getCompiler().getVGrammarView())||void 0===e?void 0:e.getSignalById(t)}}var l=i(9567);class h extends l.H{constructor(){super(...arguments),this._signalMap={}}getSignalMap(){return this._signalMap}getSignal(t){return this._signalMap[t]}updateSignal(t,e,i){this._signalMap[t]?this._signalMap[t].updateSignal(e,i):(this._signalMap[t]=new o(this._option,t,e,i),this._signalMap[t].compile())}compile(){Object.values(this._signalMap).forEach(t=>{t.compile()})}release(){super.release(),Object.values(this._signalMap).forEach(t=>{t.release()}),this._signalMap={}}}class u extends h{getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(t){super(t),t.stateKeyToSignalName?this.stateKeyToSignalName=t.stateKeyToSignalName:this.stateKeyToSignalName=()=>"state_signal",this.initStateMap()}initStateMap(t){this._stateMap=null!=t?t:this._getDefaultStateMap()}compile(t){let e=null!=t?t:this._stateMap;Object.keys(e).forEach(t=>{let i=this.stateKeyToSignalName(t),r=e[t];this.updateSignal(i,r)})}updateState(t,e){if(t&&((0,r.Z)(this._stateMap,t),this.compile(t),!e))return this.getCompiler().renderNextTick()}}},9286:function(t,e,i){"use strict";i.d(e,{k:()=>N,R:()=>z});var r=i(5173),s=i(8746),n=i(3558),a=i(7602),o=i(9114),l=i(4218),h=i(3722),u=i(6542),d=i(208),c=i(7623),p=i(1130),g=i(7636),m=i(4546),f=i(9730),v=i(9198),y=i(9038),_=i(6082),b=i(1805),x=i(4267),S=i(123),A=i(6338),k=i(2698),w=i(8120),C=i(8469),T=i(1670),E=i(3118),M=i(3872),B=i(645),D=i(8378),O=i(5660),P=i(3745);class I extends E.rd{constructor(){super(...arguments),this.mode=M.uq.NORMAL}onBind(){let t=this.target.getInnerView(),e=this.target.getPrevInnerView();e&&(this._newElementAttrMap={},(0,P.Ck)(t,t=>{var i,r,s,n,a,o;if("group"!==t.type&&t.id){let l=e[t.id];if(l){if(!(0,f.X)(t.attribute,l.attribute)){let e=(0,B.Z)(t.attribute);this._newElementAttrMap[t.id]={state:"update",node:t,attrs:Object.assign(Object.assign({},e),{opacity:null!==(i=e.opacity)&&void 0!==i?i:1,fillOpacity:null!==(r=e.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(s=e.strokeOpacity)&&void 0!==s?s:1})},t.setAttributes(l.attribute)}}else{let e={opacity:null!==(n=t.attribute.opacity)&&void 0!==n?n:1,fillOpacity:null!==(a=t.attribute.fillOpacity)&&void 0!==a?a:1,strokeOpacity:null!==(o=t.attribute.strokeOpacity)&&void 0!==o?o:1};this._newElementAttrMap[t.id]={state:"enter",node:t,attrs:e},t.setAttributes({opacity:0,fillOpacity:0,strokeOpacity:0})}}}))}onStart(){let t=this.duration,e=this.easing;this._newElementAttrMap&&Object.keys(this._newElementAttrMap).forEach(i=>{var r;let{node:s,attrs:n,state:a}=this._newElementAttrMap[i];if("enter"===a){let{enter:i={}}=null!==(r=this.params)&&void 0!==r?r:{};t=(0,D.Z)(i.duration)?i.duration:t,e=i.easing?i.easing:e}"path"===s.type?s.animate({interpolate:(t,e,i,r,s)=>"path"===t&&(s.path=(0,O.IT)(i,r)(e),!0)}).to(n,t,e):s.animate().to(n,t,e)})}onUpdate(t,e,i){}}class R extends E.rd{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:0}})}onEnd(){this.target.setTheme({common:{opacity:1}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:e}})}}class L extends E.rd{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:1}})}onEnd(){this.target.setTheme({common:{opacity:0}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:1-e}})}}let F=t=>t;var j=i(6358),Z=i(2096),H=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class N extends s.H{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(t=0){return this._tickData[t]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(t,e){var i;super(t,e),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._visible=null===(i=t.visible)||void 0===i||i,this._coordinateType="none"}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){var t,e,i,r;return[null===(e=null===(t=this._axisMark)||void 0===t?void 0:t.getProduct())||void 0===e?void 0:e.getGroupGraphicItem(),null===(r=null===(i=this._gridMark)||void 0===i?void 0:i.getProduct())||void 0===r?void 0:r.getGroupGraphicItem()].filter(c.Z)}created(){var t,e,i,r,s,n,a,o,l,h,g,m,f,v,y,_,b,x;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){let S=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:"angle"===this.getOrient()?"circleAxis":"axis",mode:this._spec.mode,noSeparateStyle:!0},{skipTheme:!0});if(this._axisMark=S,S.setMarkConfig({zIndex:this.layoutZIndex}),(0,c.Z)(this._spec.id)&&S.setUserId(this._spec.id),S.setMarkConfig({interactive:null!==(t=this._spec.interactive)&&void 0!==t?t:this.getDefaultInteractive()}),this._marks.addMark(S),null===(e=this._spec.grid)||void 0===e?void 0:e.visible){let t=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:"angle"===this.getOrient()?k.Fp.circleAxisGrid:k.Fp.lineAxisGrid,mode:this._spec.mode,noSeparateStyle:!0},{skipTheme:!0});t.setMarkConfig({zIndex:null!==(a=null!==(s=null===(r=null===(i=this._spec.grid)||void 0===i?void 0:i.style)||void 0===r?void 0:r.zIndex)&&void 0!==s?s:null===(n=this._spec.grid)||void 0===n?void 0:n.zIndex)&&void 0!==a?a:u.Ai.Axis_Grid,interactive:!1}),this._marks.addMark(t),this._gridMark=t}if(!1!==this._option.animation&&!1!==(0,p.Z)(this._option.getChart().getSpec(),"animation")&&!0===this._spec.animation){let t=(0,d._8)(null===(o=C.F.getAnimationInKey("axis"))||void 0===o?void 0:o(),{appear:null!==(h=null!==(l=this._spec.animationAppear)&&void 0!==l?l:(0,p.Z)(this._option.getChart().getSpec(),"animationAppear.axis"))&&void 0!==h?h:(0,p.Z)(this._option.getChart().getSpec(),"animationAppear"),disappear:null!==(m=null!==(g=this._spec.animationDisappear)&&void 0!==g?g:(0,p.Z)(this._option.getChart().getSpec(),"animationDisappear.axis"))&&void 0!==m?m:(0,p.Z)(this._option.getChart().getSpec(),"animationDisappear"),enter:null!==(v=null!==(f=this._spec.animationEnter)&&void 0!==f?f:(0,p.Z)(this._option.getChart().getSpec(),"animationEnter.axis"))&&void 0!==v?v:(0,p.Z)(this._option.getChart().getSpec(),"animationEnter"),exit:null!==(_=null!==(y=this._spec.animationExit)&&void 0!==y?y:(0,p.Z)(this._option.getChart().getSpec(),"animationExit.axis"))&&void 0!==_?_:(0,p.Z)(this._option.getChart().getSpec(),"animationExit"),update:null!==(x=null!==(b=this._spec.animationUpdate)&&void 0!==b?b:(0,p.Z)(this._option.getChart().getSpec(),"animationUpdate.axis"))&&void 0!==x?x:(0,p.Z)(this._option.getChart().getSpec(),"animationUpdate")});t.enter&&(t.update[0].customParameters={enter:t.enter[0]}),this._marks.forEach(e=>e.setAnimationConfig(t))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){let t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this)),this._tickData=[new n.O(this._option,t)]}collectData(t,e){let i=[];return(0,o.xV)(this._regions,s=>{var n;let o=this.collectSeriesField(t,s);if(o=(0,g.Z)(o)?(0,r.z2)(this._scale.type)?o:[o[0]]:[o],t||(this._dataFieldText=s.getFieldAlias(o[0])),o){let t=s.getViewData();if(e)o.forEach(t=>{i.push(s.getRawDataStatisticsByField(t,!1))});else if(t&&t.latestData&&t.latestData.length){let e=null===(n=s.getViewDataStatistics)||void 0===n?void 0:n.call(s),r=this.type===a.L.cartesianLinearAxis&&this._spec.breaks&&this._spec.breaks.length;o.forEach(s=>{var n;(null===(n=null==e?void 0:e.latestData)||void 0===n?void 0:n[s])&&(r?i.push(Object.assign(Object.assign({},e.latestData[s]),{values:t.latestData.map(t=>t[s])})):i.push(e.latestData[s]))})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}isSeriesDataEnable(){let t=!0;return(0,o.xV)(this._regions,e=>{var i;(0,g.Z)(null===(i=e.getViewDataStatistics())||void 0===i?void 0:i.latestData)&&(t=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}setSeriesAndRegionsFromSpec(){let{seriesId:t,seriesIndex:e,regionId:i,regionIndex:r}=this._spec;(0,c.Z)(t)&&(this._seriesUserId=(0,m.IX)(t)),(0,c.Z)(i)&&(this._regionUserId=(0,m.IX)(i)),(0,c.Z)(e)&&(this._seriesIndex=(0,m.IX)(e)),(0,c.Z)(r)&&(this._regionIndex=(0,m.IX)(r)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(t=>t.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(h.$7.scaleUpdate,{filter:({model:t})=>(null==t?void 0:t.id)===this.id},this.effect.scaleUpdate.bind(this));let t=(0,o.gU)(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(t=>t.getViewDataStatistics()).filter(t=>!!t);t.length>1?this._option.dataSet.multipleDataViewAddListener(t,"change",()=>{this.updateScaleDomain()}):1===t.length&&t[0].target.addListener("change",()=>{this.updateScaleDomain()}),(0,o.xV)(this._regions,t=>{t.event.on(h.$7.rawDataUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===t.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(t){this.updateScaleRange(),this.event.emit(h.$7.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd(t)}computeData(t){"force"!==t||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||"force"!==t&&(0,f.X)(this._scale.range(),[0,1])||this._tickData.forEach(t=>{t.getDataView().reRunAllTransform(),t.updateData()}):(0,o.xV)(this._regions,t=>{var e;null===(e=t.getViewData())||void 0===e||e.reRunAllTransform()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}initScales(){this._scales=[this._scale];let t=[];if((0,o.xV)(this._regions,e=>{let i=e.getGroups();i&&t.push(i)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),0!==t.length){let e=(0,m.CE)(t.map(t=>t.fields.length));for(let t=1;t<e;t++){let t=this._scale.clone();this._scales.push(t)}}}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(i.reRender=!0,(null==e?void 0:e.type)!==(null==t?void 0:t.type)||(null==e?void 0:e.visible)!==(null==t?void 0:t.visible)?i.reMake=!0:i.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(i=>{var r,s;return(null===(r=null==e?void 0:e[i])||void 0===r?void 0:r.visible)!==(null===(s=null==t?void 0:t[i])||void 0===s?void 0:s.visible)})),i}_getAxisAttributes(){let t=this._spec,e={orient:this.getOrient(),select:!0!==this._option.disableTriggerEvent&&t.select,hover:!0!==this._option.disableTriggerEvent&&t.hover};if(t.domainLine&&t.domainLine.visible?e.line=(0,x.lc)(t.domainLine):e.line={visible:!1},t.label&&t.label.visible){let i=(0,v.Z)(t.label,["style","formatMethod","state"]);e.label=i,t.label.style&&(e.label.style=(0,y.Z)(t.label.style)?(e,i,r,s)=>{var n;let a=t.label.style(e.rawValue,i,e,r,s);return(0,S.h_)((0,l.H)({},null===(n=this._theme.label)||void 0===n?void 0:n.style,a))}:(0,S.h_)(t.label.style)),(t.label.formatMethod||t.label.formatter)&&(e.label.formatMethod=this._getLabelFormatMethod()),t.label.state&&(e.label.state=(0,S.Wi)(t.label.state))}else e.label={visible:!1};if(t.tick&&t.tick.visible?(e.tick={visible:t.tick.visible,length:t.tick.tickSize,inside:t.tick.inside,alignWithLabel:t.tick.alignWithLabel,dataFilter:t.tick.dataFilter},t.tick.style&&(e.tick.style=(0,y.Z)(t.tick.style)?(e,i,r,s)=>{var n;let a=t.tick.style(e,i,r,s);return(0,S.h_)((0,l.H)({},null===(n=this._theme.tick)||void 0===n?void 0:n.style,a))}:(0,S.h_)(t.tick.style)),t.tick.state&&(e.tick.state=(0,S.Zv)(t.tick.state))):e.tick={visible:!1},t.subTick&&t.subTick.visible?(e.subTick={visible:t.subTick.visible,length:t.subTick.tickSize,inside:t.subTick.inside,count:t.subTick.tickCount},t.subTick.style&&(e.subTick.style=(0,y.Z)(t.subTick.style)?(e,i,r,s)=>{var n;let a=t.subTick.style(e,i,r,s);return(0,S.h_)((0,l.H)({},null===(n=this._theme.subTick)||void 0===n?void 0:n.style,a))}:(0,S.h_)(t.subTick.style)),t.subTick.state&&(e.subTick.state=(0,S.Zv)(t.subTick.state))):e.subTick={visible:!1},t.title&&t.title.visible){let i=t.title,{autoRotate:r,angle:s,style:n={},background:a,state:o,shape:h}=i,u=H(i,["autoRotate","angle","style","background","state","shape"]),d,c=s;"left"!==t.orient&&"right"!==t.orient||r&&(0,_.Z)(c)&&(c="left"===t.orient?-90:90,d=x.Rb[t.orient]),e.title=Object.assign(Object.assign({},u),{autoRotate:!1,angle:c?(0,b.M4)(c):null,textStyle:(0,l.H)({},d,(0,S.h_)(n)),pickable:!1!==n.pickable,childrenPickable:!1!==n.pickable,state:{}}),h&&h.visible?(e.title.shape=Object.assign(Object.assign({},h),{style:(0,S.h_)(h.style)}),h.state&&(e.title.state.shape=(0,S.Zv)(h.state))):e.title.shape={visible:!1},a&&a.visible?(e.title.background=Object.assign(Object.assign({},a),{style:(0,S.h_)(a.style)}),a.state&&(e.title.state.background=(0,S.Zv)(a.state))):e.title.background={visible:!1},o&&(e.title.state.text=(0,S.Zv)(o))}else e.title={visible:!1};return t.background&&t.background.visible?(e.panel={visible:!0},t.background.style&&(e.panel.style=(0,S.h_)(t.background.style)),t.background.state&&(e.panel.state=(0,S.Zv)(t.background.state))):e.panel={visible:!1},e}_getGridAttributes(){let t=this._spec;return{alternateColor:t.grid.alternateColor,alignWithLabel:t.grid.alignWithLabel,style:(0,y.Z)(t.grid.style)?()=>(e,i)=>{var r,s;let n=t.grid.style(null===(r=e.datum)||void 0===r?void 0:r.rawValue,i,e.datum);return(0,S.h_)((0,l.H)({},null===(s=this._theme.grid)||void 0===s?void 0:s.style,n))}:(0,S.h_)(t.grid.style),subGrid:!1===t.subGrid.visible?{visible:!1}:{type:"line",visible:t.subGrid.visible,alternateColor:t.subGrid.alternateColor,style:(0,S.h_)(t.subGrid.style)}}}_getLabelFormatMethod(){let{formatMethod:t,formatter:e}=this._spec.label,{formatFunc:i}=(0,Z.HJ)(t,e);return i?(t,r,s)=>i(r.rawValue,r,e):null}_initTickDataSet(t,e=0){(0,j.I)(this._option.dataSet,"scale",F);let i=this.registerTicksTransform();return new A.VO(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${e}`}).parse(this._scales[e],{type:"scale"}).transform({type:i,options:t},!1)}_tickTransformOption(){let t=this._tick||{},e=this._spec.label||{},{tickCount:i,forceTickCount:r,tickStep:s,tickMode:n}=t,{style:a,formatMethod:o,minGap:l}=e;return{sampling:!1!==this._spec.sampling,tickCount:i,forceTickCount:r,tickStep:s,tickMode:n,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:a,labelFormatter:o,labelGap:l}}addTransformToTickData(t,e){this._tickData.forEach(i=>{var r;null===(r=null==i?void 0:i.getDataView())||void 0===r||r.transform(t,e)})}dataToPosition(t){return this._scale.scale(t)}getDatum(t){var e,i;return t&&t.name===T.X9.label?t.data:this._axisMark?null===(i=null===(e=this._axisMark.getProduct())||void 0===e?void 0:e.getGroupGraphicItem())||void 0===i?void 0:i.attribute.items:void 0}}N.specKey="axes";let z=()=>{(0,w.k)(),C.F.registerAnimation("axis",()=>({appear:{custom:R},update:{custom:I},exit:{custom:L}}))}},8871:function(t,e,i){"use strict";i.d(e,{O:()=>Z});var r=i(4546),s=i(7393),n=i(4218),a=i(9114),o=i(7623),l=i(8378),h=i(7636),u=i(7846),d=i(1960),c=i(3604),p=i(6082),g=i(5173),m=i(8469),f=i(3881),v=i(3722),y=i(6542);function _(t){return t.length>=2&&(0,l.Z)(t[0])&&(0,l.Z)((0,r.Z$)(t))&&(0,r.Z$)(t)>=t[0]}function b(t,e){var i;let s=(0,r.Z$)(e)-e[0],n=(0,r.Z$)(e)*e[0]<0,a=e[0]<=0?0-e[0]:0,o=(0,r.Z$)(e)>0?(0,r.Z$)(e)-0:0;0===s?e[0]<0?(a=1,o=0):e[0]>0&&(a=0,o=1):(a/=s,o/=s);let h=t.getDomainSpec(),u={total:s,negative:a,positive:o,includeZero:n,domain:e,extendable_min:!(0,l.Z)(h.min),extendable_max:!(0,l.Z)(h.max)};if(null===(i=t._break)||void 0===i?void 0:i.scope){let i,s;let n=e.findIndex(t=>t>=0);0===n?(i=t._break.scope[n],s=[e[0],e[1]],u.positive=1,u.negative=0):0>=(0,r.Z$)(e)?(u.positive=0,u.negative=1,s=[e[e.length-2],e[e.length-1]]):(i=t._break.scope[n-1],s=[e[n-1],e[n]],u.negative=i[0]+(0-s[0])/(s[1]-s[0])*(i[1]-i[0]),u.positive=1-u.negative),u.break=!0,u.extendable_max=!1,u.extendable_min=!1,u.domain=s}return u}function x(t,e){let{positive:i,negative:r,extendable_min:s,extendable_max:n,domain:a}=t,{positive:o,negative:l,extendable_min:h,extendable_max:u,domain:d}=e;if(o>0){if(!h)return!1;let t=r/i;n&&(t=r/Math.max(i,o),a[1]=-a[0]/t),d[0]=-d[1]*t}else if(l>0){if(!u)return!1;let t=i/r;s&&(t=i/Math.max(r,r),a[0]=-a[1]/t),d[1]=-d[0]*t}return!0}function S(t,e){let{extendable_min:i,extendable_max:r,domain:s}=t,{positive:n,negative:a,domain:o}=e;return(0!==n||0!==a)&&!(n>0&&!r)&&!(a>0&&!i)&&(s[0]=o[0],s[1]=o[1],!0)}function A(t,e){let{positive:i,negative:r,extendable_max:s,domain:n}=t,{positive:a,negative:o,extendable_min:l,domain:h}=e;if(s&&l){let t=Math.max(r,o)/Math.max(i,a);n[1]=-n[0]/t,h[0]=-h[1]*t}else if(l)h[0]=-h[1]*(r/i);else{if(!s)return!1;n[1]=-n[0]/(o/a)}return!0}function k(t,e){let{extendable_min:i,domain:r}=t,{extendable_max:s,domain:n}=e;return!(!i||!s)&&(r[0]=-r[1],n[1]=-n[0],!0)}let w=(t,e)=>{var i,r,s,n;let a=t.getScale(),o=e.getScale();if(!a||!o)return;let l=null!==(r=null===(i=t.getDomainAfterSpec)||void 0===i?void 0:i.call(t))&&void 0!==r?r:[0,1],h=null!==(n=null===(s=e.getDomainAfterSpec)||void 0===s?void 0:s.call(e))&&void 0!==n?n:[0,1];if(!(l&&h&&_(l)&&_(h)))return;let u=b(t,l),d=b(e,h);if(!0===u.break&&!0===d.break)return;let{positive:c,negative:p,extendable_min:g,extendable_max:m,includeZero:f}=u,{positive:v,negative:y,extendable_min:w,extendable_max:C,includeZero:T}=d;if(0===c&&0===p){if(!S(u,d))return}else if(0===v&&0===y){if(!S(d,u))return}else if(f||T){if(f&&!T){if(!x(u,d))return}else if(T&&!f){if(!x(d,u))return}else{if(p===y)return;if(p>y){if(!A(u,d))return}else if(!A(d,u))return}}else{if(0===p&&0===v){if(!k(u,d))return}else if(0===y&&0===c&&!k(d,u))return;if(0===p&&0===y){if(0===l[0]&&h[0]>0){if(!w)return;h[0]=0}else{if(!(0===h[0]&&l[0]>0)||!g)return;l[0]=0}}if(0===c&&0===v){if(0===l[1]&&h[1]>0){if(!C)return;h[1]=0}else{if(!(0===h[1]&&l[1]>0)||!m)return;l[1]=0}}}a.domain(l),o.domain(h)};var C=i(6358),T=i(59),E=i(8103);let M=(t,e)=>{var i,s,n,a,o;if(!t)return t;let l=null===(i=null==e?void 0:e.targetAxis)||void 0===i?void 0:i.call(e);if(!l)return t;let h=null===(s=null==e?void 0:e.currentAxis)||void 0===s?void 0:s.call(e);if(!h)return t;let u=null===(n=h.getTickData())||void 0===n?void 0:n.getDataView();if(!u||!u.transformsArr.find(t=>t.type.includes("ticks")))return t;let d=h.getScale();if(!d)return t;let c=null===(o=null===(a=l.getTickData())||void 0===a?void 0:a.getDataView())||void 0===o?void 0:o.latestData;if(!(null==c?void 0:c.length))return t;let p=l.getScale();if(!p)return t;let g=p.domain(),m=(0,r.Z$)(g)-g[0];if(0===m)return t;let f=d.domain(),v=(0,r.Z$)(f)-f[0];if(0===m)return t;let y=c.map(t=>(function(t,e,i,r,s){let n=(0,E.f2)(t,e),a=Math.max((0,E.i4)(i),(0,E.i4)(n));return Math.round(n*10**a)/Math.round(i*10**a)*s+r})(t.value,g[0],m,f[0],v));return(0,T.KV)(y)};var B=i(3073);class D extends B.v{constructor(){super(D.type),this.type="AxisSyncPlugin"}_checkEnableSync(t){if(!(0,g.z2)(t.getScale().type))return!1;let e=t.getSpec().sync;return!!(null==e?void 0:e.axisId)&&e}_getTargetAxis(t,e){let i=t.getOption().getChart().getComponentByUserId(e.axisId);return(null==i?void 0:i.type.startsWith("cartesianAxis"))?i:null}onInit(t,e){let i=this._checkEnableSync(e);if(!i||!i.zeroAlign)return;let r=this._getTargetAxis(e,i);r&&e.event.on(v.$7.scaleDomainUpdate,{filter:({model:t})=>t.id===e.id||t.id===r.id},()=>{w(r,e)})}onDidCompile(t,e){let i=this._checkEnableSync(e);if(!i)return;let r=this._getTargetAxis(e,i);r&&i.tickAlign&&((0,C.U)(e.getOption().dataSet,"tickAlign",M),e.addTransformToTickData({type:"tickAlign",options:{targetAxis:()=>r,currentAxis:()=>e},level:Number.MAX_SAFE_INTEGER},!1))}}D.pluginType="component",D.type="AxisSyncPlugin";var O=i(7602),P=i(2698),I=i(4267),R=i(9286),L=i(2875),F=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let j=[D];class Z extends R.k{getOrient(){return this._orient}getDefaultInteractive(){return!0}set autoIndentOnce(t){this._autoIndentOnce=t}getScales(){return this._scales}constructor(t,e){super(t,e),this.type=O.L.cartesianAxis,this.name=O.L.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=y.Ai.Axis,this.layoutLevel=y.pM.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:t=>{this.computeData(null==t?void 0:t.value),(0,a.xV)(this._regions,t=>{let e=this.getOrient();(0,f.yL)(e)?(0,I.zf)(t.getXAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&t.setXAxisHelper(this.axisHelper()):(0,f.Vz)(e)?(0,I.zf)(t.getYAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&t.setYAxisHelper(this.axisHelper()):(0,f.IF)(e)&&(0,I.zf)(t.getZAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&t.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=t=>{let{x:e,y:i}=t;return(0,l.Z)(e)&&(e+=Number("left"===this._orient)*this.getLayoutRect().width),(0,l.Z)(i)&&(i+=Number("top"===this._orient)*this.getLayoutRect().height),{x:e,y:i}},this._transformLayoutRect=t=>{if(!this._visible)return t;let e=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===y.sd&&(t.width=e.x1<0?-e.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===y.sd&&(t.width=e.x2>0?e.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===y.sd&&(t.height=e.y1<0?-e.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===y.sd&&(t.height=e.y2>0?e.y2:0)}return t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),this._layout.setRectInSpec(this._layoutCacheProcessing(t))},this._updateAxisLayout=()=>{let t=this.getLayoutStartPoint(),e=this._getUpdateAttribute(!1),{grid:i}=e,r=F(e,["grid"]),s=this._axisMark.getProduct(),a=(0,n.H)({x:t.x,y:t.y},this._axisStyle,r);s.encode(a),this._gridMark&&this._gridMark.getProduct().encode((0,n.H)({x:t.x,y:t.y},this._getGridAttributes(),i))},this._fixAxisOnZero=()=>{let{onZero:t,visible:e}=this._spec.domainLine;if(this.visible&&t&&!1!==e){let{onZeroAxisId:t,onZeroAxisIndex:e}=this._spec.domainLine,i=this._option.getComponentsByKey("axes"),s=(0,f.yL)(this.getOrient()),n=t=>{var e;return(s?!(0,f.yL)(t.getOrient()):(0,f.yL)(t.getOrient()))&&(0,g.z2)(t.getScale().type)&&(t.getTickData()?null===(e=t.getTickData().getLatestData())||void 0===e?void 0:e.find(t=>0===t.value):t.getScale().domain()[0]<=0&&(0,r.Z$)(t.getScale().domain())>=0)},a=i.filter(t=>n(t));if(a.length){let r;if((0,o.Z)(t))r=a.find(e=>e.id===t);else if((0,o.Z)(e)){let t=i[e];n(t)&&(r=t)}else r=a[0];if(r){let t=this._axisMark.getProduct(),e=r.valueToPosition(0);s?t.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dy:"bottom"===this._orient?-((r.getInverse()?r.getScale().range()[1]:r.getScale().range()[0])-e):e})}):t.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dx:"left"===this._orient?e:-((r.getInverse()?r.getScale().range()[0]:r.getScale().range()[1])-e)})})}}}},this._orient=(0,f.x)(t,["z"]),(0,f.IF)(this._orient)&&(this.layoutType="absolute"),this._dataSet=e.dataSet,this._coordinateType="cartesian"}static getSpecInfo(t){let e=t[this.specKey];if(!e)return null;let i="horizontal"===t.direction;if(!(0,h.Z)(e)){if(!(0,I.Vn)(e))return null;let{axisType:t,componentName:r}=(0,f.mC)(e,i);return e.type=t,[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:r}]}let r=!0;if(e.filter(t=>"z"===t.orient)[0]){let t=e.filter(t=>"bottom"===t.orient)[0],i=e.filter(t=>(0,f.Vz)(t.orient))[0];r=3===e.length&&t&&i}let s=e.map((t,e)=>({spec:t,index:e}));r||(s=s.filter(({spec:t})=>"z"!==t.orient));let n=[];return s.forEach(({spec:t,index:e})=>{if(!(0,I.Vn)(t))return;let{axisType:r,componentName:s}=(0,f.mC)(t,i);t.type=r,n.push({spec:t,specPath:[this.specKey,e],specInfoPath:["component",this.specKey,e],type:s})}),n}static createComponent(t,e){let{spec:i}=t,r=F(t,["spec"]),s=m.F.getComponentInKey(r.type);return s?new s(i,Object.assign(Object.assign({},e),r)):(e.onError(`Component ${r.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=!1!==this._spec.autoIndent,this._layout.layoutOrient=this._orient}setLayout3dBox(t){this.layout3dBox=t}getNewScaleRange(){let{width:t,height:e}=this.getLayoutRect(),{left:i,right:r,top:s,bottom:n}=this._innerOffset,a=[];return(0,f.yL)(this.getOrient())?(0,l.Z)(t)&&(a=this._inverse?[t-r,i]:[i,t-r]):(0,f.IF)(this.getOrient())?(0,l.Z)(t)&&(a=this._inverse?[t-r,i]:[i,t-r],this._scale.range(a)):(0,l.Z)(e)&&(a=this._inverse?[s,e-n]:[e-n,s]),a}updateScaleRange(){let t=!1,e=this.getNewScaleRange(),i=this._scale.range();return e.length===i.length&&e.every((t,e)=>t===i[e])?t=!1:(t=!0,this._scale.range(e)),t}init(t){var e;super.init(t),null===(e=this.pluginService)||void 0===e||e.load(j.map(t=>new t)),this.callPlugin(t=>{this.pluginService&&t.onInit&&t.onInit(this.pluginService,this)})}setAttrFromSpec(){var t;if(super.setAttrFromSpec(),this.visible){(0,f.yL)(this.getOrient())?(0,u.Z)(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):(0,u.Z)(this._spec.maxWidth)&&(this._spec.maxWidth="30%");let t=this._getAxisAttributes();t.label.formatMethod=this._getLabelFormatMethod(),t.verticalFactor="top"===this.getOrient()||"right"===this.getOrient()?-1:1,this._axisStyle=t}this._tick=this._spec.tick;let e=null===(t=this._option.getChart())||void 0===t?void 0:t.getSpec();this._inverse=(0,f.Dr)(this._spec,"horizontal"===(null==e?void 0:e.direction))}onLayoutStart(t,e,i){if(super.onLayoutStart(t,e,i),!(0,f.IF)(this.getOrient())&&this._spec.innerOffset){let t=this._spec;(0,f.Vz)(this.getOrient())?["top","bottom"].forEach(i=>{this._innerOffset[i]=(0,d.Mv)(t.innerOffset[i],e.height,e)}):["left","right"].forEach(i=>{this._innerOffset[i]=(0,d.Mv)(t.innerOffset[i],e.width,e)})}}getSeriesStatisticsField(t){let e;return e=(0,f.yL)(this.getOrient())?t.fieldX:(0,f.IF)(this.getOrient())?t.fieldZ:t.fieldY,(0,g.z2)(this._scale.type)?e:[e[0]]}_tickTransformOption(){var t,e,i,r;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:null===(t=this._tick)||void 0===t?void 0:t.noDecimals,labelLastVisible:null===(e=this._spec.label)||void 0===e?void 0:e.lastVisible,labelFirstVisible:null===(i=this._spec.label)||void 0===i?void 0:i.firstVisible,labelFlush:null===(r=this._spec.label)||void 0===r?void 0:r.flush})}axisHelper(){return{isContinuous:(0,g.z2)(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(t=0)=>this._scales[t],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!0===this._inverse,getSpec:()=>this._spec}}afterCompile(){var t;let e=null===(t=this._axisMark)||void 0===t?void 0:t.getProduct();e&&e.addEventListener(P.ZK.AFTER_ELEMENT_ENCODE,()=>{if(!1===this._isLayout&&((0,f.yL)(this.getOrient())?this.callPlugin(t=>{this.pluginService&&t.onDidLayoutHorizontal&&t.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(t=>{this.pluginService&&t.onDidLayoutVertical&&t.onDidLayoutVertical(this.pluginService,this)}),this._unitText)){let{x:t,y:e}=this.getLayoutStartPoint(),i=(0,f.yL)(this._orient)?{x:(0,r.CE)(this._scale.range())+t,y:e}:{x:t,y:(0,r.iH)(this._scale.range())+e};this._unitText.setAttributes(i)}}),this.callPlugin(t=>{this.pluginService&&t.onDidCompile&&t.onDidCompile(this.pluginService,this)})}onRender(t){}changeRegions(t){}update(t){}resize(t){}collectScale(){let t=[];return(0,a.xV)(this._regions,e=>{t.push("left"===this.getOrient()||"right"===this.getOrient()?e.scaleY:e.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}collectSeriesField(t,e){var i,r;return t>0?null===(r=null===(i=e.getGroups())||void 0===i?void 0:i.fields)||void 0===r?void 0:r[t]:(0,f.yL)(this.getOrient())?e.getSpec().x2Field?[...e.fieldX,e.fieldX2]:e.fieldX:(0,f.IF)(this.getOrient())?e.fieldZ:e.getSpec().y2Field?[...e.fieldY,e.fieldY2]:e.fieldY}updateSeriesScale(){let t=this.getOrient();(0,a.xV)(this._regions,e=>{(0,f.yL)(t)?(0,I.zf)(e.getXAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&(e.setScaleX(this._scale),e.setXAxisHelper(this.axisHelper())):(0,f.Vz)(t)?(0,I.zf)(e.getYAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&(e.setScaleY(this._scale),e.setYAxisHelper(this.axisHelper())):(0,f.IF)(t)&&(0,I.zf)(e.getZAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&(e.setScaleZ(this._scale),e.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(t){var e;let i={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return i;this._verticalLimitSize=(0,f.yL)(this.getOrient())?t.height:t.width,this.setLayoutRect(t),!this.updateScaleRange()&&(0,h.Z)(null===(e=this.getTickData())||void 0===e?void 0:e.getLatestData())||this.computeData("range");let r={skipLayout:!1},a=(0,f.yL)(this.getOrient());this.pluginService&&(a?this.callPlugin(t=>{t.onWillLayoutHorizontal&&t.onWillLayoutHorizontal(this.pluginService,r,this)}):this.callPlugin(t=>{t.onWillLayoutVertical&&t.onWillLayoutVertical(this.pluginService,r,this)}));let o=this._axisMark.getProduct(),l=!1;if(!r.skipLayout){let t=this._getUpdateAttribute(!0),e=o.getGroupGraphicItem(),r=(0,n.H)(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,t,{line:{visible:!1}}),h=e.getBoundsWithoutRender(r);h.empty()&&(h=(new s.YZ).set(r.x,r.y,r.x,r.y)),l=!0,this._latestBounds=h,i=this._appendAxisUnit(h,a)}return l||(this._latestBounds=o.getBounds()),i}positionToData(t,e){let i=(0,f.yL)(this.getOrient());e&&(t-=i?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(t=i?(0,c.Z)(t,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):(0,c.Z)(t,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));let s=this._scale.range();return(t-s[0])*(t-(0,r.Z$)(s))>0?null:this._scale.invert(t)}_getTitleLimit(t){var e,i,r,s,n;let a=this._spec.title;if(a.visible&&(0,p.Z)(null===(e=a.style)||void 0===e?void 0:e.maxLineWidth)){let e=null!==(n=null!==(r=null===(i=this._axisStyle.title)||void 0===i?void 0:i.angle)&&void 0!==r?r:null===(s=a.style)||void 0===s?void 0:s.angle)&&void 0!==n?n:0;if(t){let t=this.getLayoutRect().width,i=Math.abs(Math.cos(e));return i<1e-6?1/0:t/i}let o=this.getLayoutRect().height,l=Math.abs(Math.sin(e));return l<1e-6?1/0:o/l}return null}_getUpdateAttribute(t){var e;let i=0,r=0;if(!t){let t=this.getRegions(),{x:e,y:s}=t[0].getLayoutStartPoint(),n=e+t[0].getLayoutRect().width,a=s+t[0].getLayoutRect().height;for(let i=1;i<t.length;i++){let r=t[i],{x:o,y:l}=r.getLayoutStartPoint(),{width:h,height:u}=r.getLayoutRect();e=Math.min(e,o),n=Math.max(n,h+o),s=Math.min(s,l),a=Math.max(a,u+l)}i=Math.abs(a-s),r=Math.abs(n-e)}let{width:s,height:n}=this.getLayoutRect(),a=(0,f.yL)(this._orient),o=(0,f.Vz)(this._orient),l=(0,f.IF)(this._orient),h=this.layout3dBox?this.layout3dBox.length:0,u={x:0,y:0},d=i,c=s;a?u={x:s,y:0}:o?(u={x:0,y:n},d=r,c=n):l&&(u={x:h,y:0});let p=this.getLabelItems(c),g={start:{x:0,y:0},end:u,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(a)},items:p};if(t||(g.grid={type:"line",start:{x:0,y:0},end:u,items:p[0],verticalFactor:this._axisStyle.verticalFactor,depth:h,length:d}),l){let i=null!==(e=this.directionStr)&&void 0!==e?e:"r2l",r=this.layout3dBox?this.layout3dBox.width:0,s=[0,0],n=-Math.PI/2,a=0;"l2r"===i&&(a=this.layout3dBox.length,s=[0,0,0],n=Math.PI/2),g.z=a,g.alpha=n,g.anchor3d=s,t||(g.grid.depth=r)}else{let t=a?this.layout.minHeight:this.layout.minWidth;(a&&this._layout.layoutRectLevelMap.height===y.wK||o&&this._layout.layoutRectLevelMap.width===y.wK)&&(t=this._verticalLimitSize),g.verticalLimitSize=this._verticalLimitSize,g.verticalMinSize=t,g.label={overflowLimitLength:this._getLabelOverflowLimit(a)}}return g}getLabelItems(t){var e;let i=null===(e=this.getTickData())||void 0===e?void 0:e.getLatestData();return i&&i.length?[i.map(e=>{let i=this._getNormalizedValue([e.value],t);return(0,I.cf)(e.value,i)}).filter(t=>{let{value:e,rawValue:i}=t,s=this._scale.domain();return"log"===this.getSpec().type?e>=0&&e<=1:(0,g.z2)(this._scale.type)?i>=s[0]&&i<=(0,r.Z$)(s):s.includes(i)})]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(v.$7.layoutEnd,this._updateAxisLayout),this.event.on(v.$7.layoutEnd,this._fixAxisOnZero),this.event.on(v.$7.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(t,e){return 0===e?0:this.dataToPosition(t)/e}_layoutCacheProcessing(t){return["width","height"].forEach(e=>{t[e]<this._layoutCache[e]?t[e]=this._layoutCache[e]:this._layoutCache[e]=t[e]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(t=>{this.layout.getLastComputeOutBounds()[t]=this._layoutCache._lastComputeOutBounds[t]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(t=>{this.layout.getLastComputeOutBounds()[t]<this._layoutCache._lastComputeOutBounds[t]?this.layout.getLastComputeOutBounds()[t]=this._layoutCache._lastComputeOutBounds[t]:this._layoutCache._lastComputeOutBounds[t]=this.layout.getLastComputeOutBounds()[t]})),t}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(t,e){var i;if(this._spec.unit&&this._spec.unit.visible){let s,n;let{text:a,style:o}=this._spec.unit,{x:l,y:h}=this.getLayoutStartPoint();e?(s={x:(0,r.CE)(this._scale.range())+l,y:h},n={textAlign:"left",textBaseline:"middle"}):(s={x:l,y:(0,r.iH)(this._scale.range())+h},n={textAlign:"left"===this._orient?"left":"right",textBaseline:"bottom"}),n=Object.assign(Object.assign(Object.assign({},n),o),{x:s.x,y:s.y,text:a}),this._unitText?this._unitText.setAttributes(n):(this._unitText=(0,L.r)(n),this._unitText.name="axis-unit",null===(i=this.getContainer())||void 0===i||i.add(this._unitText));let u=this._unitText.AABBBounds;e?(t.x2+=u.x2>t.x2?u.x2-t.x2:0,t.y2+=u.y2>t.y2?u.y2-t.y2:0):(t.x1+=u.x1<t.x1?u.x1-t.x1:0,t.y1+=u.y1<t.y1?u.y1-t.y1:0)}return t}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}_getLabelOverflowLimit(t){var e,i;if(t&&!1!==(null===(e=this._spec.label)||void 0===e?void 0:e.visible)&&!0===(null===(i=this._spec.label)||void 0===i?void 0:i.autoLimit)){let t=this._option.getComponentsByKey("axes"),e=this.getRegions(),i=t.filter(t=>{let i=t.getOrient();return("left"===i||"right"===i)&&t.getRegions().some(t=>e.includes(t))}),r=0,s=0,n=this.getLayoutStartPoint().x,a=n+this.getLayoutRect().width;return i.forEach(t=>{let e=t.getLayoutStartPoint().x;if("left"===t.getOrient()&&e===n){let e=t.getLayoutRect().width;r=Math.max(r,e)}else if(e===a){let e=t.getLayoutRect().width;s=Math.max(s,e)}}),{left:r,right:s}}}}Z.type=O.L.cartesianAxis,Z.specKey="axes"},1532:function(t,e,i){"use strict";i.d(e,{N:()=>B});var r=i(1287),s=i(8919),n=i(8871),a=i(7602),o=i(6082),l=i(9904),h=i(7623),u=i(7773),d=i(7636),c=i(4546),p=i(3722),g=i(3558),m=i(4267),f=i(8469),v=i(9286),y=i(1996),_=i(7092),b=i(9038),x=i(8986),S=i(59);let A=(t,e,i,r)=>(0,S.SZ)(t,e,i).map(t=>r?[t.x1,t.x2,t.width()]:[t.y1,t.y2,t.height()]),k=(t,e,i=0)=>Math.max(t[0],e[0])-i/2<=Math.min(t[1],e[1])+i/2,w=(t,e)=>t[1]<e[0]?e[0]-t[1]:e[1]<t[0]?t[0]-e[1]:0,C=(t,e)=>{var i;let r;let s=t.domain();if(!s.length)return[];let{tickCount:n,forceTickCount:a,tickStep:o,labelGap:l=4,axisOrientType:u,labelStyle:d}=e,p=(0,S.tz)(u),g=t.range(),m=t.calculateWholeRangeSize();if(m<2)return e.labelLastVisible?(0,S.KV)([s[s.length-1]]):(0,S.KV)([s[0]]);if((0,h.Z)(o))r=t.stepTicks(o);else if((0,h.Z)(a))r=t.forceTicks(a);else if((0,h.Z)(n)){let e=(0,b.Z)(n)?n({axisLength:m,labelStyle:d}):n;r=t.ticks(e)}else if(e.sampling){let n=(null!==(i=e.labelStyle.fontSize)&&void 0!==i?i:12)+2,a=(0,c.iH)(g),o=(0,c.CE)(g);if(s.length<=m/n){let i=(o-a)/s.length,n=A(t,s,e,p),h=Math.min(...n.map(t=>t[2])),u=T(s,n,l,e.labelLastVisible,Math.floor(h/i),!1);r=t.stepTicks(u.step),e.labelLastVisible&&(u.delCount&&(r=r.slice(0,r.length-u.delCount)),r.push(s[s.length-1]))}else{let i=A(t,[s[0],s[Math.floor(s.length/2)],s[s.length-1]],e,p),n=null;i.forEach(t=>{n?n[2]<t[2]&&(n=t):n=t});let h=o-a-l>0?Math.ceil(s.length*(l+n[2])/(o-a-l)):s.length-1;r=t.stepTicks(h),!e.labelLastVisible||r.length&&r[r.length-1]===s[s.length-1]||(r.length&&Math.abs(t.scale(r[r.length-1])-t.scale(s[s.length-1]))<n[2]&&(r=r.slice(0,-1)),r.push(s[s.length-1]))}}else r=t.domain();return(0,S.KV)(r)},T=(t,e,i,r,s,n)=>{let a=0,o=0,l=-1,h=Number.MAX_VALUE,u=r=>{let s=!0,n=0;do n+r<t.length&&k(e[n],e[n+r],i)&&(s=!1),n+=r;while(s&&n<t.length);return s},d=(0,x.o0)(s,t.length,t=>u(t)?1:-1),c=d;do if(!(c>d)||n||u(c)){if(!r){o=c;break}{let r=t.length-1,s,n=0;s=t.length%c>0?t.length-t.length%c+c:t.length;do{if((s-=c)!==r&&!k(e[s],e[r],i))break;n++}while(s>0);if(s===r){o=c,a=n;break}{let i=Math.floor(t.length/c)-n+1;if(i<l)break;{l=i;let t=w(e[s],e[r]),u=s-c>=0?w(e[s-c],e[s]):t,d=Math.abs(t-u);if(d<h&&(h=d,o=c,a=n),t<=u)break}}}c++}else c++;while(c<=t.length);return{step:o,delCount:a}};var E=i(6358);class M extends n.O{constructor(){super(...arguments),this.type=a.L.cartesianBandAxis,this._scale=new r.j}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){let t=super.updateScaleRange();return this.updateGroupScaleRange(),t}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){let t=(t=0)=>this._scales[t];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:t,getBandwidth:(e=0)=>t(e).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,E.U)(this._option.dataSet,t,C),t}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){let{bandSize:t,maxBandSize:e,minBandSize:i}=this._getOuterBandSizeFromSpec();if(t&&this._scale.bandwidth(t),e&&this._scale.maxBandwidth(e),i&&this._scale.minBandwidth(i),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(t||e)){let i=(0,s.$l)(this._scale.domain().length,null!=t?t:e,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(t=>t.setMaxWidth(i)):["left","right"].includes(this._orient)&&this._regions.forEach(t=>t.setMaxHeight(i))}}}_getOuterBandSizeFromSpec(){var t;let{bandSize:e,maxBandSize:i,minBandSize:r,bandSizeLevel:n=0}=this._spec,{gap:a,extend:u=0}=null!==(t=this._spec.bandSizeExtend)&&void 0!==t?t:{};n=Math.min(n,this._scales.length-1);for(let t=n;t>0;t--){let d=this._scales[t],c=d.domain(),p=d.paddingInner(),g=d.paddingOuter(),m=e=>{let i=t===n?u:0;return(0,o.Z)(a)||t<n?(0,s.$l)(c.length,e,p,g)+i:(e+((0,l.Z)(a)?e*(Number(a.substring(0,a.length-1))/100):a))*c.length/(this._scales[t-1].paddingInner()+1)+i};(0,h.Z)(e)&&(e=m(e)),(0,h.Z)(i)&&(i=m(i)),(0,h.Z)(r)&&(r=m(r))}return{bandSize:e,maxBandSize:i,minBandSize:r}}}M.type=a.L.cartesianBandAxis,M.specKey="axes",(0,u.jB)(M,class{constructor(){this._rawDomainIndex=[]}_initData(){var t;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let e=0;e<this._scales.length;e++){let i=(null!==(t=this._spec.layers)&&void 0!==t?t:[])[this._scales.length-1-e]||{};if(!1!==i.visible&&0!==i.tickCount&&0!==i.forceTickCount){let t=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),i),e);t.target.addListener("change",this._forceLayout.bind(this));let r=new g.O(this._option,t);this._tickData.push(r),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[e]=r}}else{let t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this));let e=new g.O(this._option,t);this._tickData=[e],this._tickDataMap={0:e}}}dataToPosition(t,e={}){var i,r;if(0===t.length||0===this._scales.length)return 0;let{position:s,bandScale:n}=this.getPosition(t);return s+n.bandwidth()*(null!==(r=null!==(i=e.bandPosition)&&void 0!==i?i:this._spec.bandPosition)&&void 0!==r?r:this._defaultBandPosition)}valueToPosition(t){return this._scale.scale(t)}updateGroupScaleRange(){let t=this._scale;this._scales.forEach((e,i)=>{i>0&&(e.range([0,t.bandwidth()]),t=e)})}getPosition(t){let e=0,i=this._scale;if(1===this._scales.length||1===t.length)e=this.valueToPosition(t[0]);else{let r=Math.min(t.length,this._scales.length);for(let i=0;i<r;i++)e+=this._scales[i].scale(t[i]);i=this._scales[r-1]}return{position:e,bandScale:i}}calcScales(t,e){var i,r;let{bandPadding:s,paddingInner:n,paddingOuter:a}=this._spec,o=(0,d.Z)(s),l=(0,d.Z)(n),h=(0,d.Z)(a);for(let u=0;u<this._scales.length;u++){let d=o?s[u]:s,c=l?n[u]:n,p=h?a[u]:a;this._scales[u].paddingInner(null!==(i=null!=c?c:d)&&void 0!==i?i:t,!0).paddingOuter(null!==(r=null!=p?p:d)&&void 0!==r?r:e,!0)}}computeBandDomain(t){if(!t.length)return[];if(1===t.length)return t[0].values;let e=new Set;for(let i=0;i<t.length;i++)for(let r=0;r<t[i].values.length;r++)e.add(t[i].values[r]);return Array.from(e)}updateScaleDomain(){var t;if(!this.isSeriesDataEnable())return;(null===(t=this._rawDomainIndex)||void 0===t?void 0:t.length)||!this._scales.length||this._updateRawDomain();let e=this._spec.domain;for(let t=0;t<this._scales.length;t++)if(e&&e.length&&0===t)this._scales[t].domain(e);else{let e=this.collectData(t),i=this.computeBandDomain(e);this._scales[t].domain(i.sort((e,i)=>this._rawDomainIndex[t][e]-this._rawDomainIndex[t][i]))}this.transformScaleDomain(),this.event.emit(p.$7.scaleDomainUpdate,{model:this}),this.event.emit(p.$7.scaleUpdate,{model:this,value:"domain"})}getLabelItems(t){let e=[],i=[];return this._scales.forEach((r,s)=>{var n;let a=this._tickDataMap[s],o=null===(n=null==a?void 0:a.getLatestData())||void 0===n?void 0:n.length,l=o?a.getLatestData().map(t=>t.value):r.domain();if(l&&l.length){if(i&&i.length){let r=[],s=[];i.forEach(e=>{l.forEach(i=>{let n=(0,c.IX)(e).concat(i);if(s.push(n),o){let e=(0,m.cf)(i,this._getNormalizedValue(n,t));r.push(e)}})}),o&&e.push(r.filter(t=>t.value>=0&&t.value<=1)),i=s}else l.forEach(t=>{i.push(t)}),o&&e.push(a.getLatestData().map(e=>(0,m.cf)(e.value,this._getNormalizedValue([e.value],t))).filter(t=>t.value>=0&&t.value<=1))}}),e.reverse()}_updateRawDomain(){this._rawDomainIndex=[];let t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&0===e)this._scales[e].domain(t);else{let t=this.collectData(e,!0),i=this.computeBandDomain(t);this._rawDomainIndex[e]={},i.forEach((t,i)=>this._rawDomainIndex[e][t]=i)}}_clearRawDomain(){this._rawDomainIndex=[]}});let B=()=>{(0,y.uy)(),(0,_.pU)(),(0,v.R)(),f.F.registerComponent(M.type,M)}},7501:function(t,e,i){"use strict";i.d(e,{E:()=>x,G:()=>b});var r=i(6132),s=i(8871),n=i(7623),a=i(8378),o=i(4546),l=i(7773),h=i(7602),u=i(7872),d=i(8469),c=i(9286),p=i(1996),g=i(7092),m=i(6358),f=i(5236),v=i(3881),y=i(1960),_=i(6555);class b extends s.O{constructor(){super(...arguments),this.type=h.L.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new r.f}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setExtraAttrFromSpec();let i=null===(e=null===(t=this._tickData)||void 0===t?void 0:t[0])||void 0===e?void 0:e.getDataView().transformsArr.find(t=>t.type===this.registerTicksTransform());i&&(i.options=this._tickTransformOption())}initScales(){var t,e;super.initScales();let i=[0,1];(0,n.Z)(null===(t=this._domain)||void 0===t?void 0:t.min)&&(i[0]=this._domain.min),(0,n.Z)(null===(e=this._domain)||void 0===e?void 0:e.max)&&(i[1]=this._domain.max),this._scale.domain(i)}_tickTransformOption(){var t;return Object.assign(Object.assign({},super._tickTransformOption()),{breakData:(null===(t=this._spec.breaks)||void 0===t?void 0:t.length)?()=>this._break:null})}_getUpdateAttribute(t){var e,i;let r=super._getUpdateAttribute(t);if(!(0,v.IF)(this._orient)&&(null===(i=null===(e=this._break)||void 0===e?void 0:e.breaks)||void 0===i?void 0:i.length)){let{width:t,height:e}=this.getLayoutRect(),i=(0,v.yL)(this._orient),s=i?t:e;r.breaks=this._break.breaks.map(t=>{let e;let{range:r,breakSymbol:n,gap:o=6}=t,l=this.valueToPosition((r[0]+r[1])/2)/s;e=(0,y.hU)(o)?Number(o.substring(0,o.length-1))/100:o/s;let h=(0,a.Z)(null==n?void 0:n.angle)?n.angle:i?60:15;return{range:[l-e/2,l+e/2],breakSymbol:Object.assign(Object.assign({visible:!0},n),{angle:h*Math.PI/180}),rawRange:r}})}return r}getNewScaleRange(){var t,e;let i=super.getNewScaleRange();return(null===(t=this._spec.breaks)||void 0===t?void 0:t.length)&&(null===(e=this._break)||void 0===e?void 0:e.scope)&&(i=(0,_.zb)(this._break.scope).map(t=>i[0]+((0,o.Z$)(i)-i[0])*t)),i}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){let t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t.valueToPosition=this.valueToPosition.bind(this),t}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,m.U)(this._option.dataSet,t,f.m),t}}b.type=h.L.cartesianLinearAxis,b.specKey="axes",(0,l.jB)(b,u.E);let x=()=>{(0,p.uy)(),(0,g.pU)(),(0,c.R)(),d.F.registerComponent(b.type,b)}},6818:function(t,e,i){"use strict";i.d(e,{K:()=>b});var r=i(7501),s=i(7602),n=i(7872),a=i(855),o=i(4878),l=i(5173),h=i(8919),u=i(7773);function d(t=Number.EPSILON){return e=>Math.max(e,t)}class c extends o.y{constructor(){super((0,h.J7)(10),(0,h.ye)(10)),this.type=l._f.Log,this._limit=d(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return(new c).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();let i=(0,h.J7)(this._base),r=(0,h.ye)(this._base);return(null!==(e=this._niceDomain)&&void 0!==e?e:this._domain)[0]<0?(this._logs=t=>-i(-t),this._pows=t=>-r(-t),this._limit=function(t=Number.EPSILON){return e=>Math.min(e,-t)}(),this.transformer=h.op,this.untransformer=h.ge):(this._logs=i,this._pows=r,this._limit=d(),this.transformer=this._logs,this.untransformer=r),this}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return h.yR}d3Ticks(t=10,e){let i=this.domain(),r=this._limit(i[0]),s=this._limit(i[i.length-1]);return(0,a.e3)(r,s,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,a.jb)(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,a.RX)(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,a.RX)(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}(0,u.jB)(c,class{nice(t=10,e){var i,r,s,n;let o=this._domain,l=[],u=null;if(e){let t=(0,a.OQ)(o,e);if(l=t.niceMinMax,this._domainValidator=t.domainValidator,u=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else u="all";if(u){let t=(0,h.kx)(o.slice(),null!==(r=null===(i=this.getNiceConfig)||void 0===i?void 0:i.call(this))&&void 0!==r?r:{floor:t=>Math.floor(t),ceil:t=>Math.ceil(t)});return"min"===u?t[t.length-1]=null!==(s=l[1])&&void 0!==s?s:t[t.length-1]:"max"===u&&(t[0]=null!==(n=l[0])&&void 0!==n?n:t[0]),this._niceDomain=t,this.rescale(),this}return this}niceMin(){let t=this._domain[this._domain.length-1];this.nice();let e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){let t=this._domain[0];this.nice();let e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}});var p=i(8469),g=i(9286),m=i(1996),f=i(7092),v=i(5236),y=i(6358);class _ extends r.G{constructor(){super(...arguments),this.type=s.L.cartesianLogAxis,this._zero=!1,this._scale=new c}initScales(){var t;super.initScales(),this._scale.base(null!==(t=this._spec.base)&&void 0!==t?t:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,y.U)(this._option.dataSet,t,v.m),t}transformScaleDomain(){}}_.type=s.L.cartesianLogAxis,_.specKey="axes",(0,u.jB)(_,n.E);let b=()=>{(0,m.uy)(),(0,f.pU)(),(0,g.R)(),p.F.registerComponent(_.type,_)}},5103:function(t,e,i){"use strict";i.d(e,{w:()=>b});var r=i(6338),s=i(3881),n=i(7623),a=i(9711),o=i(9114),l=i(7501),h=i(7602),u=i(3558),d=i(8469),c=i(9286),p=i(4267),g=i(4218),m=i(1996),f=i(7092),v=i(5236),y=i(6358);class _ extends l.G{constructor(){super(...arguments),this.type=h.L.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:t=>{this.computeData(null==t?void 0:t.value),(0,o.xV)(this._regions,t=>{(0,s.yL)(this.getOrient())?(0,p.zf)(t.getXAxisHelper(),this.axisHelper(),(0,n.Z)(this._seriesUserId)||(0,n.Z)(this._seriesIndex))&&t.setXAxisHelper(this.axisHelper()):(0,p.zf)(t.getYAxisHelper(),this.axisHelper(),(0,n.Z)(this._seriesUserId)||(0,n.Z)(this._seriesIndex))&&t.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._tick=(0,g.H)({},this._spec.tick,null===(t=this._spec.layers)||void 0===t?void 0:t[0])}_initData(){var t;if(super._initData(),null===(t=this._spec.layers)||void 0===t?void 0:t[1]){let t=new r.VO(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new u.O(this._option,t)}}computeData(t){super.computeData(t),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}_getLabelFormatMethod(){var t,e,i,r,s,n,o,l;let h=a.k.getInstance(),u=(null===(e=null===(t=this._spec.layers)||void 0===t?void 0:t[1])||void 0===e?void 0:e.timeFormat)||"%Y%m%d",d="local"===((null===(r=null===(i=this._spec.layers)||void 0===i?void 0:i[1])||void 0===r?void 0:r.timeFormatMode)||"local")?h.timeFormat:h.timeUTCFormat,c=(null===(n=null===(s=this._spec.layers)||void 0===s?void 0:s[0])||void 0===n?void 0:n.timeFormat)||"%Y%m%d",p="local"===((null===(l=null===(o=this._spec.layers)||void 0===o?void 0:o[0])||void 0===l?void 0:l.timeFormatMode)||"local")?h.timeFormat:h.timeUTCFormat;return(t,e,i,r,s)=>{var n;let a;return a=0===s?p(c,t):d(u,t),(null===(n=this._spec.label)||void 0===n?void 0:n.formatMethod)?this._spec.label.formatMethod(a,e):a}}getLabelItems(t){var e,i;let r=[],s=null===(e=this.getTickData())||void 0===e?void 0:e.getLatestData();s&&s.length&&r.push(s.map(e=>(0,p.cf)(e.value,this._getNormalizedValue([e.value],t))));let n=null===(i=this._layerTickData)||void 0===i?void 0:i.getLatestData();return n&&n.length&&r.push(n.map(e=>(0,p.cf)(e.value,this._getNormalizedValue([e.value],t)))),r}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,y.U)(this._option.dataSet,t,v.m),t}transformScaleDomain(){}}_.type=h.L.cartesianTimeAxis,_.specKey="axes";let b=()=>{(0,m.uy)(),(0,f.pU)(),(0,c.R)(),d.F.registerComponent(_.type,_)}},3881:function(t,e,i){"use strict";i.d(e,{Dr:()=>d,IF:()=>l,Vz:()=>o,_Q:()=>u,mC:()=>c,x:()=>h,yL:()=>a});var r=i(7623),s=i(1960),n=i(7602);function a(t){return"bottom"===t||"top"===t}function o(t){return"left"===t||"right"===t}function l(t){return"z"===t}function h(t,e){return(0,s.vk)(t.orient)||e&&e.includes(t.orient)?t.orient:"left"}function u(t){return"top"===t||"bottom"===t?"horizontal":"vertical"}function d(t,e){let i=t.inverse;return e&&!a(t.orient)&&(i=!(0,r.Z)(t.inverse)||!t.inverse),i}function c(t,e){var i,r;let s=null!==(i=t.type)&&void 0!==i?i:(r=t.orient,e?a(r)?"linear":"band":a(r)?"band":"linear");return{axisType:s,componentName:`${n.L.cartesianAxis}-${s}`}}},7872:function(t,e,i){"use strict";i.d(e,{E:()=>y});var r=i(7623),s=i(8378),n=i(9038),a=i(4546),o=i(6082),l=i(6555),h=i(4267),u=i(3722),d=i(3881);let c=(t,e,i)=>i.reduce((t,r,s)=>(t.push([r,i.length===s+1?e:i[s+1]]),t),[[t,i[0]]]),p=(t,e)=>t-e,g=(t,e)=>{let i=[{count:0,sub:[],max:e[0],min:e[0]}],r=0,s=0;for(;r<e.length;)t[s]<=e[r]?(i[r].count+=1,i[r].sub.push(t[s]),s+=1):i[r+=1]={count:0,sub:[],max:e[r],min:e[r]};i.forEach(t=>{t.count&&(t.min=Math.min.apply(null,t.sub))});let n=t.slice(s);return i[r]={count:n.length,sub:n,min:e[e.length-1],max:Math.max.apply(null,n)},i},m=Math.sqrt(50),f=Math.sqrt(10),v=Math.sqrt(2);class y{constructor(){this._extend={},this.niceLabelFormatter=null}setExtraAttrFromSpec(){(0,r.Z)(this._spec.nice)&&(this._nice=this._spec.nice),(0,r.Z)(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=(0,h.NG)(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var t;if(!this._nice)return!1;let e=5,i=this._spec.tick||{};if((0,s.Z)(i.forceTickCount))e=i.forceTickCount;else if((0,n.Z)(i.tickCount)){let t=this._scale.range(),r=Math.abs((0,a.Z$)(t)-t[0]);1===r&&this._option&&(r=(0,d.yL)(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),e=i.tickCount({axisLength:r,labelStyle:this._spec.label&&this._spec.label.style})}else e=(0,s.Z)(i.tickCount)?i.tickCount:5;"accurateFirst"===this._spec.niceType&&(e=Math.max(5,e));let{min:l,max:h}=null!==(t=this._domain)&&void 0!==t?t:{};return(0,o.Z)(l)&&(0,o.Z)(h)&&(0,o.Z)(this._softMaxValue)&&(0,o.Z)(this._softMinValue)?this._scale.nice(e):((0,r.Z)(l)||(0,r.Z)(this._softMinValue))&&(0,o.Z)(h)&&(0,o.Z)(this._softMaxValue)?this._scale.niceMax(e):!(!(0,o.Z)(l)||!(0,o.Z)(this._softMinValue)||!(0,r.Z)(h)&&!(0,r.Z)(this._softMaxValue))&&this._scale.niceMin(e)}setLogScaleNice(){var t;if(!this._nice)return!1;let{min:e,max:i}=null!==(t=this._domain)&&void 0!==t?t:{};return(0,o.Z)(e)&&(0,o.Z)(i)&&(0,o.Z)(this._softMaxValue)&&(0,o.Z)(this._softMinValue)?this._scale.nice():((0,r.Z)(e)||(0,r.Z)(this._softMinValue))&&(0,o.Z)(i)&&(0,o.Z)(this._softMaxValue)?this._scale.niceMax():!(!(0,o.Z)(e)||!(0,o.Z)(this._softMinValue)||!(0,r.Z)(i)&&!(0,r.Z)(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return"log"===this._spec.type?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(t,e){return this.valueToPosition(t[0])}valueToPosition(t){return this._scale.scale(t)}computeLinearDomain(t){let e=[];if(t.length){let n=this._spec.breaks&&this._spec.breaks.length,a,h,u=[];if(t.forEach(t=>{let{min:e,max:i}=t;a=void 0===a?e:Math.min(a,e),h=void 0===h?i:Math.max(h,i),n&&(u=u.concat(t.values))}),n){let t=[],n=[],d=(0,o.Z)(this._domain.max)?h:this._domain.max;for(let e=0;e<this._spec.breaks.length;e++){let{range:i}=this._spec.breaks[e];i[0]<=i[1]&&i[1]<=d&&(t.push(i),n.push(this._spec.breaks[e]))}if(t.sort((t,e)=>t[0]-e[0]),t.length){var i,r,s;let{domain:a,scope:o}=(i=u,r=(0,l.zb)(t),s=this._spec.breaks[0].scopeType,i.sort(p),r.sort(p),{domain:function(t,e){let i=t[0],r=t[t.length-1],s=e.filter(t=>t>i&&t<r);return 0===s.length?[[i,r]]:c(i,r,s)}(i,r),scope:function(t,e,i="count"){let r=g(t,e),s="count"===i?t.length:r.reduce((t,e,i)=>e.count>0?t+e.max-e.min:t,0),n=[],a=0,o=0;return r.forEach((t,e)=>{if(0===s)n.push([0,e/r.length-1]);else{let l="count"===i?t.count:t.max-t.min,h=n[o-1]?n[o-1][1]:0,u=e===r.length-1?1:Math.min((a+l)/s,1);(h!==u||0!==h&&1!==h)&&(o+=1,n.push([h,u]),a+=l)}}),n}(i,r,s)});e=(0,l.zb)(a),this._break={domain:a,scope:o,breakDomains:t,breaks:n}}else e=[a,h]}else e=[a,h]}else e[0]=0,e[1]=0;return this.setSoftDomainMinMax(e),this.expandDomain(e),this.includeZero(e),this.setDomainMinMax(e),e}expandDomain(t){if(!this._expand)return;let e=t[0],i=(0,a.Z$)(t);e===i&&(0===i?i=1:i>0?e=0:i<0&&(i=0)),(0,r.Z)(this._expand.min)&&(t[0]=e-(i-e)*this._expand.min),(0,r.Z)(this._expand.max)&&(t[t.length-1]=i+(i-e)*this._expand.max)}niceDomain(t){let{min:e,max:i}=(0,h.NG)(this._spec);if((0,r.Z)(e)||(0,r.Z)(i)||"linear"!==this._spec.type)return t;if(1e-12>=Math.abs((0,a.iH)(t)-(0,a.CE)(t))){let e=t[0],i=e>=0?1:-1;if((e=Math.abs(e))<1)t[0]=0,t[t.length-1]=1;else{let i=e/5,r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);i=(s>=m?10:s>=f?5:s>=v?2:1)*Math.pow(10,r),t[0]=0,t[t.length-1]=10*i}i<0&&(t.reverse(),t[0]*=-1,t[t.length-1]*=-1)}return t}includeZero(t){this._zero&&(t[0]=Math.min(t[0],0),t[t.length-1]=Math.max((0,a.Z$)(t),0))}setExtendDomain(t,e){if(void 0===e)return void delete this._extend[t];this._extend[t]=e;let i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this.event.emit(u.$7.scaleUpdate,{model:this,value:"domain"})}extendDomain(t){let e;let i=t.length-1,r=t[0]-t[i]>0,s=r?i:0,n=r?0:i;for(let i in this._extend)(e=this._extend[i])>t[n]&&(t[n]=e),e<t[s]&&(t[s]=e)}getDomainSpec(){return this._domain}setDomainMinMax(t){if(!this._domain)return;let{min:e,max:i}=this._domain;(0,r.Z)(e)&&(t[0]=e),(0,r.Z)(i)&&(t[t.length-1]=i)}setSoftDomainMinMax(t){let{softMin:e,softMax:i}=this._spec;if((0,r.Z)(e)){let i=(0,n.Z)(e)?e(t):e;(0,o.Z)(i)&&(i=t[0]),i<=t[0]&&(t[0]=i,this._softMinValue=i)}if((0,r.Z)(i)){let e=(0,n.Z)(i)?i(t):i;(0,o.Z)(e)&&(e=(0,a.Z$)(t)),e>=(0,a.Z$)(t)&&(t[t.length-1]=e),this._softMaxValue=e}}setZero(t){this._zero!==t&&(this._zero=t,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;let t=this.collectData(),e=this.computeLinearDomain(t);this.updateScaleDomainByModel(e)}updateScaleDomainByModel(t){t=null!=t?t:this._scale.domain(),this.extendDomain(t),this.includeZero(t),this.setDomainMinMax(t),this.niceDomain(t),this._scale.domain(t,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this._updateNiceLabelFormatter(t),this._domainAfterSpec=this._scale.domain(),this.event.emit(u.$7.scaleDomainUpdate,{model:this}),this.event.emit(u.$7.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(t){let e=Math.pow(10,Math.max(-Math.floor(Math.log10(Math.abs((0,a.Z$)(t)-t[0]))),0)+2);this.niceLabelFormatter=t=>(0,s.Z)(+t)?Math.round(+t*e)/e:t}}},4267:function(t,e,i){"use strict";i.d(e,{$P:()=>g,IM:()=>m,NG:()=>d,Rb:()=>l,Vn:()=>c,bi:()=>u,cf:()=>f,lc:()=>h,xy:()=>p,zf:()=>v});var r=i(1130),s=i(4218),n=i(123),a=i(3881),o=i(2096);let l={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function h(t){return(t=(0,n.ro)(t)).startSymbol=(0,n.ro)(t.startSymbol),t.endSymbol=(0,n.ro)(t.endSymbol),t}function u(t){let e=0;return(0,r.Z)(t,"tick.visible")&&(e+=(0,r.Z)(t,"tick.tickSize")),(0,r.Z)(t,"label.visible")&&(e+=(0,r.Z)(t,"label.space")),e}function d(t,e){var i,r,s,n,a,o;return{min:null!==(s=null!==(i=t.min)&&void 0!==i?i:null===(r=t.range)||void 0===r?void 0:r.min)&&void 0!==s?s:null==e?void 0:e.min,max:null!==(o=null!==(n=t.max)&&void 0!==n?n:null===(a=t.range)||void 0===a?void 0:a.max)&&void 0!==o?o:null==e?void 0:e.max}}function c(t){let e=null==t?void 0:t.orient;return"top"===e||"bottom"===e||"left"===e||"right"===e||"z"===e}let p=(t,e,i)=>{var r;let n=null!==(r="band"===e?(0,o.DE)("axisBand",i):["linear","log","symlog"].includes(e)?(0,o.DE)("axisLinear",i):{})&&void 0!==r?r:{},l=(0,a.yL)(t)?(0,o.DE)("axisX",i):(0,a.Vz)(t)?(0,o.DE)("axisY",i):(0,o.DE)("axisZ",i);return(0,s.H)({},(0,o.DE)("axis",i),n,l)},g=(t,e,i)=>{var r;let n=null!==(r="band"===e?(0,o.DE)("axisBand",i):"linear"===e?(0,o.DE)("axisLinear",i):{})&&void 0!==r?r:{},a=(0,o.DE)("angle"===t?"axisAngle":"axisRadius",i);return(0,s.H)({},(0,o.DE)("axis",i),n,a)},m=t=>"band"===t||"ordinal"===t||"point"===t;function f(t,e){return{id:t,label:t,value:e,rawValue:t}}function v(t,e,i){return i||!t||t.getAxisId()===e.getAxisId()}},2930:function(t,e,i){"use strict";i.d(e,{r:()=>c});var r=i(397),s=i(1960),n=i(3881),a=i(4267),o=i(3231),l=i(7602),h=i(2096),u=i(4218);let d=(t,e)=>{var i;let r=null!==(i=t.orient)&&void 0!==i?i:e.orient,s=e[(0,n._Q)(r)],a=(0,u.H)({},e,s);return delete a.horizontal,delete a.vertical,a};class c extends r.T{getTheme(t,e){return function(t,e,i,r){switch(t){case l.L.cartesianBandAxis:return(0,a.xy)((0,n.x)(i,["z"]),"band",e);case l.L.cartesianLinearAxis:return(0,a.xy)((0,n.x)(i,["z"]),"linear",e);case l.L.cartesianLogAxis:return(0,a.xy)((0,n.x)(i,["z"]),"log",e);case l.L.cartesianSymlogAxis:return(0,a.xy)((0,n.x)(i,["z"]),"symlog",e);case l.L.cartesianAxis:case l.L.cartesianTimeAxis:return(0,a.xy)((0,n.x)(i),void 0,e);case l.L.polarBandAxis:return(0,a.$P)(i.orient,"band",e);case l.L.polarLinearAxis:return(0,a.$P)(i.orient,"linear",e);case l.L.polarAxis:return(0,a.$P)(i.orient,void 0,e);case l.L.cartesianCrosshair:return(0,o.U_)(e,r);case l.L.polarCrosshair:return(0,o.bB)(e,r);case l.L.colorLegend:case l.L.sizeLegend:case l.L.discreteLegend:case l.L.dataZoom:case l.L.scrollBar:return d(i,(0,h.DE)(t,e));default:return(0,h.DE)(t,e)}}(this.type,this._option.getTheme(),t,e)}_mergeThemeToSpec(t,e){let{spec:i,theme:r}=super._mergeThemeToSpec(t,e);return this._adjustPadding(i),{spec:i,theme:r}}_adjustPadding(t){let{padding:e,noOuterPadding:i=!0,orient:r}=t;i&&e&&r&&(t.padding=Object.assign(Object.assign({},(0,s.Ek)(e)),{[r]:0}))}}},8746:function(t,e,i){"use strict";i.d(e,{H:()=>c});var r=i(3),s=i(6883);class n extends s.I{constructor(t){super(),this.component=t}releaseAll(){super.releaseAll(),this.component=null}}var a=i(9730),o=i(3722),l=i(1125),h=i(881),u=i(2930),d=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class c extends h.r{static createComponent(t,e){let{spec:i}=t,r=d(t,["spec"]);return new this(i,Object.assign(Object.assign({},e),r))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new n(this)}constructor(t,e){super(t,e),this.name="component",this.modelType="component",this.transformerConstructor=u.r,this._delegateEvent=(t,e,i,s=null,n=null)=>{var a,l;e instanceof r.A||this.event.emit(i,{model:this,node:t,event:e,item:s,datum:n,source:o.AY.chart,chart:null===(l=null===(a=this._option)||void 0===a?void 0:a.globalInstance)||void 0===l?void 0:l.getChart()},"model")},this._option.animation&&(this.animate=new l.W({getCompiler:e.getCompiler}))}initLayout(){var t;super.initLayout(),this._regions=null!==(t=this._regions)&&void 0!==t?t:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(t=>null==t?void 0:t.id))}changeRegions(t){throw Error("Method not implemented.")}_getNeedClearVRenderComponents(){throw Error("Method not implemented.")}onRender(t){throw Error("Method not implemented.")}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(t){this.pluginService&&this.pluginService.getAll().forEach(e=>t(e))}getContainer(){var t;return this._container||(this._container=null===(t=this._option)||void 0===t?void 0:t.globalInstance.getStage().find(t=>"root"===t.name,!0)),this._container}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(i.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(i=>!(0,a.X)(null==e?void 0:e[i],t[i]))),(null==e?void 0:e.visible)!==t.visible&&(i.reCompile=!0),i}release(){var t;super.release(),this.clear(),null===(t=this.pluginService)||void 0===t||t.releaseAll(),this.pluginService=null}clear(){var t;let e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(t=>{var e;t&&(null===(e=this.getContainer())||void 0===e||e.removeChild(t),t=null)}),this._container=null,null===(t=this.pluginService)||void 0===t||t.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t,context:{model:this}})})}reAppendComponents(){let t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(t=>{var e;t&&!t.stage&&(null===(e=this.getContainer())||void 0===e||e.appendChild(t))})}getBoundsInRect(t,e){return{x1:0,x2:0,y1:0,y2:0}}getDatum(t){}}c.transformerConstructor=u.r},9026:function(t,e,i){"use strict";i.d(e,{i:()=>z});var r,s,n=i(7623),a=i(7602),o=i(325),l=i(3e3);class h extends l.k{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}var u=i(9367),d=i(9536),c=i(7307);(0,u.M)(),(0,d.N)();class p extends h{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,o.Z)({},p.defaultAttributes,t))}renderCrosshair(t){let{start:e,end:i,lineStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-line",Object.assign({points:[e,i]},r),"line")}setLocation(t){let{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}p.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},(0,u.M)(),(0,c.k)();class g extends h{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,o.Z)({},g.defaultAttributes,t))}renderCrosshair(t){let{start:e,end:i,rectStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-rect",Object.assign({x:e.x,y:e.y,width:i.x-e.x,height:i.y-e.y},r),"rect")}setLocation(t){let{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}g.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}};var m=i(7078),f=i(1601),v=i(6689),y=i(4154),_=i(9730),b=i(7636),x=i(4546),S=i(1130),A=i(1036),k=i(2683),w=i(6962),C=i(8746),T=i(2732),E=i(3722),M=i(6542),B=i(7631);(r=s||(s={}))[r.ALL=3]="ALL",r[r.HORIZONTAL=2]="HORIZONTAL",r[r.VERTICAL=1]="VERTICAL";var D=i(3231),O=i(5173),P=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let I={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class R extends C.H{get enableRemain(){return"none"===this.triggerOff}constructor(t,e){super(t,e),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=M.Ai.CrossHair_Grid,this.labelZIndex=M.Ai.CrossHair,this.trigger="hover",this._handleIn=t=>{if(!this._option)return;let{x:e,y:i}=this.calculateTriggerPoint(t);this.showDefault=!1,this._layoutCrosshair(e,i);let r=this._getNeedClearVRenderComponents();this._hasActive=r.some(t=>t&&!1!==t.attribute.visible)},this._handleClickInEvent=t=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(t),(0,f.Z)(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=(0,v.Z)(t=>{this._clickLock||this._handleIn(t)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hide())},this._handleTooltipShow=t=>{let e=t.tooltipData;if(t.isEmptyTooltip||!e||!e.length||(0,y.Z)(this._spec.followTooltip)&&!1===this._spec.followTooltip[t.activeType])return void this._handleTooltipHideOrRelease();let{x:i,y:r}=this.calculateTriggerPoint(t);this.showDefault=!1,this._layoutCrosshair(i,r,e,t.activeType);let s=this._getNeedClearVRenderComponents();this._hasActive=s.some(t=>t&&!1!==t.attribute.visible)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hide()},this.enable=!0,this.showDefault=!0}_setAllAxisValues(t,e,i){let r=!1;if(t.forEach(t=>{(0,O.lK)(t.axis.getScale().type)&&(r?this.enable=!1:r=!0)}),!this.enable)return!1;let{currentValue:s}=this._stateByField[i];return t.forEach((t,i)=>{let r=t.axis;s.set(i,{datum:this._getDatumAtPoint(r,e),axis:r})}),!0}clearAxisValue(){Object.keys(this._stateByField).forEach(t=>{this._stateByField[t].currentValue.clear()})}hideCrosshair(){this.clearAxisValue(),this.hide()}showCrosshair(t){t&&t.length&&(this.showDefault=!1,this.clearAxisValue(),t.forEach(t=>{let{axis:e,value:i}=t;this.setAxisValue(i,e)}),this.layoutByValue())}_getLimitBounds(){var t,e;if(!this._limitBounds){let{width:i,height:r}=null!==(e=null===(t=this._option.globalInstance.getChart())||void 0===t?void 0:t.getViewRect())&&void 0!==e?e:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:r}}return this._limitBounds}_showDefaultCrosshairBySpec(){Object.keys(this._stateByField).forEach(t=>{let e=this._spec[t];if(e&&e.visible&&e.defaultSelect){let{axisIndex:i,datum:r}=e.defaultSelect,s=this._option.getComponentsByKey("axes").find(t=>t.getSpecIndex()===i);s&&(this._stateByField[t].currentValue.clear(),this._stateByField[t].currentValue.set(i,{axis:s,datum:r}))}})}_updateVisibleCrosshair(){let t=!1;Object.keys(this._stateByField).forEach(e=>{let i=this._spec[e];i&&i.visible&&this._stateByField[e].currentValue.size?t=!0:this._hideByField(e)}),t&&this.layoutByValue()}_showDefaultCrosshair(){this.showDefault?(this._showDefaultCrosshairBySpec(),this.layoutByValue()):this._updateVisibleCrosshair()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(0,_.X)(e,t)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(!this._option.disableTriggerEvent){if(this._spec.followTooltip)this._registerTooltipEvent();else{let t=this._getTriggerEvent();t&&t.forEach(t=>{this._registerEvent(t.in,!1,t.click),t.out&&this._registerEvent(t.out,!0)})}}}_registerEvent(t,e,i){let r=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent,s=e?{level:E.l.chart}:{source:E.AY.chart};(0,b.Z)(t)?t.forEach(t=>{this.event.on(t,s,r)}):this.event.on(t,s,r)}_eventOff(t,e,i){let r=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent;(0,b.Z)(t)?t.forEach(t=>{this.event.off(t,r)}):this.event.off(t,r)}updateLayoutAttribute(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(t){let{event:e}=t,i=this._option.getCompiler().getStage().getLayer(void 0),r={x:e.viewX,y:e.viewY};return i.globalTransMatrix.transformPoint({x:e.viewX,y:e.viewY},r),{x:r.x-this.getLayoutStartPoint().x,y:r.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){let{mode:t=w.i["desktop-browser"]}=this._option,e=t===w.i["desktop-browser"]||t===w.i["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:(0,B.wx)(t)||(0,B.Oy)(t)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null;if(e){let t=(0,x.IX)(this.trigger||"hover"),i=t=>"click"===t?"none"===this.triggerOff?null:e.clickOut:e.hoverOut;this._spec.lockAfterClick&&!t.includes("click")?(t.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;let r=[];return t.forEach(t=>{r.push({click:"click"===t,in:e[t],out:i(t)})}),r}return null}_registerTooltipEvent(){this.event.on(E.$7.tooltipHide,{source:E.AY.chart},this._handleTooltipHideOrRelease),this.event.on(E.$7.tooltipShow,{source:E.AY.chart},this._handleTooltipShow),this.event.on(E.$7.tooltipRelease,{source:E.AY.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(t){var e,i;let r=null===(i=(e=this._option).getComponentsByKey)||void 0===i?void 0:i.call(e,"axes");if(!(null==r?void 0:r.length))return null;let s=(0,S.Z)(this._spec,`${t}Field.bindingAxesIndex`);if(s||(s=[],r.forEach((e,i)=>{I[t].includes(e.getOrient())&&s.push(i)})),!s.length)return null;let n=new Map,a=1/0,o=1/0,l=-1/0,h=-1/0,{x:u,y:d}=this.getLayoutStartPoint();return s.forEach(t=>{a=1/0,o=1/0,l=-1/0,h=-1/0;let e=r.find(e=>e.getSpecIndex()===t);e&&(e.getRegions().forEach(t=>{let{x:e,y:i}=t.getLayoutStartPoint();a=Math.min(a,e-u),o=Math.min(o,i-d),l=Math.max(l,e+t.getLayoutRect().width-u),h=Math.max(h,i+t.getLayoutRect().height-d)}),n.set(t,{x1:a,y1:o,x2:l,y2:h,axis:e}))}),n}changeRegions(t){}onLayoutEnd(t){let e=this._regions[0];this.setLayoutRect(e.getLayoutRect()),this.setLayoutStartPosition(e.getLayoutStartPoint()),super.onLayoutEnd(t)}onRender(t){}_releaseEvent(){this.clearOutEvent();let t=this._getTriggerEvent();t&&t.forEach(t=>{this._eventOff(t.in,!1,t.click),t.out&&this._eventOff(t.out,!0)})}_parseFieldInfo(){Object.keys(this._stateByField).forEach(t=>{let e=this._spec[t],{crosshairComp:i}=this._stateByField[t];if(e&&e.visible){if(this._stateByField[t].attributes=this._parseField(e,t),i){let{style:e,type:r}=this._stateByField[t].attributes;i.setAttributes({["rect"===r?"rectStyle":"lineStyle"]:e})}}else i&&i.parent&&i.parent.removeChild(i)})}_parseCrosshairSpec(){this._parseFieldInfo();let{trigger:t,triggerOff:e,labelZIndex:i,gridZIndex:r}=this._spec;t&&(this.trigger=t),("none"===e||(0,f.Z)(e)&&e>0)&&(this.triggerOff=e),void 0!==i&&(this.labelZIndex=i),void 0!==r&&(this.gridZIndex=r)}_parseField(t,e){var i,r;let s={},{line:n={},label:a={},visible:o}=t;if(s.visible=o,s.type=n.type||"line",!1===n.visible)s.style={visible:!1};else{let e=n.style||{},{stroke:a,fill:o,lineWidth:l}=e,{strokeOpacity:h,fillOpacity:u,opacity:d}=e,c=P(e,["strokeOpacity","fillOpacity","opacity"]),p="line"===s.type,g=p?h:u;if((0,f.Z)(d)&&(g=(null!=g?g:1)*d),s.style=Object.assign({opacity:g,pickable:!1,visible:!0},c),p)s.style.stroke=a||o,s.style.lineWidth=(0,S.Z)(n,"width",l||2);else{s.style.fill=o||a,(null===(r=null===(i=null==t?void 0:t.line)||void 0===i?void 0:i.style)||void 0===r?void 0:r.stroke)&&(s.style.stroke=t.line.style.stroke);let e=(0,S.Z)(n,"width");if("string"==typeof e){let t=parseInt(e.substring(0,e.length-1),10)/100;s.style.sizePercent=t}else"number"!=typeof e&&"function"!=typeof e||(s.style.size=e)}}if(a.visible){let t=a.labelBackground||{},e=a.style||{},i=t.style||{},{fill:r="rgba(47, 59, 82, 0.9)",stroke:n,outerBorder:o}=i,l=P(i,["fill","stroke","outerBorder"]);s.label={visible:!0,formatMethod:a.formatMethod,formatter:a.formatter,minWidth:t.minWidth,maxWidth:t.maxWidth,padding:t.padding,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},e),{fill:e.fill||"#fff",stroke:(0,S.Z)(e,"stroke")}),panel:((0,A.Z)(t.visible)?t.visible:t)?Object.assign({visible:!0,pickable:!1,fill:r,stroke:n,outerBorder:Object.assign({stroke:r,distance:0,lineWidth:3},o)},l):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else s.label={visible:!1};return s}_filterAxisByPoint(t,e,i){return t&&t.forEach(r=>{let s=r.axis;if((0,T.Nl)(r,e,i)&&t.delete(s.getSpecIndex()),s.type.startsWith("polarAxis")){let r=s.getCenter(),n=s.getInnerRadius(),a=s.getOuterRadius(),o=k.HL.distancePP({x:e,y:i},r);(o>a||o<n)&&t.delete(s.getSpecIndex())}}),t}_updateCrosshairLabel(t,e,i){let r=this.getContainer();t?t.setAttributes(e):(t=new m.V(e),null==r||r.add(t),i(t)),(0,D.Xu)(t,this._getLimitBounds())}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}_hideByField(t){let{crosshairComp:e,labelsComp:i}=this._stateByField[t];e&&e.hideAll(),i&&Object.keys(i).forEach(t=>{i[t]&&i[t].hideAll()})}hide(){Object.keys(this._stateByField).forEach(t=>{this._hideByField(t)})}_getNeedClearVRenderComponents(){return Object.keys(this._stateByField).reduce((t,e)=>{let{crosshairComp:i,labelsComp:r}=this._stateByField[e];return i&&t.push(i),r&&Object.keys(r).forEach(e=>{r[e]&&t.push(r[e])}),t},[])}}R.specKey="crosshair";var L=i(3881),F=i(8469),j=i(6549),Z=i(9114),H=i(2096);class N extends R{static getSpecInfo(t){return(0,H.ts)(t,this.specKey,this.type,t=>t.xField&&!1!==t.xField.visible||t.yField&&!1!==t.yField.visible)}constructor(t,e){super(t,e),this.type=a.L.cartesianCrosshair,this.name=a.L.cartesianCrosshair,this._stateByField={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:new Map,labelsComp:{top:null,bottom:null}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:new Map,labelsComp:{left:null,right:null}}}}_findAllAxisContains(t,e){let i=this._getAxisInfoByField("x"),r=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,t,e),yAxisMap:this._filterAxisByPoint(r,t,e)}}_getDatumAtPoint(t,e){let i=(0,L.yL)(t.getOrient())?"x":"y",r=e[i]-(t.getLayoutStartPoint()[i]-this.getLayoutStartPoint()[i]);return t.getScale().invert(r)}setAxisValue(t,e){(0,L.yL)(e.getOrient())?this._stateByField.xField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e}):this._stateByField.yField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e})}_layoutCrosshair(t,e,i,r){var s;let a=t,o=e;if(i&&i.length){if("dimension"===r){let t;let e=i[0],r=e.data.findIndex(t=>t.datum.length>0);if(r>-1){let i=e.data[r];t=i.series.dataToPosition(i.datum[0])}((0,n.Z)(e.dimType)?"y"===e.dimType:(0,L.Vz)(null===(s=null==e?void 0:e.axis)||void 0===s?void 0:s.getOrient()))?o=null==t?void 0:t.y:a=null==t?void 0:t.x}else if("mark"===r){let t=i[0],e=t.series.dataToPosition(t.datum[0]);a=null==e?void 0:e.x,o=null==e?void 0:e.y}}this.clearAxisValue();let{xAxisMap:l,yAxisMap:h}=this._findAllAxisContains(a,o);if(l&&0===l.size||h&&0===h.size){if(this.enableRemain)return;this.hide()}else l&&l.size&&this._setAllAxisValues(l,{x:a,y:o},"xField"),h&&h.size&&this._setAllAxisValues(h,{x:a,y:o},"yField"),this.layoutByValue(3)}layoutByValue(t=3){if(!this.enable)return;let e=(0,Z.Sr)(this._regions,"cartesian");e&&((0,j.w)(this._stateByField,e,this.getLayoutStartPoint(),this.enableRemain),Object.keys(this._stateByField).forEach(t=>{this._layoutByField(t)}))}_layoutByField(t){let{cacheInfo:e,attributes:i,labelsComp:r,bandSize:s,coordKey:n}=this._stateByField[t];if(!i||!e||e._isCache&&this.enableRemain)return;let{coord:a,labels:o,visible:l,labelsTextStyle:h}=e;if(l){let e=(0,j.p)(this._stateByField[t]);this._updateCrosshairByField(t,e),Object.keys(o).forEach(e=>{var l;if(o[e].visible){let u=Object.assign(Object.assign(Object.assign({[n]:a+s/2},o[e]),i.label),{textStyle:Object.assign(Object.assign({},null===(l=i.label)||void 0===l?void 0:l.textStyle),h[e]),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(r[e],u,i=>{i.name=`crosshair-${t.replace("Field","")}-${e}-label`,r[e]=i})}else r[e]&&r[e].hideAll()})}else this._hideByField(t)}_updateCrosshairByField(t,e){let i=this.getContainer(),{attributes:r}=this._stateByField[t],{crosshairComp:s}=this._stateByField[t];if(s)s.setAttributes(e);else{let n=r.style;"line"===r.type?s=new p(Object.assign(Object.assign({},e),{lineStyle:n,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):"rect"===r.type&&(s=new g(Object.assign(Object.assign({},e),{rectStyle:n,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),null==i||i.add(s),this._stateByField[t].crosshairComp=s}}}N.specKey="crosshair",N.type=a.L.cartesianCrosshair;let z=()=>{F.F.registerComponent(N.type,N)}},6549:function(t,e,i){"use strict";i.d(e,{p:()=>d,w:()=>l});var r=i(5173),s=i(3231),n=i(4267),a=i(7623),o=i(2096);let l=(t,e,i,o=!1)=>(i||(i={x:0,y:0}),Object.keys(t).forEach(l=>{let d;let{currentValue:c,cacheInfo:p,labelsComp:g,attributes:m,coordKey:f}=t[l],v=null,y=0;if(c.size){let t=Array.from(c.values())[0];y=t.axis.getScale().scale(t.datum)+t.axis.getLayoutStartPoint()[f]-i[f],v=t.axis}let _=!!c.size&&Number.isFinite(y),b=o&&!_&&(0,a.Z)(p),x=b?p:{coordRange:[0,0],sizeRange:[0,0],coord:y,labelsTextStyle:{},labels:g?Object.keys(g).reduce((t,e)=>(t[e]={visible:!1,text:"",dx:0,dy:0},t),{}):null,visible:_,axis:v};x&&(x._isCache=b);let S=0;if(m&&c.forEach(({axis:t,datum:i=""})=>{var a;let o=null,h=t.getScale();if((0,r.lK)(h.type))0===(d=h.bandwidth())&&h.step&&(S=h.step());else if((0,r.z2)(h.type)){let r="xField"===l?e.fieldX[0]:e.fieldY[0],n="xField"===l?e.fieldX2:e.fieldY2,a=(0,s.Op)(e.getViewData().latestData,+i,r,n);if(a){let t="xField"===l?e.dataToPositionX(a):e.dataToPositionY(a);n?(d=Math.abs(t-("xField"===l?e.dataToPositionX1(a):e.dataToPositionY1(a))),i=`${a[r]} ~ ${a[n]}`):d=1,y=t}o=t.niceLabelFormatter}if(x&&(null===(a=m.label)||void 0===a?void 0:a.visible)&&!b){let e=(0,n.bi)(t.getSpec()),r=t.getOrient();x.labels[r]&&(x.labels[r].visible=!0,x.labels[r].text=i,"left"===r?(x.labels[r].dx=-e,x.labelsTextStyle[r]={textAlign:"right",textBaseline:"middle"}):"right"===r?(x.labels[r].dx=e,x.labelsTextStyle[r]={textAlign:"left",textBaseline:"middle"}):"top"===r?(x.labels[r].y=0,x.labels[r].dy=-e,x.labelsTextStyle[r]={textAlign:"center",textBaseline:"bottom"}):"bottom"===r&&(x.labels[r].dy=e,x.labelsTextStyle[r]={textAlign:"center",textBaseline:"top"}),x.labels[r].defaultFormatter=o)}}),x&&!b){let t={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};u(t,c),"xField"===l?(x.coordRange=[t.x1,t.x2],x.sizeRange=[t.y1,t.y2],x.coord=y+i.x,x.labels&&(x.labels.top.y=t.y1,x.labels.bottom.y=t.y2)):(x.coordRange=[t.y1,t.y2],x.sizeRange=[t.x1,t.x2],x.coord=y+i.y,x.labels&&(x.labels.left.x=t.x1,x.labels.right.x=t.x2)),(x.coord<x.coordRange[0]||x.coord>x.coordRange[1])&&(x.visible=!1),m&&m.label&&Object.keys(x.labels).forEach(t=>{x.labels[t].visible&&h(x.labels[t],t,m.label)})}t[l].bandSize=null!=d?d:0,t[l].offsetSize=S,t[l].cacheInfo=x}),t),h=(t,e,i)=>{let{formatMethod:r,formatter:s}=i,{formatFunc:n,args:a}=(0,o.HJ)(r,s,t.text,{label:t.text,position:e});n?t.text=n(...a):t.defaultFormatter&&(t.text=t.defaultFormatter(t.text))},u=(t,e)=>{e.forEach(({axis:e})=>{e.getRegions().forEach(e=>{let{x:i,y:r}=e.getLayoutStartPoint(),{width:s,height:n}=e.getLayoutRect();t.x1=Math.min(t.x1,i),t.y1=Math.min(t.y1,r),t.x2=Math.max(t.x2,i+s),t.y2=Math.max(t.y2,r+n)})})},d=t=>{let e;let{cacheInfo:i,attributes:r,bandSize:s,offsetSize:n,coordKey:a,anotherAxisKey:o}=t,{coord:l,sizeRange:h}=i,u=r.type;if("line"===u){let t=l+s/2;e={visible:!0,start:{[a]:t,[o]:h[0]},end:{[a]:t,[o]:h[1]}}}else if("rect"===u){let t=c(r,s,i.axis),{coordRange:u}=i;e={visible:!0,start:{[a]:Math.max(l-t/2-n/2,u[0]),[o]:h[0]},end:{[a]:Math.min(l+s+t/2+n/2,u[1]),[o]:h[1]}}}return e},c=(t,e,i)=>{var r,s,n;let a=0;if(null===(r=t.style)||void 0===r?void 0:r.sizePercent)a=(t.style.sizePercent-1)*e;else if("number"==typeof(null===(s=t.style)||void 0===s?void 0:s.size))a=t.style.size-e;else if("function"==typeof(null===(n=t.style)||void 0===n?void 0:n.size)){let r=i.getLayoutRect();a=t.style.size(r,i)-e}return a}},3231:function(t,e,i){"use strict";i.d(e,{Op:()=>c,U_:()=>p,Xu:()=>d,bB:()=>g});var r=i(4546),s=i(7623),n=i(3881),a=i(5173),o=i(2096),l=i(7602),h=i(4267),u=i(4218);function d(t,e){let{x1:i,y1:r,x2:s,y2:n}=e,{x1:a,y1:o,x2:l,y2:h}=t.AABBBounds,{dx:u=0,dy:d=0}=t.attribute,c=0,p=0;a<i&&(c=i-a),o<r&&(p=r-o),l>s&&(c=s-l),h>n&&(p=n-h),c&&t.setAttribute("dx",c+u),p&&t.setAttribute("dy",p+d)}function c(t,e,i,r){for(let s=0,n=t.length;s<n;s++){let n=t[s];if(n){let t=n[i],s=n[r||i];if(t<=e&&s>=e)return n}}return null}let p=(t,e)=>{var i,d;let c;let p=(0,r.IX)(null!==(i=e.axes)&&void 0!==i?i:[]),{bandField:g,linearField:m,xField:f,yField:v}=null!==(d=(0,o.DE)(l.L.crosshair,t))&&void 0!==d?d:{},y=p.find(t=>(0,n.yL)(t.orient));c=(0,s.Z)(y)?(0,u.H)({},(0,h.IM)(y.type)?g:m,f):f;let _=p.find(t=>(0,n.Vz)(t.orient));return{xField:c,yField:(0,s.Z)(_)?(0,u.H)({},(0,a.lK)(_.type)?g:m,v):v}},g=(t,e)=>{var i,n;let d;let c=(0,r.IX)(null!==(i=e.axes)&&void 0!==i?i:[]),{bandField:p,linearField:g,categoryField:m,valueField:f}=null!==(n=(0,o.DE)(l.L.crosshair,t))&&void 0!==n?n:{},v=c.find(t=>"angle"===t.orient);d=(0,s.Z)(v)?(0,u.H)({},(0,h.IM)(v.type)?p:g,m):m;let y=c.find(t=>"radius"===t.orient);return{categoryField:d,valueField:(0,s.Z)(y)?(0,u.H)({},(0,a.lK)(y.type)?p:g,f):f}}},3127:function(t,e,i){"use strict";i.d(e,{U:()=>m});var r=i(8746),s=i(7602),n=i(6542),a=i(3685),o=i(7623),l=i(6082),h=i(8378),u=i(9730),d=i(7393),c=i(8469),p=i(208);class g extends r.H{constructor(){super(...arguments),this.type=s.L.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=n.Ai.CustomMark,this.layoutLevel=n.pM.CustomMark}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return null===(i=this._option.globalScale.getScale(t))||void 0===i?void 0:i.scale(e)}}}initMarks(){if(!this._spec)return;let t=this._option&&this._option.getAllSeries(),e=!1!==this._option.animation,i=[];t&&t.length&&t.forEach(t=>{let e=t&&t.getMarksWithoutRoot();e&&e.length&&e.forEach(t=>{i.push(t)})});let r=null;if(this._spec.parent){let t=this.getChart().getAllMarks().find(t=>t.getUserId()===this._spec.parent);"group"===t.type&&(r=t)}this._createExtensionMark(this._spec,r,`${a.Bq}_series_${this.id}_extensionMark`,0,{depend:i,hasAnimation:e})}_createExtensionMark(t,e,i,r=0,s){var n;let a=this._createMark({type:t.type,name:(0,o.Z)(t.name)?`${t.name}`:`${i}_${r}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:t.componentType,key:t.dataKey});if(a){if((0,o.Z)(t.id)&&a.setUserId(t.id),s.hasAnimation&&t.animation){let e=(0,p._8)({},(0,p.hT)(t.type,t,this._markAttributeContext));a.setAnimationConfig(e)}if(s.depend&&s.depend.length&&a.setDepend(...s.depend),(0,l.Z)(e)?this._marks.addMark(a):e&&e.addMark(a),this.initMarkStyleWithSpec(a,t),"group"===t.type&&(i=`${i}_${r}`,null===(n=t.children)||void 0===n||n.forEach((t,e)=>{this._createExtensionMark(t,a,i,e,s)})),(0,o.Z)(t.dataId)||(0,h.Z)(t.dataIndex)){let e=this.getChart().getSeriesData(t.dataId,t.dataIndex);e&&(e.target.addListener("change",()=>{a.getData().updateData()}),a.setDataView(e))}}}initEvent(){}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,u.X)(e,t)||(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}onRender(t){}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(t,e)=>{var i;return null===(i=this._option.globalScale.getScale(t))||void 0===i?void 0:i.scale(e)},getLayoutBounds:()=>{let{x:t,y:e}=this.getLayoutStartPoint(),{width:i,height:r}=this.getLayoutRect();return(new d.YZ).set(t,e,t+i,e+r)}}}_getLayoutRect(){let t=new d.YZ;return this.getMarks().forEach(e=>{let i=e.getProduct();i&&t.union(i.getBounds())}),t.empty()?{width:0,height:0}:{width:t.width(),height:t.height()}}getBoundsInRect(t){this.setLayoutRect(t);let e=this._getLayoutRect(),{x:i,y:r}=this.getLayoutStartPoint();return{x1:i,y1:r,x2:i+e.width,y2:r+e.height}}getVRenderComponents(){let t=[],e=i=>{var r;if(i&&"group"===i.type)i.getMarks().forEach(t=>{e(t)});else if("component"===i.type){let e=null===(r=null==i?void 0:i.getProduct())||void 0===r?void 0:r.getGroupGraphicItem();e&&t.push(e)}};return this.getMarks().forEach(t=>{e(t)}),t}}g.type=s.L.customMark,g.specKey="customMark";let m=()=>{c.F.registerComponent(g.type,g)}},7602:function(t,e,i){"use strict";var r,s;i.d(e,{L:()=>r}),(s=r||(r={})).cartesianAxis="cartesianAxis",s.cartesianBandAxis="cartesianAxis-band",s.cartesianLinearAxis="cartesianAxis-linear",s.cartesianTimeAxis="cartesianAxis-time",s.cartesianLogAxis="cartesianAxis-log",s.cartesianSymlogAxis="cartesianAxis-symlog",s.polarAxis="polarAxis",s.polarBandAxis="polarAxis-band",s.polarLinearAxis="polarAxis-linear",s.crosshair="crosshair",s.cartesianCrosshair="cartesianCrosshair",s.polarCrosshair="polarCrosshair",s.dataZoom="dataZoom",s.geoCoordinate="geoCoordinate",s.indicator="indicator",s.discreteLegend="discreteLegend",s.continuousLegend="continuousLegend",s.colorLegend="colorLegend",s.sizeLegend="sizeLegend",s.mapLabel="mapLabel",s.markLine="markLine",s.markArea="markArea",s.markPoint="markPoint",s.polarMarkLine="polarMarkLine",s.polarMarkArea="polarMarkArea",s.polarMarkPoint="polarMarkPoint",s.geoMarkPoint="geoMarkPoint",s.tooltip="tooltip",s.title="title",s.player="player",s.scrollBar="scrollBar",s.label="label",s.totalLabel="totalLabel",s.brush="brush",s.poptip="poptip",s.customMark="customMark"},1820:function(t,e,i){"use strict";i.d(e,{d:()=>o});var r=i(8746),s=i(7602),n=i(6542),a=i(9730);class o extends r.H{constructor(t,e){super(t,e),this.type=s.L.label,this.name=s.L.label,this.layoutType="none",this.layoutZIndex=n.Ai.Label,this._regions=e.getRegionsInIndex(e.regionIndexes)}_interactiveConfig(t){let{interactive:e}=t,i={hover:!1,select:!1,state:t.state};if(!0!==e)return i;let{hover:r,select:s}=this._option.getChart().getSpec();return!1===r&&!1===r.enable||(i.hover=!0),!1===s&&!1===s.enable||(i.select=!0),i}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reRender=!0,(0,a.X)(e,t)||(i.reMake=!0),i}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}}o.type=s.L.label},1637:function(t,e,i){"use strict";i.d(e,{U:()=>w});var r=i(7602),s=i(5669),n=i(3722),a=i(2698),o=i(9231),l=i(6542),h=i(4218),u=i(9114),d=i(5341),c=i(85),p=i(8120),g=i(1820),m=i(7623),f=i(4546),v=i(9038),y=i(7636),_=i(9198),b=i(8469),x=i(2965),S=i(2930);class A extends S.r{_initTheme(t,e){return{spec:t,theme:this._theme}}}class k extends g.d{constructor(t,e){super(t,e),this.type=r.L.label,this.name=r.L.label,this.specKey="label",this.transformerConstructor=A,this.layoutZIndex=l.Ai.Label,this._layoutRule=t.labelLayout||"series"}static getSpecInfo(t,e){let i=[];return((null==e?void 0:e.region)||[]).forEach((s,n)=>{(s.seriesIndexes||[]).some(t=>{let{markLabelSpec:i={}}=e.series[t];return Object.values(i).some(t=>Array.isArray(t)&&t.some(t=>t.visible))})&&i.push({spec:t,type:r.L.label,specInfoPath:["component",this.specKey,n],regionIndexes:[n]})}),i}init(t){super.init(t),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(t){super.reInit(t),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()}initEvent(){this.event.on(n.$7.dataZoomChange,()=>{this._labelComponentMap.forEach((t,e)=>{let i=e.getProduct().getGroupGraphicItem();i&&i.disableAnimation()}),this.event.on(a.ZK.AFTER_MARK_RENDER_END,t)});let t=()=>{this._labelComponentMap.forEach((t,e)=>{let i=e.getProduct().getGroupGraphicItem();i&&i.enableAnimation()}),this.event.off(a.ZK.AFTER_MARK_RENDER_END,t)}}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),(0,u.xV)(this._regions,t=>{let{markLabelSpec:e={}}=t.getSpecInfo(),i=Object.keys(e),r=t.getRegion();this._labelInfoMap.get(r)||this._labelInfoMap.set(r,[]);for(let s=0;s<i.length;s++){let n=i[s],a=t.getMarkInName(n);a&&e[n].forEach((e,i)=>{var s,o;if(e.visible){let l=this._labelInfoMap.get(r),h=this._createMark({type:"label",name:`${n}-label-${i}`},{noSeparateStyle:!0,attributeContext:t.getMarkAttributeContext()});e.showRelatedMarkTooltip&&(null===(o=null===(s=t.tooltipHelper)||void 0===s?void 0:s.activeTriggerSet.mark)||void 0===o||o.add(h)),h.setTarget(a),l.push({labelMark:h,baseMark:a,series:t,labelSpec:e})}})}})}_initLabelComponent(){this._labelInfoMap.forEach((t,e)=>{if("region"===this._layoutRule){let i=this._createMark({type:"component",name:`${e.getGroupMark().name}-label-component`},{componentType:"label",noSeparateStyle:!0},{support3d:this._spec.support3d});i&&(i.setSkipBeforeLayouted(!0),t[0]&&(0,m.Z)(t[0].labelSpec.zIndex)&&i.setMarkConfig({zIndex:t[0].labelSpec.zIndex}),this._marks.addMark(i),this._labelComponentMap.set(i,()=>this._labelInfoMap.get(e)))}else t.forEach((t,i)=>{let r=this._createMark({type:"component",name:`${t.labelMark.name}-component`},{componentType:"label",noSeparateStyle:!0},{support3d:t.baseMark.getMarkConfig().support3d});r&&((0,m.Z)(t.labelSpec.zIndex)&&r.setMarkConfig({zIndex:t.labelSpec.zIndex}),r.setSkipBeforeLayouted(!0),this._marks.addMark(r),this._labelComponentMap.set(r,()=>this._labelInfoMap.get(e)[i]))})})}_initTextMarkStyle(){this._labelComponentMap.forEach((t,e)=>{(0,f.IX)(t()).forEach(({labelMark:t})=>{t.setComponent(e)})}),this._labelInfoMap.forEach(t=>{t.forEach(t=>{var e,i;let{labelMark:r,labelSpec:s,series:n}=t;if(this.initMarkStyleWithSpec(r,s,void 0),(0,v.Z)(null==s?void 0:s.getStyleHandler)){let t=s.getStyleHandler(n);null==t||t.call(n,r,s)}(null===(i=null===(e=r.stateStyle)||void 0===e?void 0:e.normal)||void 0===i?void 0:i.lineWidth)&&r.setAttribute("stroke",n.getColorAttribute(),"normal",o.W.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((t,e)=>{let i=t();(0,y.Z)(i)?this._updateMultiLabelAttribute(i,e):this._updateSingleLabelAttribute(i,e)})}_updateMultiLabelAttribute(t,e){this._updateLabelComponentAttribute(e.getProduct(),t.map(({baseMark:t})=>t.getProduct()),t)}_updateSingleLabelAttribute(t,e){let{baseMark:i}=t;this._updateLabelComponentAttribute(e.getProduct(),i.getProduct(),[t])}_updateLabelComponentAttribute(t,e,i){let r=this._option.getComponentsByType("totalLabel");t.target(e).configure({interactive:!1}).depend(r.map(t=>t.getMarks()[0].getProduct())).labelStyle((t,e)=>{var n,a;let o=i[e.labelIndex];if(o){let{labelSpec:t,labelMark:e,series:i}=o,l=e.getRule(),u=this._interactiveConfig(t),d=null!==(a=null===(n=this._spec)||void 0===n?void 0:n.centerOffset)&&void 0!==a?a:0,p=(0,h.H)({textStyle:Object.assign({pickable:!0===t.interactive},t.style),overlap:{avoidMarks:r.map(t=>t.getMarks()[0].getProductId())}},(0,c.vz)(l,o),Object.assign(Object.assign(Object.assign({},(0,_.Z)(t,["position","style","state","type","stackDataFilterType","getStyleHandler"])),u),{centerOffset:d}),t.stackDataFilterType?{dataFilter:"min"===t.stackDataFilterType?t=>t.filter(t=>t.data[s.cL]):t=>t.filter(t=>t.data[s.wo])}:{});return i&&i.parseLabelStyle&&(p=i.parseLabelStyle(p,t,e)),"line"!==l&&"area"!==l||(p.type=l),p}}).encode((t,e,r)=>{if(i[r.labelIndex]){let{labelSpec:e,labelMark:s}=i[r.labelIndex];return s.skipEncode?{data:t}:(0,c.Sv)(i[r.labelIndex],t,e.formatMethod,e.formatter)}}).size(()=>i[0].series.getRegion().getLayoutRect())}compileMarks(){this.getMarks().forEach(t=>{let e;let i=this._labelComponentMap.get(t)();e=(0,y.Z)(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),t.compile({group:e,context:{model:this,labelInfo:i}})})}getVRenderComponents(){let t=[];return this._labelComponentMap.forEach((e,i)=>{let r=i.getProduct().getGroupGraphicItem();r&&t.push(r)}),t}getLabelInfoByTextGraphic(t){let e;let i=null==t?void 0:t.parent,r=null==i?void 0:i.parent;if(r){let t=r.getChildren().indexOf(i);this._labelComponentMap.forEach((i,s)=>{s.getProduct().getGroupGraphicItem()===r&&(e=(0,f.IX)(i())[t])})}return e}}k.type=r.L.label,k.specKey="label",k.transformerConstructor=A;let w=()=>{(0,d.Uq)(),(0,x.a)(),(0,p.k)(),b.F.registerComponent(k.type,k,!0)}},4871:function(t,e,i){"use strict";i.d(e,{v$:()=>m});var r=i(2965),s=i(7602),n=i(5669),a=i(6542),o=i(9231),l=i(4218),h=i(5341),u=i(85),d=i(1820),c=i(8469),p=i(8120);class g extends d.d{constructor(){super(...arguments),this.type=s.L.totalLabel,this.name=s.L.totalLabel,this.specKey="totalLabel",this.layoutZIndex=a.Ai.Label}static getSpecInfo(t,e){var i;let r=[];return null===(i=null==e?void 0:e.region)||void 0===i||i.forEach((t,i)=>{var n;null===(n=t.seriesIndexes)||void 0===n||n.forEach(t=>{let{spec:n}=e.series[t],a=n[this.specKey];(null==a?void 0:a.visible)&&r.push({spec:a,type:s.L.totalLabel,specPath:["series",t,this.specKey],specInfoPath:["component",this.specKey,t],regionIndexes:[i],seriesIndexes:[t]})})}),r}init(t){super.init(t),this._initTextMark(),this._initLabelComponent()}reInit(t){super.reInit(t),this._initTextMark()}_initTextMark(){var t;let e=this._getSeries();if(null===(t=e.getSpec().totalLabel)||void 0===t?void 0:t.visible){let t=e.getSeriesMark();if(t){let e=this._createMark({type:"label",name:`${t.name}-total-label`});this._baseMark=t,this._textMark=e,this._initTextMarkStyle()}}}_initTextMarkStyle(){var t;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:t=>t[n.Gq]},"normal",o.W.Default);let e=this._getSeries();null===(t=e.initTotalLabelMarkStyle)||void 0===t||t.call(e,this._textMark)}_initLabelComponent(){let t=this._getSeries(),e=this._createMark({type:"component",name:`${t.name}-total-label-component`},{componentType:"label",noSeparateStyle:!0},{support3d:this._spec.support3d});e&&this._marks.addMark(e)}updateLayoutAttribute(){super.updateLayoutAttribute();let t=this._getSeries();this._marks.forEach((e,i)=>{e.getProduct().target(this._baseMark.getProduct()).configure({interactive:!1}).labelStyle(()=>{var e,i;if(this._baseMark){let{offset:r,animation:s,overlap:a}=this._spec,o=this._interactiveConfig(this._spec);return(0,l.H)({textStyle:{pickable:!0===this._spec.interactive},position:function(t,e){var i,r;let s;let{direction:n}=t,a=("horizontal"===n?null===(i=t.getXAxisHelper())||void 0===i?void 0:i.isInverse():null===(r=t.getYAxisHelper())||void 0===r?void 0:r.isInverse())?1:0;switch(e){case"rect":case"symbol":s=({vertical:["top","bottom"],horizontal:["right","left"]})[n][a];break;default:s="top"}return s}(t,this._baseMark.type),x:0,y:0},null!==(i=null===(e=t.getTotalLabelComponentStyle)||void 0===e?void 0:e.call(t,{baseMark:this._baseMark,labelMark:this._textMark}))&&void 0!==i?i:{},Object.assign({offset:r,animation:s,overlap:a,dataFilter:t=>t.filter(t=>t.data[n.wo])},o))}}).encode(e=>(0,u.Sv)({baseMark:this._baseMark,labelMark:this._textMark,series:t,labelSpec:t.getSpec().totalLabel},e,this._spec.formatMethod)).size(()=>this._regions[0].getLayoutRect())})}compileMarks(){this.getMarks().forEach(t=>{let e=this._regions[0].getGroupMark().getProduct();t.compile({group:e,context:{model:this}})})}getVRenderComponents(){let t=[];return this.getMarks().forEach(e=>{let i=e.getProduct().getGroupGraphicItem();i&&t.push(i)}),t}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}g.type=s.L.totalLabel,g.specKey="totalLabel";let m=()=>{(0,h.Uq)(),(0,r.a)(),(0,p.k)(),c.F.registerComponent(g.type,g,!0)}},85:function(t,e,i){"use strict";i.d(e,{Sv:()=>p,vz:()=>c});var r=i(3885),s=i(4154),n=i(9038),a=i(1036),o=i(9904),l=i(2875),h=i(2096),u=i(5669);let d={rect:f,symbol:m,arc:v,point:function(t){let{labelSpec:e}=t;return{position:"center",overlap:!1!==e.overlap&&{avoidBaseMark:!1}}},"line-data":function(t){let e=m(t);return(0,a.Z)(e.overlap)||(e.overlap.avoidBaseMark=!1),e},stackLabel:function(t,e,i){let r=t.series,s=t.labelSpec||{},n=r.getTotalData();return{customLayoutFunc:n=>n.map(n=>{let a=s.position||"withChange",o=s.offset||0,h=e?e(n.data):n.data,u=p(t,h,s.formatMethod);return u.x="horizontal"===r.direction?"middle"===a?.5*(r.totalPositionX(h,"end")+r.totalPositionY(h,"start")):"max"===a?r.totalPositionX(h,h.end>=h.start?"end":"start")+o:"min"===a?r.totalPositionX(h,h.end>=h.start?"start":"end")-o:r.totalPositionX(h,"end")+(h.end>=h.start?o:-o):r.totalPositionX(h,"index",.5),u.y="horizontal"===r.direction?r.totalPositionY(h,"index",.5):"middle"===a?.5*(r.totalPositionY(h,"end")+r.totalPositionY(h,"start")):"max"===a?r.totalPositionY(h,h.end>=h.start?"end":"start")-o:"min"===a?r.totalPositionY(h,h.end>=h.start?"start":"end")+o:r.totalPositionY(h,"end")+(h.end>=h.start?-o:o),"horizontal"===r.direction?u.textAlign="middle"===a?"center":"withChange"===a&&h.end-h.start>=0||"max"===a?"left":"right":u.textBaseline="middle"===a?a:"withChange"===a&&h.end-h.start>=0||"max"===a?"bottom":"top",null==i||i(n,h,u),(0,l.r)(Object.assign(Object.assign({},u),{id:n.id}))}),dataFilter:t=>{let e=[];return n.forEach(i=>{let s=t.find(t=>{var e;return i.index===(null===(e=t.data)||void 0===e?void 0:e[r.getDimensionField()[0]])});s&&(s.data=i,e.push(s))}),e},overlap:{strategy:[]}}},line:y,area:y,rect3d:f,arc3d:v,treemap:function(t){return{customLayoutFunc:(t,e)=>e,overlap:!1}},venn:function(t){return{customLayoutFunc:(t,e)=>e,smartInvert:!0}}};function c(t,e){var i;let{labelSpec:n}=e;n.overlap&&!(0,s.Z)(n.overlap)&&(n.overlap={});let a=null!==(i=d[t])&&void 0!==i?i:d.point;return e.series.type===r.A.sankey?function(t){var e,i,r,s;let{series:n,labelSpec:a={}}=t,l=null!==(e=g(a.position))&&void 0!==e?e:"outside",h=n.direction,u=l;return(0,o.Z)(l)&&("vertical"===h?u="inside-start"===l?t=>"inside-left":"inside-middle"===l?t=>"center":"inside-end"===l?t=>"inside-right":t=>"bottom":"inside-start"===l?u=t=>"inside-left":"inside-middle"===l?u=t=>"center":"inside-end"===l?u=t=>"inside-right":"outside"===l&&(u=t=>"right")),{position:u,overlap:!1!==a.overlap&&(!(0,o.Z)(l)||!l.includes("inside"))&&{strategy:null!==(r=null===(i=a.overlap)||void 0===i?void 0:i.strategy)&&void 0!==r?r:(s=n,[{type:"position",position:t=>"horizontal"===s.direction?["right","left"]:["bottom","top"]}])},smartInvert:!1,offset:0,syncState:!0}}(e):a(e)}function p(t,e,i,s){var n;let{labelMark:a,series:o}=t,l={text:e[o.getMeasureField()[0]],data:e,textType:null!==(n=t.labelSpec.textType)&&void 0!==n?n:"text"};for(let t of Object.keys(a.stateStyle.normal)){let i=a.getAttribute(t,e);l[t]=i}if(o.type!==r.A.sankey){let{formatFunc:t,args:r}=(0,h.HJ)(i,s,l.text,e);t&&(l._originText=l.text,l.text=t(...r,{series:o}))}return l}function g(t){return(0,n.Z)(t)?e=>t(e.data):t}function m(t){var e,i,r;let s;let{series:n,labelSpec:a}=t,o="horizontal"===n.direction?"right":"top",l=null!==(e=g(a.position))&&void 0!==e?e:o;return s=!1!==a.overlap&&{strategy:null!==(r=null===(i=a.overlap)||void 0===i?void 0:i.strategy)&&void 0!==r?r:[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}],avoidBaseMark:"center"!==l},{position:l,overlap:s}}function f(t){var e,i,r,s,n,a,l;let{series:h,labelSpec:u={}}=t,d=null!==(e=g(u.position))&&void 0!==e?e:"outside",c=null!==(i=h.direction)&&void 0!==i?i:"vertical",p="horizontal"===h.direction?null===(r=h.getXAxisHelper())||void 0===r?void 0:r.isInverse():null===(s=h.getYAxisHelper())||void 0===s?void 0:s.isInverse(),m,f=d;f=t=>{var e;let{data:i}=t,r=null!==(e="function"==typeof u.position?u.position(i):u.position)&&void 0!==e?e:"outside";if("outside"===r){let t=h.getMeasureField()[0];return({vertical:["top","bottom"],horizontal:["right","left"]})[c][(null==i?void 0:i[t])>=0&&p||(null==i?void 0:i[t])<0&&!p?1:0]}return r},m=!1!==u.overlap&&{strategy:null!==(a=null===(n=u.overlap)||void 0===n?void 0:n.strategy)&&void 0!==a?a:(l=h,[{type:"position",position:t=>{var e,i;let{data:r}=t,s=l.getMeasureField()[0];return("horizontal"===l.direction?null===(e=l.getXAxisHelper())||void 0===e?void 0:e.isInverse():null===(i=l.getYAxisHelper())||void 0===i?void 0:i.isInverse())?(null==r?void 0:r[s])>=0?"horizontal"===l.direction?["left","inside-left"]:["bottom","inside-bottom"]:"horizontal"===l.direction?["right","inside-right"]:["top","inside-top"]:(null==r?void 0:r[s])>=0?"horizontal"===l.direction?["right","inside-right"]:["top","inside-top"]:"horizontal"===l.direction?["left","inside-left"]:["bottom","inside-bottom"]}}])};let v=!1;return(0,o.Z)(d)&&d.includes("inside")&&(v=!0),{position:f,overlap:m,smartInvert:v}}function v(t){var e;let i;let{labelSpec:r}=t,s=null!==(e=g(r.position))&&void 0!==e?e:"outside";return i=r.smartInvert?r.smartInvert:(0,o.Z)(s)&&s.includes("inside"),{position:s,smartInvert:i}}function y(t){var e,i,r,s;let{labelSpec:n,series:a}=t,o=null===(r=null===(i=null===(e=a.getViewDataStatistics)||void 0===e?void 0:e.call(a).latestData)||void 0===i?void 0:i[a.getSeriesField()])||void 0===r?void 0:r.values,l=o?o.map((t,e)=>({[a.getSeriesField()]:t,index:e})):[{index:0,[u.lb]:a.getSeriesKeys()[0]}];return{position:null!==(s=n.position)&&void 0!==s?s:"end",data:l}}},2754:function(t,e,i){"use strict";i.d(e,{q:()=>m});var r=i(7623),s=i(4546),n=i(9730),a=i(6082),o=i(8378),l=i(8746),h=i(6542),u=i(3722),d=i(9114),c=i(1960),p=i(4218),g=i(3558);class m extends l.H{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=h.Ai.Legend,this.layoutLevel=h.pM.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{(0,d.xV)(this._regions,t=>{var e;null===(e=t.getViewData())||void 0===e||e.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),(0,d.xV)(this._regions,t=>{t.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._orient=(0,c.vk)(this._spec.orient)?this._spec.orient:"left",this._position=null!==(t=this._spec.position)&&void 0!==t?t:"middle",this._visible=!1!==this._spec.visible;let{regionId:e,regionIndex:i,seriesId:n,seriesIndex:a}=this._spec;(0,r.Z)(n)&&(this._seriesUserId=(0,s.IX)(n)),(0,r.Z)(e)&&(this._regionUserId=(0,s.IX)(e)),(0,r.Z)(a)&&(this._seriesIndex=(0,s.IX)(a)),(0,r.Z)(i)&&(this._regionUserIndex=(0,s.IX)(i)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}onRender(t){}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reRender=!0,(null==t?void 0:t.orient)!==(null==e?void 0:e.orient)?i.reMake=!0:(0,n.X)(e,t)||(i.reCompile=!0),i}changeRegions(t){}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData()}initData(){let t=this._initLegendData();t.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new g.O(this._option,t),this._initSelectedData(),(0,d.xV)(this._regions,t=>{t.event.on(u.$7.rawDataUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===t.id},()=>{this._legendData.getDataView().reRunAllTransform()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(t){var e,i,r;let s=this._selectedData;(0,a.Z)(t)||JSON.stringify(s)===JSON.stringify(t)||((0,d.xV)(this._regions,e=>{e.legendSelectedFilter&&(t=e.legendSelectedFilter(this,t))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...t],null===(i=(e=this.effect).onSelectedDataChange)||void 0===i||i.call(e),this.event.emit(u.$7.legendSelectedDataChange,{model:this}),null===(r=this._legendComponent)||void 0===r||r.setSelected(this._selectedData))}afterSetLayoutStartPoint(t){if(super.afterSetLayoutStartPoint(t),this._legendComponent){let{x:e,y:i}=t;(0,o.Z)(e*i)&&this._legendComponent.setAttributes({x:e,y:i})}}getBoundsInRect(t,e){if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{x1:0,y1:0,x2:0,y2:0};let i={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},r=this._getLegendAttributes(t);if(r.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)(0,n.X)(r,this._cacheAttrs)||this._legendComponent.setAttributes((0,p.H)({},r,{defaultSelected:this._selectedData}));else{let t=new(this._getLegendConstructor())((0,p.H)({},r,{defaultSelected:this._selectedData}));t.name="legend",this._legendComponent=t,this.getContainer().add(t),this._option.disableTriggerEvent||this._initEvent(),t.on("*",(t,e)=>this._delegateEvent(this._legendComponent,t,e))}this._cacheAttrs=r;let s=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,a=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if("normal-inline"!==this.layoutType){let t="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",i=this._position,{width:r,height:n}=e,o=0,l=0;"horizontal"===t?"middle"===i?o=(r-s)/2:"end"===i&&(o=r-s):"middle"===i?l=(n-a)/2:"end"===i&&(l=n-a),this._legendComponent.setAttributes({dx:o,dy:l})}return i.x2=i.x1+s,i.y2=i.y1+a,i}onDataUpdate(){var t,e,i;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){let t=this._getLegendAttributes(this.getLayoutRect());(0,n.X)(t,this._cacheAttrs)||this._legendComponent.setAttributes((0,p.H)({},t,{defaultSelected:this._selectedData}))}null===(e=(t=this.effect).onSelectedDataChange)||void 0===e||e.call(t),null===(i=this.getChart())||void 0===i||i.setLayoutTag(!0,null,!1),this.event.emit(u.$7.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}m.specKey="legends"},5022:function(t,e,i){"use strict";i.d(e,{A:()=>K});var r,s,n=i(6082),a=i(1121),o=i(2937),l=i(1130),h=i(6338),u=i(7602),d=i(6358),c=i(9114),p=i(9478),g=i(6948),m=i(8378),f=i(4154);let v=(t,e)=>{let{series:i,field:r,scale:s}=e,n=r();if(r&&n){let t=1/0,e=-1/0;return i().forEach(i=>{let r=i.getRawDataStatisticsByField(n,!0),s=null==r?void 0:r.min,a=null==r?void 0:r.max;(0,m.Z)(s)&&(t=Math.min(s,t)),(0,m.Z)(a)&&(e=Math.max(a,e))}),[t,e]}if(s){let t=s();return t?t.domain():[]}return[]},y=(t,e)=>{let{selected:i,field:r,data:s,isHierarchyData:n,customFilter:o}=e,l=i(),h=r(),u=n||(t=>t&&t.some(t=>t&&function(t,e="value",i="children"){return!!(0,f.Z)(t)&&!!t.hasOwnProperty(i)&&Array.isArray(t[i])}(t)));if(l===s())return t;if(h&&!(0,a.Z)(l)){let[e,i]=l;return o?o(t,l,h):u(t)?function t(e,i,r,s="value",n="children"){return Array.isArray(e)?e.map(e=>{let a=Object.assign({},e);return Array.isArray(a[n])&&(a[n]=t(a[n],i,r,s,n)),a}).filter(t=>+t[s]>=i&&+t[s]<=r||t[n]&&t[n].length>0):e}(t,+e,+i,h):t.filter(t=>t[h]>=e&&t[h]<=i)}return t};var _=i(325),b=i(6132),x=i(3038),S=i(7636),A=i(3604),k=i(7623),w=i(4546),C=i(3531),T=i(8612),E=i(7578),M=i(3e3);function B(t){return(0,S.Z)(t)?t:[t,t]}function D(t){return t?"ew-resize":"ns-resize"}(r=s||(s={})).innerView="innerView",r.railContainer="sliderRailContainer",r.rail="sliderRail",r.startText="sliderStartText",r.endText="sliderEndText",r.startHandler="sliderStartHandler",r.startHandlerText="startHandlerText",r.endHandler="sliderEndHandler",r.endHandlerText="sliderEndHandlerText",r.track="sliderTrack",r.trackContainer="sliderTrackContainer",(0,i(9895).d)();class O extends M.k{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,_.Z)({},O.defaultAttributes,t)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=t=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(t),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=t=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;let e=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),i=(0,A.Z)(this._isHorizontal?(t.viewX-this._rail.globalAABBBounds.x1)/e:(t.viewY-this._rail.globalAABBBounds.y1)/e,0,1);i!==this._tooltipState.pos&&(this._tooltipState.pos=i,this._tooltipState.value=this.calculateValueByPos(i*e),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{let{tooltip:t}=this.attribute;t&&t.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=t=>{t.stopPropagation(),this._isChanging=!0;let{x:e,y:i}=this.stage.eventPointTransform(t);this._currentHandler=t.target,this._prePos=this._isHorizontal?e:i,"browser"===T.rF.env?(T.rF.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),T.rF.addEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onHandlerPointerUp),this.stage.addEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onHandlerPointerMove=t=>{var e,i;t.stopPropagation(),this._isChanging=!0;let{railWidth:r,railHeight:s,min:n,max:a}=this.attribute;if(a===n)return;let{x:o,y:l}=this.stage.eventPointTransform(t),h,u,d,c=0;this._isHorizontal?(c=(h=o)-this._prePos,u=null===(i=this._currentHandler)||void 0===i?void 0:i.attribute.x,d=r):(c=(h=l)-this._prePos,u=null===(e=this._currentHandler)||void 0===e?void 0:e.attribute.y,d=s);let p=(0,A.Z)(u+c,0,d),g=this.calculateValueByPos(p);"text"===this._currentHandler.type?this._updateHandlerText(this._currentHandler,p,g):this._updateHandler(this._currentHandler,p,g),this._updateTrack(),this._prePos=h,this._dispatchChangeEvent()},this._onHandlerPointerUp=t=>{t.preventDefault(),this._isChanging=!1,this._currentHandler=null,"browser"===T.rF.env?(T.rF.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),T.rF.removeEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onHandlerPointerUp),this.stage.removeEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onTrackPointerdown=t=>{t.stopPropagation(),this._isChanging=!0;let{x:e,y:i}=this.stage.eventPointTransform(t);this._prePos=this._isHorizontal?e:i,"browser"===T.rF.env?(T.rF.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),T.rF.addEventListener("pointerup",this._onTrackPointerUp)):(this.stage.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onTrackPointerUp),this.stage.addEventListener("pointerupoutside",this._onTrackPointerUp))},this._onTrackPointerMove=t=>{let e,i,r;t.stopPropagation(),this._isChanging=!0;let{railWidth:s,railHeight:n,min:a,max:o,inverse:l}=this.attribute;if(o===a)return;let{startHandler:h,endHandler:u}=this._getHandlers(),{x:d,y:c}=this.stage.eventPointTransform(t);this._isHorizontal?(e=d,i=this._track.attribute.width,r=s):(e=c,i=this._track.attribute.height,r=n);let p=e-this._prePos;if(h){let t=this._isHorizontal?h.attribute.x:h.attribute.y,e=l?(0,A.Z)(t+p,i,r):(0,A.Z)(t+p,0,r-i),s=this.calculateValueByPos(e);this._updateHandler(h,e,s)}if(u){let t=this._isHorizontal?u.attribute.x:u.attribute.y,e=l?(0,A.Z)(t+p,0,r-i):(0,A.Z)(t+p,i,r),s=this.calculateValueByPos(e),n=null==h?void 0:h.attribute;this._updateHandler(u,e,s),this._track.setAttributes(this._isHorizontal?{x:Math.min(n.x,u.attribute.x),width:Math.abs(n.x-u.attribute.x)}:{y:Math.min(n.y,u.attribute.y),height:Math.abs(n.y-u.attribute.y)})}this._prePos=e,this._dispatchChangeEvent()},this._onTrackPointerUp=t=>{t.preventDefault(),this._isChanging=!1,"browser"===T.rF.env?(T.rF.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),T.rF.removeEventListener("pointerup",this._onTrackPointerUp)):(this.stage.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onTrackPointerUp),this.stage.removeEventListener("pointerupoutside",this._onTrackPointerUp))},this._onRailPointerDown=t=>{let e,i,r;t.stopPropagation(),this._isChanging=!0;let{railWidth:s,railHeight:n,min:a,max:o}=this.attribute;if(o===a)return;let l=this._startHandler,h=this._endHandler;this._isHorizontal?(e=t.viewX-this._rail.globalAABBBounds.x1,i=null==l?void 0:l.attribute.x,r=null==h?void 0:h.attribute.x):(e=t.viewY-this._rail.globalAABBBounds.y1,i=null==l?void 0:l.attribute.y,r=null==h?void 0:h.attribute.y);let u=this.calculateValueByPos(e);if((0,k.Z)(r)){let t=Math.abs(e-i)>Math.abs(e-r)?h:l;this._updateHandler(t,e,u)}else this._updateHandler(l,e,u);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(t,e){let{layout:i,railWidth:r,railHeight:s,min:n,max:a,inverse:o}=this.attribute,l=0;return l=n===a?"start"===e?0:"end"===e?1:0:(t-n)/(a-n),(o?1-l:l)*("vertical"===i?s:r)}calculateValueByPos(t){let{layout:e,railWidth:i,railHeight:r,min:s,max:n,inverse:a}=this.attribute,o="vertical"===e?r:i;return s+(n-s)*(a?1-t/o:t/o)}setValue(t){let{min:e,max:i}=this.attribute;if(i===e)return;let[r,s]=(0,w.IX)(t),{startHandler:n,endHandler:a}=this._getHandlers();n&&this._updateHandler(n,this.calculatePosByValue(r),r),a&&this._updateHandler(a,this.calculatePosByValue(s),s),this._updateTrack()}render(){var t,e;let i;this.removeAllChild(!0);let{layout:r="horizontal",railWidth:a,railHeight:o,startText:l,endText:h,min:u,max:d,showHandler:c=!0,showTooltip:p}=this.attribute,{value:g}=this.attribute;(0,n.Z)(g)&&(g=[u,d]),this._currentValue={startValue:B(g)[0],endValue:B(g)[1]};let m="horizontal"===r;this._isHorizontal=m;let f=E.i.group({x:0,y:0});f.name=s.innerView,this.add(f),this._innerView=f;let v,y=0;if(l&&l.visible){(v=E.i.text(Object.assign({x:m?0:a/2,y:m?o/2:0,textAlign:m?"start":"center",textBaseline:m?"middle":"top",text:l.text,lineHeight:null===(t=l.style)||void 0===t?void 0:t.fontSize},l.style))).name=s.startText,f.add(v);let e=(0,k.Z)(l.space)?l.space:0;y+=(m?v.AABBBounds.width():v.AABBBounds.height())+e}let _=E.i.group({x:m?y:0,y:m?0:y});f.add(_);let b=E.i.group({x:0,y:0});if(b.name=s.railContainer,this._railContainer=b,_.add(b),this._mainContainer=_,this._renderRail(b),y+=m?a:o,h&&h.visible){let t=(0,k.Z)(h.space)?h.space:0;(i=E.i.text(Object.assign({x:m?y+t:a/2,y:m?o/2:y+t,textAlign:m?"start":"center",textBaseline:m?"middle":"top",text:h.text,lineHeight:null===(e=h.style)||void 0===e?void 0:e.fontSize},h.style))).name=s.endText,f.add(i)}this._renderTrack(b),c&&(this._renderHandlers(_),this._bindEvents()),p&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(t){let{railWidth:e,railHeight:i,railStyle:r,slidable:n}=this.attribute,a="default";!1!==n&&(a="pointer");let o=E.i.rect(Object.assign({x:0,y:0,width:e,height:i,cursor:a},r));return o.name=s.rail,t.add(o),this._rail=o,o}_renderHandlers(t){let{range:e,min:i,max:r,handlerSize:a=14,handlerStyle:o,handlerText:l,railHeight:h,railWidth:u,slidable:d}=this.attribute,{value:c}=this.attribute;(0,n.Z)(c)&&(c=[i,r]);let p=l&&l.visible,g=this._isHorizontal,[m,f]=B(c),v=this.calculatePosByValue(m,e?"start":"end"),y=this._renderHandler(Object.assign({x:g?v:u/2,y:g?h/2:v,size:a,strokeBoundsBuffer:0,cursor:!1===d?"default":D(g)},o));if(y.name=s.startHandler,this._startHandler=y,t.add(y),this._currentValue.startPos=v,p){let i=this._renderHandlerText(m,e?"start":"end");i.name=s.startHandlerText,t.add(i),this._startHandlerText=i}if(e){let e=this.calculatePosByValue(f,"end"),i=this._renderHandler(Object.assign({x:g?e:u/2,y:g?h/2:e,size:a,strokeBoundsBuffer:0,cursor:!1===d?"default":D(g)},o));if(i.name=s.endHandler,this._endHandler=i,t.add(i),this._currentValue.endPos=e,p){let e=this._renderHandlerText(f,"end");e.name=s.endHandlerText,t.add(e),this._endHandlerText=e}}}_renderTrack(t){let e,i,r;let{range:a,min:o,max:l,railHeight:h,railWidth:u,trackStyle:d,railStyle:c,slidable:p,value:g}=this.attribute;if((0,n.Z)(g))a?(e=o,i=l):e=i=o;else if(a){let t=(0,C.Z)(g,o,l);e=t[0],i=t[1]}else e=o,i=(0,A.Z)(g,o,l);let m=this._isHorizontal;a||(e=o);let v=E.i.group({x:0,y:0,width:u,height:h,cornerRadius:null==c?void 0:c.cornerRadius,clip:!0,pickable:!1});v.name=s.trackContainer;let y=(0,f.Z)(a)&&!0===a.draggableTrack;r=!1===p?"default":!1===a||!1===y?"pointer":D(m);let _=this.calculatePosByValue(e,"start"),b=this.calculatePosByValue(i,a?"end":"start"),x=E.i.rect(Object.assign({x:m?Math.min(_,b):0,y:m?0:Math.min(_,b),width:m?Math.abs(b-_):u,height:m?h:Math.abs(b-_),cursor:r},d));x.name=s.track,this._track=x,v.add(x),t.add(v)}_renderHandler(t){return E.i.symbol(t)}_renderHandlerText(t,e){var i,r,s;let{align:n,handlerSize:a=14,handlerText:o={},railHeight:l,railWidth:h,slidable:u}=this.attribute,d=this._isHorizontal,c=this.calculatePosByValue(t,e),p=null!==(i=o.space)&&void 0!==i?i:4,g={text:o.formatter?o.formatter(t):t.toFixed(null!==(r=o.precision)&&void 0!==r?r:0),lineHeight:null===(s=o.style)||void 0===s?void 0:s.lineHeight,cursor:!1===u?"default":D(d)};return d?"top"===n?(g.textBaseline="bottom",g.textAlign="center",g.x=c,g.y=(l-a)/2-p):(g.textBaseline="top",g.textAlign="center",g.x=c,g.y=(l+a)/2+p):("left"===n?(g.textBaseline="middle",g.textAlign="end",g.x=(h-a)/2-p):(g.textBaseline="middle",g.textAlign="start",g.x=(h+a)/2+p),g.y=c),E.i.text(Object.assign(Object.assign({},g),o.style))}_renderTooltip(){var t;let{tooltip:e,railHeight:i,railWidth:r,align:s}=this.attribute;e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;let n=this._isHorizontal?0:r/2,a=this._isHorizontal?i/2:0;if(e&&e.shape){let t=E.i.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:n,y:a,symbolType:"circle"},e.shapeStyle));this._tooltipShape=t,this._mainContainer.add(t)}let o=e&&e.text||{},l=null!==(t=o.space)&&void 0!==t?t:6,h={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(h.x=n,h.y="top"===s?a-i/2-l:a+i/2+l,h.textAlign="center",h.textBaseline="top"===s?"bottom":"top"):(h.y=a,h.x="left"===s?n-r/2-l:a+r/2+l,h.textAlign="left"===s?"end":"start",h.textBaseline="middle");let u=E.i.text(Object.assign(Object.assign({},h),o.style));this._mainContainer.add(u),this._tooltipText=u,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var t,e;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;let{railWidth:i,railHeight:r}=this.attribute,s=this._isHorizontal?i:r,n=this._tooltipState.pos*s,a=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[a]:n});let{align:o}=this.attribute;if(this._tooltipText){let i=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[a]:n,text:i.formatter?i.formatter(this._tooltipState.value):this._isHorizontal||"left"!==o?`≈ ${this._tooltipState.value.toFixed(null!==(e=i.precision)&&void 0!==e?e:0)}`:`${this._tooltipState.value.toFixed(null!==(t=i.precision)&&void 0!==t?t:0)} ≈`})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;let{slidable:t,range:e}=this.attribute;t&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),(0,f.Z)(e)&&e.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_updateTrack(){let{inverse:t,railWidth:e,railHeight:i}=this.attribute,r=this._startHandler,s=this._endHandler;if(this._isHorizontal){let i=null==r?void 0:r.attribute.x;if(s){let t=null==s?void 0:s.attribute.x;this._track.setAttributes({x:Math.min(i,t),width:Math.abs(i-t)})}else t?this._track.setAttributes({x:i,width:e-i}):this._track.setAttributes({width:i})}else{let e=null==r?void 0:r.attribute.y;if(s){let t=null==s?void 0:s.attribute.y;this._track.setAttributes({y:Math.min(e,t),height:Math.abs(e-t)})}else t?this._track.setAttributes({y:e,height:i-e}):this._track.setAttributes({height:e})}}_updateHandler(t,e,i){var r;let n=this._isHorizontal;t.setAttribute(n?"x":"y",e);let a=t.name===s.startHandler?this._startHandlerText:this._endHandlerText;if(a){let{handlerText:t={}}=this.attribute;a.setAttributes({text:t.formatter?t.formatter(i):i.toFixed(null!==(r=t.precision)&&void 0!==r?r:0),[n?"x":"y"]:e})}t.name===s.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_updateHandlerText(t,e,i){var r;let n=this._isHorizontal,{handlerText:a={}}=this.attribute;t.setAttributes({[n?"x":"y"]:e,text:a.formatter?a.formatter(i):i.toFixed(null!==(r=a.precision)&&void 0!==r?r:0)});let o=t.name===s.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[n?"x":"y"]:e}),t.name===s.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_dispatchChangeEvent(){let t=!!this.attribute.range,e=this._currentValue;this._dispatchEvent("change",{value:t?[Math.min(e.endValue,e.startValue),Math.max(e.endValue,e.startValue)]:e.startValue,position:t?[Math.min(e.endPos,e.startPos),Math.max(e.endPos,e.startPos)]:e.startPos})}_dispatchTooltipEvent(t){this._dispatchEvent("sliderTooltip",{type:t,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){let{inverse:t}=this.attribute,e=this._startHandler,i=this._endHandler;return i&&(this._isHorizontal?(!t&&i.attribute.x<(null==e?void 0:e.attribute.x)||t&&i.attribute.x>(null==e?void 0:e.attribute.x))&&([e,i]=[i,e]):(!t&&i.attribute.y<(null==e?void 0:e.attribute.y)||t&&i.attribute.y>(null==e?void 0:e.attribute.y))&&([e,i]=[i,e])),{startHandler:e,endHandler:i}}}O.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}};var P=i(9414),I=i(4725);(0,I.Fw)();class R extends x.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,_.Z)({},R.defaultAttributes,t)),this.name="colorLegend",this._onSliderToolipChange=t=>{let e=this._slider.tooltipShape;if(e&&t.detail&&!(0,n.Z)(t.detail.value)){let i=this._colorScale.scale(t.detail.value);e.setAttribute("fill",i)}this.dispatchEvent(t)},this._onSliderChange=t=>{this._updateColor(),this.dispatchEvent(t)}}setSelected(t){this._slider&&(this._slider.setValue(t),this._updateColor())}_renderContent(){let{colors:t,slidable:e,layout:i,align:r,min:s,max:n,value:a,railWidth:o,railHeight:h,showHandler:u=!0,handlerSize:d,handlerStyle:c,railStyle:p,trackStyle:g,startText:m,endText:f,handlerText:v,showTooltip:y,tooltip:_,inverse:x,disableTriggerEvent:S}=this.attribute,A=[],k=(n-s)/(t.length-1);for(let e=0;e<t.length;e++)A.push(s+k*e);this._colorScale=(new b.f).domain(A,!0).range(t),this._color=this._getTrackColor();let w=new O({x:0,y:0,range:{draggableTrack:!0},slidable:e,layout:i,align:r,min:s,max:n,value:a,railWidth:o,railHeight:h,showHandler:u,handlerSize:d,handlerStyle:c,railStyle:p,trackStyle:Object.assign({fill:this._color},g),startText:m,endText:f,handlerText:v,showTooltip:y,tooltip:_,disableTriggerEvent:S,inverse:x});this._innerView.add(w),this._slider=w,w.translateTo(0-w.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",P.$5):0)-w.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){let{colors:t,layout:e,inverse:i}=this.attribute;if((0,a.Z)(t))return;let r=t.length;if(1===r)return t[0];let s=[];for(let e=0;e<r;e++){let i=e/(r-1);s.push({offset:i,color:t[e]})}let n="horizontal"===e,o={gradient:"linear",stops:s,x0:0,y0:0,x1:n?1:0,y1:n?0:1};return i&&(n?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var t;let{layout:e="horizontal",colors:i,railWidth:r,railHeight:s}=this.attribute,{startHandler:n,endHandler:a,track:o,attribute:l}=this._slider,{startValue:h,endValue:u,startPos:d,endPos:c}=this._slider.currentValue,p=null===(t=l.handlerStyle)||void 0===t?void 0:t.fill;if(n&&!p){let t=this._colorScale.scale(h);n.setAttribute("fill",t)}if(a&&!p){let t=this._colorScale.scale(u);a.setAttribute("fill",t)}let g="horizontal"===e?r:s;if(Math.abs(d-c)!==g&&i&&i.length>1){let t=this._color.stops,e=Math.min(d,c)/g,i=Math.max(d,c)/g,r=i-e,s=t.filter(t=>t.offset>e&&t.offset<i),n=Math.min(h,u),a=Math.max(h,u),l=this._colorScale.scale(n),p=this._colorScale.scale(a),m=[{offset:0,color:l}];s.forEach(t=>{m.push({offset:(t.offset-e)/r,color:t.color})}),m.push({offset:1,color:p}),o.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:m}))}}}R.defaultAttributes={layout:"horizontal",title:{align:"start",space:P.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}},(0,I.Vo)();class L extends x.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,_.Z)({},L.defaultAttributes,t)),this.name="sizeLegend",this._onSliderChange=t=>{this.dispatchEvent(t)},this._onSliderToolipChange=t=>{this.dispatchEvent(t)}}setSelected(t){this._slider&&this._slider.setValue(t)}_renderContent(){let{slidable:t,layout:e,align:i,min:r,max:s,value:n,railWidth:a,railHeight:o,showHandler:h=!0,handlerSize:u,handlerStyle:d,railStyle:c,trackStyle:p,startText:g,endText:m,handlerText:f,showTooltip:v,tooltip:y,sizeBackground:_,disableTriggerEvent:b,inverse:x}=this.attribute,S=E.i.group({x:0,y:0});this._innerView.add(S);let A=new O({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:t,layout:e,align:i,min:r,max:s,value:n,railWidth:a,railHeight:o,showHandler:h,handlerSize:u,handlerStyle:Object.assign({symbolType:function(t="bottom"){let e=0;return"top"===t?`
    M${e},-6L${e-3.5},-2.5
    v5
    h7
    v-5
    Z
`:"left"===t?(e=1,`
    M${e-6},0L${e-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):"right"===t?(e=-1,`
    M${e+6},0L${e+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${e},6L${e-3.5},2.5
    v-5
    h7
    v5
    Z
`}(i)},d),railStyle:c,trackStyle:p,startText:g,endText:m,handlerText:f,showTooltip:v,tooltip:y,disableTriggerEvent:b,inverse:x});S.add(A);let k,w=0;"horizontal"===e?"top"===i?(k=`M0,0L${a},0L${x?0:a},12Z`,w=o):(k=`M0,12L${a},12L${x?0:a},0Z`,A.setAttribute("y",12)):"left"===i?k=`M${a},0L${a+12},${x?0:o}L${a},${o}Z`:(k=`M0,${x?0:o}L12,${o}L12,0Z`,A.setAttribute("x",12));let C=E.i.path(Object.assign(Object.assign({x:0,y:w,path:k},_),{zIndex:0}));S.add(C);let T=this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",P.$5):0;S.translate(0-S.AABBBounds.x1,T-S.AABBBounds.y1),this._slider=A}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}L.defaultAttributes={layout:"horizontal",title:{align:"start",space:P.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};var F=i(4218),j=i(123),Z=i(1106),H=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let N={color:R,size:L};var z=i(2754),V=i(3722),U=i(8469),W=i(2990),G=i(2096);let $=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],X=[2,10];class Y extends z.q{static getSpecInfo(t){let e=(0,G.ts)(t,this.specKey,this.type,t=>{var e;return"color"===(e=t.type)||"size"===e});return e&&e.forEach(t=>{t.type="color"===t.spec.type?u.L.colorLegend:u.L.sizeLegend}),e}constructor(t,e){super(t,e),this.type=u.L.colorLegend,this.name=u.L.colorLegend;let i="color"===this._spec.type?u.L.colorLegend:u.L.sizeLegend;this.type=i,this.name=i}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(t){super.init(t),(0,c.xV)(this._regions,t=>{t.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:t.isHierarchyData,customFilter:this._spec.customFilter},level:W.BV.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){let t=this._option.globalScale,e=this._spec.scale;return e||(e=this._legendType),t.getScale(e)}_initLegendData(){(0,d.U)(this._option.dataSet,"continuousLegendFilter",y),(0,d.U)(this._option.dataSet,"continuousLegendDataMake",v);let t=new h.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"continuousLegendDataMake",options:{series:()=>(0,c.gU)(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),t}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(t){var e,i,r,s;if((null===(e=t.title)||void 0===e?void 0:e.visible)&&(0,n.Z)(t.title.text)&&(0,n.Z)(null===(i=t.title.style)||void 0===i?void 0:i.text)){let e=this._field;if(e){let i=null===(s=null===(r=this._regions)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getSeries()[0];if(!i)return;return void(t.title.text=(0,p.tW)(i.getRawData(),e))}let i=this._spec.scale;i||(i=this._legendType);let n=this._option.globalScale.getScaleSpec(i);if(!(0,g.S5)(null==n?void 0:n.domain))return;let a=n.domain[0];if(0===a.fields.length)return;t.title.text=(0,p.tW)(this._option.dataSet.getDataView(a.dataId),a.fields[0])}}_getLegendAttributes(t){var e,i;let r="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",s="horizontal"===r?"bottom":this.layoutOrient,n=[],o=this._getScaleInGlobal();o&&"linear"===o.type&&(n=o.range()),(0,a.Z)(n)&&(n="color"===this._legendType?$:X);let l=null!==(e=this._legendData.getLatestData()[0])&&void 0!==e?e:0,h=null!==(i=this._legendData.getLatestData()[1])&&void 0!==i?i:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(l=Math.min(0,this._legendData.getLatestData()[0]),h=0===this._legendData.getLatestData()[0]?1:Math.max(0,this._legendData.getLatestData()[0]));let u=Object.assign({layout:r,align:s,zIndex:this.layoutZIndex,min:l,max:h,value:this._spec.defaultSelected,["color"===this._legendType?"colors":"sizeRange"]:n},function(t){let e=(0,F.H)({},t),{title:i={},handler:r={},rail:s={},track:n={},startText:o,endText:l,handlerText:h,sizeBackground:u,background:d={},type:c,id:p,visible:g,orient:m,position:f,data:v,defaultSelected:y,field:_,filter:b,regionId:x,regionIndex:S,seriesIndex:A,seriesId:w,padding:C}=e,T=H(e,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(T.title=(0,Z.q)(i)),T.showHandler=!1!==r.visible,(0,a.Z)(r.style)||(T.handlerStyle=(0,j.h_)(r.style)),(0,k.Z)(s.width)&&(T.railWidth=s.width),(0,k.Z)(s.height)&&(T.railHeight=s.height),(0,a.Z)(s.style)||(T.railStyle=(0,j.h_)(s.style)),(0,a.Z)(n.style)||(T.trackStyle=(0,j.h_)(n.style)),T.startText=(0,j.ro)(o),T.endText=(0,j.ro)(l),T.handlerText=(0,j.ro)(h),(0,a.Z)(u)||(T.sizeBackground=(0,j.h_)(u)),d.visible&&!(0,a.Z)(d.style)&&((0,F.H)(T,d.style),(0,k.Z)(d.padding)&&(T.padding=d.padding)),T}(this._spec));return this._addDefaultTitleText(u),u}_getLegendConstructor(){return N[this._legendType]}_initEvent(){if(this._legendComponent){let t=!1!==this._spec.filter;this._legendComponent.addEventListener("change",(0,o.Z)(e=>{let i=(0,l.Z)(e,"detail.value");t&&this.setSelectedData(i),this.event.emit(V.$7.legendFilter,{model:this,value:i,event:e})},30))}}}Y.specKey="legends",Y.type=u.L.continuousLegend;let K=()=>{U.F.registerComponent(Y.type,Y)}},7378:function(t,e,i){"use strict";i.d(e,{T:()=>q});var r=i(6082),s=i(9038),n=i(1130),a=i(8378),o=i(6338),l=i(7602),h=i(1121),u=i(7623),d=i(1960),c=i(4218),p=i(123),g=i(1106),m=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i},f=i(6358),v=i(9114),y=i(9478),_=i(6948),b=i(9414),x=i(325),S=i(7636),A=i(4546),k=i(4154),w=i(3215),C=i(6689),T=i(5859),E=i(3604),M=i(7578),B=i(3038),D=i(1601),O=i(3e3),P=i(8144),I=i(6462);let R={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};(0,I.s)();class L extends O.k{getCurrent(){return this._current}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,x.Z)({},L.defaultAttributes,t)),this.name="pager",this._current=1,this._onHover=t=>{let e=t.target;e.hasState("disable")||e.addState("hover")},this._onUnHover=t=>{t.target.removeState("hover")},this._onClick=t=>{let e=t.target;if("preHandler"===e.name){if(1===this._current)return;this._current-=1,1===this._current?e.addState("disable"):e.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:t})}if("nextHandler"===e.name){if(this._current===this._total)return;this._current+=1,this._current===this._total?e.addState("disable"):e.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:t})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var t,e,i;this._reset();let{layout:r="horizontal",handler:s=R,total:n,defaultCurrent:a=1,textStyle:o,padding:l=0}=this.attribute;this._current=a;let h=(0,w.o)(l),u="horizontal"===r,d=M.i.group({x:0,y:0}),c=s.style||{},p=c.size||15,g=null!==(t=s.space)&&void 0!==t?t:8,m=s.state||{},{preShape:f,nextShape:v}=s;f||(f=u?"triangleLeft":"triangleUp"),v||(v=u?"triangleRight":"triangleDown");let y=M.i.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},c),{x:0,y:0,symbolType:f,size:p}));y.states=m,y.name="preHandler",this.preHandler=y,d.add(y);let{width:_,height:b}=(0,P.fe)(this._getPageText(n),Object.assign({textAlign:"center",textBaseline:"middle"},o),null===(i=null===(e=this.stage)||void 0===e?void 0:e.getTheme())||void 0===i?void 0:i.text),x=(0,D.Z)(p)?p:p[0],S=(0,D.Z)(p)?p:p[1],A=M.i.text(Object.assign({x:u?x/2+g+_/2:0,y:u?0:S/2+g+b/2,text:this._getPageText(a),textAlign:"center",textBaseline:"middle",lineHeight:null==o?void 0:o.fontSize},o));this.text=A,d.add(A);let k=M.i.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},c),{x:u?x+2*g+_:0,y:u?0:S+2*g+b,symbolType:v,size:p}));k.name="nextHandler",k.states=m,this.nextHandler=k,d.add(k),1===this._total?(y.addState("disable"),k.addState("disable")):1===this._current?y.addState("disable"):this._current===n&&k.addState("disable");let C=d.AABBBounds,T=C.width(),E=C.height();d.translateTo(0-C.x1+h[3],0-C.y1+h[0]),this.add(d),this.attribute.width=T+h[1]+h[3],this.attribute.height=E+h[0]+h[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(t){let{pageFormatter:e}=this.attribute;return e?(0,s.Z)(e)?e(t,this._total):`${e}`.replace("{current}",`${t}`).replace("{total}",`${this._total}`):`${t}/${this._total}`}setTotal(t){t!==this.attribute.total&&(this._total=t,1!==this._current&&this._current<=t?this.setAttributes({total:t,defaultCurrent:this._current}):this.setAttribute("total",t))}}L.defaultAttributes={handler:R,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};var F=i(4725),j=i(5767),Z=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let H={[b.uu.focus]:{},[b.uu.selected]:{},[b.uu.selectedHover]:{},[b.uu.unSelected]:{},[b.uu.unSelectedHover]:{}};(0,F.cV)();class N extends B.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,x.Z)({},N.defaultAttributes,t)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._contentMaxHeight=0,this._onHover=t=>{let e=t.target;if(e&&e.name&&e.name.startsWith(b.GN.item)){let i=e.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===i.id)return;this._unHover(this._lastActiveItem,t)}this._hover(i,t)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,t),this._lastActiveItem=null)},this._onUnHover=t=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,t),this._lastActiveItem=null)},this._onClick=t=>{var e,i,r,s;let n=t.target;if(n&&n.name&&n.name.startsWith(b.GN.item)){let a=n.delegate,{selectMode:o="multiple"}=this.attribute;if(n.name===b.GN.focus||"focus"===o){let r=a.hasState(b.uu.focus);a.toggleState(b.uu.focus),r?null===(e=this._itemsContainer)||void 0===e||e.getChildren().forEach(e=>{this._removeLegendItemState(e,[b.uu.unSelected,b.uu.unSelectedHover,b.uu.focus],t),this._setLegendItemState(e,b.uu.selected,t)}):(this._setLegendItemState(a,b.uu.selected,t),this._removeLegendItemState(a,[b.uu.unSelected,b.uu.unSelectedHover],t),null===(i=this._itemsContainer)||void 0===i||i.getChildren().forEach(e=>{a!==e&&(this._removeLegendItemState(e,[b.uu.selected,b.uu.selectedHover,b.uu.focus],t),this._setLegendItemState(e,b.uu.unSelected,t))}))}else{null===(r=this._itemsContainer)||void 0===r||r.getChildren().forEach(t=>{t.removeState(b.uu.focus)});let{allowAllCanceled:e=!0}=this.attribute,i=a.hasState(b.uu.selected),n=this._getSelectedLegends();if("multiple"===o){if(!1===e&&i&&1===n.length)return void this._dispatchLegendEvent(b.dk.legendItemClick,a,t);i?(this._removeLegendItemState(a,[b.uu.selected,b.uu.selectedHover],t),this._setLegendItemState(a,b.uu.unSelected,t)):(this._setLegendItemState(a,b.uu.selected,t),this._removeLegendItemState(a,[b.uu.unSelected,b.uu.unSelectedHover],t))}else this._setLegendItemState(a,b.uu.selected,t),this._removeLegendItemState(a,[b.uu.unSelected,b.uu.unSelectedHover],t),null===(s=this._itemsContainer)||void 0===s||s.getChildren().forEach(e=>{a!==e&&(this._removeLegendItemState(e,[b.uu.selected,b.uu.selectedHover],t),this._setLegendItemState(e,b.uu.unSelected,t))})}this._dispatchLegendEvent(b.dk.legendItemClick,a,t)}}}render(){super.render(),this._lastActiveItem=null}setSelected(t){var e;(null===(e=this._itemsContainer)||void 0===e?void 0:e.getChildren()).forEach(e=>{let i=e.data;t.includes(i.label)?(this._setLegendItemState(e,b.uu.selected),this._removeLegendItemState(e,[b.uu.unSelected,b.uu.unSelectedHover])):(this._removeLegendItemState(e,[b.uu.selected,b.uu.selectedHover]),this._setLegendItemState(e,b.uu.unSelected))})}_renderItems(){let{item:t={},maxCol:e=1,maxRow:i=2,maxWidth:r,defaultSelected:s,lazyload:n,autoPage:a}=this.attribute,{spaceCol:o=b.Nu,spaceRow:l=b.so,verticalAlign:h="middle"}=t,d=this._itemsContainer,{items:c,isHorizontal:p,startIndex:g,isScrollbar:m}=this._itemContext,f=m?1:p?i:e,v=this._contentMaxHeight,y,{doWrap:_,maxWidthInCol:x,startX:A,startY:k,pages:w}=this._itemContext,C=0,T=0,E=[];for(let t=g,e=c.length;t<e&&!(n&&w>this._itemContext.currentPage*f);t++){n&&(this._itemContext.startIndex=t+1),(y=c[t]).id||(y.id=y.label),y.index=t;let e=!0;(0,S.Z)(s)&&(e=s.includes(y.label));let i=this._renderEachItem(y,e,t,c),g=i.attribute.width,f=i.attribute.height;this._itemHeight=Math.max(this._itemHeight,f),x=Math.max(g,x),this._itemMaxWidth=Math.max(g,this._itemMaxWidth),p?((0,u.Z)(r)&&(m&&a?_=(w=Math.ceil((A+g)/r))>1:A+g>r&&(_=!0,A>0&&("middle"!==h&&"bottom"!==h||E.forEach(t=>{t.setAttributes({y:t.attribute.y+(T-t.attribute.height)/("middle"===h?2:1)})}),w+=1,A=0,k+=T+l,T=0,E.length=0))),0===A&&0===k||i.setAttributes({x:A,y:k}),A+=o+g,T=Math.max(T,f),E.push(i)):((0,u.Z)(v)&&(m&&a?_=(w=Math.ceil((k+f)/v))>1:v<=f?(w+=1,_=!0,k=0,t>0&&(A+=C+o)):v<k+f&&(w+=1,_=!0,k=0,A+=x+o,x=0)),0===A&&0===k||i.setAttributes({x:A,y:k}),k+=l+f),d.add(i),C=g}return p&&("middle"===h||"bottom"===h)&&E.forEach(t=>{t.setAttributes({y:t.attribute.y+(T-t.attribute.height)/("middle"===h?2:1)})}),this._itemContext.doWrap=_,this._itemContext.startX=A,this._itemContext.startY=k,this._itemContext.maxWidthInCol=x,this._itemContext.pages=w,this._itemContext.maxPages=f,m&&(this._itemContext.totalPage=w),n||(this._itemContext.startIndex=c.length),this._itemContext}_renderContent(){let{item:t={},items:e,reversed:i,maxWidth:r,maxHeight:s}=this.attribute;if(!1===t.visible||(0,h.Z)(e))return;let a=e;i&&(a=null==e?void 0:e.reverse()),this._contentMaxHeight=Math.max(0,s-this._parsedPadding[0]-this._parsedPadding[2]);let o=M.i.group({x:0,y:0});this._itemsContainer=o;let{layout:l,autoPage:d}=this.attribute,{maxWidth:c,width:p,height:g}=t,m=[];(0,u.Z)(c)&&m.push(c),(0,u.Z)(p)&&m.push(p),m.length&&((0,u.Z)(r)&&m.push(r),this._itemWidthByUser=(0,A.iH)(m)),(0,u.Z)(g)&&(this._itemHeightByUser=g);let f=this.attribute.pager;this._itemContext={currentPage:f&&f.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:a,isHorizontal:"horizontal"===l,totalPage:1/0,isScrollbar:f&&"scrollbar"===f.type,clipContainer:void 0},this._itemContext=this._renderItems();let v=!1;this._itemContext.doWrap&&d&&this._itemContext.pages>this._itemContext.maxPages&&(v=this._renderPagerComponent()),v||(o.setAttribute("y",this._title?this._title.AABBBounds.height()+(0,n.Z)(this.attribute,"title.space",8):0),this._innerView.add(o))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;let{hover:t=!0,select:e=!0}=this.attribute;if(t){let e="pointermove",i="pointerleave";(0,k.Z)(t)&&(t.trigger&&(e=t.trigger),t.triggerOff&&(i=t.triggerOff)),this._itemsContainer.addEventListener(e,this._onHover),this._itemsContainer.addEventListener(i,this._onUnHover)}if(e){let t="pointerdown";(0,k.Z)(e)&&e.trigger&&(t=e.trigger),this._itemsContainer.addEventListener(t,this._onClick)}}_autoEllipsis(t,e,i,r){var s,n;let{label:a,value:o}=this.attribute.item,l=r.AABBBounds,h=i.AABBBounds,u=l.width(),d=h.width(),c=!1;"labelFirst"===t?d>e?c=!0:r.setAttribute("maxLineWidth",e-d):"valueFirst"===t?u>e?c=!0:i.setAttribute("maxLineWidth",e-u):u+d>e&&(c=!0),c&&(r.setAttribute("maxLineWidth",Math.max(e*(null!==(s=a.widthRatio)&&void 0!==s?s:.5),e-d)),i.setAttribute("maxLineWidth",Math.max(e*(null!==(n=o.widthRatio)&&void 0!==n?n:.5),e-u)))}_renderEachItem(t,e,i,s){var a,o;let l;let{id:h,label:d,value:c,shape:p}=t,{padding:g=0,focus:m,focusIconStyle:f,align:v,autoEllipsisStrategy:y}=this.attribute.item,{shape:_,label:x,value:A,background:k}=this.attribute.item,C=this._handleStyle(_,t,e,i,s),T=this._handleStyle(x,t,e,i,s),E=this._handleStyle(A,t,e,i,s),B=this._handleStyle(k,t,e,i,s),D=(0,w.o)(g);!1===k.visible?(l=M.i.group({x:0,y:0,cursor:null===(a=B.style)||void 0===a?void 0:a.cursor}),this._appendDataToShape(l,b.GN.item,t,l)):(l=M.i.group(Object.assign({x:0,y:0},B.style)),this._appendDataToShape(l,b.GN.item,t,l,B.state)),l.id=`${null!=h?h:d}-${i}`,l.addState(e?b.uu.selected:b.uu.unSelected);let O=M.i.group({x:0,y:0,pickable:!1});l.add(O);let I,R=0,L=0,F=0;if(_&&!1!==_.visible){let i=(0,n.Z)(C,"style.size",b.SX);L=(0,S.Z)(i)?i[0]||0:i,F=(0,n.Z)(_,"space",b.g);let s=M.i.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},p),C.style));Object.keys(C.state||{}).forEach(t=>{let e=C.state[t].fill||C.state[t].stroke;p.fill&&(0,r.Z)(C.state[t].fill)&&e&&(C.state[t].fill=e),p.stroke&&(0,r.Z)(C.state[t].stroke)&&e&&(C.state[t].stroke=e)}),this._appendDataToShape(s,b.GN.itemShape,t,l,C.state),s.addState(e?b.uu.selected:b.uu.unSelected),O.add(s)}let j=0;if(m){let e=(0,n.Z)(f,"size",b.SX);I=M.i.symbol(Object.assign(Object.assign({x:0,y:-e/2-1,strokeBoundsBuffer:0,boundsPadding:D},f),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(I,b.GN.focus,t,l),j=e}let Z=x.formatMethod?x.formatMethod(d,t,i):d,H=Object.assign(Object.assign({x:L/2+F,y:0,textAlign:"start",textBaseline:"middle",lineHeight:null===(o=T.style)||void 0===o?void 0:o.fontSize},T.style),{text:Z,_originText:x.formatMethod?d:void 0}),N=(0,P.vS)(H);this._appendDataToShape(N,b.GN.itemLabel,t,l,T.state),N.addState(e?b.uu.selected:b.uu.unSelected),O.add(N);let z=(0,n.Z)(x,"space",b.DN);if((0,u.Z)(c)){let r=(0,n.Z)(A,"space",m?b.qL:0),s=A.formatMethod?A.formatMethod(c,t,i):c,a=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:E.style.fontSize},E.style),{text:s,_originText:A.formatMethod?c:void 0}),o=(0,P.vS)(a);if(this._appendDataToShape(o,b.GN.itemValue,t,l,E.state),o.addState(e?b.uu.selected:b.uu.unSelected),this._itemWidthByUser){let t=this._itemWidthByUser-D[1]-D[3]-L-F-z-j-r;this._autoEllipsis(y,t,N,o),A.alignRight?o.setAttributes({textAlign:"right",x:this._itemWidthByUser-L/2-D[1]-D[3]-j-r}):o.setAttribute("x",z+(N.AABBBounds.empty()?0:N.AABBBounds.x2))}else o.setAttribute("x",z+(N.AABBBounds.empty()?0:N.AABBBounds.x2));R=r+(o.AABBBounds.empty()?0:o.AABBBounds.x2),O.add(o)}else this._itemWidthByUser&&N.setAttribute("maxLineWidth",this._itemWidthByUser-D[1]-D[3]-L-F-j),R=z+(N.AABBBounds.empty()?0:N.AABBBounds.x2);I&&(I.setAttribute("x",R),O.add(I));let V=O.AABBBounds,U=V.width();if("right"===v){let t=V.x2,e=V.x1;O.forEachChildren((i,r)=>{"symbol"!==i.type&&"right"!==i.attribute.textAlign||i===I?i.setAttribute("x",e+t-i.attribute.x-i.AABBBounds.width()):"symbol"!==i.type?i.setAttributes({x:e+t-i.attribute.x,textAlign:"left"}):i.setAttribute("x",e+t-i.attribute.x)})}let W=V.height(),G=(0,u.Z)(this.attribute.item.width)?this.attribute.item.width:U+D[1]+D[3],$=this._itemHeightByUser||W+D[0]+D[2];return l.attribute.width=G,l.attribute.height=$,I&&I.setAttribute("visible",!1),O.translateTo(-V.x1+D[3],-V.y1+D[0]),l}_createPager(t){var e,i;let{disableTriggerEvent:r,maxRow:s}=this.attribute,n=t=>t<=99?99:t<=999?999:9999;return new L(this._itemContext.isHorizontal?Object.assign(Object.assign({layout:1===s?"horizontal":"vertical",total:n(this._itemContext.pages)},(0,x.Z)({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},t)),{defaultCurrent:null===(e=this.attribute.pager)||void 0===e?void 0:e.defaultCurrent,disableTriggerEvent:r}):Object.assign({layout:"horizontal",total:n(this._itemContext.pages),disableTriggerEvent:r,defaultCurrent:null===(i=this.attribute.pager)||void 0===i?void 0:i.defaultCurrent},t))}_createScrollbar(t,e){let{disableTriggerEvent:i}=this.attribute;return new j.B(this._itemContext.isHorizontal?Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:i,range:[0,.5],height:!1===t.visible?0:12},t),{width:e}):Object.assign(Object.assign({direction:"vertical",width:!1===t.visible?0:12,range:[0,.5]},t),{height:e,disableTriggerEvent:i}))}_updatePositionOfPager(t,e,i){let{pager:r}=this.attribute,{totalPage:s,isHorizontal:n}=this._itemContext,a=r&&r.position||"middle";if(this._pagerComponent.setTotal(s),n){let r;r="start"===a?t:"end"===a?t+i-this._pagerComponent.AABBBounds.height()/2:t+i/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:e-this._pagerComponent.AABBBounds.width(),y:r})}else{let t;t="start"===a?0:"end"===a?e-this._pagerComponent.AABBBounds.width():(e-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:t,y:i-this._pagerComponent.AABBBounds.height()})}}_computeScrollbarDelta(){let t;let{isHorizontal:e,clipContainer:i}=this._itemContext,r=this._itemsContainer.AABBBounds,s=i.AABBBounds;return e?s.width()/r.width():s.height()/r.height()}_updatePositionOfScrollbar(t,e,i){let{isHorizontal:r,currentPage:s,totalPage:n}=this._itemContext,a=(s-1)/n;this._pagerComponent.setScrollRange([a,a+this._computeScrollbarDelta()]),r?this._pagerComponent.setAttributes({x:0,y:i+e}):this._pagerComponent.setAttributes({x:t,y:i})}_bindEventsOfPager(t,e){let{animation:i=!0,animationDuration:r=450,animationEasing:s="quadIn"}=this.attribute.pager||{},n=this._itemContext.isScrollbar?t=>{let{value:e}=t.detail;return 0===e[0]?1:1===e[1]?this._itemContext.totalPage:e[0]*this._itemContext.totalPage+1}:t=>t.detail.current,a=a=>{let o=n(a);if(o!==this._itemContext.currentPage){if(this._itemContext.currentPage=o,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();let t=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);if(this._itemContext.totalPage=t,this._itemContext.isScrollbar&&this._pagerComponent){let t=this._computeScrollbarDelta(),[e]=this._pagerComponent.getScrollRange();this._pagerComponent.setScrollRange([e,e+t])}}if(this._itemContext.isScrollbar){let[t]=this._pagerComponent.getScrollRange(),n=(this._itemContext.isHorizontal?this._itemsContainer.AABBBounds.width():this._itemsContainer.AABBBounds.height())*t;this.updateScrollMask(),i?this._itemsContainer.animate().to({[e]:-n},r,s):this._itemsContainer.setAttribute(e,-n)}else i?this._itemsContainer.animate().to({[e]:-(o-1)*t},r,s):this._itemsContainer.setAttribute(e,-(o-1)*t)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",a),this._pagerComponent.addEventListener("scrollUp",a),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",t=>t.nativeEvent.preventDefault()),this.addEventListener("wheel",(0,C.Z)(t=>{let e=this._pagerComponent,i=e.getScrollRange(),{direction:r}=e.attribute,{width:s,height:n}=e.getSliderRenderBounds(),a="vertical"===r?t.deltaY/n:t.deltaX/s;e.setScrollRange([i[0]+a,i[1]+a],!0),this.updateScrollMask()},50)))):(this._pagerComponent.addEventListener("toPrev",a),this._pagerComponent.addEventListener("toNext",a))}_renderPager(){let t=this._title?this._title.AABBBounds.height()+(0,n.Z)(this.attribute,"title.space",8):0,{maxWidth:e,maxCol:i=1,maxRow:r=2,item:s={},pager:a={}}=this.attribute,{spaceCol:o=b.Nu,spaceRow:l=b.so}=s,h=this._itemsContainer,{space:u=b.Th,defaultCurrent:d=1}=a,c=Z(a,["space","defaultCurrent"]),{isHorizontal:p}=this._itemContext,g=this._contentMaxHeight,m,f=0,v=0,y=0,_=0,x=0,S=0,A=1;if(p){if(v=(r-1)*l+this._itemHeight*r,f=e,m=this._createPager(c),this._pagerComponent=m,this._innerView.add(m),(y=e-m.AABBBounds.width()-u)<=0)return this._innerView.removeChild(m),!1;h.getChildren().forEach((t,e)=>{let{width:i,height:r}=t.attribute;y<x+i&&(x=0,S+=r+l,A+=1),e>0&&t.setAttributes({x:x,y:S}),x+=o+i}),this._itemContext.startX=x,this._itemContext.startY=S,this._itemContext.pages=A;let i=Math.ceil(A/r);this._itemContext.totalPage=i,this._updatePositionOfPager(t,f,v)}else{if(f=this._itemMaxWidth*i+(i-1)*o,v=g,y=f,m=this._createPager(c),this._pagerComponent=m,this._innerView.add(m),(_=g-m.AABBBounds.height()-u-t)<=0)return this._innerView.removeChild(m),!1;h.getChildren().forEach((t,e)=>{let{height:i}=t.attribute;_<S+i&&(S=0,x+=this._itemMaxWidth+o,A+=1),e>0&&t.setAttributes({x:x,y:S}),S+=l+i});let e=Math.ceil(A/i);this._itemContext.totalPage=e,this._updatePositionOfPager(t,f,v)}d>1&&(p?h.setAttribute("y",-(d-1)*(v+l)):h.setAttribute("x",-(d-1)*(f+o)));let k=M.i.group({x:0,y:t,width:p?y:f,height:p?v:_,clip:!0,pickable:!1});return k.add(h),this._innerView.add(k),this._itemContext.clipContainer=k,this._bindEventsOfPager(p?v+l:f+o,p?"y":"x"),!0}_renderScrollbar(){var t;let e=this._title?this._title.AABBBounds.height()+(0,n.Z)(this.attribute,"title.space",8):0,{maxWidth:i,item:r={},pager:s={}}=this.attribute,{spaceCol:a=b.Nu,spaceRow:o=b.so}=r,l=this._itemsContainer,{space:h=b.Th,defaultCurrent:u=1}=s,d=Z(s,["space","defaultCurrent"]),{isHorizontal:c}=this._itemContext,p=this._contentMaxHeight,g,m=0,f=0,v=0,y=1;if(c)m=i,f=this._itemHeight,g=this._createScrollbar(d,m),this._pagerComponent=g,this._innerView.add(g);else{if(f=p-e,m=this._itemMaxWidth,g=this._createScrollbar(d,f),this._pagerComponent=g,this._innerView.add(g),f<=0)return this._innerView.removeChild(g),!1;let t=l.getChildren(),i=t.map(t=>t.attribute.height);if(1===i.length||i.every(t=>t===i[0])){let e=i[0],r=Math.floor(f/(o+e));f=r*(o+e),y=Math.ceil(t.length/r)}else t.forEach((t,e)=>{let{height:i}=t.attribute,r=y,s=v;y=Math.floor((v+i)/f)+1,v+=o+i,r!==y&&e===l.getChildren().length-1&&v-f>=1/3*i&&(f=s+i,y-=1)});this._itemContext.totalPage=y,this._itemContext.pages=y}if(u>1){if(c){let t=this._itemsContainer.AABBBounds.width()-m;l.setAttribute("x",-Math.min((u-1)*(m+a),t))}else{let t=this._itemsContainer.AABBBounds.height()-f;l.setAttribute("y",-Math.min((u-1)*(f+o),t))}}let _=M.i.group({x:0,y:e,width:m,height:f,clip:!0,pickable:!1});return _.add(l),this._innerView.add(_),this._itemContext.clipContainer=_,this._updatePositionOfScrollbar(m,f,e),(null===(t=s.scrollMask)||void 0===t?void 0:t.visible)&&this.renderScrollMask(_),this._bindEventsOfPager(c?m:f,c?"x":"y"),!0}renderScrollMask(t){let{scrollMask:e={}}=this.attribute.pager,{visible:i=!0,gradientLength:r=16,gradientStops:s}=e;if(!i||!s)return;let n=t.AABBBounds.width(),a=t.AABBBounds.height(),o=this._itemContext.isHorizontal?n:a,l=s.map(t=>({offset:r*t.offset/o,color:t.color})),h=s.map(t=>({offset:(o-r*t.offset)/o,color:t.color})),u=M.i.rect({x:0,y:0,width:n,height:a});this._scrollMask=u,this._scrollMaskContext={startStops:l,endStops:h},this.updateScrollMask(),t.add(u)}updateScrollMask(){if(!this._scrollMask||!this._pagerComponent||!this._itemContext.isScrollbar)return;let[t,e]=this._pagerComponent.getScrollRange(),i=[];(0,T.Yt)((0,E.Z)(e,0,1),1)||i.push(...this._scrollMaskContext.endStops),(0,T.Yt)((0,E.Z)(t,0,1),0)||i.push(...this._scrollMaskContext.startStops),i.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:i}}):this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:0,y1:1,stops:i}}))}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(t,e){this._lastActiveItem=t,t.hasState(b.uu.selected)?this._setLegendItemState(t,b.uu.selectedHover,e):this._setLegendItemState(t,b.uu.unSelectedHover,e);let i=t.getChildren()[0].find(t=>t.name===b.GN.focus,!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(b.dk.legendItemHover,t,e)}_unHover(t,e){let i=!1;(t.hasState(b.uu.unSelectedHover)||t.hasState(b.uu.selectedHover))&&(i=!0),t.removeState(b.uu.unSelectedHover),t.removeState(b.uu.selectedHover),t.getChildren()[0].getChildren().forEach(t=>{!i&&(t.hasState(b.uu.unSelectedHover)||t.hasState(b.uu.selectedHover))&&(i=!0),t.removeState(b.uu.unSelectedHover),t.removeState(b.uu.selectedHover)});let r=t.getChildren()[0].find(t=>t.name===b.GN.focus,!1);r&&r.setAttribute("visible",!1),i&&this._dispatchLegendEvent(b.dk.legendItemAttributeUpdate,t,e),this._dispatchLegendEvent(b.dk.legendItemUnHover,t,e)}_setLegendItemState(t,e,i){let r=!1;t.hasState(e)||(r=!0),t.addState(e,!0),t.getChildren()[0].getChildren().forEach(t=>{t.name!==b.GN.focus&&(r||t.hasState(e)||(r=!0),t.addState(e,!0))}),r&&this._dispatchLegendEvent(b.dk.legendItemAttributeUpdate,t,i)}_removeLegendItemState(t,e,i){let r=!1;e.forEach(e=>{!r&&t.hasState(e)&&(r=!0),t.removeState(e)}),t.getChildren()[0].getChildren().forEach(t=>{t.name!==b.GN.focus&&e.forEach(e=>{!r&&t.hasState(e)&&(r=!0),t.removeState(e)})}),r&&this._dispatchLegendEvent(b.dk.legendItemAttributeUpdate,t,i)}_getSelectedLegends(){var t;let e=[];return null===(t=this._itemsContainer)||void 0===t||t.getChildren().forEach(t=>{t.hasState(b.uu.selected)&&e.push(t.data)}),e}_appendDataToShape(t,e,i,r,s={}){t.name=e,t.data=i,t.delegate=r,t.states=(0,x.Z)({},H,s)}_dispatchLegendEvent(t,e,i){let r=this._getSelectedLegends();r.sort((t,e)=>t.index-e.index);let s=r.map(t=>t.label);this._dispatchEvent(t,{item:e,data:e.data,selected:e.hasState(b.uu.selected),currentSelectedItems:r,currentSelected:s,event:i})}_handleStyle(t,e,i,r,n){let a={};return t.style&&((0,s.Z)(t.style)?a.style=t.style(e,i,r,n):a.style=t.style),t.state&&(a.state={},Object.keys(t.state).forEach(o=>{t.state[o]&&((0,s.Z)(t.state[o])?a.state[o]=t.state[o](e,i,r,n):a.state[o]=t.state[o])})),a}release(){super.release(),this.removeAllEventListeners()}}N.defaultAttributes={layout:"horizontal",title:{align:"start",space:b.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:b.Nu,spaceRow:b.so,shape:{space:b.g,style:{size:b.SX,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:b.DN,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:b.SX,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:b.Th,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};var z=i(5669);let V=(t,e)=>{let i=[],r={},{series:s,seriesField:n}=e;return s().forEach(t=>{let e=n(t);(e===t.getSeriesField()?t.getSeriesInfoList():t.getSeriesInfoInField(e)).forEach(t=>{r[t.key]||(r[t.key]=!0,i.push(t))})}),i},U=(t,e)=>{var i,r,s;let{series:n,selected:a,field:o,data:l,customFilter:h}=e,d=a(),c=l();if(0===d.length&&c.length)return[];if(d.length===c.length)return t;let p={};d.forEach(t=>{p[t]=!0});let g=null!==(i=o())&&void 0!==i?i:z.lb;return h?h(t,d,g):((0,S.Z)(t)&&(null===(r=t[0])||void 0===r?void 0:r.nodes)?(t[0].nodes=t[0].nodes.filter(t=>!0===p[t.key]),(null===(s=t[0])||void 0===s?void 0:s.links)&&(t[0].links=t[0].links.filter(t=>!0===p[t.source]&&!0===p[t.target]))):(0,u.Z)(g)&&(t=t.filter(t=>!0===p[n.getSeriesFieldValue(t,g)])),t)};var W=i(2754),G=i(3722),$=i(8469),X=i(2990),Y=i(2096);class K extends W.q{constructor(){super(...arguments),this.type=l.L.discreteLegend,this.name=l.L.discreteLegend}static getSpecInfo(t){return(0,Y.ts)(t,this.specKey,this.type,t=>!t.type||"discrete"===t.type)}init(t){super.init(t),(0,v.xV)(this._regions,t=>{t.addViewDataFilter({type:"discreteLegendFilter",options:{series:t,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(t),data:()=>this.getLegendDefaultData(),customFilter:this._spec.customFilter},level:X.BV.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){(0,f.U)(this._option.dataSet,"discreteLegendFilter",U),(0,f.U)(this._option.dataSet,"discreteLegendDataMake",V);let t=new o.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"discreteLegendDataMake",options:{series:()=>{let t=[];return(0,v.xV)(this._regions,e=>{t.push(e)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),t},seriesField:t=>this._getSeriesLegendField(t)}}),t}_getSeriesLegendField(t){var e,i,s;let n=t.getSeriesField(),a=null!==(e=this._spec.scaleName)&&void 0!==e?e:this._spec.scale;if((0,r.Z)(a)||!t.getRawData())return n;let o=this._option.globalScale.getScaleSpec(a);if(!o)return n;if(this._spec.field)return this._spec.field;if(!(0,_.S5)(o.domain))return n;let l=o.domain.find(e=>e.dataId===t.getRawData().name);return l&&null!==(s=null===(i=l.fields)||void 0===i?void 0:i[0])&&void 0!==s?s:n}_initSelectedData(){let t=this.getLegendDefaultData();if(this._unselectedData){let e=[],i=[];t.forEach(t=>{this._unselectedData.includes(t)?i.push(t):e.push(t)}),this._selectedData=e,this._unselectedData=i}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=t}getLegendDefaultData(t){return(0,s.Z)(this._spec.data)?this._getLegendItems().map(t=>t.label):this._legendData.getLatestData().map(t?t=>t.originalKey:t=>t.key)}_addDefaultTitleText(t){var e,i,s,n;if((null===(e=t.title)||void 0===e?void 0:e.visible)&&(0,r.Z)(t.title.text)&&(0,r.Z)(null===(i=t.title.style)||void 0===i?void 0:i.text)){let e=null===(n=null===(s=this._regions)||void 0===s?void 0:s[0])||void 0===n?void 0:n.getSeries()[0];if(!e)return;t.title.text=(0,y.tW)(e.getRawData(),e.getSeriesField())}}_getLegendAttributes(t){let e=Object.assign(Object.assign({layout:"bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",items:this._getLegendItems(),zIndex:this.layoutZIndex},function(t,e){let{title:i={},item:r={},pager:s={},background:n={},type:a,id:o,visible:l,orient:f,position:v,data:y,filter:_,regionId:b,regionIndex:x,seriesIndex:S,seriesId:A,padding:k}=t,w=m(t,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(w.title=(0,g.q)(i)),(0,h.Z)(r.focusIconStyle)||(0,p.h_)(r.focusIconStyle),r.shape&&(r.shape=(0,p.ro)(r.shape)),r.label&&(r.label=(0,p.ro)(r.label)),r.value&&(r.value=(0,p.ro)(r.value)),r.background&&(r.background=(0,p.ro)(r.background)),(0,d.hU)(r.maxWidth)&&(r.maxWidth=Number(r.maxWidth.substring(0,r.maxWidth.length-1))*e.width/100),(0,d.hU)(r.width)&&(r.width=Number(r.width.substring(0,r.width.length-1))*e.width/100),(0,d.hU)(r.height)&&(r.height=Number(r.height.substring(0,r.height.length-1))*e.width/100),w.item=r,"scrollbar"===s.type?((0,h.Z)(s.railStyle)||(0,p.h_)(s.railStyle),(0,h.Z)(s.sliderStyle)||(0,p.h_)(s.sliderStyle)):((0,h.Z)(s.textStyle)||(0,p.h_)(s.textStyle),s.handler&&(0,p.ro)(s.handler)),w.pager=s,n.visible&&!(0,h.Z)(n.style)&&((0,c.H)(w,n.style),(0,u.Z)(n.padding)&&(w.padding=n.padding)),w}(this._spec,t)),{maxWidth:t.width,maxHeight:t.height});return this._addDefaultTitleText(e),this._addLegendItemFormatMethods(e),e}_getLegendConstructor(){return N}setSelectedData(t){t&&(this._unselectedData=this.getLegendDefaultData().filter(e=>!t.includes(e))),super.setSelectedData(t)}_initEvent(){if(this._legendComponent){let t=!1!==this._spec.filter;this._legendComponent.addEventListener(b.dk.legendItemClick,e=>{let i=(0,n.Z)(e,"detail.currentSelected");t&&this.setSelectedData(i),this.event.emit(G.$7.legendItemClick,{model:this,value:i,event:e})}),this._legendComponent.addEventListener(b.dk.legendItemHover,t=>{let e=(0,n.Z)(t,"detail");this.event.emit(G.$7.legendItemHover,{model:this,value:e,event:t})}),this._legendComponent.addEventListener(b.dk.legendItemUnHover,t=>{let e=(0,n.Z)(t,"detail");this.event.emit(G.$7.legendItemUnHover,{model:this,value:e,event:t})})}}_getLegendItems(){let t=(this._legendData.getLatestData()||[]).map(t=>{var e,i;let r=t.style("fillOpacity"),s=t.style("strokeOpacity"),n=t.style("opacity"),o=t.style("texture");return{label:t.key,shape:{symbolType:null!==(i=null!==(e=t.style("symbolType"))&&void 0!==e?e:t.shapeType)&&void 0!==i?i:"circle",fillOpacity:(0,a.Z)(r)?r:1,strokeOpacity:(0,a.Z)(s)?s:1,opacity:(0,a.Z)(n)?n:1,texturePadding:o?1:null,textureSize:o?4:null,texture:o,fill:t.style("fill"),stroke:t.style("stroke"),textureColor:t.style("textureColor"),innerBorder:t.style("innerBorder"),outerBorder:t.style("outerBorder"),lineDash:t.style("lineDash"),lineDashOffset:t.style("lineDashOffset"),lineWidth:t.style("lineWidth")}}});return(0,s.Z)(this._spec.data)?this._spec.data(t,this._option.globalScale.getScale("color"),this._option.globalScale):t}_addLegendItemFormatMethods(t){var e,i,r,s;let{formatMethod:n,formatter:a}=null!==(i=null===(e=this._spec.item)||void 0===e?void 0:e.label)&&void 0!==i?i:{},{formatMethod:o,formatter:l}=null!==(s=null===(r=this._spec.item)||void 0===r?void 0:r.value)&&void 0!==s?s:{},{formatFunc:h}=(0,Y.HJ)(n,a);a&&!n&&h&&(t.item.label.formatMethod=(t,e)=>h(t,e,a));let{formatFunc:u}=(0,Y.HJ)(o,l);l&&!o&&u&&(t.item.value.formatMethod=(t,e)=>u(l,t,e,a))}}K.specKey="legends",K.type=l.L.discreteLegend;let q=()=>{$.F.registerComponent(K.type,K)}},1106:function(t,e,i){"use strict";i.d(e,{q:()=>a});var r=i(1121),s=i(4218),n=i(123);function a(t){var e,i;let a=Object.assign({},t);return(0,r.Z)(t.style)||(a.textStyle=(0,n.h_)(t.style)),(0,r.Z)(t.textStyle)||(0,s.H)(a.textStyle,(0,n.h_)(t.textStyle)),(null===(e=t.shape)||void 0===e?void 0:e.style)&&(0,n.h_)(a.shape.style),(null===(i=t.background)||void 0===i?void 0:i.style)&&(0,n.h_)(a.background.style),a}},7645:function(t,e,i){"use strict";i.d(e,{_:()=>A});var r=i(6542),s=i(8469),n=i(1960),a=i(8746),o=i(7602),l=i(325),h=i(3215),u=i(7623),d=i(7636),c=i(3e3),p=i(9167),g=i(9367),m=i(5757),f=i(4683);(0,g.M)(),(0,m.g)(),(0,f.v)();class v extends c.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,l.Z)({},v.defaultAttributes,t)),this.name="title"}render(){var t,e,i,r,s,n,a,o,l,c,g,m,f,v,y,_,b,x,S,A;let{textType:k,text:w,subtextType:C,textStyle:T={},subtext:E,subtextStyle:M={},width:B,height:D,minWidth:O,maxWidth:P,minHeight:I,maxHeight:R,align:L,verticalAlign:F,padding:j=0}=this.attribute,Z=(0,h.o)(j),H=this.createOrUpdateChild("title-container",{x:Z[3],y:Z[0],zIndex:1},"group"),N=null!==(t=T.height)&&void 0!==t?t:D;if(!1!==this.attribute.visible&&!1!==T.visible){let{width:t,maxHeight:o,maxWidth:l,x:h=0,y:c=0,ellipsis:g=!0,wordBreak:m="break-word",maxWidth:f,lineClamp:v}=T;if("rich"===k||(0,u.Z)(T.character)){let r=Object.assign({x:h,y:c,width:null!==(e=null!=t?t:B)&&void 0!==e?e:0,height:null!=N?N:0,ellipsis:null==g||g,wordBreak:null!=m?m:"break-word",maxHeight:null!=o?o:R,maxWidth:null!=l?l:f,textConfig:null!==(i=T.character)&&void 0!==i?i:w},T);this._mainTitle=H.createOrUpdateChild("mainTitle",r,"richtext")}else if("html"===k){let e=Object.assign({html:Object.assign(Object.assign({dom:w},p.Ze),T),x:h,y:c,width:null!==(r=null!=t?t:B)&&void 0!==r?r:0,height:null!=N?N:0,ellipsis:g,wordBreak:m,maxHeight:null!=o?o:R,maxWidth:null!=l?l:f,textConfig:[]},T);this._mainTitle=H.createOrUpdateChild("mainTitle",e,"richtext")}else(0,u.Z)(w)&&(this._mainTitle=H.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:(0,d.Z)(w)?w:[w],whiteSpace:"normal"},T),{maxLineWidth:null!==(n=null!==(s=T.maxLineWidth)&&void 0!==s?s:t)&&void 0!==n?n:B,heightLimit:null!==(a=T.height)&&void 0!==a?a:R,lineClamp:v,ellipsis:g,x:h,y:c}),"text"))}let z=this._mainTitle?this._mainTitle.AABBBounds.height():0,V=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(!1!==this.attribute.visible&&!1!==M.visible){let{width:t,height:e,maxWidth:i,maxHeight:r,x:s=0,y:n=0,ellipsis:a=!0,wordBreak:h="break-word",lineClamp:y}=M,_=Math.max(Number.MIN_VALUE,R-z);if("rich"===C||(0,u.Z)(M.character)){let u=Object.assign({x:s,y:n,width:null!==(o=null!=t?t:B)&&void 0!==o?o:0,height:null!==(l=null!=e?e:D)&&void 0!==l?l:0,ellipsis:a,wordBreak:h,maxHeight:null!=r?r:_,maxWidth:null!=i?i:P,textConfig:null!==(c=M.character)&&void 0!==c?c:E},M);this._subTitle=H.createOrUpdateChild("subTitle",u,"richtext")}else if("html"===C){let o=Object.assign({html:Object.assign(Object.assign({dom:E},p.Ze),M),x:s,y:n,width:null!==(g=null!=t?t:B)&&void 0!==g?g:0,height:null!==(m=null!=e?e:D)&&void 0!==m?m:0,ellipsis:a,wordBreak:h,maxHeight:null!=r?r:_,maxWidth:null!=i?i:P,textConfig:[]},M);this._subTitle=H.createOrUpdateChild("subTitle",o,"richtext")}else(0,u.Z)(E)&&(this._subTitle=H.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:(0,d.Z)(E)?E:[E],whiteSpace:"normal"},M),{maxLineWidth:null!==(f=M.maxLineWidth)&&void 0!==f?f:B,heightLimit:null!==(v=M.heightLimit)&&void 0!==v?v:_,lineClamp:y,ellipsis:a,x:0,y:z}),"text"))}let U=this._subTitle?this._subTitle.AABBBounds.height():0,W=Math.max(V,this._subTitle?this._subTitle.AABBBounds.width():0),G=z+(null!==(y=M.height)&&void 0!==y?y:U);if((0,u.Z)(B)&&(W=B),(0,u.Z)(D)&&(G=D),(0,u.Z)(O)&&W<O&&(W=O),(0,u.Z)(P)&&W>P&&(W=P),(0,u.Z)(I)&&G<I&&(G=I),(0,u.Z)(R)&&G>R&&(G=R),H.attribute.width=W,H.attribute.height=G,H.attribute.boundsPadding=Z,this._mainTitle){if((0,u.Z)(L)||(0,u.Z)(T.align)){let t=T.align?T.align:L,e=null!==(_=T.width)&&void 0!==_?_:W;"center"===t?(this._mainTitle.setAttribute("x",e/2),this._mainTitle.setAttribute("textAlign","center")):"right"===t?(this._mainTitle.setAttribute("x",e),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}let t=T.verticalAlign?T.verticalAlign:F,e=null!=N?N:this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height();"middle"===t?(this._mainTitle.setAttribute("y",e/2),this._mainTitle.setAttribute("textBaseline","middle")):"bottom"===t?(this._mainTitle.setAttribute("y",e),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if((0,u.Z)(L)||(0,u.Z)(M.align)){let t=M.align?M.align:L,e=null!==(x=null!==(b=M.width)&&void 0!==b?b:T.width)&&void 0!==x?x:W;"center"===t?(this._subTitle.setAttribute("x",e/2),this._subTitle.setAttribute("textAlign","center")):"right"===t?(this._subTitle.setAttribute("x",e),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}let t=M.verticalAlign?M.verticalAlign:F,e=this._mainTitle?(0,u.Z)(N)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),N):this._mainTitle.AABBBounds.y2:0,i=null!==(A=null!==(S=M.height)&&void 0!==S?S:D)&&void 0!==A?A:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();"middle"===t?(this._subTitle.setAttribute("y",e+i/2),this._subTitle.setAttribute("textBaseline","middle")):"bottom"===t?(this._subTitle.setAttribute("y",e+i),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",e),this._subTitle.setAttribute("textBaseline","top"))}}}v.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};var y=i(8378),_=i(9198),b=i(9730),x=i(2096);class S extends a.H{get orient(){return this._orient}constructor(t,e){super(t,e),this.type=o.L.title,this.specKey=o.L.title,this.layoutType="normal",this.layoutZIndex=r.Ai.Title,this.layoutLevel=r.pM.Title,this._orient="top",this._orient=(0,n.vk)(t.orient)?t.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(t){return(0,x.ts)(t,this.specKey,o.L.title,t=>!1!==t.visible)}onRender(t){}_compareSpec(t,e){let i=super._compareSpec(t,e);return(null==e?void 0:e.orient)===(null==t?void 0:t.orient)&&(null==e?void 0:e.visible)===t.visible||(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(t){}update(t){}resize(t){}afterSetLayoutStartPoint(t){(0,y.Z)(t.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",t.x),(0,y.Z)(t.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",t.y),super.afterSetLayoutStartPoint(t)}getBoundsInRect(t){let e={};this.setLayoutRect(t);let i=this._getTitleAttrs();this._createOrUpdateTitleComponent(i),e=this._getTitleLayoutRect();let{x:r,y:s}=this.getLayoutStartPoint();return{x1:r,y1:s,x2:r+e.width,y2:s+e.height}}_getTitleLayoutRect(){let t=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:(0,y.Z)(t.width())?t.width():0,height:this._spec.height?this._spec.height:(0,y.Z)(t.height())?t.height():0}}_getTitleAttrs(){var t,e,i,r,s,a,o,l;if(!1===this._spec.visible)return{visible:!1};let h=this.getLayoutRect(),d=(0,n.Mv)(this._spec.width,h.width,null,h.width),c=Math.max(Math.min(d,(0,n.Mv)(this._spec.maxWidth,h.width,null,h.width),h.width),0),p=Object.assign(Object.assign({},(0,_.Z)(this._spec,["padding"])),{textType:null!==(t=this._spec.textType)&&void 0!==t?t:"text",text:null!==(e=this._spec.text)&&void 0!==e?e:"",subtextType:null!==(i=this._spec.subtextType)&&void 0!==i?i:"text",subtext:null!==(r=this._spec.subtext)&&void 0!==r?r:"",x:null!==(s=this._spec.x)&&void 0!==s?s:0,y:null!==(a=this._spec.y)&&void 0!==a?a:0,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:c,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:null!==(o=this._spec.align)&&void 0!==o?o:"left",verticalAlign:null!==(l=this._spec.verticalAlign)&&void 0!==l?l:"top",textStyle:Object.assign({width:c,maxLineWidth:c},this._spec.textStyle),subtextStyle:Object.assign({maxLineWidth:c},this._spec.subtextStyle)});return(0,u.Z)(this._spec.width)&&(p.textStyle.width=Math.max(d,h.width),p.subtextStyle.width=p.textStyle.width),p}_createOrUpdateTitleComponent(t){if(this._titleComponent)(0,b.X)(t,this._cacheAttrs)||this._titleComponent.setAttributes(t);else{let e=this.getContainer(),i=new v(t);i.name="title",e.add(i),this._titleComponent=i,i.on("*",(t,e)=>this._delegateEvent(i,t,e))}return this._cacheAttrs=t,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}S.type=o.L.title,S.specKey=o.L.title;let A=()=>{s.F.registerComponent(S.type,S)}},4774:function(t,e,i){"use strict";i.d(e,{IK:()=>h,UH:()=>a,a:()=>s,vP:()=>n,z5:()=>l,zM:()=>o});var r=i(3685);let s={dom:`${r.Bq}_TOOLTIP_HANDLER_DOM`,canvas:`${r.Bq}_TOOLTIP_HANDLER_CANVAS`},n="vchart-tooltip-element",a=20,o={key:"其他",value:"..."},l=["group","mark","dimension"],h=50},7694:function(t,e,i){"use strict";i.d(e,{M:()=>W});var r=i(7602),s=i(8746),n=i(7631),a=i(3885),o=i(3722),l=i(7623),h=i(6082),u=i(7636),d=i(1725),c=i(4312),p=i(5173);let g=(t,e)=>(0,l.Z)(e)?t.map(t=>e[t]):void 0,m=(t,e)=>i=>t.every((t,r)=>i[t]===(null==e?void 0:e[r])),f=t=>!(0,h.Z)(t)&&((0,u.Z)(t)?t.length>0&&t.every(l.Z):Object.keys(t).length>0),v=(t,e)=>{let i=e.getSeries(),r=[];return i.forEach(e=>{var i,s,n,o,u,d,c;let v=e.getDimensionField(),y=e.getMeasureField(),_=e.getSeriesField(),b=(0,l.Z)(_)?t[_]:void 0,x=(0,l.Z)(_)&&null!==(o=null===(n=null===(s=null===(i=e.getViewDataStatistics)||void 0===i?void 0:i.call(e))||void 0===s?void 0:s.latestData[_])||void 0===n?void 0:n.values)&&void 0!==o?o:[],S=g(v,t),A=g(y,t),k=f(A),w=!k&&(0,l.Z)(_)&&(0,h.Z)(b)&&x.length>0,C=()=>{var t;let i=null===(t=e.getViewData())||void 0===t?void 0:t.latestData.find(m(v,S));if(!k&&!f(A=g(y,i)))return;let s=e.type===a.A.pie?e.dataToCentralPosition(i):e.dataToPosition(i);(0,h.Z)(s)||isNaN(s.x)||isNaN(s.y)||r.push({pos:s,data:{dimensionFields:v,dimensionData:S,measureFields:y,measureData:A,hasMeasureData:k,groupField:_,groupData:b},series:e})};if("cartesian"===e.coordinate){let t=(0,p.lK)(null===(d=null===(u=e.getYAxisHelper())||void 0===u?void 0:u.getScale(0))||void 0===d?void 0:d.type)?"y":"x",i=v.map((t,e)=>[t,e]).filter(([,t])=>(0,h.Z)(null==S?void 0:S[t])),s=[null!=S?S:[]];i.length>0&&i.forEach(([t,i])=>{var r,n,a,o;let l=null!==(o=null===(a=null===(n=null===(r=e.getViewDataStatistics)||void 0===r?void 0:r.call(e))||void 0===n?void 0:n.latestData[t])||void 0===a?void 0:a.values)&&void 0!==o?o:[],h=[];s.forEach(t=>{l.forEach(e=>{var r;let s=null!==(r=null==t?void 0:t.slice())&&void 0!==r?r:[];s[i]=e,h.push(s)})}),s=h}),s.forEach(i=>{var s,n;if(w){let n=null===(s=e.getViewData())||void 0===s?void 0:s.latestData.filter(m(v,i));x.forEach(s=>{let a=n.find(t=>t[_]===s);if(!f(A=g(y,a)))return;let o=e.dataToPosition(a);(0,h.Z)(o)||isNaN(o.x)||isNaN(o.y)||r.push({pos:o,data:{dimensionFields:v,dimensionData:i,measureFields:y,measureData:A,hasMeasureData:k,groupField:_,groupData:s},series:e,dimType:t})})}else{let s=null===(n=e.getViewData())||void 0===n?void 0:n.latestData.find(m(v,i));if(!k&&!f(A=g(y,s)))return;let a=e.dataToPosition(s);if((0,h.Z)(a)||isNaN(a.x)||isNaN(a.y))return;r.push({pos:a,data:{dimensionFields:v,dimensionData:i,measureFields:y,measureData:A,hasMeasureData:k,groupField:_,groupData:b},dimType:t,series:e})}})}else if("polar"===e.coordinate){if(e.type===a.A.pie)C();else if(w){let t=(null===(c=e.getViewData())||void 0===c?void 0:c.latestData.filter(m(v,S))).find(t=>t[_]===b);x.forEach(i=>{if(!f(A=g(y,t)))return;let s=e.dataToPosition(t);(0,h.Z)(s)||isNaN(s.x)||isNaN(s.y)||r.push({pos:s,data:{dimensionFields:v,dimensionData:S,measureFields:y,measureData:A,hasMeasureData:k,groupField:_,groupData:i},series:e})})}else C()}else"geo"===e.coordinate&&C()}),r};var y=i(897),_=i(9673);let b=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"],x=(t,e,i,r,s)=>{var n,a,o;let h={activeType:t};switch(t){case"mark":case"group":if(i){let o=null===(n=i.getSpec())||void 0===n?void 0:n.tooltip;return h.visible=!0,(null==o?void 0:o.handler)&&(h.handler=o.handler),(null===(a=h.handler)||void 0===a?void 0:a.showTooltip)?h:((null==o?void 0:o[t])&&b.forEach(e=>{(0,l.Z)(o[t][e])&&(h[e]=o[t][e])}),Object.assign(Object.assign({},h),i.tooltipHelper.getTooltipData(t,e,r,r[0].datum,s)))}break;case"dimension":if(null==r?void 0:r.length){if(S(r).every(t=>{var e;return!(0,y.Lw)("dimension",null===(e=t.tooltipHelper)||void 0===e?void 0:e.spec)})?h.visible=!1:h.visible=!0,h.handler=e.handler,null===(o=h.handler)||void 0===o?void 0:o.showTooltip)return h;let i=[];return r.forEach(n=>n.data.forEach(n=>{let{series:a}=n,o=a.tooltipHelper.getTooltipData(t,e,r,n.datum,s);o&&i.push(o)})),(0,y.Uy)(i)}}return null},S=t=>{let e=[];return t.forEach(t=>{t.data.forEach(t=>{(0,l.Z)(t.series)&&e.push(t.series)})}),e};var A=i(4774);class k{constructor(t){this._showTooltipByHandler=(t,e)=>{var i,r,s;let n;if((0,h.Z)(t))return 1;e.changePositionOnly||this.clearCache(),this._updateViewSpec(t,e);let a=this._cacheActiveSpec;if((0,h.Z)(a)||!1===a.visible)return 1;e.tooltipSpec=this.component.getSpec(),e.activeTooltipSpec=a;let{title:l,content:u}=a,d=(0,h.Z)(null==l?void 0:l.key)&&(0,h.Z)(null==l?void 0:l.value)&&!(null==u?void 0:u.length);return(this.component.event.emit(o.$7.tooltipShow,Object.assign(Object.assign({},e),{isEmptyTooltip:d,tooltipData:t,activeType:this.activeType,tooltip:this.component})),d)?1:((null===(i=a.handler)||void 0===i?void 0:i.showTooltip)?n=a.handler.showTooltip.bind(a.handler):(null===(r=this.component.tooltipHandler)||void 0===r?void 0:r.showTooltip)&&(n=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),n?null!==(s=n(this.activeType,t,e))&&void 0!==s?s:0:1)},this.component=t}_preprocessDimensionInfo(t){let e=[];if(null==t||t.forEach(t=>{let i=Object.assign(Object.assign({},t),{data:t.data.filter(({series:t})=>{var e,i;return!1!==(null===(i=null===(e=t.getSpec())||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.visible)})});i.data.length>0&&e.push(i)}),e.length>0)return e}_updateViewSpec(t,e){var i,r,s,n,a,o,u,d,c;let{changePositionOnly:p,model:g}=e;if(!p||!this._cacheActiveSpec){let p=this.component.getSpec();if(this._cacheActiveSpec=x(this.activeType,this.component.getSpec(),g,t,e),this._cacheActiveSpec){(0,h.Z)(this._cacheActiveSpec.handler)&&(0,l.Z)(p.handler)&&(this._cacheActiveSpec.handler=p.handler);let g=null!==(i=p[this.activeType])&&void 0!==i?i:{},m=null!==(r=this._cacheActiveSpec.updateTitle)&&void 0!==r?r:g.updateTitle,f=null!==(s=this._cacheActiveSpec.updateContent)&&void 0!==s?s:g.updateContent,v=null!==(a=null!==(n=this._cacheActiveSpec.maxLineCount)&&void 0!==n?n:g.maxLineCount)&&void 0!==a?a:A.UH;if(m&&(this._cacheActiveSpec.title=null!==(o=m(this._cacheActiveSpec.title,t,e))&&void 0!==o?o:this._cacheActiveSpec.title),f)this._cacheActiveSpec.content=null!==(u=f(this._cacheActiveSpec.content,t,e))&&void 0!==u?u:this._cacheActiveSpec.content;else if(v>=1&&(null===(d=this._cacheActiveSpec.content)||void 0===d?void 0:d.length)>v){let t=null!==(c=this._cacheActiveSpec.othersLine)&&void 0!==c?c:g.othersLine,e=t?Object.assign(Object.assign({},A.zM),t):A.zM;this._cacheActiveSpec.content=[...this._cacheActiveSpec.content.slice(0,v-1),Object.assign(Object.assign({},this._cacheActiveSpec.content[v-1]),e)]}}}}shouldHandleTooltip(t,e){var i,r;return!(0,h.Z)(e)&&(0,y.Lw)(this.activeType,null===(r=null===(i=t.model)||void 0===i?void 0:i.tooltipHelper)||void 0===r?void 0:r.spec)}clearCache(){this._cacheActiveSpec=void 0}}var w=i(3233),C=i(7665);class T extends k{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(t,e,i){let r=Object.assign(Object.assign({},e),{dimensionInfo:this._preprocessDimensionInfo(t),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(t,r)}_getDimensionInfo(t){var e,i;let r;let s=this.component.getChart(),n=s.getCompiler().getStage().getLayer(void 0),a={x:t.event.viewX,y:t.event.viewY};if(n.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},a),0===(r=[...null!==(e=(0,w.p5)(s,a,!0))&&void 0!==e?e:[],...null!==(i=(0,C.e)(s,a))&&void 0!==i?i:[]]).length)r=void 0;else if(r.length>1){let t=r.filter(t=>{var e;let i;let r=t.axis;if(r.getSpec().hasDimensionTooltip)return!0;if(!(0,p.lK)(r.getScale().type))return!1;for(let t of null!==(e=null==r?void 0:r.getRegions())&&void 0!==e?e:[]){for(let e of t.getSeries())if("cartesian"===e.coordinate){i=e;break}if((0,l.Z)(i))break}return(0,l.Z)(i)&&i.getDimensionField()[0]===i.fieldY[0]?"left"===r.getOrient()||"right"===r.getOrient():"bottom"===r.getOrient()||"top"===r.getOrient()});if((r=t.length?t:r.slice(0,1)).length>1){let t=new Set;r.forEach(e=>{e.data=e.data.filter(({key:e})=>!t.has(e)&&(t.add(e),!0))})}}return r}getMouseEventData(t){return{tooltipInfo:this._getDimensionInfo(t),ignore:!1}}}var E=i(4546);class M extends k{constructor(){super(...arguments),this.activeType="group"}showTooltip(t,e,i){let{datum:r,series:s}=t,n=[{datum:(0,E.IX)(r),series:s}],a=Object.assign(Object.assign({},e),{groupDatum:this._getGroupDatum(e),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(n,a)}getMouseEventData(t){var e,i;let r;if("series"===(null===(e=t.model)||void 0===e?void 0:e.modelType)){let e=t.model,s=e.tooltipHelper,n=null==s?void 0:s.activeTriggerSet.group;if(null==n?void 0:n.has(t.mark)){let s=this.component.getSpec()[this.activeType];((null==s?void 0:s.triggerMark)?(0,E.IX)(s.triggerMark):[]).includes(null===(i=t.mark)||void 0===i?void 0:i.name)&&(r={mark:t.mark,datum:t.datum,series:e})}}return{tooltipInfo:r,ignore:!1}}_getGroupDatum(t){let{model:e,mark:i,datum:r}=t;if(["line","area"].includes(i.type))return(0,E.IX)(r);let s=e.getViewData().latestData,n=e.getSeriesField();if(!n)return s;let a=(0,E.IX)(r)[0][n];return s.filter(t=>t[n]===a)}}var B=i(3872);class D extends k{constructor(){super(...arguments),this.activeType="mark"}showTooltip(t,e,i){var r,s,n;let{datum:a,series:o}=t,l=this.component.getSpec(),h=[{datum:[a],series:o}],u=o.tooltipHelper,d=null===(r=o.getSpec())||void 0===r?void 0:r.tooltip,c=null===(s=null==d?void 0:d.mark)||void 0===s?void 0:s.checkOverlap,p=!1;if(!0===c||!0===(null===(n=l.mark)||void 0===n?void 0:n.checkOverlap)&&!1!==c){let t=null==u?void 0:u.activeTriggerSet.mark;if(t){p=!0;let i=this.component.getChart().getCompiler().getStage().getLayer(void 0),r={x:e.event.viewX,y:e.event.viewY};i.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},r),t.forEach(t=>{t.getProductElements().forEach(t=>{let i=t.getGraphicItem();t!==e.item&&i&&i.containsPoint(r.x,r.y,B.LZ.GLOBAL,i.stage.getPickerService())&&h[0].datum.push(t.getDatum())})})}}let g=Object.assign(Object.assign({},e),{model:o,changePositionOnly:i,tooltip:this.component});if(i&&p){let t=this._cacheActiveSpec&&this._cacheActiveSpec.data;t&&t[0].series===h[0].series&&t[0].datum.length===h[0].datum.length&&!t[0].datum.some((t,e)=>t!==h[0].datum[e])||(g.changePositionOnly=!1)}return this._showTooltipByHandler(h,g)}getMouseEventData(t){var e;let i,r;let s=null===(e=t.model)||void 0===e?void 0:e.modelType;if("series"===s){let e=t.model,s=e.tooltipHelper,n=null==s?void 0:s.activeTriggerSet.mark,a=null==s?void 0:s.ignoreTriggerSet.mark;(null==n?void 0:n.has(t.mark))?i={mark:t.mark,datum:t.datum,series:e}:(null==a?void 0:a.has(t.mark))&&(r=!0)}else if("component"===s){let e=t.model,s=t.node;if("label"===e.name&&s){let t=e.getLabelInfoByTextGraphic(s),{baseMark:n,series:a,labelMark:o}=null!=t?t:{},l=a.tooltipHelper,h=null==l?void 0:l.activeTriggerSet.mark,u=null==l?void 0:l.ignoreTriggerSet.mark;(null==h?void 0:h.has(o))?i={mark:n,datum:s.attribute.data,series:a}:(null==u?void 0:u.has(o))&&(r=!0)}}return{tooltipInfo:i,ignore:r}}}let O=t=>(0,l.Z)(t)&&!(0,u.Z)(t),P=t=>(0,l.Z)(t)&&(0,u.Z)(t);var I=i(4154),R=i(1601),L=i(6689),F=i(8469),j=i(8612),Z=i(9904),H=i(2930),N=i(4218);class z extends H.r{_shouldMergeThemeToSpec(){return!1}_initTheme(t,e){var i;let{spec:r,theme:s}=super._initTheme(t,e);return r.style=(0,N.H)({},this._theme,r.style),r.offset=(0,N.H)({},s.offset,t.offset),r.transitionDuration=null!==(i=t.transitionDuration)&&void 0!==i?i:s.transitionDuration,{spec:r,theme:s}}_transformSpecAfterMergingTheme(t,e,i){var r,s,a,o,h,u,d;super._transformSpecAfterMergingTheme(t,e,i),t.visible=null===(r=t.visible)||void 0===r||r,t.activeType=(0,y.Zn)(t),t.renderMode=null!==(s=t.renderMode)&&void 0!==s?s:(0,n.Oy)(this._option.mode)||!(0,n.qe)(this._option.mode)?"canvas":"html",t.trigger=null!==(a=t.trigger)&&void 0!==a?a:"hover",t.className=null!==(o=t.className)&&void 0!==o?o:A.vP,t.enterable=null!==(h=t.enterable)&&void 0!==h&&h,t.transitionDuration=null!==(u=t.transitionDuration)&&void 0!==u?u:150,t.confine=null!==(d=t.confine)&&void 0!==d?d:"canvas"===t.renderMode,(0,l.Z)(t.parentElement)?(0,Z.Z)(t.parentElement)&&(t.parentElement=j.rF.getElementById(t.parentElement)):(0,n.qe)(this._option.mode)&&(t.parentElement=null==n.Eh?void 0:n.Eh.body)}}var V=i(5205);class U extends s.H{constructor(){super(...arguments),this.layoutZIndex=1,this.type=r.L.tooltip,this.name=r.L.tooltip,this.transformerConstructor=z,this.specKey="tooltip",this.layoutType="none",this._isReleased=!1,this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(t,e,i)=>{this.event.on(t,e,i),this._eventList.push({eventType:t,handler:i})},this._handleClickToLock=t=>{this._clickLock?(this._handleChartMouseOut(t),this._clickLock=!1):this._clickLock=!0},this._getMouseOutHandler=t=>e=>{var i,r,s,a,o;if(this._isReleased||this._alwaysShow||this._clickLock||!this._isTooltipShown&&!(null===(r=null===(i=this.tooltipHandler)||void 0===i?void 0:i.isTooltipShown)||void 0===r?void 0:r.call(i)))return;let l=(0,n.qe)(null===(s=this._option)||void 0===s?void 0:s.mode),{clientX:h,clientY:u}=e.event;l&&t&&this._isPointerInChart({x:h,y:u})||(this._enterable?this._outTimer=setTimeout(()=>{this._handleChartMouseOut(e)},null!==(o=null===(a=this._spec)||void 0===a?void 0:a.showDelay)&&void 0!==o?o:A.IK):this._handleChartMouseOut(e))},this._handleChartMouseOut=t=>{this._alwaysShow||this._isReleased||this._isEnterTooltip||"none"!==this._spec.triggerOff&&(this._hideTooltipByHandler(Object.assign(Object.assign({},t),{tooltip:this})),this._handleMouseMove&&this._handleMouseMove.cancel&&this._handleMouseMove.cancel(),this._cacheEnterableRect=null,this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=t=>e=>{var i,r,s,n;this._isReleased||this._isEnterTooltip||(this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||(this._clickLock?t&&(this._handleChartMouseOut(e),this._clickLock=!1):!t&&this._enterable&&(null===(r=null===(i=this.tooltipHandler)||void 0===i?void 0:i.isTooltipShown)||void 0===r?void 0:r.call(i))?(this._showTimer&&clearTimeout(this._showTimer),this._showTimer=setTimeout(()=>{this._handleChartMouseMove(e,t)},null!==(n=null===(s=this._spec)||void 0===s?void 0:s.showDelay)&&void 0!==n?n:A.IK)):this._handleChartMouseMove(e,t)))},this._handleChartMouseMove=(t,e)=>{if(this._isReleased)return;let i=this._getMouseEventData(t),{tooltipInfo:{dimension:r},ignore:{mark:s}}=i,n={mark:!1,dimension:!1,group:!1};for(let r=0,s=A.z5.length;r<s;r++){let s=A.z5[r];if(this.processor[s]&&this._showTooltipByMouseEvent(s,i,t,e)){n[s]=!0;break}}Object.values(n).every(t=>!t)&&!(0,y.hx)(t)&&(s&&O(this._cacheInfo)?n.mark=this._showTooltipByMouseEvent("mark",i,t,e,!0):(0,l.Z)(r)&&(n.dimension=this._showTooltipByMouseEvent("dimension",i,t,e))),n.mark||n.group||n.dimension&&!(0,h.Z)(r)?this._initEventOfTooltipContent():this._handleChartMouseOut(t)},this._showTooltipByMouseEvent=(t,e,i,r,s)=>{var n;let a;let o=this.processor[t];if(!o.shouldHandleTooltip(i,e.tooltipInfo[t]))return!1;if(this._hideTimer&&clearTimeout(this._hideTimer),s)a=!o.showTooltip(this._cacheInfo,i,!0);else{let r=e.tooltipInfo[t],s=this._isSameAsCache(r,i,t);(a=!o.showTooltip(r,i,s))&&(this._cacheInfo=r,this._cacheParams=i,this._cacheActiveType=t)}a&&(this._isTooltipShown=!0,r&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._hideTimer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));let l=null===(n=this._option)||void 0===n?void 0:n.globalInstance;return a&&c.H.globalConfig.uniqueTooltip&&l&&c.H.hideTooltip(l.id),a},this._getMouseEventData=t=>{let e={tooltipInfo:{},ignore:{}};return Object.keys(this.processor).forEach(i=>{let{tooltipInfo:r,ignore:s}=this.processor[i].getMouseEventData(t);e.tooltipInfo[i]=r,e.ignore[i]=s}),e},this._hideTooltipByHandler=t=>{var e,i,r;if(!this._isTooltipShown&&!(null===(i=null===(e=this.tooltipHandler)||void 0===e?void 0:e.isTooltipShown)||void 0===i?void 0:i.call(e)))return 0;this.event.emit(o.$7.tooltipHide,Object.assign(Object.assign({},t),{source:o.AY.chart,tooltip:this})),Object.values(this.processor).forEach(t=>{t.clearCache()});let s=null!==(r=this._spec.handler)&&void 0!==r?r:this.tooltipHandler;if(s.hideTooltip){let e=s.hideTooltip.call(s,t);return e||(this._isTooltipShown=!1),e}return 1},this.hideTooltip=()=>{if(this._isReleased)return!1;let t={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:o.AY.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(t)}}isTooltipShown(){return this._isTooltipShown}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}_registerEvent(){}_releaseEvent(){}onLayout(t){}onLayoutEnd(t){}onRender(t){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var t,e;super.release(),this._isReleased=!0,this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach(({eventType:t,handler:e})=>{this.event.off(t,e)}),this._eventList=[],null===(e=null===(t=this.tooltipHandler)||void 0===t?void 0:t.release)||void 0===e||e.call(t),this._isTooltipShown=!1}beforeRelease(){this.event.emit(o.$7.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(o.$7.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var t,e,i;let r=null!==(t=this._spec.renderMode)&&void 0!==t?t:"html",s=this._option.globalInstance.getTooltipHandlerByUser();if(s)this.tooltipHandler=s,this._enterable=!1;else{let t="canvas"===r?A.a.canvas:A.a.dom,s=F.F.getComponentPluginInType(t);s||(0,V.vU)("Can not find tooltip handler: "+t);let n=new s;n.name=`${this._spec.className}-${null!==(e=this._option.globalInstance.id)&&void 0!==e?e:0}-${this.getSpecIndex()}`,null===(i=this.pluginService)||void 0===i||i.load([n]),this.tooltipHandler=n,this._spec.enterable&&"html"===r&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}}_initEventOfTooltipContent(){var t,e;if(!this._needInitEventOfTooltip)return;let i=null===(e=(t=this.tooltipHandler).getTooltipContainer)||void 0===e?void 0:e.call(t),r=null==i?void 0:i.firstChild;r&&(r.addEventListener("pointerenter",()=>{var t;if(!this._enterable)return;this._isEnterTooltip=!0;let e=null===(t=r.getBoundingClientRect)||void 0===t?void 0:t.call(r);e&&(this._cacheEnterableRect={x:e.x,y:e.y,width:e.width,height:e.height}),this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}),r.addEventListener("pointerleave",()=>{var t,e,i;if(this._enterable&&(this._isEnterTooltip=!1,this._cacheEnterableRect)){let s=null===(t=r.getBoundingClientRect)||void 0===t?void 0:t.call(r);s&&Object.keys(this._cacheEnterableRect).every(t=>this._cacheEnterableRect[t]===s[t])&&(this._cacheEnterableRect=null,this._outTimer=setTimeout(this.hideTooltip,null!==(i=null===(e=this._spec)||void 0===e?void 0:e.showDelay)&&void 0!==i?i:A.IK))}}),this._needInitEventOfTooltip=!1)}_initProcessor(){let t=this._spec.activeType;this.processor={},t.includes("dimension")&&(this.processor.dimension=new T(this)),t.includes("group")&&(this.processor.group=new M(this)),t.includes("mark")&&(this.processor.mark=new D(this))}_initEvent(){var t;if(this._option.disableTriggerEvent)return;let e=(0,E.IX)(null!==(t=this._spec.trigger)&&void 0!==t?t:"hover"),i=(0,E.IX)(this._spec.triggerOff),r=this._option.mode;e.forEach(t=>{var e;"hover"===t?(this._handleMouseMove=this._throttle(this._getMouseMoveHandler(!1)),this._mountEvent("pointermove",{source:"chart"},this._handleMouseMove),((0,n.wx)(r)||(0,n.Oy)(r))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerleave",{source:"chart"},this._getMouseOutHandler(!1))):"click"===t?(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))):(0,I.Z)(t)&&this._mountEvent(t.eventType,{source:null!==(e=t.source)&&void 0!==e?e:"chart",consume:t.consume},this._getMouseMoveHandler(!0))}),i.filter(t=>(0,I.Z)(t)).forEach(t=>{var e,i;this._mountEvent(t.eventType,{source:null!==(e=t.source)&&void 0!==e?e:"chart",consume:t.consume},this._getMouseOutHandler(null!==(i=t.checkOutside)&&void 0!==i&&i))}),!e.includes("click")&&this._spec.lockAfterClick&&this._mountEvent("pointertap",{source:"chart"},this._handleClickToLock)}_throttle(t){let e;return e=(0,R.Z)(this._spec.throttleInterval)?this._spec.throttleInterval:"html"===this._spec.renderMode&&this._spec.transitionDuration?50:10,(0,L.Z)(t,e)}reInit(t){var e,i,r;if(super.reInit(t),this.tooltipHandler){let t=null!==(e=this._spec.renderMode)&&void 0!==e?e:"html",s=this._spec.enterable&&"html"===t;s&&!this._enterable&&(this._needInitEventOfTooltip=!0),this._enterable=s,null===(r=(i=this.tooltipHandler).reInit)||void 0===r||r.call(i)}else this._initHandler()}showTooltip(t,e){var i;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(null===(i=this.tooltipHandler)||void 0===i?void 0:i.showTooltip))return!1;let r=function(t,e,i){var r,s,n;let a=Object.assign({regionIndex:0},e),u=i.getOption(),p=u.getRegionsInUserIdOrIndex((0,l.Z)(a.regionId)?[a.regionId]:void 0,(0,l.Z)(a.regionIndex)?[a.regionIndex]:void 0)[0];if(!p)return"none";let g=v(t,p),f=null!==(r=a.activeType)&&void 0!==r?r:g.length>1?"dimension":"mark",y=p.getLayoutStartPoint(),_=p.getLayoutRect(),b=u.globalInstance.getContainer(),x=Object.assign({x:0,y:0},b?(0,d.to)(b):{}),S=t=>{var e;let{dimensionFields:i,dimensionData:r,measureFields:s,measureData:n,groupField:a,groupData:o}=t.data;return null===(e=t.series.getViewData())||void 0===e?void 0:e.latestData.find(t=>m(i,r)(t)&&m(s,n)(t)&&((0,h.Z)(a)||m([a],[o])(t)))},A=t=>{var e,i;let r={x:Math.min(Math.max(t.x,0),_.width),y:Math.min(Math.max(t.y,0),_.height)},s=null!==(e=a.x)&&void 0!==e?e:y.x+r.x,n=null!==(i=a.y)&&void 0!==i?i:y.y+r.y;return{canvasX:s,canvasY:n,clientX:x.x+s,clientY:x.y+n}};if("dimension"===f){let e=g[0];if(!e)return"none";let r=new Map;g.forEach(t=>{var e;r.has(t.series)||r.set(t.series,[]),null===(e=r.get(t.series))||void 0===e||e.push(t)});let n=[{value:t[e.data.dimensionFields[0]],data:[...r.keys()].map(t=>{var e,i;return{series:t,datum:null!==(i=null===(e=r.get(t))||void 0===e?void 0:e.map(t=>S(t)))&&void 0!==i?i:[]}})}];(0,l.Z)(e.dimType)&&(n[0].position=e.pos[e.dimType],n[0].dimType=e.dimType);let a={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:n,chart:null!==(s=u.globalInstance.getChart())&&void 0!==s?s:void 0,datum:void 0,model:void 0,source:o.AY.chart,event:A({x:g.reduce((t,e)=>t+e.pos.x,0)/g.length,y:g.reduce((t,e)=>t+e.pos.y,0)/g.length}),item:void 0,itemMap:new Map};i.processor.dimension.showTooltip(n,a,!1);let h=u.globalInstance;return c.H.globalConfig.uniqueTooltip&&c.H.hideTooltip(h.id),f}if("mark"===f){let e=g[0];if(!e)return"none";let r=Object.assign(Object.assign({},S(e)),t),s=[{datum:[r],series:e.series}],a={changePositionOnly:!1,tooltip:null,dimensionInfo:[{value:r[e.data.dimensionFields[0]],data:s}],chart:null!==(n=u.globalInstance.getChart())&&void 0!==n?n:void 0,datum:r,model:e.series,source:o.AY.chart,event:A(e.pos),item:void 0,itemMap:new Map};i.processor.mark.showTooltip({datum:r,mark:null,series:e.series},a,!1);let l=u.globalInstance;return c.H.globalConfig.uniqueTooltip&&c.H.hideTooltip(l.id),f}return"none"}(t,e,this);return"none"!==r&&(this._alwaysShow=!!(null==e?void 0:e.alwaysShow)),r}_isSameAsCache(t,e,i){if(i!==this._cacheActiveType)return!1;if(t===this._cacheInfo)return!0;if((0,h.Z)(this._cacheInfo)||(0,h.Z)(t))return!1;if(P(t)){if(O(this._cacheInfo))return!1;let e=this._cacheInfo;return e.length===t.length&&t.every((t,i)=>(0,_.eH)(t,e[i]))}if(P(this._cacheInfo))return!1;let r=this._cacheInfo;if(!((null==t?void 0:t.datum)===r.datum&&(null==t?void 0:t.mark)===r.mark&&(null==t?void 0:t.series)===r.series))return!1;let s=this._cacheParams;return!(0,h.Z)(s)&&!(0,h.Z)(e)&&s.mark===e.mark&&s.model===e.model&&s.datum===e.datum}_isPointerInChart(t){var e;let i=null===(e=this._option)||void 0===e?void 0:e.globalInstance;if(!i||!i.getChart())return!1;let{x:r,y:s}=t,{x:n,y:a,width:o,height:l}=i.getCanvas().getBoundingClientRect();return r>=n&&r<=n+o&&s>=a&&s<=a+l}getVisible(){return!1!==this._spec.visible}}U.type=r.L.tooltip,U.transformerConstructor=z,U.specKey="tooltip";let W=()=>{F.F.registerComponent(U.type,U)}},897:function(t,e,i){"use strict";i.d(e,{Lw:()=>c,Uy:()=>v,Zn:()=>d,hx:()=>p,nK:()=>f,u6:()=>y});var r=i(7623),s=i(7636),n=i(6082),a=i(1121),o=i(9038),l=i(9711),h=i(6281),u=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let d=t=>{var e,i,s;if(!1===(null==t?void 0:t.visible))return[];let n={mark:!1!==(null===(e=null==t?void 0:t.mark)||void 0===e?void 0:e.visible),dimension:!1!==(null===(i=null==t?void 0:t.dimension)||void 0===i?void 0:i.visible),group:!1!==(null===(s=null==t?void 0:t.group)||void 0===s?void 0:s.visible)};return(0,r.Z)(null==t?void 0:t.activeType)&&Object.keys(n).forEach(e=>{var i;n[e]=null===(i=null==t?void 0:t.activeType)||void 0===i?void 0:i.includes(e)}),Object.keys(n).filter(t=>n[t])},c=(t,e)=>!e||!1!==e.visible&&(!e[t]||!1!==e[t].visible)&&!(e.activeType&&!((0,s.Z)(e.activeType)?e.activeType.includes(t):e.activeType===t));function p(t){return(0,n.Z)(t.mark)&&(0,n.Z)(t.model)&&(0,n.Z)(t.datum)}function g(t,e,i,o,l,d){let c=e=>{if(e){let s={datum:l},c=(0,n.Z)(e.key)&&(0,n.Z)(e.value)&&!(0,a.Z)(e)?Object.assign(Object.assign(Object.assign({},o),i),e):Object.assign(Object.assign({},o),e),{key:p,keyFormatter:g,keyTimeFormat:m,keyTimeFormatMode:f,value:v,valueFormatter:_,valueTimeFormat:b,valueTimeFormatMode:x}=c,S=u(c,["key","keyFormatter","keyTimeFormat","keyTimeFormatMode","value","valueFormatter","valueTimeFormat","valueTimeFormatMode"]);s.key=y((0,h.Xb)(p,l,d,g),m,f),s.value=y((0,h.Xb)(v,l,d,_),b,x),Object.keys(S).forEach(t=>{s[t]=(0,h.Xb)(c[t],l,d)}),!1!==s.visible&&((0,r.Z)(s.key)||(0,r.Z)(s.value))&&t.push(s)}};(0,s.Z)(e)?e.forEach(t=>{c(t)}):c(e)}function m(t,e,i,r,s,n,a){(0,o.Z)(e)?g(t,e(s,a),i,r,n,a):e&&g(t,e,i,r,n,a)}function f(t,e,i,r,n,a){if(n&&n.length){let l=[];return n.forEach(n=>{(0,s.Z)(t)?t.forEach(t=>{m(l,t,e,i,r,n,a)}):(0,o.Z)(t)?m(l,t,e,i,r,n,a):t&&g(l,t,e,i,n,a)}),l}return null}function v(t){if(!t||!t.length)return null;let e=[];return t.forEach(({content:t})=>{t&&t.forEach(t=>{e.push(t)})}),e.length?Object.assign(Object.assign({},t[0]),{content:e}):t[0]}let y=(t,e,i)=>{if(!e&&!i)return"object"!=typeof t?null==t?void 0:t.toString():t;let r=l.k.getInstance();return e=e||"%Y%m%d",("local"===(i=i||"local")?r.timeFormat:r.timeUTCFormat)(e,t)}},6281:function(t,e,i){"use strict";i.d(e,{Xb:()=>h,lg:()=>d,sE:()=>u});var r=i(9038),s=i(5890),n=i(7623),a=i(1130),o=i(6082),l=i(2096);let h=(t,e,i,o)=>{let h;if(h=(0,r.Z)(t)?t(e,i):(0,s.Z)(t)&&(0,n.Z)(t.field)?(0,a.Z)(e,t.field):t,o){let{formatFunc:i,args:r}=(0,l.HJ)(void 0,o,t,e);i&&r&&(h=i(...r))}return h},u=(t,e,i)=>(0,o.Z)(t)?t:(0,r.Z)(t)?t(e,i):t;function d(t){var e;for(let{data:i}of(null===(e=t[0])||void 0===e?void 0:e.series)?[{data:t,value:""}]:t)for(let{datum:t}of i)for(let e of null!=t?t:[])if(e)return e}},2096:function(t,e,i){"use strict";i.d(e,{DE:()=>o,HJ:()=>l,ts:()=>h});var r=i(1130),s=i(6082),n=i(7636),a=i(8469);function o(t,e){return(0,r.Z)(e,`component.${t}`)}function l(t,e,i,r){if(t)return{formatFunc:t,args:[i,r]};let s=a.F.getFormatter();return e&&s?{formatFunc:s,args:[i,r,e]}:{}}let h=(t,e,i,r)=>{if((0,s.Z)(t[e]))return;let a=(0,n.Z)(t[e]),o=a?t[e]:[t[e]],l=[];return o.forEach((t,s)=>{t&&(!r||r(t))&&l.push({spec:t,specPath:a?[e,s]:[e],specInfoPath:["component",e,s],type:i})}),l}},9231:function(t,e,i){"use strict";var r,s;i.d(e,{W:()=>r}),(s=r||(r={}))[s.Default=0]="Default",s[s.Theme=1]="Theme",s[s.Chart=2]="Chart",s[s.Base_Series=3]="Base_Series",s[s.Series=4]="Series",s[s.Mark=5]="Mark",s[s.User_Chart=6]="User_Chart",s[s.User_Series=7]="User_Series",s[s.User_Mark=8]="User_Mark",s[s.User_SeriesStyle=9]="User_SeriesStyle",s[s.Built_In=99]="Built_In"},3685:function(t,e,i){"use strict";i.d(e,{Bq:()=>r,b:()=>n,rV:()=>s});let r="__VCHART",s=500,n=500},5669:function(t,e,i){"use strict";i.d(e,{AF:()=>g,Gq:()=>m,Iz:()=>f,Jl:()=>p,Ti:()=>o,Uq:()=>u,XW:()=>n,cL:()=>y,cQ:()=>h,eh:()=>l,fB:()=>c,lb:()=>a,vM:()=>s,wo:()=>v,x0:()=>d});var r=i(3685);r.Bq;let s=`${r.Bq}_DEFAULT_DATA_INDEX`,n=`${r.Bq}_DEFAULT_DATA_KEY`,a=`${r.Bq}_DEFAULT_DATA_SERIES_FIELD`,o=`${r.Bq}_DEFAULT_SERIES_STYLE_NAME`,l=`${r.Bq}_STACK_KEY`,h=`${r.Bq}_STACK_START`,u=`${r.Bq}_STACK_END`,d=`${r.Bq}_STACK_START_PERCENT`,c=`${r.Bq}_STACK_END_PERCENT`,p=`${r.Bq}_STACK_START_OffsetSilhouette`,g=`${r.Bq}_STACK_END_OffsetSilhouette`,m=`${r.Bq}_STACK_TOTAL`,f=`${r.Bq}_STACK_TOTAL_PERCENT`,v=`${r.Bq}_STACK_TOTAL_TOP`,y=`${r.Bq}_STACK_TOTAL_BOTTOM`;r.Bq,r.Bq,r.Bq,r.Bq,r.Bq,r.Bq},3722:function(t,e,i){"use strict";var r,s,n,a,o,l;i.d(e,{$7:()=>r,AY:()=>s,Ve:()=>h,l:()=>n});let h=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];(a=r||(r={})).initialized="initialized",a.rendered="rendered",a.renderFinished="renderFinished",a.animationFinished="animationFinished",a.regionSeriesDataFilterOver="regionSeriesDataFilterOver",a.afterInitData="afterInitData",a.afterInitEvent="afterInitEvent",a.afterInitMark="afterInitMark",a.rawDataUpdate="rawDataUpdate",a.viewDataFilterOver="viewDataFilterOver",a.viewDataUpdate="viewDataUpdate",a.viewDataStatisticsUpdate="viewDataStatisticsUpdate",a.markDeltaYUpdate="markDeltaYUpdate",a.viewDataLabelUpdate="viewDataLabelUpdate",a.scaleDomainUpdate="scaleDomainUpdate",a.scaleUpdate="scaleUpdate",a.dataZoomChange="dataZoomChange",a.drill="drill",a.layoutStart="layoutStart",a.layoutEnd="layoutEnd",a.layoutRectUpdate="layoutRectUpdate",a.playerPlay="playerPlay",a.playerPause="playerPause",a.playerEnd="playerEnd",a.playerChange="playerChange",a.playerForward="playerForward",a.playerBackward="playerBackward",a.scrollBarChange="scrollBarChange",a.brushStart="brushStart",a.brushChange="brushChange",a.brushEnd="brushEnd",a.brushClear="brushClear",a.legendSelectedDataChange="legendSelectedDataChange",a.legendFilter="legendFilter",a.legendItemClick="legendItemClick",a.legendItemHover="legendItemHover",a.legendItemUnHover="legendItemUnHover",a.tooltipShow="tooltipShow",a.tooltipHide="tooltipHide",a.tooltipRelease="tooltipRelease",a.afterResize="afterResize",a.afterRender="afterRender",a.afterLayout="afterLayout",(o=s||(s={})).chart="chart",o.window="window",o.canvas="canvas",(l=n||(n={})).vchart="vchart",l.chart="chart",l.model="model",l.mark="mark"},6542:function(t,e,i){"use strict";var r,s,n,a;i.d(e,{Ai:()=>r,pM:()=>s,sd:()=>l,wK:()=>o});let o=9,l=0;(n=r||(r={}))[n.SeriesGroup=0]="SeriesGroup",n[n.Axis_Grid=50]="Axis_Grid",n[n.CrossHair_Grid=100]="CrossHair_Grid",n[n.Region=450]="Region",n[n.Mark=300]="Mark",n[n.Node=400]="Node",n[n.Axis=100]="Axis",n[n.MarkLine=500]="MarkLine",n[n.MarkArea=100]="MarkArea",n[n.MarkPoint=500]="MarkPoint",n[n.DataZoom=500]="DataZoom",n[n.ScrollBar=500]="ScrollBar",n[n.Player=500]="Player",n[n.Legend=500]="Legend",n[n.CrossHair=500]="CrossHair",n[n.Indicator=500]="Indicator",n[n.Title=500]="Title",n[n.Label=500]="Label",n[n.Brush=500]="Brush",n[n.CustomMark=500]="CustomMark",n[n.Interaction=700]="Interaction",(a=s||(s={}))[a.Indicator=10]="Indicator",a[a.Region=20]="Region",a[a.Axis=30]="Axis",a[a.DataZoom=40]="DataZoom",a[a.Player=40]="Player",a[a.ScrollBar=40]="ScrollBar",a[a.Legend=50]="Legend",a[a.Title=70]="Title",a[a.CustomMark=70]="CustomMark"},8350:function(t,e,i){"use strict";i.d(e,{A8:()=>o,Di:()=>m,E2:()=>s,FI:()=>a,JK:()=>c,KZ:()=>f,Uw:()=>p,Y1:()=>n,dr:()=>l,hk:()=>u,v2:()=>g,xt:()=>d,yz:()=>h});var r=i(3685);let s=`${r.Bq}_ARC_TRANSFORM_VALUE`,n=`${r.Bq}_ARC_RATIO`,a=`${r.Bq}_ARC_START_ANGLE`,o=`${r.Bq}_ARC_END_ANGLE`,l=`${r.Bq}_ARC_K`,h=`${r.Bq}_ARC_MIDDLE_ANGLE`,u=`${r.Bq}_ARC_QUADRANT`,d=`${r.Bq}_ARC_RADIAN`,c=-Math.PI/2,p=3*Math.PI/2,g=-90,m=270,f=.6},8469:function(t,e,i){"use strict";i.d(e,{F:()=>n});var r=i(6680),s=i(8947);class n{static registerChart(t,e){n._charts[t]=e}static registerSeries(t,e){n._series[t]=e}static registerComponent(t,e,i){n._components[t]={cmp:e,alwaysCheck:i}}static registerMark(t,e){n._marks[t]=e}static registerRegion(t,e){n._regions[t]=e}static registerTransform(t,e){n.transforms[t]=e}static registerLayout(t,e){n._layout[t]=e}static registerAnimation(t,e){n._animations[t]=e}static registerImplement(t,e){n._implements[t]=e}static registerChartPlugin(t,e){n._chartPlugin[t]=e}static registerComponentPlugin(t,e){n._componentPlugin[t]=e}static createChart(t,e,i){return n._charts[t]?new n._charts[t](e,i):null}static createChartSpecTransformer(t,e){if(!n._charts[t])return null;let i=n._charts[t];return new i.transformerConstructor(Object.assign({seriesType:i.seriesType},e))}static createRegion(t,e,i){return n._regions[t]?new n._regions[t](e,i):null}static createRegionSpecTransformer(t,e){return n._regions[t]?new n._regions[t].transformerConstructor(e):null}static createSeries(t,e,i){return n._series[t]?new n._series[t](e,i):null}static createSeriesSpecTransformer(t,e){return n._series[t]?new n._series[t].transformerConstructor(e):null}static createMark(t,e,i){if(!n._marks[t])return null;let r=new n._marks[t](e,i);return"group"===r.type&&r.setMarkConfig({interactive:!1}),r}static getComponents(){return Object.values(n._components)}static getComponentInKey(t){return n._components[t].cmp}static getLayout(){return Object.values(n._layout)}static getLayoutInKey(t){return n._layout[t]}static getSeries(){return Object.values(n._series)}static getSeriesInType(t){return n._series[t]}static getRegionInType(t){return n._regions[t]}static getAnimationInKey(t){return n._animations[t]}static getImplementInKey(t){return n._implements[t]}static getSeriesMarkMap(t){return n._series[t]?n._series[t].mark:{}}static getChartPlugins(){return Object.values(n._chartPlugin)}static getComponentPlugins(){return Object.values(n._componentPlugin)}static getComponentPluginInType(t){return n._componentPlugin[t]}static registerFormatter(t){this._formatter=t}static getFormatter(){return this._formatter}}n._charts={},n._series={},n._components={},n._marks={},n._regions={},n._animations={},n._implements={},n._chartPlugin={},n._componentPlugin={},n.transforms={fields:r.X,filter:(t,e)=>{let{callback:i}=e;return i&&(t=t.filter(i)),t},fold:(t,e)=>{let{fields:i,key:r,value:s,retains:n}=e,a=[];for(let e=0;e<t.length;e++)i.forEach(o=>{let l={};if(l[r]=o,l[s]=t[e][o],n)n.forEach(i=>{l[i]=t[e][i]});else for(let r in t[e])-1===i.indexOf(r)&&(l[r]=t[e][r]);a.push(l)});return a}},n.dataParser={csv:s.UI,dsv:s.$W,tsv:s.mK},n._layout={}},4312:function(t,e,i){"use strict";i.d(e,{H:()=>ix});var r,s,n=i(1697),a=i(6962),o=i(7602),l=i(2449),h=i(5795),u=i(6338),d=i(8612),c=i(9904),p=i(7636),g=i(5890),m=i(4546),f=i(6082),v=i(7623),y=i(9013),_=i(1960),b=i(7631),x=i(5205),S=i(3066);let A=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],k=t=>{let e={label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}};return e[t?"transform3d":"transform"]={style:{fill:{type:"palette",key:"axisGridColor"}}},e},w=k(),C=k(!0),T="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z";var E=i(8350);let M={innerRadius:0,outerRadius:1,startAngle:E.v2,endAngle:E.Di,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},B={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},D=Object.assign(Object.assign({},B),{label:{space:0}}),O=()=>({style:{symbolType:"M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3\nC-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC0.3-1.4,0.3-1.4,0.3-1.4z;",fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}}),P=t=>({area:{style:{visible:t,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:t,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}),I={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:P(!1),startHandler:O(),endHandler:O(),startText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:P(!0)},R=(t,e)=>({fontSize:{type:"token",key:t},fill:{type:"palette",key:e},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}),L={title:{visible:!0,autoLimit:!1,autoFit:!1,style:R("l1FontSize","primaryFontColor")},content:{visible:!0,style:R("l2FontSize","tertiaryFontColor")}},F={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}},j=t=>{let e={width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}};return t?(e.width=200,e.height=8):(e.width=8,e.height=200),Object.assign(Object.assign({},F),{rail:e,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}}})},Z={horizontal:j(!0),vertical:j(!1)},H=t=>{let e={style:{fill:{type:"palette",key:"sliderRailColor"}}};return t?(e.width=200,e.height=4):(e.height=200,e.width=4),Object.assign(Object.assign({},F),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:e,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}}})},N={horizontal:H(!0),vertical:H(!1)},z=()=>({style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}),V={area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:z()},U=t=>({visible:t,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}}),W=z();W.refY=5;let G={line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:U(!1),endSymbol:U(!0),label:W},$={itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}};var X=i(5165);let Y={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:{type:"token",key:"fontFamily"},colorScheme:{default:{dataScheme:A,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2",discreteLegendPagerTextColor:"rgb(51, 51, 51)",discreteLegendPagerHandlerColor:"rgb(47, 69, 84)",discreteLegendPagerHandlerDisableColor:"rgb(170, 170, 170)",emptyCircleColor:"#e3e5e8",linearProgressTrackColor:"#E7EBED"}}},token:X.r,mark:{text:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1}}},markByName:{label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1,lineJoin:"bevel"}},area:{style:{fillOpacity:.2}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontWeight:null,fontSize:null}},fillingWord:{style:{fontWeight:null,fontSize:null}},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},circlePacking:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},funnel3d:{style:{stroke:!1}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06},stroke:"transparent"}}},series:{scatter:{point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},line:{label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},area:{label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}},seriesMark:"area"},bar:{label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}},bar3d:{bar3d:{style:{length:3}},label:{visible:!1,style:{offset:12,position:"outside"}}},pie:{outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}},emptyCircle:{style:{fill:{type:"palette",key:"emptyCircleColor"},fillOpacity:1}}},pie3d:{outerRadius:.6,pie3d:{style:{height:10,fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside"}},map:{defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:{type:"token",key:"l6FontSize"},lineHeight:{type:"token",key:"l6LineHeight"},textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}},radar:{label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}},dot:{dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},link:{arrow:{style:{size:10}}},wordCloud:{word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},wordCloud3d:{word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}},funnel:w,funnel3d:C,linearProgress:{bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:{type:"palette",key:"linearProgressTrackColor"},fillOpacity:1}}},circularProgress:{outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},waterfall:{seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:{type:"token",key:"l4FontSize"}}},label:{visible:!1,offset:12,position:"inside",style:{lineWidth:2}}},gauge:{outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}},gaugePointer:{pointer:{type:"path",width:.4,height:.4,style:{path:"M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z"}},pin:{width:.025,height:.025,style:{path:T,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:T,fill:"#ddd"}}},treemap:{gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},nonLeafLabel:{padding:24,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},textBaseline:"middle",textAlign:"center"}}},sunburst:M,rangeColumn:{label:{visible:!1,offset:5,position:"inside",style:{lineWidth:2,fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}},circlePacking:{layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},heatmap:{cell:{style:{shape:"square",fillOpacity:1}},cellBackground:{visible:!1}},sankey:{link:{style:{fillOpacity:.15,round:!0}}},rose:{rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}},boxPlot:{boxPlot:{style:{lineWidth:1}},label:{style:{lineWidth:2}}},correlation:{centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}},liquid:{outlinePadding:10,liquidBackground:{style:{lineWidth:0,fillOpacity:.2}},liquidOutline:{style:{lineWidth:2}}},venn:{circle:{style:{opacity:.8},state:{hover:{opacity:1}}},overlap:{style:{opacity:.8},state:{hover:{opacity:1,stroke:"white",lineWidth:2}}},label:{visible:!0,style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"}}},overlapLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}},mosaic:{label:{visible:!1,position:"center",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},bar:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}}}},component:{discreteLegend:{orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},pager:{textStyle:{fill:{type:"palette",key:"discreteLegendPagerTextColor"}},handler:{style:{fill:{type:"palette",key:"discreteLegendPagerHandlerColor"}},state:{disable:{fill:{type:"palette",key:"discreteLegendPagerHandlerDisableColor"}}}}},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1},colorLegend:Z,sizeLegend:N,axis:{domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:4,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}},axisBand:{domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}},axisLinear:{domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}},axisX:B,axisY:{label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},axisZ:D,axisAngle:{grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}},axisRadius:{grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},markLine:G,markArea:V,markPoint:$,polarMarkLine:G,polarMarkArea:V,polarMarkPoint:$,geoMarkPoint:$,tooltip:{offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle",spacing:26},valueLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}},dataZoom:I,crosshair:{trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineWidth:0,stroke:{type:"palette",key:"markLineStrokeColor"},lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:"transparent",opacity:.7,lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}}},player:{visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}},brush:{style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0},indicator:L,title:{padding:{top:4,bottom:20},textStyle:{fontSize:{type:"token",key:"l3FontSize"},lineHeight:{type:"token",key:"l3LineHeight"},fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fill:{type:"palette",key:"tertiaryFontColor"}}},mapLabel:{visible:!0,offset:12,position:"top",space:10,nameLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:{type:"token",key:"l6FontSize"}}},valueLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:{type:"token",key:"l6FontSize"}}},background:{visible:!0,padding:{top:4,bottom:4,left:6,right:6},style:{cornerRadius:2,lineWidth:1,fill:"white",stroke:"grey"}},leader:{visible:!1,style:{lineWidth:1,stroke:"red"}}},poptip:{visible:!0,position:"auto",padding:8,titleStyle:{fontSize:{type:"token",key:"l5FontSize"},fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}},totalLabel:{visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"primaryFontColor"}}},scrollBar:{horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}}},animationThreshold:2e3};var K=i(4370);let q=["animationThreshold","colorScheme","name","padding"];function J(t,e,i,r){if(!t)return t;e||(e=t.colorScheme),i||(i=t.token);let s={};return Object.keys(t).forEach(n=>{var a;let o=t[n];q.includes(n)?s[n]=o:(0,g.Z)(o)?(0,K.ht)(o)?s[n]=(0,K.yu)(o,e,r):o&&"token"===o.type&&o.key?s[n]=(a=i)&&o.key in a?a[o.key]:o.default:s[n]=J(o,e,i,r):s[n]=o}),s}let Q={[Y.name]:Y},tt=Y.name,te=new Map(Object.keys(Q).map(t=>[t,Q[t]])),ti=new Map(Object.keys(Q).map(t=>[t,J(Q[t])])),tr=new Map(Object.keys(Q).map(t=>[t,t===tt])),ts=(t,e)=>{if(!t)return;let i=tl(e);te.set(t,i),ti.set(t,J(i)),tr.set(t,!0)},tn=(t=tt,e=!1)=>(tr.has(t)&&!tr.get(t)&&ts(t,te.get(t)),e?ti.get(t):te.get(t)),ta=t=>te.delete(t)&&ti.delete(t)&&tr.delete(t),to=t=>!!(0,c.Z)(t)&&te.has(t),tl=t=>{var e;let i=tn(null!==(e=t.type)&&void 0!==e?e:tt);return(0,S.hr)({},i,t)};class th{static registerInstance(t){th.instances.set(t.id,t)}static unregisterInstance(t){th.instances.delete(t.id)}static getInstance(t){return th.instances.get(t)}static instanceExist(t){return th.instances.has(t)}static forEach(t,e=[],i){let r=(0,m.IX)(e);return th.instances.forEach((e,i,s)=>{r.includes(i)||t(e,i,s)},i)}}th.instances=new Map;class tu{static registerTheme(t,e){ts(t,e)}static getTheme(t,e=!1){return tn(t,e)}static removeTheme(t){return ta(t)}static themeExist(t){return to(t)}static getDefaultTheme(){return tu.themes.get(tt)}static setCurrentTheme(t){tu.themeExist(t)&&(tu._currentThemeName=t,th.forEach(e=>null==e?void 0:e.setCurrentTheme(t)))}static getCurrentTheme(t=!1){return tu.getTheme(tu._currentThemeName,t)}static getCurrentThemeName(){return tu._currentThemeName}}tu.themes=te,tu._currentThemeName=tt;var td=i(4154);function tc(t,e){return(0,c.Z)(t)?tu.themeExist(t)?tu.getTheme(t,e):{}:(0,td.Z)(t)?t:{}}var tp=i(4218),tg=i(8469),tm=i(4277),tf=i(3722);class tv{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(tf.l.vchart,[]),this._levelNodes.set(tf.l.chart,[]),this._levelNodes.set(tf.l.model,[]),this._levelNodes.set(tf.l.mark,[])}addHandler(t,e){var i;let r={level:e,handler:t};return null===(i=this._levelNodes.get(e))||void 0===i||i.push(r),this._map.set(t.callback,r),this}removeHandler(t){let e=this._map.get(t.callback);if(!e)return this;this._map.delete(t.callback);let i=this._levelNodes.get(e.level),r=null==i?void 0:i.findIndex(e=>e.handler.callback===t.callback);return void 0!==r&&r>=0&&(null==i||i.splice(r,1)),this}preventHandler(t){return t&&(t.prevented=!0),this}allowHandler(t){return t&&(t.prevented=!1),this}getHandlers(t){var e;return(null===(e=this._levelNodes.get(t))||void 0===e?void 0:e.map(t=>t.handler))||[]}getAllHandlers(){return Array.from(this._map.values()).map(t=>t.handler)||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}var ty=i(1130),t_=i(9038),tb=i(6689),tx=i(2937),tS=i(2698),tA=i(4761);let tk={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend"};class tw{constructor(t,e){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=t=>{var e,i;let r=this.globalInstance.getChart(),s=(0,v.Z)(t.modelId)&&(null==r?void 0:r.getModelById(t.modelId))||void 0,n=(0,v.Z)(t.markId)&&(null==r?void 0:r.getMarkById(t.markId))||null,a=new Map,o=null===(e=t.item)||void 0===e?void 0:e.mark;for(o&&(0,v.Z)(o.id())&&a.set(o.id(),t.item);null==o?void 0:o.elements;){let t=o.id();(0,v.Z)(t)&&!a.has(t)&&a.set(t,o.elements[0]),o=o.group}let l=(0,ty.Z)(t.event,"target"),h=t.datum;s&&"component"===s.modelType&&(h=null!==(i=s.getDatum(l))&&void 0!==i?i:h);let u={event:t.event,item:t.item,source:t.source,datum:h,itemMap:a,chart:r,model:s,mark:null!=n?n:void 0,node:(0,ty.Z)(t.event,"target")};this.dispatch(t.type,u)},this._onDelegateInteractionEvent=t=>{let e=this.globalInstance.getChart(),i=t.event,r=null;i.elements&&(r=i.elements);let s={event:t.event,chart:e,items:r,datums:r&&r.map(t=>t.getDatum())};this.dispatch(t.type,s)},this.globalInstance=t,this._compiler=e}register(t,e){var i,r,s,n,a;this._parseQuery(e);let o=this.getEventBubble((null===(i=e.filter)||void 0===i?void 0:i.source)||tf.AY.chart),l=this.getEventListeners((null===(r=e.filter)||void 0===r?void 0:r.source)||tf.AY.chart);if(o.get(t)||o.set(t,new tv),o.get(t).addHandler(e,null===(s=e.filter)||void 0===s?void 0:s.level),this._isValidEvent(t)&&!l.has(t)){let i=this._onDelegate.bind(this);this._compiler.addEventListener(null===(n=e.filter)||void 0===n?void 0:n.source,t,i),l.set(t,i)}else if(this._isInteractionEvent(t)&&!l.has(t)){let i=this._onDelegateInteractionEvent.bind(this);this._compiler.addEventListener(null===(a=e.filter)||void 0===a?void 0:a.source,t,i),l.set(t,i)}return this}unregister(t,e){var i,r,s,n;let a=!1,o=this.getEventBubble((null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.source)||tf.AY.chart),l=this.getEventListeners((null===(r=null==e?void 0:e.filter)||void 0===r?void 0:r.source)||tf.AY.chart);if(e){let i=o.get(t);null==i||i.removeHandler(e),0===(null==i?void 0:i.getCount())&&(null==i||i.release(),o.delete(t),a=!0),(null===(s=null==e?void 0:e.wrappedCallback)||void 0===s?void 0:s.cancel)&&e.wrappedCallback.cancel()}else{let e=o.get(t);null==e||e.release(),o.delete(t),a=!0}if(a&&this._isValidEvent(t)){let i=l.get(t);this._compiler.removeEventListener((null===(n=null==e?void 0:e.filter)||void 0===n?void 0:n.source)||tf.AY.chart,t,i),l.delete(t)}return this}dispatch(t,e,i){let r=this.getEventBubble(e.source||tf.AY.chart).get(t);if(!r)return this;let s=!1;if(i){let n=r.getHandlers(i);s=this._invoke(n,t,e)}else{let i=[tf.l.mark,tf.l.model,tf.l.chart,tf.l.vchart],n=0;for(;!s&&n<i.length;)s=this._invoke(r.getHandlers(i[n]),t,e),n++}return this}prevent(t,e){return["canvas","chart","window"].forEach(i=>{let r=this.getEventBubble(i).get(t);r&&r.getAllHandlers().forEach(t=>{e&&t.callback===e||r.preventHandler(t)})}),this}allow(t){return["canvas","chart","window"].forEach(e=>{let i=this.getEventBubble(e).get(t);i&&i.getAllHandlers().forEach(t=>i.allowHandler(t))}),this}clear(){[tf.AY.chart,tf.AY.window,tf.AY.canvas].forEach(t=>{let e=this.getEventListeners(t);for(let i of e.entries())this._compiler.removeEventListener(t,i[0],i[1]);e.clear()}),[this._viewBubbles,this._windowBubbles,this._canvasBubbles].forEach(t=>{for(let e of t.values())e.release();t.clear()})}release(){this.clear(),this.globalInstance=null,this._compiler=null}_filter(t,e,i){var r,s,n;if((0,t_.Z)(t.filter)&&!t.filter(i)||t.nodeName&&(0,ty.Z)(i,"node.name")!==t.nodeName||t.markName&&(null===(r=null==i?void 0:i.mark)||void 0===r?void 0:r.name)!==t.markName)return!1;let a=null===(s=i.model)||void 0===s?void 0:s.type;return tk[a]&&(a=tk[a]),(!t.type||a===t.type)&&!("mark"===t.level&&!t.type&&!(null==i?void 0:i.mark))&&!("model"===t.level&&!t.type&&!(null==i?void 0:i.model))&&(!(0,v.Z)(t.userId)||(null===(n=i.model)||void 0===n?void 0:n.userId)===t.userId)}_prepareParams(t,e){if(t.markName&&e.mark&&e.itemMap){let t=e.mark.getProductId(),i=e.itemMap.get(t),r=null==i?void 0:i.getDatum();return Object.assign(Object.assign({},e),{item:i,datum:r})}return Object.assign({},e)}_invoke(t,e,i){return t.map(t=>{var r,s,n;let a=t.filter;if(!t.prevented&&(!t.query||this._filter(a,e,i))){let e=(t.wrappedCallback||t.callback).call(null,this._prepareParams(a,i)),o=null!=e?e:null===(r=t.query)||void 0===r?void 0:r.consume;return o&&(null===(s=i.event)||void 0===s||s.stopPropagation(),null===(n=i.event)||void 0===n||n.preventDefault()),!!o}}).some(t=>!0===t)}_getQueryLevel(t){return t?t.level?t.level:(0,v.Z)(t.id)?tf.l.model:tf.l.vchart:tf.l.vchart}_parseQuery(t){var e;let i=t.query;(null==i?void 0:i.throttle)?t.wrappedCallback=(0,tb.Z)(t.callback,i.throttle):(null==i?void 0:i.debounce)&&(t.wrappedCallback=(0,tx.Z)(t.callback,i.debounce));let r=this._getQueryLevel(i),s=null,n=tf.AY.chart,a=null,o=null,l=null;return(null==i?void 0:i.nodeName)&&(a=i.nodeName),(null==i?void 0:i.markName)&&(o=i.markName),(null==i?void 0:i.type)&&(r===tf.l.model||r===tf.l.mark)&&(s=i.type),(null==i?void 0:i.source)&&(n=i.source),(0,v.Z)(null==i?void 0:i.id)&&(l=null==i?void 0:i.id,r=tf.l.model),t.filter={level:r,markName:o,type:s,source:n,nodeName:a,userId:l,filter:null!==(e=null==i?void 0:i.filter)&&void 0!==e?e:null},t}getEventBubble(t){switch(t){case tf.AY.chart:return this._viewBubbles;case tf.AY.window:return this._windowBubbles;case tf.AY.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(t){switch(t){case tf.AY.chart:return this._viewListeners;case tf.AY.window:return this._windowListeners;case tf.AY.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(t){return tf.Ve.includes(t)||Object.values(tS.ZK).includes(t)}_isInteractionEvent(t){let e;return t&&(e=t.split(":")[0])&&tA.F.hasInteraction(e)}}let tC=new Map;var tT=i(6358),tE=i(2990),tM=i(1393),tB=i(5719),tD=i(670),tO=i(6031),tP=i(4659),tI=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class tR{getVGrammarView(){return this._view}getModel(){return this._model}constructor(t,e){this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._model={[tO._.signal]:{},[tO._.data]:{},[tO._.mark]:{}},this._compileChart=null,this.handleStageRender=()=>{var t,e;null===(e=null===(t=this._compileChart)||void 0===t?void 0:t.getEvent())||void 0===e||e.emit(tf.$7.afterRender,{chart:this._compileChart})},this._container=t,this._option=e}getRenderer(){var t;return null===(t=this._view)||void 0===t?void 0:t.renderer}getCanvas(){var t;return null===(t=this._view)||void 0===t?void 0:t.renderer.canvas()}getStage(){var t;return null===(t=this._view)||void 0===t?void 0:t.renderer.stage()}initView(){var t,e,i,r;if(this._released||(this.isInited=!0,this._view))return;let s=new tP.Y(null!==(t=this._option.logLevel)&&void 0!==t?t:tP.h.Error);(null===(e=this._option)||void 0===e?void 0:e.onError)&&s.addErrorHandler((...t)=>{var e,i;null===(i=null===(e=this._option)||void 0===e?void 0:e.onError)||void 0===i||i.call(e,...t)});let n=this._option,{performanceHook:o,autoRefreshDpr:l,dpr:h,mode:u,gestureConfig:d,interactive:c,clickInterval:p,autoPreventDefault:g}=n,m=tI(n,["performanceHook","autoRefreshDpr","dpr","mode","gestureConfig","interactive","clickInterval","autoPreventDefault"]);this._view=new tD.Z(Object.assign(Object.assign({width:this._width,height:this._height,container:null!==(i=this._container.dom)&&void 0!==i?i:null,renderCanvas:null!==(r=this._container.canvas)&&void 0!==r?r:null,hooks:o},m),{dpr:h,autoRefresh:(0,v.Z)(l)?l:!(0,v.Z)(h),mode:function(t){switch(t){case a.i["desktop-browser"]:case a.i["mobile-browser"]:break;case a.i.node:case a.i.worker:return"node";case a.i.miniApp:case a.i["desktop-miniApp"]:return"feishu";case a.i.lynx:return"lynx";case a.i.wx:return"wx";case a.i.tt:return"tt";case a.i.harmony:return"harmony"}return"browser"}(u),autoFit:!1,eventConfig:{gesture:(0,v.Z)(d)?d:(0,b.wx)(u),disable:!1===c,clickInterval:p,autoPreventDefault:g},doLayout:()=>{var t;null===(t=this._compileChart)||void 0===t||t.onLayout(this._view)},logger:s,logLevel:s.level()})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),!1!==c&&this._viewListeners.forEach(t=>{var e;null===(e=this._view)||void 0===e||e.addEventListener(t.type,t.callback)})}_setCanvasStyle(){if(this._view&&this._container.dom&&!(0,c.Z)(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";let t=this.getCanvas();t&&(t.style.display="block")}}compileInteractions(){var t;if(this._view.removeAllInteractions(),null===(t=this._interactions)||void 0===t?void 0:t.length){let t={};this._interactions.forEach(e=>{var i;if(e.regionId){let r=`${e.regionId}-${e.type}-${null!==(i=e.id)&&void 0!==i?i:""}`,s=t[r];t[r]=s?Object.assign(Object.assign(Object.assign({},s),e),{selector:[...s.selector,...e.selector]}):e}else this._view.interaction(e.type,e)}),Object.keys(t).forEach(e=>{let i=this._view.interaction(t[e].type,t[e]);if(this._compileChart){let r=this._compileChart.getRegionsInIds([t[e].regionId])[0];r&&r.interaction.addVgrammarInteraction(i.getStartState(),i)}})}}compile(t,e){if(this._released)return;let{chart:i}=t;this._compileChart=i,this.initView(),this._view&&(i.compile(),i.afterCompile(),this.updateDepend(),this.compileInteractions())}clearNextRender(){return!!this._nextRafId&&(d.rF.getCancelAnimationFrame()(this._nextRafId),this._nextRafId=null,!0)}clear(t,e=!1){let{chart:i}=t;this.clearNextRender(),i.clear(),this.releaseGrammar(e)}renderNextTick(t){this._released||this._nextRafId||(this._nextRafId=d.rF.getRequestAnimationFrame()(()=>{this._nextRafId=null,this.render(t)}))}render(t){var e,i;this._released||(this.initView(),this._view&&(null===(e=this._view)||void 0===e||e.run(t),this.clearNextRender()&&(null===(i=this._view)||void 0===i||i.run(t))))}updateViewBox(t,e=!0){this._view&&this._view.renderer.setViewBox(t,e)}resize(t,e,i=!0){this._view&&(this._width=t,this._height=e,this._view.resize(t,e),i&&this.render({morph:!1}))}setBackground(t){var e;null===(e=this._view)||void 0===e||e.background(t)}setSize(t,e){this._width=t,this._height=e,this._view&&(this._view.width(t),this._view.height(e))}setViewBox(t,e=!0){this._view&&this._view.renderer.setViewBox(t,e)}addEventListener(t,e,i){var r,s;if(!1!==this._option.interactive){if(t===tf.AY.chart){let s=(function(r,s){var n,a,o;let l=null!==(a=null===(n=null==s?void 0:s.mark)||void 0===n?void 0:n.getContext())&&void 0!==a?a:{},h=(0,v.Z)(l.modelId)?l.modelId:null,u=(0,v.Z)(l.markId)?l.markId:null,d=(0,v.Z)(l.modelUserId)?l.modelUserId:null,c=(0,v.Z)(l.markUserId)?l.markUserId:null,p={event:r,type:e,source:t,item:s,datum:(null===(o=null==s?void 0:s.getDatum)||void 0===o?void 0:o.call(s))||null,markId:u,modelId:h,markUserId:c,modelUserId:d};i.call(null,p)}).bind(this);this._viewListeners.set(i,{type:e,callback:s}),null===(r=this._view)||void 0===r||r.addEventListener(e,s)}else if(t===tf.AY.window){let r=(function(r){i.call(null,{event:r,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._windowListeners.set(i,{type:e,callback:r});let s=this._getGlobalThis();null==s||s.addEventListener(e,r)}else if(t===tf.AY.canvas){let r=(function(r){i.call(null,{event:r,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._canvasListeners.set(i,{type:e,callback:r});let n=null===(s=this.getStage())||void 0===s?void 0:s.window;null==n||n.addEventListener(e,r)}}}removeEventListener(t,e,i){var r,s,n,a,o;if(!1!==this._option.interactive){if(t===tf.AY.chart){let t=null===(r=this._viewListeners.get(i))||void 0===r?void 0:r.callback;t&&(null===(s=this._view)||void 0===s||s.removeEventListener(e,t)),this._viewListeners.delete(i)}else if(t===tf.AY.window){let t=this._getGlobalThis(),r=null===(n=this._windowListeners.get(i))||void 0===n?void 0:n.callback;r&&(null==t||t.removeEventListener(e,r)),this._windowListeners.delete(i)}else if(t===tf.AY.canvas){let t=null===(a=this.getStage())||void 0===a?void 0:a.window,r=null===(o=this._canvasListeners.get(i))||void 0===o?void 0:o.callback;t&&r&&(null==t||t.removeEventListener(e,r)),this._canvasListeners.delete(i)}}}releaseEvent(){let t=this.getStage();t&&t.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var t;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this._releaseModel(),null===(t=this._view)||void 0===t||t.release(),this._view=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(t=!1){var e,i;this._releaseModel(),t&&(null===(e=this._view)||void 0===e||e.removeAllGraphicItems()),null===(i=this._view)||void 0===i||i.removeAllGrammars()}_releaseModel(){Object.keys(this._model).forEach(t=>{Object.values(this._model[t]).forEach(t=>{Object.values(t).forEach(t=>{t.removeProduct(!0)})}),this._model[t]={}})}addGrammarItem(t){let e=t.getProduct();if((0,f.Z)(e))return;let i=e.id(),r=t.grammarType;(0,f.Z)(this._model[r][i])&&(this._model[r][i]={}),this._model[r][i][t.id]=t}removeGrammarItem(t,e){var i;let r=t.getProduct();if((0,f.Z)(r))return;let s=r.id(),n=t.grammarType,a=this._model[n][s];(0,v.Z)(a)&&(delete a[t.id],0===Object.keys(a).length&&delete this._model[n][s]),e||null===(i=this._view)||void 0===i||i.removeGrammar(r)}addInteraction(t){this._interactions||(this._interactions=[]),this._interactions.push(t)}removeInteraction(t){this._interactions&&(this._interactions=this._interactions.filter(e=>e.seriesId!==t))}updateDepend(t){return(0,v.Z)(t)&&t.length>0?t.every(t=>t.updateDepend()):(Object.values(this._model).forEach(t=>{Object.values(t).forEach(t=>{let e=Object.values(t),i=e[0].getProduct(),r=e.reduce((t,e)=>e.getDepend().length>0?t.concat(e.getDepend()):t,[]).filter(t=>!!t).map(t=>t.getProduct());i.depend(r)})}),!0)}_getGlobalThis(){var t;return(0,b.qe)(this._option.mode)?globalThis:null===(t=this.getStage())||void 0===t?void 0:t.window}}var tL=i(3685),tF=i(9730),tj=i(325),tZ=i(645),tH=i(1121);let tN={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},tz={poptip:(0,tj.Z)({},tN)};var tV=i(6979),tU=i(5208),tW=i(2687),tG=i(564);class t${get hover(){return this._hover}get select(){return this._select}constructor(t){this._marks=new tG.D,this._markReverse=new tG.D,this.onHover=t=>{switch(t.action){case"enter":this.interaction.getEventElement(tU.q.STATE_DIMENSION_HOVER).forEach(t=>this.interaction.addEventElement(tU.q.STATE_DIMENSION_HOVER_REVERSE,t)),this.interaction.clearEventElement(tU.q.STATE_DIMENSION_HOVER,!1),this.getEventElement(t).forEach(t=>this.interaction.addEventElement(tU.q.STATE_DIMENSION_HOVER,t)),this.interaction.reverseEventElement(tU.q.STATE_DIMENSION_HOVER);break;case"leave":this.interaction.clearEventElement(tU.q.STATE_DIMENSION_HOVER,!0),t=null}},this._option=t,this.event=this._option.model.getOption().getChart().getEvent(),this.interaction=t.interaction,this.initConfig(t.mode)}setStateKeys(t){}registerMark(t){(0,tH.Z)(t.stateStyle[tU.q.STATE_DIMENSION_HOVER])||this._marks.addMark(t),(0,tH.Z)(t.stateStyle[tU.q.STATE_DIMENSION_HOVER_REVERSE])||this._markReverse.addMark(t)}init(){this.initEvent()}release(){this.releaseEvent()}initEvent(){this.event.on(tW.C.dimensionHover,this.onHover)}releaseEvent(){this.event.release()}initConfig(t){}getEventElement(t,e=!1){let i=[];return t.dimensionInfo.forEach(t=>{t.data.forEach(t=>{(e?this._markReverse:this._marks).getMarks().filter(e=>e.model===t.series&&e.getVisible()).forEach(r=>{let s=r.getProduct();if(!s||!s.elements)return;let n=s.elements.filter(i=>{let r;let s=i.getDatum();return r=(0,p.Z)(s)?s.every((e,i)=>e===t.datum[i]):t.datum.some(t=>t===s),e?!r:r});i.push(...n)})})}),i}}var tX=i(1966);class tY{constructor(){this._stateMarks=new Map,this._stateElements=new Map,this._vgrammarInteractions=new Map,this._disableTriggerEvent=!1}addVgrammarInteraction(t,e){t&&(this._vgrammarInteractions.get(t)?this._vgrammarInteractions.get(t).push(e):this._vgrammarInteractions.set(t,[e]))}static markStateEnable(t,e){return!(0,tH.Z)(t.stateStyle[e])}setDisableActiveEffect(t){this._disableTriggerEvent=t}registerMark(t,e){var i;this._stateMarks.has(t)||this._stateMarks.set(t,[]),null===(i=this._stateMarks.get(t))||void 0===i||i.push(e)}getStateMark(t){return this._stateMarks.get(t)}filterEventMark(t,e){var i;return!(!t.mark||!(null===(i=this._stateMarks.get(e))||void 0===i?void 0:i.includes(t.mark)))}getEventElement(t){var e;return null!==(e=this._stateElements.get(t))&&void 0!==e?e:[]}getEventElementData(t){return this.getEventElement(t).map(t=>t.getDatum())}exchangeEventElement(t,e){var i;if(this._disableTriggerEvent)return;let r=(0,tX.Aw)(t);null===(i=this._stateElements.get(t))||void 0===i||i.forEach(e=>{e.removeState(t),r&&this.addEventElement(r,e)}),e.getStates().includes(t)||(e.addState(t),r&&e.removeState(r)),this._stateElements.set(t,[e])}removeEventElement(t,e){var i,r;if(this._disableTriggerEvent)return;e.removeState(t);let s=null!==(r=null===(i=this._stateElements.get(t))||void 0===i?void 0:i.filter(t=>t!==e))&&void 0!==r?r:[];this._stateElements.set(t,s);let n=(0,tX.Aw)(t);n&&(0===s.length?this.clearEventElement(n,!1):this.addEventElement(n,e))}addEventElement(t,e){var i;if(this._disableTriggerEvent)return;e.getStates().includes(t)||e.addState(t);let r=null!==(i=this._stateElements.get(t))&&void 0!==i?i:[];r.push(e),this._stateElements.set(t,r)}clearEventElement(t,e){var i;if(!this._disableTriggerEvent&&(null===(i=this._stateElements.get(t))||void 0===i||i.forEach(e=>{e.removeState(t)}),this._stateElements.set(t,[]),e)){let e=(0,tX.Aw)(t);e&&this.clearEventElement(e,!1)}}clearAllEventElement(){if(!this._disableTriggerEvent)for(let[t,e]of this._stateElements)e.forEach(t=>{t.clearStates()}),this._stateElements.set(t,[])}reverseEventElement(t){if(this._disableTriggerEvent)return;let e=(0,tX.Aw)(t);if(!e)return;let i=this.getStateMark(e);if(!i)return;let r=this.getEventElement(t);r.length&&(this.getEventElement(e).length||(1===r.length?i.forEach(t=>{t.getProduct().elements.filter(t=>t!==r[0]).forEach(t=>{this.addEventElement(e,t)})}):i.forEach(t=>{t.getProduct().elements.filter(t=>!r.includes(t)).forEach(t=>{this.addEventElement(e,t)})})))}startInteraction(t,e){let i=this._vgrammarInteractions.get(t);i&&i.forEach(t=>{t.start(e)})}resetInteraction(t,e){let i=this._vgrammarInteractions.get(t);i&&i.forEach(t=>{t.reset(e)})}resetAllInteraction(){for(let[t,e]of this._vgrammarInteractions)e&&e.forEach(t=>{t.reset(null)})}}var tK=i(6542),tq=i(9231),tJ=i(1125),tQ=i(881),t0=i(397);class t1 extends t0.T{_initTheme(t,e){return{spec:t,theme:this._theme}}}class t2 extends tQ.r{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(t){this._layout.maxWidth=t}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(t){this._layout.maxHeight=t}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return!0===this._spec.stackInverse}getStackSort(){return!0===this._spec.stackSort}constructor(t,e){var i;super(t,e),this.transformerConstructor=t1,this.modelType="region",this.specKey="region",this.type=t2.type,this._series=[],this.layoutType="region",this.layoutZIndex=tK.Ai.Region,this.interaction=new tY,this.seriesDataFilterOver=()=>{this.event.emit(tf.$7.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(t=>{t.getViewDataFilter()&&t.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=t.id,this.coordinate=null!==(i=t.coordinate)&&void 0!==i?i:"cartesian",this._option.animation&&(this.animate=new tJ.W({getCompiler:e.getCompiler})),this.interaction.setDisableActiveEffect(this._option.disableTriggerEvent)}_getClipDefaultValue(){var t,e,i,r;let s=this._option.getChart().getSpec(),n=null===(e=null===(t=s.dataZoom)||void 0===t?void 0:t.some)||void 0===e?void 0:e.call(t,t=>{var e;return"axis"===(null!==(e=t.filterMode)&&void 0!==e?e:"filter")}),a=null===(r=null===(i=s.scrollBar)||void 0===i?void 0:i.some)||void 0===r?void 0:r.call(i,t=>{var e;return"axis"===(null!==(e=t.filterMode)&&void 0!==e?e:"axis")});return!(!n&&!a)||this._layout.layoutClip}created(){var t,e;this.initLayout(),super.created();let i=null!==(t=this._spec.clip)&&void 0!==t?t:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._spec.roam&&this._groupMark.setMarkConfig({interactive:!0}),this._interactionMark=this._createGroupMark("regionInteractionGroup",(null!==(e=this.userId)&&void 0!==e?e:this.type)+"_interaction",tK.Ai.Interaction),(0,tH.Z)(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"}),i&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"})),[this._backgroundMark,this._foregroundMark].forEach(t=>{t&&(t.created(),this.setMarkStyle(t,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",tq.W.Built_In),this._groupMark.addMark(t))}),this._backgroundMark&&this._backgroundMark.setMarkConfig({zIndex:tK.Ai.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({zIndex:tK.Ai.Mark+1})),this.createTrigger()}_createGroupMark(t,e,i){var r,s;let n=this._createMark({type:"group",name:t});n.setUserId(e),n.setMarkConfig({zIndex:i});let a=null!==(r=this._spec.clip)&&void 0!==r?r:this._getClipDefaultValue();return this.setMarkStyle(n,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:a},"normal",tq.W.Built_In),this.setMarkStyle(n,{cornerRadius:null===(s=this._spec.style)||void 0===s?void 0:s.cornerRadius},"normal",tq.W.User_Mark),this._marks.addMark(n),n}init(t){super.init(t),this.initMark(),this.initSeriesDataflow(),this.initInteraction(),this.initTrigger()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var t,e;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:(null===(t=this._spec.style)||void 0===t?void 0:t.fill)?1:0},this._spec.style),"normal",tq.W.User_Mark),(null!==(e=this._spec.clip)&&void 0!==e?e:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",tq.W.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0,pickable:!1}),"normal",tq.W.User_Mark)}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,tF.X)(null==e?void 0:e.style,null==t?void 0:t.style)||(i.reMake=!0),i}reInit(t){super.reInit(t),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(t){t&&(this._series.includes(t)||this._series.push(t))}removeSeries(t){if(!t)return;let e=this._series.findIndex(e=>e===t);e>=0&&this._series.splice(e,1)}getSeries(t={}){return this._series.filter(e=>{var i,r;return(!t.name||(null==e?void 0:e.name)===t.name)&&(!t.userId||(0,m.IX)(t.userId).includes(e.userId))&&(!(0,v.Z)(t.specIndex)||(0,m.IX)(t.specIndex).includes(e.getSpecIndex()))&&(!t.id||e.id===t.id)&&(!t.type||e.type===t.type)&&(!t.coordinateType||e.coordinate===t.coordinateType)&&(!t.dataName||(null===(r=null===(i=e.getRawData)||void 0===i?void 0:i.call(e))||void 0===r?void 0:r.name)===t.dataName)})}getSeriesInName(t){return this.getSeries({name:t})[0]}getSeriesInUserId(t){return this.getSeries({userId:t})[0]}getSeriesInId(t){return this.getSeries({id:t})[0]}getSeriesInType(t){return this.getSeries({type:t})}getSeriesInCoordinateType(t){return this.getSeries({coordinateType:t})}getSeriesInDataName(t){return this.getSeries({dataName:t})}onRender(t){}initSeriesDataflow(){let t=this._series.map(t=>{var e;return null!==(e=t.getViewDataFilter())&&void 0!==e?e:t.getViewData()}).filter(t=>!!t);this._option.dataSet.multipleDataViewAddListener(t,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}createTrigger(){let t=Object.assign(Object.assign({},this._option),{model:this,interaction:this.interaction});this._trigger=new t$(t)}initTrigger(){this._series.forEach(t=>{t.getMarksWithoutRoot().forEach(t=>{this._trigger.registerMark(t)})}),this._trigger.init()}initInteraction(){this._option.disableTriggerEvent||this._series.forEach(t=>{t.getMarksWithoutRoot().forEach(t=>{for(let e in tU.p)(0,tH.Z)(t.stateStyle[tU.p[e]])||this.interaction.registerMark(tU.p[e],t)})})}compileMarks(t){this.getMarks().forEach(e=>{var i;e.compile({group:t,context:{model:this}}),null===(i=e.getProduct())||void 0===i||i.layout((t,e,i,r)=>{})})}compile(){var t;null===(t=this.animate)||void 0===t||t.compile(),this.compileMarks()}onLayoutEnd(t){this._series.forEach(e=>e.onLayoutEnd(t)),super.onLayoutEnd(t)}}function t3(t){let e=[],i=[],r=[];return t.forEach(t=>{(0,f.Z)(t.getSpec().position)||"start"===t.getSpec().position?e.push(t):"middle"===t.getSpec().position?i.push(t):"end"===t.getSpec().position&&r.push(t)}),{startItems:e,endItems:r,middleItems:i}}function t5(t,e,i){e?t.forEach(t=>{let e=(0,m.Z$)(t),r=(i-(e.getLayoutStartPoint().y+e.getLayoutRect().height-t[0].getLayoutStartPoint().y))/2;t.forEach(t=>{t.setLayoutStartPosition({x:t.getLayoutStartPoint().x,y:t.getLayoutStartPoint().y+r})})}):t.forEach(t=>{let e=(0,m.Z$)(t),r=(i-(e.getLayoutStartPoint().x+e.getLayoutRect().width-t[0].getLayoutStartPoint().x))/2;t.forEach(t=>{t.setLayoutStartPosition({x:t.getLayoutStartPoint().x+r,y:t.getLayoutStartPoint().y})})})}function t4(t,e,i,r){let s;t.forEach((t,n)=>{t.length>1&&(s=i[n],t.forEach(t=>{if(!t.alignSelf||"start"===t.alignSelf)return;let i=t.getLayoutStartPoint(),n="middle"===t.alignSelf?.5:1,a=e?s-(t.getLayoutRect().width+t.layoutPaddingLeft+t.layoutPaddingRight):s-(t.getLayoutRect().height+t.layoutPaddingTop+t.layoutPaddingBottom);e?t.setLayoutStartPosition({x:i.x+r*a*n,y:i.y}):t.setLayoutStartPosition({x:i.x,y:i.y+r*a*n})}))})}function t6(t,e,i,r,s){if(t.length){let n=0,a="right"===s,o=a?-1:1,l=a?e.rightCurrent:e.leftCurrent,h=e.topCurrent,u=[],d=[],c=[];t.forEach(t=>{let r=e.getItemComputeLayoutRect(t),s=t.computeBoundsInRect(r);t.setLayoutRect(s);let p=s.height+t.layoutPaddingTop+t.layoutPaddingBottom,g=s.width+t.layoutPaddingLeft+t.layoutPaddingRight,m=a?-s.width-t.layoutPaddingRight:t.layoutPaddingLeft;t.setLayoutStartPosition({x:l+t.layoutOffsetX+m,y:h+t.layoutOffsetY+t.layoutPaddingTop}),(h+=p)>i&&d.length?(c.push(n),l+=o*n,n=g,h=e.topCurrent+p,t.setLayoutStartPosition({x:l+t.layoutOffsetX+m,y:e.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),u.push(d),d=[t]):(n=Math.max(n,g),d.push(t))}),c.push(n),u.push(d),t4(u,!0,c,o),r&&t5(u,!0,i),a?e.rightCurrent=l+o*n:e.leftCurrent=l+o*n}}function t8(t,e,i,r){if(t.length){let i=0,s="right"===r,n=s?-1:1,a=s?e.rightCurrent:e.leftCurrent,o=e.bottomCurrent,l=[],h=[],u=[];t.forEach(t=>{let r=e.getItemComputeLayoutRect(t),d=t.computeBoundsInRect(r);t.setLayoutRect(d);let c=d.height+t.layoutPaddingTop+t.layoutPaddingBottom,p=d.width+t.layoutPaddingLeft+t.layoutPaddingRight,g=s?-d.width-t.layoutPaddingRight:t.layoutPaddingLeft;o<c&&h.length?(u.push(i),a+=n*i,i=p,o=e.bottomCurrent,t.setLayoutStartPosition({x:a+t.layoutOffsetX+g,y:o+t.layoutOffsetY-d.height-t.layoutPaddingBottom}),l.push(h),h=[t]):(t.setLayoutStartPosition({x:a+t.layoutOffsetX+g,y:o+t.layoutOffsetY-d.height-t.layoutPaddingBottom}),i=Math.max(i,p),o-=c,h.push(t))}),u.push(i),l.push(h),t4(l,!0,u,n),s?e.rightCurrent=a+n*i:e.leftCurrent=a+n*i}}function t7(t,e,i,r,s){if(t.length){let n="top"===s,a=n?1:-1,o=0,l=e.leftCurrent,h=n?e.topCurrent:e.bottomCurrent,u=[],d=[],c=[];t.forEach(t=>{let r=e.getItemComputeLayoutRect(t),s=t.computeBoundsInRect(r);t.setLayoutRect(s);let p=s.height+t.layoutPaddingTop+t.layoutPaddingBottom,g=s.width+t.layoutPaddingLeft+t.layoutPaddingRight,m=n?t.layoutPaddingTop:-s.height-t.layoutPaddingBottom;t.setLayoutStartPosition({x:l+t.layoutOffsetX+t.layoutPaddingLeft,y:h+t.layoutOffsetY+m}),(l+=g)>i&&d.length?(c.push(o),l=e.leftCurrent+g,h+=a*o,o=p,t.setLayoutStartPosition({x:e.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:h+t.layoutOffsetY+m}),u.push(d),d=[t]):(o=Math.max(o,p),d.push(t))}),c.push(o),u.push(d),t4(u,!1,c,a),r&&t5(u,!1,i),n?e.topCurrent=h+a*o:e.bottomCurrent=h+a*o}}function t9(t,e,i,r){if(t.length){let i="top"===r,s=i?1:-1,n=0,a=e.rightCurrent,o=i?e.topCurrent:e.bottomCurrent,l=[],h=[],u=[];t.forEach(t=>{let r=e.getItemComputeLayoutRect(t),u=t.computeBoundsInRect(r);t.setLayoutRect(u);let d=u.height+t.layoutPaddingTop+t.layoutPaddingBottom,c=u.width+t.layoutPaddingLeft+t.layoutPaddingRight,p=i?t.layoutPaddingTop:-u.height-t.layoutPaddingBottom;a<c&&h.length?(a=e.rightCurrent,o+=s*n,n=d,t.setLayoutStartPosition({x:e.rightCurrent+t.layoutOffsetX-u.width-t.layoutPaddingRight,y:o+t.layoutOffsetY+p}),l.push(h),h=[t]):(h.push(t),t.setLayoutStartPosition({x:a+t.layoutOffsetX-u.width-t.layoutPaddingRight,y:o+t.layoutOffsetY+p}),n=Math.max(n,d),a-=c)}),u.push(n),l.push(h),t4(l,!1,u,s),i?e.topCurrent=o+s*n:e.bottomCurrent=o+s*n}}t2.type="region",t2.transformerConstructor=t1,t2.specKey="region";class et{constructor(t,e){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this._onError=null==e?void 0:e.onError}_layoutInit(t,e,i,r){this._chartLayoutRect=i,this._chartViewBox=r,this.leftCurrent=i.x,this.topCurrent=i.y,this.rightCurrent=i.x+i.width,this.bottomCurrent=i.height+i.y,e.sort((t,e)=>e.layoutLevel-t.layoutLevel)}_layoutNormalItems(t){this.layoutNormalInlineItems(t.filter(t=>"normal-inline"===t.layoutType)),this.layoutNormalItems(t.filter(t=>"normal"===t.layoutType))}_groupItems(t){let e=t.filter(t=>"region"===t.layoutType),i=t.filter(t=>"region-relative"===t.layoutType),r=t.filter(t=>"region-relative-overlap"===t.layoutType),s=i.concat(r),n={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return r.forEach(t=>{n[t.layoutOrient].items.push(t)}),{regionItems:e,relativeItems:i,relativeOverlapItems:r,allRelatives:s,overlapItems:n}}layoutItems(t,e,i,r){this._layoutInit(t,e,i,r),this._layoutNormalItems(e);let s={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:n,relativeItems:a,relativeOverlapItems:o,allRelatives:l,overlapItems:h}=this._groupItems(e);this.layoutRegionItems(n,a,o,h),this._processAutoIndent(n,a,o,h,l,s),this.layoutAbsoluteItems(e.filter(t=>"absolute"===t.layoutType))}_processAutoIndent(t,e,i,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},s,n){if(s.some(t=>t.autoIndent)){let{top:a,bottom:o,left:l,right:h}=this._checkAutoIndent(s,n);(a||o||l||h)&&(this.topCurrent=n.top+a,this.bottomCurrent=n.bottom-o,this.leftCurrent=n.left+l,this.rightCurrent=n.right-h,this.layoutRegionItems(t,e,i,r))}}layoutNormalItems(t){t.forEach(t=>{let e=this.getItemComputeLayoutRect(t),i=t.computeBoundsInRect(e);t.setLayoutRect(i),"left"===t.layoutOrient?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.leftCurrent+=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):"top"===t.layoutOrient?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=i.height+t.layoutPaddingTop+t.layoutPaddingBottom):"right"===t.layoutOrient?(t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX-i.width-t.layoutPaddingRight,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.rightCurrent-=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):"bottom"===t.layoutOrient&&(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingRight,y:this.bottomCurrent+t.layoutOffsetY-i.height-t.layoutPaddingBottom}),this.bottomCurrent-=i.height+t.layoutPaddingTop+t.layoutPaddingBottom)})}layoutNormalInlineItems(t){let e=t.filter(t=>"left"===t.layoutOrient),i=t.filter(t=>"right"===t.layoutOrient),r=t.filter(t=>"top"===t.layoutOrient),s=t.filter(t=>"bottom"===t.layoutOrient),n=this._chartLayoutRect.width+this._chartLayoutRect.x,a=this._chartLayoutRect.height+this._chartLayoutRect.y;e.length&&function(t,e,i){let{startItems:r,middleItems:s,endItems:n}=t3(t);r.length&&t6(r,e,i,!1,"left"),s.length&&t6(s,e,i,!0,"left"),n.length&&t8(n,e,i,"left")}(e,this,a),r.length&&function(t,e,i){let{startItems:r,middleItems:s,endItems:n}=t3(t);r.length&&t7(r,e,i,!1,"top"),s.length&&t7(s,e,i,!0,"top"),n.length&&t9(n,e,i,"top")}(r,this,n),i.length&&function(t,e,i){let{startItems:r,middleItems:s,endItems:n}=t3(t);r.length&&t6(r,e,i,!1,"right"),s.length&&t6(s,e,i,!0,"right"),n.length&&t8(n,e,i,"right")}(i,this,a),s.length&&function(t,e,i){let{startItems:r,middleItems:s,endItems:n}=t3(t);r.length&&t7(r,e,i,!1,"bottom"),s.length&&t7(s,e,i,!0,"bottom"),n.length&&t9(n,e,i,"bottom")}(s,this,n)}_layoutRelativeOverlap(t,e){e.items.forEach(t=>{let i=this.getItemComputeLayoutRect(t),r=t.computeBoundsInRect(i);e.rect.width=Math.max(r.width+t.layoutPaddingLeft+t.layoutPaddingRight,e.rect.width),e.rect.height=Math.max(r.height+t.layoutPaddingTop+t.layoutPaddingBottom,e.rect.height)}),e.items.forEach(i=>{i.setLayoutRect(e.rect),"left"===t?i.setLayoutStartPosition({x:this.leftCurrent+i.layoutOffsetX}):"right"===t?i.setLayoutStartPosition({x:this.rightCurrent-e.rect.width+i.layoutOffsetX}):"top"===t?i.setLayoutStartPosition({x:this.topCurrent+i.layoutOffsetY}):i.setLayoutStartPosition({x:this.bottomCurrent-e.rect.height+i.layoutOffsetY})}),"left"===t?this.leftCurrent+=e.rect.width:"right"===t?this.rightCurrent-=e.rect.width:"top"===t?this.topCurrent+=e.rect.height:this.bottomCurrent-=e.rect.height}_layoutRelativeItem(t,e){let i=t.computeBoundsInRect(e);"left"===t.layoutOrient||"right"===t.layoutOrient?t.setLayoutRect({width:i.width}):t.setLayoutRect({height:i.height}),"left"===t.layoutOrient?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft}),this.leftCurrent+=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):"right"===t.layoutOrient?(this.rightCurrent-=i.width+t.layoutPaddingLeft+t.layoutPaddingRight,t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX+t.layoutPaddingLeft})):"top"===t.layoutOrient?(t.setLayoutStartPosition({y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=i.height+t.layoutPaddingTop+t.layoutPaddingBottom):"bottom"===t.layoutOrient&&(this.bottomCurrent-=i.height+t.layoutPaddingTop+t.layoutPaddingBottom,t.setLayoutStartPosition({y:this.bottomCurrent+t.layoutOffsetY+t.layoutPaddingTop}))}_layoutRegionItem(t,e,i){let r=Math.max(Math.min(e,...t.map(t=>{var e;return null!==(e=t.maxWidth)&&void 0!==e?e:Number.MAX_VALUE})),0),s=Math.max(Math.min(i,...t.map(t=>{var e;return null!==(e=t.maxHeight)&&void 0!==e?e:Number.MAX_VALUE})),0);return t.forEach(t=>{let e=r-t.layoutPaddingLeft-t.layoutPaddingRight,i=s-t.layoutPaddingTop-t.layoutPaddingBottom;t.setLayoutRect({width:e,height:i}),t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop})}),{regionHeight:s,regionWidth:r}}layoutRegionItems(t,e,i,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}}){let s=this.rightCurrent-this.leftCurrent,n=this.bottomCurrent-this.topCurrent;e.filter(t=>"left"===t.layoutOrient||"right"===t.layoutOrient).forEach(t=>{this._layoutRelativeItem(t,this.getItemComputeLayoutRect(t))}),this._layoutRelativeOverlap("left",r.left),this._layoutRelativeOverlap("right",r.right),s=this.rightCurrent-this.leftCurrent,e.filter(t=>"top"===t.layoutOrient||"bottom"===t.layoutOrient).forEach(t=>{this._layoutRelativeItem(t,this.getItemComputeLayoutRect(t))}),this._layoutRelativeOverlap("top",r.top),this._layoutRelativeOverlap("bottom",r.bottom),n=this.bottomCurrent-this.topCurrent;let{regionWidth:a,regionHeight:o}=this._layoutRegionItem(t,s,n);e.concat(i).forEach(e=>{if(["left","right"].includes(e.layoutOrient)){let i=this.filterRegionsWithID(t,e.layoutBindRegionID[0]);e.setLayoutRect({height:i.getLayoutRect().height}),e.setLayoutStartPosition({y:i.getLayoutStartPoint().y+e.layoutOffsetY+e.layoutPaddingTop}),"right"===e.layoutOrient&&e.setLayoutStartPosition({x:e.getLayoutStartPoint().x+a-s})}else if(["top","bottom"].includes(e.layoutOrient)){let i=this.filterRegionsWithID(t,e.layoutBindRegionID[0]);e.setLayoutRect({width:i.getLayoutRect().width}),e.setLayoutStartPosition({x:i.getLayoutStartPoint().x+e.layoutOffsetX+e.layoutPaddingLeft}),"bottom"===e.layoutOrient&&e.setLayoutStartPosition({y:e.getLayoutStartPoint().y+o-n})}})}layoutAbsoluteItems(t){t.forEach(t=>{t.absoluteLayoutInRect(this._chartLayoutRect)})}filterRegionsWithID(t,e){var i;let r=t.find(t=>t.getModelId()===e);return r||(null!==(i=this._onError)&&void 0!==i?i:x.vU)("can not find target region item, invalid id"),r}getItemComputeLayoutRect(t){return{width:this.rightCurrent-this.leftCurrent-t.layoutPaddingLeft-t.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-t.layoutPaddingTop-t.layoutPaddingBottom}}_checkAutoIndent(t,e){let i={top:0,left:0,bottom:0,right:0};return t.forEach(t=>{if(!t.getModelVisible()||!t.autoIndent)return;let r="left"===t.layoutOrient||"right"===t.layoutOrient,s=t.getLastComputeOutBounds(),n=this._getOutInLayout(s,t,e);r?(i.top=Math.max(i.top,n.top),i.bottom=Math.max(i.bottom,n.bottom)):(i.left=Math.max(i.left,n.left),i.right=Math.max(i.right,n.right))}),i}_getOutInLayout(t,e,i){let{x:r,y:s}=e.getLayoutStartPoint(),{width:n,height:a}=e.getLayoutRect();return{left:i.left-(r-t.x1),right:r+n+t.x2-i.right,top:i.top-(s-t.y1),bottom:s+a+t.y2-i.bottom}}}et.type="base";var ee=i(903),ei=i(5042),er=i(8144);let es=(t,e,i)=>(0,er.gM)(t,e,i,{fontFamily:X.r.fontFamily,fontSize:X.r.fontSize});class en{static instance(){return en.instance_||(en.instance_=new en),en.instance_}constructor(){this.functions={}}registerFunction(t,e){t&&e&&(this.functions[t]=e)}unregisterFunction(t){t&&delete this.functions[t]}getFunction(t){return this.functions[t]||null}getFunctionNameList(){return Object.keys(this.functions)}}var ea=i(8429),eo=i(3239);class el{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(t){this._nativeCanvas=t}get width(){return this._pixelWidth}set width(t){this._pixelWidth=t,this._displayWidth=t/(this._dpr||1)}get height(){return this._pixelHeight}set height(t){this._pixelHeight=t,this._displayHeight=t/(this._dpr||1)}getContext(t){return this._context}get visiable(){return this._visiable}set visiable(t){this._visiable=t,t?this.show():this.hide()}get dpr(){return this._dpr}set dpr(t){this._dpr=t,this.resize(this._displayWidth,this._displayHeight)}constructor(t){var e;let{nativeCanvas:i,width:r=500,height:s=500,dpr:n=1,x:a,y:o,id:l,canvasControled:h=!0}=t;this._x=null!=a?a:0,this._y=null!=o?o:0,this._pixelWidth=r*n,this._pixelHeight=s*n,this._visiable=!1!==t.visiable,this.controled=h,this._displayWidth=r,this._displayHeight=s,this._dpr=n,this._nativeCanvas=i,this._id=null!==(e=i.id)&&void 0!==e?e:l,l&&(i.id=l),this.init(t)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(t){}resize(t,e){}toDataURL(t,e){return""}readPixels(t,e,i,r){return this._context.getImageData(t,e,i,r)}convertToBlob(t){throw Error("暂未实现")}transferToImageBitmap(){throw Error("暂未实现")}release(...t){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}el.env="browser";var eh=i(534),eu=i(7428),ed=i(8103),ec=i(9935),ep=i(7183),eg=i(9607),em=i(8113),ef=i(7317),ev=i(3140),ey=i(3116);let e_=[0,0,0],eb=(t,e,i,r,s,n,a,o)=>{if(o)for(;i>e;)i-=ed.f7;else for(;i<e;)i+=ed.f7;let l=ed.pi/3*(i>e?1:-1),h=e,u=h;for(;u!==i;){let e=4*Math.tan(Math.abs((u=l>0?Math.min(u+l,i):Math.max(u+l,i))-h)/4)/3,o=u<h?-1:1,d=Math.cos(h),c=Math.sin(h),p=Math.cos(u),g=Math.sin(u),m=d*n+r,f=c*a+s,v=p*n+r,y=g*a+s,_=n*e*o,b=a*e*o;t.push([m-_*c,f+b*d,v+_*g,y-b*p,v,y]),h=u}},ex=class{set fillStyle(t){this.nativeContext.fillStyle=t}get fillStyle(){return this.nativeContext.fillStyle}set font(t){this.nativeContext.font=t}get font(){return this.nativeContext.font}set globalAlpha(t){this.nativeContext.globalAlpha=t*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(t){this.nativeContext.lineCap=t}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(t){this.nativeContext.lineDashOffset=t}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(t){this.nativeContext.lineJoin=t}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(t){this.nativeContext.lineWidth=t}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(t){this.nativeContext.miterLimit=t}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(t){this.nativeContext.shadowBlur=t}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(t){this.nativeContext.shadowColor=t}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(t){this.nativeContext.shadowOffsetX=t}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(t){this.nativeContext.shadowOffsetY=t}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(t){this.nativeContext.strokeStyle=t}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(t){this.nativeContext.textAlign=t}get textAlign(){return this.nativeContext.textAlign}set textBaseline(t){this.nativeContext.textBaseline=t}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(t){!!this._inuse!==t&&(this._inuse=t,t?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(t,e){this.fillAttributes=Object.assign(Object.assign({},eg.pp),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},eg.WC),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},eg.q9),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;let i=t.nativeCanvas.getContext("2d");if(!i)throw Error("发生错误，获取2d上下文失败");this.nativeContext=i,this.canvas=t,this.matrix=new ec.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new ec.y(1,0,0,1,0,0),this._clearMatrix=new ec.y(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(){this.stack.length&&tP.Y.getInstance().warn("可能存在bug，matrix没有清空"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new ec.y(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(t){return em.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(em.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}highPerformanceRestore(){this.stack.length>0&&(em.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t),this.nativeContext.save()}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,i=!0){this.matrix.scale(t,e),i&&this.setTransformForCurrent()}setScale(t,e,i=!0){this.matrix.setScale(t,e),i&&this.setTransformForCurrent()}scalePoint(t,e,i,r,s=!0){this.translate(i,r,!1),this.scale(t,e,!1),this.translate(-i,-r,!1),s&&this.setTransformForCurrent()}setTransform(t,e,i,r,s,n,a=!0,o=this.dpr){this.matrix.setValue(o*t,o*e,o*i,o*r,o*s,o*n),a&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,i=this.dpr){this.matrix.setValue(t.a*i,t.b*i,t.c*i,t.d*i,t.e*i,t.f*i),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,i,r,s,n,a=!0){this.matrix.multiply(t,e,i,r,s,n),a&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,i=!0){this.matrix.translate(t,e),i&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let i=t*Math.PI/180;this.rotate(i,e)}rotateAbout(t,e,i,r=!0){this.translate(e,i,!1),this.rotate(t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,i,r=!0){this.translate(e,i,!1),this.rotateDegrees(t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(t,e){t?"string"==typeof t?this.nativeContext.clip(t):this.nativeContext.clip(t,e):this.nativeContext.clip()}arc(t,e,i,r,s,n,a){if(a=a||0,this.camera){let o=[];eb(o,r,s,t,e,i,i,n);for(let t=0;t<o.length;++t){let e=o[t];this.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5],a)}}else this.nativeContext.arc(t,e,Math.max(0,i),r,s,n)}arcTo(t,e,i,r,s){this.nativeContext.arcTo(t,e,i,r,s)}bezierCurveTo(t,e,i,r,s,n,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&((0,ef.fF)(e_,[t,e,a],this.modelMatrix),t=e_[0],e=e_[1],o=e_[2],(0,ef.fF)(e_,[i,r,a],this.modelMatrix),i=e_[0],r=e_[1],l=e_[2],(0,ef.fF)(e_,[s,n,a],this.modelMatrix),s=e_[0],n=e_[1],a=e_[2]);let h=this.camera.vp(s,n,a);s=h.x,n=h.y,t=(h=this.camera.vp(t,e,o)).x,e=h.y,i=(h=this.camera.vp(i,r,l)).x,r=h.y}this.nativeContext.bezierCurveTo(t,e,i,r,s,n)}closePath(){this.nativeContext.closePath()}ellipse(t,e,i,r,s,n,a,o){null==o?this.nativeContext.ellipse(t,e,i,r,s,n,a):this.nativeContext.ellipse(t,e,i,r,s,n,a,o)}lineTo(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,ef.fF)(e_,[t,e,i],this.modelMatrix),t=e_[0],e=e_[1],i=e_[2]);let r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.lineTo(t,e)}moveTo(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,ef.fF)(e_,[t,e,i],this.modelMatrix),t=e_[0],e=e_[1],i=e_[2]);let r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.moveTo(t,e)}quadraticCurveTo(t,e,i,r,s){if(s=s||0,this.camera){let n=s;this.modelMatrix&&((0,ef.fF)(e_,[t,e,s],this.modelMatrix),t=e_[0],e=e_[1],n=e_[2],(0,ef.fF)(e_,[i,r,s],this.modelMatrix),i=e_[0],r=e_[1],s=e_[2]);let a=this.camera.vp(i,r,s);i=a.x,r=a.y,t=(a=this.camera.vp(t,e,n)).x,e=a.y}this.nativeContext.quadraticCurveTo(t,e,i,r)}rect(t,e,i,r,s){s=s||0,this.camera?(this.moveTo(t,e,s),this.lineTo(t+i,e,s),this.lineTo(t+i,e+r,s),this.lineTo(t,e+r,s),this.closePath()):this.nativeContext.rect(t,e,i,r)}createImageData(){let t=arguments;return 2===t.length?this.nativeContext.createImageData(t[0],t[1]):1===t.length?this.nativeContext.createImageData(t[0]):null}createLinearGradient(t,e,i,r){return isFinite(t+e+i+r)||(t=0,e=0,i=0,r=0),this.nativeContext.createLinearGradient(t,e,i,r)}createPattern(t,e){return 0===t.width||0===t.height?null:this.nativeContext.createPattern(t,e)}createRadialGradient(t,e,i,r,s,n){return this.nativeContext.createRadialGradient(t,e,i,r,s,n)}createConicGradient(t,e,i,r){let s,n=!1,a=this;return{stops:[],addColorStop(t,e){this.stops.push([t,e]),n=!0},GetPattern(o,l,h){return n&&(h||(h=r-i),s=(0,ev.Of)(a,this.stops,t,e,h,i,r,o,l),n=!1),s}}}fill(t,e){this.disableFill||(t?this.nativeContext.fill(t):this.nativeContext.fill())}fillRect(t,e,i,r){this.nativeContext.fillRect(t,e,i,r)}clearRect(t,e,i,r){this.nativeContext.clearRect(t,e,i,r)}project(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,ef.fF)(e_,[t,e,i],this.modelMatrix),t=e_[0],e=e_[1],i=e_[2]);let r=this.camera.vp(t,e,i);t=r.x,e=r.y}return{x:t,y:e}}view(t,e,i){return i=i||0,this.camera?(this.modelMatrix&&((0,ef.fF)(e_,[t,e,i],this.modelMatrix),t=e_[0],e=e_[1],i=e_[2]),this.camera.view(t,e,i)):[t,e,i]}fillText(t,e,i,r){if(r=r||0,this.camera){this.modelMatrix&&((0,ef.fF)(e_,[e,i,r],this.modelMatrix),e=e_[0],i=e_[1],r=e_[2]);let t=this.camera.vp(e,i,r);e=t.x,i=t.y}this.nativeContext.fillText(t,e,i)}getImageData(t,e,i,r){return this.nativeContext.getImageData(t,e,i,r)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(t,e){return this.nativeContext.isPointInPath(t,e)}isPointInStroke(t,e){return this.nativeContext.isPointInStroke(t,e)}measureText(t,e=eh.w.global.measureTextMethod){var i,r;if(!e||"native"===e)return this.nativeContext.measureText(t);this.mathTextMeasure||(this.mathTextMeasure=eh.w.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));let s=null!==(i=this.fontFamily)&&void 0!==i?i:eg.q9.fontFamily,n=null!==(r=this.fontSize)&&void 0!==r?r:eg.q9.fontSize;return this.mathTextMeasure.textSpec.fontFamily===s&&this.mathTextMeasure.textSpec.fontSize===n||(this.mathTextMeasure.textSpec.fontFamily=s,this.mathTextMeasure.textSpec.fontSize=n,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(t,e)}putImageData(t,e,i){this.nativeContext.putImageData(t,e,i)}setLineDash(t){let e=arguments,i=this.nativeContext;this.nativeContext.setLineDash?e[0]&&i.setLineDash(e[0]):"mozDash"in i?i.mozDash=e[0]:"webkitLineDash"in i&&(i.webkitLineDash=e[0])}stroke(t){this.disableStroke||(t?this.nativeContext.stroke(t):this.nativeContext.stroke())}strokeRect(t,e,i,r){this.nativeContext.strokeRect(t,e,i,r)}strokeText(t,e,i,r){if(r=r||0,this.camera){this.modelMatrix&&((0,ef.fF)(e_,[e,i,r],this.modelMatrix),e=e_[0],i=e_[1],r=e_[2]);let t=this.camera.vp(e,i,r);e=t.x,i=t.y}this.nativeContext.strokeText(t,e,i)}drawImage(){let t=this.nativeContext,e=arguments;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}setCommonStyle(t,e,i,r,s){if(Array.isArray(s)){if(s.length<=1)return this._setCommonStyle(t,e,i,r,s[0]);let n=Object.create(s[0]);return s.forEach((t,e)=>{0!==e&&Object.assign(n,t)}),this._setCommonStyle(t,e,i,r,n)}return this._setCommonStyle(t,e,i,r,s)}_setCommonStyle(t,e,i,r,s){let n=this.nativeContext;s||(s=this.fillAttributes);let{fillOpacity:a=s.fillOpacity,opacity:o=s.opacity,fill:l=s.fill}=e;n.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12&&(n.fillStyle=(0,ey.L)(this,l,t,i,r))}setShadowBlendStyle(t,e,i){if(Array.isArray(i)){if(i.length<=1)return this._setShadowBlendStyle(t,i[0]);let r=Object.create(i[0]);return i.forEach((t,e)=>{0!==e&&Object.assign(r,t)}),this._setShadowBlendStyle(t,e,r)}return this._setShadowBlendStyle(t,e,i)}_setShadowBlendStyle(t,e,i){let r=this.nativeContext;i||(i=this.fillAttributes);let{opacity:s=i.opacity,shadowBlur:n=i.shadowBlur,shadowColor:a=i.shadowColor,shadowOffsetX:o=i.shadowOffsetX,shadowOffsetY:l=i.shadowOffsetY,blur:h=i.blur,filter:u=i.filter,globalCompositeOperation:d=i.globalCompositeOperation}=e;s<=1e-12||(n||o||l?(r.shadowBlur=n*this.dpr,r.shadowColor=a,r.shadowOffsetX=o*this.dpr,r.shadowOffsetY=l*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0),h?(r.filter=`blur(${h}px)`,this._clearFilterStyle=!0):u?(r.filter=u,this._clearFilterStyle=!0):this._clearFilterStyle&&(r.filter="blur(0px)",this._clearFilterStyle=!1),d?(r.globalCompositeOperation=d,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(r.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1))}setStrokeStyle(t,e,i,r,s){if(Array.isArray(s)){if(s.length<=1)return this._setStrokeStyle(t,e,i,r,s[0]);let n=Object.create(s[0]);return s.forEach((t,e)=>{0!==e&&Object.assign(n,t)}),this._setStrokeStyle(t,e,i,r,n)}return this._setStrokeStyle(t,e,i,r,s)}_setStrokeStyle(t,e,i,r,s){let n=this.nativeContext;s||(s=this.strokeAttributes);let{strokeOpacity:a=s.strokeOpacity,opacity:o=s.opacity}=e;if(n.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12){let{lineWidth:a=s.lineWidth,stroke:o=s.stroke,lineJoin:l=s.lineJoin,lineDash:h=s.lineDash,lineDashOffset:u=s.lineDashOffset,lineCap:d=s.lineCap,miterLimit:c=s.miterLimit,keepStrokeScale:p=s.keepStrokeScale}=e;n.lineWidth=p?a:(0,ey.D)(this,a,this.dpr),n.strokeStyle=(0,ey.L)(this,o,t,i,r),n.lineJoin=l,h&&(n.setLineDash(h),n.lineDashOffset=u),n.lineCap=d,n.miterLimit=c}}setTextStyleWithoutAlignBaseline(t,e,i){let r=this.nativeContext;e||(e=this.textAttributes);let{scaleIn3d:s=e.scaleIn3d}=t;t.font?r.font=t.font:r.font=(0,ep.U)(t,e,s&&this.camera&&this.camera.getProjectionScale(i));let{fontFamily:n=e.fontFamily,fontSize:a=e.fontSize}=t;this.fontFamily=n,this.fontSize=a,r.textAlign="left",r.textBaseline="alphabetic"}setTextStyle(t,e,i){var r,s;let n=this.nativeContext;e||(e=this.textAttributes),t.font?n.font=t.font:n.font=(0,ep.U)(t,e,this.camera&&this.camera.getProjectionScale(i));let{fontFamily:a=e.fontFamily,fontSize:o=e.fontSize}=t;this.fontFamily=a,this.fontSize=o,n.textAlign=null!==(r=t.textAlign)&&void 0!==r?r:e.textAlign,n.textBaseline=null!==(s=t.textBaseline)&&void 0!==s?s:e.textBaseline}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(this._clearMatrix,t,e)}setClearMatrix(t,e,i,r,s,n){this._clearMatrix.setValue(t,e,i,r,s,n)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>em.QE.free(t)),this.stack.length=0}};ex.env="browser",ex=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],ex);let eS=class extends el{constructor(t){super(t)}init(t){let{container:e}=t;if("string"==typeof e){let t=eh.w.global.getElementById(e);t&&(this._container=t)}else this._container=e;this._context=new ex(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;let{nativeCanvas:t}=this;t.width=this._pixelWidth,t.height=this._pixelHeight,t.style&&this.setCanvasStyle(t,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(t),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){let t=this._nativeCanvas;t.style.position="absolute",t.style.top=`${this._y}px`,t.style.left=`${this._x}px`}resetStyle(t){if(!this.controled)return;let{width:e=this._displayWidth,height:i=this._displayHeight,dpr:r=this._dpr,x:s=this._x,y:n=this._y}=t,{nativeCanvas:a}=this;a.width=e*r,a.height=i*r,a.style&&this.setCanvasStyle(a,s,n,e,i),t.id&&(a.id=t.id),this.visiable||this.hide()}setCanvasStyle(t,e,i,r,s){this.controled&&(t.style.width=`${r}px`,t.style.height=`${s}px`)}toDataURL(t,e){return"image/jpeg"===t?this._nativeCanvas.toDataURL(t,e):"image/png"===t?this._nativeCanvas.toDataURL(t):this._nativeCanvas.toDataURL(t,e)}resize(t,e){this.controled&&(this._pixelWidth=t*this._dpr,this._pixelHeight=e*this._dpr,this._displayWidth=t,this._displayHeight=e,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${t}px`,this._nativeCanvas.style.height=`${e}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};eS.env="browser",eS=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],eS);var eA=i(4193);function ek(t,e){return new ea.n(i=>{i(eA.r).toDynamicValue(()=>e=>new t(e)).whenTargetNamed(t.env),i(eA.A).toDynamicValue(()=>(t,i)=>new e(t,i)).whenTargetNamed(e.env)})}let ew=ek(eS,ex);var eC=i(7141),eT=i(7393),eE=i(2683),eM=i(1600),eB=i(7089),eD=i(6562),eO=i(8906),eP=i(8535),eI=function(t,e){return function(i,r){e(i,r,t)}};let eR=class{constructor(t,e){this.pickItemInterceptorContributions=t,this.pickServiceInterceptorContributions=e,this.type="default",this.global=eh.w.global}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order)}pick(t,e,i){let r,s={graphic:null,group:null};i.pickerService=this;let n=i.bounds.width(),a=i.bounds.height();if(!(new eT.FB).setValue(0,0,n,a).containsPoint(e))return s;this.pickContext&&(this.pickContext.inuse=!0),i.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);let o=new ec.y(1,0,0,1,0,0);for(let n=t.length-1;n>=0&&!(s=t[n].isContainer?this.pickGroup(t[n],e,o,i):this.pickItem(t[n],e,o,i)).graphic;n--)r||(r=s.group);if(s.graphic||(s.group=r),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(let t=0;t<this.pickerServiceInterceptorContributions.length;t++){let r=this.pickerServiceInterceptorContributions[t];r.afterPickItem&&(s=r.afterPickItem(s,this,e,i,{parentMatrix:o}))}return s}containsPoint(t,e,i){var r;return!!(null===(r=this.pickItem(t,e,null,null!=i?i:{pickContext:this.pickContext,pickerService:this}))||void 0===r?void 0:r.graphic)}pickGroup(t,e,i,r){let s={group:null,graphic:null};if(!1===t.attribute.visibleAll)return s;let n=r.pickContext,a=n.modelMatrix;if(n.camera){let e=t.transMatrix,i=em.yp.allocate();if((0,ef.B$)(i,e),a){if(i){let t=em.yp.allocate();n.modelMatrix=(0,ef.G9)(t,a,i),em.yp.free(i)}}else(0,ef.B$)(i,t.globalTransMatrix),n.modelMatrix=i}if(this.InterceptorContributions.length)for(let s=0;s<this.InterceptorContributions.length;s++){let o=this.InterceptorContributions[s];if(o.beforePickItem){let s=o.beforePickItem(t,this,e,r,{parentMatrix:i});if(s)return n.modelMatrix!==a&&em.yp.free(n.modelMatrix),n.modelMatrix=a,s}}let o=t.transMatrix,l=em.QE.allocateByObj(i),h=new eE.E9(e.x,e.y);l.transformPoint(h,h);let u=t.AABBBounds.containsPoint(h);if(!u&&!t.stage.camera)return s;let d=this.pickItem(t,h.clone(),i,r);d&&d.graphic&&(s.graphic=d.graphic,s.params=d.params);let c=!1!==t.attribute.pickable&&u;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),!1===t.attribute.childrenPickable||d&&d.graphic||(0,eD.kD)(t,eg.xF.zIndex,n=>{if(n.isContainer){let i=new eE.E9(e.x,e.y),a=(0,eP.gh)(t).group,{scrollX:o=a.scrollX,scrollY:h=a.scrollY}=t.attribute;i.x-=o,i.y-=h,s=this.pickGroup(n,i,l,r)}else{let a=new eE.E9(e.x,e.y);l.transformPoint(a,a);let o=(0,eP.gh)(t).group,{scrollX:h=o.scrollX,scrollY:u=o.scrollY}=t.attribute;a.x-=h,a.y-=u;let d=this.pickItem(n,a,i,r);d&&d.graphic&&(s.graphic=d.graphic,s.params=d.params)}return!!s.graphic||!!s.group},!0,!!n.camera),n.modelMatrix!==a&&em.yp.free(n.modelMatrix),n.modelMatrix=a,s.graphic||s.group||!c||t.stage.camera||(s.group=t),em.QE.free(l),s}selectPicker(t){return this.pickerMap.get(t.numberType)||null}};eR=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),eI(0,(0,eM.f)(eO.Qc)),eI(0,(0,eB.t)(eC.uH)),eI(1,(0,eM.f)(eO.Qc)),eI(1,(0,eB.t)(eC.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object])],eR);var eL=i(1164),eF=i(4481),ej=i(479),eZ=function(t,e){return function(i,r){e(i,r,t)}};let eH=class extends eR{constructor(t,e,i,r){super(i,r),this.contributions=t,this.drawContribution=e,this.pickItemInterceptorContributions=i,this.pickServiceInterceptorContributions=r,this.global.hooks.onSetEnv.tap("canvas-picker-service",(t,e,i)=>{this.configure(i,e)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(t=>{this.pickerMap.set(t.numberType,t)}),super._init()}configure(t,e){this.pickCanvas=eL.A.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(t,e,i,r){if(!1===t.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let s=0;s<this.InterceptorContributions.length;s++){let n=this.InterceptorContributions[s];if(n.beforePickItem){let s=n.beforePickItem(t,this,e,r,{parentMatrix:i});if(s)return s}}let s=this.pickerMap.get(t.numberType);if(!s)return null;let n=s.contains(t,e,r),a=n?t:null,o={graphic:a,params:n};if(a)return o;if(this.InterceptorContributions.length)for(let s=0;s<this.InterceptorContributions.length;s++){let n=this.InterceptorContributions[s];if(n.afterPickItem){let s=n.afterPickItem(t,this,e,r,{parentMatrix:i});if(s)return s}}return o}};eH=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),eZ(0,(0,eM.f)(eO.Qc)),eZ(0,(0,eB.t)(ej.EL)),eZ(1,(0,eM.f)(eF.Iv)),eZ(2,(0,eM.f)(eO.Qc)),eZ(2,(0,eB.t)(eC.uH)),eZ(3,(0,eM.f)(eO.Qc)),eZ(3,(0,eB.t)(eC.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object,Object,Object])],eH);var eN=i(1749);let ez=class{constructor(){this.type="group",this.numberType=eN.I_}contains(t,e,i){return!1}};ez=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)()],ez);let eV=new ea.n((t,e,i,r)=>{eV.__vloaded||(eV.__vloaded=!0,t(ej.pE).to(ez).inSingletonScope(),t(ej.EL).toService(ej.pE),(0,eO.yb)(t,ej.EL))});eV.__vloaded=!1;let eU=new ea.n((t,e,i,r)=>{i(eH)||t(eH).toSelf().inSingletonScope(),i(eC.hH)?r(eC.hH).toService(eH):t(eC.hH).toService(eH)});var eW=i(86);let eG=class{constructor(){this._uid=eW.R.GenAutoIncrementId(),this.viewBox=new eT.FB,this.modelMatrix=new ec.y(1,0,0,1,0,0)}onChange(t){this._onChangeCb=t}configure(t,e){e.env===this.type&&t.setWindowHandler(this)}release(...t){this.releaseWindow()}isVisible(t){return!0}onVisibleChange(t){}getTopLeft(t){return{top:0,left:0}}setViewBox(t){this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(t,e,i,r,s,n){this.modelMatrix.setValue(t,e,i,r,s,n)}getViewBoxTransform(){return this.modelMatrix}};eG=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],eG);var e$=i(2575);let eX=r=class extends eG{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${r.idprefix}_${r.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=eh.w.global,this.viewBox=new eT.FB,this.modelMatrix=new ec.y(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(t){console.error("发生错误，该环境不存在IntersectionObserver")}}isElementVisible(t){let e=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>i||e.top>r)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);let t=new IntersectionObserver((t,e)=>{t.forEach(t=>{this._canvasIsIntersecting!==t.isIntersecting?(this._canvasIsIntersecting=t.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(t.isIntersecting)):this._canvasIsIntersecting=t.isIntersecting})});t&&t.observe(this.canvas.nativeCanvas)}createWindowByConfig(t){let e;let i=this.global.createCanvas({width:t.width,height:t.height});if(!(e="string"==typeof t.container?this.global.getElementById(t.container):t.container?t.container:this.global.getRootElement()))throw Error("发生错误，containerId可能传入有误");t.offscreen?e=null:e.appendChild(i);let s={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:i,container:e,id:r.GenerateCanvasId(),canvasControled:!0};this.canvas=new eS(s)}createWindowByCanvas(t){var e;let i;if("string"==typeof t.canvas){if(!(i=this.global.getElementById(t.canvas)))throw Error("canvasId 参数不正确，请确认canvas存在并插入dom")}else i=t.canvas;if(!i)throw Error("发生错误，传入的canvas不正确");let r=t.width,s=t.height;if(null==r||null==s||!t.canvasControled){let t=i.getBoundingClientRect();r=t.width,s=t.height}let n=t.dpr;null==n&&(n=null!==(e=i.getContext("2d").pixelRatio)&&void 0!==e?e:i.width/r),this.canvas=new eS({width:r,height:s,dpr:n,nativeCanvas:i,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(t,e,i){return this.canvas.nativeCanvas.addEventListener(t,e,i)}removeEventListener(t,e,i){return this.canvas.nativeCanvas.removeEventListener(t,e,i)}dispatchEvent(t){return this.canvas.nativeCanvas.dispatchEvent(t)}getStyle(){var t;return null!==(t=this.canvas.nativeCanvas.style)&&void 0!==t?t:{}}setStyle(t){this.canvas.nativeCanvas.style=t}getBoundingClientRect(){let t=this.canvas.nativeCanvas,e=this.getWH();return t.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:e.width,height:e.height,left:0,top:0,right:0,bottom:0}}clearViewBox(t){let e=this.viewBox,i=this.getContext(),r=this.getDpr();i.nativeContext.save(),i.nativeContext.setTransform(r,0,0,r,0,0),i.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),t&&(i.fillStyle=t,i.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),i.nativeContext.restore()}isVisible(t){return this._canvasIsIntersecting}onVisibleChange(t){this._onVisibleChangeCb=t}getTopLeft(t){return this.global.getElementTopLeft(this.canvas.nativeCanvas,t)}};eX.env="browser",eX.idprefix="visactor_window",eX.prefix_count=0,eX=r=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],eX);let eY=new ea.n(t=>{t(eX).toSelf(),t(e$.zd).toDynamicValue(t=>t.container.get(eX)).whenTargetNamed(eX.env)}),eK=class{configure(t,...e){t.env===this.type&&t.setActiveEnvContribution(this)}getNativeAABBBounds(t){return new eT.FB}removeDom(t){return!1}createDom(t){return null}updateDom(t,e){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(t){return fetch(t).then(t=>t.blob()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(t,e){return 0}getElementLeft(t,e){return 0}getElementTopLeft(t,e){return{top:0,left:0}}loadFont(t,e,i){var r,s,n,a;return r=this,s=void 0,a=function*(){return{loadState:"fail"}},new(n=void 0,n=Promise)(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n(function(t){t(r)})).then(i,o)}l((a=a.apply(r,s||[])).next())})}isMacOS(){return!1}copyToClipBoard(t){return Promise.resolve(null)}};eK=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)()],eK);var eq=i(8378);class eJ{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function eQ(t,e=!1){let i=document.createElement("img");if(eh.w.global.isImageAnonymous&&(i.crossOrigin="anonymous"),e){let e=new Blob([t],{type:"image/svg+xml"});t=window.URL.createObjectURL(e)}return(i.src=t,i.complete)?Promise.resolve(i):new Promise((t,e)=>{i.onload=()=>{t(i)},i.onerror=()=>{e(Error("加载失败"))}})}let e0=class extends eK{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(t){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(t,e){var i,r;let s=0,n=0,a=0,o=0;if(t.changedTouches){let e=null!==(i=t.changedTouches[0])&&void 0!==i?i:{};s=e.clientX||0,n=e.clientY||0,a=s,o=n}else s=t.clientX||0,n=t.clientY||0,a=t.offsetX||0,o=t.offsetY||0;if(e){let t,i;let a=s,o=n,l=e.getBoundingClientRect(),h=null===(r=e.getNativeHandler)||void 0===r?void 0:r.call(e).nativeCanvas;return h&&(t=l.width/h.offsetWidth,i=l.height/h.offsetHeight),{x:(a-l.left)/((0,eq.Z)(t)?t:1),y:(o-l.top)/((0,eq.Z)(i)?i:1)}}return{x:a,y:o}}getNativeAABBBounds(t){let e=t;return("string"==typeof t&&(e=(new DOMParser).parseFromString(t,"text/html").firstChild).lastChild&&(e=e.lastChild.firstChild),e.getBoundingClientRect)?new eJ(e.getBoundingClientRect()):new eT.FB}removeDom(t){return t.parentElement.removeChild(t),!0}updateDom(t,e){let{width:i,height:r,style:s}=e;return s&&((0,c.Z)(s)?t.setAttribute("style",s):Object.keys(s).forEach(e=>{t.style[e]=s[e]})),null!=i&&(t.style.width=`${i}px`),null!=r&&(t.style.height=`${r}px`),!0}createDom(t){let{tagName:e="div",parent:i}=t,r=document.createElement(e);if(this.updateDom(r,t),i){let t=(0,c.Z)(i)?this.getElementById(i):i;t&&t.appendChild&&t.appendChild(r)}return r}loadImage(t){return eQ(t,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(t){return eQ(t,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(t){var e,i;let r=document.createElement("canvas");t.id&&(r.id=null!==(e=t.id)&&void 0!==e?e:eW.R.GenAutoIncrementId().toString());let s=null!==(i=t.dpr)&&void 0!==i?i:window.devicePixelRatio;return t.width&&t.height&&(r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.width=t.width*s,r.height=t.height*s),r}createOffscreenCanvas(t){var e;let i=null!==(e=t.dpr)&&void 0!==e?e:window.devicePixelRatio;return new OffscreenCanvas(t.width*i,t.height*i)}releaseCanvas(t){let e;(e="string"==typeof t?document.getElementById(t):t)&&e.parentElement&&e.parentElement.removeChild(e)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(t,e,i){return document.addEventListener(t,e,i)}removeEventListener(t,e,i){return document.removeEventListener(t,e,i)}dispatchEvent(t){return document.dispatchEvent(t)}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}getDocument(){return document}release(...t){}getElementTop(t,e){let i=t.offsetTop,r=t.offsetParent;for(;null!==r;)i+=r.offsetTop,r=r.offsetParent;return i}getElementLeft(t,e){let i=t.offsetLeft,r=t.offsetParent;for(;null!==r;)i+=r.offsetLeft,r=r.offsetParent;return i}getElementTopLeft(t,e){let i=t.offsetTop,r=t.offsetLeft,s=t.offsetParent;for(;null!==s;)i+=s.offsetTop,r+=s.offsetLeft,s=s.offsetParent;return{top:i,left:r}}loadFont(t,e,i){var r,s,n,a;return r=this,s=void 0,n=void 0,a=function*(){return new FontFace(t,(0,c.Z)(e)?`url(${e})`:e,i).load().then(function(t){return document.fonts.add(t),{loadState:"success"}}).catch(function(t){return console.error("Failed to load font:",t),{loadState:"fail"}})},new(n||(n=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n(function(t){t(r)})).then(i,o)}l((a=a.apply(r,s||[])).next())})}isMacOS(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(t){this._isMacOS=!1}return this._isMacOS}copyToClipBoard(t){return navigator.clipboard.writeText(t).then(()=>{}).catch(t=>{})}};e0=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],e0);let e1=new ea.n(t=>{e1.isBrowserBound||(e1.isBrowserBound=!0,t(e0).toSelf().inSingletonScope(),t(eo.D0).toService(e0))});function e2(t,e=!0){e2.__loaded||(e2.__loaded=!0,t.load(e1),t.load(ew),t.load(eY),e&&(t.load(eV),t.load(eU)))}e1.isBrowserBound=!1,e2.__loaded=!1;let e3=class extends ex{constructor(t,e){super(t,e);let i=t.nativeCanvas.getContext("2d");if(!i)throw Error("发生错误，获取2d上下文失败");this.nativeContext=i,this.canvas=t,this.matrix=new ec.y(1,0,0,1,0,0),this.stack=[],this.dpr=null!=e?e:1}release(...t){}};e3.env="node",e3=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],e3);let e5=class extends el{constructor(t){super(t)}init(){this._context=new e3(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...t){this._nativeCanvas.release&&(0,t_.Z)(this._nativeCanvas.release)&&this._nativeCanvas.release()}};e5.env="node";let e4=ek(e5=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],e5),e3),e6=class extends eG{get container(){return null}constructor(t){super(),this.global=t,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t)}createWindowByConfig(t){let e=this.global.createCanvas({width:t.width,height:t.height}),i={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:e,id:eW.R.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new e5(i)}createWindowByCanvas(t){var e;let i=t.canvas,r=null!==(e=t.dpr)&&void 0!==e?e:1,s=t.width,n=t.height;null!=s&&null!=n&&t.canvasControled||(s=i.width/r,n=i.height/r),this.canvas=new e5({width:s,height:n,dpr:r,nativeCanvas:i,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(t="image/png"){return this.canvas.nativeCanvas.toBuffer(t)}addEventListener(t,e,i){}dispatchEvent(t){return!0}removeEventListener(t,e,i){}getStyle(){}setStyle(t){}getBoundingClientRect(){return null}clearViewBox(t){}};e6.env="node",e6=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)(),(s=(0,eM.f)(eo.y2),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],e6);let e8=new ea.n(t=>{t(e6).toSelf(),t(e$.zd).toDynamicValue(t=>t.container.get(e6)).whenTargetNamed(e6.env)});var e7=i(3386);let e9=class extends eK{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(t,e){t.env===this.type&&(t.setActiveEnvContribution(this),this.pkg=e)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(t){let{loadImage:e}=this.pkg;return e?e(t).then(t=>({loadState:t?"success":"fail",data:t})).catch(()=>({loadState:"fail",data:null})):Promise.reject(Error("node-canvas loadImage could not be found!"))}loadSvg(t){let e=this.pkg.Resvg;if(!e)return Promise.reject(Error("@resvg/resvg-js svgParser could not be found!"));let i=new e(t).render().asPng();return this.loadImage(i)}createCanvas(t){return this.pkg.createCanvas(t.width,t.height)}releaseCanvas(t){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(t){return e7.dZ.call(t)}}getCancelAnimationFrame(){return t=>{e7.dZ.clear(t)}}addEventListener(t,e,i){}removeEventListener(t,e,i){}getElementById(t){return null}getRootElement(){return null}dispatchEvent(t){}release(...t){}createOffscreenCanvas(t){}};e9=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,eu.b)()],e9);let it=new ea.n(t=>{it.isNodeBound||(it.isNodeBound=!0,t(e9).toSelf().inSingletonScope(),t(eo.D0).toService(e9))});function ie(t,e=!0){ie.__loaded||(ie.__loaded=!0,t.load(it),t.load(e4),t.load(e8))}it.isNodeBound=!1,ie.__loaded=!1;var ii=i(6480);let ir=()=>{e2(ii.n)},is=()=>{ie(ii.n)},ia={name:"dark",colorScheme:{default:{dataScheme:A,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F",emptyCircleColor:"#bbbdc3",linearProgressTrackColor:"#404349"}}},component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}};var io=i(6883);class il extends io.I{constructor(t){super(),this.globalInstance=t}onInit(t){this._plugins.forEach(e=>{e.onInit&&e.onInit(this,t)})}onBeforeResize(t,e){this._plugins.forEach(i=>{i.onBeforeResize&&i.onBeforeResize(this,t,e)})}onAfterChartSpecTransform(t,e){this._plugins.forEach(i=>{i.onAfterChartSpecTransform&&i.onAfterChartSpecTransform(this,t,e)})}onAfterModelSpecTransform(t,e,i){this._plugins.forEach(r=>{r.onAfterModelSpecTransform&&r.onAfterModelSpecTransform(this,t,e,i)})}onBeforeInitChart(t,e){this._plugins.forEach(i=>{i.onBeforeInitChart&&i.onBeforeInitChart(this,t,e)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var ih=i(1601);let iu=(t,e)=>{if(!e||!t)return null;let i={};return t.forEach(t=>{let r=t&&t.getSpec(),s=r&&r.encode;s&&e.forEach(e=>{e&&s[e]&&(i[e]||(i[e]=[]),i[e].push(t))})}),i},id=t=>{let e=(0,m.IX)(t),i=[],r=[];return e.forEach(t=>{"empty"===t?i.push("view"):(0,c.Z)(t)&&"none"!==t?t.includes("view:")?(r.push(t.replace("view:","")),i.push("view")):(r.push(t),i.push("self")):(0,ih.Z)(t)&&i.push("timeout")}),{eventNames:r,resetType:i}};class ic{constructor(t,e){this.references=new Map,this.view=t,this.depend(null==e?void 0:e.dependency)}getStartState(){return null}depend(t){this.references.clear(),(0,m.IX)(t).map(t=>(0,c.Z)(t)?this.view.getGrammarById(t):t).filter(t=>!(0,f.Z)(t)).forEach(t=>{var e;this.references.set(t,(null!==(e=this.references.get(t))&&void 0!==e?e:0)+1)})}parameters(){let t={};return this.references.forEach((e,i)=>{(0,v.Z)(i.id())&&(t[i.id()]=i.output())}),t}bind(){let t=this.getEvents();(null!=t?t:[]).forEach(t=>{t.type&&t.handler&&((0,p.Z)(t.type)?t.type.forEach(e=>{e&&"none"!==e&&this.view.addEventListener(e,t.handler)}):"none"!==t.type&&this.view.addEventListener(t.type,t.handler))})}unbind(){let t=this.getEvents();(null!=t?t:[]).forEach(t=>{t.type&&t.handler&&((0,p.Z)(t.type)?t.type.forEach(e=>{e&&"none"!==e&&this.view.removeEventListener(e,t.handler)}):"none"!==t.type&&this.view.removeEventListener(t.type,t.handler))})}start(t){}reset(t){}dispatchEvent(t,e){this.view.emit(`${this.type}:${t}`,e),"start"===t&&this.options.onStart?this.options.onStart(e):"reset"===t&&this.options.onReset?this.options.onReset(e):"update"===t&&this.options.onUpdate?this.options.onUpdate(e):"end"===t&&this.options.onEnd&&this.options.onEnd(e)}}class ip extends ic{constructor(t,e){super(t,e),this.type=ip.type,this._resetType=[],this.resetAll=()=>{let{state:t,reverseState:e}=this.options;this._statedElements&&this._statedElements.length&&(this.clearAllStates(t,e),this.dispatchEvent("reset",{elements:this._statedElements,options:this.options}),this._statedElements=[])},this.handleStart=t=>{this.start(t.element)},this.handleReset=t=>{if(!this._statedElements||!this._statedElements.length)return;let e=t.element,i=e&&this._marks&&this._marks.includes(e.mark);(this._resetType.includes("view")&&!i||this._resetType.includes("self")&&i)&&this.resetAll()},this.options=Object.assign({},ip.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector),this._stateMarks=iu(this._marks,[this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getEvents(){let t=this.options.triggerOff,e=this.options.trigger,i=[{type:e,handler:this.handleStart}],{eventNames:r,resetType:s}=id(t);return r.forEach(t=>{t&&((0,p.Z)(e)?!e.includes(t):t!==e)&&i.push({type:t,handler:this.handleReset})}),this._resetType=s,i}start(t){let{state:e,reverseState:i,isMultiple:r}=this.options;if(t&&this._marks&&this._marks.includes(t.mark)){if(t.hasState(e)){if(this._resetType.includes("self")){let r=this._statedElements&&this._statedElements.filter(e=>e!==t);r&&r.length?this._statedElements=this.updateStates(r,this._statedElements,e,i):this.resetAll()}}else this._timer&&clearTimeout(this._timer),t.addState(e),this._statedElements=this.updateStates(r&&this._statedElements?[...this._statedElements,t]:[t],this._statedElements,e,i),this.dispatchEvent("start",{elements:this._statedElements,options:this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout(()=>{this.resetAll()},this.options.triggerOff))}else this._resetType.includes("view")&&this._statedElements&&this._statedElements.length&&this.resetAll()}reset(t){t?this._marks&&this._marks.includes(t.mark)&&t.removeState([this.options.state,this.options.reverseState]):this.resetAll()}}ip.type="element-select",ip.defaultOptions={state:tS.YI.selected,trigger:"click"};class ig extends ic{constructor(t,e){super(t,e),this.type=ig.type,this.handleStart=t=>{this.start(t.element)},this.handleReset=t=>{if(!this._statedElements||!this._statedElements.length)return;let e=t.element;if(e){let t=this._marks&&this._marks.includes(e.mark);"view"!==this._resetType||t?"self"===this._resetType&&t&&this.resetAll():this.resetAll()}},this.options=Object.assign({},ig.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector),this._stateMarks=iu(this._marks,[this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getEvents(){let t=this.options.triggerOff,e=[{type:this.options.trigger,handler:this.handleStart}],i=t;return(0,c.Z)(t)&&t.includes("view:")?(i=t.replace("view:",""),this._resetType="view"):this._resetType="self",e.push({type:i,handler:this.handleReset}),e}resetAll(){let{highlightState:t,blurState:e}=this.options;this._lastElement&&(this.clearAllStates(t,e),this.dispatchEvent("reset",{elements:[this._lastElement],options:this.options}),this._lastElement=null,this._statedElements=null)}start(t){if(t&&this._marks&&this._marks.includes(t.mark)){let{highlightState:e,blurState:i}=this.options;this._lastElement!==t&&(this._statedElements=this.updateStates([t],this._statedElements,e,i),this._lastElement=t,this.dispatchEvent("start",{elements:[t],options:this.options}))}else this._lastElement&&"view"===this._resetType&&this.resetAll()}reset(t){t?this._marks&&this._marks.includes(t.mark)&&t.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}ig.type="element-highlight",ig.defaultOptions={highlightState:tS.YI.highlight,blurState:tS.YI.blur,trigger:"pointerover",triggerOff:"pointerout"};var im=i(7773);class iv{updateStates(t,e,i,r){return t&&t.length?(i&&r?e&&e.length?(this.toggleReverseStateOfElements(t,e,r),this.toggleStateOfElements(t,e,i)):this.addBothStateOfElements(t,i,r):i&&(e&&e.length?this.toggleStateOfElements(t,e,i):this.addStateOfElements(t,i)),t):null}toggleReverseStateOfElements(t,e,i){e.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.addState(i)}),t.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.removeState(i)})}toggleStateOfElements(t,e,i){e.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.removeState(i)}),t.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.addState(i)})}addBothStateOfElements(t,e,i){this._marks.forEach(r=>{var s;let n=i&&this._stateMarks[i]&&this._stateMarks[i].includes(r),a=e&&this._stateMarks[e]&&this._stateMarks[e].includes(r);(n||a)&&(null===(s=r.elements)||void 0===s||s.forEach(r=>{t&&t.includes(r)?a&&r.addState(e):n&&r.addState(i)}))})}addStateOfElements(t,e){this._marks.forEach(i=>{var r;let s=e&&this._stateMarks[e]&&this._stateMarks[e].includes(i);s&&(null===(r=i.elements)||void 0===r||r.forEach(i=>{t&&t.includes(i)&&s&&i.addState(e)}))})}clearAllStates(t,e){this._statedElements&&this._statedElements.length&&this._marks.forEach(i=>{i&&i.elements&&(e&&this._stateMarks[e]&&this._stateMarks[e].includes(i)&&i.elements.forEach(t=>{t.removeState(e)}),t&&this._stateMarks[t]&&this._stateMarks[t].includes(i)&&i.elements.forEach(e=>{this._statedElements.includes(e)&&e.removeState(t)}))})}}let iy=new Map;var i_=function(t,e,i,r){return new(i||(i=Promise))(function(s,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function o(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?s(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,o)}l((r=r.apply(t,e||[])).next())})},ib=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class ix{static useRegisters(t){t.forEach(t=>{"function"==typeof t?t():console.error("Invalid function:",t)})}static useChart(t){t.forEach(t=>tg.F.registerChart(t.type,t))}static useSeries(t){t.forEach(t=>tg.F.registerSeries(t.type,t))}static useComponent(t){t.forEach(t=>tg.F.registerComponent(t.type,t))}static useMark(t){t.forEach(t=>{var e;return tg.F.registerMark(null!==(e=t.constructorType)&&void 0!==e?e:t.type,t)})}static useLayout(t){t.forEach(t=>tg.F.registerLayout(t.type,t))}static registerDataSetTransform(t,e){tg.F.registerTransform(t,e)}static registerFunction(t,e){t&&e&&en.instance().registerFunction(t,e)}static unregisterFunction(t){t&&en.instance().unregisterFunction(t)}static getFunction(t){return t?en.instance().getFunction(t):null}static getFunctionList(){return en.instance().getFunctionNameList()}static registerMap(t,e,i){let r=tg.F.getImplementInKey("registerMap");r&&r(t,e,i)}static unregisterMap(t){let e=tg.F.getImplementInKey("unregisterMap");e&&e(t)}static getMap(t){return tC.get(t)}static registerSVG(t,e,i){let r=tg.F.getImplementInKey("registerSVG");r&&r(t,e,i)}static unregisterSVG(t){let e=tg.F.getImplementInKey("unregisterSVG");e&&e(t)}static getSVG(t){return iy.get(t)}static hideTooltip(t=[]){th.forEach(t=>{var e;return null===(e=null==t?void 0:t.hideTooltip)||void 0===e?void 0:e.call(t)},t)}static getLogger(){return tP.Y.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}getDataSet(){return this._dataSet}constructor(t,e){var i,r,s,n,o,l,h,u;this.id=(0,y.a)(),this._userEvents=[],this._autoSize=!0,this._option={mode:a.i["desktop-browser"],onError:t=>{throw Error(t)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._doResize=()=>{let{width:t,height:e}=this.getCurrentSize();this._currentSize.width===t&&this._currentSize.height===e||(this._currentSize={width:t,height:e},this.resizeSync(t,e))},this._renderSync=(t={})=>{var e;return this._beforeRender(t)&&(null===(e=this._compiler)||void 0===e||e.render(t.morphConfig),this._afterRender()),this},this._updateSpec=(t,e=!1,i)=>{var r,s;let n=this._spec,a={changeBackground:!1,reTransformSpec:!1,change:!1,reMake:!1,reCompile:!1,reSize:!1,changeTheme:!1};if(!this._setNewSpec(t,e))return;(0,tF.X)(n.theme,this._spec.theme)?(0,tF.X)(this._spec.background,n.background)||(a.reMake=!0,a.changeBackground=!0):a.changeTheme=!0;let o=this._shouldChartResize(n);if(a.reSize=o,this._spec.type!==n.type)return null===(s=null===(r=this._compiler)||void 0===r?void 0:r.getVGrammarView())||void 0===s||s.updateLayoutTag(),a.reMake=!0,a.reTransformSpec=!0,a.change=!0,a.changeTheme=!0,a;this._initChartSpec(this._spec,"updateSpec");let l=(0,tV.eo)(this._chart.updateSpec(this._spec),a);return i?Object.assign(Object.assign({},l),i):l},this._option=(0,tj.Z)(this._option,{animation:!1!==t.animation},e),this._onError=null===(i=this._option)||void 0===i?void 0:i.onError;let p=this._option,{dom:g,renderCanvas:m,mode:f,stage:v,poptip:_}=p,x=ib(p,["dom","renderCanvas","mode","stage","poptip"]),S=(0,b.qe)(f);if(S?ir():"node"===f&&is(),S&&g&&(this._container=(0,c.Z)(g)?d.rF.getElementById(g):g),m&&(this._canvas=m),v&&(this._stage=v),"node"!==f&&!this._container&&!this._canvas&&!this._stage)return void(null===(r=this._option)||void 0===r||r.onError("please specify container or renderCanvas!"));this._viewBox=this._option.viewBox,this._currentThemeName=tu.getCurrentThemeName(),this._setNewSpec(t),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize();let A=[];!1!=!_&&A.push("poptipForText"),"sankey"===t.type&&A.push("scrollbar");let k=Object.assign({},x.performanceHook||{});Object.keys(k).forEach(t=>{x.performanceHook[t]=(...e)=>{k[t](...e,this)}}),this._compiler=new tR({dom:null!==(s=this._container)&&void 0!==s?s:"none",canvas:m},Object.assign(Object.assign({mode:this._option.mode,stage:v,pluginList:A},x),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new tw(this,this._compiler),this._event=new tm.j(this._eventDispatcher,f),this._compiler.initView(),this._setFontFamilyTheme(null===(n=this._currentTheme)||void 0===n?void 0:n.fontFamily),this._initDataSet(this._option.dataSet),this._autoSize=!!S&&(null===(l=null!==(o=t.autoFit)&&void 0!==o?o:this._option.autoFit)||void 0===l||l),this._bindResizeEvent(),this._bindVGrammarViewEvent(),this._initChartPlugin(),th.registerInstance(this),null===(u=null===(h=this._option.performanceHook)||void 0===h?void 0:h.afterCreateVChart)||void 0===u||u.call(h,this)}_setNewSpec(t,e){return!!t&&((0,c.Z)(t)&&(t=JSON.parse(t)),e&&this._originalSpec&&(t=(0,tp.H)({},this._originalSpec,t)),this._originalSpec=t,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var t;let e=function t(e,i={data:t=>t}){if(!e)return e;if(e.constructor===Object){let r={};for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(i[s]){r[s]=i[s](e[s]);continue}r[s]=t(e[s],i)}return r}return(0,p.Z)(e)?e.map(e=>t(e,i)):e}(this._originalSpec);return e.data=null!==(t=e.data)&&void 0!==t?t:[],e}_initChartSpec(t,e){var i,r;ix.getFunctionList()&&ix.getFunctionList().length&&(t=function t(e,i){if(!e)return e;if((0,g.Z)(e)){let r={};for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if((0,c.Z)(e[s])&&i.getFunction(e[s])){r[s]=i.getFunction(e[s]);continue}r[s]=t(e[s],i)}return r}return(0,p.Z)(e)?e.map(e=>t(e,i)):e}(t,ix)),this._spec=t,this._chartSpecTransformer||(this._chartSpecTransformer=tg.F.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),null===(i=this._chartSpecTransformer)||void 0===i||i.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,e),this._specInfo=null===(r=this._chartSpecTransformer)||void 0===r?void 0:r.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,e)}_updateSpecInfo(){var t;this._chartSpecTransformer||(this._chartSpecTransformer=tg.F.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=null===(t=this._chartSpecTransformer)||void 0===t?void 0:t.createSpecInfo(this._spec)}_initChart(t){var e,i,r;if(!this._compiler)return void(null===(e=this._option)||void 0===e||e.onError("compiler is not initialized"));if(this._chart)return void(null===(i=this._option)||void 0===i||i.onError("chart is already initialized"));let s=tg.F.createChart(t.type,t,this._getChartOption(t.type));s?(this._chart=s,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(this._chartSpecTransformer),this._chart.init(),this._event.emit(tf.$7.initialized,{chart:s,vchart:this})):null===(r=this._option)||void 0===r||r.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindVGrammarViewEvent(){if(!this._compiler)return;let t=this._compiler.getVGrammarView();t.addEventListener(tS.ZK.ALL_ANIMATION_END,()=>{this._event.emit(tf.$7.animationFinished,{chart:this._chart,vchart:this})}),t.addEventListener(tS.ZK.AFTER_VRENDER_NEXT_RENDER,()=>{this._event.emit(tf.$7.renderFinished,{chart:this._chart,vchart:this})})}_bindResizeEvent(){var t,e;if(this._autoSize){if(this._onResize=(0,tb.Z)(this._doResize,null!==(t=this._option.resizeDelay)&&void 0!==t?t:100),this._container){let t=window.ResizeObserver;t&&(this._observer=new t(this._onResize),null===(e=this._observer)||void 0===e||e.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var t,e,i,r;return(0,tV.hK)(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:null!==(e=null===(t=this._currentSize)||void 0===t?void 0:t.width)&&void 0!==e?e:tL.rV,height:null!==(r=null===(i=this._currentSize)||void 0===i?void 0:i.height)&&void 0!==r?r:tL.b})}_initDataSet(t){for(let e in this._dataSet=t instanceof l.q?t:new l.q,(0,tT.I)(this._dataSet,"dataview",h.i),(0,tT.I)(this._dataSet,"array",n.Q),(0,tT.U)(this._dataSet,"copyDataView",tM.Y),tg.F.transforms)(0,tT.U)(this._dataSet,e,tg.F.transforms[e]);for(let t in tg.F.dataParser)(0,tT.I)(this._dataSet,t,tg.F.dataParser[t])}updateCustomConfigAndRerender(t,e,i={}){if(!this._isReleased&&t)return(0,t_.Z)(t)&&(t=t()),t.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(t),e?this._renderSync(i):this._renderAsync(i)}_updateCustomConfigAndRecompile(t,e={}){return!!t&&(this._reCompile(t),this._beforeRender(e))}_reCompile(t,e){var i,r,s,n,a,o,l,h,u,d;if(t.reMake&&(this._releaseData(),this._initDataSet(),null===(i=this._chart)||void 0===i||i.release(),this._chart=null),t.reTransformSpec&&(this._chartSpecTransformer=null),t.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme(null===(r=this._currentTheme)||void 0===r?void 0:r.fontFamily)):t.changeBackground&&(null===(s=this._compiler)||void 0===s||s.setBackground(this._getBackground())),t.reMake)null===(n=this._compiler)||void 0===n||n.releaseGrammar(!1===(null===(a=this._option)||void 0===a?void 0:a.animation)||!1===(null===(o=this._spec)||void 0===o?void 0:o.animation)),this._userEvents.forEach(t=>{var e;return null===(e=this._event)||void 0===e?void 0:e.on(t.eType,t.query,t.handler)}),t.reSize&&this._doResize();else if(t.reCompile&&(null===(l=this._compiler)||void 0===l||l.clear({chart:this._chart,vChart:this},!1===(null===(h=this._option)||void 0===h?void 0:h.animation)||!1===(null===(u=this._spec)||void 0===u?void 0:u.animation)),null===(d=this._compiler)||void 0===d||d.compile({chart:this._chart,vChart:this},{})),t.reSize){let{width:t,height:e}=this.getCurrentSize();this._chart.onResize(t,e,!1),this._compiler.resize(t,e,!1)}}_beforeRender(t={}){var e,i,r,s,n,a,o,l;if(this._isReleased)return!1;if(this._chart)return!0;let{transformSpec:h,actionSource:u}=t;return h&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,u),null===(i=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeInitializeChart)||void 0===i||i.call(e,this),this._initChart(this._spec),null===(s=null===(r=this._option.performanceHook)||void 0===r?void 0:r.afterInitializeChart)||void 0===s||s.call(r,this),!(!this._chart||!this._compiler)&&(null===(a=null===(n=this._option.performanceHook)||void 0===n?void 0:n.beforeCompileToVGrammar)||void 0===a||a.call(n),this._compiler.compile({chart:this._chart,vChart:this},{performanceHook:this._option.performanceHook}),null===(l=null===(o=this._option.performanceHook)||void 0===o?void 0:o.afterCompileToVGrammar)||void 0===l||l.call(o),!0)}_afterRender(){return!this._isReleased&&(this._updateAnimateState(),this._event.emit(tf.$7.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(t){return this._renderSync({morphConfig:t,transformSpec:!0,actionSource:"render"})}renderAsync(t){return i_(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:t,transformSpec:!0,actionSource:"render"})})}_renderAsync(t={}){return i_(this,void 0,void 0,function*(){return this._renderSync(t)})}_updateAnimateState(t){var e,i;if(this._option.animation){let r=t?tB.h.appear:tB.h.update;null===(e=this._chart)||void 0===e||e.getAllRegions().forEach(t=>{var e;null===(e=t.animate)||void 0===e||e.updateAnimateState(r,!0)}),null===(i=this._chart)||void 0===i||i.getAllComponents().forEach(t=>{var e;null===(e=t.animate)||void 0===e||e.updateAnimateState(r,!0)})}}release(){var t,e,i,r;(null===(t=this._onResize)||void 0===t?void 0:t.cancel)&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,null===(e=this._chart)||void 0===e||e.release(),null===(i=this._eventDispatcher)||void 0===i||i.release(),null===(r=this._compiler)||void 0===r||r.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,th.unregisterInstance(this)}updateData(t,e,i,r){return i_(this,void 0,void 0,function*(){return this.updateDataSync(t,e,i,r)})}_updateDataById(t,e,i){let r=this._spec.data.find(e=>e.name===t||e.id===t);r?r.id===t?r.values=e:r.name===t&&r.parse(e,i):(0,p.Z)(e)?this._spec.data.push({id:t,values:e}):this._spec.data.push(e)}updateDataInBatches(t){return i_(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(t.map(({id:t,data:e,options:i})=>({id:t,values:e,parser:i}))),this._chart.updateGlobalScaleDomain(),this._compiler.render()):(this._spec.data=(0,m.IX)(this._spec.data),t.forEach(({id:t,data:e,options:i})=>{this._updateDataById(t,e,i)})),this})}updateDataSync(t,e,i,r){return(0,f.Z)(this._dataSet)||(this._chart?((null==r?void 0:r.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateData(t,e,!0,i),this._compiler.render()):(this._spec.data=(0,m.IX)(this._spec.data),this._updateDataById(t,e,i))),this}updateFullDataSync(t,e=!0,i){if(this._chart)return(null==i?void 0:i.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateFullData(t),e&&this._compiler.render(),this;let r=(0,m.IX)(this._spec.data);return(0,m.IX)(t).forEach(t=>{let{id:e,values:i,parser:s,fields:n}=t,a=r.find(t=>t.name===e);if(a)a instanceof u.VO?(a.setFields((0,tZ.Z)(n)),a.parse(i,(0,tZ.Z)(s))):(a.values=i,(0,v.Z)(s)&&(a.parser=s),(0,v.Z)(n)&&(a.fields=n));else{let e=(0,tE.J3)(t,this._dataSet,r);(0,p.Z)(this._spec.data)&&this._spec.data.push(e)}}),this}updateFullData(t,e=!0){return i_(this,void 0,void 0,function*(){return this.updateFullDataSync(t,e)})}updateSpec(t,e=!1,i,r){return i_(this,void 0,void 0,function*(){let s=this._updateSpec(t,e,r);return s&&(yield this.updateCustomConfigAndRerender(s,!1,{morphConfig:i,transformSpec:s.reTransformSpec,actionSource:"updateSpec"})),this})}updateSpecSync(t,e=!1,i,r){let s=this._updateSpec(t,e,r);return s&&this.updateCustomConfigAndRerender(s,!0,{morphConfig:i,transformSpec:s.reTransformSpec,actionSource:"updateSpec"}),this}updateSpecAndRecompile(t,e=!1,i={}){let r=this._updateSpec(t,e);return this._updateCustomConfigAndRecompile(r,Object.assign({actionSource:"updateSpecAndRecompile"},i))}updateModelSpec(t,e,i=!1,r){return i_(this,void 0,void 0,function*(){return this.updateModelSpecSync(t,e,i,r)})}updateModelSpecSync(t,e,i=!1,r){if(!e||!this._spec)return this;if((0,c.Z)(e)&&(e=JSON.parse(e)),(0,t_.Z)(t)||(0,tp.K)(this._spec,t,e,i),this._chart){let s=this._chart.getModelInFilter(t);if(s)return this._updateModelSpec(s,e,!0,i,r)}return this}_updateModelSpec(t,e,i=!1,r=!1,s){r&&(e=(0,tp.H)({},t.getSpec(),e));let n=t.updateSpec(e);return t.reInit(e),(n.change||n.reCompile||n.reMake||n.reSize||n.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(n,i,{morphConfig:s,transformSpec:!1,actionSource:"updateModelSpec"})}resize(t,e){return i_(this,void 0,void 0,function*(){return this.resizeSync(t,e)})}resizeSync(t,e){var i,r;return this._beforeResize(t,e)?(null===(r=(i=this._compiler).resize)||void 0===r||r.call(i,t,e),this._afterResize()):this}_beforeResize(t,e){var i,r,s,n;if(!this._chart||!this._compiler)return!1;let a=this._chart.getCanvasRect();return(!a||a.width!==t||a.height!==e)&&(this._chartPluginApply("onBeforeResize",t,e),null===(r=null===(i=this._option.performanceHook)||void 0===i?void 0:i.beforeResizeWithUpdate)||void 0===r||r.call(i),this._chart.onResize(t,e,!1),null===(n=null===(s=this._option.performanceHook)||void 0===s?void 0:s.afterResizeWithUpdate)||void 0===n||n.call(s),!0)}_afterResize(){return this._isReleased||this._event.emit(tf.$7.afterResize,{chart:this._chart}),this}updateViewBox(t,e=!0,i=!0){return this._chart&&this._compiler&&(this._viewBox=t,this._chart.updateViewBox(t,i),i&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(t,e)),this}on(t,e,i){var r;this._userEvents&&(this._userEvents.push({eType:t,query:"function"==typeof e?null:e,handler:"function"==typeof e?e:i}),null===(r=this._event)||void 0===r||r.on(t,e,i))}off(t,e){var i;if(this._userEvents&&0!==this._userEvents.length){if(e){let r=this._userEvents.findIndex(i=>i.eType===t&&i.handler===e);r>=0&&(this._userEvents.splice(r,1),null===(i=this._event)||void 0===i||i.off(t,e))}else this._userEvents.forEach(e=>{var i;e.eType===t&&(null===(i=this._event)||void 0===i||i.off(t,e.handler))}),this._userEvents=this._userEvents.filter(e=>e.eType!==t)}}updateState(t,e){this._chart&&this._chart.updateState(t,e)}setSelected(t,e,i){this._chart&&this._chart.setSelected(t,e,i)}setHovered(t,e,i){this._chart&&this._chart.setHovered(t,e,i)}clearState(t){this._chart&&this._chart.clearState(t)}clearAllStates(){this._chart&&this._chart.clearAllStates()}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(t){var e,i,r,s;let n;let a=this._option.theme,o=null===(e=this._spec)||void 0===e?void 0:e.theme,l=null===(i=this._spec)||void 0===i?void 0:i.type;t&&(this._currentThemeName=t);let h=(t,e)=>{var i;return(null===(i=e.chart)||void 0===i?void 0:i[t])&&(e=(0,S.hr)({},e,e.chart[t])),e};if((0,tH.Z)(a)&&(0,tH.Z)(o))n=tc(this._currentThemeName,!0),this._currentTheme=h(l,n);else if((0,c.Z)(a)&&(!o||(0,c.Z)(o))||(0,c.Z)(o)&&(!a||(0,c.Z)(a))){let t=(0,S.hr)({},tc(this._currentThemeName,!0),tc(a,!0),tc(o,!0));this._currentTheme=h(l,t)}else{let t=(0,S.hr)({},tc(this._currentThemeName),tc(a),tc(o));this._currentTheme=J(h(l,t))}s=(0,ty.Z)(this._currentTheme,"component.poptip"),(0,tj.Z)(tz.poptip,tN,s),null===(r=this._compiler)||void 0===r||r.setBackground(this._getBackground())}_shouldChartResize(t){var e,i;let r=!1;(0,f.Z)(this._spec.width)?(0,f.Z)(t.width)||(this._spec.width=t.width):this._spec.width!==t.width&&(r=!0),(0,f.Z)(this._spec.height)?(0,f.Z)(t.height)||(this._spec.height=t.height):this._spec.height!==t.height&&(r=!0);let s=this._autoSize;return this._autoSize=!!(0,b.qe)(this._option.mode)&&(null===(i=null!==(e=this._spec.autoFit)&&void 0!==e?e:this._option.autoFit)||void 0===i||i),this._autoSize!==s&&(r=!0),r}_getBackground(){return("string"==typeof this._spec.background||(0,td.Z)(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this._currentTheme.background||this._option.background}getCurrentTheme(){return tc(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(t){return i_(this,void 0,void 0,function*(){return this.setCurrentThemeSync(t)})}setCurrentThemeSync(t){var e;if(!tu.themeExist(t))return this;let i=this._setCurrentTheme(t);return this._setFontFamilyTheme(null===(e=this._currentTheme)||void 0===e?void 0:e.fontFamily),this.updateCustomConfigAndRerender(i,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(t){var e;return this._updateCurrentTheme(t),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),null===(e=this._chart)||void 0===e||e.setCurrentTheme(),{change:!0,reMake:!1}}_setFontFamilyTheme(t){var e;t&&(null===(e=this.getStage())||void 0===e||e.setTheme({text:{fontFamily:t}}))}_getTooltipComponent(){var t;return null===(t=this._chart)||void 0===t?void 0:t.getComponentsByType(o.L.tooltip)[0]}setTooltipHandler(t){var e,i;this._context.tooltipHandler=t;let r=this._getTooltipComponent();r&&(null===(i=null===(e=r.tooltipHandler)||void 0===e?void 0:e.release)||void 0===i||i.call(e),r.tooltipHandler=t)}getTooltipHandlerByUser(){var t;return null===(t=this._context)||void 0===t?void 0:t.tooltipHandler}getTooltipHandler(){let t=this._getTooltipComponent();return t?t.tooltipHandler:this._context.tooltipHandler}showTooltip(t,e){var i;let r=this._getTooltipComponent();return null!==(i=(0,v.Z)(t)&&"none"!==(null==r?void 0:r.showTooltip(t,e)))&&void 0!==i&&i}hideTooltip(){var t;let e=this._getTooltipComponent();return null!==(t=null==e?void 0:e.hideTooltip())&&void 0!==t&&t}getLegendDataById(t){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentByUserId(t);return i?i.getLegendData():[]}getLegendDataByIndex(t=0){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentsByType(o.L.discreteLegend);return i&&i[t]?i[t].getLegendData():[]}getLegendSelectedDataById(t){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentByUserId(t);return i?i.getSelectedData():[]}getLegendSelectedDataByIndex(t=0){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentsByType(o.L.discreteLegend);return i&&i[t]?i[t].getSelectedData():[]}setLegendSelectedDataById(t,e){var i;let r=null===(i=this._chart)||void 0===i?void 0:i.getComponentByUserId(t);r&&r.setSelectedData(e)}setLegendSelectedDataByIndex(t=0,e){var i;let r=null===(i=this._chart)||void 0===i?void 0:i.getComponentsByType(o.L.discreteLegend);r&&r[t]&&r[t].setSelectedData(e)}getDataURL(){var t;return i_(this,void 0,void 0,function*(){let e=this.getStage();if(this._chart&&e){e.render();let t=this._chart.getCanvas();return yield function(t,e){var i,r,s,n,a;return r=this,s=void 0,n=void 0,a=function*(){if(!t)return"";try{if(void 0!==OffscreenCanvas&&t instanceof OffscreenCanvas)return new Promise(e=>{t.convertToBlob().then(t=>{let i=new FileReader;i.readAsDataURL(t),i.onload=()=>{e(i.result)}})})}catch(t){(null!==(i=null==e?void 0:e.onError)&&void 0!==i?i:x.vU)(`getCanvasDataURL error : ${t.toString()}`)}return t.toDataURL()},new(n||(n=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n(function(t){t(r)})).then(i,o)}l((a=a.apply(r,s||[])).next())})}(t,{onError:this._onError})}return null===(t=this._option)||void 0===t||t.onError(ReferenceError("render is not defined")),null})}exportImg(t){var e,i;return i_(this,void 0,void 0,function*(){if(!(0,b.qe)(this._option.mode))return void(null===(e=this._option)||void 0===e||e.onError(TypeError("non-browser environment can not export img")));let r=yield this.getDataURL();r?function(t="vchart",e){let i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("target","_blank"),i.setAttribute("download",`${t}.png`),i.dispatchEvent(new MouseEvent("click"))}(t,r):null===(i=this._option)||void 0===i||i.onError(ReferenceError("render is not defined"))})}exportCanvas(){var t;let e=this.getStage();if(this._chart&&e)return e.toCanvas();null===(t=this._option)||void 0===t||t.onError(ReferenceError("render is not defined"))}getImageBuffer(){var t,e;if("node"!==this._option.mode)return void(null===(t=this._option)||void 0===t||t.onError(TypeError("getImageBuffer() now only support node environment.")));let i=this.getStage();return i?(i.render(),i.window.getImageBuffer()):(null===(e=this._option)||void 0===e||e.onError(ReferenceError("render is not defined")),null)}setLayout(t){var e;this._option.layout=t,null===(e=this._chart)||void 0===e||e.setLayout(t)}reLayout(){var t;null===(t=this._chart)||void 0===t||t.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var t;return null===(t=this._compiler)||void 0===t?void 0:t.getCanvas()}getContainer(){var t;let e;return(0,v.Z)(this._container)?this._container:(e=(0,c.Z)(this._canvas)?d.rF.getElementById(this._canvas):this._canvas,(0,v.Z)(e)?e.parentElement:null===(t=this.getCanvas())||void 0===t?void 0:t.parentElement)}getComponents(){return this._chart.getAllComponents()}getScale(t){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getGlobalScale();return null==i?void 0:i.getScale(t)}setDimensionIndex(t,e={}){var i;return null===(i=this._chart)||void 0===i?void 0:i.setDimensionIndex(t,e)}stopAnimation(){var t,e,i;null===(i=null===(e=null===(t=this._compiler)||void 0===t?void 0:t.getVGrammarView())||void 0===e?void 0:e.animate)||void 0===i||i.stop()}pauseAnimation(){var t,e,i;null===(i=null===(e=null===(t=this._compiler)||void 0===t?void 0:t.getVGrammarView())||void 0===e?void 0:e.animate)||void 0===i||i.pause()}resumeAnimation(){var t,e,i;null===(i=null===(e=null===(t=this._compiler)||void 0===t?void 0:t.getVGrammarView())||void 0===e?void 0:e.animate)||void 0===i||i.resume()}convertDatumToPosition(t,e={},i=!1,r){var s;let n;if(!this._chart||(0,tH.Z)(t))return null;let{seriesId:a,seriesIndex:o=0}=e;if((0,v.Z)(a)?n=this._chart.getSeriesInUserId(a):(0,v.Z)(o)&&(n=null===(s=this._chart.getSeriesInIndex([o]))||void 0===s?void 0:s[0]),n){let e;let s=Object.keys(t),a=n.getViewData().latestData.find(e=>s.every(i=>e[i]==t[i])),o=n.getRegion().getLayoutStartPoint();return(e=a?n.dataToPosition(a,r):n.dataToPosition(t,r))?(0,_.G$)(e,o,i):null}return null}convertValueToPosition(t,e,i=!1){var r,s;let n;if(!this._chart||(0,f.Z)(t)||(0,tH.Z)(e))return null;if(!(0,p.Z)(t)){let s;let{axisId:n,axisIndex:a}=e;if((0,v.Z)(n)?s=this._chart.getComponentsByKey("axes").find(t=>t.userId===n):(0,v.Z)(a)&&(s=null===(r=this._chart.getComponentsByKey("axes"))||void 0===r?void 0:r[a]),!s)return(0,x.ZK)("Please check whether the `axisId` or `axisIndex` is set!"),null;let o=null==s?void 0:s.valueToPosition(t);if(i){let t=s.getLayoutStartPoint(),e=s.getOrient();return o+("bottom"===e||"top"===e?t.x:t.y)}return o}let{seriesId:a,seriesIndex:o}=e;return(0,v.Z)(a)?n=this._chart.getSeriesInUserId(a):(0,v.Z)(o)&&(n=null===(s=this._chart.getSeriesInIndex([o]))||void 0===s?void 0:s[0]),n?(0,_.G$)(n.valueToPosition(t[0],t[1]),n.getRegion().getLayoutStartPoint(),i):((0,x.ZK)("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(t){return en.instance().getFunction(t)}registerFunction(t,e){t&&e&&en.instance().registerFunction(t,e)}unregisterFunction(t){t&&en.instance().unregisterFunction(t)}getFunctionList(){return en.instance().getFunctionNameList()}setRuntimeSpec(t){this._spec=t,this._updateSpecInfo()}updateIndicatorDataById(t,e){var i;let r=null===(i=this._chart)||void 0===i?void 0:i.getComponentByUserId(t);r&&r.updateDatum(e)}updateIndicatorDataByIndex(t=0,e){var i;let r=null===(i=this._chart)||void 0===i?void 0:i.getComponentsByType(o.L.indicator);r&&r[t]&&r[t].updateDatum(e)}geoZoomByIndex(t=0,e,i){this._geoZoomByQuery({regionIndex:t},e,i)}geoZoomById(t,e,i){this._geoZoomByQuery({regionId:t},e,i)}_geoZoomByQuery(t,e,i){var r,s;let n=null===(r=this._chart)||void 0===r?void 0:r.getRegionsInQuerier(t)[0],a=null===(s=this._chart)||void 0===s?void 0:s.getComponentsByType(o.L.geoCoordinate),l=null==a?void 0:a.find(t=>{var e;return null===(e=t.getRegions())||void 0===e?void 0:e.includes(n)});l&&l.dispatchZoom(e,i)}_initChartPlugin(){let t=tg.F.getChartPlugins();t.length>0&&(this._chartPlugin=new il(this),this._chartPlugin.load(t.map(t=>new t)),this._chartPluginApply("onInit",this._spec))}_chartPluginApply(t,...e){this._chartPlugin&&this._chartPlugin[t]&&this._chartPlugin[t].apply(this._chartPlugin,e)}_getMode(){return this._option.mode||a.i["desktop-browser"]}_getChartOption(t){return{type:t,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,performanceHook:this._option.performanceHook,viewBox:this._viewBox,animation:this._option.animation,getTheme:()=>{var t;return null!==(t=this._currentTheme)&&void 0!==t?t:{}},getSpecInfo:()=>{var t;return null!==(t=this._specInfo)&&void 0!==t?t:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:!0===this._option.disableTriggerEvent}}}ix.InstanceManager=th,ix.ThemeManager=tu,ix.globalConfig={uniqueTooltip:!0},ix.Utils={measureText:(t,e,i,r)=>es(e,i,r).measure(t)},ix.vglobal=d.rF,tg.F.registerRegion("region",t2),tg.F.registerLayout("base",et),(0,ee.B)(),tD.Z.useRegisters([ei.BQt]),(0,im.jB)(ig,iv),tA.F.registerInteraction(ig.type,ig),(0,im.jB)(ip,iv),tA.F.registerInteraction(ip.type,ip),ts(ia.name,ia),tP.Y.getInstance(tP.h.Error)},2990:function(t,e,i){"use strict";i.d(e,{BV:()=>s,J3:()=>p,kk:()=>g,uj:()=>c});var r,s,n=i(5205),a=i(645),o=i(9904),l=i(2449),h=i(6338),u=i(6358),d=i(1393);function c(t,e,i){e=e instanceof l.q?e:t.dataSet,(0,u.U)(e,"copyDataView",d.Y);let r=new h.VO(e,i);return r.parse([t],{type:"dataview"}),r.transform({type:"copyDataView",level:s.copyDataView}),r}function p(t,e,i=[]){let r;if(t instanceof h.VO)return t;let{id:s,values:l=[],fromDataIndex:u,fromDataId:d,transforms:c=[]}=t,g=t.parser?(0,a.Z)(t.parser):{clone:!0},m=(0,a.Z)(t.fields);g.clone=!1!==g.clone;let f=i.find(t=>t.name===s);if(f)r=f;else{let t={name:s};if(m&&(t.fields=m),r=new h.VO(e,t),"string"==typeof d){let t=i.find(t=>t.name===d);if(!t)return(0,n.ZK)(`no data matches fromDataId ${d}`),null;r.parse([t],{type:"dataview"}),r.transform({type:"copyDataView"})}else if("number"==typeof u){let t=i[u];if(!t)return(0,n.ZK)(`no data matches fromDataIndex ${u}`),null;r.parse([t],{type:"dataview"}),r.transform({type:"copyDataView"})}else Array.isArray(l)?r.parse(l,g):(0,o.Z)(l)&&(!g||["csv","dsv","tsv"].includes(g.type))?r.parse(l,null!=g?g:{type:"csv"}):(r.parse([]),(0,n.ZK)("values should be array"));c&&c.length&&c.forEach(t=>{e.getTransform(t.type)&&r.transform(t)})}return r}function g(t,e,i){t&&(e.fields&&t.setFields(e.fields,i),t.parseNewData(e.values,e.parser))}(r=s||(s={}))[r.copyDataView=-10]="copyDataView",r[r.treemapFilter=-8]="treemapFilter",r[r.treemapFlatten=-7]="treemapFlatten",r[r.dotObjFlat=-7]="dotObjFlat",r[r.linkDotInfo=-7]="linkDotInfo",r[r.sankeyLayout=-7]="sankeyLayout",r[r.dataZoomFilter=-6]="dataZoomFilter",r[r.legendFilter=-5]="legendFilter"},1697:function(t,e,i){"use strict";i.d(e,{Q:()=>r});let r=t=>t},6358:function(t,e,i){"use strict";function r(t,e,i){t.getTransform(e)||t.registerTransform(e,i)}function s(t,e,i){t.getParser(e)||t.registerParser(e,i)}i.d(e,{I:()=>s,U:()=>r})},3959:function(t,e,i){"use strict";i.d(e,{E:()=>r});let r=(t,e)=>{let i=e.beforeCall();return t&&t.forEach((t,r)=>e.call(t,r,i)),i.keyMap&&(i.keyMap.clear(),i.keyMap=null),t}},1393:function(t,e,i){"use strict";i.d(e,{Y:()=>a});var r=i(645),s=i(6338);function n(t,e=!1){let i=e;return t.latestData instanceof s.VO&&(i=!1),i?(0,r.Z)(t.latestData):t.latestData&&t.latestData.slice()}let a=(t,e)=>0===t.length?[]:1===t.length?n(t[0],null==e?void 0:e.deep):t.map(t=>n(t,null==e?void 0:e.deep))},1766:function(t,e,i){"use strict";i.d(e,{CL:()=>n,cJ:()=>s});var r=i(5669);function s(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function n(t,e,i){t&&(i.needDefaultSeriesField&&(t[r.lb]=i.defaultSeriesField),t[r.vM]=e,t[r.XW]=i.getKey(t,e,i))}},4277:function(t,e,i){"use strict";i.d(e,{j:()=>g});var r=i(2687),s=i(7631),n=i(5205),a=i(7665),o=i(3233),l=i(5173),h=i(3881);class u{constructor(t,e){this._eventDispatcher=t,this._mode=e}get chart(){var t,e;return this._chart||(this._chart=null===(e=(t=this._eventDispatcher.globalInstance).getChart)||void 0===e?void 0:e.call(t)),this._chart}register(t,e){var i,r;(null!==(r=null===(i=this.chart)||void 0===i?void 0:i.getOption().onError)&&void 0!==r?r:n.vU)("Method not implemented.")}unregister(){var t,e;(null!==(e=null===(t=this.chart)||void 0===t?void 0:t.getOption().onError)&&void 0!==e?e:n.vU)("Method not implemented.")}getTargetDimensionInfo(t,e){var i,r;let s=[].concat(null!==(i=(0,o.p5)(this.chart,{x:t,y:e}))&&void 0!==i?i:[],null!==(r=(0,a.e)(this.chart,{x:t,y:e}))&&void 0!==r?r:[]);return 0===s.length?null:s}dispatch(t,e){var i;let r=null===(i=this.chart)||void 0===i?void 0:i.getAllComponents().filter(t=>"axes"===t.specKey&&(!(null==e?void 0:e.filter)||e.filter(t))),s=r.filter(t=>{let e=t.getScale();return(0,l.lK)(e.type)}),n=s.length?s:r.filter(t=>{let e=t.getOrient();return(0,h.yL)(e)||"angle"===e}),a=[];return n.forEach(e=>{let i=(0,o.KV)(e,t);i&&a.push(i)}),this._callback.call(null,{action:"enter",dimensionInfo:a}),a}}var d=i(9673),c=i(3722);let p={[r.C.dimensionHover]:class extends u{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=t=>{if(!t)return;let e=t.event.viewX,i=t.event.viewY,r=this.getTargetDimensionInfo(e,i);null===r&&null!==this._cacheDimensionInfo?(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=r):null!==r&&(null===this._cacheDimensionInfo||r.length!==this._cacheDimensionInfo.length||r.some((t,e)=>!(0,d.eH)(t,this._cacheDimensionInfo[e])))?(this._callback.call(null,Object.assign(Object.assign({},t),{action:"enter",dimensionInfo:r.slice()})),this._cacheDimensionInfo=r):null!==r&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"move",dimensionInfo:r.slice()}))},this.onMouseOut=t=>{t&&(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},e.query),{source:c.AY.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},e.query),{source:c.AY.canvas}),callback:this.onMouseOut}),(0,s.wx)(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},e.query),{source:c.AY.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),(0,s.wx)(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}},[r.C.dimensionClick]:class extends u{constructor(){super(...arguments),this.onClick=t=>{if(!t)return;let e=t.event.viewX,i=t.event.viewY,r=this.getTargetDimensionInfo(e,i);r&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"click",dimensionInfo:r.slice()}))}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},e.query),{source:c.AY.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}};class g{getComposedEventMap(){return this._composedEventMap}constructor(t,e){this._composedEventMap=new Map,this._eventDispatcher=t,this._mode=e}on(t,e,i){let r="function"==typeof e?{query:null,callback:e}:{query:e,callback:i};if(p[t]){let e=new p[t](this._eventDispatcher,this._mode);e.register(t,r),this._composedEventMap.set(i,{eventType:t,event:e})}else this._eventDispatcher.register(t,r);return this}off(t,e,i){var r,s;let n=null!=i?i:e;if(p[t]){if(n)null===(r=this._composedEventMap.get(n))||void 0===r||r.event.unregister(),this._composedEventMap.delete(n);else for(let e of this._composedEventMap.entries())e[1].eventType===t&&(null===(s=this._composedEventMap.get(e[0]))||void 0===s||s.event.unregister(),this._composedEventMap.delete(e[0]))}else if(n){let i={callback:n,query:null,filter:{nodeName:null,type:t,level:null,source:e.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(t,i)}else this._eventDispatcher.unregister(t);return this}emit(t,e,i){return this._eventDispatcher.dispatch(t,e,i),this}prevent(t,e){return this._eventDispatcher.prevent(t,e),this}allow(t){return this._eventDispatcher.allow(t),this}release(){this._eventDispatcher.clear(),this._composedEventMap.clear()}}},2687:function(t,e,i){"use strict";var r,s;i.d(e,{C:()=>r}),(s=r||(r={})).dimensionHover="dimensionHover",s.dimensionClick="dimensionClick"},3233:function(t,e,i){"use strict";i.d(e,{KV:()=>g,p5:()=>c});var r=i(5173),s=i(9673),n=i(6082),a=i(3881);let o=t=>t.fieldX[0],l=t=>t.fieldY[0],h=t=>{var e;return[t.fieldX[0],null!==(e=t.fieldX2)&&void 0!==e?e:t.fieldX[1]]},u=t=>{var e;return[t.fieldY[0],null!==(e=t.fieldY2)&&void 0!==e?e:t.fieldY[1]]},d=(t,e)=>t?e?o:h:e?l:u,c=(t,e,i)=>{var n,o;if(!t)return null;let{x:l,y:h}=e,u=null!==(n=(0,s.dd)(t,t=>(0,a.yL)(t.getOrient()),e))&&void 0!==n?n:[],c=null!==(o=(0,s.dd)(t,t=>(0,a.Vz)(t.getOrient()),e))&&void 0!==o?o:[];if(!u.length&&!c.length)return null;let g=new Set,m=new Set,f=new Set;[u,c].forEach(t=>t.forEach(t=>{(0,r.lK)(t.getScale().type)?g.add(t):m.add(t),i&&t.getSpec().hasDimensionTooltip&&f.add(t)}));let v=[],y=t=>{let e="x"===t,i=e?l:h;(e?u:c).forEach(t=>{if(f.size>0){if(f.has(t)){let s=p(t,i,d(e,(0,r.lK)(t.getScale().type)));s&&v.push(s)}}else{let r=g.size>0;if((r?g:m).has(t)){let s=p(t,i,d(e,r));s&&v.push(s)}}})};return"horizontal"===t.getSpec().direction?(y("y"),0===v.length&&y("x")):(y("x"),0===v.length&&y("y")),v.length?v:null},p=(t,e,i)=>{let r=t.positionToData(e,!0);return(0,n.Z)(r)?null:g(t,r,i)},g=(t,e,i)=>{let r=t.getScale();if((0,n.Z)(e))return null;let h=r.domain().findIndex(t=>(null==t?void 0:t.toString())===e.toString());h<0&&(h=void 0);let u=(0,s.SH)(e,t,"cartesian",null!=i?i:(0,a.yL)(t.getOrient())?o:l);return{index:h,value:e,position:r.scale(e),axis:t,data:u}}},9673:function(t,e,i){"use strict";i.d(e,{SH:()=>c,dd:()=>g,eH:()=>u});var r=i(4546),s=i(6082),n=i(8378),a=i(7623),o=i(5173);let l=(t,e,i)=>t.x>=e.x&&t.x<=i.x&&t.y>=e.y&&t.y<=i.y,h=(t,e,i)=>{let s=t.getRegionsInIds((0,r.IX)(e.layout.layoutBindRegionID));return null==s?void 0:s.some(t=>{let e=t.getLayoutRect(),r=t.getLayoutStartPoint();return l(i,{x:r.x,y:r.y},{x:e.width+r.x,y:e.height+r.y})})},u=(t,e)=>{var i,r;return t===e||!(0,s.Z)(t)&&!(0,s.Z)(e)&&t.value===e.value&&(null===(i=t.axis)||void 0===i?void 0:i.id)===(null===(r=e.axis)||void 0===r?void 0:r.id)},d=(t,e)=>{let i=t.tooltipFilterRange,r="function"==typeof i?i({scale:e}):i;return(0,n.Z)(r)?[-r,r]:r},c=(t,e,i,s)=>{var n;let l=e.getScale(),h=(0,o.lK)(l.type),u=[];for(let o of e.getOption().getChart().getSeriesInIndex(e.getSpecInfo().seriesIndexes))if(o.coordinate===i){let i=(0,r.IX)(s(o)),c=null===(n=o.getViewData())||void 0===n?void 0:n.latestData;if(i&&c){if(h){let e=[],r=[];c.forEach((s,n)=>{var a;(null===(a=s[i[0]])||void 0===a?void 0:a.toString())===(null==t?void 0:t.toString())&&(e.push(s),r.push(n))}),u.push({series:o,datum:e,key:p(o,r)})}else if((0,a.Z)(i[1])){let e=[],r=[];c.forEach((s,n)=>{var o;((null===(o=s[i[0]])||void 0===o?void 0:o.toString())===(null==t?void 0:t.toString())||(0,a.Z)(s[i[0]])&&(0,a.Z)(s[i[1]])&&t>=s[i[0]]&&t<s[i[1]])&&(e.push(s),r.push(n))}),u.push({series:o,datum:e,key:p(o,r)})}else{let r=d(e.getSpec(),l),s=[],n=[];if(r)c.forEach((e,o)=>{if((0,a.Z)(e[i[0]])){let a=e[i[0]]-t;a>=r[0]&&a<=r[1]&&(s.push(e),n.push(o))}});else{let e=1/0,r=0;c.forEach((o,l)=>{if((0,a.Z)(o[i[0]])){let a=Math.abs(o[i[0]]-t),h=Math.sign(o[i[0]]-t);a<e?(e=a,s=[o],n=[l],r=h):a===e&&h===r&&(s.push(o),n.push(l))}})}u.push({series:o,datum:s,key:p(o,n)})}}}return u},p=(t,e)=>`${t.id}_${e.join("_")}`,g=(t,e,i)=>{let r=t.getAllComponents().filter(r=>"axes"===r.specKey&&e(r)&&h(t,r,i));return r.length?r:null}},7665:function(t,e,i){"use strict";i.d(e,{e:()=>h});var r=i(5173),s=i(9673),n=i(4546),a=i(6082),o=i(2732);let l=(t,e)=>{let i=2*Math.PI,r=(0,n.iH)(e),s=(0,n.CE)(e);return t<r?t+=Math.ceil((r-t)/i)*i:t>s&&(t-=Math.ceil((t-s)/i)*i),t},h=(t,e)=>{if(!t)return null;let i=(0,s.dd)(t,t=>"angle"===t.getOrient(),e),n=(0,s.dd)(t,t=>"radius"===t.getOrient(),e);if(!(i&&i.length||n&&n.length))return null;let h=[],u=t=>t.getDimensionField()[0],{x:d,y:c}=e;return i&&i.forEach(t=>{var e;let i=t.getScale();if(i&&(0,r.lK)(i.type)){let r=i.domain(),p=i.range(),g=t.getCenter(),m={x:d-t.getLayoutStartPoint().x-g.x,y:c-t.getLayoutStartPoint().y-g.y},f=(0,o.cX)({x:1,y:0},m);f=l(f,p);let v=(0,o.TE)(m),y=null===(e=n[0])||void 0===e?void 0:e.getScale(),_=null==y?void 0:y.range();if((f-(null==p?void 0:p[0]))*(f-(null==p?void 0:p[1]))>0||(v-(null==_?void 0:_[0]))*(v-(null==_?void 0:_[1]))>0)return;let b=t.invert(f);if((0,a.Z)(b))return;let x=r.findIndex(t=>(null==t?void 0:t.toString())===b.toString());x<0&&(x=void 0);let S=(0,s.SH)(b,t,"polar",u);h.push({index:x,value:b,position:i.scale(b),axis:t,data:S})}}),n&&n.forEach(t=>{var e;let n=t.getScale(),l=null==n?void 0:n.range();if(n&&(0,r.lK)(n.type)){let r=t.getCenter(),p={x:d-t.getLayoutStartPoint().x-r.x,y:c-t.getLayoutStartPoint().y-r.y},g=(0,o.cX)({x:1,y:0},p);g<-Math.PI/2&&(g=2*Math.PI+g);let m=(0,o.TE)(p),f=null===(e=i[0])||void 0===e?void 0:e.getScale(),v=null==f?void 0:f.range();if((g-(null==v?void 0:v[0]))*(g-(null==v?void 0:v[1]))>0||(m-(null==l?void 0:l[0]))*(m-(null==l?void 0:l[1]))>0)return;let y=n.invert(m);if((0,a.Z)(y))return;let _=n.domain().findIndex(t=>(null==t?void 0:t.toString())===y.toString());_<0&&(_=void 0);let b=(0,s.SH)(y,t,"polar",u);h.push({index:_,value:y,position:n.scale(y),axis:t,data:b})}}),h.length?h:null}},4268:function(t,e,i){"use strict";i.d(e,{sp:()=>d,xA:()=>h});var r=i(8469),s=i(8350),n=i(2550),a=i(21),o=i(4380),l=i(1805);class h extends n.c{constructor(t,e){super(t,e),this.type=u.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=(t,e,i="normal",r,s)=>{var n;return s+(null!==(n=this.getAttribute("radiusOffset",e,i,r))&&void 0!==n?n:0)},this.computeCenter=(t,e,i="normal",r,n)=>(0,l.op)({x:0,y:0},this.getAttribute("centerOffset",e,i,r),e[s.yz])[t]+n,this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0,innerPadding:0,outerPadding:0})}}class u extends h{constructor(){super(...arguments),this.type=u.type}}u.type="arc";let d=()=>{(0,a.lA)(),(0,o.Eo)(),r.F.registerMark(u.type,u)}},3793:function(t,e,i){"use strict";i.d(e,{k:()=>l});var r=i(8469),s=i(5803),n=i(21),a=i(4380);class o extends s.W{constructor(){super(...arguments),this.type=o.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getIgnoreAttributes(){return[]}}o.type="area";let l=()=>{r.F.registerMark(o.type,o),(0,n.LG)(),(0,a.cU)()}},5803:function(t,e,i){"use strict";i.d(e,{W:()=>o});var r=i(5173),s=i(6082),n=i(9038),a=i(2550);class o extends a.c{setStyle(t,e="normal",i=0,a=this.stateStyle){if((0,s.Z)(t))return;void 0===a[e]&&(a[e]={});let o=this._getIgnoreAttributes(),l=["strokeWidth","lineWidth","lineDash","strokeDash","lineJoin","stroke","strokeOpacity","opacity","fill","fillOpacity","texture","texturePadding","textureSize","textureColor"],h=this.isUserLevel(i),u=!1;Object.keys(t).forEach(d=>{let c=t[d];if((0,s.Z)(c)||o.includes(d))return;h&&l.includes(d)&&((0,r.dx)(null==c?void 0:c.type)||(null==c?void 0:c.scale)||(0,n.Z)(c))&&(u=!0);let p=this._filterAttribute(d,c,e,i,h,a);this.setAttribute(d,p,e,i,a)}),u&&this.setMarkConfig({enableSegments:!0})}}},2550:function(t,e,i){"use strict";i.d(e,{c:()=>R});var r=i(4218),s=i(9921),n=i(8118);let a=["linear","radial","conical"],o={linear:{x0:0,y0:0,x1:1,y1:1},radial:{x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},conical:{x:.5,y:.5,startAngle:0,endAngle:2*Math.PI}};var l=i(9231),h=i(5173),u=i(4370),d=i(9801),c=i(7623),p=i(6082),g=i(2698),m=i(3685),f=i(6542),v=i(1966),y=i(1036),_=i(7636),b=i(4154),x=i(3550),S=i(0);class A extends S.O{getStateInfoList(){return this._stateInfoList}constructor(t,e){super(t),this._stateInfoList=[],this._mark=e}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(t){return this._stateInfoList.find(e=>e.stateValue===t)}addStateInfo(t){if(this.getStateInfo(t.stateValue))return;t.level=t.level||0;let e=!0;for(let i=0;i<this._stateInfoList.length;i++){let r=this._stateInfoList[i].level;if(r&&r>t.level){this._stateInfoList.splice(i,0,t),e=!1;break}}e&&this._stateInfoList.push(t)}_clearStateBeforeSet(t){t.datums=null,t.items=null,t.fields=null,t.filter=null}changeStateInfo(t){let e=this.getStateInfo(t.stateValue);if(e){if(void 0!==t.datums&&(this._clearStateBeforeSet(e),e.datums=t.datums,e.datumKeys=t.datumKeys),void 0!==t.items&&(this._clearStateBeforeSet(e),e.items=t.items),void 0!==t.fields){if(this._clearStateBeforeSet(e),null===t.fields)e.fields=t.fields;else for(let i in e.fields=e.fields||{},t.fields){let r=t.fields[i];e.fields[i]=e.fields[i]||{};let s=e.fields[i];(0,c.Z)(r.domain)&&(s.domain=r.domain),(0,c.Z)(r.type)&&(s.type=r.type)}}t.filter&&(this._clearStateBeforeSet(e),e.filter=t.filter)}else this.addStateInfo(t)}clearStateInfo(t){t.forEach(t=>{this.getStateInfo(t)&&this.changeStateInfo({stateValue:t,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}checkOneState(t,e,i,r){var s;r=(0,y.Z)(x.Ir)?r:!t.mark||(0,x.Ir)(t.mark.markType);let n=!1,a=!1;if((0,c.Z)(i.datums)&&i.datums.length>0)n=this.checkDatumState(i,e,r),a=!0;else if(i.items)n=null!==(s=this.checkItemsState(i,t))&&void 0!==s&&s,a=!0;else if(i.fields)n=this.checkFieldsState(i,e,t,r),a=!0;else if(!n&&i.filter){let r={mark:this._mark,renderNode:t,type:t.mark.markType};n=i.filter(e,r),a=!0}return a?n?"in":"out":"skip"}checkState(t,e){let i=t.getStates().filter(t=>(0,v.wC)(t)).map(t=>[t,10]),r=!t.mark||(0,x.Ir)(t.mark.markType);for(let s=0;s<this._stateInfoList.length;s++){let n=this._stateInfoList[s],a=this.checkOneState(t,e,n,r);"skip"!==a&&"in"===a&&i.push([n.stateValue,n.level])}return i.map(t=>t[0])}checkDatumState(t,e,i){let r=!1,s=i?e[0]:e;if((0,_.Z)(t.datums)){let e=t.datumKeys||Object.keys(t.datums[0]).filter(t=>!t.startsWith(m.Bq));r=t.datums.some(t=>i&&(0,_.Z)(null==t?void 0:t.items)?e.every(e=>{var i,r;return(null===(r=null===(i=null==t?void 0:t.items)||void 0===i?void 0:i[0])||void 0===r?void 0:r[e])===(null==s?void 0:s[e])}):e.every(e=>(null==t?void 0:t[e])===(null==s?void 0:s[e])))}else r=(0,b.Z)(t.datums)?(t.datumKeys||Object.keys(t.datums).filter(t=>!t.startsWith(m.Bq))).every(e=>{var r,n;return i?(null===(r=t.datums.items)||void 0===r?void 0:r[0][e])===s[e]:(null===(n=t.datums)||void 0===n?void 0:n[e])===s[e]}):e===t.datums;return r}checkItemsState(t,e){var i;return null===(i=t.items)||void 0===i?void 0:i.includes(e)}checkFieldsState(t,e,i,r){var s;let n=!0;for(let a in t.fields){let o=t.fields[a],l=o.type,u=o.domain,d=r?null===(s=e[0])||void 0===s?void 0:s[a]:e[a];if((0,h.z2)(l)&&u.length>1){if(this.checkLinearFieldState(u,a,e,i,r)){n=!1;break}n=!0}else{if(!u.some(t=>t===d)){n=!1;break}n=!0}}return n}checkLinearFieldState(t,e,i,r,s){var n;let a=s?null===(n=i[0])||void 0===n?void 0:n[e]:i[e];return a<t[0]||a>t[t.length-1]}updateLayoutState(t){return this._stateMap.markUpdateRank++,this.updateState({markUpdateRank:this._stateMap.markUpdateRank},t)}compileState(t,e){t.state({callback:(t,e)=>this.checkState(e,t)},e)}}var k=i(5208),w=i(3558);class C extends w.O{constructor(t){super(t),this._mark=t.mark}setCompiledProductId(t){this._compiledProductId=t}generateProductId(){let t=super.generateProductId();return(0,c.Z)(t)?t:`${m.Bq}_markData_${this._mark.id}`}_compileProduct(){var t;let e=null===(t=this._data)||void 0===t?void 0:t.latestData;(0,p.Z)(e)||(0,c.Z)(this.getProduct())||this._initProduct(e)}}var T=i(6031),E=i(4277),M=i(5719),B=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class D extends d.F{getMarkConfig(){return this._markConfig}setMarkConfig(t){Object.keys(t).forEach(e=>{this._markConfig[e]=t[e]})}getVisible(){return this._visible}setVisible(t){this._visible=t}getUserId(){return this._userId}setUserId(t){(0,c.Z)(t)&&(this._userId=t)}getDataView(){var t;return null===(t=this._data)||void 0===t?void 0:t.getDataView()}setDataView(t,e){(0,p.Z)(this._data)&&this.initMarkData(Object.assign(Object.assign({},this._option),{mark:this})),(0,c.Z)(e)&&this._data.setCompiledProductId(e),this._data.setDataView(t)}getData(){return this._data}setData(t){this._data=t}hasState(t){return t in this.state.getStateMap()}getState(t){return this.state.getStateMap()[t]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(t){this._animationConfig=t}setSkipBeforeLayouted(t){this._skipBeforeLayouted=t}getSkipBeforeLayouted(){return this._skipBeforeLayouted}getGroupKey(){return this._groupKey}setGroupKey(t){this._groupKey=t}setStateSortCallback(t){this._stateSort=t}constructor(t,e,i){super(t),this.grammarType=T._.mark,this.type=void 0,this.name="mark",this._markConfig={zIndex:f.Ai.Mark,morph:!1},this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._skipBeforeLayouted=!1,this.name=e,this.model=i,this.key=t.key,this.state=new A(Object.assign(Object.assign({},t),{stateKeyToSignalName:this.stateKeyToSignalName.bind(this)}),this),this._event=new E.j(i.getOption().eventDispatcher,i.getOption().mode)}setTransform(t){this._transform=t}initMarkData(t){this._data=new C(t)}stateKeyToSignalName(t){return`${m.Bq}_${this.type}_${this.id}_${t}`}getAttribute(t,e,i,r){}_compileProduct(t){let e=this.getProduct();if(!this.getVisible())return void((0,c.Z)(e)&&this.removeProduct());!(0,c.Z)(e)&&this.getCompiler().isInited&&(this._initProduct(null==t?void 0:t.group),(0,p.Z)(this._product)||(this.compileSignal(),this.compileData(),this.compileState(),this.compileEncode(),this.compileAnimation(),this.compileContext(null==t?void 0:t.context),this.compileTransform()))}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId();this._product=e.mark(this.type,null!=t?t:e.rootMark).id(i),this.name&&this._product&&this._product.name(this.name),this._compiledProductId=i}generateProductId(){return this._userId?`${this._userId}`:`${this.name}_${this.id}`}compileData(){if((0,p.Z)(this._data))return;this._data.compile();let t=this._data.getProduct();(0,c.Z)(this._product)&&(0,c.Z)(t)&&this._product.join(t,this.key,void 0,this.getGroupKey())}updateStaticEncode(){if(!this._product)return;let{enterStyles:t,updateStyles:e}=this._separateStyle();this._product.encodeState("group",t,!0),this._product.encode(e,!0)}_separateStyle(){let t=this.stateStyle,e=k.q.STATE_NORMAL,i=t[e],r=(B(t,["symbol"==typeof e?e:e+""]),this._option.noSeparateStyle?null:{}),s={};return Object.keys(i).forEach(t=>{this._unCompileChannel[t]||(this._option.noSeparateStyle||(0,v.hx)(t,i,this.getGroupKey())?s[t]={callback:this.compileCommonAttributeCallback(t,"normal"),dependency:[this.stateKeyToSignalName("markUpdateRank")]}:r[t]=this.compileCommonAttributeCallback(t,"normal"))}),{enterStyles:r,updateStyles:s}}compileEncode(){let t=this.stateStyle,e=k.q.STATE_NORMAL,i=(t[e],B(t,["symbol"==typeof e?e:e+""])),{enterStyles:r,updateStyles:s}=this._separateStyle();this._product.encode(s,!0),this._product.encodeState("group",r,!0),Object.keys(i).forEach(t=>{let e={};Object.keys(i[t]).forEach(i=>{this._unCompileChannel[i]||(e[i]={callback:this.compileCommonAttributeCallback(i,t),dependency:[this.stateKeyToSignalName("markUpdateRank")]})}),this._product.encodeState(t,e,!0)}),this._skipBeforeLayouted&&this._product.layout({skipBeforeLayouted:this._skipBeforeLayouted})}compileState(){this.state.compileState(this._product,this._stateSort)}compileAnimation(){var t,e,i,r;if(this._animationConfig){let s;if("component"===this.type)s=null===(t=this.model.animate)||void 0===t?void 0:t.getAnimationStateSignalName();else{let t=null===(i=(e=this.model).getRegion)||void 0===i?void 0:i.call(e);s=null===(r=null==t?void 0:t.animate)||void 0===r?void 0:r.getAnimationStateSignalName()}this._product.animation(this._animationConfig),this._product.animationState({callback:(t,e,i)=>{var r;return null===(r=i[s])||void 0===r?void 0:r.callback(t,e)},dependency:s}),this._animationConfig.normal&&(this._animationConfig.appear?this._event.on(g.ZK.ANIMATION_END,({event:t})=>{t.mark===this.getProduct()&&t.animationState===M.h.appear&&this.runAnimationByState(M.h.normal)}):this._event.on(g.ZK.AFTER_DO_RENDER,()=>{this.runAnimationByState(M.h.normal)}))}}compileContext(t){let e=Object.assign(Object.assign({},this._markConfig),{context:Object.assign({markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},t)});this._product.configure(e)}compileSignal(){this.state.compile()}_computeAttribute(t,e){return(t,e)=>{}}compileCommonAttributeCallback(t,e){let i=this._computeAttribute(t,e),r={mark:null,parent:null,element:null};return(t,e)=>(r.mark=e.mark,r.parent=e.mark.group,r.element=e,i(t,r))}compileTransform(){var t;(null===(t=this._transform)||void 0===t?void 0:t.length)&&this.getProduct().transform(this._transform)}_lookupGrammar(t){var e;return null===(e=this.getCompiler().getVGrammarView())||void 0===e?void 0:e.getMarkById(t)}updateState(t,e){return this.state.updateState(t,e)}updateLayoutState(t,e){return e&&this.getMarks().length>0&&this.getMarks().forEach(t=>t.state.updateLayoutState(!0)),this.state.updateLayoutState(t)}updateMarkState(t){if(!this._product)return;let e=this.state.getStateInfo(t);this._product.elements.forEach(i=>{"in"===this.state.checkOneState(i,i.getDatum(),e)?i.addState(t):i.removeState(t)})}getMarks(){return[]}runAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.runAnimationByState(t)}stopAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.stopAnimationByState(t)}pauseAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.pauseAnimationByState(t)}resumeAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.resumeAnimationByState(t)}getProductElements(){let t=this.getProduct();if(t)return t.elements}release(){super.release(),this.state.release()}}var O=i(1805),P=i(9038),I=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class R extends D{constructor(t,e){var i;super(e,t,e.model),this._extensionChannel={},this._computeExChannel={},this._attributeContext=e.attributeContext,null===(i=e.map)||void 0===i||i.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(t,e){t&&((0,c.Z)(t.id)&&(this._userId=t.id),(0,y.Z)(t.interactive)&&(this._markConfig.interactive=t.interactive),(0,c.Z)(t.zIndex)&&(this._markConfig.zIndex=t.zIndex),(0,y.Z)(t.visible)&&this.setVisible(t.visible),this._initSpecStyle(t,this.stateStyle,e))}_transformStyleValue(t,e){if(t.scale){let i=t.scale,r=i.range();return i.range(r.map(e)),t}return"function"==typeof t?(...i)=>e(t(...i)):e(t)}convertAngleToRadian(t){return this._transformStyleValue(t,O.M4)}isUserLevel(t){return[l.W.User_Mark,l.W.User_Series,l.W.User_Chart,l.W.User_SeriesStyle].includes(t)}setStyle(t,e="normal",i=0,r=this.stateStyle){if((0,p.Z)(t))return;void 0===r[e]&&(r[e]={});let s=this.isUserLevel(i);Object.keys(t).forEach(n=>{let a=t[n];(0,p.Z)(a)||(a=this._filterAttribute(n,a,e,i,s,r),this.setAttribute(n,a,e,i,r))})}getStyle(t,e="normal"){var i;return null===(i=this.stateStyle[e][t])||void 0===i?void 0:i.style}_filterAttribute(t,e,i,r,s,n=this.stateStyle){let a=this._styleConvert(e);if(s)switch(t){case"angle":a=this.convertAngleToRadian(a);break;case"innerPadding":case"outerPadding":a=this._transformStyleValue(a,t=>-t);break;case"curveType":a=this._transformStyleValue(a,t=>(0,x.Lk)(t,this._option.model.direction))}return a}setReferer(t,e,i,r=this.stateStyle){var s;if(t){if(e&&i){let n=null!==(s=r[i])&&void 0!==s?s:{[e]:{}};r[i][e]=Object.assign(Object.assign({},n[e]),{referer:t})}else Object.entries(r).forEach(([e,i])=>{Object.entries(i).forEach(([i,s])=>{r[e][i].referer=t})})}}setPostProcess(t,e,i="normal"){var r;(null===(r=this.stateStyle[i])||void 0===r?void 0:r[t])&&(this.stateStyle[i][t].postProcess=e)}getAttribute(t,e,i="normal",r){return this._computeAttribute(t,i)(e,r)}setAttribute(t,e,i="normal",s=0,n=this.stateStyle){var a;void 0===n[i]&&(n[i]={}),void 0===n[i][t]&&(n[i][t]={level:s,style:e,referer:void 0});let o=null===(a=n[i][t])||void 0===a?void 0:a.level;(0,c.Z)(o)&&o<=s&&(0,r.H)(n[i][t],{style:e,level:s}),"normal"!==i&&t in this._extensionChannel&&this._extensionChannel[t].forEach(t=>{void 0===n[i][t]&&(n[i][t]=n.normal[t])})}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(t){if(!t)return t;if((0,h.dx)(t.type)||t.scale){let e=(0,n.lD)(t,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(e)return{scale:e,field:t.field,changeDomain:t.changeDomain}}return t}_computeAttribute(t,e){var i;let r=null===(i=this.stateStyle[e])||void 0===i?void 0:i[t];r||(r=this.stateStyle.normal[t]);let s=this._computeStateAttribute(r,t,e),n=(0,P.Z)(null==r?void 0:r.postProcess),a=t in this._computeExChannel;if(n&&a){let i=this._computeExChannel[t];return(n,a)=>{let o=s(n,a);return o=r.postProcess(o,n,this._attributeContext,a,this.getDataView()),i(t,n,e,a,o)}}if(n)return(t,e)=>r.postProcess(s(t,e),t,this._attributeContext,e,this.getDataView());if(a){let i=this._computeExChannel[t];return(r,n)=>i(t,r,e,n,s(r,n))}return s}_computeStateAttribute(t,e,i){var r;return t?t.referer?t.referer._computeAttribute(e,i):t.style?"function"==typeof t.style?(e,i)=>t.style(e,this._attributeContext,i,this.getDataView()):a.includes(t.style.gradient)?this._computeGradientAttr(t.style):["outerBorder","innerBorder"].includes(e)?this._computeBorderAttr(t.style):(0,h.dx)(null===(r=t.style.scale)||void 0===r?void 0:r.type)?(e,i)=>{let r=e;return"series"===this.model.modelType&&this.model.getMarkData&&(r=this.model.getMarkData(e)),t.style.scale.scale(r[t.style.field])}:(e,i)=>t.style:(e,i)=>t.style:(t,e)=>{}}_initStyle(){let t=this._getDefaultStyle();this.setStyle(t,"normal",0)}_initSpecStyle(t,e,i){t.style&&this.setStyle(t.style,"normal",l.W.User_Mark,e);let r=t.state;r&&Object.keys(r).forEach(t=>{let i=r[t];if("style"in i){let r=i.style,s={stateValue:t};"level"in i&&(s.level=i.level),"filter"in i&&(s=(0,P.Z)(i.filter)?Object.assign({filter:i.filter},s):Object.assign(Object.assign({},i.filter),s)),this.state.addStateInfo(s),this.setStyle(r,t,l.W.User_Mark,e)}else this.setStyle(i,t,l.W.User_Mark,e)})}_computeGradientAttr(t){var e,i;let{gradient:r,scale:n,field:a}=t,l=I(t,["gradient","scale","field"]),h=n,d=a;if(!(n&&a||"series"!==this.model.modelType)){let{scale:t,field:e}=this.model.getColorAttribute();n||(h=t),d||(d=e)}let p=(0,u._t)((0,u.wW)(this.model.getColorScheme(),"series"===this.model.modelType?null===(i=(e=this.model).getSpec)||void 0===i?void 0:i.call(e):void 0),this.model.getDefaultColorDomain()),g=Object.assign(Object.assign({},o[r]),l);return(t,e)=>{let i={},n=this.getDataView();return Object.keys(g).forEach(r=>{let a=g[r];"stops"===r?i.stops=a.map(i=>{let{opacity:r,color:a,offset:o}=i,l=null!=a?a:null==h?void 0:h.scale(t[d]);return(0,P.Z)(a)&&(l=a(t,this._attributeContext,e,n)),(0,c.Z)(r)&&(l=s.Il.SetOpacity(l,r)),{offset:(0,P.Z)(o)?o(t,this._attributeContext,e,n):o,color:l||p[0]}}):(0,P.Z)(a)?i[r]=a(t,this._attributeContext,e,n):i[r]=a}),i.gradient=r,i}}_computeBorderAttr(t){let{scale:e,field:i}=t,r=I(t,["scale","field"]);return(t,s)=>{var n,o,l;let h={};if(Object.keys(r).forEach(e=>{let i=r[e];(0,P.Z)(i)?h[e]=i(t,this._attributeContext,s,this.getDataView()):h[e]=i}),"stroke"in h)a.includes(null===(l=r.stroke)||void 0===l?void 0:l.gradient)&&(h.stroke=this._computeGradientAttr(r.stroke)(t,s));else{let r=(0,u._t)((0,u.wW)(this.model.getColorScheme(),"series"===this.model.modelType?null===(o=(n=this.model).getSpec)||void 0===o?void 0:o.call(n):void 0),this.model.getDefaultColorDomain()),s=e,a=i;if(!(e&&i||"series"!==this.model.modelType)){let{scale:i,field:n}=this.model.getColorAttribute();e||(s=i),a||(a=n),h.stroke=(null==s?void 0:s.scale(t[a]))||r[0]}}return h}}}},8120:function(t,e,i){"use strict";i.d(e,{k:()=>o});var r=i(8469),s=i(2698),n=i(2550);class a extends n.c{constructor(t,e){super(t,e),this.type="component",this._componentType=e.componentType,this._mode=e.mode}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId();this._product=e.mark(s.Cm.component,null!=t?t:e.rootMark,{componentType:this._componentType,mode:this._mode}).id(i),this._compiledProductId=i}}a.type="component";let o=()=>{r.F.registerMark(a.type,a)}},903:function(t,e,i){"use strict";i.d(e,{B:()=>l});var r=i(8469),s=i(5205),n=i(2550),a=i(21);class o extends n.c{constructor(){super(...arguments),this.type=o.type,this._marks=[]}getMarks(){return this._marks}_getDefaultStyle(){return Object.assign({},super._getDefaultStyle())}isMarkExist(t){return void 0!==this._marks.find(e=>e.id===t.id)}addMark(t){return this.isMarkExist(t)?((0,s.ZK)("Mark already exists, add mark failed."),!1):(this._marks.push(t),!0)}removeMark(t){let e=this._marks.findIndex(e=>e.id===t.id||e.name===t.name);return -1===e?((0,s.ZK)("Mark does not exists, removeMark failed."),!1):(this._marks.splice(e,1),!0)}getMarkInType(t){return this._marks.filter(e=>e.type===t)}getMarkInId(t){return this._marks.find(e=>e.id===t)}getMarkInUserId(t){let e;if(this._marks.forEach(i=>{i.getUserId()===t&&(e=i)}),!e)for(let i=0;i<this._marks.length;i++){let r=this._marks[i];if("group"===r.type&&(e=r.getMarkInUserId(t)),e)break}return e}getMarkInName(t){return this._marks.filter(e=>e.name===t)}_compileProduct(t){super._compileProduct(t),this._product.configure({zIndex:this._markConfig.zIndex}),(null==t?void 0:t.ignoreChildren)||this.getMarks().forEach(t=>{t.getProduct()&&t.removeProduct(),t.compile({group:this._product})})}}o.type="group";let l=()=>{(0,a.to)(),r.F.registerMark(o.type,o)}},5466:function(t,e,i){"use strict";i.d(e,{BF:()=>R});var r=i(775),s=i(3679),n=i(903),a=i(8469),o=i(2550),l=i(21);class h extends o.c{constructor(){super(...arguments),this.type=h.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}}h.type="rule";let u=()=>{a.F.registerMark(h.type,h),(0,l.__)()};var d=i(5595),c=i(3793),p=i(6264),g=i(4380);class m extends o.c{constructor(){super(...arguments),this.type=m.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,length:3})}}m.type="rect3d";let f=()=>{a.F.registerMark(m.type,m),(0,l.lo)(),(0,g.Zm)()};class v extends o.c{constructor(){super(...arguments),this.type=v.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}v.type="path";let y=()=>{a.F.registerMark(v.type,v),(0,l.O6)()};var _=i(4268);class b extends _.xA{constructor(){super(...arguments),this.type=b.type,this._support3d=!0}}b.type="arc3d";let x=()=>{(0,g.Eo)(),(0,l.jd)(),a.F.registerMark(b.type,b)};var S=i(8120),A=i(4761),k=i(704);let w=()=>{A.F.registerGlyph("ripplePoint",{symbol:"symbol",ripple0:"symbol",ripple1:"symbol",ripple2:"symbol"}).registerFunctionEncoder((t,e,i,r)=>{var s;let n=Math.max(0,Math.min(t.ripple,1)),a=null!==(s=t.size)&&void 0!==s?s:i.getGraphicAttribute("size"),o=.5*a;return{ripple0:{size:a+o*n,fillOpacity:.75-.25*n},ripple1:{size:a+o*(1+n),fillOpacity:.5-.25*n},ripple2:{size:a+o*(2+n),fillOpacity:.25-.25*n}}}).registerDefaultEncoder(()=>({ripple0:{fillOpacity:.75},ripple1:{fillOpacity:.5},ripple2:{fillOpacity:.25}})),(0,k.c)(),(0,l.MM)(),(0,l.n7)()};class C extends o.c{constructor(){super(...arguments),this.type=C.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId();this._product=e.glyph("ripplePoint",null!=t?t:e.rootMark).id(i),this._compiledProductId=i}}C.type="ripple";let T=()=>{a.F.registerMark(C.type,C),w()};class E extends o.c{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class M extends E{constructor(){super(...arguments),this.type=M.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}M.type="polygon";let B=()=>{a.F.registerMark(M.type,M),(0,l.d6)(),(0,g.zJ)()};class D extends E{constructor(){super(...arguments),this.type=D.type}}D.type="pyramid3d";let O=()=>{a.F.registerMark(D.type,D),(0,l.vq)(),(0,g.zJ)()};class P extends o.c{constructor(){super(...arguments),this.type=P.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}P.type="image";let I=()=>{a.F.registerMark(P.type,P),(0,l.uS)()},R=()=>{(0,n.B)(),(0,r.i)(),(0,s.Ou)(),u(),(0,d.k)(),(0,c.k)(),(0,p.Y)(),y(),(0,_.sp)(),B(),I(),T(),(0,S.k)(),x(),f(),O()}},2965:function(t,e,i){"use strict";i.d(e,{a:()=>o});var r=i(21),s=i(8469),n=i(5595);class a extends n.L{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(t){this._rule=t}getTarget(){return this._target}setTarget(t){this._target=t,this._rule||this.setRule(t.type)}getComponent(){return this._component}setComponent(t){this._component=t}}a.type="text",a.constructorType="label";let o=()=>{s.F.registerMark(a.constructorType,a),(0,r.vi)()}},775:function(t,e,i){"use strict";i.d(e,{i:()=>h});var r=i(8469),s=i(3885),n=i(5803),a=i(21),o=i(4380);class l extends n.W{constructor(){super(...arguments),this.type=l.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var t,e;return(null===(t=this.model)||void 0===t?void 0:t.type)===s.A.radar&&"polar"===(null===(e=this.model)||void 0===e?void 0:e.coordinate)?[]:["fill","fillOpacity"]}}l.type="line";let h=()=>{r.F.registerMark(l.type,l),(0,a.cB)(),(0,o.cU)()}},564:function(t,e,i){"use strict";i.d(e,{D:()=>a});var r=i(6082),s=i(325),n=i(4546);class a{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(t,e){(0,r.Z)(t)||(this._children.push(t),this._markNameMap[t.name]=t,this._infoMap.set(t,(0,s.Z)({},a.defaultMarkInfo,e)))}removeMark(t){let e=this._children.findIndex(e=>e.name===t);e>=0&&(this._infoMap.delete(this._children[e]),delete this._markNameMap[t],this._children.splice(e,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(t){this._children.forEach(t)}includes(t,e){return this._children.includes(t,e)}get(t){return isNaN(Number(t))?this._markNameMap[t]:this._children[t]}getMarks(){return this._children.slice()}getMarksInType(t){let e=(0,n.IX)(t);return this._children.filter(t=>e.includes(t.type))}getMarkInId(t){return this._children.find(e=>e.id===t)}getMarkWithInfo(t){return this._children.find(e=>Object.keys(t).every(i=>t[i]===this._infoMap.get(e)[i]))}}a.defaultMarkInfo={}},6264:function(t,e,i){"use strict";i.d(e,{Y:()=>l});var r=i(8469),s=i(2550),n=i(21),a=i(4380);class o extends s.c{constructor(){super(...arguments),this.type=o.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}o.type="rect";let l=()=>{r.F.registerMark(o.type,o),(0,n.ML)(),(0,a.Zm)()}},3679:function(t,e,i){"use strict";i.d(e,{Ou:()=>l});var r=i(8469),s=i(2550),n=i(21);class a extends s.c{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}}class o extends a{constructor(){super(...arguments),this.type=o.type}}o.type="symbol";let l=()=>{r.F.registerMark(o.type,o),(0,n.n7)()}},5595:function(t,e,i){"use strict";i.d(e,{L:()=>a,k:()=>o});var r=i(8469),s=i(2550),n=i(21);class a extends s.c{getTextType(){return this._textType}constructor(t,e){super(t,e),this.type=a.type,this._textType="text"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}initStyleWithSpec(t,e){super.initStyleWithSpec(t,e),t.textType&&(this._textType=t.textType)}compileEncode(){super.compileEncode(),"rich"===this._textType&&this._product.encodeState("group",{textType:this._textType})}}a.type="text";let o=()=>{r.F.registerMark(a.type,a),(0,n.vi)(),(0,n.Xo)()}},3550:function(t,e,i){"use strict";i.d(e,{Ir:()=>s,Lk:()=>n,Xg:()=>a});let r=["line","area","trail"];function s(t){return r.includes(t)}function n(t,e){return"monotone"===t?"horizontal"===e?"monotoneY":"monotoneX":t}function a(t){return["arc3d","rect3d","pyramid3d"].includes(t)}},397:function(t,e,i){"use strict";i.d(e,{T:()=>n});var r=i(7636),s=i(4218);class n{constructor(t){this._option=t,this.type=t.type}_initTheme(t,e){return this._theme=this.getTheme(t,e),this._mergeThemeToSpec(t,e)}getTheme(t,e){}transformSpec(t,e,i){this._transformSpecBeforeMergingTheme(t,e,i);let r=this._initTheme(t,e);return this._transformSpecAfterMergingTheme(r.spec,e,i),r}_transformSpecBeforeMergingTheme(t,e,i){}_transformSpecAfterMergingTheme(t,e,i){}_mergeThemeToSpec(t,e){let i=this._theme;if(this._shouldMergeThemeToSpec()){let n=this._getDefaultSpecFromChart(e),a=t=>(0,s.H)({},i,n,t);return(0,r.Z)(t)?{spec:t.map(t=>a(t)),theme:i}:{spec:a(t),theme:i}}return{spec:t,theme:i}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(t){}}},4798:function(t,e,i){"use strict";i.d(e,{g:()=>c});var r=i(9013),s=i(4277),n=i(7623),a=i(8469),o=i(564),l=i(9567),h=i(3685),u=i(397),d=i(1071);class c extends l.H{getSpec(){return this._spec||{}}getSpecPath(){var t;return null===(t=this._option)||void 0===t?void 0:t.specPath}getSpecInfoPath(){var t,e,i;return null!==(e=null===(t=this._option)||void 0===t?void 0:t.specInfoPath)&&void 0!==e?e:null===(i=this._option)||void 0===i?void 0:i.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var t,e;return null!==(e=null===(t=this._marks)||void 0===t?void 0:t.getMarks())&&void 0!==e?e:[]}getMarkNameMap(){var t;return null===(t=this._marks)||void 0===t?void 0:t.getMarkNameMap()}getMarkSet(){return this._marks}getChart(){return this._option.getChart()}get _theme(){var t;return null===(t=this.getSpecInfo())||void 0===t?void 0:t.theme}constructor(t,e){var i;super(e),this.transformerConstructor=u.T,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new o.D,this._lastLayoutRect=null,this.id=(0,r.a)(),this.userId=t.id,this._spec=t,this.effect={},this.event=new s.j(e.eventDispatcher,e.mode),null===(i=e.map)||void 0===i||i.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(t){}afterInit(){}getVisible(){var t;return!1!==(null===(t=this._spec)||void 0===t?void 0:t.visible)}onLayoutStart(t,e,i){var r;null===(r=this._layout)||void 0===r||r.onLayoutStart(t,e,i)}onLayoutEnd(t){var e;null===(e=this._layout)||void 0===e||e.onLayoutEnd(t),this.getMarks().forEach(t=>t.updateLayoutState(!0,!0))}onEvaluateEnd(t){}onDataUpdate(){}beforeRelease(){}release(){var t;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(t=>t.release()),null===(t=this._data)||void 0===t||t.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(t){let e=this._compareSpec(t,this._spec);return this._spec=t,e}_compareSpec(t,e){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(t){t&&(this._spec=t),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var t;null===(t=this._layout)||void 0===t||t.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(t){return Object.assign({},t)}setMarkStyle(t,e,i,r){(0,n.Z)(t)&&(0,n.Z)(e)&&t.setStyle(this._convertMarkStyle(e),i,r)}initMarkStyleWithSpec(t,e,i){if(!(0,n.Z)(t)||!(0,n.Z)(e))return;let{style:r,state:s}=e,a=Object.assign({},e);r&&(a.style=this._convertMarkStyle(r)),s&&(a.state={},Object.keys(s).forEach(t=>{a.state[t]=this._convertMarkStyle(s[t])})),t.initStyleWithSpec(a,i)}stateKeyToSignalName(t,e){let i=`${h.Bq}_${this.modelType}_${this.type}_${this.id}_${t}`;return e&&(i+=`_${e}`),i}compileData(){var t;null===(t=this._data)||void 0===t||t.compile()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t})})}_createMark(t,e={},i){let{type:r,name:s}=t,n=a.F.createMark(r,s,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},e));return n&&(n.created(),i&&n.setMarkConfig(i)),n}_getDataIdKey(){}getColorScheme(){var t,e;return null===(e=(t=this._option).getTheme)||void 0===e?void 0:e.call(t).colorScheme}getSpecInfo(){var t,e,i;let r=null!==(i=null===(e=(t=this._option).getSpecInfo)||void 0===e?void 0:e.call(t))&&void 0!==i?i:{};return(0,d.$s)(r,this.getSpecInfoPath())}getSpecIndex(){let t=this.getSpecPath();if(!(null==t?void 0:t.length))return 0;let e=Number(t[t.length-1]);return isNaN(e)?0:e}}},881:function(t,e,i){"use strict";i.d(e,{r:()=>d});var r=i(9730),s=i(325),n=i(4798),a=i(6082),o=i(8378),l=i(1960),h=i(6542);class u{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(t){this._minWidth=t}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth=t}get minHeight(){return this._minHeight}set minHeight(t){this._minHeight=t}get maxHeight(){return this._maxHeight}set maxHeight(t){this._maxHeight=t}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(t){this._layoutOrient=t}get model(){return this._model}get type(){return this._model.type}constructor(t,e){var i;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:h.sd,height:h.sd},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=h.pM.Region,this._model=t,this._option=e,this.layoutLevel=e.layoutLevel,this.layoutType=e.layoutType,e.layoutOrient&&(this.layoutOrient=e.layoutOrient),this._spec=null===(i=null==t?void 0:t.getSpec)||void 0===i?void 0:i.call(t)}_setLayoutAttributeFromSpec(t,e){var i,r,s,n;if(this._spec&&!1!==this._spec.visible){let o=(0,l.Ek)(t.padding),u=(0,l.qY)(o,e,e);this.layoutPaddingLeft=u.left,this.layoutPaddingRight=u.right,this.layoutPaddingTop=u.top,this.layoutPaddingBottom=u.bottom,this._minHeight=(0,a.Z)(t.minHeight)?null!==(i=this._minHeight)&&void 0!==i?i:null:(0,l.Mv)(t.minHeight,e.height,e),this._maxHeight=(0,a.Z)(t.maxHeight)?null!==(r=this._maxHeight)&&void 0!==r?r:null:(0,l.Mv)(t.maxHeight,e.height,e),this._minWidth=(0,a.Z)(t.minWidth)?null!==(s=this._minWidth)&&void 0!==s?s:null:(0,l.Mv)(t.minWidth,e.width,e),this._maxWidth=(0,a.Z)(t.maxWidth)?null!==(n=this._maxWidth)&&void 0!==n?n:null:(0,l.Mv)(t.maxWidth,e.width,e),t.width&&this.setLayoutRect({width:(0,l.Mv)(t.width,e.width,e)},{width:h.wK}),t.height&&this.setLayoutRect({height:(0,l.Mv)(t.height,e.height,e)},{height:h.wK}),(0,a.Z)(t.offsetX)||(this.layoutOffsetX=(0,l.Mv)(t.offsetX,e.width,e)),(0,a.Z)(t.offsetY)||(this.layoutOffsetY=(0,l.Mv)(t.offsetY,e.height,e)),t.alignSelf&&(this.alignSelf=t.alignSelf)}}setAttrFromSpec(t,e){var i,r,s,n;this._spec=t,this.layoutType=null!==(i=t.layoutType)&&void 0!==i?i:this.layoutType,this.layoutLevel=null!==(r=t.layoutLevel)&&void 0!==r?r:this.layoutLevel,this.layoutOrient=null!==(s=t.orient)&&void 0!==s?s:this.layoutOrient,this._setLayoutAttributeFromSpec(t,e),this.layoutClip=null!==(n=t.clip)&&void 0!==n?n:this.layoutClip}onLayoutStart(t,e,i){this._setLayoutAttributeFromSpec(this._spec,e)}onLayoutEnd(t){}_getAbsoluteSpecValue(t){let e={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach(i=>{(0,a.Z)(this._spec[i])||(e[i]=(0,l.Mv)(this._spec[i],"top"===i||"bottom"===i?t.height:t.width,t))}),e}absoluteLayoutInRect(t){let{top:e,bottom:i,left:r,right:s}=this._getAbsoluteSpecValue(t),n={width:t.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:t.height-this.layoutPaddingTop-this.layoutPaddingBottom};(0,a.Z)(r)||(n.width-=r),(0,a.Z)(s)||(n.width-=s),(0,a.Z)(e)||(n.height-=e),(0,a.Z)(i)||(n.height-=i),this.setLayoutRect(n);let{width:o,height:l}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:o,height:l});let h={x:t.x,y:t.y};!0===this._spec.center?(h.x=t.x+.5*t.width-.5*o,h.y=t.y+.5*t.height-.5*l):((0,a.Z)(r)?(0,a.Z)(s)||(h.x=t.x+t.width-this.layoutPaddingRight-s-o):h.x=t.x+r+this.layoutPaddingLeft,(0,a.Z)(e)?(0,a.Z)(i)||(h.y=t.y+t.height-this.layoutPaddingBottom-i-l):h.y=t.y+e+this.layoutPaddingTop),this.setLayoutStartPosition(h)}setLayoutStartPosition(t){var e,i;this._option.transformLayoutPosition&&(t=this._option.transformLayoutPosition(t)),(0,o.Z)(t.x)&&(this._layoutStartPoint.x=t.x),(0,o.Z)(t.y)&&(this._layoutStartPoint.y=t.y),null===(i=(e=this._model).afterSetLayoutStartPoint)||void 0===i||i.call(e,this._layoutStartPoint)}setLayoutRect({width:t,height:e},i){var r,s,n,a;(0,o.Z)(t)&&(null!==(r=null==i?void 0:i.width)&&void 0!==r?r:h.sd)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=t,this._layoutRectLevelMap.width=null!==(s=null==i?void 0:i.width)&&void 0!==s?s:h.sd),(0,o.Z)(e)&&(null!==(n=null==i?void 0:i.height)&&void 0!==n?n:h.sd)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=e,this._layoutRectLevelMap.height=null!==(a=null==i?void 0:i.height)&&void 0!==a?a:h.sd),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect({width:t,height:e}){let i={width:t,height:e};return this._layoutRectLevelMap.width>h.sd&&(i.width=this._layoutRect.width),this._layoutRectLevelMap.height>h.sd&&(i.height=this._layoutRect.height),i}getOrientPosAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"x":"y"}getOrientSizeAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"width":"height"}changeBoundsBySetting(t){return this._layoutRectLevelMap.width>h.sd&&(t.x2=t.x1+this._layoutRect.width),this._layoutRectLevelMap.height>h.sd&&(t.y2=t.y1+this._layoutRect.height),t.x1-=this._layoutStartPoint.x,t.x2-=this._layoutStartPoint.x,t.y1-=this._layoutStartPoint.y,t.y2-=this._layoutStartPoint.y,t}setRectInSpec(t){let e=Object.assign({},t);return this._layoutRectLevelMap.width<h.wK?((0,a.Z)(this._minWidth)||(e.width=Math.max(e.width,this._minWidth)),(0,a.Z)(this._maxWidth)||(e.width=Math.min(e.width,this._maxWidth))):e.width=this._layoutRect.width,this._layoutRectLevelMap.height<h.wK?((0,a.Z)(this._minHeight)||(e.height=Math.max(e.height,this._minHeight)),(0,a.Z)(this._maxHeight)||(e.height=Math.min(e.height,this._maxHeight))):e.height=this._layoutRect.height,e}computeBoundsInRect(t){if(this._lastComputeRect=t,!("region-relative"!==this.layoutType&&"region-relative-overlap"!==this.layoutType||(this._layoutRectLevelMap.width!==h.wK||"left"!==this.layoutOrient&&"right"!==this.layoutOrient)&&(this._layoutRectLevelMap.height!==h.wK||"bottom"!==this.layoutOrient&&"top"!==this.layoutOrient)))return this._layoutRect;let e=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(t),t));this.changeBoundsBySetting(e),this.autoIndent&&e.x2-e.x1>0&&e.y2-e.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-e.x1),this._lastComputeOutBounds.x2=Math.ceil(e.x2-t.width),this._lastComputeOutBounds.y1=Math.ceil(-e.y1),this._lastComputeOutBounds.y2=Math.ceil(e.y2-t.height));let i=this.setRectInSpec((0,l.qt)(e,t));return this._option.transformLayoutRect&&(i=this._option.transformLayoutRect(i)),i}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}}class d extends n.g{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null}get layoutOrient(){return this._orient}set layoutOrient(t){this._orient=t,this._layout&&(this._layout.layoutOrient=t)}initLayout(){"none"!==this.layoutType&&(this._layout=new u(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition}),this._orient&&"radius"!==this._orient&&"angle"!==this._orient&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(t,e,i){this._isLayout=!0,super.onLayoutStart(t,e,i)}onLayoutEnd(t){super.onLayoutEnd(t),this.updateLayoutAttribute();let e=this.getLayoutRect();!this._forceLayoutTag&&(0,r.X)(this._lastLayoutRect,e)||(this._lastLayoutRect=Object.assign({},e)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(t){}_forceLayout(){var t;this._isLayout||(this._forceLayoutTag=!0,null===(t=this._option.globalInstance.getChart())||void 0===t||t.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(t){return this._layout?this._layout.setLayoutStartPosition(t):this._layoutStartPos=(0,s.Z)(this._layoutStartPos,t)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(t,e){return this._layout?this._layout.setLayoutRect(t):this._lastLayoutRect=(0,s.Z)(this._layoutRect,t)}getLastComputeOutBounds(){var t;return null===(t=this._layout)||void 0===t?void 0:t.getLastComputeOutBounds()}setAttrFromSpec(){var t,e,i,r,s;super.setAttrFromSpec(),this.layoutClip=null!==(t=this._spec.clip)&&void 0!==t?t:this.layoutClip,this.layoutZIndex=null!==(e=this._spec.zIndex)&&void 0!==e?e:this.layoutZIndex,this.layoutType=null!==(i=this._spec.layoutType)&&void 0!==i?i:this.layoutType,this._orient=null!==(r=this._spec.orient)&&void 0!==r?r:this._orient,this.layoutLevel=null!==(s=this._spec.layoutLevel)&&void 0!==s?s:this.layoutLevel}}},6883:function(t,e,i){"use strict";i.d(e,{I:()=>n});var r=i(9013),s=i(5205);class n{constructor(){this.id=(0,r.a)(),this._plugins=[]}add(t){if(!t||0===t.length)return null;let e=[];return t.forEach(t=>{this._plugins.find(e=>e.id===t.id)?(0,s.ZK)("不要重复添加相同的plugin"):(this._plugins.push(t),e.push(t),t.onAdd&&t.onAdd(this))}),e}load(t){let e=this.add(t);e&&e.length&&this.activate(t)}activate(t){t.length&&t.forEach(t=>{t.init&&t.init()})}get(t){return this._plugins.find(e=>e.id===t)}getAll(){return this._plugins.slice()}release(t){let e=this.get(t);e&&(e.release(this),this._plugins=this._plugins.filter(t=>t!==e))}releaseAll(){this._plugins.forEach(t=>{t.release(this)}),this._plugins=[]}clear(t){let e=this.get(t);e&&e.clear(this)}clearAll(){this._plugins.forEach(t=>{var e;null===(e=t.clear)||void 0===e||e.call(t,this)})}}},3073:function(t,e,i){"use strict";i.d(e,{v:()=>s});var r=i(9013);class s{constructor(t){this.id=(0,r.a)(),this.name=`${t}_${this.id}`}onAdd(t){this.service=t}release(){this.service=null}}},5014:function(t,e,i){"use strict";i.d(e,{v:()=>G});var r=i(3685);let s="vchart-tooltip",n=`${s}-container`,a=`${s}-title`,o=`${s}-content-box`,l={offsetX:10,offsetY:10},h="99999999999999";var u=i(7631),d=i(9904),c=i(1601);function p(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}let g=(t,e)=>t?(e||(e=t.getBoundingClientRect()),t.offsetWidth>0?e.width/t.offsetWidth:t.offsetHeight>0?e.height/t.offsetHeight:1):1,m=t=>(0,d.Z)(t)&&""!==(null==t?void 0:t.trim())||(0,c.Z)(t)?p(t):"";var f=i(6549),v=i(7623),y=i(9038),_=i(4154);let b=(t,e)=>{let i;if((0,v.Z)(t)){if((0,c.Z)(t))i=t;else if((0,y.Z)(t)){let r=t(e);(0,c.Z)(r)&&(i=r)}}return i},x={left:[-2,0],right:[2,0],top:[0,-2],lt:[-2,-2],tl:[-2,-2],rt:[2,-2],tr:[2,-2],bottom:[0,2],bl:[-2,2],lb:[-2,2],br:[2,2],rb:[2,2],inside:[0,0],center:[0,0],centerBottom:[0,1],centerTop:[0,-1],centerLeft:[-1,0],centerRight:[1,0]},S=(t,e,i=2)=>{var r,s;return null!==(s=null===(r=x[t])||void 0===r?void 0:r["x"===e?0:1])&&void 0!==s?s:i},A=(t,e)=>{var i;let r=new Map,s=new Map,{series:n,datum:a}=t,o="horizontal"===n.direction,l=(o?n.getYAxisHelper():n.getXAxisHelper()).getAxisId(),h=n.getChart().getComponentsByKey("axes").find(t=>t.id===l);if(!h)return;(o?s:r).set(h.getSpecIndex(),{datum:null===(i=n.getDatumPositionValues(a[0],n.getDimensionField()))||void 0===i?void 0:i[0],axis:h});let u={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:r,attributes:{visible:!!r.size,type:"rect"}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:s,attributes:{visible:!!s.size,type:"rect"}}};return(0,f.w)(u,n,e),u.xField.cacheInfo?(0,f.p)(u.xField):u.yField.cacheInfo?(0,f.p)(u.yField):void 0},k=t=>(0,_.Z)(t)&&((0,v.Z)(t.left)||(0,v.Z)(t.right)||(0,v.Z)(t.top)||(0,v.Z)(t.bottom)),w=t=>(0,_.Z)(t)&&((0,v.Z)(t.x)||(0,v.Z)(t.y));var C=i(8378),T=i(3073),E=i(6281);class M extends T.v{constructor(){super(...arguments),this._visible=!0,this._isReleased=!1,this.showTooltip=(t,e,i)=>{let{changePositionOnly:r}=i;return r?this.changeTooltipPosition(i,e):this.changeTooltip(!0,i,e)},this.changeTooltip=(t,e,i)=>this._isReleased?1:t?this.changeTooltipPosition(e,i):(this._updateTooltip(!1,e),0),this.changeTooltipPosition=(t,e)=>{var i,r,s,n,a;if(this._isReleased)return 1;let o=t.event,{tooltipSpec:l,activeTooltipSpec:h,changePositionOnly:u}=t;if(!h)return 1;let d=h.activeType;if(h.handler)return null!==(s=null===(r=(i=h.handler).showTooltip)||void 0===r?void 0:r.call(i,d,e,t))&&void 0!==s?s:0;let c=this._getActualTooltipPosition(h,t,this._getTooltipBoxSize(h,u));h.position=c;let p=null!==(n=h.updatePosition)&&void 0!==n?n:null===(a=l[d])||void 0===a?void 0:a.updatePosition;p&&(h.position=p(h.position,e,t));let g=!1!==(null==h?void 0:h.visible);return e&&"pointerout"!==o.type&&h.visible&&(h.title||h.content)||(g=!1),this._updateTooltip(g,Object.assign(Object.assign({},t),{changePositionOnly:u})),0},this._getActualTooltipPosition=(t,e,i)=>{var s,n,a,o,l,h,d,p,m;let{tooltipSpec:f}=e,x={x:1/0,y:1/0};if(!f)return x;let T=e.event,{activeType:M,data:B}=t,D="dimension"===M?null===(n=null===(s=B[0])||void 0===s?void 0:s.data)||void 0===n?void 0:n[0]:null==B?void 0:B[0],{offsetX:O,offsetY:P}=this._option,I=f[M],R=(0,E.sE)(null==I?void 0:I.position,B,e),L=null!==(a=(0,E.sE)(null==I?void 0:I.positionMode,B,e))&&void 0!==a?a:"mark"===M?"mark":"pointer",{width:F=0,height:j=0}=null!=i?i:{},Z="canvas"===f.renderMode,H=null===(o=null==e?void 0:e.chart)||void 0===o?void 0:o.getCanvasRect(),N=null!==(l=null==H?void 0:H.width)&&void 0!==l?l:r.rV,z=null!==(h=null==H?void 0:H.height)&&void 0!==h?h:r.b,V=!1,U={width:0,height:0},W,G={x:0,y:0},$={x:0,y:0},X=1,Y=1,K=(0,u.qe)(this._env);if(K&&!f.confine?(U.width=window.innerWidth,U.height=window.innerHeight):(U.width=N,U.height=z),K&&!Z){let t=this._getParentElement(f);$=null!==(p=null===(d=null==t?void 0:t.getBoundingClientRect)||void 0===d?void 0:d.call(t))&&void 0!==p?p:x;let e=null!==(m=this._compiler.getCanvas())&&void 0!==m?m:this._chartContainer;G={x:(W=null==e?void 0:e.getBoundingClientRect()).x-$.x,y:W.y-$.y},X=g(e,W),Y=g(t,$)}let q=Y/X,J={},Q={x:R,y:R},tt={x:["left","right"],y:["top","bottom"]},te=({orient:t,mode:i,offset:r},s)=>{var n;let a,o;let l=e.model,h=null==l?void 0:l.getLayoutStartPoint(),u=null!=r?r:"x"===s?O:P;if("mark"===i){V=!0;let t=e.item,i=null==t?void 0:t.getBounds();i&&h&&(a=("x"===s?i.x1:i.y1)+h[s],o=("x"===s?i.x2:i.y2)+h[s])}else if("crosshair"===i&&"cartesian"===(null===(n=null==D?void 0:D.series)||void 0===n?void 0:n.coordinate)&&D.datum&&D.datum.length){V=!0;let t=A(D,h);t&&(a=t.start[s],o=t.end[s])}else Q[s]=t;if(V){let e=tt[s][0],i="x"===s?F:j;switch(S(t,s)){case -2:J[e]=a-i*q-u;break;case 0:J[e]=(a+o)/2-i*q/2;break;case -1:J[e]=(a+o)/2-i*q-u;break;case 1:J[e]=(a+o)/2+u;break;case 2:J[e]=o+u}}},ti=["x","y"];if((0,_.Z)(R)){if(k(R)){let{left:t,right:e,top:i,bottom:r}=R;J.left=b(t,T),J.top=b(i,T),J.right=b(e,T),J.bottom=b(r,T)}else w(R)&&ti.forEach(t=>{let e=R[t];(0,c.Z)(e)||(0,y.Z)(e)?J[tt[t][0]]=b(e,T):te(e,t)})}else(0,v.Z)(R)&&(te({orient:R,mode:L},"x"),te({orient:R,mode:L},"y"));let tr={x:null,y:null};return ti.forEach(t=>{var e;let i="x"===t?F:j,r="x"===t?N:z,s="x"===t?O:P,n=S(Q[t],t);if((0,C.Z)(J[tt[t][0]]))tr[t]=J[tt[t][0]];else if((0,C.Z)(J[tt[t][1]]))tr[t]=r-i*q-J[tt[t][1]];else{let e="x"===t?T.canvasX:T.canvasY;tr[t]=n>0?e+s:0===n?e-i*q/2:e-i*q-s}tr[t]*=X,K&&(tr[t]+=G[t]),tr[t]/=Y;let a="x"===t?U.width:U.height,o=f.confine?-($[t]-(null!==(e=null==W?void 0:W[t])&&void 0!==e?e:0)/X)/Y:-$[t]/Y,l=a/Y+o-i;2!==n&&tr[t]<o?V?tr[t]=o:(tr[t]+=0===n?s+i/2:2*s+i,tr[t]>l&&(tr[t]=l)):-2!==n&&tr[t]>l&&(V?tr[t]=l:(tr[t]-=0===n?s+i/2:2*s+i,tr[t]<o&&(tr[t]=o)))}),tr}}get env(){return this._env}onAdd(t){super.onAdd(t);let e=t.component;this._component=e,this._chartOption=e.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=e.getCompiler(),this._initFromSpec()}hideTooltip(t){return this.changeTooltip(!1,t)}release(){var t,e,i;let r=null!==(t=this._component.getSpec())&&void 0!==t?t:{};r.handler?null===(i=(e=r.handler).release)||void 0===i||i.call(e):(this._removeTooltip(),this._isReleased=!0)}_getDefaultOption(){var t,e;let{offset:i}=this._component.getSpec();return i?{offsetX:null!==(t=i.x)&&void 0!==t?t:l.offsetX,offsetY:null!==(e=i.y)&&void 0!==e?e:l.offsetY}:l}_getParentElement(t){return t.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption()}reInit(){this._initFromSpec()}}M.specKey="tooltip";var B=i(7636),D=i(3215),O=i(1960);let P=(t,e)=>(0,v.Z)(t)?(0,B.Z)(t)?t.map(t=>`${t}px`).join(" "):`${t}px`:null!=e?e:"initial",I=(t={},e={})=>{var i,r;(0,v.Z)(t.fontFamily)&&(e.fontFamily=t.fontFamily);let s=null!==(i=t.fill)&&void 0!==i?i:t.fontColor;return(0,v.Z)(s)&&(e.color=s),(0,v.Z)(t.fontWeight)&&(e.fontWeight=t.fontWeight),(0,v.Z)(t.textAlign)&&(e.textAlign=t.textAlign),(0,v.Z)(t.fontSize)&&(e.fontSize=P(t.fontSize)),(0,v.Z)(t.maxWidth)&&(e.maxWidth=P(t.maxWidth)),t.multiLine||(0,v.Z)(t.maxWidth)&&!1!==t.multiLine?(e.whiteSpace="initial",e.wordBreak=null!==(r=t.wordBreak)&&void 0!==r?r:"break-word"):(e.wordBreak="normal",e.whiteSpace="nowrap"),e},R=(t={})=>{let{lineHeight:e}=t;return t.fontSize?(0,O.Mv)(e,t.fontSize):0},L=(t={})=>{var e,i,r,s;let{style:n={},enterable:a,transitionDuration:o}=t,{panel:l={},titleLabel:h,shape:u,keyLabel:d,valueLabel:c,spaceRow:p,align:g}=n,{panelStyle:m,panelPadding:f}=F(l),v={marginTop:"0px",marginBottom:"0px"};m.pointerEvents=a?"auto":"none",o&&(m.transitionDuration=o?`${o}ms`:"initial",m.transitionProperty=o?"transform":"initial",m.transitionTimingFunction=o?"ease-out":"initial"),(0,C.Z)(p)&&(v.marginBottom=`${p}px`);let y={width:P(null!==(e=null==u?void 0:u.size)&&void 0!==e?e:8)},_=I(h),b=I(d),x=I(c),S="right"===g?"marginLeft":"marginRight";"right"===g?(m.direction="rtl",_.textAlign="right",b.textAlign="right",x.textAlign="left"):(_.textAlign="left",b.textAlign="left",x.textAlign="right"),y[S]=P(null!==(i=u.spacing)&&void 0!==i?i:8),b[S]=P(null!==(r=d.spacing)&&void 0!==r?r:26),x[S]=P(null!==(s=c.spacing)&&void 0!==s?s:0);let A=Math.max(R(c),R(d));return v.lineHeight=A>0?`${A}px`:"20px",{panelPadding:f,row:v,panel:m,title:_,shape:y,key:b,value:x}},F=t=>{var e;let{backgroundColor:i,border:r,shadow:s,padding:n}=t,a={borderWidth:`${null!==(e=null==r?void 0:r.width)&&void 0!==e?e:0}px`},o=null;(null==r?void 0:r.color)&&(a.borderColor=r.color),i&&(a.backgroundColor=i),a.boxShadow=s?`${s.x}px ${s.y}px ${s.blur}px ${s.spread}px ${s.color}`:"initial";let{radius:l}=null!=r?r:{};return(0,v.Z)(l)&&(a.borderRadius=(0,C.Z)(l)?`${l}px`:`${l}`),n&&(o=(0,D.o)(n),a.padding=P(o)),{panelStyle:a,panelPadding:o}};function j(t,e){t&&t.style&&e&&Object.keys(e).forEach(i=>{t.style[i]=e[i]})}var Z=i(8469);let H=t=>{Z.F.registerComponentPlugin(t.type,t)};var N=i(4774),z=i(5196),V=i(7393),U=i(5165);class W extends M{getVisibility(){return!!this._rootDom&&"visible"===this._rootDom.style.visibility}setVisibility(t){t!==this.getVisibility()&&this._rootDom&&(this._rootDom.style.visibility=t?"visible":"hidden")}constructor(){super(W.type),this.type=N.a.dom,this._tooltipContainer=null==u.Eh?void 0:u.Eh.body}onAdd(t){super.onAdd(t),this._initStyle(),this.initEl()}initEl(){let t=this._component.getSpec().parentElement;if(u.Eh&&t&&t.children&&t.children.length){for(let e=0;e<t.children.length;e++)if(t.children[e].classList.contains(n)){this._container=t.children[e];break}this._container||(this._container=u.Eh.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=h,this._container.classList.add(n),t.appendChild(this._container))}}initRootDom(){var t,e,i;let r=this._component.getSpec(),s=document.createElement("div"),n=null!==(e=null===(t=this._chartOption)||void 0===t?void 0:t.getTheme())&&void 0!==e?e:{};j(s,Object.assign({left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:h,fontFamily:null!==(i=null==n?void 0:n.fontFamily)&&void 0!==i?i:U.r.fontFamily,fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh",visibility:"hidden"},this._domStyle.panel)),s.classList.add(r.className),s.setAttribute("vchart-tooltip-id",`${this.id}`),this._container.appendChild(s),this._rootDom=s}_getTooltipBoxSize(t,e){var i;this._rootDom||this.initRootDom(),e||this._updateDomStringByCol(t),this._updateDomStyle("height");let r=null===(i=this._rootDom)||void 0===i?void 0:i.getBoundingClientRect();return{width:null==r?void 0:r.width,height:null==r?void 0:r.height}}_removeTooltip(){this._rootDom&&this._rootDom.parentNode&&(this._rootDom.parentNode.removeChild(this._rootDom),this._rootDom=null),this._container=null}_updateTooltip(t,e){var i,r,s;if(t&&this._rootDom){let{tooltipSpec:n,activeTooltipSpec:a}=e;e.changePositionOnly||(this._tooltipActual=a);let o=this.getVisibility(),l=this._rootDom;if(l){let{x:t=0,y:h=0}=null!==(i=a.position)&&void 0!==i?i:{};if(n.updateElement){this._updatePosition(null!==(r=this._cacheCustomTooltipPosition)&&void 0!==r?r:{x:t,y:h}),n.updateElement(l,a,e);let i=this._getActualTooltipPosition(a,e,{width:l.offsetWidth,height:l.offsetHeight});this._updatePosition(i),this._cacheCustomTooltipPosition=i}else this._rootDom.style.transitionDuration=o?null!==(s=this._domStyle.panel.transitionDuration)&&void 0!==s?s:"initial":"0ms",this._updatePosition({x:t,y:h})}this.setVisibility(t)}else this.setVisibility(t),this._cacheCustomTooltipPosition=void 0}_initStyle(){let t=this._component.getSpec();this._domStyle=L(t)}_updateDomStringByCol(t){var e;let{title:i={},content:r}=t,n=r&&r.length,l=this._domStyle.row,h=[...this._rootDom.children],u=h.find(t=>t.className.includes(a));if(!u&&!1!==i.visible){u=document.createElement("h2");let t=document.createElement("span");u.appendChild(t),u.classList.add(a),this._rootDom.appendChild(u)}u&&!1!==i.visible?(j(u,Object.assign(Object.assign(Object.assign({},this._domStyle.title),n?l:{marginBottom:"0px"}),{marginTop:"0px"})),u.firstChild.innerHTML=`${null!==(e=i.value)&&void 0!==e?e:""}`):u&&!1===i.visible&&u.parentNode.removeChild(u);let c=h.find(t=>t.className.includes(o)),g=["shape","key","value"];if(!c&&n&&(c=document.createElement("div"),g.forEach(t=>{let e=document.createElement("div");e.classList.add(`${s}-column`),e.classList.add(`${s}-${t}-column`),e.setAttribute("data-col",t),c.appendChild(e)}),c.classList.add(o),this._rootDom.appendChild(c)),c&&n){let t=[...c.children];j(c,{whiteSpace:"nowrap"}),t.forEach((t,e)=>{let i=t.getAttribute("data-col");if(i&&g.includes(i)){let e="shape"===i&&r.every(t=>!t.hasShape||!t.shapeType);j(t,Object.assign(Object.assign({},this._domStyle[i]),{display:e?"none":"inline-block",verticalAlign:"top"}));let n=[...t.children];n.slice(r.length).forEach(t=>{t.parentNode.removeChild(t)}),r.forEach((e,a)=>{let o=n[a];o||((o=document.createElement("div")).classList.add(`${s}-${i}`),t.appendChild(o));let h=Object.assign({},l);a===r.length-1&&(h.marginBottom="0px"),h.display=!1===e.visible?"none":"block",h.height="initial","key"===i?(o.innerHTML=m(e.key),e.keyStyle&&I(e.keyStyle,h)):"value"===i?(o.innerHTML=m(e.value),e.valueStyle&&I(e.valueStyle,h)):"shape"===i&&(o.innerHTML=function(t,e){var i,r,s,n,a,o;let l,h;if(!t||!t.hasShape||!t.shapeType)return"";let u='style="display:inline-block;vertical-align:middle;"',{shapeType:c,shapeFill:g,shapeStroke:m,shapeHollow:f=!1}=t,v=null!==(i=t.shapeSize)&&void 0!==i?i:8,y=t.shapeLineWidth?p(t.shapeLineWidth)+"px":"0px",b="currentColor",x=()=>m?p(m):b,S=t=>new z.m({symbolType:t,size:v,fill:!0}),A=S(c),k=A.getParsedPath();if(!k.path&&k.pathStr&&(A=S(k.pathStr)),A.getParsedPath().path){let t=A.getParsedPath().path;h=t.toString(),l=t.bounds}else k.isSvg&&k.svgCache&&(h=k.svgCache.map(t=>t.path.toString()).join(),l=k.svgCache.reduce((t,e)=>t.union(e.path.bounds),new V.YZ));let w=`${l.x1} ${l.y1} ${l.width()} ${l.height()}`;if("0px"!==y){let[t,e,i,r]=w.split(" ").map(t=>Number(t)),s=Number(y.slice(0,-2));w=`${t-s/2} ${e-s/2} ${i+s} ${r+s}`}if(!g||(0,d.Z)(g)||f)return b=f?"none":g?p(g):"currentColor",`
    <svg ${u} width="${v}" height="${v}" viewBox="${w}">
      <path
        d="${h}"
        style="fill: ${b}; stroke: ${x()}; stroke-width: ${y}"
      >
      </path>
    </svg>`;if((0,_.Z)(g)){b="gradientColor"+(null!=e?e:"");let t="",i=(null!==(r=g.stops)&&void 0!==r?r:[]).map(t=>`<stop offset="${p(t.offset.toString())}" stop-color="${p(t.color)}"/>`).join("");return"radial"===g.gradient?t=`<radialGradient id="${b}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${i}
      </radialGradient>`:"linear"===g.gradient&&(t=`<linearGradient id="${b}" x1="${100*(null!==(s=g.x0)&&void 0!==s?s:0)}%" y1="${100*(null!==(n=g.y0)&&void 0!==n?n:0)}%" x2="${100*(null!==(a=g.x1)&&void 0!==a?a:0)}%" y2="${100*(null!==(o=g.y1)&&void 0!==o?o:0)}%">
      ${i}
      </linearGradient>`),`
    <svg ${u} width="${v}" height="${v}" viewBox="-0.5 -0.5 1 1">
      ${t}
      <path
        d="${h}"
        style="fill: url(#${b}); stroke: ${x()}; stroke-width: ${y}"
      >
      </path>
    </svg>`}return""}(e,`${this.id}_${a}`)),j(o,h)})}})}else c&&!n&&c.parentNode.removeChild(c)}_updateDomStyle(t="width"){var e,i,r,s;let n=this._rootDom,l=[...n.children].find(t=>t.className.includes(o));if(l){let o=this._component.getSpec(),h={};if((0,v.Z)(null===(e=null==o?void 0:o.style)||void 0===e?void 0:e.maxContentHeight)){let t=n.children[0],e=t&&t.className.includes(a)?t.getBoundingClientRect().height+(null!==(i=o.style.spaceRow)&&void 0!==i?i:0):0,r=this._chartOption.getChartViewRect(),s=(0,O.Mv)(o.style.maxContentHeight,Math.min(r.height,document.body.clientHeight)-e-(this._domStyle.panelPadding?this._domStyle.panelPadding[0]+this._domStyle.panelPadding[1]:0));s>0&&(h.maxHeight=`${s}px`,h.overflowY="auto",h.width=`calc(100% + ${this._domStyle.panelPadding?this._domStyle.panelPadding[1]+"px":"10px"})`,j(l,h))}let u=l.children,d=[];if(u){for(let e=0;e<u.length;e++){let i=null!==(r=u[e].children)&&void 0!==r?r:[];for(let e=0;e<i.length;e++){let r=i[e].getBoundingClientRect()[t];(void 0===d[e]||d[e]<r)&&(d[e]=r)}}for(let e=0;e<u.length;e++){let i=null!==(s=u[e].children)&&void 0!==s?s:[];for(let e=0;e<i.length;e++)i[e].style[t]=`${d[e]}px`}}}}_getParentElement(t){var e;return null!==(e=this._container)&&void 0!==e?e:super._getParentElement(t)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle(),this._rootDom&&j(this._rootDom,this._domStyle.panel),this.getVisibility()&&(this._updateDomStringByCol(this._tooltipActual),this._updateDomStyle("height"))}_updatePosition({x:t,y:e}){this._rootDom&&(this._rootDom.style.transform=`translate3d(${t}px, ${e}px, 0)`)}}W.type=N.a.dom;let G=()=>{H(W)}},7484:function(t,e,i){"use strict";i.d(e,{dz:()=>n});var r=i(5042),s=i(4380);let n=()=>{(0,r.dze)(),(0,s.sG)()}},2193:function(t,e,i){"use strict";i.d(e,{m:()=>n});var r=i(8028),s=i(4370);class n extends r.J{range(t){return t?(this._range=t,this._resetRange(),this):super.range()}domain(t){return t?(super.domain(t),this._resetRange(),this):super.domain()}_resetRange(){if(!(0,s.zE)(this._range))return void super.range(this._range);let t=(0,s._t)(this._range,this._domain);super.range(t)}}},8068:function(t,e,i){"use strict";i.d(e,{w:()=>I});var r=i(7636),s=i(3505),n=i(5287),a=i(9231),o=i(8118),l=i(3885),h=i(7773),u=i(208),d=i(341),c=i(775),p=i(3793),g=i(3679),m=i(1889),f=i(4546),v=i(7623);class y extends m.O{constructor(){super(...arguments),this._getSeriesStyle=(t,e,i)=>{var r,s,n,a;for(let i of(0,f.IX)(e)){let e=null===(r=this.series.getSeriesStyle(t))||void 0===r?void 0:r(i);if(!1!==e||"fill"!==i&&"stroke"!==i||(e="fill"===i?null===(n=null===(s=this.series.getSeriesStyle(t))||void 0===s?void 0:s("stroke"))||void 0===n?void 0:n[0]:null===(a=this.series.getSeriesStyle(t))||void 0===a?void 0:a("fill")),(0,v.Z)(e))return e}return i}}}var _=i(4331),b=i(5919);let x=Object.assign(Object.assign(Object.assign({},_.UI),b.j),{area:{name:"area",type:"area"}});var S=i(8469),A=i(4380);let k=()=>{(0,A.zC)(),(0,A.rt)(),(0,A.BV)()};var w=i(717),C=i(4822),T=i(4218);class E extends C.n{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){var e,i,r;let s=!1!==(null===(e=t.point)||void 0===e?void 0:e.visible)&&!1!==(null===(r=null===(i=t.point)||void 0===i?void 0:i.style)||void 0===r?void 0:r.visible);this._addMarkLabelSpec(t,t=>{let e="inside-middle"===t.position;return!s||e?"area":"point"}),this._addMarkLabelSpec(t,"area","areaLabel","initLineLabelMarkStyle",void 0,!0)}_transformSpecAfterMergingTheme(t,e,i){var r,s,n,a,o;super._transformSpecAfterMergingTheme(t,e,i);let{area:l={},line:h={},seriesMark:u}=t,d=!1!==l.visible&&!1!==(null===(r=l.style)||void 0===r?void 0:r.visible),c=!1!==h.visible&&!1!==(null===(s=h.style)||void 0===s?void 0:s.visible);l.support3d=!(!l.support3d&&!h.support3d),l.zIndex=(0,v.Z)(l.zIndex)||(0,v.Z)(h.zIndex)?Math.max(null!==(n=l.zIndex)&&void 0!==n?n:0,null!==(a=h.zIndex)&&void 0!==a?a:0):void 0,l.style&&delete l.style.stroke,l.state&&Object.keys(l.state).forEach(t=>{"style"in l.state[t]?delete l.state[t].style.stroke:delete l.state[t].stroke});let p=l,g=h;("line"===u||c&&!d)&&(p=h,g=l),l.style=(0,T.H)({},g.style,p.style),l.state=(0,T.H)({},g.state,p.state),!1===l.interactive&&(l.style.fillPickable=!1),!1===h.interactive&&(h.style.strokePickable=!1),l.interactive=!(!l.interactive&&null!==(o=h.interactive)&&void 0!==o&&!o),t.area=l,t.line=h}}var M=i(4498),B=i(1532),D=i(7501),O=i(5669);class P extends n.i{constructor(){super(...arguments),this.type=l.A.area,this.transformerConstructor=E,this._sortDataByAxis=!1}initMark(){var t;let e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=this._spec.area||{},r=null!==(t=this._spec.seriesMark)&&void 0!==t?t:"area",s=this._isAreaVisible()||this._isLineVisible();this._areaMark=this._createMark(P.mark.area,{groupKey:this._seriesField,isSeriesMark:s&&"point"!==r,stateSort:i.stateSort},Object.assign(Object.assign({},e),{morphElementKey:this.getDimensionField()[0],setCustomizedShape:i.customShape})),this.initSymbolMark(e,"point"===r)}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var t,e,i,r,s;let n=null!==(i=null===(e=null===(t=this.getSpec().area)||void 0===t?void 0:t.style)||void 0===e?void 0:e.curveType)&&void 0!==i?i:null===(s=null===(r=this.getSpec().line)||void 0===r?void 0:r.style)||void 0===s?void 0:s.curveType,l=n===d.l?"horizontal"===this._direction?"monotoneY":"monotoneX":n,h=this._areaMark;if(h){let t=this._isAreaVisible(),e=this._isLineVisible();t||e?h.setVisible(!0):h.setVisible(!1),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:t=>{var e,i;return(0,o.Ol)(this.dataToPositionX1(t),null===(i=null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale)||void 0===i?void 0:i.call(e,0))},y:this.dataToPositionY.bind(this),y1:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",a.W.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:this.dataToPositionX.bind(this),y1:t=>{var e,i;return(0,o.Ol)(this.dataToPositionY1(t),null===(i=null===(e=this._yAxisHelper)||void 0===e?void 0:e.getScale)||void 0===i?void 0:i.call(e,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",a.W.Series),this.setMarkStyle(h,{fill:!!t&&this.getColorAttribute(),stroke:!!e&&this.getColorAttribute()},"normal",a.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(h,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",a.W.Series),this.getStack()&&this.setMarkStyle(h,{zIndex:t=>-t[O.Uq]},"normal",a.W.Series),this.setMarkStyle(h,{curveType:l},"normal",a.W.Built_In),Object.keys(h.stateStyle).forEach(t=>{h.stateStyle[t].stroke&&h.setPostProcess("stroke",t=>[t,!1,!1,!1],t)})}}initAnimation(){var t,e,i,r;let s={direction:this.direction},n=null===(t=this._spec.animationAppear)||void 0===t?void 0:t.preset;if(this._lineMark&&this._lineMark.setAnimationConfig((0,u._8)(null===(e=S.F.getAnimationInKey("line"))||void 0===e?void 0:e(s,n),(0,u.hT)("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig((0,u._8)(null===(i=S.F.getAnimationInKey("area"))||void 0===i?void 0:i(s,n),(0,u.hT)("area",this._spec,this._markAttributeContext))),this._symbolMark){let t=(0,M.mh)(this);this._symbolMark.setAnimationConfig((0,u._8)(null===(r=S.F.getAnimationInKey("scaleInOut"))||void 0===r?void 0:r(),(0,u.hT)("point",this._spec,this._markAttributeContext),t))}}_isAreaVisible(){var t;let e=this._spec.area||{};return!1!==e.visible&&!1!==(null===(t=e.style)||void 0===t?void 0:t.visible)}_isLineVisible(){var t;let e=this._spec.line||{};return!1!==e.visible&&!1!==(null===(t=e.style)||void 0===t?void 0:t.visible)}initTooltip(){this._tooltipHelper=new y(this);let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._areaMark&&t.add(this._areaMark),this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){return e=>{var i,s,n,a,o;let l=null!==(i=this._spec.seriesMark)&&void 0!==i?i:"area",h=null!==(n=null===(s=this._seriesMark)||void 0===s?void 0:s.getAttribute(e,t))&&void 0!==n?n:void 0;return"fill"!==e||h&&"line"!==l||(e="stroke",h=null!==(o=null===(a=this._seriesMark)||void 0===a?void 0:a.getAttribute(e,t))&&void 0!==o?o:void 0),"stroke"===e&&(0,r.Z)(h)?h[0]:h}}}P.type=l.A.area,P.mark=x,P.transformerConstructor=E,(0,h.jB)(P,s.t);let I=()=>{(0,w.pK)(),(0,w.lK)(),(0,c.i)(),(0,p.k)(),(0,g.Ou)(),k(),(0,B.N)(),(0,D.E)(),S.F.registerSeries(P.type,P)}},3610:function(t,e,i){"use strict";i.d(e,{w:()=>s});var r=i(9540);class s extends r.G{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar")}}},3418:function(t,e,i){"use strict";i.d(e,{QG:()=>Z,QD:()=>H});var r=i(5173),s=i(5287),n=i(5669),a=i(9231),o=i(8118),l=i(9478),h=i(1960),u=i(8469);function d(t,e=!0){return(i,r,s)=>{let n="vertical"===t.direction?t.yField:t.xField,a=null==i?void 0:i[n];return"vertical"===t.direction?{overall:e?t.growFrom():e,orient:a>0?"negative":"positive"}:{overall:!!e&&t.growFrom(),orient:a>0?"positive":"negative"}}}let c=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthIn":"growHeightIn",options:d(t,e)}),p=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthOut":"growHeightOut",options:d(t,e)}),g={type:"fadeIn"},m={type:"growCenterIn"},f=()=>{u.F.registerAnimation("bar",(t,e)=>({appear:function(t,e){if(!1===e)return{};switch(e){case"fadeIn":return g;case"scaleIn":return m;default:return c(t)}}(t,e),enter:c(t,!1),exit:p(t,!1),disappear:p(t)}))};var v=i(208),y=i(3885),_=i(6264),b=i(6082),x=i(7623),S=i(9038),A=i(4546),k=i(6843);function w(t,e,i,r,s,n){let a=i.getSpec().barMinHeight,l=i[r.axisHelper].isInverse(),h=(0,o.Ol)(i[r.startMethod](t),s),u=(0,o.Ol)(i[r.endMethod](t),s);n&&(e=h);let d=Math.abs(h-u);d<a&&(d=a);let c=1;return u<h?c=-1:u===h&&(c=r.isVertical?l?1:-1:l?-1:1),u=e+c*d,t[r.start]=e,t[r.end]=u,u}var C=i(6358),T=i(7479),E=i(6338),M=i(3959),B=i(1766),D=i(717),O=i(4498),P=i(3610),I=i(7602),R=i(4331),L=i(5385),F=i(1532),j=i(7501);class Z extends s.i{constructor(){super(...arguments),this.type=y.A.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=P.w,this._bandPosition=0,this._getBarXStart=(t,e,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[R.DO]):this._spec.barMinHeight?this._calculateRectPosition(t,!1,i):(0,o.Ol)(this._dataToPosX(t),e,i),this._getBarXEnd=(t,e,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[R.V0]):(0,o.Ol)(this._dataToPosX1(t),e,i),this._getBarYStart=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[R.aS]):this._spec.barMinHeight?this._calculateRectPosition(t,!0):(0,o.Ol)(this._dataToPosY(t),e),this._getBarYEnd=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[R.Aj]):(0,o.Ol)(this._dataToPosY1(t),e),this._getBarBackgroundXStart=t=>{let e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundXEnd=t=>{let e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundYStart=t=>{let e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundYEnd=t=>{let e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var t;return null===(t=this._barBackgroundPositionXEncoder)||void 0===t?void 0:t.bind(this)},this._setBarBackgroundPositionXEncoder=t=>{this._barBackgroundPositionXEncoder=t.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var t;return null===(t=this._barBackgroundPositionYEncoder)||void 0===t?void 0:t.bind(this)},this._setBarBackgroundPositionYEncoder=t=>{this._barBackgroundPositionYEncoder=t.bind(this)}}initMark(){var t,e;this._initBarBackgroundMark(),this._barMark=this._createMark(Object.assign(Object.assign({},Z.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{groupKey:this._seriesField,isSeriesMark:!0,stateSort:null===(t=this._spec.bar)||void 0===t?void 0:t.stateSort},{progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold,morphElementKey:this.getDimensionField()[0],morph:(0,v.yx)(this._spec,this._barMarkName),setCustomizedShape:null===(e=this._spec.bar)||void 0===e?void 0:e.customShape})}_initBarBackgroundMark(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(Z.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId(),stateSort:this._spec.barBackground.stateSort},{setCustomizedShape:this._spec.barBackground.customShape,progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",a.W.Series)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();let{mark:t,group:e}=this._tooltipHelper.activeTriggerSet;this._barMark&&(t.add(this._barMark),e.add(this._barMark))}_statisticViewData(){var t,e;let i;super._statisticViewData();let r=null!==(t=this._spec.barBackground)&&void 0!==t?t:{};if(!r.visible)return;let s=this._getRelatedComponentSpecInfo("axes").some(t=>t.type===I.L.cartesianBandAxis);if((0,C.U)(this._option.dataSet,"addVChartProperty",M.E),s)(0,C.U)(this._option.dataSet,"dimensionItems",([t],{scaleDepth:e})=>{var i,r;let s=[{}],a=this.getDimensionField(),o=(0,b.Z)(e)?a.length:Math.min(a.length,e);for(let e=0;e<o;e++){let o=a[e],l=null===(i=t.latestData[o])||void 0===i?void 0:i.values;if(!(null==l?void 0:l.length))continue;let h=[],u=null!==(r=this._spec.dataKey)&&void 0!==r?r:n.XW;for(let t=0;t<l.length;t++)for(let e=0;e<s.length;e++)h.push(Object.assign(Object.assign({},s[e]),{[o]:l[t],[u]:l[t]}));s=h}return s}),i=new E.VO(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:(0,b.Z)(r.fieldLevel)?void 0:r.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:B.cJ.bind(this),call:B.CL}},!1),null===(e=this._viewDataStatistics)||void 0===e||e.target.addListener("change",i.reRunAllTransform);else{(0,C.U)(this._option.dataSet,"dimensionItems",([e])=>{let i=[],[r,s]=this.getDimensionContinuousField(),n={};return t.latestData.forEach(t=>{let e=`${t[r]}-${t[s]}`;n[e]||(n[e]={[r]:t[r],[s]:t[s]},i.push(n[e]))}),i});let t=this.getViewData();i=new E.VO(this._option.dataSet).parse([t],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:B.cJ.bind(this),call:B.CL}},!1),null==t||t.target.addListener("change",i.reRunAllTransform)}this._barBackgroundViewData=new T.z(this._option,i)}init(t){var e,i;super.init(t),"vertical"===this.direction?"band"===(null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():"band"===(null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){let t=this.getRegion();return this.getStack()&&t.getSeries().filter(t=>t.type===this.type&&t.getSpec().barMinHeight).length}_calculateStackRectPosition(t){let e,i,r,s,n;let a=this.getRegion();if(a._bar_series_position_calculated)return;a._bar_series_position_calculated=!0,t?(e=R.Aj,i=R.aS,r="_dataToPosY1",s="_dataToPosY",n="_yAxisHelper"):(e=R.V0,i=R.DO,r="_dataToPosX1",s="_dataToPosX",n="_xAxisHelper");let o=(0,l.oW)(a,!1,t=>t.type===this.type);for(let l in o)for(let h in o[l].nodes)!function t(e,i,r){var s,n;if(e.values.length>0){let t;if(e.sortDatums.length){let a=e.sortDatums;i&&(a=e.sortDatums.slice().reverse());for(let e=0;e<a.length;e++)t=w(a[e].datum,t,a[e].series,r,null===(n=(s=a[e].series[r.axisHelper]).getScale)||void 0===n?void 0:n.call(s,0),0===e)}else{let s=e.series;i&&(s=s.slice().reverse()),s.forEach(({s:e,values:s},n)=>{var a,o;let l=null===(o=(a=e[r.axisHelper]).getScale)||void 0===o?void 0:o.call(a,0);for(let a=0;a<s.length;a++)t=w(s[i?s.length-1-a:a],t,e,r,l,0===a&&0===n)})}}for(let s in e.nodes)t(e.nodes[s],i,r)}(o[l].nodes[h],a.getStackInverse(),{isVertical:t,start:e,end:i,startMethod:r,endMethod:s,axisHelper:n})}_calculateRectPosition(t,e,i){var r,s;let n,a,l;e?(n="_dataToPosY1",a="_dataToPosY",l="_yAxisHelper"):(n="_dataToPosX1",a="_dataToPosX",l="_xAxisHelper");let h=null===(s=(r=this[l]).getScale)||void 0===s?void 0:s.call(r,0),u=this[l].isInverse(),d=this._spec.barMinHeight,c=(0,o.Ol)(this[n](t),h,i),p=(0,o.Ol)(this[a](t),h,i),g=Math.abs(c-p);g<d&&(g=d);let m=1;return p<c?m=-1:p===c&&(m=e?u?1:-1:u?-1:1),c+m*g}_dataToPosX(t){return this.dataToPositionX(t)}_dataToPosX1(t){return this.dataToPositionX1(t)}_dataToPosY(t){return this.dataToPositionY(t)}_dataToPosY1(t){return this.dataToPositionY1(t)}initBandRectMarkStyle(){var t,e,i,r;let s=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),n=null===(r=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===r?void 0:r.call(i,0);"horizontal"===this.direction?this.setMarkStyle(this._barMark,{x:t=>this._getBarXStart(t,s),x1:t=>this._getBarXEnd(t,s),y:t=>this._getPosition(this.direction,t),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",a.W.Series):this.setMarkStyle(this._barMark,{y:t=>this._getBarYStart(t,n),y1:t=>this._getBarYEnd(t,n),x:t=>this._getPosition(this.direction,t),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",a.W.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var t,e,i,r;if(!this._spec.stackCornerRadius)return;let s=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),a=null===(r=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===r?void 0:r.call(i,0);this._barMark.setMarkConfig({clip:!0,clipPath:()=>{let t=[];return this._forEachStackGroup(e=>{let i=1/0,r=-1/0,o=!1,l=1/0,h=-1/0;e.values.forEach(t=>{let e=t[n.cQ],s=t[n.Uq],a=t[n.x0],u=t[n.fB];i=Math.min(i,e,s),r=Math.max(r,e,s),(0,x.Z)(a)&&(0,x.Z)(u)&&(o=!0,l=Math.min(l,a,u),h=Math.max(h,a,u))});let u=Object.assign(Object.assign(Object.assign({},e.values[0]),{[n.cQ]:i,[n.Uq]:r}),o?{[n.x0]:l,[n.fB]:h}:void 0),d="horizontal"===this.direction?{x:this._getBarXStart(u,s),x1:this._getBarXEnd(u,s),y:this._getPosition(this.direction,u),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(u,a),y1:this._getBarYEnd(u,a),x:this._getPosition(this.direction,u),width:this._getBarWidth(this._xAxisHelper)};t.push((0,L.f)(Object.assign(Object.assign({},d),{cornerRadius:(0,S.Z)(this._spec.stackCornerRadius)?this._spec.stackCornerRadius(d,u,this._markAttributeContext):this._spec.stackCornerRadius,fill:!0})))}),t}})}initLinearRectMarkStyle(){var t,e,i,r;let s=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),n=null===(r=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===r?void 0:r.call(i,0);if("horizontal"===this.direction){let t=(0,x.Z)(this._fieldY2)?{y:t=>(0,o.Ol)(this._dataToPosY(t),n,!0),y1:t=>(0,o.Ol)(this._dataToPosY1(t),n,!0)}:{y:t=>(0,o.Ol)(this._dataToPosY(t)-this._getBarWidth(this._yAxisHelper)/2,n,!0),height:t=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:t=>this._getBarXStart(t,s,!0),x1:t=>this._getBarXEnd(t,s,!0)},t),"normal",a.W.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(s),x1:()=>this._getBarBackgroundXEnd(s)},t),"normal",a.W.Series)}else{let t=(0,x.Z)(this._fieldX2)?{x:t=>(0,o.Ol)(this._dataToPosX(t),s,!0),x1:t=>(0,o.Ol)(this._dataToPosX1(t),s,!0)}:{x:t=>(0,o.Ol)(this._dataToPosX(t)-this._getBarWidth(this._xAxisHelper)/2,s,!0),width:t=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},t),{y:t=>this._getBarYStart(t,n),y1:t=>this._getBarYEnd(t,n)}),"normal",a.W.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},t),{y:()=>this._getBarBackgroundYStart(n),y1:()=>this._getBarBackgroundYEnd(n)}),"normal",a.W.Series)}}_initBandBarBackgroundMarkStyle(){var t,e,i,r,s;if(!this._barBackgroundMark)return;let n=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),o=null===(r=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===r?void 0:r.call(i,0),l=null!==(s=this._spec.barBackground)&&void 0!==s?s:{},h=(0,b.Z)(l.fieldLevel)?void 0:l.fieldLevel+1;"horizontal"===this.direction?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(n),x1:()=>this._getBarBackgroundXEnd(n),y:t=>this._getPosition(this.direction,t,h,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,h),width:()=>{},y1:()=>{}},"normal",a.W.Series):this.setMarkStyle(this._barBackgroundMark,{x:t=>this._getPosition(this.direction,t,h,"barBackground"),y:()=>this._getBarBackgroundYStart(o),y1:()=>this._getBarBackgroundYEnd(o),width:()=>this._getBarWidth(this._xAxisHelper,h),x1:()=>{},height:()=>{}},"normal",a.W.Series)}initAnimation(){var t,e;let i={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var t,e;return"horizontal"===this.direction?null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale(0).scale(0):null===(e=this._yAxisHelper)||void 0===e?void 0:e.getScale(0).scale(0)}},r=null===(t=this._spec.animationAppear)||void 0===t?void 0:t.preset,s=(0,O.mh)(this);this._barMark.setAnimationConfig((0,v._8)(null===(e=u.F.getAnimationInKey("bar"))||void 0===e?void 0:e(i,r),(0,v.hT)(this._barMarkName,this._spec,this._markAttributeContext),s))}_getBarWidth(t,e){var i,r;let s=this._groups?this._groups.fields.length:1,n=(0,b.Z)(e)?s:Math.min(s,e),a=null!==(r=null===(i=t.getBandwidth)||void 0===i?void 0:i.call(t,n-1))&&void 0!==r?r:6,o=(0,x.Z)(this._spec.barWidth)&&n===s,l=(0,x.Z)(this._spec.barMinWidth),u=(0,x.Z)(this._spec.barMaxWidth),d=a;return o&&(d=(0,h.uj)(this._spec.barWidth,a)),l&&(d=Math.max(d,(0,h.uj)(this._spec.barMinWidth,a))),u&&(d=Math.min(d,(0,h.uj)(this._spec.barMaxWidth,a))),d}_getPosition(t,e,i,s){var n,a,o,l,u;let d,c,p;"horizontal"===t?(d=this.getYAxisHelper(),c="height",p="barBackground"===s?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(d=this.getXAxisHelper(),c="width",p="barBackground"===s?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));let g=d.getScale(0),m=this._groups?this._groups.fields.length:1,f=(0,b.Z)(i)?m:Math.min(m,i),v=null!==(a=null===(n=d.getBandwidth)||void 0===n?void 0:n.call(d,f-1))&&void 0!==a?a:6,y=f===m?this._barMark.getAttribute(c,e):v;if(f>1&&(0,x.Z)(this._spec.barGapInGroup)){let t=this._groups.fields,i=(0,A.IX)(this._spec.barGapInGroup),r=0,s=0;for(let n=t.length-1;n>=1;n--){let a=t[n],c=null!==(l=null===(o=d.getScale(n))||void 0===o?void 0:o.domain())&&void 0!==l?l:[],p=c.length,g=(0,h.uj)(null!==(u=i[n-1])&&void 0!==u?u:(0,A.Z$)(i),v),m=c.indexOf(e[a]);n===t.length-1?(r+=p*y+(p-1)*g,s+=m*(y+g)):(s+=m*(r+g),r+=r+(p-1)*g)}return g.scale(e[t[0]])+d.getBandwidth(0)/2-r/2+s}let _=(0,r.z2)(g.type||"band");return p(e,f)+.5*(v-y)+(_?-v/2:0)}dataToBarBackgroundPositionX(t,e){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,e,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(t,e){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,e,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(t){super.onLayoutEnd(t),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}compile(){if(super.compile(),this._spec.sampling){let{width:t,height:e}=this._region.getLayoutRect(),i=[],r=this._fieldY,s=this._fieldX;i.push({type:"sampling",size:"horizontal"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?s[0]:r[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var t;super.compileData(),null===(t=this._barBackgroundViewData)||void 0===t||t.compile()}fillData(){var t,e;super.fillData(),null===(e=null===(t=this._barBackgroundViewData)||void 0===t?void 0:t.getDataView())||void 0===e||e.reRunAllTransform()}viewDataUpdate(t){var e,i,r;super.viewDataUpdate(t),null===(i=null===(e=this._barBackgroundViewData)||void 0===e?void 0:e.getDataView())||void 0===i||i.reRunAllTransform(),null===(r=this._barBackgroundViewData)||void 0===r||r.updateData()}release(){var t;super.release(),null===(t=this._barBackgroundViewData)||void 0===t||t.release(),this._barBackgroundViewData=null}}Z.type=y.A.bar,Z.mark=k.w,Z.transformerConstructor=P.w;let H=()=>{(0,D.pK)(),(0,_.Y)(),f(),(0,F.N)(),(0,j.E)(),u.F.registerSeries(Z.type,Z)}},6843:function(t,e,i){"use strict";i.d(e,{S:()=>n,w:()=>s});var r=i(4331);let s=Object.assign(Object.assign({},r.UI),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}}),n=Object.assign(Object.assign({},r.UI),{bar3d:{name:"bar3d",type:"rect3d"}})},9540:function(t,e,i){"use strict";i.d(e,{G:()=>f});var r=i(1036),s=i(6082),n=i(9038),a=i(4154),o=i(397),l=i(4546),h=i(3066),u=i(1130),d=i(7623),c=i(7636),p=i(4218),g=i(4281),m=i(8469);class f extends o.T{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(t){return this.markLabelSpec[t]}setLabelSpec(t,e){this.markLabelSpec[t]=(0,l.IX)(e)}addLabelSpec(t,e,i=!1){this.markLabelSpec[t]||(this.markLabelSpec[t]=[]),i?this.markLabelSpec[t].unshift(e):this.markLabelSpec[t].push(e)}getTheme(t,e){var i,r,s;let n=(0,g.V)(t),a=null===(i=this._option)||void 0===i?void 0:i.getTheme(),{markByName:o,mark:l}=a,d=this._option.type,c=m.F.getSeriesMarkMap(d)?(0,h.sj)((0,u.Z)(a,`series.${d}`),d,l,o):{},f=(0,u.Z)(a,`series.${d}_${n}`),v=(null!==(s=null!==(r=this.stack)&&void 0!==r?r:null==f?void 0:f.stack)&&void 0!==s?s:null==c?void 0:c.stack)?(0,u.Z)(a,`series.${d}_stack`):void 0;return(0,p.H)({},c,f,v)}transformSpec(t,e,i){this._transformStack(t);let r=super.transformSpec(t,e,i);return this._transformLabelSpec(r.spec),Object.assign(Object.assign({},r),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(t){}_transformStack(t){(0,r.Z)(t.stack)&&(this.stack=t.stack),(0,r.Z)(t.percent)&&(this.stack=t.percent||this.stack),(0,s.Z)(this.stack)&&this._supportStack&&t.seriesField&&(this.stack=!0)}_addMarkLabelSpec(t,e,i="label",r="initLabelMarkStyle",s=!0,a){t&&(0,l.IX)(t[i]).forEach(i=>{var o,l,h;if(i&&i.visible){let{animation:u=!0,animationUpdate:d=!0,animationEnter:c=!0,animationExit:p=!0}=i,{animationUpdate:g=!0,animationEnter:m=!0,animationExit:f=!0}=t,v=!!(null!==(h=null!==(l=null===(o=this._option)||void 0===o?void 0:o.animation)&&void 0!==l?l:t.animation)&&void 0!==h?h:i.animation)&&!!s;this.addLabelSpec((0,n.Z)(e)?e(i):e,Object.assign(Object.assign({},i),{animation:!!v&&u,animationUpdate:!!(v&&g&&d)&&g,animationEnter:!!(v&&m&&c)&&m,animationExit:!!(v&&m&&p)&&f,getStyleHandler:t=>{var e;return null===(e=t[r])||void 0===e?void 0:e.bind(t)}}),a)}})}_getDefaultSpecFromChart(t){var e;let i=null!==(e=super._getDefaultSpecFromChart(t))&&void 0!==e?e:{},{outerRadius:r,innerRadius:s,direction:n}=t;return(0,d.Z)(r)&&(i.outerRadius=r),(0,d.Z)(s)&&(i.innerRadius=s),(0,d.Z)(n)&&(i.direction=n),Object.keys(i).length>0?i:void 0}_mergeThemeToSpec(t,e){let i=this._theme;if(this._shouldMergeThemeToSpec()){let r=this._getDefaultSpecFromChart(e),s=t=>{let e=(0,p.H)({},i,r,t),s=i.label;return s&&(0,a.Z)(s)&&(0,c.Z)(e.label)&&(e.label=e.label.map(t=>(0,p.H)({},s,t))),e};return(0,c.Z)(t)?{spec:t.map(t=>s(t)),theme:i}:{spec:s(t),theme:i}}return{spec:t,theme:i}}}},1885:function(t,e,i){"use strict";i.d(e,{y:()=>V});var r=i(3722),s=i(5669),n=i(9231),a=i(3685),o=i(6338),l=i(4798),h=i(2990),u=i(9478),d=i(6948),c=i(4218),p=i(3959),g=i(6358),m=i(1889),f=i(4546),v=i(9038),y=i(6082);let _={min:t=>t.length?(0,f.iH)(t.map(t=>1*t)):0,max:t=>t.length?(0,f.CE)(t.map(t=>1*t)):0,"array-min":t=>t.length?(0,f.iH)(t.map(t=>1*t)):0,"array-max":t=>t.length?(0,f.CE)(t.map(t=>1*t)):0,values:t=>{let e={},i=[];for(let r of t)e[r]||(i.push(r),e[r]=1);return i}},b=(t,e)=>{var i,r;let s=e.fields;if((0,v.Z)(s)&&(s=s()),!(null==s?void 0:s.length)||!(null==t?void 0:t.length))return{};s=(0,u.kL)([],s);let n="parser"===e.target?"parserData":"latestData";return x(t[0][n]?t[0][n]:t||[],s,null===(r=(i=t[0]).getFields)||void 0===r?void 0:r.call(i))},x=(t,e,i)=>{let r={},s=[],n=[];return e.forEach(e=>{let a=e.key;r[a]={};let o=null==i?void 0:i[a],l=e.operations,h=l.some(t=>"min"===t||"max"===t||"allValid"===t),u=!0;s.length=0,t&&t.forEach(t=>{t&&s.push(t[a])});let c=s.length;if(h){n.length=0,s.forEach((t,e)=>{(0,d.hi)(t)&&n.push(t)});let t=s;s=n,n=t,u=s.length===c}else s=l.some(t=>"array-min"===t||"array-max"===t)?s.reduce((t,e)=>(e&&e.forEach(e=>{(0,d.hi)(e)&&t.push(e)}),t),[]):s.filter(t=>void 0!==t);e.filter&&(s=s.filter(e.filter)),l.forEach(t=>{if(e.customize)r[a][t]=e.customize;else{if(o&&o.lockStatisticsByDomain&&!(0,y.Z)(o.domain)){if("values"===t)return void(r[a][t]=o.domain.slice())}else if("allValid"===t)return;r[a][t]=_[t](s),"array-max"===t&&(r[a].max=r[a][t]),"array-min"===t&&(r[a].min=r[a][t])}}),h&&(r[a].allValid=u)}),r},S=(t,e)=>{let{config:i}=e;if(!i)return t;let{invalidType:r,checkField:s}=i();return"zero"!==r||s&&s.length&&t.forEach(t=>{s.forEach(e=>{(0,d.hi)(t[e])||(t[e]=0)})}),t};var A=i(4370),k=i(7479),w=i(1766),C=i(5208),T=i(7623),E=i(325),M=i(9904),B=i(7636),D=i(1036),O=i(4154),P=i(9730),I=i(8378),R=i(2193),L=i(4331),F=i(208),j=i(9540),Z=i(6962),H=i(7631),N=i(6542),z=i(3550);class V extends l.g{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var t;return null===(t=this._data)||void 0===t?void 0:t.getDataView()}getViewDataProductId(){var t;return null===(t=this._data)||void 0===t?void 0:t.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(t){(0,T.Z)(t)&&(this._seriesField=t)}getGroups(){return this._groups}getStack(){var t;return null===(t=this.getSpecInfo())||void 0===t?void 0:t.stack}getStackValue(){var t;return null!==(t=this._spec.stackValue)&&void 0!==t?t:`${a.Bq}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(t){var e;this._invalidType=t,null===(e=this.getViewData())||void 0===e||e.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(t,e){var i;super(t,e),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=j.G,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var t,e;return{width:null!==(t=this._layoutRect.width)&&void 0!==t?t:this._region.getLayoutRect().width,height:null!==(e=this._layoutRect.height)&&void 0!==e?e:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=N.Ai.SeriesGroup,this._invalidType="break",this._region=e.region,this._dataSet=e.dataSet,(null===(i=this._spec)||void 0===i?void 0:i.name)&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(r.$7.afterInitData,{model:this}),this.initRootMark(),this.initMark();let t=(0,F.sB)(this);this._initExtensionMark({hasAnimation:t}),this.initMarkStyle(),this.initMarkState(),t&&this.initAnimation(),this._option.disableTriggerEvent||this.initInteraction(),this.afterInitMark(),this.initEvent(),this.event.emit(r.$7.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return null===(i=this._option.globalScale.getScale(t))||void 0===i?void 0:i.scale(e)},seriesColor:t=>{var e;return(0,y.Z)(t)&&(t=this.getSeriesKeys()[0]),null===(e=this._option.globalScale.getScale("color"))||void 0===e?void 0:e.scale(t)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),(0,T.Z)(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var t,e;"zero"===this._invalidType&&(null===(t=this._rawData)||void 0===t?void 0:t.dataSet)&&((0,g.U)(this._rawData.dataSet,"invalidTravel",S),null===(e=this._rawData)||void 0===e||e.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var t,e,i;let r=null!==(t=this._spec.data)&&void 0!==t?t:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(r&&(this._rawData=(0,h.J3)(r,this._dataSet,this._option.sourceDataList)),null===(i=null===(e=this._rawData)||void 0===e?void 0:e.target)||void 0===i||i.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=(0,h.uj)(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));let t=(0,h.uj)(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new k.z(this._option,t),this.getStack()&&this._viewDataFilter.target.removeListener("change",t.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){let t=this.getGroupFields();t&&t.length&&(this._groups={fields:t})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(t,e){var i,r,s;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]||e&&((0,y.Z)(this._rawStatisticsCache[t].min)||(0,y.Z)(this._rawStatisticsCache[t].max))||!e&&(0,y.Z)(this._rawStatisticsCache[t].values)){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(null===(i=this._viewDataStatistics.latestData)||void 0===i?void 0:i[t]))this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t];else if(this._rawData){let i=null===(r=this._rawData.getFields())||void 0===r?void 0:r[t];if(i&&i.lockStatisticsByDomain&&i.domain)this._rawStatisticsCache[t]={},e?(this._rawStatisticsCache[t].min=(0,f.iH)(i.domain),this._rawStatisticsCache[t].max=(0,f.CE)(i.domain)):this._rawStatisticsCache[t].values=i.domain;else{let i=x(this._rawData.latestData,[{key:t,operations:e?["min","max"]:["values"]}])[t];this._rawStatisticsCache[t]=(0,E.Z)(null!==(s=this._rawStatisticsCache[t])&&void 0!==s?s:{},i)}}}return this._rawStatisticsCache[t]}_statisticViewData(){(0,g.U)(this._dataSet,"dimensionStatistics",b);let t=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new o.VO(this._dataSet,{name:t}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{let t=this.getStatisticFields();return this._seriesField&&(0,u.kL)(t,[{key:this._seriesField,operations:["values"]}]),t},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(t,e,i){(0,g.U)(this._dataSet,"dimensionStatistics",b);let r=new o.VO(this._dataSet,{name:t});return r.parse([e],{type:"dataview"}),r.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var t;let r=(0,u.kL)(this.getStatisticFields(),null!==(t=null==i?void 0:i(e.name))&&void 0!==t?t:[]);return this._seriesField&&(0,u.kL)(r,[{key:this._seriesField,operations:["values"]}]),r},target:"latest"}},!1),r}createdStackData(){let t=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new o.VO(this._dataSet,{name:t}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(t,e){return e}generateDefaultDataKey(t){var e;return(0,y.Z)(t)?(t,e,i)=>{if(!1===this._spec.animation){let i=this._noAnimationDataKey(t,e);if(void 0!==i)return i}let{keyMap:r}=i,s=this._getSeriesDataKey(t);return void 0===r.get(s)?(r.set(s,0),s):(r.set(s,r.get(s)+1),`${s}_${r.get(s)}`)}:(0,M.Z)(t)?e=>e[t]:(0,B.Z)(t)&&t.every(t=>(0,M.Z)(t))?e=>t.map(t=>e[t]).join("-"):(0,v.Z)(t)?(e,i)=>t(e,i):(null===(e=this._option)||void 0===e||e.onError(`invalid dataKey: ${t}`),(t,e)=>{})}_addDataIndexAndKey(){var t;(null===(t=this._rawData)||void 0===t?void 0:t.dataSet)&&((0,g.U)(this._rawData.dataSet,"addVChartProperty",p.E),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:w.cJ.bind(this),call:w.CL}},!1))}updateRawData(t){this._rawData&&this._rawData.updateRawData(t)}rawDataUpdate(t){var e;null===(e=this._rawDataStatistics)||void 0===e||e.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(r.$7.rawDataUpdate,{model:this})}viewDataFilterOver(t){this.event.emit(r.$7.viewDataFilterOver,{model:this})}viewDataUpdate(t){var e;this.event.emit(r.$7.viewDataUpdate,{model:this}),null===(e=this._data)||void 0===e||e.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(t){this.event.emit(r.$7.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(t,e){return!t||(0,y.Z)(e)?null:t[e]}getDatumPositionValues(t,e){return!t||(0,y.Z)(e)?[]:(0,M.Z)(e)?[t[e]]:e.map(e=>t[e])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var t,e,i;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:null===(e=(t=this._region).getGroupMark)||void 0===e?void 0:e.call(t),dataView:!1}),this._rootMark.setMarkConfig({zIndex:null!==(i=this._spec.zIndex)&&void 0!==i?i:this.layoutZIndex})}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(t){var e;if(!this._spec.extensionMark)return;let i=this.getMarksWithoutRoot();t.depend=i,null===(e=this._spec.extensionMark)||void 0===e||e.forEach((e,i)=>{this._createExtensionMark(e,null,this._getExtensionMarkNamePrefix(),i,t)})}_createExtensionMark(t,e,i,r,s){var n;let a=this._createMark({type:t.type,name:(0,T.Z)(t.name)?`${t.name}`:`${i}_${r}`},{skipBeforeLayouted:!0,markSpec:t,parent:e,dataView:!1,componentType:t.componentType,depend:s.depend,key:t.dataKey},{setCustomizedShape:null==t?void 0:t.customShape});if(a){if((0,T.Z)(t.id)&&a.setUserId(t.id),s.hasAnimation){let e=(0,F._8)({},(0,F.hT)(t.type,t,this._markAttributeContext));a.setAnimationConfig(e)}if("group"===t.type)i=`${i}_${r}`,null===(n=t.children)||void 0===n||n.forEach((t,e)=>{this._createExtensionMark(t,a,i,e,s)});else if(!(e||(0,y.Z)(t.dataId)&&(0,y.Z)(t.dataIndex))){let e=this._option.getSeriesData(t.dataId,t.dataIndex);e===this._rawData?a.setDataView(this.getViewData(),this.getViewDataProductId()):(a.setDataView(e),e.target.addListener("change",()=>{a.getData().updateData()}))}}}_updateExtensionMarkSpec(){var t;null===(t=this._spec.extensionMark)||void 0===t||t.forEach((t,e)=>{let i=this._marks.getMarkWithInfo({name:(0,T.Z)(t.name)?`${t.name}`:`${this._getExtensionMarkNamePrefix()}_${e}`});i&&(this.initMarkStyleWithSpec(i,t),i.updateStaticEncode(),i.updateLayoutState())})}getStackData(){var t;return null===(t=this._viewStackData)||void 0===t?void 0:t.latestData}_parseSelectorOfInteraction(t,e){if(!e||!e.length)return[];let i=[];return t.markIds?e.filter(e=>{t.markIds.includes(e.getProductId())&&i.push(`#${e.getProductId()}`)}):t.markNames?e.forEach(e=>{t.markNames.includes(e.name)&&i.push(`#${e.getProductId()}`)}):e.forEach(t=>{i.push(`#${t.getProductId()}`)}),i}_parseDefaultInteractionConfig(t){var e;if(!(null==t?void 0:t.length))return[];let i=(e=this._option.mode)===Z.i["desktop-browser"]||e===Z.i["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"pointertap"}}:(0,H.wx)(e)||(0,H.Oy)(e)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"tap"}}:null,r=Object.assign({},null==i?void 0:i.hover),s=Object.assign({},null==i?void 0:i.select),n=this._spec.hover;(0,D.Z)(n)?r.enable=n:(0,O.Z)(n)&&(r.enable=!0,r=(0,c.H)(r,n));let a=this._spec.select;(0,D.Z)(a)?s.enable=a:(0,O.Z)(a)&&(s.enable=!0,s=(0,c.H)(s,a));let o=[];if(r.enable){let e=this._parseSelectorOfInteraction(r,t);e.length&&o.push(this._defaultHoverConfig(e,r))}if(s.enable){let e=this._parseSelectorOfInteraction(s,t);e.length&&o.push(this._defaultSelectConfig(e,s))}return o}_defaultHoverConfig(t,e){return{seriesId:this.id,regionId:this._region.id,selector:t,type:"element-highlight",trigger:e.trigger,triggerOff:e.triggerOff,blurState:C.q.STATE_HOVER_REVERSE,highlightState:C.q.STATE_HOVER}}_defaultSelectConfig(t,e){let i="multiple"===e.mode,r=(0,T.Z)(e.triggerOff)?e.triggerOff:i?["empty"]:["empty",e.trigger];return{type:"element-select",seriesId:this.id,regionId:this._region.id,selector:t,trigger:e.trigger,triggerOff:r,reverseState:C.q.STATE_SELECTED_REVERSE,state:C.q.STATE_SELECTED,isMultiple:i}}_parseInteractionConfig(t){let e=this.getCompiler();if(!e)return;let{interactions:i}=this._spec,r=this._parseDefaultInteractionConfig(t);r&&r.length&&r.forEach(t=>{e.addInteraction(t)}),i&&i.length&&i.forEach(t=>{let i=this._parseSelectorOfInteraction(t,this.getMarks());i.length&&e.addInteraction(Object.assign(Object.assign({},t),{selector:i,seriesId:this.id,regionId:this._region.id}))})}initInteraction(){let t=this.getMarksWithoutRoot();this._parseInteractionConfig(t)}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var t;let e=this._spec.seriesStyle;if(!e||!e.length)return;let i=null!==(t=this._seriesField)&&void 0!==t?t:s.lb;this.getMarksWithoutRoot().forEach(t=>{let r={},a={},o={};e.forEach(e=>{var i;let s=null===(i=e[t.name])||void 0===i?void 0:i.style;s&&(r[e.name]=!0,o[e.name]=o[e.name]||{},Object.keys(s).forEach(t=>{a[t]=!0,o[e.name][t]=s[t]}))}),t.state.addStateInfo({stateValue:s.Ti,level:-1,filter:t=>Array.isArray(t)?0!==t.length&&!0===r[t[0][i]]:!0===r[t[i]]});let l={};Object.keys(a).forEach(e=>{l[e]=r=>{var s,n;let a;if(Array.isArray(r)){if(0===r.length)return;a=null===(s=o[r[0][i]])||void 0===s?void 0:s[e]}return a=null===(n=o[r[i]])||void 0===n?void 0:n[e],(0,T.Z)(a)?a:t.getAttribute(e,r)}}),this.setMarkStyle(t,l,s.Ti,n.W.User_SeriesStyle)})}afterInitMark(){this.event.emit(r.$7.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(t=>{var e,i;(null===(i=null===(e=t.stateStyle)||void 0===e?void 0:e.normal)||void 0===i?void 0:i.lineWidth)&&t.setAttribute("stroke",this.getColorAttribute(),"normal",n.W.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(t=>{var e;return!(null===(e=t.name)||void 0===e?void 0:e.includes("seriesGroup"))})}getMarksInType(t){return this._marks.getMarksInType(t)}getMarkInName(t){return this._marks.get(t)}getMarkInId(t){return this.getMarks().find(e=>e.id===t)}initEvent(){var t,e,i;null===(e=null===(t=this._data)||void 0===t?void 0:t.getDataView())||void 0===e||e.target.addListener("change",this.viewDataUpdate.bind(this)),null===(i=this._viewDataStatistics)||void 0===i||i.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent(),this.getCompiler().removeInteraction(this.id)}initTooltip(){this._tooltipHelper=new m.O(this)}_compareExtensionMarksSpec(t,e,i){t.length!==e.length||e.some((e,i)=>e.type!==t[i].type||e.id!==t[i].id||e.name!==t[i].name)?i.reMake=!0:e.some((e,i)=>e.visible!==t[i].visible)&&(i.reCompile=!0)}_compareLabelSpec(t,e,i){t.length!==e.length||e.some((e,i)=>e.labelLayout!==t[i].labelLayout||e.visible!==t[i].visible)?i.reMake=!0:!i.reCompile&&e.some((e,i)=>!(0,P.X)(e,t[i]))&&(i.reCompile=!0)}_compareSpec(t,e,i){let r=super._compareSpec(t,e),s=Object.keys(e||{}).sort(),n=Object.keys(t||{}).sort();if(!(0,P.X)(s,n))return r.reMake=!0,r;let a=Object.assign(Object.assign(Object.assign(Object.assign({},L.V2),L.yF),i),{extensionMark:!0,label:!0,totalLabel:!0});return this._compareExtensionMarksSpec((0,f.IX)(t.extensionMark),(0,f.IX)(e.extensionMark),r),r.reMake||this._compareLabelSpec((0,f.IX)(t.label),(0,f.IX)(e.label),r),r.reMake||this._compareLabelSpec((0,f.IX)(t.totalLabel),(0,f.IX)(e.totalLabel),r),r.reMake||(!r.reCompile&&this._marks.getMarks().some(i=>{var r,s;return a[i.name]=!0,(null===(r=e[i.name])||void 0===r?void 0:r.visible)!==(null===(s=t[i.name])||void 0===s?void 0:s.visible)})&&(r.reCompile=!0),!r.reCompile&&s.some(i=>L.yF[i]&&!(0,P.X)(t[i],e[i]))&&(r.reCompile=!0),s.some(i=>!a[i]&&!(0,P.X)(t[i],e[i]))&&(r.reMake=!0)),r}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof o.VO||(0,h.kk)(this._rawData,this._spec.data,!0)}reInit(t){super.reInit(t);let e=this.getMarksWithoutRoot();e.forEach(t=>{this._spec[t.name]&&this.initMarkStyleWithSpec(t,this._spec[t.name])}),this.initMarkStyle(),e.forEach(t=>{t.updateStaticEncode(),t.updateLayoutState(!0)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),(0,F.sB)(this)&&this.initAnimation()}onEvaluateEnd(t){this._data.updateData()}onRender(t){}release(){var t,e,i;super.release(),this._viewDataMap.clear();let r=null===(e=null===(t=this._rawData)||void 0===t?void 0:t.transformsArr)||void 0===e?void 0:e.findIndex(t=>"addVChartProperty"===t.type);r>=0&&this._rawData.transformsArr.splice(r,1),null===(i=this._data)||void 0===i||i.release(),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(t){(0,I.Z)(t.x)&&(this._layoutStartPoint.x=t.x),(0,I.Z)(t.y)&&(this._layoutStartPoint.y=t.y)}setLayoutRect({width:t,height:e},i){(0,I.Z)(t)&&(this._layoutRect.width=t),(0,I.Z)(e)&&(this._layoutRect.height=e)}getSeriesKeys(){var t,e;return this._seriesField?null!==(e=null===(t=this.getRawDataStatisticsByField(this._seriesField))||void 0===t?void 0:t.values)&&void 0!==e?e:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(t){return e=>{var i,r;return null!==(r=null===(i=this._seriesMark)||void 0===i?void 0:i.getAttribute(e,t))&&void 0!==r?r:void 0}}_getSeriesInfo(t,e){let i=this.getDefaultShapeType();return e.map(e=>({key:e,originalKey:e,style:this.getSeriesStyle({[t]:e}),shapeType:i}))}getSeriesInfoInField(t){var e,i;return this._getSeriesInfo(t,null!==(i=null===(e=this.getRawDataStatisticsByField(t))||void 0===e?void 0:e.values)&&void 0!==i?i:[])}getSeriesInfoList(){var t;return this._getSeriesInfo(null!==(t=this._seriesField)&&void 0!==t?t:s.lb,this.getSeriesKeys())}_getDefaultColorScale(){var t,e;let i=this.getDefaultColorDomain(),r=this._getDataScheme();return null===(e=(t=(new R.m).domain(i)).range)||void 0===e?void 0:e.call(t,r)}_getDataScheme(){return(0,A.wW)(this.getColorScheme(),this.type)}getDefaultColorDomain(){var t,e;return this._seriesField?null===(e=null===(t=this.getViewDataStatistics())||void 0===t?void 0:t.latestData[this._seriesField])||void 0===e?void 0:e.values:[]}getColorAttribute(){var t,e;return{scale:null!==(t=this._option.globalScale.getScale("color"))&&void 0!==t?t:this._getDefaultColorScale(),field:null!==(e=this._seriesField)&&void 0!==e?e:s.lb}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(t){}_createMark(t,e={},i={}){var r,s,n,a,o,l;let{key:h,groupKey:u,skipBeforeLayouted:d,themeSpec:p={},markSpec:g,dataView:m,dataProductId:v,parent:_,isSeriesMark:b,depend:x,stateSort:S,noSeparateStyle:A=!1}=e,k=super._createMark(t,{key:null!=h?h:this._getDataIdKey(),seriesId:this.id,attributeContext:this._markAttributeContext,componentType:e.componentType,noSeparateStyle:A});if((0,T.Z)(k)){let e=this.getSpec()||{};this._marks.addMark(k,{name:t.name}),b&&(this._seriesMark=k),(0,y.Z)(_)?null===(r=this._rootMark)||void 0===r||r.addMark(k):!1!==_&&_.addMark(k),(0,y.Z)(m)?(k.setDataView(this.getViewData(),this.getViewDataProductId()),k.setSkipBeforeLayouted(!0)):!1!==m&&k.setDataView(m,v),(0,D.Z)(d)&&k.setSkipBeforeLayouted(d),(0,T.Z)(x)&&k.setDepend(...(0,f.IX)(x)),(0,y.Z)(u)||k.setGroupKey(u),S&&k.setStateSortCallback(S);let h=Object.assign(Object.assign({},i),{morph:null!==(s=i.morph)&&void 0!==s&&s,support3d:(0,z.Xg)(t.type)||(null!==(n=i.support3d)&&void 0!==n?n:e.support3d||!!e.zField),morphKey:(null===(a=e.morph)||void 0===a?void 0:a.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`,morphElementKey:null!==(l=null===(o=e.morph)||void 0===o?void 0:o.morphElementKey)&&void 0!==l?l:i.morphElementKey});k.setMarkConfig(h),this.initMarkStyleWithSpec(k,(0,c.H)({},p,g||e[k.name]))}return k}_getDataIdKey(){var t;return null!==(t=super._getDataIdKey())&&void 0!==t?t:s.XW}_getSeriesDataKey(t){let e="";if(!t)return e;let i=this.getDimensionField();e=i.map(e=>t[e]).join("_");let r=this.getSeriesField();return r&&!i.includes(r)&&(e+=`_${t[r]}`),e}addViewDataFilter(t){var e,i;null===(i=null!==(e=this._viewDataFilter)&&void 0!==e?e:this.getViewData())||void 0===i||i.transform(t,!1)}reFilterViewData(){var t,e;null===(e=null!==(t=this._viewDataFilter)&&void 0!==t?t:this.getViewData())||void 0===e||e.reRunAllTransform()}reTransformViewData(){var t,e;null===(e=null===(t=this._data)||void 0===t?void 0:t.getDataView())||void 0===e||e.reRunAllTransform()}fillData(){var t;null===(t=this.getRawData())||void 0===t||t.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(t){var e;return t!==s.Uq&&t!==s.fB&&t!==s.cQ&&t!==s.x0||(t=this.getStackValueField()),null!==(e=(0,u.tW)(this.getRawData(),t))&&void 0!==e?e:t}_getInvalidConnectType(){return"zero"===this._invalidType?"zero":"link"===this._invalidType?"connect":"none"}_getInvalidDefined(t){let e=this.getInvalidCheckFields();return!e.length||e.every(e=>(0,d.hi)(t[e]))}_getRelatedComponentSpecInfo(t){var e;let i=this.getSpecIndex(),r=null===(e=this._option.getSpecInfo().component[t])||void 0===e?void 0:e.filter(t=>t.seriesIndexes.includes(i));return null!=r?r:[]}_forEachStackGroup(t,e){var i,r;(e=null!=e?e:null===(i=this._viewStackData)||void 0===i?void 0:i.latestData)&&((null===(r=e.values)||void 0===r?void 0:r.length)?t(e):e.nodes&&Object.values(e.nodes).forEach(e=>{this._forEachStackGroup(t,e)}))}isDatumInViewData(t){if(!t)return!1;let e=this.getViewData().latestData;return!!e&&(!!e.includes(t)||e.some(e=>Object.keys(t).every(i=>t[i]===e[i])))}getSeriesFieldValue(t,e){var i;return t[null!==(i=null!=e?e:this.getSeriesField())&&void 0!==i?i:s.lb]}}V.mark=L.UI,V.transformerConstructor=j.G},4331:function(t,e,i){"use strict";i.d(e,{Aj:()=>l,DO:()=>n,UI:()=>s,V0:()=>a,V2:()=>h,aS:()=>o,yF:()=>u});var r=i(3685);let s={label:{name:"label",type:"text"}},n=`${r.Bq}_rect_x`,a=`${r.Bq}_rect_x1`,o=`${r.Bq}_rect_y`,l=`${r.Bq}_rect_y1`,h={data:!0},u={invalidType:!0,animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0}},7479:function(t,e,i){"use strict";i.d(e,{z:()=>a});var r=i(6082),s=i(7623),n=i(3558);class a extends n.O{_compileProduct(){var t;let e=null===(t=this._data)||void 0===t?void 0:t.latestData;(0,r.Z)(e)||(0,s.Z)(this.getProduct())||this._initProduct([])}generateProductId(){var t;return null===(t=this._data)||void 0===t?void 0:t.name}}},1889:function(t,e,i){"use strict";i.d(e,{O:()=>h});var r=i(7623),s=i(4546),n=i(9038),a=i(897),o=i(6281),l=i(6082);class h{constructor(t){this.activeTriggerSet={mark:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set},this._getSeriesCacheInfo=()=>{var t,e,i;let{series:n}=this,a=n.getSeriesField();return{seriesFields:(0,r.Z)(a)?(0,s.IX)(a):null!==(t=n.getSeriesKeys())&&void 0!==t?t:[],dimensionFields:null!==(e=n.getDimensionField())&&void 0!==e?e:[],measureFields:null!==(i=n.getMeasureField())&&void 0!==i?i:[],type:n.type}},this._getDimensionData=t=>{let{dimensionFields:e}=this._seriesCacheInfo;return e[0]&&(null==t?void 0:t[e[0]])},this._getMeasureData=t=>{let{measureFields:e}=this._seriesCacheInfo;return e[0]&&(null==t?void 0:t[e[0]])},this._getSeriesFieldData=t=>{let{dimensionFields:e,seriesFields:i}=this._seriesCacheInfo;if((0,r.Z)(i[0])&&(null==t?void 0:t[i[0]]))return null==t?void 0:t[i[0]];let s=e[e.length-1];return e.length>1&&(0===i.length||this.series.getSeriesKeys().length),null==t?void 0:t[s]},this._getSeriesStyle=(t,e,i)=>{var n;for(let i of(0,s.IX)(e)){let e=null===(n=this.series.getSeriesStyle(t))||void 0===n?void 0:n(i);if((0,r.Z)(e))return e}return i},this.markTooltipKeyCallback=(t,e)=>this._getSeriesFieldData(t),this.markTooltipValueCallback=(t,e)=>this._getMeasureData(t),this.shapeTypeCallback=(t,e)=>{var i;return null!==(i=this._getSeriesStyle(t,"shape",null))&&void 0!==i?i:this._getSeriesStyle(t,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(t,e)=>this._getSeriesStyle(t,["fill","stroke"]),this.shapeStrokeCallback=(t,e)=>this._getSeriesStyle(t,["stroke","fill"]),this.dimensionTooltipTitleCallback=(t,e)=>this._getDimensionData(t),this.groupTooltipTitleCallback=(t,e)=>this._getSeriesFieldData(t),this.groupTooltipKeyCallback=(t,e)=>{let{seriesFields:i}=this._seriesCacheInfo,r=this._seriesCacheInfo.dimensionFields;return i[0]&&(r=r.filter(t=>t!==i[0])),r.map(e=>null==t?void 0:t[e]).join("-")},this.getHasShape=t=>!!t,this.series=t,this.updateTooltipSpec()}updateTooltipSpec(){var t;let e=null===(t=this.series.getSpec())||void 0===t?void 0:t.tooltip;this.spec=e,this._seriesCacheInfo=this._getSeriesCacheInfo()}getShapeAttrs(t,e,i){var r,s,n,a,o,l,h,u,d,c,p,g;let m=e?"content":"title",f=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},null===(r=null==i?void 0:i.style)||void 0===r?void 0:r.shape),null==i?void 0:i[t]),null===(s=null==i?void 0:i[t])||void 0===s?void 0:s[m]),null===(n=this.spec)||void 0===n?void 0:n[t]),null===(o=null===(a=this.spec)||void 0===a?void 0:a[t])||void 0===o?void 0:o[m]);return{shapeType:null!==(l=f.shapeType)&&void 0!==l?l:this.shapeTypeCallback,shapeFill:null!==(u=null!==(h=f.shapeFill)&&void 0!==h?h:f.shapeColor)&&void 0!==u?u:this.shapeColorCallback,shapeStroke:null!==(d=f.shapeStroke)&&void 0!==d?d:this.shapeStrokeCallback,shapeHollow:null!==(c=f.shapeHollow)&&void 0!==c&&c,shapeLineWidth:f.shapeLineWidth,shapeSize:null!==(p=f.shapeSize)&&void 0!==p?p:f.size,hasShape:null!==(g=f.hasShape)&&void 0!==g?g:this.getHasShape(e)}}enableByType(t){return!0}getDefaultContentList(t){return[this.getDefaultContentPattern(t)]}getContentList(t,e,i,r,s,n){var o;return(0,a.nK)(null!==(o=null==e?void 0:e.content)&&void 0!==o?o:this.getDefaultContentList(t),this.getDefaultContentPattern(t),i,r,s,n)}getTitleResult(t,e,i,r,s){let h=(0,n.Z)(e)?e(r,s):e;if(h?(0,l.Z)(h.value)&&(h=Object.assign(Object.assign({},this.getDefaultTitlePattern(t)),h)):h=this.getDefaultTitlePattern(t),h&&!1!==h.visible){let t=(0,o.lg)(r),e={visible:(0,o.Xb)(h.visible,t,s),value:(0,a.u6)((0,o.Xb)(h.value,t,s,h.valueFormatter),h.valueTimeFormat,h.valueTimeFormatMode),valueStyle:(0,o.Xb)(h.valueStyle,t,s),hasShape:h.hasShape};return Object.keys(i).forEach(r=>{e[r]=(0,o.Xb)(i[r],t,s)}),e}return{hasShape:!1,visible:!1}}getTooltipData(t,e,i,r,s){var n,o;let l;if(!(this.enableByType(t)&&(0,a.Lw)(t,this.spec)&&("dimension"!==t||r&&r.length)))return null;let h=null!==(o=null===(n=this.spec)||void 0===n?void 0:n[t])&&void 0!==o?o:null==e?void 0:e[t],u=this.getShapeAttrs(t,!0,e),d=this.getShapeAttrs(t,!1,e);return"dimension"===t?(l=[],this.getContentList(t,h,u,i,r,s).forEach(t=>{l.push(t)})):l=this.getContentList(t,h,u,i,r,s),{visible:!0,activeType:t,data:i,title:this.getTitleResult(t,null==h?void 0:h.title,d,i,s),content:l}}getDefaultTitlePattern(t){return{key:void 0,value:"group"===t?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}}getDefaultContentPattern(t){return{seriesId:this.series.id,key:"group"===t?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,value:this.markTooltipValueCallback}}}},5287:function(t,e,i){"use strict";i.d(e,{i:()=>c});var r=i(1885),s=i(5669),n=i(4546),a=i(7623),o=i(5173),l=i(4498),h=i(7602),u=i(3722),d=i(3685);class c extends r.y{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var t;return null===(t=this._positionXEncoder)||void 0===t?void 0:t.bind(this)},this._setPositionXEncoder=t=>{this._positionXEncoder=t.bind(this)},this._getPositionYEncoder=()=>{var t;return null===(t=this._positionYEncoder)||void 0===t?void 0:t.bind(this)},this._setPositionYEncoder=t=>{this._positionYEncoder=t.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(t){this._fieldX=(0,n.IX)(t)}get fieldY(){return this._fieldY}setFieldY(t){this._fieldY=(0,n.IX)(t)}get fieldZ(){return this._fieldZ}setFieldZ(t){this._fieldZ=t&&(0,n.IX)(t)}get fieldX2(){return this._fieldX2}setFieldX2(t){this._fieldX2=t}get fieldY2(){return this._fieldY2}setFieldY2(t){this._fieldY2=t}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(t){this._scaleX=t}get scaleY(){return this._scaleY}setScaleY(t){this._scaleY=t}get scaleZ(){return this._scaleZ}setScaleZ(t){this._scaleZ=t}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(t){this._xAxisHelper=t,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(t){this._yAxisHelper=t,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(t){this._zAxisHelper=t,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){let t=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(e=>{e.axisHelper&&e.axisHelper.getScale&&e.fields&&e.fields.forEach(i=>{let r={key:i,operations:[]},s=e.axisHelper.getScale(0);(0,o.z2)(s.type)?(r.operations=["max","min"],"log"===s.type&&(r.filter=t=>t>0)):r.operations=["values"],t.push(r)})}),this.getStack()&&t.push({key:this.getStackValueField(),operations:["allValid"]}),t}getGroupFields(){return"vertical"===this.direction?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var t,e;let i=null===(t="horizontal"===this.direction?this.getXAxisHelper():this.getYAxisHelper())||void 0===t?void 0:t.getAxisId();return null!==(e=this._spec.stackValue)&&void 0!==e?e:`${d.Bq}_series_${this.type}_${i}`}getStackValueField(){return"horizontal"===this.direction?(0,n.IX)(this._spec.xField)[0]:(0,n.IX)(this._spec.yField)[0]}setValueFieldToStack(){"horizontal"===this.direction?(this.setFieldX(s.Uq),this.setFieldX2(s.cQ)):(this.setFieldY(s.Uq),this.setFieldY2(s.cQ))}setValueFieldToPercent(){"horizontal"===this.direction?(this.setFieldX(s.fB),this.setFieldX2(s.x0)):(this.setFieldY(s.fB),this.setFieldY2(s.x0))}setValueFieldToStackOffsetSilhouette(){"horizontal"===this.direction?(this.setFieldX(s.AF),this.setFieldX2(s.Jl)):(this.setFieldY(s.AF),this.setFieldY2(s.Jl))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=(0,n.IX)(this._spec.xField),this._specYField=(0,n.IX)(this._spec.yField),(0,a.Z)(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2(null===(t=this._spec)||void 0===t?void 0:t.x2Field),this.setFieldY2(null===(e=this._spec)||void 0===e?void 0:e.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),(0,a.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}dataToPosition(t,e){return t?e&&!this.isDatumInViewData(t)?null:{x:this.dataToPositionX(t),y:this.dataToPositionY(t)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(t=0)=>{var e,i,r;return null!==(r=null===(i=(e=this.getXAxisHelper()).getBandwidth)||void 0===i?void 0:i.call(e,t))&&void 0!==r?r:0},this._markAttributeContext.yBandwidth=(t=0)=>{var e,i,r;return null!==(r=null===(i=(e=this.getYAxisHelper()).getBandwidth)||void 0===i?void 0:i.call(e,t))&&void 0!==r?r:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(t,e){return{x:this.valueToPositionX(t),y:this.valueToPositionY(e)}}_axisPosition(t,e,i){return this._scaleConfig.datum=i,t.isContinuous?t.valueToPosition(e,this._scaleConfig):t.dataToPosition((0,n.IX)(e),this._scaleConfig)}valueToPositionX(t,e){return this._axisPosition(this._xAxisHelper,t,e)}valueToPositionY(t,e){return this._axisPosition(this._yAxisHelper,t,e)}_dataToPosition(t,e,i,r,s,a){let o=s();if(o)return o(t);if(!e)return a(t=>Number.NaN),Number.NaN;let l=(e.getFields?e.getFields():i).slice(0,r);return l&&0!==l.length?(e.isContinuous?a(t=>(this._scaleConfig.datum=t,e.valueToPosition(this.getDatumPositionValue(t,l[0]),this._scaleConfig))):a(t=>(this._scaleConfig.datum=t,e.dataToPosition((0,n.IX)(this.getDatumPositionValues(t,l)),this._scaleConfig))),s()(t)):(a(t=>null),null)}dataToPositionX(t){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(t){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(t){if(!this._zAxisHelper)return Number.NaN;let{dataToPosition:e}=this._zAxisHelper;return e(this.getDatumPositionValues(t,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(t){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in t?this.valueToPositionX(this.getDatumPositionValues(t,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(t){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in t?this.valueToPositionY(this.getDatumPositionValues(t,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(t){return t?{x:this.positionToDataX(t.x),y:this.positionToDataY(t.y)}:null}positionToDataX(t){return this._scaleX?this._scaleX.invert(t):null}positionToDataY(t){return this._scaleY?this._scaleY.invert(t):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;let{getScale:t}=this._xAxisHelper;return t(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;let{getScale:t}=this._xAxisHelper;return t(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return"horizontal"===this._direction?this._specYField:this._specXField}getDimensionContinuousField(){return"horizontal"===this._direction?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return"horizontal"===this._direction?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(u.$7.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===(null===(e="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper)||void 0===e?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e,i;(null===(e=null===(t=this.getViewData())||void 0===t?void 0:t.latestData)||void 0===e?void 0:e.length)&&((0,l.fd)("horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,"horizontal"===this._direction?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),null===(i=this._data)||void 0===i||i.updateData(!0))}getInvalidCheckFields(){let t=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==h.L.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(e=>{t.push(e)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==h.L.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(e=>{t.push(e)}),t}reInit(t){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(t)}}},3885:function(t,e,i){"use strict";var r,s,n,a;i.d(e,{A:()=>r}),(n=r||(r={})).area="area",n.line="line",n.bar="bar",n.bar3d="bar3d",n.rangeColumn="rangeColumn",n.rangeColumn3d="rangeColumn3d",n.rangeArea="rangeArea",n.dot="dot",n.geo="geo",n.link="link",n.map="map",n.pie="pie",n.pie3d="pie3d",n.radar="radar",n.rose="rose",n.scatter="scatter",n.circularProgress="circularProgress",n.wordCloud="wordCloud",n.wordCloud3d="wordCloud3d",n.funnel="funnel",n.funnel3d="funnel3d",n.linearProgress="linearProgress",n.boxPlot="boxPlot",n.sankey="sankey",n.gaugePointer="gaugePointer",n.gauge="gauge",n.treemap="treemap",n.sunburst="sunburst",n.circlePacking="circlePacking",n.waterfall="waterfall",n.heatmap="heatmap",n.correlation="correlation",n.liquid="liquid",n.venn="venn",n.mosaic="mosaic",n.pictogram="pictogram",(a=s||(s={})).label="label",a.point="point",a.line="line",a.area="area",a.bar="bar",a.bar3d="bar3d",a.boxPlot="boxPlot",a.outlier="outlier",a.circlePacking="circlePacking",a.group="group",a.gridBackground="gridBackground",a.grid="grid",a.dot="dot",a.title="title",a.subTitle="subTitle",a.symbol="symbol",a.funnel="funnel",a.funnel3d="funnel3d",a.transform="transform",a.transform3d="transform3d",a.transformLabel="transformLabel",a.outerLabel="outerLabel",a.outerLabelLine="outerLabelLine",a.pin="pin",a.pinBackground="pinBackground",a.pointer="pointer",a.segment="segment",a.track="track",a.cell="cell",a.cellBackground="cellBackground",a.link="link",a.arrow="arrow",a.pie="pie",a.pie3d="pie3d",a.labelLine="labelLine",a.progress="progress",a.minLabel="minLabel",a.maxLabel="maxLabel",a.rose="rose",a.node="node",a.sunburst="sunburst",a.nonLeaf="nonLeaf",a.leaf="leaf",a.nonLeafLabel="nonLeafLabel",a.leaderLine="leaderLine",a.stackLabel="stackLabel",a.word="word",a.fillingWord="fillingWord",a.wordMask="wordMask",a.nodePoint="nodePoint",a.ripplePoint="ripplePoint",a.centerPoint="centerPoint",a.centerLabel="centerLabel",a.barBackground="barBackground",a.lineLabel="lineLabel",a.areaLabel="areaLabel",a.liquidGroup="liquidGroup",a.liquid="liquid",a.liquidBackground="liquidBackground",a.liquidOutline="liquidOutline",a.circle="circle",a.overlap="overlap",a.overlapLabel="overlapLabel",a.pictogram="pictogram"},9208:function(t,e,i){"use strict";i.d(e,{i:()=>x});var r=i(5287),s=i(3885),n=i(3505),a=i(7773),o=i(208),l=i(4380),h=i(4331),u=i(5919);let d=Object.assign(Object.assign({},h.UI),u.j);var c=i(775),p=i(3679),g=i(8469),m=i(717),f=i(4822),v=i(4498),y=i(1532),_=i(7501);class b extends r.i{constructor(){super(...arguments),this.type=s.A.line,this.transformerConstructor=f.n,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var t;let e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=null!==(t=this._spec.seriesMark)&&void 0!==t?t:"line";this.initLineMark(e,"line"===i),this.initSymbolMark(e,"point"===i)}initTooltip(){super.initTooltip();let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var t,e,i,r;let s={direction:this.direction},n=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;if(this._lineMark.setAnimationConfig((0,o._8)(null===(i=g.F.getAnimationInKey("line"))||void 0===i?void 0:i(s,n),(0,o.hT)("line",this._spec,this._markAttributeContext))),this._symbolMark){let t=(0,v.mh)(this);this._symbolMark.setAnimationConfig((0,o._8)(null===(r=g.F.getAnimationInKey("scaleInOut"))||void 0===r?void 0:r(),(0,o.hT)("point",this._spec,this._markAttributeContext),t))}}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){var e;let i="point"!==(null===(e=this._spec)||void 0===e?void 0:e.seriesMark);return e=>{var r,s;return i&&"fill"===e&&(e="stroke"),null!==(s=null===(r=this._seriesMark)||void 0===r?void 0:r.getAttribute(e,t))&&void 0!==s?s:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}b.type=s.A.line,b.mark=d,b.transformerConstructor=f.n,(0,a.jB)(b,n.t);let x=()=>{(0,m.pK)(),(0,m.lK)(),(0,c.i)(),(0,p.Ou)(),(0,l.rt)(),(0,l.BV)(),(0,y.N)(),(0,_.E)(),g.F.registerSeries(b.type,b)}},5919:function(t,e,i){"use strict";i.d(e,{j:()=>r});let r={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}}},4822:function(t,e,i){"use strict";i.d(e,{n:()=>s});var r=i(9540);class s extends r.G{_transformLabelSpec(t){var e,i,r;!1!==(null===(e=t.point)||void 0===e?void 0:e.visible)&&!1!==(null===(r=null===(i=t.point)||void 0===i?void 0:i.style)||void 0===r?void 0:r.visible)?this._addMarkLabelSpec(t,"point"):this._addMarkLabelSpec(t,"line"),this._addMarkLabelSpec(t,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}},3505:function(t,e,i){"use strict";i.d(e,{t:()=>p});var r=i(3685),s=i(6338),n=i(3722),a=i(9231),o=i(341),l=i(208),h=i(2687),u=i(5208),d=i(5919),c=i(4218);class p{addSamplingCompile(){if(this._spec.sampling){let{width:t,height:e}=this._region.getLayoutRect(),i=[],r=this._fieldY,s=this._fieldX;i.push({type:"sampling",size:"horizontal"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?s[0]:r[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}addOverlapCompile(){var t;if(this._spec.markOverlap){let e=[];e.push({type:"markoverlap",direction:"horizontal"===this._direction&&"cartesian"===this.coordinate?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),null===(t=this._symbolMark)||void 0===t||t.getProduct().transform(e)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(t,e){var i,r;return this._lineMark=this._createMark(d.j.line,{groupKey:this._seriesField,isSeriesMark:null==e||e,stateSort:null===(i=this._spec.line)||void 0===i?void 0:i.stateSort},Object.assign(Object.assign({},t),{setCustomizedShape:null===(r=this._spec.line)||void 0===r?void 0:r.customShape,morphElementKey:this.getDimensionField()[0]})),this._lineMark}initLineMarkStyle(t,e){var i,r;let s=this._lineMark;if(s){if(this.setMarkStyle(s,{stroke:this.getColorAttribute()},"normal",a.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(s,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",a.W.Series),this.event.on(n.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(s,"defined")}),"polar"===this.coordinate)this.setMarkStyle(s,{lineJoin:"bevel",curveType:o.s,closePath:!0},"normal",a.W.Series);else{let n=null!=e?e:null===(r=null===(i=this.getSpec().line)||void 0===i?void 0:i.style)||void 0===r?void 0:r.curveType,l=n===o.l?"horizontal"===t?"monotoneY":"monotoneX":n;this.setMarkStyle(s,{curveType:l},"normal",a.W.Built_In)}this.setMarkStyle(s,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",a.W.Series)}return s}_getEventElement(t,e=!1){let i=[];return t.dimensionInfo.some(t=>(t.data.some(t=>t.series===this&&(i=t.datum,!0)),!i.length)),i}_dimensionTrigger(t){let e=this._getEventElement(t);switch(t.action){case"enter":this._symbolActiveMark.getDataView().parse(e),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(t,e){let i=this._spec.point||{};if(!1!==i.visible&&(this._symbolMark=this._createMark(d.j.point,{groupKey:this._seriesField,isSeriesMark:!!e,stateSort:i.stateSort},Object.assign(Object.assign({},t),{setCustomizedShape:i.customShape,morph:(0,l.yx)(this._spec,d.j.point.name),morphElementKey:this.getDimensionField()[0]}))),!0===this._spec.activePoint){let t=new s.VO(this._option.dataSet,{name:`${r.Bq}_series_${this.id}_active_point`});t.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{groupKey:this._seriesField,isSeriesMark:!1,dataView:t,parent:this._region.getInteractionMark(),stateSort:i.stateSort},{setCustomizedShape:i.customShape,morph:!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){let t=this._symbolMark;if(!t)return this._initSymbolActiveMarkAlone(),t;if(this._initSymbolMark(t),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){for(let e in this._symbolActiveMark.setVisible(!0),this.event.on(h.C.dimensionHover,this._dimensionTrigger.bind(this)),this._symbolMark.stateStyle)for(let i in this._symbolActiveMark.stateStyle[e]={},this._symbolMark.stateStyle[e])"visible"!==i&&(this._symbolActiveMark.stateStyle[e][i]={style:null,level:a.W.Series,referer:t});this._symbolActiveMark.state.changeStateInfo({stateValue:u.q.STATE_DIMENSION_HOVER,filter:()=>!0})}return t}_initSymbolMark(t){t&&(this.setMarkStyle(t,{fill:this.getColorAttribute()},"normal",a.W.Series),this.setMarkStyle(t,{x:t=>"zero"===this._invalidType||this._getInvalidDefined(t)?this.dataToPositionX(t):Number.NaN,y:t=>"zero"===this._invalidType||this._getInvalidDefined(t)?this.dataToPositionY(t):Number.NaN,z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",a.W.Series))}_initSymbolActiveMarkAlone(){var t,e;let i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(null===(e=null===(t=this._spec[d.j.point.name])||void 0===t?void 0:t.state)||void 0===e?void 0:e.dimension_hover)&&(i.setVisible(!0),this.event.on(h.C.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,(0,c.H)({},this._spec[d.j.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:u.q.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(t){var e;t&&("symbol"!==(null===(e=t.getTarget())||void 0===e?void 0:e.type)&&t.setRule("line-data"),this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),"zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",a.W.Series),this.event.on(n.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(t,"visible")}))}initLineLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>{var e;return null!==(e=t[this.getSeriesField()])&&void 0!==e?e:this.getSeriesKeys()[0]},z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(t,e){var i,r,s,n;if(!t)return;let o=this._isFieldAllValid();if("zero"===this._invalidType||o){if(!0===(null===(r=null===(i=t.stateStyle.normal)||void 0===i?void 0:i[e])||void 0===r?void 0:r.style))return;this.setMarkStyle(t,{[e]:!0},"normal",a.W.Series)}else{if(!0!==(null===(n=null===(s=t.stateStyle.normal)||void 0===s?void 0:s[e])||void 0===n?void 0:n.style))return;this.setMarkStyle(t,{[e]:this._getInvalidDefined.bind(this)},"normal",a.W.Series)}t.getProduct()&&t.compileEncode()}_isFieldAllValid(){let t=this.getViewDataStatistics(),e=this.getStackValueField();return!!(t&&t.latestData&&e)&&t.latestData[e]&&t.latestData[e].allValid}}},168:function(t,e,i){"use strict";i.d(e,{iA:()=>tt});var r=i(7623),s=i(1805),n=i(6338),a=i(8350),o=i(9231),l=i(5669),h=i(3685),u=i(2732),d=i(8118),c=i(7636);function p(t){return function(e){return(0,c.Z)(t)?t.reduce((t,e)=>null==t?void 0:t[e],e):null==e?void 0:e[t]}}var g=i(4546),m=i(6082),f=i(5173),v=i(1885),y=i(4498),_=i(3722);class b extends v.y{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=a.KZ,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(t){return this._angleField=(0,r.Z)(t)?(0,g.IX)(t):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(t){return this._radiusField=(0,r.Z)(t)?(0,g.IX)(t):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(t){return this._innerRadiusField=(0,g.IX)(t),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(t){return this._radiusScale=t,t}get angleScale(){return this._angleScale}setAngleScale(t){return this._angleScale=t,t}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(t){this._angleAxisHelper=t,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(t){this._radiusAxisHelper=t,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(t,e){if((0,m.Z)(t)||(0,m.Z)(e)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};let i=this.radiusAxisHelper.dataToPosition((0,g.IX)(e));if(i<0){if("break"===this._invalidType||"link"===this._invalidType)return{x:Number.NaN,y:Number.NaN};if("zero"===this._invalidType)return this.angleAxisHelper.center()}let r=this.angleAxisHelper.dataToPosition((0,g.IX)(t));return this.angleAxisHelper.coordToPoint({angle:r,radius:i})}dataToPosition(t,e){return t&&this.angleAxisHelper&&this.radiusAxisHelper?e&&!this.isDatumInViewData(t)?null:this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getDatumPositionValues(t,this._radiusField)):null}dataToPositionX(t){var e;return null===(e=this.dataToPosition(t))||void 0===e?void 0:e.x}dataToPositionY(t){var e;return null===(e=this.dataToPosition(t))||void 0===e?void 0:e.y}dataToPositionZ(t){return 0}positionToData(t){}radiusToData(t){}angleToData(t){}getStatisticFields(){var t,e;let i=[];return(null===(t=this.radiusAxisHelper)||void 0===t?void 0:t.getScale)&&this._radiusField.forEach(t=>{let e={key:t,operations:[]};(0,f.z2)(this.radiusAxisHelper.getScale(0).type)?e.operations=["max","min"]:e.operations=["values"],i.push(e)}),(null===(e=this.angleAxisHelper)||void 0===e?void 0:e.getScale)&&this._angleField.forEach(t=>{let e={key:t,operations:[]};(0,f.z2)(this.angleAxisHelper.getScale(0).type)?e.operations=["max","min"]:e.operations=["values"],i.push(e)}),i}setAttrFromSpec(){super.setAttrFromSpec(),(0,r.Z)(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),(0,r.Z)(this._spec.radius)&&(this._outerRadius=this._spec.radius),(0,r.Z)(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),(0,r.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){let t=this._angleAxisHelper||this._radiusAxisHelper;if(t)return t.layoutRadius();let{width:e,height:i}=this._region.getLayoutRect();return Math.min(e/2,i/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(_.$7.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===(null===(e=this._angleAxisHelper)||void 0===e?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e;(null===(e=null===(t=this.getViewData())||void 0===t?void 0:t.latestData)||void 0===e?void 0:e.length)&&(0,y.fd)(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){let t=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(e=>{t.push(e)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(e=>{t.push(e)}),t}}var x=i(3885),S=i(6948);function A(t){return(0,S.hi)(t)?Number.parseFloat(t):0}let k=(t,e)=>{let{asStartAngle:i,asEndAngle:r,asMiddleAngle:n,asRadian:o,asRatio:l,asQuadrant:h,asK:d,showAllZero:c,supportNegative:p,showEmptyCircle:g}=e,m=e.angleField(),f=e.startAngle(),v=e.endAngle(),y=e.minAngle(),_=t.map(t=>Object.assign({},t));if(!_||0===_.length||!c&&g&&w(_,m,p))return _;let b=(t,e,a)=>{t[i]=e,t[r]=e+a,t[n]=e+a/2,t[o]=a,t[h]=(0,s.tc)(e+a/2)},x=0,S=-1/0,k=!0;for(let t=0;t<_.length;t++){let e=p?Math.abs(A(_[t][m])):A(_[t][m]);x+=e,S=Math.max(e,S),k&&0!==e&&(k=!1),_[t][a.E2]=e}let C=_.map(t=>Number(t[m])),T=v-f,E=f,M=T,B=0,D=(0,u.h1)(C);if(_.forEach((t,e)=>{let i=t[a.E2],r=x?i/x:0,s=r*T;s<y?(s=y,M-=y):B+=i;let n=E,o=E+s;t[l]=r,t[d]=S?i/S:0,t._percent_=D[e],b(t,n,s),E=o}),M<T){if(M<=.001){let t=T/_.length;_.forEach((e,i)=>{b(e,f+i*t,t)})}else{let t=M/B;E=f,_.forEach(e=>{let i=e[o]===y?y:e[a.E2]*t;b(e,E,i),E+=i})}}if(0!==x&&(_[_.length-1][r]=v),k&&c){let t=T/_.length;_.forEach((e,i)=>{b(e,f+i*t,t)})}return _},w=(t,e,i)=>!!(0,m.Z)(t)||0===t.length||!!t.every(t=>0===A(t[e]))||!i&&0===t.reduce((t,i)=>t+A(i[e]),0);var C=i(6358),T=i(5719),E=i(8469);function M(t,e,i){return(r,s,n)=>e?"radius"===t.growField?{overall:0}:{overall:t.growFrom(r,s,i)}:{overall:!1}}let B=t=>({type:"radius"===t.growField?"growRadiusIn":"growAngleIn",options:M(t,!0,T.h.appear)}),D={type:"fadeIn"},O=t=>({type:"radius"===t.growField?"growRadiusIn":"growAngleIn",easing:"linear",options:M(t,!0,T.h.enter)}),P=t=>({type:"radius"===t.growField?"growRadiusOut":"growAngleOut",easing:"linear",options:M(t,!0,T.h.exit)}),I=t=>({type:"radius"===t.growField?"growRadiusOut":"growAngleOut",options:M(t,!0,T.h.exit)});function R(t,e){if(!1===e)return{};switch(e){case"fadeIn":return D;case"growRadius":return B(Object.assign(Object.assign({},t),{growField:"radius"}));default:return B(Object.assign(Object.assign({},t),{growField:"angle"}))}}let L=()=>{E.F.registerAnimation("pie",(t,e)=>({appear:R(t,e),enter:O(t),exit:P(t),disappear:I(t)}))},F=()=>{E.F.registerAnimation("emptyCircle",(t,e)=>({appear:R(t,e)}))};var j=i(208),Z=i(7479),H=i(8378),N=i(4268),z=i(4331);let V=Object.assign(Object.assign({},z.UI),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}});Object.assign(Object.assign({},z.UI),{pie3d:{name:"pie3d",type:"arc3d"},labelLine:{name:"labelLine",type:"path"}});var U=i(4218),W=i(9540);class G extends W.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie")}_mergeThemeToSpec(t,e){let i=this._theme,r=t;if(this._shouldMergeThemeToSpec()){let i=this._getDefaultSpecFromChart(e);r=(0,U.H)({},this._theme,i,t);let s=(t,e)=>(0,U.H)({},"inside"===t||"inside-center"===t?this._theme.innerLabel:this._theme.outerLabel,e);(0,c.Z)(r.label)?r.label=r.label.map(t=>s(t.position,t)):r.label=s(r.label.position,r.label)}return{spec:r,theme:i}}_getDefaultSpecFromChart(t){var e;let i=null!==(e=super._getDefaultSpecFromChart(t))&&void 0!==e?e:{},{centerX:s,centerY:n}=t;return(0,r.Z)(s)&&(i.centerX=s),(0,r.Z)(n)&&(i.centerY=n),Object.keys(i).length>0?i:void 0}}h.Bq,h.Bq,h.Bq;let $=`${h.Bq}_LABEL_VISIBLE`;h.Bq,h.Bq;var X=i(1601),Y=i(9038);let K=(t,e,i,r)=>{let n=t();if((0,X.Z)(n))return n;if((0,Y.Z)(n))return n(e(),i());let a=e();if("auto"===n&&a.width>0&&a.height>0){let{startAngle:t=0,endAngle:e=2*Math.PI}=r();return(0,s.Re)(a,i(),t,e)}return Math.min(a.width/2,a.height/2)};var q=i(1960);class J extends b{constructor(){super(...arguments),this.transformerConstructor=G,this._pieMarkName="pie",this._pieMarkType="arc",this.getCenter=()=>{var t,e;let i=this._region.getLayoutRect();return{x:(0,q.Mv)(null===(t=this._spec)||void 0===t?void 0:t.centerX,i.width,i,i.width/2),y:(0,q.Mv)(null===(e=this._spec)||void 0===e?void 0:e.centerY,i.height,i,i.height/2)}},this._startAngle=a.JK,this._endAngle=a.Uw,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this._emptyArcMark=null,this.dataToCentralPosition=t=>{let e=t[a.yz];if((0,m.Z)(e))return null;let i=this.computeDatumRadius(t),r=this.computeDatumInnerRadius(t),n=this.computeCenter(t);return(0,s.op)(n,(i+r)/2,e)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}setAttrFromSpec(){var t,e,i,n,a,o;super.setAttrFromSpec(),this._centerOffset=null!==(t=this._spec.centerOffset)&&void 0!==t?t:0,this._cornerRadius=null!==(e=this._spec.cornerRadius)&&void 0!==e?e:0;let l=(0,u.kq)((0,r.Z)(this._spec.startAngle)?(0,s.M4)(this._spec.startAngle):this._startAngle,(0,r.Z)(this._spec.endAngle)?(0,s.M4)(this._spec.endAngle):this._endAngle);this._startAngle=l.startAngle,this._endAngle=l.endAngle,this._padAngle=(0,r.Z)(this._spec.padAngle)?(0,s.M4)(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=null!==(n=null===(i=this._spec.emptyPlaceholder)||void 0===i?void 0:i.showEmptyCircle)&&void 0!==n&&n,this._showAllZero=null!==(a=this._spec.showAllZero)&&void 0!==a&&a,this._supportNegative=null!==(o=this._spec.supportNegative)&&void 0!==o&&o}initData(){super.initData();let t=this.getViewData();if(!t)return;(0,C.U)(this._dataSet,"pie",k),t.transform({type:"pie",options:{angleField:()=>this._angleField[0],startAngle:()=>this._startAngle,endAngle:()=>this._endAngle,minAngle:()=>(0,r.Z)(this._spec.minAngle)?(0,s.M4)(this._spec.minAngle):0,asStartAngle:a.FI,asEndAngle:a.A8,asRatio:a.Y1,asMiddleAngle:a.yz,asRadian:a.xt,asQuadrant:a.hk,asK:a.dr,showAllZero:this._showAllZero,supportNegative:this._supportNegative,showEmptyCircle:this._showEmptyCircle}},!1);let e=new n.VO(this._dataSet,{name:`${h.Bq}_series_${this.id}_viewDataLabel`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new Z.z(this._option,e)}compileData(){var t;super.compileData(),null===(t=this._viewDataLabel)||void 0===t||t.compile()}initMark(){var t,e;this._pieMark=this._createMark(Object.assign(Object.assign({},J.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{key:l.XW,groupKey:this._seriesField,skipBeforeLayouted:!0,isSeriesMark:!0,stateSort:null===(t=this._spec.pie)||void 0===t?void 0:t.stateSort},{setCustomizedShape:null===(e=this._spec.pie)||void 0===e?void 0:e.customShape,morph:(0,j.yx)(this._spec,this._pieMarkName),morphElementKey:this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({name:"emptyCircle",type:"arc"},{dataView:!1}))}startAngleScale(t){return p(a.FI)(t)}endAngleScale(t){return p(a.A8)(t)}_computeLayoutRadius(){return K(()=>this._spec.layoutRadius,this.getLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}initMarkStyle(){let t={x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:(0,d.My)(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:(0,d.My)(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:t=>this.startAngleScale(t),endAngle:t=>this.endAngleScale(t),padAngle:this._padAngle,centerOffset:this._centerOffset},e=this._pieMark;e&&this.setMarkStyle(e,t,"normal",o.W.Series);let i=this._emptyArcMark;i&&this.setMarkStyle(i,Object.assign(Object.assign({},t),{visible:()=>{let t=this.getAngleField()[0];return w(this.getViewData().latestData,t,this._supportNegative)}}),"normal",o.W.Series)}initInteraction(){this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(t,e,i){if(super.initMarkStyleWithSpec(t,e,i),t.name===this._pieMarkName){let e=this.getSpec()[t.name];if(e)for(let i in e.state||{})this.setMarkStyle(t,this.generateRadiusStyle(e.state[i]),i,o.W.User_Mark)}"emptyCircle"===t.name&&this.setMarkStyle(t,this.generateRadiusStyle(e.style),"normal",o.W.User_Mark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{visible:p($).bind(this),text:t=>t[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var t;super.initEvent(),null===(t=this._viewDataLabel.getDataView())||void 0===t||t.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(t){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd(t)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(_.$7.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(t){if(!t)return;let e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),t.cornerRadius&&(e.cornerRadius=()=>this._computeLayoutRadius()*t.cornerRadius),e}computeCenter(t){return{x:this._pieMark.getAttribute("x",t,"normal"),y:this._pieMark.getAttribute("y",t,"normal")}}getRadius(t="normal"){var e,i,r,s,n,a,o;let l="normal"===t?null===(r=null===(i=this.getSpec()[(null===(e=this._pieMark)||void 0===e?void 0:e.name)||"pie"])||void 0===i?void 0:i.style)||void 0===r?void 0:r.outerRadius:null===(o=null===(a=null===(n=this.getSpec()[(null===(s=this._pieMark)||void 0===s?void 0:s.name)||"pie"])||void 0===n?void 0:n.state)||void 0===a?void 0:a[t])||void 0===o?void 0:o.outerRadius;return null!=l?l:this._outerRadius}getInnerRadius(t="normal"){var e,i,r,s,n,a,o;let l="normal"===t?null===(r=null===(i=this.getSpec()[(null===(e=this._pieMark)||void 0===e?void 0:e.name)||"pie"])||void 0===i?void 0:i.style)||void 0===r?void 0:r.innerRadius:null===(o=null===(a=null===(n=this.getSpec()[(null===(s=this._pieMark)||void 0===s?void 0:s.name)||"pie"])||void 0===n?void 0:n.state)||void 0===a?void 0:a[t])||void 0===o?void 0:o.innerRadius;return null!=l?l:this._innerRadius}computeRadius(t,e){return this._computeLayoutRadius()*t*((0,m.Z)(e)?1:e)+this._centerOffset}computeDatumRadius(t,e){return this._computeLayoutRadius()*this.getRadius(e)+this._centerOffset}_compareSpec(t,e,i){i=null!=i?i:{data:!0};let r=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];r.forEach(t=>{i[t]=!0});let s=super._compareSpec(t,e,i);return t=null!=t?t:{},r.some(i=>t[i]!==e[i])&&(s.reRender=!0,s.change=!0),s}computeDatumInnerRadius(t,e){return this._computeLayoutRadius()*this.getInnerRadius(e)+this._centerOffset}dataToPosition(t,e){let i=t[a.yz];if((0,m.Z)(i)||e&&!this.isDatumInViewData(t))return null;let r=this.computeDatumRadius(t),n=this.computeCenter(t);return(0,s.op)(n,r,i)}initAnimation(){var t,e,i;let r={growFrom:(t,e,i)=>{var r;if(i===T.h.appear)return this._startAngle;if(i===T.h.disappear)return this._endAngle;let s=[T.h.disappear,T.h.exit],n=e.mark.elements,a=null==t?void 0:t[l.vM];if(void 0===n.find(t=>{var e;return(null===(e=t.data[0])||void 0===e?void 0:e[l.vM])<a}))return this._startAngle;if(void 0===n.find(t=>{var e;return(null===(e=t.data[0])||void 0===e?void 0:e[l.vM])>a}))return this._endAngle;let o=[...n].reverse().find(t=>{var e;return(null===(e=t.data[0])||void 0===e?void 0:e[l.vM])<a});return s.includes(i)?null===(r=null==o?void 0:o.getNextGraphicAttributes())||void 0===r?void 0:r.endAngle:null==o?void 0:o.getGraphicAttribute("endAngle",!0)}},n=null===(t=this._spec.animationAppear)||void 0===t?void 0:t.preset;if(this._pieMark){let t=(0,j._8)(null===(e=E.F.getAnimationInKey("pie"))||void 0===e?void 0:e(r,n),(0,j.hT)("pie",this._spec,this._markAttributeContext));t.normal&&t.normal.type&&(t.normal=function(t,e){var i,r,n,o;let l=null!==(r=null===(i=e.options)||void 0===i?void 0:i.distance)&&void 0!==r?r:10,h=(0,H.Z)(e.duration)?e.duration/2:1e3,u=null!==(n=e.options.easing)&&void 0!==n?n:"cubicOut";return{oneByOne:e.oneByOne,loop:null!==(o=e.loop)&&void 0!==o&&o,timeSlices:[{duration:h,effects:{easing:u,channel:{x:{from:e=>t.getAttribute("x",e),to:e=>t.getAttribute("x",e)+(0,s.op)({x:0,y:0},l,e[a.yz]).x},y:{from:e=>t.getAttribute("y",e),to:e=>t.getAttribute("y",e)+(0,s.op)({x:0,y:0},l,e[a.yz]).y}}}},{duration:h,effects:{easing:u,channel:{x:{to:e=>t.getAttribute("x",e),from:e=>t.getAttribute("x",e)+(0,s.op)({x:0,y:0},l,e[a.yz]).x},y:{to:e=>t.getAttribute("y",e),from:e=>t.getAttribute("y",e)+(0,s.op)({x:0,y:0},l,e[a.yz]).y}}}}]}}(this._pieMark,t.normal)),this._pieMark.setAnimationConfig(t)}if(this._emptyArcMark){let t=(0,j._8)(null===(i=E.F.getAnimationInKey("emptyCircle"))||void 0===i?void 0:i(r,null!=n?n:"fadeIn"));this._emptyArcMark.setAnimationConfig(t)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){return e}getActiveMarks(){return[this._pieMark]}}J.transformerConstructor=G,J.mark=V;class Q extends J{constructor(){super(...arguments),this.type=x.A.pie}}Q.type=x.A.pie;let tt=()=>{(0,N.sp)(),L(),F(),E.F.registerSeries(Q.type,Q)}},4281:function(t,e,i){"use strict";i.d(e,{V:()=>s});var r=i(3885);function s(t){var e,i;let{type:s}=t;return s===r.A.sankey?null!==(e=t.direction)&&void 0!==e?e:"horizontal":null!==(i=t.direction)&&void 0!==i?i:"vertical"}},4498:function(t,e,i){"use strict";i.d(e,{fd:()=>s,mh:()=>n});var r=i(5173);function s(t,e,i){let s=t.getScale(0),n="isInverse"in t&&t.isInverse();(0,r.z2)(s.type)?i.sort((t,i)=>(t[e]-i[e])*(n?-1:1)):i.sort((t,i)=>(s.index(t[e])-s.index(i[e]))*(n?-1:1))}function n(t){return{dataIndex:e=>{var i,r;let s="horizontal"===t.direction?t.fieldY[0]:t.fieldX[0],n=null==e?void 0:e[s],a="horizontal"===t.direction?t.scaleY:t.scaleX;return(null!==(r=null===(i=null==a?void 0:a.domain)||void 0===i?void 0:i.call(a))&&void 0!==r?r:[]).indexOf(n)||0},dataCount:()=>{var e,i,r;let s="horizontal"===t.direction?t.scaleY:t.scaleX;return null!==(r=(null!==(i=null===(e=null==s?void 0:s.domain)||void 0===e?void 0:e.call(s))&&void 0!==i?i:[]).length)&&void 0!==r?r:0}}}},4370:function(t,e,i){"use strict";i.d(e,{ht:()=>_,zE:()=>b,yu:()=>y,_t:()=>f,EG:()=>x,wW:()=>m});var r=i(7636),s=i(4154),n=i(7623),a=i(9038),o=i(6082),l=i(9904),h=i(9921),u=i(6879),d=i(4287),c=i(4281);let p={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},g={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function m(t,e){if(!t)return[];let i=S(t,e);if(!i||(0,r.Z)(i))return null!=i?i:[];if((0,s.Z)(i)){let{dataScheme:r}=i;return r?b(r)?r.map(i=>Object.assign(Object.assign({},i),{scheme:i.scheme.map(i=>_(i)?v(t,i,e):i).filter(n.Z)})):r.map(i=>_(i)?v(t,i,e):i).filter(n.Z):[]}return[]}function f(t,e){var i,r;return b(t)?null!==(r=null===(i=t.find(t=>(0,n.Z)(t.isAvailable)?(0,a.Z)(t.isAvailable)?t.isAvailable(e):!!t.isAvailable:!(0,n.Z)(t.maxDomainLength)||(null==e?void 0:e.length)<=t.maxDomainLength))||void 0===i?void 0:i.scheme)&&void 0!==r?r:t[t.length-1].scheme:t}function v(t,e,i){var r;let a;let c=S(t,i);if(!c)return;let{palette:m}=c;if((0,s.Z)(m)&&(a=null!==(r=function(t,e){let i=p[e];if(i&&t[i])return t[i];if(t[e])return t[e];let r=g[e];return r?t[r]:void 0}(m,e.key))&&void 0!==r?r:e.default),!a)return;if((0,o.Z)(e.a)&&(0,o.Z)(e.l)||!(0,l.Z)(a))return a;let f=new h.Il(a);if((0,n.Z)(e.l)){let{r:t,g:i,b:r}=f.color,{h:s,s:n}=(0,u.Z)(t,i,r),a=(0,d.Z)(s,n,e.l),o=new h.Il(`rgb(${a.r}, ${a.g}, ${a.b})`);o.setOpacity(f.color.opacity),f=o}return(0,n.Z)(e.a)&&f.setOpacity(e.a),f.toRGBA()}let y=(t,e,i)=>{if(e&&_(t)){let r=v(e,t,i);if(r)return r}return t};function _(t){return t&&"palette"===t.type&&!!t.key}function b(t){return!(!(0,r.Z)(t)||0===t.length)&&t.every(t=>(0,n.Z)(t.scheme))}function x(t){return(0,r.Z)(t)?{dataScheme:t}:t}function S(t,e){var i,r;let s;let{type:n}=null!=e?e:{};if(!e||(0,o.Z)(n))s=null==t?void 0:t.default;else{let a=(0,c.V)(e);s=null!==(r=null!==(i=null==t?void 0:t[`${n}_${a}`])&&void 0!==i?i:null==t?void 0:t[n])&&void 0!==r?r:null==t?void 0:t.default}return s}},5165:function(t,e,i){"use strict";i.d(e,{r:()=>r});let r={fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14,l1FontSize:32,l1LineHeight:"150%",l2FontSize:20,l2LineHeight:"140%",l3FontSize:16,l3LineHeight:"150%",l4FontSize:14,l4LineHeight:"150%",l5FontSize:12,l5LineHeight:"130%",l6FontSize:10,l6LineHeight:"120%"}},341:function(t,e,i){"use strict";i.d(e,{l:()=>r,s:()=>s});let r="monotone",s="linear"},6962:function(t,e,i){"use strict";var r,s;i.d(e,{i:()=>r}),(s=r||(r={}))["desktop-browser"]="desktop-browser",s["mobile-browser"]="mobile-browser",s.node="node",s.worker="worker",s.miniApp="miniApp",s.wx="wx",s.tt="tt",s.harmony="harmony",s["desktop-miniApp"]="desktop-miniApp",s.lynx="lynx"},6555:function(t,e,i){"use strict";function r(t){let e=[];for(let i=0;i<t.length;i++){let r=t[i];0!==i&&r[0]===e[e.length-1]||e.push(r[0]),e.push(r[1])}return e}i.d(e,{zb:()=>r})},9478:function(t,e,i){"use strict";i.d(e,{Ku:()=>u,Q3:()=>function t(e,i){if("values"in e&&e.values.length){let t=(0,a.Sm)(e.values,i),s=(0,a.Fp)(e.values,r.fB);e.values.forEach(e=>{e[r.Gq]=t,e[r.Iz]=s})}else for(let r in e.nodes)t(e.nodes[r],i)},kL:()=>o,kn:()=>function t(e,i,n,a,o={key:r.eh,start:r.cQ,end:r.Uq,startPercent:r.x0,endPercent:r.fB,max:r.wo,min:r.cL}){let l=a&&(0,s.Z)(o.min),h=a&&(0,s.Z)(o.max);if(e.values.length>0){let t=0,r=0,s=1,a=0,u=null,d=null,c=e.values.length;for(let s=0;s<c;s++){let n=e.values[i?c-1-s:s];(a=n[o.end])>=0?(n[o.start]=t,t+=n[o.end],n[o.end]=t):(n[o.start]=r,r+=n[o.end],n[o.end]=r),n[o.key]=e.key,h&&(delete n[o.max],(!d||n[o.end]>d[o.end])&&(d=n)),l&&(delete n[o.min],(!u||n[o.start]<u[o.start])&&(u=n))}if(h&&d&&(d[o.max]=!0),l&&u&&(u[o.min]=!0),n)for(let n=0;n<c;n++){let l=e.values[i?c-1-n:n],h=(a=l[o.end])>=0?t:r;s=a>=0?1:-1,l[o.startPercent]=0===h?0:Math.min(1,l[o.start]/h)*s,l[o.endPercent]=0===h?0:Math.min(1,l[o.end]/h)*s}}for(let r in e.nodes)t(e.nodes[r],i,n,a,o)},oW:()=>h,tW:()=>l});var r=i(5669),s=i(7623),n=i(6948),a=i(2732);function o(t,e){for(let i=0;i<e.length;i++){let r=e[i],s=function(t,e){return t.find(t=>t.key===e)}(t,r.key);s?s.operations=[...new Set(s.operations.concat(r.operations))]:t.push(r)}return t}function l(t,e){var i;if(!t)return null!=e?e:null;let r=t.getFields();return r&&r[e]?null!==(i=r[e].alias)&&void 0!==i?i:e:null!=e?e:null}function h(t,e,i){let a=t.getStackSort(),o={},l=null;return a&&(l={},t.getSeries().forEach(t=>{let e=t.getSeriesField();if(e){let i=t.getRawDataStatisticsByField(e);i.values&&(l[e]||(l[e]={lastIndex:0,sort:{}}),i.values.forEach((t,i)=>{t in l[e].sort||(l[e].sort[t]=l[e].lastIndex,l[e].lastIndex++)}))}})),t.getSeries().forEach(t=>{var a;let h=t.getStackData(),u=t.getStackValue(),d=t.getStackValueField(),c=!i||i(t);h&&d&&c&&(o[u]=null!==(a=o[u])&&void 0!==a?a:{groupField:h.groupField,nodes:{}},function t(e,i,a,o,l,h,u){var d;if("values"in i){if(l&&i.values.forEach(t=>t[r.Uq]=(0,n.sT)(t[o])),a.series.push({s:e,values:i.values}),h){let t=e.getSeriesField();i.values.forEach(i=>{a.sortDatums.push({series:e,datum:i,index:t?h[t].sort[i[t]]:0})})}else a.values.push(...i.values)}else for(let r in i.nodes){let n=u?`${u}_${r}`:r;a.nodes[r]||(a.nodes[r]={values:[],series:[],nodes:{},sortDatums:[],key:n},(0,s.Z)(null===(d=i.nodes[r])||void 0===d?void 0:d.groupField)&&(a.nodes[r].groupField=i.nodes[r].groupField)),t(e,i.nodes[r],a.nodes[r],o,l,h,n)}}(t,h,o[u],d,e,l))}),a?function t(e,i){var r;for(let s in e)(null===(r=e[s].sortDatums)||void 0===r?void 0:r.length)?(e[s].sortDatums.sort((t,e)=>t.index-e.index),e[s].values=e[s].sortDatums.map(t=>t.datum)):t(e[s].nodes,i);return e}(o,l):o}function u(t){if(!t.values.length)return;let e=t.values[t.values.length-1][r.Uq]/2;for(let i=0;i<t.values.length;i++)t.values[i][r.Jl]=t.values[i][r.cQ]-e,t.values[i][r.AF]=t.values[i][r.Uq]-e}},5205:function(t,e,i){"use strict";i.d(e,{ZK:()=>n,vU:()=>a});var r=i(9038),s=i(4659);let n=(t,e)=>((0,r.Z)(o.warnHandler)&&o.warnHandler.call(null,t,e),e?s.Y.getInstance().warn(`[VChart warn]: ${t}`,e):s.Y.getInstance().warn(`[VChart warn]: ${t}`)),a=(t,e,i)=>{if(!o.silent){if(!(0,r.Z)(o.errorHandler))throw Error(t);o.errorHandler.call(null,t,e)}},o={silent:!1,warnHandler:!1,errorHandler:!1}},7631:function(t,e,i){"use strict";i.d(e,{Eh:()=>s,Oy:()=>o,qe:()=>n,wx:()=>a});let r=(0,i(7211).kP)(),s=r&&globalThis?globalThis.document:void 0;function n(t){return("desktop-browser"===t||"mobile-browser"===t)&&r}function a(t){return o(t)||"mobile-browser"===t}function o(t){return t.includes("miniApp")||"lynx"===t||"wx"===t||"harmony"===t}},9013:function(t,e,i){"use strict";i.d(e,{a:()=>s});let r=0;function s(){return r>=9999999&&(r=0),r++}},2732:function(t,e,i){"use strict";i.d(e,{CA:()=>b,VV:()=>f,Fp:()=>v,TE:()=>w,C2:()=>S,kq:()=>g,Y8:()=>_,cX:()=>k,Sm:()=>y,VC:()=>A,hA:()=>p,h1:()=>C,Nl:()=>m,IN:()=>x});var r=i(8378),s=i(6082);function n(t,e,i,r){let n,a,o=-1;t.forEach(t=>{n=e(t),a=i(t),!(0,s.Z)(n)&&(n=+n)>=n&&!(0,s.Z)(a)&&(a=+a)>=a&&r(n,a,++o)})}var a=i(5859),o=i(7623),l=i(4546),h=i(2442),u=i(9896);let d=(t,e)=>{let i=t;return!0!==e&&(i=t.sort(h.j)),function(t,e,i=u.H){let r=t.length;if(!r)return;if(r<2)return i(t[0],0,t);let s=(r-1)*e,n=Math.floor(s),a=i(t[n],n,t);return a+(i(t[n+1],n+1,t)-a)*(s-n)}(i,.5)};var c=i(2683);let p=a.Yt;function g(t,e){let i=0,r=2*Math.PI,s=(0,o.Z)(t),n=(0,o.Z)(e);for(s||n?n?(i=s?t:e-2*Math.PI,r=e):(i=t,r=t+2*Math.PI):(i=0,r=2*Math.PI);r<=i;)r+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI,r-=2*Math.PI;for(;r<0;)i+=2*Math.PI,r+=2*Math.PI;return{startAngle:i,endAngle:r}}function m(t,e,i){return t.x1>e||t.x2<e||t.y1>i||t.y2<i}function f(t,e){let i=[];return t.forEach(t=>{let s=+t[e];(0,r.Z)(s)&&i.push(s)}),0===i.length?null:(0,l.iH)(i)}function v(t,e){let i=[];return t.forEach(t=>{let s=+t[e];(0,r.Z)(s)&&i.push(s)}),0===i.length?null:(0,l.CE)(i)}function y(t,e){return t.reduce((t,i)=>{let s=e?+i[e]:+i;return(0,r.Z)(s)&&(t+=s),t},0)}function _(t,e){let i=0,s=0;return t.forEach(t=>{let n=e?+t[e]:+t;(0,r.Z)(n)&&(i+=n,s++)}),i/s}function b(t,e){let i=_(t,e);return t.length<=1?0:t.reduce((t,r)=>t+(e?+r[e]:+r-i)**2,0)/(t.length-1)}function x(t,e){return Math.sqrt(b(t,e))}function S(t,e){return d(t.map(t=>t[e]))}function A(t,e,i){let{predict:r}=function(t,e=t=>t.x,i=t=>t.y){var r;let s,a,o=0,l=0,h=0,u=0,d=0;n(t,e,i,(t,e)=>{++d,o+=(t-o)/d,l+=(e-l)/d,h+=(t*e-h)/d,u+=(t*t-u)/d});let c=function(t,e,i,r){let s=r-t*t,n=1e-24>Math.abs(s)?0:(i-t*e)/s;return[e-n*t,n]}(o,l,h,u),p=t=>c[0]+c[1]*t;return{coef:c,predict:p,rSquared:(r=l,s=0,a=0,n(t,e,i,(t,e)=>{let i=e-p(t),n=e-r;s+=i*i,a+=n*n}),1-s/a)}}(t,t=>t[e],t=>t[i]),s=f(t,e),a=v(t,e),o=r(s),l=r(a);return[{[e]:s,[i]:o},{[e]:a,[i]:l}]}function k(t,e){let i=w(t),r=w(e),s=Math.asin((t.x*e.y-e.x*t.y)/i/r),n=Math.acos((t.x*e.x+t.y*e.y)/i/r);return s<0?-n:n}function w(t,e={x:0,y:0}){return c.HL.distancePP(t,e)}function C(t,e=2){let i=t.reduce((t,e)=>t+(isNaN(e)?0:e),0);if(0===i)return 0;let r=Math.pow(10,e),s=t.map(t=>(isNaN(t)?0:t)/i*r*100),n=100*r,a=s.map(t=>Math.floor(t)),o=a.reduce((t,e)=>t+e,0),l=s.map((t,e)=>t-a[e]);for(;o<n;){let t=Number.NEGATIVE_INFINITY,e=null;for(let i=0;i<l.length;i++)l[i]>t&&(t=l[i],e=i);++a[e],l[e]=0,++o}return a.map(t=>t/r)}},9114:function(t,e,i){"use strict";i.d(e,{Sr:()=>a,gU:()=>n,xV:()=>s});var r=i(9038);function s(t,e,i){let s=!1;if(e&&(0,r.Z)(e)){for(let r of t)for(let t of r.getSeries(i))if(s=!!e.call(null,t))return s}return s}function n(t,e){let i=[];for(let r of t)for(let t of r.getSeries(e))i.push(t);return i}let a=(t,e)=>{for(let i=0;i<t.length;i++){let r=t[i].getSeries();for(let t=0;t<r.length;t++){let i=r[t];if(e&&i&&i.coordinate===e||!e&&i)return i}}return null}},8118:function(t,e,i){"use strict";i.d(e,{Ol:()=>y,My:()=>_,Mo:()=>f,lD:()=>v});var r=i(9904),s=i(7623),n=i(6132),a=i(1287),o=i(5173);class l extends a.j{constructor(t){super(!1),this.type=o._f.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}var h=i(8028),u=i(6082),d=i(8378),c=i(8986);class p{constructor(){this.type=o._f.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}scale(t){return!(0,u.Z)(t)&&(0,d.Z)(+t)?this._range[(0,c.b4)(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){let e=this._range.indexOf(t);return[this._domain[e-1],this._domain[e]]}domain(t){return t?(this._domain=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(t){return t?(this._range=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return(new p).domain(this._domain).range(this._range).unknown(this._unknown)}}var g=i(2193);let m={linear:n.f,band:a.j,point:l,ordinal:h.J,threshold:p,colorOrdinal:g.m};function f(t){let e=m[t];return e?new e:null}function v(t,e){var i,s;if("scale"in t&&t.scale)return(0,r.Z)(t.scale)&&(null==e?void 0:e.globalScale)?e.globalScale.registerMarkAttributeScale(t,e.seriesId):t.scale;let n=f(t.type);return n&&(i=n,s=t,i&&s&&(s.domain&&i.domain(s.domain),s.range&&i.range(s.range),s.specified&&i.specified&&i.specified(s.specified),s.clamp&&i.clamp&&i.clamp(s.clamp))),n}function y(t,e,i){if(!e)return t;let r=e.range(),s=i&&e._calculateWholeRange?e._calculateWholeRange(r):e.range();return Math.min(Math.max(Math.min(s[0],s[s.length-1]),t),Math.max(s[0],s[s.length-1]))}function _(t){return(0,s.Z)(null==t?void 0:t.field)&&(0,s.Z)(null==t?void 0:t.scale)}},1960:function(t,e,i){"use strict";i.d(e,{Ek:()=>m,G$:()=>f,Mv:()=>c,hU:()=>d,qY:()=>p,qt:()=>g,uj:()=>v,vk:()=>u});var r=i(7636),s=i(9904),n=i(6948),a=i(4154),o=i(1601),l=i(9038),h=i(6082);function u(t){switch(t){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function d(t){return!!(0,s.Z)(t)&&!!t.endsWith("%")&&(0,n.hi)(t.substring(0,t.length-1))}function c(t,e,i,r=0){var s,n;return(0,o.Z)(t)?t:d(t)?Number(t.substring(0,t.length-1))*e/100:(0,l.Z)(t)?t(i):(0,a.Z)(t)?e*(null!==(s=t.percent)&&void 0!==s?s:0)+(null!==(n=t.offset)&&void 0!==n?n:0):r}function p(t,e,i){var r,s,n,a;let l={top:0,bottom:0,left:0,right:0};return Object.values(t).every(t=>(0,o.Z)(t))?(l.top=null!==(r=t.top)&&void 0!==r?r:0,l.right=null!==(s=t.right)&&void 0!==s?s:0,l.bottom=null!==(n=t.bottom)&&void 0!==n?n:0,l.left=null!==(a=t.left)&&void 0!==a?a:0):[{orients:["left","right"],size:e.width},{orients:["top","bottom"],size:e.height}].forEach(e=>{e.orients.forEach(r=>{l[r]=c(t[r],e.size,i)})}),l}function g(t,e){return t?{width:Math.ceil(Math.min(t.x2-t.x1,e.width)),height:Math.ceil(Math.min(t.y2-t.y1,e.height))}:{width:0,height:0}}function m(t){let e={};return(0,r.Z)(t)?((0,h.Z)(t[0])||(e.top=e.left=e.bottom=e.right=t[0]),(0,h.Z)(t[1])||(e.left=e.right=t[1]),(0,h.Z)(t[2])||(e.bottom=t[2]),(0,h.Z)(t[3])||(e.left=t[3]),e):(0,o.Z)(t)||d(t)||(0,l.Z)(t)||(0,a.Z)(t)&&("percent"in t||"offset"in t)?(e.top=e.left=e.bottom=e.right=t,e):(0,a.Z)(t)?e=Object.assign({},t):e}function f(t,e,i){return i?{x:t.x+e.x,y:t.y+e.y}:t}let v=(t,e)=>{let i=Number(t),r=t.toString();return isNaN(i)&&"%"===r[r.length-1]?e*(Number(r.slice(0,r.length-1))/100):i}},123:function(t,e,i){"use strict";i.d(e,{Wi:()=>l,Zv:()=>o,h_:()=>u,ko:()=>h,ro:()=>a});var r=i(9038),s=i(1121),n=i(1805);function a(t={}){let e=Object.assign({},t);if((0,r.Z)(t.style)?e.style=(e,i,r,s)=>u(t.style(e,i,r,s)):(0,s.Z)(t.style)||(e.style=u(t.style)),!(0,s.Z)(t.state)){let i={};Object.keys(t.state).forEach(e=>{(0,r.Z)(t.state[e])?i[e]=(i,r,s,n)=>u(t.state[e](i,r,s,n)):(0,s.Z)(t.state[e])||(i[e]=u(t.state[e]))}),e.state=i}return e}function o(t){if((0,s.Z)(t))return null;let e={};return Object.keys(t).forEach(i=>{(0,r.Z)(t[i])?e[i]=(e,r,s,n)=>u(t[i](e,r,s,n)):(0,s.Z)(t[i])||(e[i]=u(t[i]))}),e}function l(t){if((0,s.Z)(t))return null;let e={};return Object.keys(t).forEach(i=>{(0,r.Z)(t[i])?e[i]=(e,r,s,n)=>u(t[i](e.rawValue,r,e,s,n)):(0,s.Z)(t[i])||(e[i]=u(t[i]))}),e}function h(t,e){if((0,s.Z)(t))return null;let i={};return Object.keys(t).forEach(s=>{(0,r.Z)(t[s])?i[s]=t[s](e):i[s]=t[s]}),u(i)}function u(t){return(null==t?void 0:t.angle)&&(t.angle=(0,n.M4)(t.angle)),t}},3066:function(t,e,i){"use strict";i.d(e,{hr:()=>o,sj:()=>h});var r=i(4546),s=i(4370),n=i(4218),a=i(8469);function o(t,...e){return(0,n.H)(l(t),...e.map(l))}function l(t){var e,i;if(!t)return t;let r=((i=t.colorScheme)&&(i=Object.keys(i).reduce((t,e)=>{let r=i[e];return t[e]=(0,s.EG)(r),t},{})),i);return Object.assign({},t,{colorScheme:r,token:null!==(e=t.token)&&void 0!==e?e:{},series:Object.assign({},t.series)})}function h(t,e,i,s){let o=a.F.getSeriesMarkMap(e);if(!o)return t;let l={};return Object.values(o).forEach(({type:e,name:a})=>{l[a]=(0,n.H)({},null==i?void 0:i[(0,r.IX)(e)[0]],null==s?void 0:s[a],null==t?void 0:t[a])}),Object.assign(Object.assign({},t),l)}},6948:function(t,e,i){"use strict";i.d(e,{S5:()=>h,hi:()=>o,sT:()=>l});var r=i(1601),s=i(8378),n=i(6082),a=i(7636);function o(t){return null!=t&&""!==t&&(!!(0,r.Z)(t)||+t==+t)}function l(t){if((0,s.Z)(t))return t;let e=+t;return(0,s.Z)(e)?e:0}function h(t){return!(!t||0===t.length)&&!(0,n.Z)(t[0])&&!(0,n.Z)(t[0].dataId)&&(0,a.Z)(t[0].fields)}},2449:function(t,e,i){"use strict";i.d(e,{q:()=>o});var r=i(1312),s=i.n(r),n=i(4659),a=i(5375);class o{constructor(t){var e;let i;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new(s()),i=(null==t?void 0:t.name)?t.name:(0,a.F)("dataset"),this.name=i,this._logger=null!==(e=null==t?void 0:t.logger)&&void 0!==e?e:n.Y.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,e){var i;this.dataViewMap[t]&&(null===(i=this._logger)||void 0===i||i.error(`Error: dataView ${t} 之前已存在，请重新命名`)),this.dataViewMap[t]=e}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,e){var i;this.parserMap[t]&&(null===(i=this._logger)||void 0===i||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.parserMap[t]=e}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,e){var i;this.transformMap[t]&&(null===(i=this._logger)||void 0===i||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.transformMap[t]=e}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,e,i){this._callMap||(this._callMap=new Map);let r=this._callMap.get(i);r||(r=()=>{t.some(t=>t.isRunning)||i()}),t.forEach(t=>{t.target.addListener(e,r)}),this._callMap.set(i,r)}allDataViewAddListener(t,e){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,e)}multipleDataViewRemoveListener(t,e,i){if(this._callMap){let r=this._callMap.get(i);r&&t.forEach(t=>{t.target.removeListener(e,r)}),this._callMap.delete(i)}}multipleDataViewUpdateInParse(t){t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.markRunning()}),t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.parseNewData(t.data,t.options)})}multipleDataViewUpdateInRawData(t){t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.markRunning()}),t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.updateRawData(t.data,t.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}},6338:function(t,e,i){"use strict";i.d(e,{VO:()=>d});var r=i(1312),s=i.n(r),n=i(645),a=i(325),o=i(6082),l=i(5375),h=i(6680);let u="_data-view-diff-rank";class d{constructor(t,e){let i;this.dataSet=t,this.options=e,this.isDataView=!0,this.target=new(s()),this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(t={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(e=>{this.executeTransform(e,{pushHistory:t.pushHistory,emitMessage:!1}),this.isLastTransform(e)&&this.diffLastData()}),this.isRunning=!1,!1!==t.emitMessage&&this.target.emit("change",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},i=(null==e?void 0:e.name)?e.name:(0,l.F)("dataview"),this.name=i,(null==e?void 0:e.history)&&(this.history=e.history,this.historyData=[]),this.dataSet.setDataView(i,this),this.setFields(null==e?void 0:e.fields)}parse(t,e,i=!1){var r;this.isRunning=!0,i&&this.target.emit("beforeParse",[]),e&&(this.parseOption=e);let s=this.cloneParseData(t,e);if(null==e?void 0:e.type){let t=(null!==(r=this.dataSet.getParser(e.type))&&void 0!==r?r:this.dataSet.getParser("bytejson"))(s,e.options,this);this.rawData=s,this.parserData=t,this.history&&this.historyData.push(s,t),this.latestData=t}else this.parserData=s,this.rawData=s,this.history&&this.historyData.push(s),this.latestData=s;return this.isRunning=!1,i&&this.target.emit("afterParse",[]),this}transform(t,e=!0){if(this.isRunning=!0,t&&t.type){let i=!0;if("fields"===t.type){this._fields=t.options.fields;let e=this.transformsArr.findIndex(e=>e.type===t.type);e>=0&&(i=!1,this.transformsArr[e].options.fields=this._fields)}if(i&&this.transformsArr.push(t),e){let e=this.isLastTransform(t);this.executeTransform(t),e&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(t){return this.transformsArr[this.transformsArr.length-1]===t}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((t,e)=>{var i,r;return(null!==(i=t.level)&&void 0!==i?i:0)-(null!==(r=e.level)&&void 0!==r?r:0)})}executeTransform(t,e={pushHistory:!0,emitMessage:!0}){let{pushHistory:i,emitMessage:r}=e,s=this.dataSet.getTransform(t.type)(this.latestData,t.options);this.history&&!1!==i&&this.historyData.push(s),this.latestData=s,!1!==r&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(t){this._diffData=!0,this._diffKeys=t,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var t;if(!this._diffData||!this.latestData.forEach||!(null===(t=this._diffKeys)||void 0===t?void 0:t.length))return;let e=this._diffRank+1;if(0===this._diffRank)this.latestData.forEach(t=>{t[u]=e,this._diffMap.set(this._diffKeys.reduce((e,i)=>e+t[i],""),t)}),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let t;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach(i=>{i[u]=e,t=this._diffKeys.reduce((t,e)=>t+i[e],""),this._diffMap.get(t)?this.latestDataAUD.update.push(i):this.latestDataAUD.add.push(i),this._diffMap.set(t,i)}),this._diffMap.forEach((t,i)=>{t[u]<e&&(this.latestDataAUD.del.push(t),this._diffMap.delete(i))})}this._diffRank=e}cloneParseData(t,e){let i=!1;return t instanceof d||!0!==(null==e?void 0:e.clone)||(i=!0),i?(0,n.Z)(t):t}parseNewData(t,e){this.parse(t,e||this.parseOption),this.reRunAllTransform()}updateRawData(t,e){let i=this.cloneParseData(t,e);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:"dataview"===(null===(t=this.parseOption)||void 0===t?void 0:t.type)&&1===this.rawData.length&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,e=!1){this._fields=t&&e?(0,a.Z)({},this._fields,t):t;let i=this.transformsArr.find(t=>"fields"===t.type);!(0,o.Z)(this._fields)&&(0,o.Z)(i)?(this.dataSet.registerTransform("fields",h.X),this.transform({type:"fields",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}},5795:function(t,e,i){"use strict";i.d(e,{i:()=>n});var r=i(1036),s=i(7636);let n=(t,e,i)=>{let n=!(0,r.Z)(null==e?void 0:e.dependencyUpdate)||(null==e?void 0:e.dependencyUpdate);if(!t||!(0,s.Z)(t))throw TypeError("Invalid data: must be DataView array!");return(0,s.Z)(i.rawData)&&i.rawData.forEach(t=>{t.target&&(t.target.removeListener("change",i.reRunAllTransform),t.target.removeListener("markRunning",i.markRunning))}),n&&t.forEach(t=>{t.target.addListener("change",i.reRunAllTransform),t.target.addListener("markRunning",i.markRunning)}),t}},8947:function(t,e,i){"use strict";i.d(e,{$W:()=>_,UI:()=>b,mK:()=>x});var r,s,n={},a={};function o(t){return Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function l(t){var e=Object.create(null),i=[];return t.forEach(function(t){for(var r in t)r in e||i.push(e[r]=r)}),i}function h(t,e){var i=t+"",r=i.length;return r<e?Array(e-r+1).join(0)+i:i}function u(t){var e=RegExp('["'+t+"\n\r]"),i=t.charCodeAt(0);function r(t,e){var r,s=[],o=t.length,l=0,h=0,u=o<=0,d=!1;function c(){if(u)return a;if(d)return d=!1,n;var e,r,s=l;if(34===t.charCodeAt(s)){for(;l++<o&&34!==t.charCodeAt(l)||34===t.charCodeAt(++l););return(e=l)>=o?u=!0:10===(r=t.charCodeAt(l++))?d=!0:13===r&&(d=!0,10===t.charCodeAt(l)&&++l),t.slice(s+1,e-1).replace(/""/g,'"')}for(;l<o;){if(10===(r=t.charCodeAt(e=l++)))d=!0;else if(13===r)d=!0,10===t.charCodeAt(l)&&++l;else if(r!==i)continue;return t.slice(s,e)}return u=!0,t.slice(s,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=c())!==a;){for(var p=[];r!==n&&r!==a;)p.push(r),r=c();(!e||null!=(p=e(p,h++)))&&s.push(p)}return s}function s(e,i){return e.map(function(e){return i.map(function(t){return d(e[t])}).join(t)})}function u(e){return e.map(d).join(t)}function d(t){var i,r,s,n,a,o;return null==t?"":t instanceof Date?(r=(i=t).getUTCHours(),s=i.getUTCMinutes(),n=i.getUTCSeconds(),a=i.getUTCMilliseconds(),isNaN(i)?"Invalid Date":((o=i.getUTCFullYear())<0?"-"+h(-o,6):o>9999?"+"+h(o,6):h(o,4))+"-"+h(i.getUTCMonth()+1,2)+"-"+h(i.getUTCDate(),2)+(a?"T"+h(r,2)+":"+h(s,2)+":"+h(n,2)+"."+h(a,3)+"Z":n?"T"+h(r,2)+":"+h(s,2)+":"+h(n,2)+"Z":s||r?"T"+h(r,2)+":"+h(s,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var i,s,n=r(t,function(t,r){var n;if(i)return i(t,r-1);s=t,i=e?(n=o(t),function(i,r){return e(n(i),r,t)}):o(t)});return n.columns=s||[],n},parseRows:r,format:function(e,i){return null==i&&(i=l(e)),[i.map(d).join(t)].concat(s(e,i)).join("\n")},formatBody:function(t,e){return null==e&&(e=l(t)),s(t,e).join("\n")},formatRows:function(t){return t.map(u).join("\n")},formatRow:u,formatValue:d}}var d=u(","),c=d.parse;d.parseRows,d.format,d.formatBody,d.formatRows,d.formatRow,d.formatValue;var p=u("	"),g=p.parse;p.parseRows,p.format,p.formatBody,p.formatRows,p.formatRow,p.formatValue;var m=i(9904);(r=s||(s={})).DSV="dsv",r.TREE="tree",r.GEO="geo",r.BYTE="bytejson",r.HEX="hex",r.GRAPH="graph",r.TABLE="table",r.GEO_GRATICULE="geo-graticule";var f=i(645),v=i(4154);let y={delimiter:","},_=(t,e={},i)=>{i.type=s.DSV;let{delimiter:r}=function(t,...e){return function(t,...e){t||(t={});let i=-1,r=e.length;for(;++i<r;)!function(t,e){if((0,v.Z)(e)&&t!==e)for(let i in e)!function t(e,i,r){let s=i[r];if(void 0===s)e[r]=null;else if((0,v.Z)(s))for(let i in(0,v.Z)(e[r])||(e[r]={}),s)t(e[r],s,i);else e[r]=s}(t,e,i)}(t,e[i]);return t}((0,f.Z)(t),...e)}(y,e);if(!(0,m.Z)(r))throw TypeError("Invalid delimiter: must be a string!");return u(r).parse(t)},b=(t,e={},i)=>(i.type=s.DSV,c(t)),x=(t,e={},i)=>(i.type=s.DSV,g(t))},6680:function(t,e,i){"use strict";i.d(e,{X:()=>r});let r=(t,e)=>{var i,r;if(!(null==e?void 0:e.fields)||0===t.length)return t;let s=e.fields,n=t[0],a={},o=[];for(let e in s)if(Object.prototype.hasOwnProperty.call(s,e)){let l;let h=s[e];if(!h.type){let r=n;e in n||(r=null!==(i=t.find(t=>e in t))&&void 0!==i?i:n),h.type="number"==typeof r[e]?"linear":"ordinal"}if("number"==typeof h.sortIndex&&(l={key:e,type:h.type,index:h.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:!0===h.sortReverse},o.push(l)),(null===(r=h.domain)||void 0===r?void 0:r.length)>0){if("ordinal"===h.type){h._domainCache={},a[e]=h;let t={};h.domain.forEach((e,i)=>{t[e]=i,h._domainCache[e]=i}),l&&(l.sortIndex=t,l.sortIndexCount=h.domain.length)}else h.domain.length>=2&&(a[e]=h)}}return Object.keys(a).length>0&&(t=t.filter(t=>{for(let e in a){let i=a[e];if("ordinal"===i.type){if(!(t[e]in i._domainCache))return!1}else if(i.domain[0]>t[e]||i.domain[1]<t[e])return!1}return!0})),o.sort((t,e)=>t.index-e.index),t.sort((t,e)=>(function(t,e,i){for(let r=0;r<i.length;r++){let s=i[r],n=0;if("ordinal"===s.type?(void 0===s.sortIndex[e[s.key]]&&(s.sortIndex[e[s.key]]=s.sortIndexCount++),void 0===s.sortIndex[t[s.key]]&&(s.sortIndex[t[s.key]]=s.sortIndexCount++),n=s.sortIndex[t[s.key]]-s.sortIndex[e[s.key]]):"linear"===s.type&&(n=t[s.key]-e[s.key]),s.sortReverse&&(n=-n),0!==n)return n}return 0})(t,e,o)),t}},5375:function(t,e,i){"use strict";i.d(e,{F:()=>s});let r=0;function s(t="dataset"){return r>1e8&&(r=0),t+"_"+r++}},1996:function(t,e,i){"use strict";i.d(e,{uy:()=>J,T_:()=>K});var r=i(325),s=i(9904),n=i(6082),a=i(1121),o=i(5859),l=i(1130),h=i(8378),u=i(4546),d=i(9038),c=i(7623),p=i(3215),g=i(7773),m=i(7578),f=i(114),v=i(7449),y=i(645),_=i(8103),b=i(3e3),x=i(8144),S=i(9167),A=i(1670),k=i(1833),w=i(7078),C=i(7413),T=i(3151);class E extends b.k{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=(0,T.fM)(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=(0,T.lO)(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=(0,T.Q6)(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){let e=(0,y.Z)(this.attribute);(0,r.Z)(this.attribute,t);let i=m.i.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=e,i.AABBBounds}render(){this._prevInnerView=this._innerView&&(0,C.uX)(this._innerView),this.removeAllChild(!0),this._innerView=m.i.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){if(this.attribute.disableTriggerEvent)return;let{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){let{title:e,label:i,tick:r,line:s,items:n}=this.attribute,a=m.i.group({x:0,y:0,zIndex:1,pickable:!1});if(a.name=A.X9.axisContainer,a.id=this._getNodeId("container"),a.setMode(this.mode),this.axisContainer=a,t.add(a),s&&s.visible&&this.renderLine(a),n&&n.length&&(this.data=this._transformItems(n[0]),r&&r.visible&&this.renderTicks(a),i&&i.visible)){let t=m.i.group({x:0,y:0,pickable:!1});t.name=A.X9.labelContainer,t.id=this._getNodeId("label-container"),this.axisLabelsContainer=t,a.add(t),n.forEach((e,i)=>{let r=this.renderLabels(t,e,i),s=r.getChildren();this.beforeLabelsOverlap(s,e,r,i,n.length),this.handleLabelsOverlap(s,e,r,i,n.length),this.afterLabelsOverlap(s,e,r,i,n.length);let a=0,o=0,l="center",h="middle",u=0;s.forEach((t,e)=>{var i;let r=t.attribute,s=null!==(i=r.angle)&&void 0!==i?i:0,n=t.AABBBounds,d=n.width(),c=n.height();s&&(d=Math.abs(d*Math.cos(s)),c=Math.abs(c*Math.sin(s))),a=Math.max(a,d),o=Math.max(o,c),l=r.textAlign,h=r.textBaseline,0===e&&(u=r.x)}),this.axisLabelLayerSize[i]={width:a,height:o,labelPos:u,textAlign:l,textBaseline:h}})}e&&e.visible&&this.renderTitle(a)}renderTicks(t){let e=this.getTickLineItems(),i=m.i.group({x:0,y:0,pickable:!1});i.name=A.X9.tickContainer,i.id=this._getNodeId("tick-container"),t.add(i),e.forEach((t,s)=>{var n;let o=m.i.line(Object.assign({},this._getTickLineAttribute("tick",t,s,e)));if(o.name=A.X9.tick,o.id=this._getNodeId(t.id),(0,a.Z)(null===(n=this.attribute.tick)||void 0===n?void 0:n.state))o.states=S.n0;else{let t=this.data[s],e=(0,r.Z)({},S.n0,this.attribute.tick.state);Object.keys(e).forEach(i=>{(0,d.Z)(e[i])&&(e[i]=e[i](t.rawValue,s,t,this.data))}),o.states=e}i.add(o)}),this.tickLineItems=e;let{subTick:s}=this.attribute;if(s&&s.visible){let t=this.getSubTickLineItems();t.length&&t.forEach((t,n)=>{let o=m.i.line(Object.assign({},this._getTickLineAttribute("subTick",t,n,e)));if(o.name=A.X9.subTick,o.id=this._getNodeId(`${n}`),(0,a.Z)(s.state))o.states=S.n0;else{let i=(0,r.Z)({},S.n0,s.state);Object.keys(i).forEach(r=>{(0,d.Z)(i[r])&&(i[r]=i[r](t.value,n,t,e))}),o.states=i}i.add(o)}),this.subTickLineItems=t}}renderLabels(t,e,i){let{dataFilter:s}=this.attribute.label;s&&(0,d.Z)(s)&&(e=s(e,i));let n=this._transformItems(e),o=m.i.group({x:0,y:0,pickable:!1});return o.name=`${A.X9.labelContainer}-layer-${i}`,o.id=this._getNodeId(`label-container-layer-${i}`),t.add(o),n.forEach((t,e)=>{var s;let l=this._getLabelAttribute(t,e,n,i),h=(0,x.vS)(l);if(h.name=A.X9.label,h.id=this._getNodeId(`layer${i}-label-${t.id}`),(0,a.Z)(null===(s=this.attribute.label)||void 0===s?void 0:s.state))h.states=S.n0;else{let s=(0,r.Z)({},S.n0,this.attribute.label.state);Object.keys(s).forEach(r=>{(0,d.Z)(s[r])&&(s[r]=s[r](t,e,n,i))}),h.states=s}h.data=Object.assign(Object.assign({},t),{index:e,layer:i}),o.add(h)}),o}renderTitle(t){let e=this.getTitleAttribute(),i=new w.V(Object.assign({},e));i.name=A.X9.title,i.id=this._getNodeId("title"),t.add(i)}getVerticalCoord(t,e,i){return(0,C.cN)(t,this.getVerticalVector(e,i,t))}getTickLineItems(){let{tick:t}=this.attribute,e=this.data,i=[],{alignWithLabel:r,inside:s=!1,length:n,dataFilter:a}=t,o=1;return e.length>=2&&(o=e[1].value-e[0].value),(a&&(0,d.Z)(a)?a(e):e).forEach(t=>{let e=t.point,a=t.value;if(!r){let i=t.value-o/2;if(this.isInValidValue(i))return;e=this.getTickCoord(i),a=i}let l=this.getVerticalCoord(e,n,s);if("3d"===this.mode){let r=this.getVerticalVector(n,s,e),o=0,h=0;(0,_.Wn)(r[0])>(0,_.Wn)(r[1])?o=_.pi/2*(l.x>e.x?1:-1):h=_.pi/2*(l.y>e.y?-1:1),i.push({start:e,end:l,value:a,id:`tick-${t.id}`,anchor:[e.x,e.y],alpha:o,beta:h})}else i.push({start:e,end:l,value:a,id:`tick-${t.id}`})}),i}getSubTickLineItems(){let{subTick:t}=this.attribute,e=[],{count:i=4,inside:r=!1,length:s=2}=t,n=this.tickLineItems,a=n.length;if(a>=2)for(let t=0;t<a-1;t++){let a=n[t],o=n[t+1];for(let t=0;t<i;t++){let n=(t+1)/(i+1),l=(1-n)*a.value+n*o.value,h=this.getTickCoord(l),u=this.getVerticalCoord(h,s,r);e.push({start:h,end:u,value:l,id:`sub-tick-${l}`})}}return e}_getTickLineAttribute(t,e,i,s){let n=(0,l.Z)(this.attribute,`${t}.style`),a=this.data[i];n=(0,d.Z)(n)?(0,r.Z)({},(0,l.Z)(k.p,`${t}.style`),"tick"===t?n(a.rawValue,i,a,this.data):n(e.value,i,e,s)):n;let{start:o,end:h,anchor:u,alpha:c,beta:p}=e;return Object.assign({points:[o,h],anchor:u,alpha:c,beta:p},n)}_getLabelAttribute(t,e,i,s){var n,a;let{space:o=4,inside:h=!1,formatMethod:u,type:c="text",text:p}=this.attribute.label,g=o,m=0;(null===(n=this.attribute.tick)||void 0===n?void 0:n.visible)&&this.attribute.tick.inside===h&&(m=this.attribute.tick.length||4),(null===(a=this.attribute.subTick)||void 0===a?void 0:a.visible)&&this.attribute.subTick.inside===h&&(m=Math.max(m,this.attribute.subTick.length||2)),g+=m;let f=this.getRelativeVector(t.point);s>0&&(0===f[1]?g+=(this.axisLabelLayerSize[s-1].height+(0,l.Z)(this.attribute,"label.space",4))*s:g+=(this.axisLabelLayerSize[s-1].width+(0,l.Z)(this.attribute,"label.space",4))*s);let v=this.getVerticalCoord(t.point,g,h),y=this.getVerticalVector(g||1,h,v),_=u?u(`${t.label}`,t,e,i,s):t.label,{style:b}=this.attribute.label;b=(0,d.Z)(b)?(0,r.Z)({},k.p.label.style,b(t,e,i,s)):b;let x=this.getLabelAlign(y,h,b.angle);return b=(0,r.Z)(x,b),(0,d.Z)(b.text)&&(b.text=b.text({label:t.label,value:t.rawValue,index:t.index,layer:s})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(v,y,_,b)),{text:null!=p?p:_,_originText:t.label,lineHeight:null==b?void 0:b.fontSize,type:c}),b)}getLabelPosition(t,e,i,r){return t}_transformItems(t){let e=[];return t.forEach(t=>{var i;e.push(Object.assign(Object.assign({},t),{point:this.getTickCoord(t.value),id:null!==(i=t.id)&&void 0!==i?i:t.label}))}),e}release(){super.release(),this._prevInnerView=null,this._innerView=null}}let M={parity:function(t){return t.filter((t,e)=>e%2?t.setAttribute("opacity",0):1)},greedy:function(t,e){let i;return t.filter((t,r)=>r&&(0,C.qw)(i,t,e)?t.setAttribute("opacity",0):(i=t,1))}};function B(t){let e;return(e=t.OBBBounds.empty()?t.AABBBounds:t.OBBBounds).width()>1&&e.height()>1}function D(t,e,i,r,s=!1){if(i&&!t.attribute.opacity){let i=e.length;if(i>1){t.setAttribute("opacity",1);for(let t=0;t<i;t++){let n=s?e[i-1-t]:e[t];if(!r(n))break;n.setAttribute("opacity",0)}}}}var O=i(1805),P=i(5198);function I(t=0){if(t<0)for(;t<0;)t+=2*Math.PI;if(t>0)for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function R(t,e=0){let i,r=["center","left","left","left","center","right","right","right","left"],s=["top","top","middle","bottom","bottom","bottom","middle","top","top"];"top"===t&&(r=["center","right","right","right","center","left","left","left","right"],s=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);let n=(e=I(e))/(.5*Math.PI);return{textAlign:r[i=n===Math.floor(n)?2*Math.floor(n):2*Math.floor(n)+1],textBaseline:s[i]}}function L(t,e=0){let i,r=["right","right","center","left","left","left","center","right","right"],s=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];"right"===t&&(r=["left","left","center","right","right","right","center","left","left"],s=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);let n=(e=I(e))/(.5*Math.PI);return{textAlign:r[i=n===Math.floor(n)?2*Math.floor(n):2*Math.floor(n)+1],textBaseline:s[i]}}var F=i(4154);function j(t,e,i){let r;return(0,h.Z)(e)&&(r=Math.abs(e-t)),(0,h.Z)(i)&&(r=(0,h.Z)(r)?Math.min(Math.abs(t-i),r):Math.abs(t-i)),r}var Z=i(3924),H=i(7192),N=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};(0,H.Vu)();class z extends E{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},z.defaultAttributes,t),e)}_renderInner(t){var e;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){let t=[];for(let e=0;e<this.attribute.breaks.length;e++){let{range:i,breakSymbol:r,rawRange:s}=this.attribute.breaks[e];t.push({startPoint:this.getTickCoord(i[0]),endPoint:this.getTickCoord(i[1]),range:i,breakSymbol:r,rawRange:s})}this._breaks=t}super._renderInner(t),this._breaks&&this._breaks.length&&this._breaks.forEach((e,i)=>{let{startPoint:r,endPoint:s,breakSymbol:n,rawRange:a}=e;if(!1!==(null==n?void 0:n.visible)){let e=m.i.group({zIndex:A.bz});e.name=A.X9.axisBreak,e.id=this._getNodeId(`${A.X9.axisBreak}-${i}`),e.data=a;let o=(0,C.uf)(n),l=m.i.symbol(Object.assign({x:r.x,y:r.y},o));l.name=A.X9.axisBreakSymbol;let h=m.i.symbol(Object.assign({x:s.x,y:s.y},o));h.name=A.X9.axisBreakSymbol,e.add(l),e.add(h),t.add(e)}});let{panel:i}=this.attribute;if(i&&i.visible){let t=this.axisContainer,s=t.AABBBounds,n=m.i.rect(Object.assign({x:s.x1,y:s.y1,width:s.width(),height:s.height()},i.style));n.name=A.X9.background,n.id=this._getNodeId("background"),n.states=(0,r.Z)({},A.n0,null!==(e=i.state)&&void 0!==e?e:{}),t.insertBefore(n,t.firstChild)}}renderLine(t){let{start:e,end:i,line:s}=this.attribute,{startSymbol:n,endSymbol:o,style:l,state:h}=s,u=Object.assign({startSymbol:n,endSymbol:o,lineStyle:l},N(s,["startSymbol","endSymbol","style","state"]));if(this._breaks&&this._breaks.length){let t=[],r=e;this._breaks.forEach(e=>{let{startPoint:i,endPoint:s}=e;t.push([r,i]),r=s}),t.push([r,i]),u.points=t,u.multiSegment=!0}else u.points=[e,i];(0,a.Z)(h)||(u.state={line:(0,r.Z)({},A.n0,h),symbol:(0,r.Z)({},A.n0,h)});let d=new f.X(u);d.name=A.X9.line,d.id=this._getNodeId("line"),t.add(d)}getTextAlign(t){let e="center";return(0,o.Yt)(t[0],0)?(0,o.Yt)(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTitleAttribute(){var t,e,i;let s=this.attribute.title,{position:a="middle",space:o=4,textStyle:u={},autoRotate:d=!0,shape:c,background:p,state:g={},maxWidth:m}=s,f=N(s,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]),y=.5;"start"===a?y=0:"end"===a&&(y=1);let{verticalFactor:_=1}=this.attribute,b=this.getTickCoord(y),x=this.getRelativeVector(),S=0;if((null===(t=this.attribute.label)||void 0===t?void 0:t.visible)&&!1===this.attribute.label.inside){let t=+(0,l.Z)(this.attribute,"label.space",4);S+=t;let e=Object.keys(this.axisLabelLayerSize).length;if(0===x[1]){let i=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(i)?S+=i+(e-1)*t:S=0}else if(0===x[0]){if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){let i=this.axisLabelLayerSize[0].labelPos,r=this.axisLabelsContainer.AABBBounds;S+=(1==-1*_?r.x2>i?Math.min(r.x2-i,r.width()):0:r.x1<i?Math.min(i-r.x1,r.width()):0)+(e-1)*t}else S=0}else Object.keys(this.axisLabelLayerSize).forEach((e,i)=>{S+=this.axisLabelLayerSize[e].width+(i>0?t:0)})}let k=0;(null===(e=this.attribute.tick)||void 0===e?void 0:e.visible)&&!1===this.attribute.tick.inside&&(k=this.attribute.tick.length||4),(null===(i=this.attribute.subTick)||void 0===i?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(k=Math.max(k,this.attribute.subTick.length||2));let w=k+S+o,C=this.getVerticalCoord(b,w,!1),T=this.getVerticalVector(w,!1,{x:0,y:0}),E,M,{angle:B}=f;if(E="start"===a?"start":"end"===a?"end":"center",(0,n.Z)(B)&&d){B=(0,v.Dg)(x,[1,0],!0);let{verticalFactor:t=1}=this.attribute;M=1==-1*t?"bottom":"top"}else E=this.getTextAlign(T),M=this.getTextBaseline(T,!1);let D=m;if((0,n.Z)(D)){let{verticalLimitSize:t,verticalMinSize:e,orient:i}=this.attribute,r=Math.min(t||1/0,e||1/0);if((0,h.Z)(r)){if("bottom"===i||"top"===i){if(B!==Math.PI/2){let t=Math.abs(Math.cos(null!=B?B:0));D=t<1e-6?1/0:this.attribute.end.x/t}else D=r-w}else if(B&&0!==B){let t=Math.abs(Math.sin(B));D=t<1e-6?1/0:this.attribute.end.y/t}else D=r-w}}let O=Object.assign(Object.assign(Object.assign({},C),f),{maxWidth:D,textStyle:Object.assign({textAlign:E,textBaseline:M},u),state:{text:(0,r.Z)({},A.n0,g.text),shape:(0,r.Z)({},A.n0,g.shape),panel:(0,r.Z)({},A.n0,g.background)}});return O.angle=B,c&&c.visible&&(O.shape=Object.assign({visible:!0},c.style),c.space&&(O.space=c.space)),p&&p.visible&&(O.panel=Object.assign({visible:!0},p.style)),O}getTextBaseline(t,e){let i="middle",{verticalFactor:r=1}=this.attribute;return(0,o.Yt)(t[1],0)?i=!(0,o.Yt)(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":1==(e?1:-1)*r?"bottom":"top":t[1]>0?i="top":t[1]<0&&(i="bottom"),i}getLabelAlign(t,e,i){let r=this.attribute.orient;if(["top","bottom","right","left"].includes(r)||0===t[0]&&0===t[1]){if("top"===r||"bottom"===r)return R(e?"bottom"===r?"top":"bottom":r,i);if("left"===r||"right"===r)return L(e?"left"===r?"right":"left":r,i)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,i,r,s){var n,a,o,l;let{flush:h=!1}=this.attribute.label||{};if(h&&t.length){let{orient:e,start:i,end:r}=this.attribute,s="bottom"===e||"top"===e,h=t[0],d=(0,u.Z$)(t),c=s?h.attribute.x>d.attribute.x:h.attribute.y<d.attribute.y;if(s){let t=c?d:h,e=c?h:d,s=i.x,o=r.x,l=t.AABBBounds.x1,u=e.AABBBounds.x2;l<s&&(t.attribute.angle?t.setAttributes({dx:(null!==(n=t.attribute.dx)&&void 0!==n?n:0)+s-l}):t.setAttributes({x:s,textAlign:"left"})),u>o&&(e.attribute.angle?e.setAttributes({dx:(null!==(a=e.attribute.dx)&&void 0!==a?a:0)+o-u}):e.setAttributes({x:o,textAlign:"right"}))}else{let t=c?d:h,e=c?h:d,s=t.AABBBounds.y2,n=e.AABBBounds.y1,a=i.y,u=r.y;n<a&&(e.attribute.angle?e.setAttributes({dy:(null!==(o=e.attribute.dy)&&void 0!==o?o:0)+a-n}):e.setAttributes({y:a,textBaseline:"top"})),s>u&&(t.attribute.angle?t.setAttributes({dy:(null!==(l=t.attribute.dy)&&void 0!==l?l:0)+u-s}):t.setAttributes({y:u,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,i,r,s){if((0,a.Z)(t))return;let{verticalLimitSize:o,label:l,orient:c}=this.attribute,p=this._getAxisLabelLimitLength(o,s),{layoutFunc:g,autoRotate:m,autoRotateAngle:f,autoLimit:v,limitEllipsis:y,autoHide:b,autoHideMethod:x,autoHideSeparation:S,lastVisible:A,firstVisible:k,autoWrap:w,overflowLimitLength:T}=l;if((0,d.Z)(g))g(t,e,r,this);else{if(m)!function(t,e){if((0,a.Z)(t))return;let{orient:i,labelRotateAngle:r=[0,45,90]}=e;if(0===r.length||t.some(t=>!!t.attribute.angle))return;let s=0,n=0;for(r&&r.length>0&&(n=r.length);s<n;){var o,l;let e=r[s++];if(t.forEach(t=>{t.attribute.angle=(0,O.M4)(e)}),o=i,l=t,"bottom"!==o&&"top"!==o||function(t,e){e.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},R(t,e.attribute.angle)),{angle:I(e.attribute.angle)}))})}(o,l),"left"!==o&&"right"!==o||function(t,e){e.forEach((e,i)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},L(t,e.attribute.angle)),{angle:I(e.attribute.angle)}))})}(o,l),(0,P.PY)(l),!function(t){for(let e=1;e<t.length;e++)if((0,P.Ph)(t[e-1],t[e]))return!0;return!1}(t))break}}(t,{labelRotateAngle:f,orient:c});else if(w){let e="left"===c||"right"===c?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x);!function(t,e){let{limitLength:i,axisLength:r,ellipsis:s="...",orient:n}=e;if((0,a.Z)(t)||!(0,h.Z)(i))return;let o=t[0].attribute.angle,l=(0,P.nw)(o),u=(0,P.GK)(o),d="top"===n||"bottom"===n,c=r/t.length;t.forEach((e,r)=>{var n,a,o,p,g;if(d){if(u&&Math.floor(e.AABBBounds.height())<=i)return;if(l){let i=j(e.attribute.x,null===(n=t[r+1])||void 0===n?void 0:n.attribute.x,null===(a=t[r-1])||void 0===a?void 0:a.attribute.x);(0,h.Z)(i)&&(c=(0,_.VV)(c,i))}}else{if(u){let i=j(e.attribute.y,null===(o=t[r+1])||void 0===o?void 0:o.attribute.y,null===(p=t[r-1])||void 0===p?void 0:p.attribute.y);(0,h.Z)(i)&&(c=(0,_.VV)(c,i))}if(l&&Math.floor(e.AABBBounds.width())<=i)return}let m=null,f=null;d?u?(m=i,f=c):(m=c,f=i):u?(m=c,f=i):(m=i,f=c),e.setAttributes({maxLineWidth:m,ellipsis:null!==(g=e.attribute.ellipsis)&&void 0!==g?g:s,whiteSpace:"normal",heightLimit:f})})}(t,{orient:c,limitLength:p,axisLength:e,ellipsis:y})}if(!w&&v&&(0,h.Z)(p)&&p>0){let e="left"===c||"right"===c,i=e?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x),r=e?i/t.length:b||m?1/0:i/t.length;!function(t,e){var i;let{limitLength:r,verticalLimitLength:s,ellipsis:o="...",orient:l,axisLength:u}=e;if((0,a.Z)(t)||!(0,h.Z)(r))return;let d=(i=e.overflowLimitLength,(0,h.Z)(i)?{left:i,right:i}:(0,F.Z)(i)?{left:i.left||0,right:i.right||0}:{left:0,right:0}),c=t[0],p=c.attribute.angle,g=!(0,n.Z)(p),m=g?Math.cos(p):1,f=g?Math.sin(p):0,v=(0,P.nw)(p),y=(0,P.GK)(p),_="top"===l||"bottom"===l,b=c.attribute.direction,x=!v&&!y&&_&&(t.length<2||t.some(t=>Math.abs(t.AABBBounds.width()-c.AABBBounds.width())>=2))&&c.AABBBounds.width()>Math.abs(r/f);t.forEach(t=>{var e;if(_&&(y&&Math.floor(t.AABBBounds.height())<=r||v&&Math.floor(t.AABBBounds.width())<=s)||!_&&("vertical"===b&&Math.floor(t.AABBBounds.height())<=s||"vertical"!==b&&(v&&Math.floor(t.AABBBounds.width())<=r||y&&Math.floor(t.AABBBounds.height())<=s)))return;let i=null;if(v||y)i=_?v?s:r:"vertical"===b||y?s:r;else if(_){let{x1:e,x2:s}=t.AABBBounds,n=f/m,a=Math.abs(r/f);i=x&&n>0&&e<=u+d.right&&r/n+e>u+d.right?Math.min((u-e+d.right)/Math.abs(m),a):x&&n<0&&s>=-d.left&&r/n+s<-d.left?Math.min((s+d.left)/Math.abs(m),a):a}else i=Math.abs(r/m);(0,h.Z)(t.attribute.maxLineWidth)&&(i=(0,h.Z)(i)?Math.min(t.attribute.maxLineWidth,i):t.attribute.maxLineWidth),t.setAttributes({maxLineWidth:i,ellipsis:null!==(e=t.attribute.ellipsis)&&void 0!==e?e:o})})}(t,{limitLength:p,verticalLimitLength:r,ellipsis:y,orient:c,axisLength:i,overflowLimitLength:T})}b&&function(t,e){let i;if((0,a.Z)(t))return;let r=t.filter(B);if((0,a.Z)(r))return;r.forEach(t=>t.setAttribute("opacity",1)),i=r;let{method:s="parity",separation:n=0}=e,o=(0,d.Z)(s)?s:M[s]||M.parity;if(i.length>=3&&(0,C.A9)(i,n)){do i=o(i,n);while(i.length>=3&&(0,C.A9)(i,n));let t=((t,e,i=!0)=>i&&t<3||e)(i.length,e.firstVisible,!1),s=((t,e,i=!0)=>i&&t<3||e)(i.length,e.lastVisible),a=r[0],l=(0,u.Z$)(r);(0,C.qw)(a,l,n)&&t&&s&&(l.setAttribute("opacity",0),s=!1),D(a,i,t,t=>(0,C.qw)(t,a,n)),D(l,i,s,e=>(0,C.qw)(e,l,n)||!(!t||e===a)&&(0,C.qw)(e,a,n),!0)}r.forEach(t=>{t.setAttribute("visible",!!t.attribute.opacity)})}(t,{orient:c,method:x,separation:S,lastVisible:A,firstVisible:k})}}afterLabelsOverlap(t,e,i,r,s){let{verticalLimitSize:n,orient:a}=this.attribute,o="bottom"===a||"top"===a,l=i.AABBBounds,u=o?l.height():l.width(),{verticalMinSize:d}=this.attribute;if((0,h.Z)(d)&&(!(0,h.Z)(n)||d<=n)){let t,e;u=Math.max(u,this._getAxisLabelLimitLength(d,s)),"left"===a?(t=l.x2-u,e=l.y1):"right"===a?(t=l.x1,e=l.y1):"top"===a?(t=l.x1,e=l.y2-u):"bottom"===a&&(t=l.x1,e=l.y1);let r=m.i.rect({x:t,y:e,width:o?l.width():u,height:o?u:l.height(),pickable:!1});r.name=A.X9.axisLabelBackground,r.id=this._getNodeId("axis-label-background"),i.insertBefore(r,i.firstChild)}if((0,c.Z)(this.attribute.label.containerAlign)){var p,g,f;let e;"left"===a?e=l.x2-u:"right"===a?e=l.x1:"top"===a?e=l.y2-u:"bottom"===a&&(e=l.y1),p=e,g=u,f=this.attribute.label.containerAlign,"left"===a||"right"===a?"left"===f?t.forEach(t=>{var e;t.setAttributes({dx:(null!==(e=t.attribute.dx)&&void 0!==e?e:0)+p-t.AABBBounds.x1})}):"right"===f?t.forEach(t=>{var e;t.setAttributes({dx:(null!==(e=t.attribute.dx)&&void 0!==e?e:0)+p+g-t.AABBBounds.x2})}):"center"===f&&t.forEach(t=>{var e;t.setAttributes({dx:(null!==(e=t.attribute.dx)&&void 0!==e?e:0)+p+g/2-(t.AABBBounds.x1+t.AABBBounds.x2)/2})}):"bottom"!==a&&"top"!==a||("top"===f?t.forEach(t=>{var e;t.setAttributes({dy:(null!==(e=t.attribute.dy)&&void 0!==e?e:0)+p-t.AABBBounds.y1})}):"bottom"===f?t.forEach(t=>{var e;t.setAttributes({dy:(null!==(e=t.attribute.dy)&&void 0!==e?e:0)+p+g-t.AABBBounds.y2})}):"middle"===f&&t.forEach(t=>{var e;t.setAttributes({dy:(null!==(e=t.attribute.dy)&&void 0!==e?e:0)+p+g/2-(t.AABBBounds.y1+t.AABBBounds.y2)/2})}))}}_getAxisLabelLimitLength(t,e){var i,r,s,n,a;let{label:o,title:l,line:h,tick:u}=this.attribute,d=null!==(i=o.space)&&void 0!==i?i:4,c=t,g=0,m=0,f=h&&h.visible?null!==(r=h.style.lineWidth)&&void 0!==r?r:1:0,v=u&&u.visible?null!==(s=u.length)&&void 0!==s?s:4:0;if(l&&l.visible&&"string"==typeof l.text){g=(0,x.fe)(l.text,l.textStyle,null===(a=null===(n=this.stage)||void 0===n?void 0:n.getTheme())||void 0===a?void 0:a.text).height;let t=(0,p.o)(l.padding);m=l.space+t[0]+t[2]}return c&&(c=(c-d-m-g-f-v)/e),c}release(){super.release(),this._breaks=null}}z.defaultAttributes=k.p,(0,g.jB)(z,Z.b);var V=i(2698),U=i(9528),W=i(5395),G=i(9689),$=i(4761);let X=(t,e,i,s)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.axis)&&void 0!==a?a:{};if(!t)return(0,r.Z)({},h,null!=i?i:{});let u=[(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,s))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}))];return(0,r.Z)({},h,{items:u},null!=i?i:{})},Y=(t,e,i,s)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.circleAxis)&&void 0!==a?a:{};if(!t)return(0,r.Z)({},h,null!=i?i:{});let u=[(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,s))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}))];return(0,r.Z)({},h,{items:u},null!=i?i:{})},K=(t,e,i,r,s,n)=>{var a;let o=t.getCoordinateAxisPosition();s&&"auto"===s.position&&(s.position=i?"content":o);let l=t.getCoordinateAxisPoints(r);if(l){let r={start:l[0],end:l[1],verticalFactor:("top"===o||"left"===o?-1:1)*(i?-1:1)*((null===(a=t.getSpec().range)||void 0===a?void 0:a.reversed)?-1:1)};if(n&&"polar"===e.type){let t=e.angle();r.center=e.origin(),r.startAngle=t[0],r.endAngle=t[1]}return r}let h=e.radius(),u=e.angle();return{center:e.origin(),radius:h[1],innerRadius:h[0],inside:i,startAngle:u[0],endAngle:u[1]}};class q extends U.u{constructor(t,e,i){super(t,V.zH.axis,e),this.spec.componentType=V.zH.axis,this.mode=i}parseAddition(t){return super.parseAddition(t),this.axisType(t.axisType),this.tickCount(t.tickCount),this.inside(t.inside),this.baseValue(t.baseValue),this}scale(t){return super.scale(t),this._axisComponentType=null,this}axisType(t){return this.spec.axisType=t,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}addGraphicItem(t,e){let i=(0,r.Z)({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),s=$.F.createGraphicComponent(this._getAxisComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,s)}tickCount(t){let e=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}getAxisComponentType(){return this._axisComponentType}_updateComponentEncoders(){let t=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,e=Object.assign({update:{}},this.spec.encode),i=Object.keys(e).reduce((i,r)=>{let s=e[r];return s&&(i[r]={callback:(e,i,r)=>{var n,a;let o=this.spec.skipTheme?null:this.view.getCurrentTheme(),l=(0,W.i)(s,e,i,r),h=(0,G.ZO)(this.spec.inside,r,e,i),u=(0,G.ZO)(this.spec.baseValue,r,e,i),d=null===(n=null==t?void 0:t.getCoordinate)||void 0===n?void 0:n.call(t);d&&(l=Object.assign(K(t,d,h,u,this.spec.layout),l));let c=null===(a=null==t?void 0:t.getScale)||void 0===a?void 0:a.call(t),p=(0,G.ZO)(this.spec.tickCount,r,e,i);switch(this._getAxisComponentType()){case V.qs.lineAxis:return X(c,o,l,p);case V.qs.circleAxis:return Y(c,o,l,p)}return l}}),i},{});this._encoders=i}_getAxisComponentType(){var t;if(this._axisComponentType)return this._axisComponentType;let e=this.spec.axisType;if((0,n.Z)(e)){let i=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;e=(null===(t=null==i?void 0:i.getCoordinate)||void 0===t?void 0:t.call(i))?i.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType="circle"===e?V.qs.circleAxis:V.qs.lineAxis,this._axisComponentType}}q.componentType=V.zH.axis;let J=()=>{$.F.registerGraphicComponent(V.qs.lineAxis,(t,e)=>new z(t,e)),$.F.registerComponent(V.zH.axis,q)}},7092:function(t,e,i){"use strict";i.d(e,{pU:()=>M});var r=i(325),s=i(9904),n=i(2683),a=i(7773),o=i(9038),l=i(8103),h=i(7636),u=i(5859),d=i(7578),c=i(3e3),p=i(1670),g=i(7413);function m(t,e,i,r){let s="";if(!t||0===e.length)return s;let a=e[0],o=n.HL.distancePP(t,a),l=i?0:1;return r?s+=`M${t.x},${t.y-o}A${o},${o},0,0,${l},${t.x},${t.y+o}A${o},${o},0,0,${l},${t.x},${t.y-o}Z`:e.forEach((t,e)=>{0===e?s=`M${t.x},${t.y}`:s+=`A${o},${o},0,0,${l},${t.x},${t.y}`}),s}class f extends c.k{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&(0,g.uX)(this._innerView),this.removeAllChild(!0),this._innerView=d.i.group({x:0,y:0,pickable:!1}),this.add(this._innerView);let{items:t,visible:e}=this.attribute;t&&t.length&&!1!==e&&(this.data=this._transformItems(t),this._renderGrid(this._innerView))}getVerticalCoord(t,e,i){return(0,g.cN)(t,this.getVerticalVector(e,i,t))}_transformItems(t){let e=[];return t.forEach(t=>{var i;e.push(Object.assign(Object.assign({},t),{point:this.getTickCoord(t.value),id:null!==(i=t.id)&&void 0!==i?i:t.label}))}),e}_renderGrid(t){let{visible:e}=this.attribute.subGrid||{};e&&this._renderGridByType(!0,t),this._renderGridByType(!1,t)}_renderGridByType(t,e){let i=(0,r.Z)({},this.attribute,this.getGridAttribute(t)),{type:s,items:a,style:c,closed:v,alternateColor:y,depth:_=0}=i,b=t?`${p.X9.grid}-sub`:`${p.X9.grid}`;if(a.forEach((t,i)=>{let{id:n,points:a}=t,l="";if("line"===s||"polygon"===s)l=(0,g.st)(a,!!v);else if("circle"===s){let{center:t}=this.attribute;l=m(t,a,!1,!!v)}let h=d.i.path(Object.assign({path:l,z:_},(0,o.Z)(c)?(0,r.Z)({},this.skipDefault?null:f.defaultAttributes.style,c(t,i)):c));h.name=`${b}-line`,h.id=this._getNodeId(`${b}-path-${n}`),e.add(h)}),_&&"line"===s&&a.forEach((t,i)=>{let{id:s,points:n}=t,a=[];a.push(n[0]);let h=n[1].x-n[0].x,u=n[1].y-n[0].y,p=_/Math.sqrt(h*h+u*u);a.push({x:n[0].x+h*p,y:n[0].y+u*p});let m=(0,g.st)(a,!!v),y=(0,l.Wn)(a[0].x-a[1].x),x=(0,l.Wn)(a[0].y-a[1].y),S=d.i.path(Object.assign({path:m,z:0,alpha:y>x?(n[1].x-n[0].x>0?-1:1)*l.pi/2:0,beta:y<x?-l.pi/2:0,anchor3d:y>x?[a[0].x,0]:[0,a[0].y]},(0,o.Z)(c)?(0,r.Z)({},this.skipDefault?null:f.defaultAttributes.style,c(t,i)):c));S.name=`${b}-line`,S.id=this._getNodeId(`${b}-path-${s}`),e.add(S)}),a.length>1&&y){let t=(0,h.Z)(y)?y:[y,"transparent"],r=e=>t[e%t.length],s=this.attribute.items,o=s[0],l=s[s.length-1],c=!(0,u.Yt)(o.value,0)&&!(0,u.Yt)(l.value,0),p=!(0,u.Yt)(o.value,1)&&!(0,u.Yt)(l.value,1),f=[],v=o.value>l.value;(v&&p||!v&&c)&&f.push(this.getGridPointsByValue(v?1:0)),a.forEach(t=>{f.push(t.points)}),(v&&c||!v&&p)&&f.push(this.getGridPointsByValue(v?0:1));for(let t=0;t<f.length-1;t++){let s=function(t,e,i){let{type:r,closed:s}=i,a=e.slice(0).reverse(),o="",l="";if("line"===r&&i.smoothLink&&i.center){let e=t[0],r=a[0],h=i.center;o=(0,g.st)(t,!!s),l=(0,g.st)(a,!!s);let u=n.HL.distancePP(r,h),d=n.HL.distancePP(e,h);o+=`A${u},${u},0,0,1,${r.x},${r.y}L${r.x},${r.y}`,l+=`A${d},${d},0,0,0,${e.x},${e.y}`}else if("circle"===r){let{center:e}=i;o=m(e,t,!1,!!s),l=m(e,a,!0,!!s)}else"line"!==r&&"polygon"!==r||(o=(0,g.st)(t,!!s),l=(0,g.st)(a,!!s));return s?o+=l:(o+=l="L"+l.substring(1),o+="Z"),o}(f[t],f[t+1],i),a=d.i.path({path:s,fill:r(t)});a.name=`${b}-region`,a.id=this._getNodeId(`${b}-region-${t}`),e.add(a)}}}_getNodeId(t){return`${this.id}-${t}`}_parseTickSegment(){let t=1;return this.data.length>=2&&(t=this.data[1].value-this.data[0].value),t}_getPointsOfSubGrid(t,e){let i=this.data.length,r=[];return i>=2&&this.data.forEach(i=>{let s=i.value;if(!e){let e=i.value-t/2;if(this.isInValidValue(e))return;s=e}r.push({value:s})}),r}release(){super.release(),this._prevInnerView=null,this._innerView=null}}f.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};var v=i(9167),y=i(3924);(0,i(7192).nZ)();class _ extends f{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},f.defaultAttributes,t),e)}_getGridPoint(t,e){let i;if("line"===t){let{length:t}=this.attribute;i=[e,this.getVerticalCoord(e,t,!0)]}else if("circle"===t||"polygon"===t){let{center:t,sides:r=6,startAngle:s=v.v2,endAngle:a=v.Di}=this.attribute,o=n.HL.distancePP(t,e);i=(0,g.zl)(t,r,o,s,a)}return i}getGridPointsByValue(t){let e=this.getTickCoord(t);return this._getGridPoint(this.attribute.type,e)}getGridAttribute(t){let{type:e,alignWithLabel:i=!0}=this.attribute,s=this._parseTickSegment(),n,a=[];if(t){n=(0,r.Z)({},this.attribute,this.attribute.subGrid);let t=[],{count:e=4}=n;if(this.data.length>=2){let r=this._getPointsOfSubGrid(s,i);for(let i=0;i<r.length-1;i++){let s=r[i],n=r[i+1];t.push({id:`sub-${i}-0`,points:this.getGridPointsByValue(s.value),datum:{}});for(let r=0;r<e;r++){let a=(r+1)/(e+1),o=(1-a)*s.value+a*n.value;t.push({id:`sub-${i}-${r+1}`,points:this.getGridPointsByValue(o),datum:{}})}i===r.length-2&&t.push({id:`sub-${i}-${e+1}`,points:this.getGridPointsByValue(n.value),datum:{}})}a=t}}else{n=this.attribute;let t=[];this.data.forEach(r=>{let{point:n}=r;if(!i){let t=r.value-s/2;if(this.isInValidValue(t))return;n=this.getTickCoord(t)}t.push({id:r.label,datum:r,points:this._getGridPoint(e,n)})}),a=t}return Object.assign(Object.assign({},n),{items:a})}}(0,a.jB)(_,y.b);var b=i(2698),x=i(9528),S=i(5395),A=i(9689),k=i(1996),w=i(4761);let C=(t,e,i,s)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.grid)&&void 0!==a?a:{};if(!t)return(0,r.Z)({},h,null!=i?i:{});let u=(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,s))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}));return(0,r.Z)({},h,{items:u},null!=i?i:{})},T=(t,e,i,s)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.circleGrid)&&void 0!==a?a:{};if(!t)return(0,r.Z)({},h,null!=i?i:{});let u=(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,s))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}));return(0,r.Z)({},h,{items:u},null!=i?i:{})};class E extends x.u{constructor(t,e,i){super(t,b.zH.grid,e),this.spec.componentType=b.zH.grid,this.mode=i}parseAddition(t){return super.parseAddition(t),this.target(t.target),this.gridType(t.gridType),this.gridShape(t.gridShape),this}scale(t){return super.scale(t),this._gridComponentType=null,this}gridType(t){return this.spec.gridType=t,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}gridShape(t){return this.spec.gridShape=t,this.commit(),this}target(t){if(this.spec.target){let t=(0,s.Z)(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(t)}this.spec.target=t;let e=(0,s.Z)(t)?this.view.getMarkById(t):t;return this.attach(e),this._targetAxis=e,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}tickCount(t){let e=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}addGraphicItem(t,e){let i=(0,r.Z)({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),s=w.F.createGraphicComponent(this._getGridComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,s)}_updateComponentEncoders(){let t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((e,i)=>{let r=t[i];return r&&(e[i]={callback:(t,e,i)=>{var n,a,o,l;let h=this.spec.skipTheme?null:this.view.getCurrentTheme(),u,d=(0,S.i)(r,t,e,i),c=(0,A.ZO)(this.spec.baseValue,i,t,e);if(this._targetAxis){let t=null===(n=this._targetAxis.getSpec())||void 0===n?void 0:n.scale;u=(0,s.Z)(t)?this.view.getScaleById(t):t;let e=this._targetAxis.elements[0];if(e)switch(this._getGridComponentType()){case b.Fp.lineAxisGrid:d=Object.assign({x:e.getGraphicAttribute("x"),y:e.getGraphicAttribute("y"),start:e.getGraphicAttribute("start"),end:e.getGraphicAttribute("end"),verticalFactor:null!==(a=e.getGraphicAttribute("verticalFactor"))&&void 0!==a?a:1},d);break;case b.Fp.circleAxisGrid:d=Object.assign({x:e.getGraphicAttribute("x"),y:e.getGraphicAttribute("y"),center:e.getGraphicAttribute("center"),radius:e.getGraphicAttribute("radius"),innerRadius:e.getGraphicAttribute("innerRadius"),inside:e.getGraphicAttribute("inside"),startAngle:e.getGraphicAttribute("startAngle"),endAngle:e.getGraphicAttribute("endAngle")},d)}}else{u=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;let r=(0,A.ZO)(this.spec.inside,i,t,e),n=null===(o=null==u?void 0:u.getCoordinate)||void 0===o?void 0:o.call(u);n&&(d=Object.assign((0,k.T_)(u,n,r,c,this.spec.layout,!0),d))}this._getGridComponentType()===b.Fp.lineAxisGrid&&(d="line"!==this.spec.gridShape&&this.spec.gridShape?Object.assign({center:d.start,closed:!0},d,{type:this.spec.gridShape}):Object.assign({},d,{type:"line"}));let p=null===(l=null==u?void 0:u.getScale)||void 0===l?void 0:l.call(u),g=(0,A.ZO)(this.spec.tickCount,i,t,e);switch(this._getGridComponentType()){case b.Fp.lineAxisGrid:return C(p,h,d,g);case b.Fp.circleAxisGrid:return T(p,h,d,g)}return d}}),e},{});this._encoders=e}_getGridComponentType(){var t;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)"circle"===this.spec.gridType?this._gridComponentType=b.Fp.circleAxisGrid:this._gridComponentType=b.Fp.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case b.qs.circleAxis:this._gridComponentType=b.Fp.circleAxisGrid;break;case b.qs.lineAxis:default:this._gridComponentType=b.Fp.lineAxisGrid}else if(this.spec.scale){let e=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=(null===(t=null==e?void 0:e.getCoordinate)||void 0===t?void 0:t.call(e))?e.getCoordinateAxisPoints()?b.Fp.lineAxisGrid:b.Fp.circleAxisGrid:b.Fp.lineAxisGrid}else this._gridComponentType=b.Fp.lineAxisGrid;return this._gridComponentType}}E.componentType=b.zH.grid;let M=()=>{w.F.registerGraphicComponent(b.Fp.lineAxisGrid,(t,e)=>new _(t,e)),w.F.registerComponent(b.zH.grid,E)}},5341:function(t,e,i){"use strict";i.d(e,{Uq:()=>S});var r=i(325),s=i(6082),n=i(4546),a=i(9904),o=i(8378),l=i(3e3),h=i(3529),u=i(4309),d=i(3309),c=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class p extends l.k{constructor(t,e){let{dataLabels:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({dataLabels:i},(0,r.Z)({},p.defaultAttributes,c(t,["dataLabels"])))),this.name="data-label"}render(){var t;let{dataLabels:e,size:i}=this.attribute;if(!e||0===e.length)return;let{width:r=0,height:s=0,padding:n}=i||{};if(!r||!s||!(0,o.Z)(s*r))return;this._componentMap||(this._componentMap=new Map);let a=(0,h.OM)(r,s,n),l=a.bitmap(),c=new Map,p=this._componentMap;for(let r=0;r<e.length;r++){let s=e[r],n=(0,d.X)(s.type)||u.E;if(n){let{baseMarkGroupName:e,type:o}=s,h=null!==(t=s.id)&&void 0!==t?t:`${e}-${o}-${r}`;"arc"===s.type&&(s.width=i.width,s.height=i.height);let u=this._componentMap.get(h);u?(u.setBitmapTool(a),u.setBitmap(l),u.setAttributes(s)):((u=new n(s)).setBitmap(l),u.setBitmapTool(a),this.add(u)),c.set(h,u)}}p.forEach((t,e)=>{c.get(e)||this.removeChild(t)}),this._componentMap=c}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._componentMap.forEach(t=>{t.disableAnimation()})}enableAnimation(){this._componentMap.forEach(t=>{t.enableAnimation()})}}p.defaultAttributes={pickable:!1};var g=i(2698),m=i(7366),f=i(5395),v=i(9689),y=i(4761),_=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};let b=(t,e,i,n,a,o={})=>{var l;let h=null===(l=o.components)||void 0===l?void 0:l.dataLabel,u=t.map((t,e)=>{var s,l,h,u,d;let c=Object.assign(Object.assign({},a),{labelIndex:e}),p=null!==(s=(0,v.ZO)(n,c,t))&&void 0!==s?s:{},{components:m={}}=o,y={};switch(t.markType){case g.Cm.line:case g.Cm.area:y="line"===p.type?m.lineLabel:"area"===p.type?m.areaLabel:m.lineDataLabel;break;case g.Cm.rect:case g.Cm.rect3d:case g.Cm.interval:y=m.rectLabel;break;case g.Cm.symbol:case g.Cm.circle:case g.Cm.cell:y=m.symbolLabel;break;case g.Cm.arc:case g.Cm.arc3d:y=m.arcLabel;break;case g.Cm.polygon:case g.Cm.path:default:y=m.pointLabel}let b=null!==(l=p.data)&&void 0!==l?l:[],x=null!==(u=null===(h=null==y?void 0:y.data)||void 0===h?void 0:h[0])&&void 0!==u?u:{};if(b&&b.length>0)b.forEach((e,s)=>{if(t.elements[s]){let n=(0,f.i)(i,e,t.elements[s],c);(0,r.Z)(e,x,n)}});else{let e=(t,e)=>{let{data:i}=t,s=_(t,["data"]);return Object.assign(Object.assign({},(0,r.Z)({},e,s)),{data:i})};t.elements.forEach(r=>{if("willRelease"!==r.getGraphicItem().releaseStatus){if(t.isCollectionMark())r.getDatum().forEach(t=>{let s=(0,f.i)(i,t,r,c);b.push(e(s,x))});else{let t=(0,f.i)(i,r.getDatum(),r,c);b.push(e(t,x))}}})}let S=null===(d=t.graphicItem)||void 0===d?void 0:d.name,A=(0,r.Z)({},y,{baseMarkGroupName:S,getBaseMarks:()=>t.elements.map(t=>t.getGraphicItem())},null!=p?p:{});return A.data=null!=b?b:y.data,A}).filter(t=>!(0,s.Z)(t)),d=(0,r.Z)({},h,{size:e});return d.dataLabels=u,d};class x extends m.w{constructor(t,e){super(t,g.zH.label,e),this.spec.componentType=g.zH.label}parseAddition(t){return super.parseAddition(t),this.labelStyle(t.labelStyle),this.size(t.size),this.target(t.target),this}labelStyle(t){return this.setFunctionSpec(t,"labelStyle")}size(t){return this.setFunctionSpec(t,"size")}target(t){if(this.spec.target){let t=(0,n.IX)(this.spec.target).map(t=>(0,a.Z)(t)?this.view.getMarkById(t):t);this.detach(t)}if(this.spec.target=t,t){let e=(0,n.IX)(t).map(t=>(0,a.Z)(t)?this.view.getMarkById(t):t);this.attach(e)}return this.commit(),this}_updateComponentEncoders(){let t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((e,i)=>{let r=t[i];return r&&(e[i]={callback:(t,e,i)=>{var s,o,l,h;let u=(0,n.IX)(this.spec.target).map(t=>(0,a.Z)(t)?this.view.getMarkById(t):t),d=null===(o=null===(s=this.group)||void 0===s?void 0:s.getGroupGraphicItem)||void 0===o?void 0:o.call(s),c=(0,v.ZO)(this.spec.size,i);c||(c=d?{width:null!==(l=d.attribute.width)&&void 0!==l?l:d.AABBBounds.width(),height:null!==(h=d.attribute.height)&&void 0!==h?h:d.AABBBounds.height()}:{width:1/0,height:1/0});let p=this.spec.skipTheme?null:this.view.getCurrentTheme();return b(u,c,r,this.spec.labelStyle,i,p)}}),e},{});this._encoders=e}}x.componentType=g.zH.label;let S=()=>{y.F.registerGraphicComponent(g.zH.label,t=>new p(t)),y.F.registerComponent(g.zH.label,x)}},9528:function(t,e,i){"use strict";i.d(e,{u:()=>n});var r=i(9904),s=i(7366);class n extends s.w{parseAddition(t){return super.parseAddition(t),this.scale(t.scale),this}scale(t){if(this.spec.scale){let t=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(t),this.spec.scale=void 0}let e=(0,r.Z)(t)?this.view.getScaleById(t):t;return this.spec.scale=e,this.attach(e),this._updateComponentEncoders(),this.commit(),this}getScale(){return(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}},4761:function(t,e,i){"use strict";i.d(e,{F:()=>a});var r=i(9904),s=i(4546);class n{constructor(t,e,i,r){this.channelEncoder={},this.marks=t,e&&this.registerChannelEncoder(e),i&&this.registerDefaultEncoder(i),this.progressiveChannels&&this.registerProgressiveChannels(r)}getMarks(){return this.marks}registerChannelEncoder(t,e){return(0,r.Z)(t)?this.channelEncoder[t]=e:Object.assign(this.channelEncoder,t),this}registerFunctionEncoder(t){return this.functionEncoder=t,this}registerDefaultEncoder(t){return this.defaultEncoder=t,this}registerProgressiveChannels(t){return this.progressiveChannels=(0,s.IX)(t),this}getChannelEncoder(){return this.channelEncoder}getFunctionEncoder(){return this.functionEncoder}getDefaultEncoder(){return this.defaultEncoder}getProgressiveChannels(){return this.progressiveChannels}}class a{static registerPlotMarks(t,e){a._plotMarks[t]=e}static createPlotMark(t,e){return a._plotMarks[t]?new a._plotMarks[t](e):null}static registerMark(t,e){a._marks[t]=e}static createMark(t,e,i){return a._marks[t]?new a._marks[t](e,t,i):null}static hasMark(t){return!!a._marks[t]}static getMark(t){return a._marks[t]}static registerComponent(t,e){a._components[t]=e}static createComponent(t,e,i,r){let s=a._components[t];return s?new s(e,i,r):null}static hasComponent(t){return!!a._components[t]}static registerGraphicComponent(t,e){a._graphicComponents[t]=e}static createGraphicComponent(t,e,i){let r=a._graphicComponents[t];return r?r(e,i):null}static registerTransform(t,e,i){a._transforms[t]=Object.assign(e,{type:t,isBuiltIn:!!i})}static getTransform(t){return a._transforms[t]}static unregisterRuntimeTransforms(){Object.keys(a._transforms).forEach(t=>{a._transforms[t]&&!a._transforms[t].isBuiltIn&&(a._transforms[t]=null)})}static registerGrammar(t,e,i){a._grammars[t]={grammarClass:e,specKey:null!=i?i:t}}static createGrammar(t,e,i){var r;let s=null===(r=a._grammars[t])||void 0===r?void 0:r.grammarClass;return s?new s(e,i):null}static getGrammars(){return this._grammars}static getGlyph(t){return a._glyphs[t]}static createInteraction(t,e,i){let r=a._interactions[t];return r?new r(e,i):null}static hasInteraction(t){return!!a._interactions[t]}}a._plotMarks={},a._marks={},a._components={},a._graphicComponents={},a._transforms={},a._grammars={},a._glyphs={},a._animations={},a._interactions={},a._graphics={},a._stageEventPlugins={},a.registerGlyph=(t,e,i,r,s)=>(a._glyphs[t]=new n(e,i,r,s),a._glyphs[t]),a.registerAnimationType=(t,e)=>{a._animations[t]=e},a.getAnimationType=t=>a._animations[t],a.registerInteraction=(t,e)=>{a._interactions[t]=e},a.registerGraphic=(t,e)=>{a._graphics[t]=e},a.getGraphicType=t=>a._graphics[t],a.createGraphic=(t,e)=>{let i=a._graphics[t];return i?i(e):null},a.registerDefaultLayout=t=>{a.defaultLayout=t},a.getDefaultLayout=()=>a.defaultLayout,a.registerStageEventPlugin=(t,e)=>{a._stageEventPlugins[t]=e},a.getStageEventPlugin=t=>a._stageEventPlugins[t]},1114:function(t,e,i){"use strict";i.d(e,{B$:()=>o,Hg:()=>u,Wj:()=>l,Y2:()=>a,bw:()=>c,lo:()=>h,ny:()=>d});var r=i(8378),s=i(6082),n=i(2698);function a(t,e){switch(e){case"line":return t.some(t=>["x","y","defined"].includes(t));case"area":return t.some(t=>["x","y","x1","y1","defined"].includes(t));case"largeRects":return t.some(t=>["x","y","width","y1"].includes(t));case"largeSymbols":return t.some(t=>["x","y"].includes(t))}return!1}function o(t){let{x:e,y:i,x1:s,y1:n}=t;return(0,r.Z)(e)&&(0,r.Z)(i)&&(0,r.Z)(s)&&(0,r.Z)(n)?[{x:e,y:i},{x:s,y:n}]:[]}function l(t,e,i,r){return t&&t.length&&(1!==t.length||e)?t.some(t=>a(Object.keys(t.nextAttrs),"line"))?t.map((t,e)=>{var n;let a=t.nextAttrs,{x:o,y:l,x1:h,y1:u,defined:d}=null!==(n=null==i?void 0:i[e])&&void 0!==n?n:{};return(0,s.Z)(a.x)&&(a.x=o),(0,s.Z)(a.y)&&(a.y=l),(0,s.Z)(a.defined)&&!1===d&&(a.defined=!1),a.context=t.key,r&&((0,s.Z)(a.x1)&&(a.x1=h),(0,s.Z)(a.y1)&&(a.y1=u)),a}):null!=i?i:[]:[]}function h(t,e,i=[]){if(!t||!t.length||1===t.length&&!e)return[];let r=new Float32Array(4*t.length);return t.forEach((t,e)=>{var s,n,a,o;let l=t.nextAttrs,h=null!==(s=l.x)&&void 0!==s?s:i[4*e],u=null!==(n=l.y)&&void 0!==n?n:i[4*e+1],d=null!==(a=l.width)&&void 0!==a?a:i[4*e+2],c=null!==(o=l.y1)&&void 0!==o?o:i[4*e+3];r[4*e]=h,r[4*e+1]=u,r[4*e+2]=d,r[4*e+3]=c-u}),r}function u(t,e,i=[]){if(!t||!t.length||1===t.length&&!e)return[];let r=new Float32Array(2*t.length);return t.forEach((t,e)=>{var s,n;let a=t.nextAttrs,o=null!==(s=a.x)&&void 0!==s?s:i[2*e],l=null!==(n=a.y)&&void 0!==n?n:i[2*e+1];r[2*e]=o,r[2*e+1]=l}),r}function d(t,e){if(["x","y","dx","dy"].includes(e))return!0;switch(t){case n.Cm.arc:return["innerRadius","outerRadius","startAngle","endAngle"].includes(e);case n.Cm.group:case n.Cm.rect:case n.Cm.image:return["width","height","y1"].includes(e);case n.Cm.path:case n.Cm.shape:return["path","customPath"].includes(e);case n.Cm.line:return"defined"===e;case n.Cm.area:return["x1","y1","defined"].includes(e);case n.Cm.rule:return["x1","y1"].includes(e);case n.Cm.symbol:return"size"===e;case n.Cm.polygon:return"points"===e;case n.Cm.text:return"text"===e}return!1}function c(t){return[n.Cm.line,n.Cm.area,n.Cm.largeRects,n.Cm.largeSymbols].includes(t)}},8656:function(t,e,i){"use strict";i.d(e,{N7:()=>c,o$:()=>p,qX:()=>g});var r=i(8378),s=i(5890),n=i(6082),a=i(306),o=i(9904),l=i(2698),h=i(1114);let u=["fillOpacity"],d=(t,e,i)=>{var r;return"fillOpacity"===e?(t.fillOpacity=null!==(r=i.fillOpacity)&&void 0!==r?r:1,["fillOpacity"]):[]},c={rect3d:[{channels:["x","y","z","x1","y1","width","height","length"],transform:(t,e,i)=>{var s,n,a,o,l,h,u,d,c,p,g,m;(0,r.Z)(e.width)||!(0,r.Z)(e.x1)&&(0,r.Z)(i.width)?(t.x=Math.min(null!==(s=i.x)&&void 0!==s?s:0,null!==(n=i.x1)&&void 0!==n?n:1/0),t.width=i.width):(0,r.Z)(e.x1)||!(0,r.Z)(e.width)&&(0,r.Z)(i.x1)?(t.x=Math.min(i.x,i.x1),t.width=Math.abs(i.x1-i.x)):(t.x=Math.min(null!==(a=i.x)&&void 0!==a?a:0,null!==(o=i.x1)&&void 0!==o?o:1/0),t.width=i.width),(0,r.Z)(e.height)||!(0,r.Z)(e.y1)&&(0,r.Z)(i.height)?(t.y=Math.min(null!==(l=i.y)&&void 0!==l?l:0,null!==(h=i.y1)&&void 0!==h?h:1/0),t.height=i.height):(0,r.Z)(e.y1)||!(0,r.Z)(e.height)&&(0,r.Z)(i.y1)?(t.y=Math.min(i.y,i.y1),t.height=Math.abs(i.y1-i.y)):(t.y=Math.min(null!==(u=i.y)&&void 0!==u?u:0,null!==(d=i.y1)&&void 0!==d?d:1/0),t.height=i.height),(0,r.Z)(e.length)||!(0,r.Z)(e.z1)&&(0,r.Z)(i.length)?(t.z=Math.min(null!==(c=i.z)&&void 0!==c?c:0,null!==(p=i.z1)&&void 0!==p?p:1/0),t.length=i.length):(0,r.Z)(e.z1)||!(0,r.Z)(e.length)&&(0,r.Z)(i.z1)?(t.z=Math.min(i.z,i.z1),t.length=Math.abs(i.z1-i.z)):(t.z=Math.min(null!==(g=i.z)&&void 0!==g?g:0,null!==(m=i.z1)&&void 0!==m?m:1/0),t.length=i.length)},storedAttrs:"sizeAttrs"}],[l.Cm.text]:[{channels:["text","limit","autoLimit","maxLineWidth","textType","_originText"],transform:(t,e,i)=>{var r,a,o,l;let h=Math.min(null!==(r=i.limit)&&void 0!==r?r:1/0,null!==(a=i.autoLimit)&&void 0!==a?a:1/0),u=(0,s.Z)(i.text)&&!(0,n.Z)(i.text.text),d=u?i.text.text:i.text;Array.isArray(d),t.maxLineWidth=h===1/0?i.maxLineWidth:h,u||i.textType?"rich"===i.text.type||"rich"===i.textType?t.textConfig=d:"html"===i.text.type?(t.html=d,t.text=null!==(o=i._originText)&&void 0!==o?o:"",t.renderable=!1):"react"===i.text.type?(t.react=d,t.text=null!==(l=i._originText)&&void 0!==l?l:"",t.renderable=!1):t.text=d:t.text=d},storedAttrs:"limitAttrs"}],[l.Cm.rule]:[{channels:["x","y","x1","y1"],transform:(t,e,i)=>{let r=(0,h.B$)(i);t.points=r,t.x=0,t.y=0},storedAttrs:"pointAttrs"}],[l.Cm.symbol]:[{channels:["shape","symbolType"],transform:(t,e,i)=>{var r;t.symbolType=null!==(r=e.shape)&&void 0!==r?r:e.symbolType}},{channels:["image","fill","background"],transform:(t,e,i)=>{e.image?(t.background=e.image,t.fill=!1):i.image?(t.background=i.image,t.fill=!1):(t.fill=i.fill,t.background=i.background)},storedAttrs:"imageAttrs"}]};function p(t,e){var i;return(null!==(i=c[t])&&void 0!==i?i:[]).reduce((t,i)=>(i.channels.forEach(i=>{(0,a.Z)(e,i)&&(t[i]=e[i])}),t),{})}let g=(t,e,i,r)=>{let s={},n=e?Object.keys(e):[],a=(0,o.Z)(t)?c[t]:t;if(a&&a.length){let t=[];n.forEach(n=>{let o=!1;a.forEach((a,l)=>{if(a.channels.includes(n)){if(!t[l]){if(a.storedAttrs){let t=function(t,e,i,r,s,n){let a=s.getGraphicAttribute(t,!1,n);if(a)return e.forEach(t=>{t in r&&(a[t]=r[t])}),a;let o={};return e.forEach(t=>{o[t]=r[t]}),i[t]=o,o}(a.storedAttrs,a.channels,s,e,i,r);a.transform(s,e,t)}else a.transform(s,e,null)}t[l]=!0,o=!0}}),o||(u.includes(n)?d(s,n,e):s[n]=e[n])})}else n.forEach(t=>{u.includes(t)?d(s,t,e):s[t]=e[t]});return s}},6602:function(t,e,i){"use strict";i.d(e,{$T:()=>h,DK:()=>k,FQ:()=>n,I8:()=>x,IB:()=>u,JE:()=>f,Ji:()=>A,NM:()=>l,Nc:()=>a,Qv:()=>b,bt:()=>g,cK:()=>c,dc:()=>s,dw:()=>m,fx:()=>S,jC:()=>o,ov:()=>p,p6:()=>d,tR:()=>v,uE:()=>w,uX:()=>_,v0:()=>y});var r=i(2698);let s="__vgrammar_scene_item__",n=[r.Cm.line,r.Cm.area],a=[r.Cm.arc3d,r.Cm.rect3d,r.Cm.pyramid3d],o="key",l=[{}],h=["key"],u=!0,d=!0,c=!1,p=null,g=!0,m="VGRAMMAR_IMMEDIATE_ANIMATION",f=0,v=1e3,y=0,_=0,b=!1,x=!1,S="quintInOut",A={stopWhenStateChange:!1,immediatelyApply:!0},k="VGRAMMAR_ANIMATION_PARAMETERS",w="_mo_hide_"},8807:function(t,e,i){"use strict";i.d(e,{W:()=>B});var r=i(6082),s=i(9038),n=i(9904),a=i(4546),o=i(1036),l=i(4154),h=i(9730),u=i(306),d=i(1121),c=i(1130),p=i(7636),g=i(6602),m=i(2698),f=i(5395),v=i(4643),y=i(8656),_=i(1114);let b=(t,e)=>{var i,r;if(t===e)return!0;let s=null!==(i=t&&t.length)&&void 0!==i?i:0;return s===(null!==(r=e&&e.length)&&void 0!==r?r:0)&&0!==s&&t.every((t,i)=>!t&&!e[i]||t&&e[i]&&t.color===e[i].color&&t.offset===e[i].offset)},x=(t,e)=>{if(t===e)return!0;if(typeof t!=typeof e||(0,n.Z)(t)||t.gradient!==e.gradient)return!1;let i=Object.keys(t),r=Object.keys(e);return i.length===r.length&&i.every(i=>"stops"===i?b(t[i],e[i]):t[i]===e[i])},S=(t,e)=>t.length===e.length&&t.join("-")===e.join("-"),A=(t,e,i)=>!(!(0,r.Z)(t)||!(0,r.Z)(e))||!(0,r.Z)(t)&&!(0,r.Z)(e)&&("lineDash"===i?S(t,e):"stroke"===i||"fill"===i?x(t,e):t===e),k=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"],w=["fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"].concat(k);function C(t,e,i){var s;if(!t||t.length<=1)return null;let n="area"===(null===(s=null==i?void 0:i.mark)||void 0===s?void 0:s.markType)?w:k,a=[],o=null;return t.forEach((t,e)=>{o&&n.every(e=>A(o[e],t[e],e))||(a.length&&(a[a.length-1].endIndex=e),o=t,a.push({attrs:o,startIndex:e}))}),a.length>=2?a.map(t=>{let i=T(t.attrs);return i.points=e.slice(t.startIndex,(0,r.Z)(t.endIndex)?e.length:t.endIndex),i}):null}function T(t){let e={};if(!t)return e;let i=["x","y","x1","y1","defined","size","width","height","context"];return Object.keys(t).forEach(r=>{i.includes(r)||(e[r]=t[r])}),e}var E=i(8908),M=i(9689);class B{constructor(t){this.data=null,this.states=[],this.diffState=m.OJ.enter,this.isReserved=!1,this.runtimeStatesEncoder=null,this.items=[],this.getStateAttrs=(t,e)=>{var i,n,a,o;let l=!(0,r.Z)(null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[t]),h=l?Object.assign(Object.assign({},null===(n=this.mark.getSpec().encode)||void 0===n?void 0:n[t]),this.runtimeStatesEncoder[t]):null===(a=this.mark.getSpec().encode)||void 0===a?void 0:a[t];if(!h)return{};if((0,s.Z)(h))return h(this.getDatum(),this,t,e);if(!l&&(null===(o=this.graphicItem.states)||void 0===o?void 0:o[t]))return this.graphicItem.states[t];let u=this.items.map(t=>Object.assign({},t,{nextAttrs:{}}));(0,f.h)(this,u,h,this.mark.parameters());let d=this.transformElementItems(u,this.mark.markType);return this.graphicItem.states?this.graphicItem.states[t]||(this.graphicItem.states[t]=d):this.graphicItem.states={[t]:d},d},this.mark=t}initGraphicItem(t={}){if(this.graphicItem)return;let e=this.mark.getAttributeTransforms();if(this.graphicItem=this.mark.addGraphicItem(e?(0,y.qX)(e,t,this):t,this.groupKey),!this.graphicItem)return;let{graphicName:i}=this.mark.getSpec();(0,n.Z)(i)?this.graphicItem.name=i:(0,s.Z)(i)&&(this.graphicItem.name=i(this)),this.graphicItem[g.dc]=this,e&&(this.graphicItem.onBeforeAttributeUpdate=t=>this.mark?(0,y.qX)(e,t,this):t),this.clearGraphicAttributes(),this.mark.needAnimate()&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(Object.assign({},t)),this.setFinalGraphicAttributes(Object.assign({},t)))}updateGraphicItem(){var t;if(!this.graphicItem)return;this.diffState===m.OJ.exit?this.graphicItem.releaseStatus="willRelease":this.graphicItem.releaseStatus=void 0;let e=null===(t=this.mark.animate)||void 0===t?void 0:t.getAnimationConfigs("state");e&&0!==e.length&&(this.graphicItem.stateAnimateConfig=e[0].originConfig)}getGraphicItem(){return this.graphicItem}removeGraphicItem(){var t,e;this.graphicItem&&(null===(e=null===(t=this.graphicItem.animates)||void 0===t?void 0:t.forEach)||void 0===e||e.call(t,t=>t.stop())),this.graphicItem&&((0,v.HX)(this.graphicItem),this.graphicItem[g.dc]=null,this.graphicItem=null)}resetGraphicItem(){this.graphicItem&&(this.graphicItem=null)}getBounds(){var t;return null===(t=this.graphicItem)||void 0===t?void 0:t.AABBBounds}getStates(){return this.states}updateData(t,e,i){var r;this.mark.emit(m.ZK.BEFORE_ELEMENT_UPDATE_DATA,{groupKey:t,data:e,key:i},this),this.data=e;let s=(0,M.wn)(i);return this.items=e.map(t=>({datum:t,key:s(t),view:this.mark.view,nextAttrs:{}})),this.groupKey=t,this.key=this.mark.isCollectionMark()?t:null===(r=this.items)||void 0===r?void 0:r[0].key,this.mark.emit(m.ZK.AFTER_ELEMENT_UPDATE_DATA,{groupKey:t,data:e,key:i},this),this.items}state(t,e){var i;let r=this.mark.isCollectionMark(),s=this.states,n=(0,a.IX)((0,M.ZO)(t,e,this.getDatum(),this)),o=null===(i=this.mark.getSpec())||void 0===i?void 0:i.stateSort;o&&n.length&&n.sort(o);let l=n.length!==s.length||n.some((t,e)=>t!==s[e]);this.states=n,!r&&l&&this.diffState===m.OJ.unChange&&(this.diffState=m.OJ.update)}encodeGraphic(t){this.coordinateTransformEncode(this.items);let e=this.transformElementItems(this.items,this.mark.markType);t&&Object.assign(e,t),this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null,g.uE in this.graphicItem.attribute&&"visible"in e&&delete this.graphicItem.attribute[g.uE],this.applyGraphicAttributes(e)):this.initGraphicItem(e),(this.diffState===m.OJ.enter||this.diffState===m.OJ.update)&&this.states.length&&this.useStates(this.states),this.mark.markType===m.Cm.shape&&(this.graphicItem.datum=this.items[0].datum),this.items.forEach(t=>{t.nextAttrs={}}),this._setCustomizedShape()}_setCustomizedShape(){var t;if(!this.graphicItem)return;let e=null===(t=this.mark.getSpec())||void 0===t?void 0:t.setCustomizedShape;e&&(this.graphicItem.pathProxy=t=>e(this.data,t,new E.r))}encodeItems(t,e,i=!1,r){let s=this.mark.isCollectionMark(),n=e[m.Nw.update],a=e[m.Nw.enter],o=e[m.Nw.exit],l=this.mark.isLargeMode()||s&&!this.mark.getSpec().enableSegments;this.diffState===m.OJ.enter?(a&&(0,f.h)(this,t,a,r,l),n&&(0,f.h)(this,t,n,r,l)):this.diffState===m.OJ.update?((s&&a||i)&&(0,f.h)(this,t,a,r,l),n&&(0,f.h)(this,t,n,r,l)):this.diffState===m.OJ.exit&&o&&(i&&(0,f.h)(this,t,a,r,l),(0,f.h)(this,t,o,r,l))}coordinateTransformEncode(t){if(!this.mark.coord||"arc"===this.mark.markType||!0===this.mark.disableCoordinateTransform)return;let e=this.mark.coord.output();t.forEach(t=>{let i=t.nextAttrs,r=e.convert(i);Object.assign(i,r)})}hasStateAnimation(){var t;let e=null===(t=this.mark.animate)||void 0===t?void 0:t.getAnimationConfigs("state");return e&&e.length>0}clearStates(t){let e=(0,o.Z)(t)?t:this.hasStateAnimation();this.states=[],this.graphicItem&&this.graphicItem.clearStates(e),this.runtimeStatesEncoder&&(this.runtimeStatesEncoder={})}_updateRuntimeStates(t,e){this.runtimeStatesEncoder||(this.runtimeStatesEncoder={}),this.runtimeStatesEncoder[t]=e}hasState(t){return this.states&&t&&this.states.includes(t)}updateStates(t){if(!this.graphicItem)return!1;let e=this.states.slice(),i=this.mark.getSpec().encode,r=!1,s=!1;return Object.keys(t).forEach(n=>{var a;if(!n)return;let o=t[n];if((0,l.Z)(o)&&!(0,h.X)(o,null===(a=this.runtimeStatesEncoder)||void 0===a?void 0:a[n]))e.includes(n)?r=!0:e.push(n),this._updateRuntimeStates(n,o),s=!0;else if(o)!e.includes(n)&&(null==i?void 0:i[n])&&(e.push(n),s=!0);else if(e.length){let t=e.filter(t=>t!==n);t.length!==e.length&&(s=!0,e=t),this.runtimeStatesEncoder&&this.runtimeStatesEncoder[n]&&(this.runtimeStatesEncoder[n]=null)}}),r&&this.graphicItem.clearStates(),!!s&&(this.useStates(e),!0)}addState(t,e){var i;if(!this.graphicItem)return!1;if(e&&(0,n.Z)(t)&&!(0,h.X)(e,null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[t])){let i=this.states.slice();return i.includes(t)?this.graphicItem.clearStates():i.push(t),this._updateRuntimeStates(t,e),this.useStates(i),!0}let r=this.mark.getSpec().encode,s=(0,a.IX)(t).reduce((t,e)=>(e&&!t.includes(e)&&(null==r?void 0:r[e])&&t.push(e),t),this.states.slice());return s.length!==this.states.length&&(this.useStates(s),!0)}removeState(t){if(!this.graphicItem)return!1;let e=(0,a.IX)(t);if(!e.length)return!1;let i=this.states.filter(t=>!e.includes(t));return i.length!==this.states.length&&(this.runtimeStatesEncoder&&e.forEach(t=>{this.runtimeStatesEncoder[t]=null}),this.useStates(i),!0)}useStates(t,e){var i;if(!this.graphicItem)return!1;this.mark.emit(m.ZK.BEFORE_ELEMENT_STATE,{states:t},this);let r=null===(i=this.mark.getSpec())||void 0===i?void 0:i.stateSort;r&&t.sort(r),this.states=t;let s=(0,o.Z)(e)?e:this.hasStateAnimation();return this.graphicItem.stateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,s),this.mark.emit(m.ZK.AFTER_ELEMENT_STATE,{states:t},this),!0}diffAttributes(t){let e={},i=this.getFinalGraphicAttributes();for(let r in t)(0,u.Z)(i,r)&&(0,h.X)(i[r],t[r])||(e[r]=t[r]);return e}transformElementItems(t,e,i){var s,n,a,o,l;let h=t[0];if(!h.nextAttrs||0===Object.keys(h.nextAttrs).length)return{};let u=h.nextAttrs;if((0,_.bw)(e)&&t&&t.length&&(0,r.Z)(null===(s=h.nextAttrs)||void 0===s?void 0:s.points)&&(!0===i||(0,_.Y2)(Object.keys(h.nextAttrs),this.mark.markType))){let i=this.mark.getSpec(),r=this.getGraphicAttribute("points",!1),s=this.getGraphicAttribute("segments",!1),h=i.enableSegments,d=null===(n=this.mark.getSpec().encode)||void 0===n?void 0:n[m.Nw.connectNulls],c=t.map(t=>t.nextAttrs),p=this.mark.isProgressive();if(u=T(u),e===m.Cm.line||e===m.Cm.area){let i=(0,_.Wj)(t,!0,r,e===m.Cm.area);if(p)u.segments=(null!==(l=null===(o=null===(a=this.graphicItem)||void 0===a?void 0:a.attribute)||void 0===o?void 0:o.segments)&&void 0!==l?l:[]).concat([{points:i}]);else if(d){if(u.segments=function(t,e,i){if(!t||t.length<=1)return null;let r=!!i&&i.mark.getSpec().enableSegments,s,n,a=[],o=null;if(t.forEach((t,i)=>{(o=e[i])&&!1!==o.defined?(s||(n={items:[],points:[]},a.push(n)),n.points.push(o),n.items.push(t),!1===s&&(n.isConnect=!0,n={items:[],points:[]},a.push(n)),s=!0):s=!1}),(a=a.filter(t=>t.points.length>0)).length>=2){let t=[];return a.forEach(e=>{if(e.isConnect)return void t.push({points:e.points,isConnect:!0});if(r){let r=C(e.items,e.points,i);if(r)return void r.forEach(e=>{t.push(e)})}let s=T(e.items[0]);s.points=e.points,t.push(s)}),t}return r?C(t,e,i):null}(c,i,this),u.segments&&u.segments.some(t=>t.isConnect)){let t=(0,f.i)(d,this.getDatum(),this,this.mark.parameters());t&&u.segments.forEach(e=>{e.isConnect&&Object.assign(e,t)})}u.points=i}else if(h){let t=i&&0!==i.length?i:s?s.reduce((t,e)=>t.concat(e.points),[]):null,e=C(c,t,this);e?(u.segments=e,u.points=null):(u.segments=null,u.points=t),u=function(t,e){var i;if(!t||!t.segments||!t.segments.length)return t;let r="area"===(null===(i=null==e?void 0:e.mark)||void 0===i?void 0:i.markType)?["fillOpacity","strokeOpacity"]:["strokeOpacity"],s={};return Object.keys(t).forEach(e=>{r.includes(e)||(s[e]=t[e])}),s}(u,this)}else u.points=i,u.segments=null}else e===m.Cm.largeRects?u.points=(0,_.lo)(t,!0,r):e===m.Cm.largeSymbols&&(u.points=(0,_.Hg)(t,!0,r))}return u}applyGraphicAttributes(t){var e,i,r;if(!(0,d.Z)(t)){if(this.mark.needAnimate()){let s=this.diffAttributes(t),n=null!==(e=this.getPrevGraphicAttributes())&&void 0!==e?e:{},a=null!==(i=this.getFinalGraphicAttributes())&&void 0!==i?i:{};Object.keys(s).forEach(t=>{n[t]=this.getGraphicAttribute(t),a[t]=s[t]}),this.setNextGraphicAttributes(s),this.setPrevGraphicAttributes(n),this.setFinalGraphicAttributes(a);let o=Object.assign({},((null===(r=this.mark.animate)||void 0===r?void 0:r.getElementAnimators(this).filter(t=>{var e;return!(null===(e=t.animationOptions.timeline.controlOptions)||void 0===e?void 0:e.ignoreLoopFinalAttributes)||!t.animationOptions.timeline.loop}))||[]).reduce((t,e)=>Object.assign(t,e.getEndAttributes()),{}),a);this.graphicItem.setAttributes(o)}else this.graphicItem.setAttributes(t)}}getGraphicAttribute(t,e=!1){var i;if(!this.graphicItem)return;if(e){let e;let i=this.getPrevGraphicAttributes();if(!(0,r.Z)(e=(0,c.Z)(i,t)))return e}let s=this.mark.getAttributeTransforms(),n=[t];if(s&&s.length){let e=s.find(e=>e.storedAttrs&&e.channels.includes(t));e&&(n=[e.storedAttrs,t])}return(0,c.Z)(null===(i=this.graphicItem)||void 0===i?void 0:i.attribute,n)}setGraphicAttribute(t,e,i=!0){if(!this.graphicItem)return;let r=this.getFinalGraphicAttributes(),s=this.getPrevGraphicAttributes();i&&r&&(r[t]=e),s&&!(0,u.Z)(s,t)&&(s[t]=this.graphicItem.attribute[t]),this.graphicItem.setAttribute(t,e)}setGraphicAttributes(t,e=!0){if(!this.graphicItem)return;let i=this.getFinalGraphicAttributes(),r=this.getPrevGraphicAttributes();Object.keys(t).forEach(s=>{i&&e&&(i[s]=t[s]),r&&!(0,u.Z)(r,s)&&(r[s]=this.graphicItem.attribute[s])}),this.graphicItem.setAttributes(t)}getFinalGraphicAttributes(){return this.graphicItem.finalAttrs}setFinalGraphicAttributes(t){this.graphicItem.finalAttrs=t}getPrevGraphicAttributes(){return this.graphicItem.prevAttrs}setPrevGraphicAttributes(t){this.graphicItem.prevAttrs=t}getNextGraphicAttributes(){return this.graphicItem.nextAttrs}getFinalAnimationAttribute(t){var e,i;return null!==(i=null===(e=this.getFinalGraphicAttributes())||void 0===e?void 0:e[t])&&void 0!==i?i:this.getGraphicAttribute(t)}getFinalAnimationAttributes(){var t;return null!==(t=this.getFinalGraphicAttributes())&&void 0!==t?t:this.graphicItem.attribute}setNextGraphicAttributes(t){this.graphicItem.nextAttrs=t}clearChangedGraphicAttributes(){this.graphicItem&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null))}clearGraphicAttributes(){this.graphicItem&&(this.graphicItem.prevAttrs&&this.setPrevGraphicAttributes(null),this.graphicItem.nextAttrs&&this.setNextGraphicAttributes(null),this.graphicItem.finalAttrs&&this.setFinalGraphicAttributes(null))}remove(){this.graphicItem&&((0,v.HX)(this.graphicItem),this.graphicItem=null)}release(){this.removeGraphicItem(),this.mark=null,this.data=null,this.items=null}getItemAttribute(t){var e,i;if(null===(e=this.items)||void 0===e?void 0:e.length)return this.mark.isCollectionMark()?(0,r.Z)(t)?this.items.map(t=>t.nextAttrs):this.items.map(e=>{var i;return null===(i=e.nextAttrs)||void 0===i?void 0:i[t]}):(0,r.Z)(t)?this.items[0].nextAttrs:null===(i=this.items[0].nextAttrs)||void 0===i?void 0:i[t]}setItemAttributes(t){var e;(null===(e=this.items)||void 0===e?void 0:e.length)&&(this.mark.isCollectionMark()?(0,p.Z)(t)&&this.items.forEach((e,i)=>{Object.assign(e.nextAttrs,t[i])}):Object.assign(this.items[0].nextAttrs,t))}getItem(){var t,e;return this.mark&&this.mark.isCollectionMark()?null!==(t=this.items)&&void 0!==t?t:[]:null===(e=this.items)||void 0===e?void 0:e[0]}getDatum(){var t,e;return this.mark&&this.mark.isCollectionMark()?null!==(t=this.data)&&void 0!==t?t:[]:null===(e=this.data)||void 0===e?void 0:e[0]}}},2698:function(t,e,i){"use strict";var r,s,n,a,o,l,h,u,d,c,p,g,m,f,v,y,_,b,x,S,A,k,w,C,T,E,M,B,D,O;i.d(e,{$s:()=>g,Cm:()=>n,Fp:()=>h,Nw:()=>r,OJ:()=>s,YI:()=>v,ZK:()=>m,mr:()=>f,qs:()=>l,zH:()=>a}),(y=r||(r={})).enter="enter",y.update="update",y.exit="exit",y.group="group",y.connectNulls="connectNulls",(_=s||(s={})).enter="enter",_.update="update",_.exit="exit",_.unChange="unChange",(b=n||(n={})).arc="arc",b.arc3d="arc3d",b.area="area",b.image="image",b.line="line",b.path="path",b.rect="rect",b.rect3d="rect3d",b.rule="rule",b.shape="shape",b.symbol="symbol",b.text="text",b.richtext="richtext",b.polygon="polygon",b.pyramid3d="pyramid3d",b.circle="circle",b.cell="cell",b.interval="interval",b.group="group",b.glyph="glyph",b.component="component",b.largeRects="largeRects",b.largeSymbols="largeSymbols",(x=a||(a={})).axis="axis",x.grid="grid",x.legend="legend",x.slider="slider",x.label="label",x.datazoom="datazoom",x.player="player",x.title="title",x.scrollbar="scrollbar",(S=o||(o={}))[S.player=1]="player",S[S.rollUp=2]="rollUp",S[S.drillDown=3]="drillDown",S[S.slider=4]="slider",S[S.datazoom=5]="datazoom",S[S.legend=6]="legend",S[S.scrollbar=7]="scrollbar",S[S.brush=8]="brush",S[S.normal=9]="normal",(A=l||(l={})).lineAxis="lineAxis",A.circleAxis="circleAxis",(k=h||(h={})).lineAxisGrid="lineAxisGrid",k.circleAxisGrid="circleAxisGrid",(w=u||(u={})).discreteLegend="discreteLegend",w.colorLegend="colorLegend",w.sizeLegend="sizeLegend",(C=d||(d={})).lineCrosshair="lineCrosshair",C.rectCrosshair="rectCrosshair",C.sectorCrosshair="sectorCrosshair",C.circleCrosshair="circleCrosshair",C.polygonCrosshair="polygonCrosshair",C.ringCrosshair="ringCrosshair",(T=c||(c={})).symbolLabel="symbolLabel",T.rectLabel="rectLabel",T.lineLabel="lineLabel",T.dataLabel="dataLabel",(E=p||(p={})).continuousPlayer="continuousPlayer",E.discretePlayer="discretePlayer",(M=g||(g={})).before="before",M.layouting="layouting",M.reevaluate="reevaluate",M.after="after",(B=m||(m={})).BEFORE_EVALUATE_DATA="beforeEvaluateData",B.AFTER_EVALUATE_DATA="afterEvaluateData",B.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",B.AFTER_EVALUATE_SCALE="afterEvaluateScale",B.BEFORE_PARSE_VIEW="beforeParseView",B.AFTER_PARSE_VIEW="afterParseView",B.BEFORE_TRANSFORM="beforeTransform",B.AFTER_TRANSFORM="afterTransform",B.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",B.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",B.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",B.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",B.BEFORE_STAGE_RESIZE="beforeStageResize",B.AFTER_STAGE_RESIZE="afterStageResize",B.BEFORE_VRENDER_DRAW="beforeVRenderDraw",B.AFTER_VRENDER_DRAW="afterVRenderDraw",B.BEFORE_MARK_JOIN="beforeMarkJoin",B.AFTER_MARK_JOIN="afterMarkJoin",B.BEFORE_MARK_UPDATE="beforeMarkUpdate",B.AFTER_MARK_UPDATE="afterMarkUpdate",B.BEFORE_MARK_STATE="beforeMarkState",B.AFTER_MARK_STATE="afterMarkState",B.BEFORE_MARK_ENCODE="beforeMarkEncode",B.AFTER_MARK_ENCODE="afterMarkEncode",B.BEFORE_DO_LAYOUT="beforeDoLayout",B.AFTER_DO_LAYOUT="afterDoLayout",B.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",B.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",B.BEFORE_DO_RENDER="beforeDoRender",B.AFTER_DO_RENDER="afterDoRender",B.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",B.AFTER_MARK_RENDER_END="afterMarkRenderEnd",B.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",B.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",B.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",B.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",B.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",B.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",B.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",B.BEFORE_ELEMENT_STATE="beforeElementState",B.AFTER_ELEMENT_STATE="afterElementState",B.BEFORE_ELEMENT_ENCODE="beforeElementEncode",B.AFTER_ELEMENT_ENCODE="afterElementEncode",B.ANIMATION_START="animationStart",B.ANIMATION_END="animationEnd",B.ELEMENT_ANIMATION_START="elementAnimationStart",B.ELEMENT_ANIMATION_END="elementAnimationEnd",B.ALL_ANIMATION_START="allAnimationStart",B.ALL_ANIMATION_END="allAnimationEnd",(D=f||(f={})).signal="signal",D.data="data",D.scale="scale",D.coordinate="coordinate",D.mark="mark",(O=v||(v={})).active="active",O.selected="selected",O.highlight="highlight",O.blur="blur"},4198:function(t,e,i){"use strict";i.d(e,{Hw:()=>o,UJ:()=>l,pv:()=>a});var r=i(6082),s=i(9689),n=i(6602);function a(t,e,i){let r=new Map;if(!t||0===t.length)return{keys:[],data:r};if(!e)return r.set(n.jC,i?t.slice().sort(i):t.slice()),{keys:n.$T,data:r};let a=(0,s.wn)(e);if(1===t.length){let e=a(t[0]);return r.set(e,[t[0]]),{keys:[e],data:r}}let o=new Set;return t.forEach(t=>{var e;let i=a(t),s=null!==(e=r.get(i))&&void 0!==e?e:[];s.push(t),r.set(i,s),o.add(i)}),i&&o.forEach(t=>{r.get(t).sort(i)}),{keys:Array.from(o),data:r}}class o{constructor(t,e,i){this.prevData=(null==t?void 0:t.length)?a(t,null!=e?e:null,i):null}setCurrentData(t){this.currentData=t}getCurrentData(){return this.currentData}doDiff(){if(this.callback){if(this.currentData&&this.prevData){let t=new Map(this.prevData.data);this.currentData.keys.forEach(e=>{this.callback(e,this.currentData.data.get(e),t.get(e)),t.delete(e)}),this.prevData.keys.forEach(e=>{t.has(e)&&this.callback(e,null,t.get(e))})}else this.currentData?this.currentData.keys.forEach(t=>{this.callback(t,this.currentData.data.get(t),null)}):this.prevData&&this.prevData.keys.forEach(t=>{this.callback(t,null,this.prevData.data.get(t))})}}setCallback(t){this.callback=t}updateToCurrent(){this.prevData=this.currentData,this.currentData=null}reset(){this.prevData=null}}function l(t,e,i){let s={enter:[],exit:[],update:[]},n=new o(t,i);return n.setCallback((t,e,i)=>{(0,r.Z)(e)?s.exit.push({prev:i[0]}):(0,r.Z)(i)?s.enter.push({next:e[0]}):s.update.push({next:e[0],prev:i[0]})}),n.setCurrentData(a(e,i)),n.doDiff(),s}},5395:function(t,e,i){"use strict";i.d(e,{h:()=>u,i:()=>d});var r=i(6082),s=i(9904),n=i(1601),a=i(9280),o=i(7911),l=i(9689),h=i(1114);function u(t,e,i,u,d){i&&((0,l.hR)(i)?e.forEach(e=>{let r=(0,l.ZO)(i,u,e.datum,t);Object.assign(e.nextAttrs,r)}):Object.keys(i).forEach(c=>{var p,g;let m=i[c],f=d&&!(0,h.ny)(t.mark.markType,c)?[e[0]]:e;if((0,o.zO)(m)){let t=(0,l.Ur)(m.scale,u),e=null!==(p=null==m?void 0:m.offset)&&void 0!==p?p:0,i=!(0,r.Z)(m.band)&&t.bandwidth?t.bandwidth()*m.band:null,o=(0,s.Z)(null==m?void 0:m.field),h=o?(0,a.E)(m.field):null,d=o?null:(0,r.Z)(null==m?void 0:m.value)?0:null===(g=t.scale)||void 0===g?void 0:g.call(t,m.value);f.forEach(r=>{var s;o&&(d=null===(s=t.scale)||void 0===s?void 0:s.call(t,h(r.datum))),r.nextAttrs[c]=(0,n.Z)(d)||(0,n.Z)(i)?d+e+i:d})}else if((0,o.CJ)(m)){let t=(0,a.E)(m.field);f.forEach(e=>{e.nextAttrs[c]=t(e.datum)})}else f.forEach(e=>{e.nextAttrs[c]=(0,l.ZO)(m,u,e.datum,t)})}))}function d(t,e,i,h){if(!t)return null;if((0,l.hR)(t))return(0,l.ZO)(t,h,e,i);let u={};return Object.keys(t).forEach(d=>{var c,p,g;let m=t[d];if((0,o.zO)(m)){let t=(0,l.Ur)(m.scale,h),i=null!==(c=null==m?void 0:m.offset)&&void 0!==c?c:0,o=!(0,r.Z)(m.band)&&t.bandwidth?t.bandwidth()*m.band:null,f=(0,s.Z)(null==m?void 0:m.field),v=f?(0,a.E)(m.field):null,y=f?null===(p=t.scale)||void 0===p?void 0:p.call(t,v(e)):(0,r.Z)(null==m?void 0:m.value)?0:null===(g=t.scale)||void 0===g?void 0:g.call(t,m.value);u[d]=(0,n.Z)(y)||(0,n.Z)(o)?y+i+o:y}else if((0,o.CJ)(m)){let t=(0,a.E)(m.field);u[d]=t(e)}else u[d]=(0,l.ZO)(m,h,e,i)}),u}},21:function(t,e,i){"use strict";i.d(e,{d6:()=>ex,O6:()=>em,__:()=>ey,ML:()=>ef,to:()=>ec,uS:()=>ep,LG:()=>ed,MM:()=>eA,cB:()=>eg,lA:()=>el,vq:()=>eu,Xo:()=>eS,n7:()=>e_,lo:()=>ev,vi:()=>eb,jd:()=>eh});var r,s,n,a,o,l=i(4761),h=i(2698),u=i(411);class d extends u.ZA{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){let e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){let t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function c(t){return new d(t)}var p=i(7578);function g(){g.__loaded||(g.__loaded=!0,p.i.RegisterGraphicCreator("shadowRoot",c))}g.__loaded=!1;var m=i(7881),f=i(5102),v=i(534),y=i(1749),_=i(6502);class b extends f.w{constructor(t){super(t),this.type="arc3d",this.numberType=y.IJ}updateAABBBounds(t,e,i){let r=this.stage;if(!r||!r.camera)return i;let{outerRadius:s=e.outerRadius,height:n=0}=t,a=s+n;return i.setValue(-a,-a,a,a),v.w.graphicService.updateTempAABBBounds(i),v.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}getNoWorkAnimateAttr(){return b.NOWORK_ANIMATE_ATTR}}function x(t){return new b(t)}b.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},_.Wl);var S=i(8103),A=i(9904),k=i(9772),w=i(6420);class C{constructor(t,e,i=.8){this.dir=t,this.color=e,this.colorRgb=k.VH.Get(e,k.Mr.Color1),this.ambient=i;let r=(0,S._b)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this.formatedDir=[t[0]/r,t[1]/r,t[2]/r]}computeColor(t,e){let i;let r=this.formatedDir,s=(0,S.VV)((0,S.Fp)((t[0]*r[0]+t[1]*r[1]+t[2]*r[2])*(1-this.ambient/2),0)+this.ambient,1);i=(0,A.Z)(e)?k.VH.Get(e,k.Mr.Color1):e;let n=this.colorRgb;return`rgb(${n[0]*i[0]*s}, ${n[1]*i[1]*s}, ${n[2]*i[2]*s})`}}let T=()=>{w.F.registerPlugin("DirectionalLight",C)};var E=i(8113),M=i(7317);class B{set params(t){this._params=Object.assign({},t),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(t){this.params=t}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=E.yp.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=E.yp.allocate());let{pos:t,center:e,up:i}=this.params.viewParams;return(0,M.zB)(this._viewMatrixCached,t,e,i),this._vp||(this._vp=E.yp.allocate()),this._vp=(0,M.G9)(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=E.yp.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=E.yp.allocate());let{left:t,top:e,right:i,bottom:r}=this._params;return(0,M.M5)(this._projectionMatrixCached,t,i,r,e,0,-2e6),this._vp||(this._vp=E.yp.allocate()),this._vp=(0,M.G9)(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){let{fieldRatio:t=.8,fieldDepth:e,left:i,right:r}=this._params;return(null!=e?e:r-i)*t}getProjectionScale(t){let e=this.getField();return e/(e+t)}view(t,e,i){let r=[0,0,0];return(0,M.fF)(r,[t,e,i],this._viewMatrixCached),r}vp(t,e,i){let r=[0,0,0],{pos:s}=this._params.viewParams;(0,M.fF)(r,[t,e,i],this._viewMatrixCached),t=r[0],e=r[1],i=r[2];let n=this.getProjectionScale(i);return{x:t*n+s[0],y:e*n+s[1]}}}let D=()=>{w.F.registerPlugin("OrthoCamera",B)};var O=i(6480),P=i(8429),I=i(7428),R=i(8535),L=i(9292);let F=class extends L.Y{constructor(){super(...arguments),this.numberType=y.IJ}drawShape(t,e,i,r,s,n,a,o){var l;let h=(0,R.gh)(t,null==n?void 0:n.theme).arc,{fill:u=h.fill}=t.attribute,d=this.valid(t,h,a,o);if(!d)return;let{fVisible:c,sVisible:p,doFill:g,doStroke:m}=d,f=null!==(l=this.z)&&void 0!==l?l:0,{outerPadding:v=h.outerPadding,innerPadding:y=h.innerPadding,height:_=10}=t.attribute,{outerRadius:b=h.outerRadius,innerRadius:x=h.innerRadius}=t.attribute;b+=v,x-=y;let A=k.VH.Get(u,k.Mr.Color255),{light:w}=s.stage||{},C=s.hack_pieFace,T={top:f,bottom:f+_},E={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};"bottom"===C||"top"===C?(e.beginPath(),function(t,e,i,r,s,n,a){let{startAngle:o,endAngle:l}=t.getParsedAngle(),h=(0,S.Wn)(l-o),u=l>o,d=!1;if(n<a){let t=n;n=a,a=t}if(n<=S.Ho)e.moveTo(i,r,s);else if(h>=S.f7-S.Ho)e.moveTo(i+n*(0,S.mC)(o),r+n*(0,S.O$)(o),s),e.arc(i,r,n,o,l,!u,s),a>S.Ho&&(e.moveTo(i+a*(0,S.mC)(l),r+a*(0,S.O$)(l),s),e.arc(i,r,a,l,o,u,s));else{let{outerDeltaAngle:h,innerDeltaAngle:d,outerStartAngle:c,outerEndAngle:p,innerEndAngle:g,innerStartAngle:m}=t.getParsePadAngle(o,l),f=n*(0,S.mC)(c),v=n*(0,S.O$)(c),y=a*(0,S.mC)(g),_=a*(0,S.O$)(g);h<.001||(e.moveTo(i+f,r+v,s),e.arc(i,r,n,c,p,!u,s)),!(a>S.Ho)||d<.001?e.lineTo(i+y,r+_,s):(e.lineTo(i+y,r+_,s),e.arc(i,r,a,g,m,u,s))}e.closePath()}(t,e,i,r,T[C],b,x),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),g&&(a?a(e,t.attribute,h):c&&(e.setCommonStyle(t,t.attribute,i,r,h),e.fillStyle=w?w.computeColor(E[C],A):u,e.fill())),m&&(o?o(e,t.attribute,h):p&&(e.setStrokeStyle(t,t.attribute,i,r,h),e.stroke()))):"outside"!==C&&"inside"!==C||("inside"===C&&(e.save(),e.beginPath(),e.arc(i,r,x,0,S.f7,!0,T.top),e.clip()),e.beginPath(),function(t,e,i,r,s,n,a,o){let{startAngle:l,endAngle:h}=t.getParsedAngle(),u=(0,S.Wn)(h-l),d=h>l,c=!1;if(a<=S.Ho)e.moveTo(i,r,s);else if(u>=S.f7-S.Ho)e.moveTo(i+a*(0,S.mC)(l),r+a*(0,S.O$)(l),s),e.arc(i,r,a,l,h,!d,s),e.lineTo(i+a*(0,S.mC)(h),r+a*(0,S.O$)(h),n),e.arc(i,r,a,h,l,d,n);else{let{innerouterDeltaAngle:t,innerouterStartAngle:u,innerouterEndAngle:c}=o(l,h),p=a*(0,S.mC)(u),g=a*(0,S.O$)(u),m=a*(0,S.mC)(c),f=a*(0,S.O$)(c);t<.001||(e.moveTo(i+p,r+g,s),e.arc(i,r,a,u,c,!d,s),e.lineTo(i+m,r+f,n),e.arc(i,r,a,c,u,d,n))}e.closePath()}(t,e,i,r,T.top,T.bottom,"outside"===C?b:x,(e,i)=>{let{outerDeltaAngle:r,innerDeltaAngle:s,outerStartAngle:n,outerEndAngle:a,innerEndAngle:o,innerStartAngle:l}=t.getParsePadAngle(e,i);return"outside"===C?{innerouterDeltaAngle:r,innerouterEndAngle:a,innerouterStartAngle:n}:{innerouterDeltaAngle:s,innerouterEndAngle:o,innerouterStartAngle:l}}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),g&&(a?a(e,t.attribute,h):c&&(e.setCommonStyle(t,t.attribute,i,r,h),e.fillStyle=w?w.computeColor(E[C],A):u,e.fill())),m&&(o?o(e,t.attribute,h):p&&(e.setStrokeStyle(t,t.attribute,i,r,h),e.stroke())),"inside"===C&&e.restore())}draw(t,e,i,r){let s=(0,R.gh)(t,null==r?void 0:r.theme).arc;this._draw(t,s,!1,i,r)}};F=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)()],F);var j=i(4481);let Z=!1,H=new P.n(t=>{Z||(Z=!0,t(j.AC).to(F).inSingletonScope(),t(j.uz).toService(j.AC))});var N=i(479),z=i(1600),V=i(4021);let U=class extends V.D{constructor(t){super(),this.canvasRenderer=t,this.type="arc3d",this.numberType=y.IJ,this.themeType="arc"}};U=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)(),(r=(0,z.f)(j.AC),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],U);let W=!1,G=new P.n((t,e,i,r)=>{W||(W=!0,t(N.Dp).to(U).inSingletonScope(),t(N.EL).toService(N.Dp))});function $(){$.__loaded||($.__loaded=!0,p.i.RegisterGraphicCreator("arc3d",x),T(),D(),O.n.load(H),O.n.load(G))}$.__loaded=!1;var X=i(2683),Y=i(7795);class K extends Y.m{constructor(t){super(t),this.type="pyramid3d",this.numberType=y.jp}updateAABBBounds(t,e,i){let r=this.stage;return r&&r.camera&&(this.findFace().vertices.forEach(t=>{let e=t[0],r=t[1];i.add(e,r)}),v.w.graphicService.updateTempAABBBounds(i),v.w.graphicService.transformAABBBounds(t,i,e,!1,this)),i}findFace(){let{points:t}=this.attribute,e=t.map((e,i)=>{let r=3===i?t[0]:t[i+1],s=e.x-r.x;return 0===s?0:(e.y-r.y)/s}),i=t.map(t=>({p:t,d:0})),r=!1,s=0;for(let t=0;t<e.length-1;t++){for(let n=t+1;n<e.length;n++){if(e[t]===e[n]){r=!0;let e=X.HL.distancePP(i[t].p,i[t+1].p);i[t].d=e,i[t+1].d=e,s=(0,S.Fp)(s,e);let a=X.HL.distancePP(i[n].p,i[n+1].p);i[n].d=a,i[n+1].d=a,s=(0,S.Fp)(s,a)}if(r)break}if(r)break}for(let e=t.length-1;e>=0;e--){let r=t[e];i.unshift({p:r,d:0})}for(let e=0;e<t.length;e++){let r=(s-i[e+t.length].d)/2;i[e].d+=r,i[e+t.length].d+=r}let n={polygons:[],vertices:[],edges:[]};return i.forEach(t=>{n.vertices.push([t.p.x,t.p.y,t.d])}),n.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),n.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),n.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),n.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),n.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),n.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),n.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],n}_isValid(){return super._isValid()&&4===this.attribute.points.length}getNoWorkAnimateAttr(){return K.NOWORK_ANIMATE_ATTR}}function q(t){return new K(t)}K.NOWORK_ANIMATE_ATTR=_.Wl;class J extends L.Y{stroke(t,e,i,r,s){let n=r.vertices;r.edges.forEach(r=>{let a=n[r[0]],o={x:t+a[0],y:e+a[1],z:i+a[2]},l=n[r[1]],h={x:t+l[0],y:e+l[1],z:i+l[2]};s.beginPath(),s.moveTo(o.x,o.y,o.z),s.lineTo(h.x,h.y,h.z),s.stroke()})}fill(t,e,i,r,s,n,a,o,l,h,u){let d=k.VH.Get(n,k.Mr.Color255),c=r.vertices,p=c.map(t=>a.view(t[0],t[1],t[2])[2]),g=[];r.polygons.forEach((t,e)=>{if(s&&!s[e])return;g.push({faceIdx:e,polygon:t});let{polygon:i}=t,r=p[i[0]],n=p[i[1]],a=p[i[2]],o=p[i[3]];t.ave_z=r+n+a+o}),g.sort((t,e)=>e.polygon.ave_z-t.polygon.ave_z),g.forEach(r=>{let{polygon:s,normal:p}=r.polygon,g=c[s[0]],m=c[s[1]],f=c[s[2]],v=c[s[3]],y={x:t+g[0],y:e+g[1],z:i+g[2]},_={x:t+m[0],y:e+m[1],z:i+m[2]},b={x:t+f[0],y:e+f[1],z:i+f[2]},x={x:t+v[0],y:e+v[1],z:i+v[2]};a.beginPath(),a.moveTo(y.x,y.y,y.z),a.lineTo(_.x,_.y,_.z),a.lineTo(b.x,b.y,b.z),a.lineTo(x.x,x.y,x.z),a.closePath(),u?u(a,l&&l.attribute,h):(a.fillStyle=o?o.computeColor(p,d):n,a.fill())})}}let Q=class extends J{constructor(){super(...arguments),this.type="pyramid3d",this.numberType=y.jp}drawShape(t,e,i,r,s,n,a,o){var l;let h=(0,R.gh)(t,null==n?void 0:n.theme).polygon,{fill:u=h.fill,stroke:d=h.stroke,face:c=[!0,!0,!0,!0,!0,!0]}=t.attribute,p=null!==(l=this.z)&&void 0!==l?l:0;if(!this.valid(t,h,a,o))return;let{light:g}=s.stage||{},m=t.findFace();if(!1!==u){e.setCommonStyle(t,t.attribute,i,r,h);let s=u;"string"!=typeof s&&(s="black"),this.fill(i,r,p,m,c,s,e,g,t,h,a)}!1!==d&&(e.setStrokeStyle(t,t.attribute,i,r,h),this.stroke(i,r,p,m,e))}draw(t,e,i){let r=(0,R.gh)(t).polygon;this._draw(t,r,!1,i)}};Q=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)()],Q);let tt=!1,te=new P.n(t=>{tt||(tt=!0,t(j.sP).to(Q).inSingletonScope(),t(j.uz).toService(j.sP))}),ti=class extends V.D{constructor(t){super(),this.canvasRenderer=t,this.type="pyramid3d",this.numberType=y.jp,this.themeType="polygon"}};ti=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)(),(s=(0,z.f)(j.sP),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],ti);let tr=!1,ts=new P.n((t,e,i,r)=>{tr||(tr=!0,t(N.O2).to(ti).inSingletonScope(),t(N.EL).toService(N.O2))});function tn(){tn.__loaded||(tn.__loaded=!0,p.i.RegisterGraphicCreator("pyramid3d",q),T(),D(),O.n.load(te),O.n.load(ts))}tn.__loaded=!1;var ta=i(3483),to=i(9367),tl=i(4437),th=i(9536),tu=i(1369),td=i(7307),tc=i(5385);let tp=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];class tg extends tc.U{constructor(t){super(t),this.type="rect3d",this.numberType=y.ZV}findFace(){let t={polygons:[],vertices:[],edges:[]},e=this.getGraphicTheme(),{x1:i,y1:r,x:s,y:n,length:a=(0,S.VV)(e.width,e.height)}=this.attribute,{width:o,height:l}=this.attribute;o=null!=o?o:i-s,l=null!=l?l:r-n;for(let e=0;e<tp.length;e++){let i=tp[e];t.vertices.push([i[0]*o,i[1]*l,i[2]*a])}return t.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),t.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),t.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),t.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),t.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),t.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),t.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],t}getNoWorkAnimateAttr(){return tg.NOWORK_ANIMATE_ATTR}}function tm(t){return new tg(t)}tg.NOWORK_ANIMATE_ATTR=_.Wl;var tf=i(6003);let tv=class extends J{constructor(){super(...arguments),this.type="rect3d",this.numberType=y.ZV}drawShape(t,e,i,r,s,n,a,o){var l;let h=(0,R.gh)(t,null==n?void 0:n.theme).rect,{fill:u=h.fill,stroke:d=h.stroke,x1:c,y1:p,x:g,y:m,opacity:f=h.opacity,fillOpacity:v=h.fillOpacity,lineWidth:y=h.lineWidth,strokeOpacity:_=h.strokeOpacity,visible:b=h.visible}=t.attribute,{width:x,height:S}=t.attribute;x=(null!=x?x:c-g)||0,S=(null!=S?S:p-m)||0;let A=null!==(l=this.z)&&void 0!==l?l:0,k=(0,tf.GT)(f,v,x,S,u),w=(0,tf.Ze)(f,_,x,S),C=(0,tf.dz)(u),T=(0,tf.ak)(d,y);if(!t.valid||!b||!C&&!T||!(k||w||a||o))return;let{light:E}=s.stage||{},M=t.findFace();if(!1!==u){e.setCommonStyle(t,t.attribute,i,r,h);let s=u;"string"!=typeof s&&(s="black"),this.fill(i,r,A,M,null,s,e,E,null,null,a)}!1!==d&&(e.setStrokeStyle(t,t.attribute,i,r,h),this.stroke(i,r,A,M,e))}draw(t,e,i){let r=(0,R.gh)(t).rect;this._draw(t,r,!1,i)}};tv=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)()],tv);let ty=!1,t_=new P.n(t=>{ty||(ty=!0,t(j.K2).to(tv).inSingletonScope(),t(j.uz).toService(j.K2))}),tb=class extends V.D{constructor(t){super(),this.canvasRenderer=t,this.type="rect3d",this.numberType=y.ZV,this.themeType="rect"}};tb=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)(),(n=(0,z.f)(j.K2),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tb);let tx=!1,tS=new P.n((t,e,i,r)=>{tx||(tx=!0,t(N.DS).to(tb).inSingletonScope(),t(N.EL).toService(N.DS))});function tA(){tA.__loaded||(tA.__loaded=!0,p.i.RegisterGraphicCreator("rect3d",tm),O.n.load(t_),O.n.load(tS))}tA.__loaded=!1;var tk=i(489),tw=i(5757),tC=i(4683),tT=i(4914);class tE extends _.zs{constructor(t){super(t),this.type="glyph",this.numberType=y.Nd,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(t){this.detachSubGraphic(),this.subGraphic=t,t.forEach(t=>{t.glyphHost=this,Object.setPrototypeOf(t.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(t=>{t.glyphHost=null,Object.setPrototypeOf(t.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(t){this._onInit=t}onUpdate(t){this._onUpdate=t}isValid(){return!0}setAttribute(t,e,i,r){super.setAttribute(t,e,i,r),this.subGraphic.forEach(t=>{t.addUpdateShapeAndBoundsTag(),t.addUpdatePositionTag()})}setAttributes(t,e=!1,i){super.setAttributes(t,e,i),this.subGraphic.forEach(t=>{t.addUpdateShapeAndBoundsTag(),t.addUpdatePositionTag()})}translate(t,e){return super.translate(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}translateTo(t,e){return super.translateTo(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}scale(t,e,i){return super.scale(t,e,i),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}scaleTo(t,e){return super.scaleTo(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotate(t){return super.rotate(t),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotateTo(t){return super.rotate(t),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}getGraphicTheme(){return(0,R.gh)(this).glyph}updateAABBBounds(t,e,i){return this.getSubGraphic().forEach(t=>{i.union(t.AABBBounds)}),i}doUpdateAABBBounds(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();let t=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),t}needUpdateTags(t){return!1}needUpdateTag(t){return!1}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null===(i=this.currentStates)||void 0===i?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;this.stopStateAnimates();let r={},s=this.subGraphic.map(()=>({}));t.forEach(e=>{var i;let n=this.glyphStateProxy?this.glyphStateProxy(e,t):this.glyphStates[e];n&&(Object.assign(r,n.attributes),(null===(i=n.subAttributes)||void 0===i?void 0:i.length)&&s.forEach((t,e)=>{Object.assign(t,n.subAttributes[e])}))}),this.subGraphic.forEach((i,r)=>{i.updateNormalAttrs(s[r]),i.applyStateAttrs(s[r],t,e)}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}clearStates(t){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.subGraphic.forEach(e=>{e.applyStateAttrs(e.normalAttrs,this.currentStates,t,!0),e.normalAttrs=null}),this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}clone(){let t=new tE(Object.assign({},this.attribute));return t.setSubGraphic(this.subGraphic.map(t=>t.clone())),t}getNoWorkAnimateAttr(){return tE.NOWORK_ANIMATE_ATTR}}function tM(t){return new tE(t)}tE.NOWORK_ANIMATE_ATTR=_.Wl;let tB=class{constructor(){this.numberType=y.Nd}drawShape(t,e,i,r,s,n,a,o){s.drawContribution&&t.getSubGraphic().forEach(t=>{let l=s.drawContribution.getRenderContribution(t);l&&l.drawShape&&l.drawShape(t,e,i,r,s,n,a,o)})}draw(t,e,i,r){let{context:s}=i;if(!s||(s.highPerformanceSave(),!i.drawContribution))return;let n=(0,R.gh)(t),a=t.getSubGraphic();a.length&&a.forEach(t=>{i.drawContribution.renderItem(t,i,{theme:n})}),s.highPerformanceRestore()}};tB=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)()],tB);let tD=!1,tO=new P.n(t=>{tD||(tD=!0,t(j.FU).to(tB).inSingletonScope(),t(j.uz).toService(j.FU))});var tP=i(1671);class tI{constructor(){this.type="glyph",this.numberType=y.Nd}contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let s=null==i?void 0:i.pickerService;if(s){let r=!1;return t.getSubGraphic().forEach(t=>{if(r)return;let n=s.pickItem(t,e,null,i);r=!(!n||!n.graphic)}),r}return!1}}let tR=class extends tI{constructor(t){super(),this.canvasRenderer=t}};tR=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)(),(a=(0,z.f)(j.FU),function(t,e){a(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tR);let tL=!1,tF=new P.n((t,e,i,r)=>{tL||(tL=!0,t(N.Se).to(tR).inSingletonScope(),t(N.EL).toService(N.Se))}),tj=class extends tI{constructor(t){super(),this.canvasRenderer=t}};tj=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,I.b)(),(o=(0,z.f)(j.FU),function(t,e){o(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tj);let tZ=!1,tH=new P.n((t,e,i,r)=>{tZ||(tZ=!0,t(N.Uv).to(tj).inSingletonScope(),t(tj).toService(N.Uv))});function tN(){tN.__loaded||(tN.__loaded=!0,p.i.RegisterGraphicCreator("glyph",tM),O.n.load(tO),O.n.load(tP.X?tF:tH))}tN.__loaded=!1;var tz=i(4951),tV=i(5512),tU=i(7004),tW=i(4051),tG=i(5196),t$=i(2875),tX=i(1636),tY=i(325),tK=i(6082),tq=i(1805),tJ=i(5859),tQ=i(8378),t0=i(4309),t1=i(3901),t2=i(3309),t3=i(9038),t5=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class t4{constructor(t,e,i,r,s,n,a,o,l){this.refDatum=t,this.center=e,this.outerCenter=i,this.quadrant=r,this.radian=s,this.middleAngle=n,this.innerRadius=a,this.outerRadius=o,this.circleCenter=l,this.labelVisible=!0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class t6 extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,tY.Z)({},t6.defaultAttributes,t5(t,["data"])))),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map,this._line2MinLength=0,this._alignOffset=0}_overlapping(t){return["inside","inside-center"].includes(this.attribute.position)?super._overlapping(t):t}labeling(t,e,i="outside",r=0){if(t&&e)return{x:0,y:0}}_layout(t){var e,i,r;if(!t||!t.length)return;let s=super._layout(t),n=s.map(t=>this.getGraphicBounds(t)),a=Object.assign(Object.assign({},this.attribute.textStyle),{text:"…"}),o=1/0;if(!1!==a.ellipsis){let t=this._createLabelText(a),e=this.getGraphicBounds(t);o=e.x2-e.x1}let l=s.map(t=>t.attribute),h=Array.from(this._idToGraphic.values());this._line2MinLength=(0,t3.Z)(this.attribute.line.line2MinLength)?this.attribute.line.line2MinLength(t,h,this.attribute):this.attribute.line.line2MinLength,this._alignOffset=null!==(e=(0,t3.Z)(this.attribute.layout.alignOffset)?this.attribute.layout.alignOffset(t,h,this.attribute):this.attribute.layout.alignOffset)&&void 0!==e?e:0;let u=this.layoutArcLabels(this.attribute.position,this.attribute,h,l,n,o);for(let t=0;t<l.length;t++){let e=l[t],n=u.find(t=>{var i;return(null===(i=t.refDatum)||void 0===i?void 0:i.id)===e.id});if(n){let e={visible:n.labelVisible,x:n.labelPosition.x,y:n.labelPosition.y,angle:n.angle,points:n.pointA&&n.pointB&&n.pointC?[n.pointA,n.pointB,n.pointC]:void 0,line:n.labelLine};"richtext"===s[t].type?e.width=null!==(i=n.labelLimit)&&void 0!==i?i:s[t].attribute.width:e.maxLineWidth=null!==(r=n.labelLimit)&&void 0!==r?r:s[t].attribute.maxLineWidth,n.refArc&&"arc3d"===n.refArc.type&&(e.anchor3d=[n.circleCenter.x-e.x,n.circleCenter.y-e.y],e.beta=n.refArc.attribute.beta),s[t].setAttributes(e)}}return s}layoutArcLabels(t,e,i,r,s,n){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=n;let a=0;i.forEach(t=>{t.attribute.outerRadius>a&&(a=t.attribute.outerRadius)}),r.forEach((t,i)=>{var n,o;let l=this._idToGraphic.get(t.id),h=l.attribute,u={x:null!==(n=null==h?void 0:h.x)&&void 0!==n?n:0,y:null!==(o=null==h?void 0:h.y)&&void 0!==o?o:0};if(!(0,tK.Z)(r[i])&&!(0,tK.Z)(s[i])){let t=r[i]?r[i]:null,n=s[i]?s[i]:{x1:0,x2:0,y1:0,y2:0},o=(h.startAngle+h.endAngle)/2,d=h.endAngle-h.startAngle,c=(0,tq.tc)(h.endAngle-d/2),p=new t4(t,(0,tq.op)(u,h.outerRadius,o),(0,tq.op)(u,a+e.line.line1MinLength,o),c,d,o,h.innerRadius,h.outerRadius,u);p.refArc=l,p.pointA=(0,tq.op)(u,this.computeDatumRadius(2*u.x,2*u.y,h.outerRadius),p.middleAngle),p.labelSize={width:n.x2-n.x1,height:n.y2-n.y1},(0,t1.sk)(p.quadrant)?this._arcRight.set(p.refDatum,p):(0,t1.vE)(p.quadrant)&&this._arcLeft.set(p.refDatum,p)}});let o=Array.from(this._arcLeft.values()),l=Array.from(this._arcRight.values()),h=[];switch(t){case"inside":case"inside-inner":case"inside-outer":case"inside-center":h.push(...this._layoutInsideLabels(l,e,i)),h.push(...this._layoutInsideLabels(o,e,i));break;default:h.push(...this._layoutOutsideLabels(l,e,i)),h.push(...this._layoutOutsideLabels(o,e,i))}return h}_layoutInsideLabels(t,e,i){var r,s;let n=e.spaceWidth,a=null!==(r=e.position)&&void 0!==r?r:"inside",o=null!==(s=e.offsetRadius)&&void 0!==s?s:-n;return t.forEach(t=>{var i,r,s;let l;let{labelSize:h,radian:u}=t,d=t.innerRadius,c=t.outerRadius;l=u<(0,t1.aD)(c,h.height)?0:c-(u>=Math.PI?d:Math.max(d,h.height/2/Math.tan(u/2)))-n,!0!==e.rotate&&(l=c-n);let p=this._getFormatLabelText(t.refDatum,l);t.labelText=p;let g=Math.min(l,t.labelSize.width),m=this._computeAlign(t,e),f,v=0;if("inside"===a&&(v="left"===m?g:"right"===m?0:g/2),f="inside-inner"===a?d-o+v:"inside-center"===a?d+(c-d)/2:c+o-v,t.labelPosition=(0,tq.op)(t.circleCenter,f,t.middleAngle),t.labelLimit=g,(0,tJ.Vy)(g,0)||(t.labelVisible=!1),!1!==e.rotate){t.angle=null!==(r=null===(i=e.textStyle)||void 0===i?void 0:i.angle)&&void 0!==r?r:t.middleAngle;let n=null!==(s=e.offsetAngle)&&void 0!==s?s:0;["inside-inner","inside-outer"].includes(a)&&(n+=Math.PI/2),t.angle+=n}}),t}_layoutOutsideLabels(t,e,i){var r,s,n;let a=null!==(r=i[0].attribute.x)&&void 0!==r?r:0,o=2*(null!==(s=i[0].attribute.y)&&void 0!==s?s:0),l=e.layout,h=e.spaceWidth;if(t.forEach(t=>{let e=(0,t1.vE)(t.quadrant)?-1:1;t.labelPosition={x:t.outerCenter.x+e*(t.labelSize.width/2+this._line2MinLength+h),y:t.outerCenter.y}}),t.sort((t,e)=>t.labelPosition.y-e.labelPosition.y),!1!==e.coverEnable||"none"===l.strategy){for(let r of t){let{labelPosition:t,labelSize:s}=r;r.labelLimit=s.width,r.pointB=(0,t1.vE)(r.quadrant)?{x:t.x+s.width/2+this._line2MinLength+h,y:t.y}:{x:t.x-s.width/2-this._line2MinLength-h,y:t.y},this._computeX(r,e,i)}!1===e.coverEnable&&"none"===l.strategy&&this._coverLabels(t)}else{let r=o/((null===(n=e.textStyle)||void 0===n?void 0:n.fontSize)||16);this._adjustY(t,r,e,i);let{minY:s,maxY:a}=t.reduce((t,e)=>{let{y1:i,y2:r}=e.getLabelBounds();return t.minY=Math.max(0,Math.min(i,t.minY)),t.maxY=Math.min(o,Math.max(r,t.maxY)),t},{minY:1/0,maxY:-1/0}),l=Math.max(Math.abs(o/2-s),Math.abs(a-o/2)),h=this._computeLayoutRadius(l,e,i);for(let r of t)this._computePointB(r,h,e,i),this._computeX(r,e,i)}let u=2*a;return t.forEach(t=>{var i,r;t.labelVisible&&((0,tJ.SQ)(t.pointB.x,this._line2MinLength+h)||(0,tJ.Vy)(t.pointB.x,u-this._line2MinLength-h))&&(t.labelVisible=!1),t.angle=null!==(r=null===(i=e.textStyle)||void 0===i?void 0:i.angle)&&void 0!==r?r:0,e.offsetAngle&&(t.angle+=e.offsetAngle),t.labelLine=Object.assign(Object.assign({},e.line),{visible:t.labelVisible})}),t}_computeX(t,e,i){var r;let s=t.circleCenter,n=this.attribute.width;this.attribute.height;let a=0;i.forEach(t=>{t.attribute.outerRadius>a&&(a=t.attribute.outerRadius)});let o=this.computeLayoutOuterRadius(a,e.width,e.height),l=e.line.line1MinLength,h=null===(r=e.layout)||void 0===r?void 0:r.align,u=e.spaceWidth,{labelPosition:d,quadrant:c,pointB:p}=t;(0,tQ.Z)(p.x*p.y)||(t.pointC={x:NaN,y:NaN},d.x=NaN,t.labelLimit=0);let g=this.computeRadius(o,e.width,e.height),m=(0,t1.vE)(c)?-1:1,f=0,v=(m>0?n-p.x:p.x-0)+this._alignOffset-this._line2MinLength-u;"labelLine"===h&&(f=(g+l+this._line2MinLength)*m+s.x,v=(m>0?n-f:f-0)-u);let y=this._getFormatLabelText(t.refDatum,v);t.labelText=y;let _=Math.min(v,t.labelSize.width);switch(h){case"labelLine":break;case"edge":f=m>0?n-_-u:0+_+u;break;default:f=p.x+m*this._line2MinLength}let b=(_=Math.max(this._ellipsisWidth,_))<t.labelSize.width-1;t.labelLimit=b?_:null,t.pointC={x:f,y:d.y};let x=this._computeAlign(t,e),S=(0,t1.qA)(x)*(b?_:t.labelSize.width);"edge"===h?(d.x=(m>0?n:0)-m*S+m*this._alignOffset,t.pointC.x+=m*this._alignOffset):d.x=f+m*(this._alignOffset+u+S)}_computeAlign(t,e){var i,r,s,n,a,o;let l=null!==(r=null===(i=e.textStyle)||void 0===i?void 0:i.textAlign)&&void 0!==r?r:null===(s=e.textStyle)||void 0===s?void 0:s.align,h=null!==(a=null===(n=e.layout)||void 0===n?void 0:n.textAlign)&&void 0!==a?a:null===(o=e.layout)||void 0===o?void 0:o.align;return"inside"!==e.position?(0,tK.Z)(l)||"auto"===l?"edge"===h?(0,t1.vE)(t.quadrant)?"left":"right":(0,t1.vE)(t.quadrant)?"right":"left":l:(0,tK.Z)(l)||"auto"===l?"center":l}_getFormatLabelText(t,e){var i;return null!==(i=null==t?void 0:t.text)&&void 0!==i?i:""}_adjustY(t,e,i,r){var s;r[0].attribute.x;let n=2*(null!==(s=r[0].attribute.y)&&void 0!==s?s:0),a=i.layout;if("vertical"===a.strategy){let e,i=0,r=t.length;if(r<=0)return;for(let s=0;s<r;s++){let{y1:n}=t[s].getLabelBounds();if(e=n-i,(0,tJ.SQ)(e,0)){let i=this._shiftY(t,s,r-1,-e);this._shiftY(t,i,0,e/2)}let{y2:a}=t[s].getLabelBounds();i=a}let{y1:s}=t[0].getLabelBounds();e=s-0,(0,tJ.SQ)(e,0)&&this._shiftY(t,0,r-1,-e);for(let e=t.length-1;e>=0&&t[e].getLabelBounds().y2>n;e--)t[e].labelVisible=!1}else if("none"!==a.strategy){let s=t.map((t,e)=>({arc:t,originIndex:e,priorityIndex:0}));s.sort((t,e)=>e.arc.radian-t.arc.radian),s.forEach((t,e)=>{t.priorityIndex=e,t.arc.labelVisible=!1});let o=1/0,l=-1/0;for(let h=0;h<e&&h<t.length;h++){let e;this._storeY(t);let u=s[h].arc;this._computeYRange(u,i,r),u.labelVisible=!0;let d=u.labelPosition.y,{lastIndex:c,nextIndex:p}=this._findNeighborIndex(t,s[h]),g=t[c],m=t[p];if(-1===c&&-1!==p){let e=m.labelPosition.y;d>e?u.labelPosition.y=e-m.labelSize.height/2-u.labelSize.height/2:this._twoWayShift(t,u,m,p)}else if(-1!==c&&-1===p){let e=g.labelPosition.y;d<e?u.labelPosition.y=e+g.labelSize.height/2+u.labelSize.height/2:this._twoWayShift(t,g,u,s[h].originIndex)}else if(-1!==c&&-1!==p){let e=g.labelPosition.y,i=m.labelPosition.y;d>i?(u.labelPosition.y=i-m.labelSize.height/2-u.labelSize.height/2,this._twoWayShift(t,g,u,s[h].originIndex)):(d<e?u.labelPosition.y=e+g.labelSize.height/2+u.labelSize.height/2:this._twoWayShift(t,g,u,s[h].originIndex),this._twoWayShift(t,u,m,p))}let f=Math.min(o,s[h].originIndex),v=Math.max(l,s[h].originIndex);if(e=t[v].getLabelBounds().y2-n,(0,tJ.Vy)(e,0)&&this._shiftY(t,v,0,-e),e=t[f].getLabelBounds().y1-0,(0,tJ.SQ)(e,0)&&this._shiftY(t,f,t.length-1,-e),e=t[v].getLabelBounds().y2-n,(0,tJ.Vy)(e,0)){u.labelVisible=!1,this._restoreY(t);break}a.tangentConstraint&&!this._checkYRange(t)?(u.labelVisible=!1,this._restoreY(t)):(o=f,l=v)}}}_shiftY(t,e,i,r){let s=e<i?1:-1,n=e;for(;-1!==n;){t[n].labelPosition.y+=r;let e=this._findNextVisibleIndex(t,n,i,s);if(e>=0&&e<t.length){let{y1:i,y2:r}=t[n].getLabelBounds(),{y1:a,y2:o}=t[e].getLabelBounds();if(s>0&&r<a||s<0&&i>o)return n}n=e}return i}_findNextVisibleIndex(t,e,i,r){let s=(i-e)*r;for(let i=1;i<=s;i++){let s=e+i*r;if(t[s].labelVisible)return s}return -1}_computePointB(t,e,i,r){let s=0;r.forEach(t=>{t.attribute.outerRadius>s&&(s=t.attribute.outerRadius)});let n=this.computeLayoutOuterRadius(s,i.width,i.height),a=i.line.line1MinLength;if("none"===i.layout.strategy)t.pointB={x:t.outerCenter.x,y:t.outerCenter.y};else{let r=t.circleCenter,s=this.computeRadius(n,i.width,i.height),{labelPosition:o,quadrant:l}=t,h=e-Math.max(s+a,t.outerRadius),u=Math.sqrt(e**2-Math.abs(r.y-o.y)**2)-h;(0,tQ.Z)(u)?t.pointB={x:r.x+u*((0,t1.vE)(l)?-1:1),y:o.y}:t.pointB={x:NaN,y:NaN}}}_storeY(t){for(let e of t)e.labelVisible&&(e.lastLabelY=e.labelPosition.y)}_computeYRange(t,e,i){let r,s,n,a,o;let l=t.circleCenter,h={width:2*l.x,height:2*l.y},u=0;i.forEach(t=>{t.attribute.outerRadius>u&&(u=t.attribute.outerRadius)});let d=this.computeLayoutOuterRadius(u,e.width,e.height),c=e.line.line1MinLength,{width:p,height:g}=h,m=this.computeRadius(d,e.width,e.height),f=this._computeLayoutRadius(g/2,e,i),v=Math.abs(t.center.x-p/2),y=t.center.y-g/2;if((0,tJ.Yt)(p/2,v))r=0,s=1,n=-y;else if((0,tJ.Yt)(g/2,y))r=1,s=0,n=-v;else{let t=-1/(y/v);r=t,s=-1,n=y-t*v}let _=(0,t1.KZ)(r,s,n,c+m-f,0,f);_.length<2||(_[0].x>_[1].x&&_.reverse(),_[0].x<0?(0,tJ.Yt)(_[0].y,_[1].y)?(0,tJ.Vy)(t.middleAngle,-Math.PI)&&(0,tJ.SQ)(t.middleAngle,0)||(0,tJ.Vy)(t.middleAngle,Math.PI)&&(0,tJ.SQ)(t.middleAngle,2*Math.PI)?(a=0,o=_[1].y+g/2):(a=_[1].y+g/2,o=g):_[0].y<_[1].y?(a=0,o=_[1].y+g/2):(a=_[1].y+g/2,o=h.height):(a=Math.min(_[0].y,_[1].y)+g/2,o=Math.max(_[0].y,_[1].y)+g/2),t.labelYRange=[a,o])}_computeLayoutRadius(t,e,i){let r=e.layoutArcGap,s=e.line.line1MinLength,n=0;i.forEach(t=>{t.attribute.outerRadius>n&&(n=t.attribute.outerRadius)});let a=this.computeLayoutOuterRadius(n,e.width,e.height),o=this.computeRadius(a,e.width,e.height)+s,l=o-r;return Math.max((l**2+t**2)/(2*l),o)}_findNeighborIndex(t,e){let i=e.originIndex,r=-1,s=-1;for(let e=i-1;e>=0;e--)if(t[e].labelVisible){r=e;break}for(let e=i+1;e<t.length;e++)if(t[e].labelVisible){s=e;break}return{lastIndex:r,nextIndex:s}}_twoWayShift(t,e,i,r){let s=i.getLabelBounds().y1-e.getLabelBounds().y2;if((0,tJ.SQ)(s,0)){let e=this._shiftY(t,r,t.length-1,-s);this._shiftY(t,e,0,s/2)}}_restoreY(t){for(let e of t)e.labelVisible&&(e.labelPosition.y=e.lastLabelY)}_checkYRange(t){for(let e of t){let{labelYRange:t,labelPosition:i}=e;if(e.labelVisible&&t&&((0,tJ.SQ)(i.y,t[0])||(0,tJ.Vy)(i.y,t[1])))return!1}return!0}_coverLabels(t){if(t.length<=1)return;let e=t[0].getLabelBounds();for(let i=1;i<t.length;i++){let r=t[i].getLabelBounds();(0,t1.qP)(e,r)?t[i].labelVisible=!1:e=r}}_getLabelLinePoints(t,e){return t.attribute.points}_createLabelLine(t,e){var i,r,s,n,a;let{line:o={},visible:l}=t.attribute,h=super._createLabelLine(t,e);if(h&&(h.setAttributes({visible:null===(s=null!==(i=o.visible&&l)&&void 0!==i?i:null===(r=t.attribute)||void 0===r?void 0:r.visible)||void 0===s||s,lineWidth:null!==(a=null===(n=o.style)||void 0===n?void 0:n.lineWidth)&&void 0!==a?a:1}),o.smooth&&h.setAttributes({curveType:"basis"}),"arc3d"===e.type&&e)){let{beta:t,x:i,y:r}=e.attribute;h.setAttributes({beta:t,anchor3d:[i,r]})}return h}computeRadius(t,e,i,r){return this.computeLayoutRadius(e||0,i||0)*t*((0,tK.Z)(r)?1:r)}computeLayoutRadius(t,e){return Math.min(t/2,e/2)}_canPlaceInside(t,e){return"inside"===this.attribute.position||"inside-center"===this.attribute.position}computeLayoutOuterRadius(t,e,i){return t/(Math.min(e,i)/2)}computeDatumRadius(t,e,i){let r=this.computeLayoutOuterRadius(i,t,e);return this.computeLayoutRadius(t||0,e||0)*r}}t6.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,boundsPadding:[-1,0,-1,0],ellipsis:!0},position:"outside",line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0}};let t8=()=>{(0,t2.a)("arc",t6)};var t7=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class t9 extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,tY.Z)({},t9.defaultAttributes,t7(t,["data"])))),this.name="line-label"}getGraphicBounds(t,e={},i="end"){if(!t||"line"!==t.type&&"area"!==t.type)return super.getGraphicBounds(t,e);let r=t.attribute.points,s=t.attribute.segments;!r&&s&&s.length&&(r=s.reduce((t,e)=>{var i;return t.concat(null!==(i=e.points)&&void 0!==i?i:[])},[])),r&&0!==r.length||(r=[e]);let n="start"===i?0:r.length-1;return r[n]?{x1:r[n].x,x2:r[n].x,y1:r[n].y,y2:r[n].y}:void 0}labeling(t,e,i="end",r=0){return(0,t1.KN)(t,e,i,r)}}t9.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};let et=()=>{(0,t2.a)("line",t9),(0,t2.a)("area",t9)};var ee=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class ei extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,tY.Z)({},ei.defaultAttributes,ee(t,["data"])))),this.name="symbol-label"}labeling(t,e,i="top",r=0){return(0,t1.hw)(t,e,i,r)}}ei.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let er=()=>{(0,t2.a)("symbol",ei),(0,t2.a)("line-data",ei)};var es=i(8727),en=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};class ea extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,tY.Z)({},ea.defaultAttributes,en(t,["data"]))))}labeling(t,e,i="top",r=0){if(!t||!e)return;let{x1:s,y1:n,x2:a,y2:o}=t,l=Math.abs(a-s),h=Math.abs(o-n),{x:u,y:d}=(0,es.v)(e,i),c=0,p=0,g=i.includes("inside");switch(i.includes("top")?p=g?1:-1:i.includes("bottom")?p=g?-1:1:i.includes("left")?c=g?1:-1:i.includes("right")&&(c=g?-1:1),i){case"top-right":case"bottom-right":c=-1;break;case"top-left":case"bottom-left":c=1}return{x:u+c*r+c*l/2,y:d+p*r+p*h/2}}}ea.tag="rect-label",ea.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let eo=()=>{(0,t2.a)("rect",ea)},el=()=>{g(),(0,m.x)(),l.F.registerGraphic(h.Cm.arc,f.Q),t8()},eh=()=>{g(),$(),l.F.registerGraphic(h.Cm.arc3d,x)},eu=()=>{g(),tn(),l.F.registerGraphic(h.Cm.pyramid3d,q)},ed=()=>{g(),(0,ta.d)(),l.F.registerGraphic(h.Cm.area,tz.n),et(),er()},ec=()=>{g(),(0,to.M)(),l.F.registerGraphic(h.Cm.group,u.sS)},ep=()=>{g(),(0,tl.i)(),l.F.registerGraphic(h.Cm.image,tV.B)},eg=()=>{g(),(0,th.N)(),et(),er(),l.F.registerGraphic(h.Cm.line,tU.W)},em=()=>{g(),(0,tu.N)(),l.F.registerGraphic(h.Cm.path,tW.E)},ef=()=>{g(),(0,td.k)(),eo(),l.F.registerGraphic(h.Cm.rect,tc.f)},ev=()=>{g(),tA(),l.F.registerGraphic(h.Cm.rect3d,tm)},ey=()=>{g(),(0,th.N)(),l.F.registerGraphic(h.Cm.rule,tU.W)},e_=()=>{g(),(0,tk.k)(),er(),l.F.registerGraphic(h.Cm.symbol,tG.t)},eb=()=>{g(),(0,tw.g)(),(0,tC.v)(),l.F.registerGraphic(h.Cm.text,t$.r)},ex=()=>{g(),(0,tT.M)(),l.F.registerGraphic(h.Cm.polygon,Y.p)},eS=()=>{g(),(0,tC.v)(),l.F.registerGraphic(h.Cm.richtext,tX.p)},eA=()=>{g(),tN(),l.F.registerGraphic(h.Cm.glyph,tM)}},2200:function(t,e,i){"use strict";i.d(e,{Z:()=>h});var r=i(6082),s=i(8378);function n(t){var e,i;return(0,r.Z)(t.offsetX)?(0,r.Z)(t.x)?t.changedTouches&&t.changedTouches.length?function(t){let e=t.changedTouches[0];return{canvasX:e.x,canvasY:e.y}}(t):{canvasX:0,canvasY:0}:{canvasX:(e=t).x,canvasY:e.y}:{canvasX:(i=t).offsetX,canvasY:i.offsetY}}function a(t,e,i=!0){let r=["canvasX","canvasY"];return i&&(r.push("clientX"),r.push("clientY")),r.forEach(i=>{(0,s.Z)(e[i])&&Object.defineProperty(t,i,{value:e[i],writable:!0})}),[e.canvasX,e.canvasY]}var o=i(9524),l=i(6602);function h(t,e,i,r){var s,h;r===o.YJ&&function(t){["touches","changedTouches","targetTouches"].forEach(e=>{t[e]&&t[e].length&&Array.from(t[e]).forEach(t=>{a(t,n(t),!1)})});let e=n(t);a(t,e)}(e.changedTouches?e.changedTouches[0]:e);let u=null===(s=e.target)||void 0===s?void 0:s[l.dc];if(!u&&r===o.Ng){let i=e.target,r=null===(h=t.rootMark)||void 0===h?void 0:h.graphicItem;for(;(null==i?void 0:i.parent)&&i.parent!==r;)if((i=i.parent)[l.dc]){u=i[l.dc];break}}return e.element=u,e}},4643:function(t,e,i){"use strict";i.d(e,{CJ:()=>l,HX:()=>u,ib:()=>h,ir:()=>o});var r=i(2698),s=i(6602),n=i(4761),a=i(4659);let o=t=>!!r.Cm[t];function l(t,e,i={}){var r;let s=n.F.getGraphicType(e)?n.F.createGraphic(e,i):n.F.createGraphicComponent(e,i,{skipDefault:null===(r=null==t?void 0:t.spec)||void 0===r?void 0:r.skipTheme});return s||a.Y.getInstance().error(`create ${e} graphic failed!`),s}function h(t,e,i={}){if(!n.F.getGraphicType(r.Cm.glyph))return;let s=n.F.createGraphic(r.Cm.glyph,i),a=e.getMarks(),o=Object.keys(a).map(t=>{if(n.F.getGraphicType(a[t])){let e=n.F.createGraphic(a[t]);if(e)return e.name=t,e}});return s.setSubGraphic(o),s}let u=t=>{t&&(t[s.dc]=null,t.release(),t.parent&&t.parent.removeChild(t))}},5042:function(t,e,i){"use strict";i.d(e,{dze:()=>q,BQt:()=>K});var r=i(5939),s=i(534),n=i(5405),a=i(1312),o=i.n(a);let l=(t,e)=>{let i=e.x-t.x,r=e.y-t.y;return Math.abs(i)>Math.abs(r)?i>0?"right":"left":r>0?"down":"up"},h=(t,e)=>{let i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return Math.sqrt(i*i+r*r)},u=t=>{let e=t.length;if(1===e)return{x:Math.round(t[0].x),y:Math.round(t[0].y)};let i=0,r=0,s=0;for(;s<e;)i+=t[s].x,r+=t[s].y,s++;return{x:Math.round(i/e),y:Math.round(r/e)}};class d extends o(){constructor(t,e={}){var i,s,n,a,o,d,c,p,g,m;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=t=>{this.startTime=r.m.now();let{cachedEvents:e,startPoints:i}=this;t&&e.push(t.clone()),i.length=e.length;for(let t=0;t<e.length;t++){let{x:r,y:s}=e[t],n={x:r,y:s};i[t]=n}if(1!==i.length)this.startDistance=h(i[0],i[1]),this.center=u([i[0],i[1]]);else{let t=e[0];this.pressTimeout=setTimeout(()=>{t.direction="none",t.deltaX=0,t.deltaY=0,t.points=i,this.triggerStartEvent("press",t),this.triggerEvent("press",t),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=t=>{this.clearPressTimeout();let{startPoints:e,cachedEvents:i}=this;if(!e.length)return;let s=t.clone(),{x:n,y:a,pointerId:o}=s;for(let t=0,e=i.length;t<e;t++)if(o===i[t].pointerId){i[t]=s;break}let u={x:n,y:a},d=i.map(t=>({x:t.x,y:t.y})),c=r.m.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=c,this.lastMovePoint=u,1===e.length){let t=e[0],i=n-t.x,r=a-t.y,o=this.direction||l(t,u);this.direction=o;let h=this.getEventType(u);return s.direction=o,s.deltaX=i,s.deltaY=r,s.points=d,this.triggerStartEvent(h,s),void this.triggerEvent(h,s)}let{startDistance:p}=this,g=h(d[0],d[1]);s.scale=g/p,s.center=this.center,s.points=d,this.triggerStartEvent("pinch",s),this.triggerEvent("pinch",s)},this.onEnd=t=>{let e=t.clone(),{cachedEvents:i,startPoints:s}=this,n=i.map(t=>({x:t.x,y:t.y}));if(e.points=n,this.triggerEndEvent(e),1===i.length){let i=r.m.now(),n=this.lastMoveTime;if(i-n<100){let t=n-(this.prevMoveTime||this.startTime);if(t>0){let i=this.prevMovePoint||s[0],r=this.lastMovePoint||s[0],n=h(i,r),a=n/t;if(a>this.config.swipe.velocity&&n>this.config.swipe.threshold)return e.velocity=a,e.direction=l(i,r),this.triggerEvent("swipe",e),this.cachedEvents=[],this.startPoints=[],void this.reset()}}i-this.startTime<this.config.press.time&&(i-this.lastTapTime<this.config.tap.interval&&t.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=i,this.lastTapTarget=t.target,1===this.tapCount?this.triggerEvent("tap",e):2===this.tapCount&&(this.triggerEvent("doubletap",e),this.tapCount=0))}for(let t=0,r=i.length;t<r;t++)if(i[t].pointerId===e.pointerId){i.splice(t,1),s.splice(t,1);break}this.reset(),i.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!==(s=null===(i=null==e?void 0:e.press)||void 0===i?void 0:i.time)&&void 0!==s?s:251,threshold:null!==(a=null===(n=null==e?void 0:e.press)||void 0===n?void 0:n.threshold)&&void 0!==a?a:9},swipe:{threshold:null!==(d=null===(o=null==e?void 0:e.swipe)||void 0===o?void 0:o.threshold)&&void 0!==d?d:10,velocity:null!==(p=null===(c=null==e?void 0:e.swipe)||void 0===c?void 0:c.velocity)&&void 0!==p?p:.3},tap:{interval:null!==(m=null===(g=null==e?void 0:e.tap)||void 0===g?void 0:g.interval)&&void 0!==m?m:300}},this.initEvents()}initEvents(){let{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){let{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){let e;let{eventType:i,startTime:s,startPoints:n}=this;return"press"===i?i:(e=r.m.now()-s>this.config.press.time&&h(n[0],t)<this.config.press.threshold?"press":"pan",this.eventType=e,e)}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){let{emitThrottles:i}=this,r={type:t,ev:e};for(let e=0,s=i.length;e<s;e++)if(i[e].type===t)return void i.splice(e,1,r);i.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);let{throttleTimer:i,emitThrottles:r}=this;i||(this.throttleTimer=s.w.global.getRequestAnimationFrame()(()=>{s.w.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let t=0,e=r.length;t<e;t++){let{type:e,ev:i}=r[t];this.emitEvent(e,i)}this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){let e=this.processEvent;Object.keys(e).forEach(i=>{this.triggerEvent(`${i}end`,t),"press"===i&&this.triggerEvent(`${i}up`,t),delete e[i]})}emitEvent(t,e){if(!this.element)return;let i=this.element._events[n.g];if(i){if("fn"in i)i.fn.call(i.context,e,t);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e,t)}this.emit(t,e)}}var c=i(4761),p=i(7773),g=i(670),m=i(2698);class f{constructor(t){this._animations=[],this._additionalAnimateMarks=[],this.isEnabled=!0,this._onAnimationStart=t=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(t=>{var e;return null===(e=null==t?void 0:t.animate)||void 0===e?void 0:e.isAnimating()}),0===this._animations.length&&0===this._additionalAnimateMarks.length&&this._view.emit(m.ZK.ALL_ANIMATION_START,{}),this._animations=this._animations.concat({config:t.animationConfig,mark:t.mark})},this._onAnimationEnd=t=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(t=>{var e;return null===(e=null==t?void 0:t.animate)||void 0===e?void 0:e.isAnimating()}),this._animations=this._animations.filter(e=>e.config!==t.animationConfig||e.mark!==t.mark),0===this._animations.length&&0===this._additionalAnimateMarks.length&&this._view.emit(m.ZK.ALL_ANIMATION_END,{})},this._view=t,this._view.addEventListener(m.ZK.ANIMATION_START,this._onAnimationStart),this._view.addEventListener(m.ZK.ANIMATION_END,this._onAnimationEnd)}stop(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).stop)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).stop)||void 0===i||i.call(e))}),this._additionalAnimateMarks=[],this}pause(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).pause)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).pause)||void 0===i||i.call(e))}),this}resume(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).resume)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).resume)||void 0===i||i.call(e))}),this}enable(){return this.isEnabled=!0,this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).enable)||void 0===i||i.call(e))}),this}disable(){return this.isEnabled=!1,this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).disable)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).stop)||void 0===i||i.call(e))}),this._additionalAnimateMarks=[],this}enableAnimationState(t){return this._view.traverseMarkTree(e=>{var i,r;e.animate&&(null===(r=(i=e.animate).enableAnimationState)||void 0===r||r.call(i,t))}),this}disableAnimationState(t){return this._view.traverseMarkTree(e=>{var i,r;e.animate&&(null===(r=(i=e.animate).disableAnimationState)||void 0===r||r.call(i,t))}),this}isAnimating(){return 0!==this._animations.length||this._additionalAnimateMarks.some(t=>{var e;return(null===(e=null==t?void 0:t.animate)||void 0===e?void 0:e.isAnimating())||!1})}animate(){return this.isEnabled&&this._view.traverseMarkTree(t=>{t.isUpdated&&t.animate&&t.animate.animate(),t.cleanExitElements(),t.isUpdated=!1},null,!0),this}animateAddition(t){var e;let i=null===(e=t.animate)||void 0===e?void 0:e.animate();return i&&i.isAnimating()&&this._additionalAnimateMarks.push(t),this}release(){this._additionalAnimateMarks=[],this._animations=[],this._view.removeEventListener(m.ZK.ALL_ANIMATION_START,this._onAnimationStart),this._view.removeEventListener(m.ZK.ALL_ANIMATION_END,this._onAnimationEnd),this._view=null}}class v{initAnimate(t){return this.animate=new f(t),this.animate}}let y=()=>{(0,p.jB)(g.Z,v)};var _=i(6082),b=i(4546),x=i(1601),S=i(8378),A=i(3118),k=i(3872),w=i(3337),C=i(6502),T=i(7623),E=i(9038),M=i(7636),B=i(4154),D=i(1114);let O=(t,e)=>{if(!t)return null;if(t.from){let i=t.from,r=Object.keys(i);r.forEach(t=>{(0,_.Z)(i[t])&&delete i[t]});let s=(0,D.Y2)(r,e.mark.markType)&&!(0,T.Z)(i.segments);if(s){let r=e.items.map(t=>Object.assign({},t,{nextAttrs:Object.assign({},i)}));t.from=e.transformElementItems(r,e.mark.markType,s)}}if(t.to){let i=t.to,r=Object.keys(i);r.forEach(t=>{(0,_.Z)(i[t])&&delete i[t]});let s=(0,D.Y2)(r,e.mark.markType)&&!(0,T.Z)(i.segments);if(s){let r=e.items.map(t=>Object.assign({},t,{nextAttrs:Object.assign({},i)}));t.to=e.transformElementItems(r,e.mark.markType,s)}}return t},P=(t,e,i,r,s)=>(0,E.Z)(i)?i(t.getDatum(),t,s):i;class I extends A.rd{constructor(t,e,i,r,s){super(t,e,i,r,s),this._interpolator=null==s?void 0:s.interpolator,this._element=null==s?void 0:s.element}onBind(){var t,e;this.from=null!==(t=this.from)&&void 0!==t?t:{},this.to=null!==(e=this.to)&&void 0!==e?e:{}}getEndProps(){return this.to}onUpdate(t,e,i){this._interpolator&&this._element&&this._interpolator.call(this,e,this.from,this.to,i,this._element.getDatum(),this._element,this.params.parameters)}}class R extends A.rd{getEndProps(){return this.to}onBind(){var t;let e=null!==(t=this.target.constructor.NOWORK_ANIMATE_ATTR)&&void 0!==t?t:C.Wl,i=Object.keys(e).filter(t=>0!==e[t]);this.subAnimate.animate.preventAttrs(i);let r=Object.assign({},this.from),s=Object.assign({},this.to),n=[];Object.keys(s).forEach(t=>{i.includes(t)?(r[t]=s[t],this.from[t]=s[t]):(0,_.Z)(r[t])?r[t]=this.target.getComputedAttribute(t):n.push(t)}),this.target.animates.forEach(t=>{t!==this.subAnimate.animate&&t.preventAttrs(n)}),this._fromAttribute=r,this._toAttribute=s}onStart(){if(this._fromAttribute){let t={};Object.keys(this._fromAttribute).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(t[e]=this._fromAttribute[e])}),this.target.setAttributes(t,!1,{type:k.Gk.ANIMATE_UPDATE,animationState:{ratio:0,end:!1}})}}onEnd(){if(this._toAttribute){let t={};Object.keys(this._toAttribute).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(t[e]=this._toAttribute[e])}),this.target.setAttributes(t,!1,{type:k.Gk.ANIMATE_END})}}update(t,e,i){0===this.updateCount&&this.onFirstRun(),this.updateCount+=1;let r=this.step.getLastProps();Object.keys(r).forEach(t=>{this.subAnimate.animate.validAttr(t)&&(i[t]=r[t])}),this.onUpdate(t,e,i),t&&this.onEnd()}onUpdate(t,e,i){this.target.stepInterpolate(this.subAnimate,this.subAnimate.animate,i,this.step,e,t,this._toAttribute,this._fromAttribute)}}A.rs.mode|=k.uq.SET_ATTR_IMMEDIATELY;let L=0,F=t=>{var e;if((0,_.Z)(t)||(0,_.Z)(t.prototype))return!1;let i=null!==(e=t.prototype)&&void 0!==e?e:{};return i instanceof A.rd||"onBind"in i&&"onStart"in i&&"onEnd"in i&&"onUpdate"in i};class j{constructor(t,e,i){this.id=L++,this.isAnimating=!1,this.runnings=[],this.element=t,this.animationOptions=i,this.unit=e}callback(t){return this.callbackFunction=t,this}animate(t,e){return this.isAnimating=!0,this.animateElement(t,e),0===this.runnings.length&&this.animationEnd(),this}stop(t="end",e=!0){return this.runnings.forEach(e=>e.stop(t)),this.animationEnd(e),this}pause(){return this.runnings.forEach(t=>t.pause()),this}resume(){return this.runnings.forEach(t=>t.resume()),this}startAt(t){return this.runnings.forEach(e=>{let i=this.unit.initialDelay;e.startAt(i+t)}),this}getTotalAnimationTime(){var t;let e=this.unit.initialDelay+this.unit.loopDuration*this.unit.loopCount;return null!==(t=this.unit.totalTime)&&void 0!==t?t:e}getEndAttributes(){return this.runnings.reduce((t,e)=>Object.assign(t,e.getEndProps()),{})}animationEnd(t=!0){var e;this.isAnimating=!1,this.runnings=null,t&&(null===(e=this.callbackFunction)||void 0===e||e.call(null))}animateElement(t,e){let i=this.element.getGraphicItem();if(!i)return;let r=i.animate();this.runnings.push(r),r.startAt(this.unit.initialDelay),r.wait(this.unit.loopDelay),this.unit.timeSlices.forEach(i=>{this.animateTimeSlice(r,i,t,e)}),r.wait(this.unit.loopDelayAfter),r.loop(this.unit.loopCount-1),(0,S.Z)(this.unit.totalTime)&&setTimeout(()=>{r&&r.stop("end")},this.unit.totalTime),r.onEnd(()=>{this.runnings=this.runnings.filter(t=>t!==r),0===this.runnings.length&&this.animationEnd()})}animateTimeSlice(t,e,i,r){let s=e.delay,n=e.delayAfter,a=e.duration,o=e.effects;if(s>0&&t.wait(s),o.length<0)t.wait(a);else{let e=o.map((t,e)=>{var s;let n=null!==(s=t.type?function(t,e,i,r){let s=(0,E.Z)(e.options)?e.options.call(null,t.getDatum(),t,r):e.options;return e.type&&c.F.getAnimationType(e.type)?O(c.F.getAnimationType(e.type)(t,s,i),t):null}(this.element,t,i,r):t.channel?function(t,e,i,r){let s=e.channel,n=null;return(0,M.Z)(s)?n=s.reduce((e,i)=>(e.from[i]=t.getGraphicAttribute(i,!0),e.to[i]=t.getGraphicAttribute(i,!1),e),{from:{},to:{}}):(0,B.Z)(s)&&(n=Object.keys(s).reduce((e,i)=>{var n,a;let o=!(0,_.Z)(null===(n=s[i])||void 0===n?void 0:n.from),l=!(0,_.Z)(null===(a=s[i])||void 0===a?void 0:a.to);return(o||l)&&(e.from[i]=o?P(t,0,s[i].from,0,r):void 0,e.to[i]=l?P(t,0,s[i].to,0,r):t.getGraphicAttribute(i,!1)),e},{from:{},to:{}})),O(n,t)}(this.element,t,0,r):void 0)&&void 0!==s?s:{},o=n.custom||(null==t?void 0:t.custom),l=(null==n?void 0:n.customParameters)||(null==t?void 0:t.customParameters);n.from&&Object.keys(n.from).length&&this.unit&&this.animationOptions.timeline.controlOptions.immediatelyApply&&"component"!==this.element.mark.markType&&this.element.getGraphicItem().setAttributes(n.from);let h=F(o);return(0,_.Z)(o)||F(o)?h?new o(n.from,n.to,a,t.easing,l):n.to?new R(n.from,n.to,a,t.easing):void 0:new I(n.from,n.to,a,t.easing,{interpolator:o,element:this.element,parameters:l})}).filter(t=>!(0,_.Z)(t));1===e.length?t.play(e[0]):e.length>1&&t.play(new w.xc(a,e))}n>0&&t.wait(n)}}var Z=i(325),H=i(6602);function N(t){let e=[];return Object.keys(t).forEach(i=>{e=e.concat(z(i,t[i]))}),e}function z(t,e,i=0){let r=[],s=i;return(0,b.IX)(e).forEach(e=>{var i;let n=function(t){var e,i,r,s,n,a,o,l,h,u,d,c;if((0,_.Z)(t.timeSlices))return{startTime:null!==(e=t.startTime)&&void 0!==e?e:H.JE,totalTime:t.totalTime,oneByOne:null!==(i=t.oneByOne)&&void 0!==i?i:H.I8,loop:null!==(r=t.loop)&&void 0!==r?r:H.Qv,controlOptions:(0,Z.Z)({},H.Ji,null!==(s=t.controlOptions)&&void 0!==s?s:{}),timeSlices:[{duration:null!==(n=t.duration)&&void 0!==n?n:H.tR,delay:null!==(a=t.delay)&&void 0!==a?a:H.v0,delayAfter:null!==(o=t.delayAfter)&&void 0!==o?o:H.uX,effects:[{type:t.type,channel:t.channel,custom:t.custom,easing:null!==(l=t.easing)&&void 0!==l?l:H.fx,customParameters:t.customParameters,options:t.options}]}]};let p=(0,b.IX)(t.timeSlices).filter(t=>t.effects&&(0,b.IX)(t.effects).filter(t=>t.channel||t.type).length);if(p.length)return{startTime:null!==(h=t.startTime)&&void 0!==h?h:H.JE,totalTime:t.totalTime,oneByOne:null!==(u=t.oneByOne)&&void 0!==u?u:H.I8,loop:null!==(d=t.loop)&&void 0!==d?d:H.Qv,controlOptions:(0,Z.Z)({},H.Ji,null!==(c=t.controlOptions)&&void 0!==c?c:{}),timeSlices:p.map(t=>{var e,i;return{duration:t.duration,delay:null!==(e=t.delay)&&void 0!==e?e:H.v0,delayAfter:null!==(i=t.delayAfter)&&void 0!==i?i:H.uX,effects:(0,b.IX)(t.effects).filter(t=>t.channel||t.type).map(t=>{var e;return{type:t.type,channel:t.channel,custom:t.custom,easing:null!==(e=t.easing)&&void 0!==e?e:H.fx,customParameters:t.customParameters,options:t.options}})}}),partitioner:t.partitioner,sort:t.sort}}(e);n&&(r.push({state:t,id:null!==(i=n.id)&&void 0!==i?i:`${t}-${s}`,timeline:n,originConfig:e}),s+=1)}),r}function V(t,e,i){return(0,E.Z)(t)?t.call(null,e.getDatum(),e,i):t}var U=i(9689);class W{constructor(t){this.parallelArrangers=[this],this.totalTime=0,this.startTime=0,this.endTime=0,this.animators=t.filter(t=>!(0,_.Z)(t)),this.totalTime=this.animators.reduce((t,e)=>Math.max(t,e.getTotalAnimationTime()),0)}parallel(t){let e=Array.from(new Set(this.parallelArrangers.concat(t.parallelArrangers)));return e.forEach(t=>{t.parallelArrangers=e}),this.arrangeTime(),this}after(t){return this.afterArranger=t,this.arrangeTime(),this}arrangeTime(){let t=this.parallelArrangers.reduce((t,e)=>Math.max(t,e.totalTime),this.totalTime),e=this.parallelArrangers.reduce((t,e)=>{var i,r;return Math.max(t,null!==(r=null===(i=e.afterArranger)||void 0===i?void 0:i.endTime)&&void 0!==r?r:0)},0);this.parallelArrangers.forEach(i=>{i.startTime=e,i.endTime=e+t,i.animators.forEach(t=>{t.startAt(e)})})}}class G{constructor(t,e){this.state=null,this.immediateConfigs=[],this.isEnabled=!0,this.disabledStates=[],this.animators=new Map,this.elementRecorder=new WeakMap,this.timelineCount={},this.mark=t,this.configs=N(null!=e?e:{})}getAnimationConfigs(t){var e;return this.isEnabled?(null!==(e=this.configs)&&void 0!==e?e:[]).filter(e=>e.state===t):[]}updateConfig(t){this.configs=N(null!=t?t:{})}updateState(t){this.state=t}animate(){if(!this.isEnabled||!this.configs||!this.configs.length)return;let t=this.mark.getAllElements(),e=this.mark.parameters();return t.forEach(t=>{var e;t.isReserved&&t.diffState!==m.OJ.exit&&(t.isReserved=!1);let i=null===(e=this.elementRecorder.get(t))||void 0===e?void 0:e.prevState;(this.configs.some(e=>i!==t.diffState&&e.state===i&&e.timeline.controlOptions.stopWhenStateChange)||t.diffState===m.OJ.exit)&&this.clearElementAnimation(t,!1)}),this.configs.forEach(i=>{this.animateByTimeline(i,t,e)}),this.mark.cleanExitElements(),this}runAnimationByState(t){if(!this.isEnabled)return;let e=this.configs.filter(e=>e.state===t),i=this.mark.getAllElements(),r=this.mark.parameters();return new W(e.reduce((t,e)=>t.concat(this.animateByTimeline(e,i,r,!0)),[]))}stopAnimationByState(t){let e=this.animators.get(t);return e&&e.forEach(t=>t.stop("end")),this}pauseAnimationByState(t){let e=this.animators.get(t);return e&&e.forEach(t=>t.pause()),this}resumeAnimationByState(t){let e=this.animators.get(t);return e&&e.forEach(t=>t.resume()),this}run(t){if(!this.isEnabled)return;let e=z(H.dw,t,this.immediateConfigs.length);this.immediateConfigs=this.immediateConfigs.concat(e);let i=this.mark.getAllElements(),r=this.mark.parameters();return new W(e.reduce((t,e)=>t.concat(this.animateByTimeline(e,i,r,!0)),[]))}stop(){return this.animators.forEach(t=>{t.forEach(t=>t.stop("end"))}),this}pause(){return this.animators.forEach(t=>t.forEach(t=>t.pause())),this}resume(){return this.animators.forEach(t=>t.forEach(t=>t.resume())),this}reverse(){return this}restart(){return this}record(){return this}recordEnd(){return this}isAnimating(){let t=!1;return this.animators.forEach(e=>{t=t||e.some(t=>t.isAnimating)}),t}isElementAnimating(t){var e;let i=null===(e=this.elementRecorder.get(t))||void 0===e?void 0:e.count;return(0,_.Z)(i)||Object.values(i).every(t=>0===t)}getAnimatorCount(){let t=0;return this.animators.forEach(e=>t+=e.length),t}getAllAnimators(){let t=[];return this.animators.forEach(e=>{t.push(...e)}),t}getElementAnimators(t,e){var i;let r=(0,b.IX)(t),s=[];return e?s=null!==(i=this.animators.get(e))&&void 0!==i?i:[]:this.animators.forEach(t=>{s=s.concat(t)}),s.filter(t=>r.includes(t.element))}enable(){return this.isEnabled=!0,this}disable(){return this.isEnabled=!1,this.stop(),this.animators.clear(),this}enableAnimationState(t){let e=(0,b.IX)(t);return this.disabledStates=this.disabledStates.filter(t=>!e.includes(t)),this}disableAnimationState(t){let e=(0,b.IX)(t);return this.disabledStates=this.disabledStates.concat(e),this}release(){this.stop(),this.animators.clear(),this.configs=null,this.animators=null,this.elementRecorder=null,this.timelineCount=null}animateByTimeline(t,e,i,r=!1){var s;let n=[],a=e.filter(e=>{let s=!(e.isReserved&&e.diffState===m.OJ.exit),n=this.getAnimationState(e),a=!this.disabledStates.includes(n),o=r||n===t.state,l=!t.timeline.partitioner||t.timeline.partitioner(e.getDatum(),e,i);return s&&a&&o&&l});if(a.length){(0,_.Z)(this.timelineCount[t.id])&&(this.timelineCount[t.id]=0),t.timeline.sort&&a.sort((e,r)=>t.timeline.sort(e.getDatum(),r.getDatum(),e,r,i));let e={width:this.mark.view.width(),height:this.mark.view.height(),group:null!==(s=this.mark.group)&&void 0!==s?s:null,mark:this.mark,view:this.mark.view,elementCount:a.length,elementIndex:0};a.forEach(e=>{var i;(null!==(i=this.animators.get(t.state))&&void 0!==i?i:[]).filter(i=>i.element===e&&i.animationOptions.id===t.id).forEach(t=>{t.stop(null,!1),this.handleAnimatorEnd(t,!1)})}),a.forEach((r,s)=>{e.elementIndex=s;let o=Object.assign({[H.DK]:e},i),l=this.getAnimationUnit(t.timeline,r,s,a.length,o);n.push(this.animateElement(t,l,r,e,o))})}return n}animateElement(t,e,i,r,s){var n,a;let o=new j(i,e,t);if(o.animate(r,s),!o.isAnimating)return;i.diffState===m.OJ.exit&&(i.isReserved=!0);let l=0===this.timelineCount[t.id];this.timelineCount[t.id]+=1;let h=null!==(n=this.elementRecorder.get(i))&&void 0!==n?n:{prevState:t.state,count:{}};h.prevState=t.state,h.count[t.state]=(null!==(a=h.count[t.state])&&void 0!==a?a:0)+1,this.elementRecorder.set(i,h);let u=this.animators.get(t.state);u?u.push(o):this.animators.set(t.state,[o]),o.callback(()=>{this.handleAnimatorEnd(o)});let d={mark:this.mark,animationState:t.state,animationConfig:t.originConfig};return l&&this.mark.emit(m.ZK.ANIMATION_START,d),this.mark.emit(m.ZK.ELEMENT_ANIMATION_START,d,i),o}getAnimationState(t){let e=(0,U.ZO)(this.state,this.mark.parameters(),t.getDatum(),t);return null!=e?e:t.diffState}getAnimationUnit(t,e,i,r,s){let n=[],a=V(t.startTime,e,s),o=V(t.totalTime,e,s),l=V(t.oneByOne,e,s),h=V(t.loop,e,s),u=0;t.timeSlices.forEach(t=>{var i;let a=V(t.delay,e,s),l=V(t.delayAfter,e,s),h=null!==(i=V(t.duration,e,s))&&void 0!==i?i:o/r,d=(0,b.IX)(t.effects).map(t=>Object.assign({},t,{customParameters:V(t.customParameters,e,s)}));n.push({effects:d,duration:h,delay:a,delayAfter:l}),u+=a+h+l});let d=(0,x.Z)(l)?l:!0===l?u:0;return{initialDelay:a,loopCount:(0,x.Z)(h)?h:!0===h?1/0:1,loopDelay:d*i,loopDelayAfter:d*(r-i-1),loopAnimateDuration:u,loopDuration:u+d*(r-1),totalTime:o,timeSlices:n}}clearElementAnimation(t,e=!0){this.animators.forEach(i=>{i.forEach(i=>{i.element===t&&(i.animationOptions.state===m.OJ.exit?i.stop("start",!1):i.stop("end",!1),this.handleAnimatorEnd(i,e))})}),this.elementRecorder.delete(t)}clearAllElements(){let t=this.mark.getAllElements();t&&t.forEach((e,i)=>{this.clearElement(e,i===t.length-1)})}clearElement(t,e=!0){this.clearElementAnimation(t),t.getGraphicItem()&&(t.clearGraphicAttributes(),t.diffState===m.OJ.exit&&(t.isReserved=!1),e&&this.mark.cleanExitElements())}handleAnimatorEnd(t,e=!0){let i=t.element,r=t.animationOptions,s=r.state,n=s===H.dw,a=this.elementRecorder.get(i).count;a[s]-=1,this.animators.set(s,this.animators.get(s).filter(e=>e!==t)),0===this.animators.get(s).length&&this.animators.delete(s),this.timelineCount[r.id]-=1;let o=0===this.timelineCount[r.id],l=n?this.immediateConfigs.find(t=>t.id===r.id).originConfig:this.configs.find(t=>t.id===r.id).originConfig;o&&(delete this.timelineCount[r.id],n&&(this.immediateConfigs=this.immediateConfigs.filter(t=>t.id!==r.id))),e&&(0===Object.keys(this.timelineCount).length?this.clearAllElements():s===m.OJ.exit&&0===a[m.OJ.exit]&&this.clearElement(i));let h={mark:this.mark,animationState:s,animationConfig:l};o&&this.mark.emit(m.ZK.ANIMATION_END,h),this.mark.emit(m.ZK.ELEMENT_ANIMATION_END,h,i)}}var $=i(1035);class X{constructor(){this.animate=new G(this,{})}initAnimate(t){this.animate||(this.animate=new G(this,t.animation),this.needAnimate()&&this.animate.updateState(t.animationState))}reuseAnimate(t){this.animate=t.animate,this.animate.mark=this}updateAnimate(t){this.animate.updateConfig(t.animation),this.animate.updateState(t.animationState)}}let Y=()=>{(0,p.jB)($.v,X)},K=()=>{c.F.registerStageEventPlugin("gesture",d)},q=()=>{y(),Y()}},7911:function(t,e,i){"use strict";i.d(e,{$C:()=>o,CJ:()=>a,zO:()=>n});var r=i(4546),s=i(9689);function n(t){return!!(null==t?void 0:t.scale)}function a(t){return!!(null==t?void 0:t.field)}function o(t,e){if(!t)return[];let i=[];return t.scale&&(i=(0,s.ch)(t.scale)?[t.scale]:(0,r.IX)(e.getScaleById(t.scale))),i.concat((0,s.Lf)(t,e))}},9818:function(t,e,i){"use strict";i.d(e,{X:()=>d});var r=i(9038),s=i(6082),n=i(7636),a=i(4761),o=i(9689);let l=(t,e,i)=>{var n;if("callback"===t&&(0,r.Z)(e))return{references:[],value:{callback:e,dependency:[]}};if(!(0,s.Z)(e.data)){let t=i.getDataById(e.data);return{references:[t],value:t}}if(!(0,s.Z)(e.customized)){let t=i.getCustomizedById(e.customized);return{references:[t],value:t}}if(!(0,s.Z)(e.scale)){let t=i.getScaleById(e.scale);return{references:[t],value:t}}if((0,o.$Z)(e)){let t=(0,o.Lf)(e,i);return{references:t,value:e.callback?{value:e.callback,dependency:t}:null!==(n=null==t?void 0:t[0])&&void 0!==n?n:e}}return{value:e}},h=(t,e,i)=>{if((0,s.Z)(e))return{value:e};if((0,n.Z)(e)){let r=e.map(e=>l(t,e,i));return{references:r.reduce((t,e)=>(e.references&&t.concat(e.references),t),[]),value:r.map(t=>t.value)}}return l(t,e,i)},u=(t,e)=>{let i=a.F.getTransform(t.type);if(!i)return;let r={},s=[];return Object.keys(t).forEach(i=>{var n;if("type"===i)return;let a=t[i];if("dependency"===i)return void((null==a?void 0:a.length)&&(s=s.concat((0,o.gx)(a,e))));let l=h(i,a,e);l&&((null===(n=l.references)||void 0===n?void 0:n.length)&&(s=s.concat(l.references)),r[i]=l.value)}),{markPhase:i.markPhase,transform:i.transform,canProgressive:i.canProgressive,type:i.type,options:r,references:s}},d=(t,e)=>{if(null==t?void 0:t.length){let i=[],r=[];return t.forEach(t=>{var s;let n=u(t,e);n&&((null===(s=n.references)||void 0===s?void 0:s.length)&&(r=r.concat(n.references)),i.push(n))}),{transforms:i,refs:r}}return null}},9689:function(t,e,i){"use strict";i.d(e,{$Z:()=>p,Lf:()=>l,Ur:()=>c,ZO:()=>u,ch:()=>g,gx:()=>o,hR:()=>h,it:()=>d,wn:()=>m});var r=i(4546),s=i(9904),n=i(9038),a=i(6082);function o(t,e){return(0,r.IX)(t).reduce((t,i)=>{let r=(0,s.Z)(i)?e.getGrammarById(i):i;return r&&t.push(r),t},[])}function l(t,e){if((0,a.Z)(t))return[];if(!(0,n.Z)(t)&&(null==t?void 0:t.signal)){let i=t.signal;if((0,s.Z)(i))return(0,r.IX)(e.getGrammarById(i));if("signal"===(null==i?void 0:i.grammarType))return[i]}else if(!(0,n.Z)(t)&&(null==t?void 0:t.callback))return o(t.dependency,e);return[]}function h(t){return(0,n.Z)(t)||(null==t?void 0:t.signal)||!!(null==t?void 0:t.callback)}function u(t,e,i,r){if((0,a.Z)(t))return t;if((0,n.Z)(t))return r?t.call(null,i,r,e):t.call(null,i,e);if(t.signal){let i=t.signal;return(0,s.Z)(i)?null==e?void 0:e[i]:i.output()}return t.callback?r?t.callback.call(null,i,r,e):t.callback.call(null,i,e):t}function d(t,e){if((0,a.Z)(t))return t;if((0,n.Z)(t))return t.call(null,e);if(t.signal){let i=t.signal;return(0,s.Z)(i)?null==e?void 0:e[i]:i.output()}return t.callback?t.callback.call(null,e):t}function c(t,e){return g(t)?t.output():e[t]}function p(t){return t&&(t.signal||t.callback)}let g=t=>t&&!(0,a.Z)(t.grammarType),m=t=>(0,n.Z)(t)?t:e=>e[t]},717:function(t,e,i){"use strict";i.d(e,{pK:()=>v,lK:()=>y});var r=i(4546);function s(t){return t.reduce((t,e)=>t+e,0)}let n={min:r.iH,max:r.CE,average:function(t){return 0===t.length?0:s(t)/t.length},sum:s};function a(t,e,i,r){let s=Math.floor(e.length/t),n=[],a=e.length,o,l,h,u=0,d=0;n[d++]=u;for(let t=1;t<a-1;t+=s){let i=Math.min(t+s,a-1),c=Math.min(t+2*s,a),p=(c+i)/2,g=0;for(let t=i;t<c;t++){let i=e[t][r];Number.isNaN(i)||(g+=i)}g/=c-i;let m=t,f=Math.min(t+s,a),v=t-1,y=e[u][r];o=-1,h=m;for(let t=m;t<f;t++){let i=e[t][r];Number.isNaN(r)||(l=Math.abs((v-p)*(i-y)-(v-t)*(g-y)))>o&&(o=l,h=t)}n[d++]=h,u=h}return n[d-1]!==a-1&&(n[d++]=a-1),n.map(t=>i?e[t].i:t)}function o(t,e,i,r,s){let a=Math.floor(e.length/t),o=[],l=e.length,h=0,u=[];o.push(h),e[h][s]=e[h][s];for(let t=1;t<l-1;t+=a){a>l-t&&(a=l-t,u.length=a),u=[];for(let i=0;i<a;i++)u.push(e[t+i][s]);let i=n[r](u);e[h=Math.min(Math.round(t+u.length/2)||0,l-1)][s]=i,o.push(h)}return o.map(t=>i?e[t].i:t)}function l(t,e,i,r){return o(t,e,i,"min",r)}function h(t,e,i,r){return o(t,e,i,"max",r)}function u(t,e,i,r){return o(t,e,i,"average",r)}function d(t,e,i,r){return o(t,e,i,"sum",r)}let c=(t,e)=>{let i=t.size,r=t.factor||1;if(Array.isArray(i)&&(i=Math.floor(i[1]-i[0])),(i*=r)<=0)return[];if(e.length<=i)return e;if(t.skipfirst)return e.slice(0,1);let{mode:s,yfield:n,groupBy:o}=t,c=null!=n?n:"y",p=a;if("min"===s?p=l:"max"===s?p=h:"average"===s?p=u:"sum"===s&&(p=d),e.length){let t={};if(o){for(let i=0,r=e.length;i<r;i++){let r=e[i],s=r[o];t[s]||(t[s]=[]),t[s].push({[c]:r[c],i:i})}let r=[];return Object.keys(t).forEach(s=>{let n=t[s];if(n.length<=i){let t=n.map(t=>t.i);r=r.concat(t)}else{let t=p(i,n,!0,c);r=r.concat(t),n.forEach(t=>e[t.i][c]=t[c])}}),r.sort((t,e)=>t-e),r.map(t=>e[t])}return p(i,e,!1,c).map(t=>e[t])}return[]};var p=i(6082),g=i(6602);let m=(t,e)=>{if(!e||0===e.length)return;let{radius:i}=t;(0,p.Z)(i)&&"symbol"===e[0].mark.markType&&(i=!0);let{direction:r,delta:s,deltaMul:n=1,groupBy:a}=t,o=e=>{e.forEach(t=>{t.getGraphicAttribute(g.uE)&&(t.setGraphicAttribute("visible",!0),t.setGraphicAttribute(g.uE,!1))});let a=t.sort?e.slice().sort((t,e)=>t.getGraphicAttribute("x")-e.getGraphicAttribute("x")):e;0===r?function(t,e,i,r){if(r){let r=-1/0,s=-1/0,n=0,a=0,o=(0,p.Z)(e),l=e;t.forEach(t=>{if(!1===t.getGraphicAttribute("visible"))return;let e=t.getGraphicAttribute("size")/2,a=t.getGraphicAttribute("x"),h=t.getGraphicAttribute("y");o&&(l=(e+n)*i),(r-a)**2+(s-h)**2<(l+n+e)**2?t.getGraphicAttribute("forceShow")||(t.setGraphicAttribute(g.uE,!0),t.setGraphicAttribute("visible",!1)):s=h,n=e})}}(a,s,n,i):1===r?function(t,e,i,r){if(r){let r=-1/0,s=0,n=(0,p.Z)(e),a=e;t.forEach(t=>{if(!1===t.getGraphicAttribute("visible"))return;let e=t.getGraphicAttribute("size")/2,o=t.getGraphicAttribute("x");n&&(a=(e+s)*i),Math.abs(o-r)<a+s+e?t.getGraphicAttribute("forceShow")||(t.setGraphicAttribute(g.uE,!0),t.setGraphicAttribute("visible",!1)):r=o,s=e})}}(a,s,n,i):function(t,e,i,r){if(r){let r=-1/0,s=0,n=(0,p.Z)(e),a=e;t.forEach(t=>{if(!1===t.getGraphicAttribute("visible"))return;let e=t.getGraphicAttribute("size")/2,o=t.getGraphicAttribute("y");n&&(a=(e+s)*i),Math.abs(o-r)<a+s+e?t.getGraphicAttribute("forceShow")||(t.setGraphicAttribute(g.uE,!0),t.setGraphicAttribute("visible",!1)):r=o,s=e})}}(a,s,n,i)};if(a){let t=e.reduce((t,e)=>{let i=e.getDatum()[a];return t[i]?t[i].push(e):t[i]=[e],t},{});Object.keys(t).forEach(e=>{o(t[e])})}else o(e);return e};var f=i(4761);let v=()=>{f.F.registerTransform("sampling",{transform:c,markPhase:"afterEncode"},!0)},y=()=>{f.F.registerTransform("markoverlap",{transform:m,markPhase:"afterEncode"},!0)}},670:function(t,e,i){"use strict";i.d(e,{Z:()=>tY});var r,s,n=i(1312),a=i.n(n),o=i(2937),l=i(4546),h=i(9904),u=i(1725),d=i(6082),c=i(7636),p=i(4659),g=i(8612),m=i(668),f=i(9689),v=i(9818),y=i(2698),_=i(8947),b=i(6338),x=i(2449);let S={csv:_.UI,dsv:_.$W,tsv:_.mK,json:(t,e={},i)=>{if(!(0,h.Z)(t))return(0,l.IX)(t);try{return(0,l.IX)(JSON.parse(t))}catch(t){return[]}}},A=(t,e)=>{if(!e||!S[e.type])return(0,l.IX)(t);let i="dsv"===e.type?{delimiter:e.delimiter}:{};return S[e.type](t,i,new b.VO(new x.q))};class k extends m.S{constructor(t,e,i){super(t),this.grammarType="data",this.spec={},this._dataIDKey=`VGRAMMAR_DATA_ID_KEY_${this.uid}`,this._loadTasks=[],this._postFilters=[],this.ingest=t=>{let e=(0,f.it)(t.format,this.parameters());return this._input=A(t.values,e),this._input},this.load=t=>{if(t.values)return this.ingest(t)},this.relay=t=>t[0],this._loadTasks=[],(0,d.Z)(e)||this.values(e,i)}parse(t){return super.parse(t),this._isLoaded=!1,this.source(t.source,t.format,!1),this.url(t.url,t.format,!1),this.values(t.values,t.format,!1),this.transform(t.transform),this.parseLoad(t),this.commit(),this}parseDataSource(t){let e=[],i=[],r=t.format?(0,f.Lf)(t.format,this.view)[0]:null;if(r&&e.push(r),t.values){let r=(0,f.Lf)(t.values,this.view)[0];r&&e.push(r),i.push({type:"ingest",transform:this.ingest,isRawOptions:!0,options:{values:t.values,format:t.format}})}else if(t.url){let s=(0,f.Lf)(t.url,this.view)[0];s&&e.push(s),i.push({type:"load",transform:this.load,options:{url:null!=s?s:t.url,format:null!=r?r:t.format}})}else if(t.source){let r=[];(0,l.IX)(t.source).forEach(t=>{let i=(0,f.ch)(t)?t:this.view.getDataById(t);i&&(e.push(i),r.push(i))}),r.length&&(i.push({type:"relay",transform:this.relay,options:r}),this.grammarSource=r[0])}return{transforms:i,refs:e}}evaluate(t,e){this.view.emit(y.ZK.BEFORE_EVALUATE_DATA);let i=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms);this.grammarSource&&(this._input=t);let r=this.evaluateTransform(i,this._input,e),s=this._evaluateFilter(r,e);return this.setValues(s),this._isLoaded=!0,this.view.emit(y.ZK.AFTER_EVALUATE_DATA),this}output(){return this._values}getDataIDKey(){return this._dataIDKey}values(t,e,i=!0){let r=Object.assign({},this.spec,{values:t,format:e});return(0,d.Z)(t)||(r.url=void 0,r.source=void 0),i?this.parseLoad(r):this}url(t,e,i=!0){let r=Object.assign({},this.spec,{url:t,format:e});return(0,d.Z)(t)||(r.values=void 0,r.source=void 0),i?this.parseLoad(r):this}source(t,e,i=!0){let r=Object.assign({},this.spec,{source:t,format:e});return(0,d.Z)(t)||(r.values=void 0,r.url=void 0),i?this.parseLoad(r):this}parseLoad(t){this.detach(this.parseDataSource(this.spec).refs),this.spec=t;let e=this.parseDataSource(this.spec);return this.attach(e.refs),this._loadTasks=e.transforms,this._isLoaded=!1,this.commit(),this}setValues(t){this._values=(0,l.IX)(t).map((t,e)=>{let i=t===Object(t)?t:{data:t};return i[this._dataIDKey]=e,i})}field(t){return this._values.map(e=>e[t])}transform(t){let e=(0,v.X)(this.spec.transform,this.view);e&&(this.detach(e.refs),this.transforms=[]),this.spec.transform=t;let i=(0,v.X)(this.spec.transform,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.commit(),this}getValue(){return this._values}getInput(){return this._input}addDataFilter(t){return this._postFilters=this._postFilters.concat((0,l.IX)(t)),this._postFilters.sort((t,e)=>{var i,r;return(null!==(i=t.rank)&&void 0!==i?i:0)-(null!==(r=e.rank)&&void 0!==r?r:0)}),this}removeDataFilter(t){let e=(0,l.IX)(t);return this._postFilters=this._postFilters.filter(t=>!e.includes(t)),this}_evaluateFilter(t,e){return this._postFilters.reduce((t,i)=>i.filter(t,e),t)}reuse(t){return t.grammarType!==this.grammarType||(this._isLoaded=!1,this._values=t.output()),this}clear(){super.clear(),this._input=null,this._values=null}}function w(t,e,i,r){let s,n;let a=t[e];for(;e>i&&(s=t[n=Math.floor((e-1)/2)],a&&s&&0>r(a,s));)t[e]=s,e=n;return t[e]=a}function C(t,e,i,r){let s=e,n=null!=i?i:t.length,a=t[e],o,l=2*e+1;for(;l<n;)(o=l+1)<n&&r(t[l],t[o])>=0&&(l=o),t[e]=t[l],l=2*(e=l)+1;return t[e]=a,w(t,e,s,r)}class T{constructor(t){this.compare=t,this.nodes=[]}size(){return this.nodes.length}last(){return this.nodes[0]}validate(){for(let t=this.nodes.length-1;t>0;t-=1){let e=Math.floor((t-1)/2);if(this.compare(this.nodes[e],this.nodes[t])>0)return!1}return!0}push(t){if(this.nodes.includes(t)){let e=this.nodes.indexOf(t);return w(this.nodes,e,0,this.compare),C(this.nodes,e,null,this.compare)}return this.nodes.push(t),w(this.nodes,this.nodes.length-1,0,this.compare)}remove(t){if(this.nodes.includes(t)){let e=this.nodes.indexOf(t);this.nodes=this.nodes.slice(0,e).concat(this.nodes.slice(e+1)),w(this.nodes,e,0,this.compare),C(this.nodes,e,null,this.compare)}}pop(){let t;let e=this.nodes.pop();return this.nodes.length?(t=this.nodes[0],this.nodes[0]=e,C(this.nodes,0,null,this.compare)):t=e,t}clear(){this.nodes=[]}}let E=t=>t;class M{constructor(t){this.list=[],this.ids={},this.idFunc=t||E}add(t){let e=this.idFunc(t);return this.ids[e]||(this.ids[e]=1,this.list.push(t)),this}remove(t){let e=this.idFunc(t);return this.ids[e]&&(this.ids[e]=0,this.list=this.list.filter(e=>e!==t)),this}forEach(t,e){e?this.list.slice().reverse().forEach(t):this.list.forEach(t)}filter(t){return this.list.filter(t)}get length(){return this.list.length}getElementByIndex(t){return this.list[t]}}class B{constructor(){this.grammars=[],this.logger=p.Y.getInstance(),this._curRank=0,this._committed=new M(t=>t.uid),this._heap=new T((t,e)=>(null==t?void 0:t.qrank)-(null==e?void 0:e.qrank)),this._beforeRunner=null,this._afterRunner=null,this._updateCounter=0,this._finishFirstRender=!1}add(t){if(t)return this._setRankOfGrammar(t),this.commit(t),!this.grammars.includes(t)&&(this.grammars.push(t),!0)}remove(t){t&&(this._committed.remove(t),this._heap.remove(t),this.grammars=this.grammars.filter(e=>e!==t))}_setRankOfGrammar(t){t&&(t.rank=++this._curRank)}_reRank(t){let e=[t];for(;e.length;){let i=e.pop();this._setRankOfGrammar(i);let r=i.targets;r&&r.forEach(i=>{e.push(i),i===t&&this.logger.error("Cycle detected in dataflow graph.")})}}_enqueue(t){t&&(t.qrank=t.rank,this._heap.push(t))}_logGrammarRunInfo(t){if(this.logger.canLogError()){let e=[{key:"id",value:t.id()},{key:"name",value:t.name()}].reduce((t,e,i)=>(0,d.Z)(e.value)?t:`${t}${i?" , ":""}${e.key}: ${e.value}`,"");this.logger.debug("Run Operator: ",t,e)}}hasCommitted(){return!!this._committed.length}commit(t){return this._committed.add(t),this}_beforeEvaluate(){this.grammars.forEach(t=>{t.targets.some(e=>(null==e?void 0:e.rank)<(null==t?void 0:t.rank))&&this._reRank(t)}),this._committed.forEach(t=>this._enqueue(t)),this._committed=new M(t=>t.uid)}_enqueueTargets(t){t.targets&&t.targets.length&&this._finishFirstRender&&t.targets.forEach(t=>this._enqueue(t))}evaluate(){if(this._beforeRunner&&this._beforeRunner(this),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._updateCounter+=1;let t,e,i=0;for(this.logger.canLogInfo()&&(e=Date.now(),this.logger.debug(`-- START PROPAGATION (${this._updateCounter}) -----`)),this._beforeEvaluate();this._heap.size()>0;)(t=this._heap.pop())&&(t.rank===t.qrank?(t.run(),this._logGrammarRunInfo(t),this._enqueueTargets(t),i+=1):this._enqueue(t));return this.logger.canLogInfo()&&(e=Date.now()-e,this.logger.info(`> ${i} grammars updated; ${e} ms`)),this._afterRunner&&this._afterRunner(this),this._finishFirstRender=!0,!0}runBefore(t){this._beforeRunner=t}runAfter(t){this._afterRunner=t}release(){this._heap&&(this._heap.clear(),this._heap=null),this.logger=null,this._committed=null}}let D=(t,e,i,r,s)=>{let n=t=>{if(s||!t||r&&!r(t)||i.call(null,t),t.markType===y.Cm.group){let i=t[e];i&&i.forEach(t=>{n(t)})}s&&t&&(!r||r(t))&&i.call(null,t)};n(t)};var O=i(4154),P=i(8909),I=i(7393),R=i(2683),L=i(2575),F=i(306),j=i(7846),Z=i(1361);class H extends Z.x{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,s,n,a,o,l,h,u,d,c,p,g){throw Error("Method not implemented.")}}class N extends H{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw Error("getPredictedEvents is not supported!")}clone(){var t,e,i;let r=new N(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,null===(t=this.manager)||void 0===t||t.copyPointerData(this,r),null===(e=this.manager)||void 0===e||e.copyMouseData(this,r),null===(i=this.manager)||void 0===i||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();let s=this.composedDetailPath();return r.detailPath=s&&s.slice(),r.type=this.type,r}}class z extends H{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,i;let r=new z(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,null===(t=this.manager)||void 0===t||t.copyWheelData(this,r),null===(e=this.manager)||void 0===e||e.copyMouseData(this,r),null===(i=this.manager)||void 0===i||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();let s=this.composedDetailPath();return r.detailPath=s&&s.slice(),r.type=this.type,r}}z.DOM_DELTA_PIXEL=0,z.DOM_DELTA_LINE=1,z.DOM_DELTA_PAGE=2;var V=i(5405),U=i(5939);function W(t){return"mouse"===t||"pen"===t}class G{constructor(t,e){this.dispatch=new(a()),this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(t,e)=>{if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(i,"pointerdown"),"touch"===i.pointerType)this.dispatchEvent(i,"touchstart");else if(W(i.pointerType)){let t=2===i.button;this.dispatchEvent(i,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)},this.onPointerMove=(t,e)=>{var i,r;if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let s=this.createPointerEvent(t,t.type,e),n=W(s.pointerType),a=this.trackingData(t.pointerId),o=this.findMountedTarget(a.overTargets);if(a.overTargets&&o&&o!==this.rootTarget&&o!==s.target){let e="mousemove"===t.type?"mouseout":"pointerout",i=this.createPointerEvent(t,e,o||void 0);if(this.dispatchEvent(i,"pointerout"),n&&this.dispatchEvent(i,"mouseout"),!s.composedPath().includes(o)){let e=this.createPointerEvent(t,"pointerleave",o||void 0);for(e.eventPhase=e.AT_TARGET;e.target&&!s.composedPath().includes(e.target);)e.currentTarget=e.target,this.notifyTarget(e),n&&this.notifyTarget(e,"mouseleave"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(i)}if(o!==s.target){let e="mousemove"===t.type?"mouseover":"pointerover",i=this.clonePointerEvent(s,e);this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover");let r=null==o?void 0:o.parent;for(;r&&r!==this.rootTarget.parent&&r!==s.target;)r=r.parent;if(!r||r===this.rootTarget.parent){let t=this.clonePointerEvent(s,"pointerenter");t.eventPhase=t.AT_TARGET;let e=t.target,i=new Set,r=o;for(;r&&r!==this.rootTarget;)i.add(r),r=r.parent;for(;e&&e!==o&&e!==this.rootTarget.parent;)i.has(e)||(t.currentTarget=e,this.notifyTarget(t),n&&this.notifyTarget(t,"mouseenter")),e=e.parent;this.freeEvent(t)}this.freeEvent(i)}this.dispatchEvent(s,"pointermove"),"touch"===s.pointerType&&this.dispatchEvent(s,"touchmove"),n&&(this.dispatchEvent(s,"mousemove"),this.cursorTarget=s.target,this.cursor=(null===(r=null===(i=s.target)||void 0===i?void 0:i.attribute)||void 0===r?void 0:r.cursor)||this.rootTarget.getCursor()),a.overTargets=s.composedPath(),this.freeEvent(s)},this.onPointerOver=(t,e)=>{var i,r;if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let s=this.trackingData(t.pointerId),n=this.createPointerEvent(t,t.type,e),a=W(n.pointerType);this.dispatchEvent(n,"pointerover"),a&&this.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(this.cursorTarget=n.target,this.cursor=(null===(r=null===(i=n.target)||void 0===i?void 0:i.attribute)||void 0===r?void 0:r.cursor)||this.rootTarget.getCursor());let o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),a&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;s.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)},this.onPointerOut=(t,e)=>{if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId);if(i.overTargets){let e=W(t.pointerType),r=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(t,"pointerout",r||void 0);this.dispatchEvent(s),e&&this.dispatchEvent(s,"mouseout");let n=this.createPointerEvent(t,"pointerleave",r||void 0);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),e&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;i.overTargets=[],this.freeEvent(s),this.freeEvent(n)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(t,e)=>{var i;if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=U.m.now(),s=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(s,"pointerup"),"touch"===s.pointerType)this.dispatchEvent(s,"touchend");else if(W(s.pointerType)){let t=2===s.button;this.dispatchEvent(s,t?"rightup":"mouseup")}let n=this.trackingData(t.pointerId),a=this.findMountedTarget(n.pressTargetsByButton[t.button]),o=a;if(a&&!s.composedPath().includes(a)){let e=a;for(;e&&!s.composedPath().includes(e);){if(s.currentTarget=e,this.notifyTarget(s,"pointerupoutside"),"touch"===s.pointerType)this.notifyTarget(s,"touchendoutside");else if(W(s.pointerType)){let t=2===s.button;this.notifyTarget(s,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],o=e}if(o){let e=this.clonePointerEvent(s,"click");e.target=o,e.path=[],e.detailPath=[],n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:e.target,timeStamp:r});let a=n.clicksByButton[t.button];a.target===e.target&&r-a.timeStamp<(null!==(i=this._config.clickInterval)&&void 0!==i?i:200)?++a.clickCount:a.clickCount=1,a.target=e.target,a.timeStamp=r,e.detail=a.clickCount,W(e.pointerType)?(this.dispatchEvent(e,"click"),2===a.clickCount&&this.dispatchEvent(e,"dblclick")):"touch"===e.pointerType&&this._config.supportsTouchEvents&&(this.dispatchEvent(e,"tap"),2===a.clickCount&&this.dispatchEvent(e,"dbltap")),this.dispatchEvent(e,"pointertap"),this.freeEvent(e)}this.freeEvent(s)},this.onPointerUpOutside=(t,e)=>{if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[t.button]),s=this.createPointerEvent(t,t.type,e);if(r){let e=r;for(;e;)s.currentTarget=e,this.notifyTarget(s,"pointerupoutside"),"touch"===s.pointerType?this.notifyTarget(s,"touchendoutside"):W(s.pointerType)&&this.notifyTarget(s,2===s.button?"rightupoutside":"mouseupoutside"),e=e.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(s)},this.onWheel=(t,e)=>{if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");let i=this.createWheelEvent(t,e);this.dispatchEvent(i),this.freeEvent(i)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((t,e)=>t.priority-e.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,i,r,s,n,a,o;let l;if(!this.rootTarget)return;let h=this.mappingTable[t.type],u=`${t.canvasX}-${t.canvasY}`;if((null===(e=this._prePointTargetCache)||void 0===e?void 0:e[u])&&(null===(r=null===(i=this._prePointTargetCache)||void 0===i?void 0:i[u])||void 0===r?void 0:r.stage)&&(null===(n=null===(s=this._prePointTargetCache)||void 0===s?void 0:s[u])||void 0===n?void 0:n.stage.renderCount)===(null===(a=this._prePointTargetCache)||void 0===a?void 0:a.stageRenderCount)?l=this._prePointTargetCache[u]:(l=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[u]:l,stageRenderCount:null!==(o=null==l?void 0:l.stage.renderCount)&&void 0!==o?o:-1})),h)for(let e=0,i=h.length;e<i;e++)h[e].fn(t,l);else p.Y.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){let e=[t];for(let i=0;i<2048&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=null!=e?e:t.type;let i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var r,s;let n=this.allocateEvent(N);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i||this.pickTarget(null!==(r=n.viewX)&&void 0!==r?r:n.global.x,null!==(s=n.viewY)&&void 0!==s?s:n.global.y,n),"string"==typeof e&&(n.type=e),n}createWheelEvent(t,e){var i,r;let s=this.allocateEvent(z);return this.copyWheelData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=e||this.pickTarget(null!==(i=s.viewX)&&void 0!==i?i:s.global.x,null!==(r=s.viewY)&&void 0!==r?r:s.global.y,s),s}clonePointerEvent(t,e){let i=this.allocateEvent(N);i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice();let r=t.composedDetailPath();return i.detailPath=r&&r.slice(),i.type=null!=e?e:i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof N&&e instanceof N&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof H&&e instanceof H&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(i=>{e[i].x=t[i].x,e[i].y=t[i].y}))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=U.m.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);let i=(null===(e=this.eventPool.get(t))||void 0===e?void 0:e.pop())||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(t){var e;if(t.manager!==this)throw Error("It is illegal to free an event not managed by this EventManager!");let i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),null===(e=this.eventPool.get(i))||void 0===e||e.push(t)}notifyListeners(t,e){let i=t.currentTarget._events[e];if(i){if("fn"in i)i.once&&t.currentTarget.removeEventListener(e,i.fn,{once:!0}),i.fn.call(i.context,t);else for(let r=0,s=i.length;r<s&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeEventListener(e,i[r].fn,{once:!0}),i[r].fn.call(i[r].context,t)}this.emitDelegation(t,e)}emitDelegation(t,e){let i=t.currentTarget._events[V.g];if(i){if("fn"in i)i.fn.call(i.context,t,e);else for(let r=0,s=i.length;r<s&&!t.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,t,e)}}pickTarget(t,e,i){let r;let s=this.rootTarget.pick(t,e);return r=s&&s.graphic?s.graphic:s&&s.group?s.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,i&&(i.pickParams=s.params),r}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}let $={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class X{constructor(t){this.resolution=1,this.onPointerDown=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(!t.cancelable&&"cancelable"in t||t.preventDefault());for(let t=0,i=e.length;t<i;t++){let i=e[t],r=this.bootstrapEvent(this.rootPointerEvent,i);this.manager.mapEvent(r)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType||this.isEventOutsideOfTargetElement(t))return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.isEventOutsideOfTargetViewPort(t)?"outside":"",i=this.normalizeToPointerData(t);for(let t=0,r=i.length;t<r;t++){let r=this.bootstrapEvent(this.rootPointerEvent,i[t]);r.type+=e,this.manager.mapEvent(r)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=t=>{let e=this.normalizeWheelEvent(t);this.manager.mapEvent(e)};let{targetElement:e,resolution:i,rootNode:r,global:s,autoPreventDefault:n=!1,clickInterval:a,supportsTouchEvents:o=s.supportsTouchEvents,supportsPointerEvents:l=s.supportsPointerEvents}=t;this.manager=new G(r,{clickInterval:a,supportsTouchEvents:o}),this.globalObj=s,this.supportsPointerEvents=l,this.supportsTouchEvents=o,this.supportsMouseEvents=s.supportsMouseEvents,this.applyStyles=s.applyStyles,this.autoPreventDefault=n,this.eventsAdded=!1,this.rootPointerEvent=new N,this.rootWheelEvent=new z,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");let{applyStyles:i,domElement:r}=this;if(this.currentCursor===t)return;this.currentCursor=t;let s=this.cursorStyles[t];s?"string"==typeof s&&i?r.style.cursor=s:"function"==typeof s?s(t):"object"==typeof s&&i&&Object.assign(r.style,s):i&&(0,h.Z)(t)&&!(0,F.Z)(this.cursorStyles,t)&&(r.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.getDocument().addEventListener("pointermove",this.onPointerMove,!0),t.getDocument().addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.getDocument().addEventListener("mousemove",this.onPointerMove,!0),t.getDocument().addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.getDocument().removeEventListener("pointermove",this.onPointerMove,!0),t.getDocument().removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.getDocument().removeEventListener("mousemove",this.onPointerMove,!0),t.getDocument().removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,i;let r=null===(e=this.globalObj)||void 0===e?void 0:e.mapToCanvasPoint(t,this.domElement);if(r)return r;let s=0,n=0;if(t.changedTouches){let e=null!==(i=t.changedTouches[0])&&void 0!==i?i:{};s=e.clientX||0,n=e.clientY||0}else s=t.clientX||0,n=t.clientY||0;let a=this.domElement.getBoundingClientRect();return{x:s-a.left,y:n-a.top}}normalizeToPointerData(t){let e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let i=0,r=t.changedTouches.length;i<r;i++){let r=t.changedTouches[i];(0,j.Z)(r.button)&&(r.button=0),(0,j.Z)(r.buttons)&&(r.buttons=1),(0,j.Z)(r.isPrimary)&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,j.Z)(r.width)&&(r.width=r.radiusX||1),(0,j.Z)(r.height)&&(r.height=r.radiusY||1),(0,j.Z)(r.tiltX)&&(r.tiltX=0),(0,j.Z)(r.tiltY)&&(r.tiltY=0),(0,j.Z)(r.pointerType)&&(r.pointerType="touch"),(0,j.Z)(r.pointerId)&&(r.pointerId=r.identifier||0),(0,j.Z)(r.pressure)&&(r.pressure=r.force||.5),(0,j.Z)(r.twist)&&(r.twist=0),(0,j.Z)(r.tangentialPressure)&&(r.tangentialPressure=0),(0,j.Z)(r.layerX)&&(r.layerX=r.offsetX=r.clientX),(0,j.Z)(r.layerY)&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=t.type,e.push(r)}else this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent)||((0,j.Z)(t.isPrimary)&&(t.isPrimary=!0),(0,j.Z)(t.width)&&(t.width=1),(0,j.Z)(t.height)&&(t.height=1),(0,j.Z)(t.tiltX)&&(t.tiltX=0),(0,j.Z)(t.tiltY)&&(t.tiltY=0),(0,j.Z)(t.pointerType)&&(t.pointerType="mouse"),(0,j.Z)(t.pointerId)&&(t.pointerId=1),(0,j.Z)(t.pressure)&&(t.pressure=.5),(0,j.Z)(t.twist)&&(t.twist=0),(0,j.Z)(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e}normalizeWheelEvent(t){let e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;let{x:i,y:r}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=r,e.global.x=i,e.global.y=r,e.offset.x=i,e.offset.y=r;let{x:s,y:n}=this.mapToViewportPoint(e);return e.viewport.x=s,e.viewport.y=n,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);let{x:i,y:r}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=r,t.global.x=i,t.global.y=r,t.offset.x=i,t.offset.y=r;let{x:s,y:n}=this.mapToViewportPoint(t);return t.viewport.x=s,t.viewport.y=n,t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=$[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=U.m.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){let e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),i=this.domElement.getViewBox(),r=i.width(),s=i.height();return!(e.x<r&&e.y<s&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}var Y=i(6480),K=i(6403),q=i(411),J=i(8535),Q=i(7141),tt=i(7050),te=i(86),ti=i(534);class tr{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&null!=t.stage&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,ti.w.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),ti.w.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),ti.w.graphicService.hooks.onRemove.tap(this.key,this.handleChange)}deactivate(t){let e=t=>t.filter(t=>t.name!==this.key);ti.w.graphicService.hooks.onAttributeUpdate.taps=e(ti.w.graphicService.hooks.onAttributeUpdate.taps),ti.w.graphicService.hooks.onSetStage.taps=e(ti.w.graphicService.hooks.onSetStage.taps),ti.w.graphicService.hooks.onRemove.taps=e(ti.w.graphicService.hooks.onRemove.taps)}}class ts{constructor(){this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&null!=t.stage&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,this.dpr=ti.w.global.devicePixelRatio,this.refresh()}refresh(){this._refreshByMediaQuery()||this._refreshByRaf()}_refreshByRaf(){let t=ti.w.global.getRequestAnimationFrame();this.rafId=t(()=>{ti.w.global.devicePixelRatio!==this.dpr&&(this.dpr=ti.w.global.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0)),this.refresh()})}_refreshByMediaQuery(){try{let t=`(resolution: ${window.devicePixelRatio}dppx)`,e=()=>{window.devicePixelRatio!==this.dpr&&(this.dpr=window.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0))},i=matchMedia(t);i&&i.addEventListener("change",e),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push(()=>{i&&i.removeEventListener("change",e)})}catch(t){return!1}return!0}deactivate(t){var e;let i=ti.w.global.getCancelAnimationFrame();i&&this.rafId&&i(this.rafId),null===(e=this.autoRefreshCbs)||void 0===e||e.forEach(t=>{t()}),this.autoRefreshCbs=void 0}}class tn{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,ti.w.graphicService.hooks.onAddIncremental.tap(this.key,(e,i,r)=>{e.glyphHost&&(e=e.glyphHost),e.stage===t.stage&&null!=e.stage&&(this.nextUserParams.startAtId=i._uid,this.renderNextFrame(i))}),ti.w.graphicService.hooks.onClearIncremental.tap(this.key,(e,i)=>{e.stage===t.stage&&null!=e.stage&&(this.nextUserParams.startAtId=e._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(e))})}deactivate(t){ti.w.graphicService.hooks.onAddIncremental.taps=ti.w.graphicService.hooks.onAddIncremental.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.onClearIncremental.taps=ti.w.graphicService.hooks.onClearIncremental.taps.filter(t=>t.name!==this.key)}renderNextFrame(t){this.nextFrameRenderGroupSet.add(t),this.willNextFrameRender||(this.willNextFrameRender=!0,ti.w.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){let t=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(e=>{let i=e.layer;if(!i||!e.layer.subLayers)return;let r=e.layer.subLayers.get(e._uid);r&&r.drawContribution&&r.drawContribution.draw(t.renderService,Object.assign({stage:t,layer:i,viewBox:t.window.getViewBox(),transMatrix:t.window.getViewBoxTransform(),clear:"transparent",renderService:t.renderService,updateBounds:!1,startAtId:e._uid,context:r.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}let ta=new I.FB;class to{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,t=>{t&&t===this.pluginService.stage&&t.dirtyBounds.clear()}),ti.w.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(t,e,i,r)=>{t.glyphHost&&(t=t.glyphHost),e&&e===this.pluginService.stage&&e.renderCount&&(t.isContainer&&!t.shouldSelfChangeUpdateAABBBounds()||i&&(ta.setValue(r.x1,r.y1,r.x2,r.y2),e.dirty(ta,t.parent&&t.parent.globalTransMatrix)))}),ti.w.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(t,e,i,r,s)=>{e&&e===this.pluginService.stage&&e.renderCount&&(t.isContainer&&!s||e.dirty(r.globalAABBBounds))}),ti.w.graphicService.hooks.clearAABBBounds.tap(this.key,(t,e,i)=>{e&&e===this.pluginService.stage&&e.renderCount&&e&&e.dirty(i)}),ti.w.graphicService.hooks.onRemove.tap(this.key,t=>{let e=t.stage;e&&e===this.pluginService.stage&&e.renderCount&&e&&e.dirty(t.globalAABBBounds)})}deactivate(t){ti.w.graphicService.hooks.beforeUpdateAABBBounds.taps=ti.w.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.afterUpdateAABBBounds.taps=ti.w.graphicService.hooks.afterUpdateAABBBounds.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.clearAABBBounds.taps=ti.w.graphicService.hooks.clearAABBBounds.taps.filter(t=>t.name!==this.key),t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.onRemove.taps=ti.w.graphicService.hooks.onRemove.taps.filter(t=>t.name!==this.key)}}(r=s||(s={}))[r.INITIAL=0]="INITIAL",r[r.RUNNING=1]="RUNNING",r[r.PAUSE=2]="PAUSE";class tl{static Avaliable(){return!!ti.w.global.getRequestAnimationFrame()}avaliable(){return tl.Avaliable()}tick(t,e){ti.w.global.getRequestAnimationFrame()(()=>{this.released||e(this)})}release(){this.released=!0}getTime(){return Date.now()}}class th{static Avaliable(){return!0}avaliable(){return th.Avaliable()}tick(t,e){this.timerId=setTimeout(()=>{e(this)},t)}release(){this.timerId>0&&(clearTimeout(this.timerId),this.timerId=-1)}getTime(){return Date.now()}}class tu extends a(){set mode(t){this._mode!==t&&(this._mode=t,this.setupTickHandler())}get mode(){return this._mode}constructor(t=[]){super(),this.handleTick=(t,e)=>{let{once:i=!1}=null!=e?e:{};this.ifCanStop()?this.stop():(this._handlerTick(),i||t.tick(this.interval,this.handleTick))},this._handlerTick=()=>{let t=this.tickerHandler.getTime(),e=0;this.lastFrameTime>=0&&(e=t-this.lastFrameTime),this.lastFrameTime=t,this.status===s.RUNNING&&(this.tickCounts++,this.timelines.forEach(t=>{t.tick(e)}),this.emit("tick"))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.timelines=t,this.autoStop=!0}init(){this.interval=NaN,this.status=s.INITIAL,ti.w.global.hooks.onSetEnv.tap("default-ticker",()=>{this.initHandler()}),ti.w.global.env&&this.initHandler()}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}getTimelines(){return this.timelines}initHandler(){if(this._mode)return null;let t=[{mode:"raf",cons:tl},{mode:"timeout",cons:th}];for(let e=0;e<t.length;e++)if(t[e].cons.Avaliable()){this.mode=t[e].mode;break}return null}setupTickHandler(){let t;switch(this._mode){case"raf":t=new tl;break;case"timeout":t=new th;break;default:p.Y.getInstance().warn("非法的计时器模式"),t=new tl}return!!t.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=t,!0)}setInterval(t){this.interval=t}getInterval(){return this.interval}setFPS(t){this.setInterval(1e3/t)}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,t=>{this.handleTick(t,{once:!0})})}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,t=>{this.handleTick(t,{once:!0})})}pause(){return this.status!==s.INITIAL&&(this.status=s.PAUSE,!0)}resume(){return this.status!==s.INITIAL&&(this.status=s.RUNNING,!0)}ifCanStop(){return!!this.autoStop&&(!this.timelines.length||0===this.timelines.reduce((t,e)=>t+e.animateCount,0))}start(t=!1){return this.status!==s.RUNNING&&!!this.tickerHandler&&(!!t||this.status!==s.PAUSE&&!!this.timelines.length&&0!==this.timelines.reduce((t,e)=>t+e.animateCount,0))&&(this.status=s.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=s.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}release(){this.stop(),this.timelines=[],this.tickerHandler.release(),this.emit("afterTick")}trySyncTickStatus(){this.status===s.RUNNING&&this._handlerTick()}}var td=i(3419);let tc=new tu;tc.addTimeline(td.P),tc.setFPS(60);var tp=i(1822),tg=i(6106),tm=i(7211),tf=i(6420);let tv={BACKGROUND:"white"};class ty extends q.ZA{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){let e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){let e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return null!==(t=this._background)&&void 0!==t?t:tv.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}constructor(t={}){var e;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=t=>{if(!(this._skipRender<0)){if(t){if(this.dirtyBounds){let t=this.window.getViewBox();this.dirtyBounds.setValue(t.x1,t.y1,t.width(),t.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1}},this.beforeRender=t=>{this._beforeRender&&this._beforeRender(t)},this.afterRender=t=>{this.renderCount++,this._afterRender&&this._afterRender(t),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(e=>e(t)),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{var t;this.tickedBeforeRender=!0,"performance"===(null===(t=this.params.optimize)||void 0===t?void 0:t.tickRenderMode)||"rendering"!==this.state&&this.render()},this.params=t,this.theme=new J.Q2,this.hooks={beforeRender:new tp.n(["stage"]),afterRender:new tp.n(["stage"])},this.global=ti.w.global,!this.global.env&&(0,tm.kP)()&&this.global.setEnv("browser"),this.window=Y.n.get(L.Oo),this.renderService=Y.n.get(K.pi),this.pluginService=Y.n.get(tt.H),this.layerService=Y.n.get(tg.IT),this.pluginService.active(this,t),this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:!1!==t.canvasControled,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=null!==(e=t.background)&&void 0!==e?e:tv.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.autoRefresh&&this.enableAutoRefresh(),!1===t.disableDirtyBounds&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),this._beforeRender=t.beforeRender,this._afterRender=t.afterRender,this.ticker=t.ticker||tc,this.supportInteractiveLayer=!1!==t.interactiveLayer,this.timeline=new td.L,this.ticker.addTimeline(this.timeline),this.timeline.pause(),t.optimize||(t.optimize={}),this.optmize(t.optimize),t.background&&(0,h.Z)(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.ticker.on("afterTick",this.afterTickCb)}pauseRender(t=-1){this._skipRender=t}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new X(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){let{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:r=0,beta:s=0,camera:n,fieldRatio:a=1,fieldDepth:o}=t;return Object.assign(Object.assign({},t),{center:e,light:i,alpha:r,beta:s,camera:n,fieldRatio:a,fieldDepth:o})}set3dOptions(t){var e,i,r,s,n,a;this.option3d=t;let{light:o,center:l,camera:h,alpha:u,beta:d,fieldRatio:c,fieldDepth:p}=this.get3dOptions(t),{dir:g=[1,1,-1],color:m="white",ambient:f}=o,v=(null!==(e=l.x)&&void 0!==e?e:this.width/2)+(null!==(i=l.dx)&&void 0!==i?i:0),y=(null!==(r=l.y)&&void 0!==r?r:this.height/2)+(null!==(s=l.dy)&&void 0!==s?s:0),_=[v,y,(null!==(n=l.z)&&void 0!==n?n:0)+(null!==(a=l.dz)&&void 0!==a?a:0)],b=0,x=0,S=0;h||(b=Math.sin(u)+v,x=Math.sin(d)+y,S=Math.cos(u)*Math.cos(d)*1);let A=tf.F.getPlugin("DirectionalLight");A&&(this.light=new A(g,m,f));let k={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:c,fieldDepth:p,viewParams:{pos:[b,x,S],center:_,up:[0,1,0]}};if(this.camera)this.camera.params=k;else{let t=tf.F.getPlugin("OrthoCamera");t&&(this.camera=new t(k))}t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRender=t}setAfterRender(t){this._afterRender=t}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;let t=tf.F.getPlugin("ViewTransform3dPlugin");t&&this.pluginService.register(new t)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new tr))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRefresh(){this.autoRefresh||(this.autoRefresh=!0,this.pluginService.register(new ts))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new tn))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new I.YZ;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new to,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;let t=tf.F.getPlugin("FlexLayoutPlugin");t&&this.pluginService.register(new t)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableHtmlAttribute(t){if(this.htmlAttribute)return;let e=tf.F.getPlugin("HtmlAttributePlugin");e&&(this.htmlAttribute=t,this.pluginService.register(new e))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableReactAttribute(t){if(this.reactAttribute)return;let e=tf.F.getPlugin("ReactAttributePlugin");e&&(this.reactAttribute=t,this.pluginService.register(new e))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){let t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw Error("暂不支持")}createLayer(t,e){if("released"===this.releaseStatus)return;let i=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(i),i}sortLayer(t){let e=this.children;e.sort(t),this.removeAllChild(),e.forEach(t=>{this.appendChild(t)})}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){"released"!==this.releaseStatus&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if("released"===this.releaseStatus)return;this.ticker.start(),this.timeline.resume();let i=this.state;this.state="rendering",this.tickedBeforeRender||this.ticker.trySyncTickStatus(),this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if("harmony"===this.global.env){let t=this.window.getContext().nativeContext;this.forEachChildren((e,i)=>{if(i>0){let i=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(i)}})}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach(t=>{this.nextFrameRenderLayerSet.add(t)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if("released"===this.releaseStatus)return;this.timeline.resume(),this.ticker.start();let t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){let i=[];for(let e=0;e<t.length;e++){let r=t[e];"virtual"===r.layerMode&&(r=r.getNativeHandler().mainHandler.layer),i.includes(r)||i.push(r)}i.forEach(t=>{t.renderCount>this.renderCount||(t.renderCount=this.renderCount+1,t===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),t.render({renderService:this.renderService,background:t===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}resizeWindow(t,e,i=!0){this.window.resize(t,e),i&&this.render()}resize(t,e,i=!0){"released"!==this.releaseStatus&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren(i=>{i.resize(t,e)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(t,e,i=!0){"released"!==this.releaseStatus&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren(i=>{i.resizeView(t,e)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(t,e,i,r,s){let n=!0;"object"==typeof t?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),!1===e&&(n=!1)):(this.viewBox.setValue(t,e,t+i,e+r),!1===s&&(n=!1)),this.forEachChildren(t=>{t.resizeView(this.viewBox.width(),this.viewBox.height())}),n&&this.render()}setDpr(t,e=!0){this.forEachChildren(e=>{e.setDpr(t)}),e&&this.render()}setOrigin(t,e){throw Error("暂不支持")}export(t){throw Error("暂不支持")}pick(t,e){if("released"===this.releaseStatus)return;let i=this.getPickerService().pick(this.children,new R.E9(t,e),{bounds:this.AABBBounds});return!(!(null==i?void 0:i.graphic)&&!(null==i?void 0:i.group))&&i}startAnimate(t){throw Error("暂不支持")}setToFrame(t){throw Error("暂不支持")}release(){super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(t=>{t.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(t=>{t.setStage&&t.setStage(null,null),this.interactiveLayer.removeChild(t)}),this.interactiveLayer.release()),this.window.release(),this.ticker.remTimeline(this.timeline),this.ticker.removeListener("afterTick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){"released"!==this.releaseStatus&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(t){"released"!==this.releaseStatus&&this.forEachChildren((e,i)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:0===i,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(t=!0,e){if("released"===this.releaseStatus)return;let i=Y.n.get(L.Oo),r=e?-e.x1:0,s=e?-e.y1:0,n=e?e.x2:this.viewWidth,a=e?e.y2:this.viewHeight,o=e?e.width():this.viewWidth,l=e?e.height():this.viewHeight;return i.create({viewBox:{x1:r,y1:s,x2:n,y2:a},width:o,height:l,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(t=!0,e){if("released"===this.releaseStatus)return;let i=this.renderToNewWindow(t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){let e=this.global.mapToCanvasPoint(t,this.window.getContext().canvas.nativeCanvas);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=Y.n.get(Q.hH)),this.pickerService}}var t_=i(4761);class tb{constructor(t){this.handleAfterNextRender=()=>{this._stage&&!this._viewOptions.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._view.emit(y.ZK.AFTER_VRENDER_DRAW),this._view.emit(y.ZK.AFTER_VRENDER_NEXT_RENDER)},this._view=t}initialize(t,e,i,r){return this._width=t,this._height=e,this._viewOptions=i,this._eventConfig=r,this.initStage(),this}stage(){var t;return null!==(t=this._stage)&&void 0!==t?t:null}gestureController(){var t;return null!==(t=this._gestureController)&&void 0!==t?t:null}canvas(){return this._stage?this._stage.window.getNativeHandler().nativeCanvas:null}context(){return this._stage?this._stage.window.getContext().nativeContext:null}combineIncrementalLayers(){return this._stage&&(0,P.b4)(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()}),this}background(t){if(this._stage)return this._stage.background=t,this}setDpr(t,e){var i,r;return null===(r=null===(i=this._stage)||void 0===i?void 0:i.setDpr)||void 0===r||r.call(i,t),e&&this.renderNextFrame(),this}shouldResize(t,e){return t!==this._width||e!==this._height}resize(t,e){return this._view.emit(y.ZK.BEFORE_STAGE_RESIZE),this.shouldResize(t,e)&&(this._width=t,this._height=e,this._stage&&this._stage.resize(t,e)),this._view.emit(y.ZK.AFTER_STAGE_RESIZE),this}setViewBox(t,e=!0){return this._stage&&(!t||this._viewBox&&t.x1===this._viewBox.x1&&t.x2===this._viewBox.x2&&t.y1===this._viewBox.y1&&t.y2===this._viewBox.y2||(this._viewBox=t,this._stage.setViewBox(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1,e))),this}render(t=!1){return this._view.emit(y.ZK.BEFORE_VRENDER_DRAW),this.initStage(),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this.handleAfterNextRender),t&&(this._stage.render(),this._view.emit(y.ZK.AFTER_VRENDER_DRAW)),this}renderNextFrame(){return this.initStage(),this._stage.renderNextFrame(),this}toCanvas(){return this._stage?this._stage.toCanvas():null}preventRender(t){this._stage&&this._stage.preventRender(t)}release(){var t;this._view.traverseMarkTree(t=>{t.release()}),this._dragController&&this._dragController.release(),this._gestureController&&this._gestureController.release(),this._stage!==(null===(t=this._viewOptions)||void 0===t?void 0:t.stage)&&this._stage.release(),this._stage=null,this._layer=null,this._dragController=null,this._gestureController=null}createStage(){var t,e,i,r,s;this._view.emit(y.ZK.BEFORE_CREATE_VRENDER_STAGE);let n=this._viewOptions,a=null!==(t=n.stage)&&void 0!==t?t:new ty({width:this._width,height:this._height,renderStyle:n.renderStyle,viewBox:n.viewBox,dpr:n.dpr,canvas:n.renderCanvas,canvasControled:n.canvasControled,container:n.container,title:n.rendererTitle,beforeRender:n.beforeRender,afterRender:n.afterRender,disableDirtyBounds:!0,autoRender:!0,pluginList:n.pluginList,enableHtmlAttribute:n.enableHtmlAttribute,optimize:n.optimize,ticker:n.ticker,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,event:{clickInterval:this._eventConfig.clickInterval,autoPreventDefault:!!this._eventConfig.autoPreventDefault},ReactDOM:n.ReactDOM,autoRefresh:n.autoRefresh});(null===(e=n.options3d)||void 0===e?void 0:e.enable)&&a.set3dOptions(n.options3d),a.enableIncrementalAutoRender(),this._viewBox=n.viewBox,this._view.emit(y.ZK.AFTER_CREATE_VRENDER_STAGE),this._view.emit(y.ZK.BEFORE_CREATE_VRENDER_LAYER);let o=null!==(i=n.layer)&&void 0!==i?i:a.defaultLayer;if(this._view.emit(y.ZK.AFTER_CREATE_VRENDER_LAYER),(null===(r=this._eventConfig)||void 0===r?void 0:r.drag)&&t_.F.getStageEventPlugin("drag")&&(this._dragController=new(t_.F.getStageEventPlugin("drag"))(a)),(null===(s=this._eventConfig)||void 0===s?void 0:s.gesture)&&t_.F.getStageEventPlugin("gesture")){let t=(0,O.Z)(this._eventConfig.gesture)?this._eventConfig.gesture:{};this._gestureController=new(t_.F.getStageEventPlugin("gesture"))(a,t)}return{stage:a,layer:o}}initStage(){if(!this._stage){let{stage:t,layer:e}=this.createStage();this._stage=t,this._layer=e;let i=this._view.background();this.background(i)}}}var tx=i(2200),tS=i(9524);class tA extends m.S{constructor(){super(...arguments),this.grammarType="signal",this.spec={value:null,update:null}}parse(t){return super.parse(t),this.value(t.value),this.update(t.update),this.commit(),this}evaluate(t,e){return this._signal=this.spec.update?(0,f.ZO)(this.spec.update,e,this._signal):this.spec.value,this.spec.value=this._signal,this}output(){return this._signal}getValue(){return this.output()}set(t){if((0,c.Z)(t)&&(0,c.Z)(this.value)&&t.length===this.value.length){for(let e=0;e<t.length;e++)if(this.value[e]!==t[e])return this._signal=t,this.spec.value=t,!0;return!1}return this._signal!==t&&(this._signal=t,this.spec.value=t,!0)}update(t){return(0,d.Z)(t)||this.value(void 0),this.setFunctionSpec(t,"update")}value(t){return(0,d.Z)(t)||this.update(void 0),this.spec.value=t,this.commit(),this}reuse(t){return t.grammarType!==this.grammarType||(this._signal=t.output()),this}clear(){super.clear(),this._signal=null}}var tk=i(1601),tw=i(6602);let tC=-1,tT=[tS.RD,tS.kw,tS.xA,tS.As,tS.uP,tS.J0,tS.t3],tE=(t,e,i)=>{var r,s,n,a,o;return[{id:tS.RD,value:null!==(r=t[tS.RD])&&void 0!==r?r:0},{id:tS.kw,value:null!==(s=t[tS.kw])&&void 0!==s?s:0},{id:tS.xA,value:tM(null!==(a=null!==(n=t[tS.xA])&&void 0!==n?n:e[tS.xA])&&void 0!==a?a:null==i?void 0:i.padding)},{id:tS.As,update:{callback:(t,e)=>{let i=tM(e[tS.xA]);return e[tS.RD]-i.left-i.right},dependency:[tS.RD,tS.xA]}},{id:tS.uP,update:{callback:(t,e)=>{let i=tM(e[tS.xA]);return e[tS.kw]-i.top-i.bottom},dependency:[tS.kw,tS.xA]}},{id:tS.J0,update:{callback:(t,e)=>{let i=tM(e[tS.xA]);return(t||new I.YZ).setValue(i.left,i.top,i.left+e[tS.As],i.top+e[tS.uP])},dependency:[tS.As,tS.uP,tS.xA]}},{id:tS.t3,value:null!==(o=t[tS.t3])&&void 0!==o?o:e[tS.t3]}]},tM=t=>{var e,i,r,s;return(0,tk.Z)(t)?{top:t,bottom:t,left:t,right:t}:{top:null!==(e=null==t?void 0:t.top)&&void 0!==e?e:0,bottom:null!==(i=null==t?void 0:t.bottom)&&void 0!==i?i:0,left:null!==(r=null==t?void 0:t.left)&&void 0!==r?r:0,right:null!==(s=null==t?void 0:t.right)&&void 0!==s?s:0}},tB=t=>{var e;let i=(t,e)=>{var r,s;t.group=e;let n=null!==(r=t.id)&&void 0!==r?r:"VGRAMMAR_MARK_"+ ++tC;t.id=n,(null!==(s=t.marks)&&void 0!==s?s:[]).forEach(t=>i(t,n))};return(null!==(e=t.marks)&&void 0!==e?e:[]).forEach(t=>i(t,"root")),t},tD=t=>{var e,i,r,s,n;let{reuse:a=tw.IB,morph:o=tw.p6,morphAll:l=tw.cK,animation:h={},enableExitAnimation:u=tw.bt}=null!=t?t:{};return{reuse:a,morph:o,morphAll:l,animation:{easing:null!==(e=h.easing)&&void 0!==e?e:tw.fx,delay:null!==(i=h.delay)&&void 0!==i?i:tw.v0,duration:null!==(r=h.duration)&&void 0!==r?r:tw.tR,oneByOne:null!==(s=h.oneByOne)&&void 0!==s?s:tw.I8,splitPath:null!==(n=h.splitPath)&&void 0!==n?n:tw.ov},enableExitAnimation:u}};var tO=i(8656),tP=i(4643),tI=i(1035),tR=i(9038),tL=i(5395);class tF extends tI.v{constructor(t,e){super(t,y.Cm.group,e),this.children=[]}parseRenderContext(){return{large:!1}}appendChild(t){return this.children.push(t),this}removeChild(t){return this.children=this.children.filter(e=>e!==t),this}includesChild(t,e=!0){return!!this.children.includes(t)||!!e&&this.children.some(e=>e.markType===y.Cm.group&&e.includesChild(t,!0))}updateLayoutChildren(){return this.children.length&&(this.layoutChildren||(this.layoutChildren=[]),this.layoutChildren=this.children.filter(t=>t.needLayout())),this}getAttributeTransforms(){return tO.N7.rect}evaluateJoin(t){if(!this.elements.length){let t=this.createElement();t.updateData(tw.jC,tw.NM,()=>""),this.elements=[t],this.elementMap.set(tw.jC,t)}}getChannelsFromConfig(t){let e=this.spec,i={};if((0,d.Z)(e.clip)||(i.clip=e.clip),(0,d.Z)(e.zIndex)||(i.zIndex=e.zIndex),!(0,d.Z)(e.clipPath)){let r=(0,tR.Z)(e.clipPath)?e.clipPath([t]):e.clipPath;r&&r.length?i.path=r:(i.path=null,i.clip=!1)}return(0,d.Z)(e.interactive)||(i.pickable=e.interactive),i}evaluateGroupEncode(t,e,i){var r;let s=this.elements[0],n={},a=[Object.assign({},null===(r=s.items)||void 0===r?void 0:r[0],{nextAttrs:n})];return(0,tL.h)(s,a,e,i),this._groupEncodeResult=n,n}evaluateEncode(t,e,i,r){let s=this.getChannelsFromConfig();if(e){this.emit(y.ZK.BEFORE_ELEMENT_ENCODE,{encoders:e,parameters:i},this);let n=r?null:this.evaluateGroupEncode(t,e[y.Nw.group],i);t.forEach(t=>{t.items.forEach(t=>{t.nextAttrs=Object.assign(t.nextAttrs,s,n)}),t.encodeItems(t.items,e,this._isReentered,i)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),t,i),t.forEach(t=>{t.encodeGraphic()}),this.emit(y.ZK.AFTER_ELEMENT_ENCODE,{encoders:e,parameters:i},this)}else t.forEach(t=>{t.initGraphicItem(s)})}addGraphicItem(t,e,i){let r=null!=i?i:(0,tP.CJ)(this,this.markType,t);if(r)return this.emit(y.ZK.BEFORE_ADD_VRENDER_MARK,{graphicItem:r}),r.name=`${this.id()||this.markType}`,this.graphicParent.insertIntoKeepIdx(r,this.graphicIndex),this.emit(y.ZK.AFTER_ADD_VRENDER_MARK,{graphicItem:r}),r}}class tj{constructor(t,e){this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}},this._size=0,this._mapKey=(0,h.Z)(t)?e=>e[t]:t,this._warning=e}record(t){var e,i;let r=t.grammarType,s=this._mapKey(t);return this._grammarMap[r]?(this._grammars[r].push(t),(0,d.Z)(s)||(this._grammarMap[r][s]?null===(e=this._warning)||void 0===e||e.call(this,s,t):this._grammarMap[r][s]=t)):(this._grammars.customized.push(t),(0,d.Z)(s)||(this._grammarMap.customized[s]?null===(i=this._warning)||void 0===i||i.call(this,s,t):this._grammarMap.customized[s]=t)),this._size+=1,this}unrecord(t){let e=t.grammarType,i=this._mapKey(t);return this._grammarMap[e]?(this._grammars[e]=this._grammars[e].filter(e=>e!==t),(0,d.Z)(i)||this._grammarMap[e][i]!==t||delete this._grammarMap[e][i]):(this._grammars.customized=this._grammars.customized.filter(e=>e!==t),(0,d.Z)(i)||this._grammarMap.customized[i]!==t||delete this._grammarMap.customized[i]),this._size-=1,this}size(){return this._size}getSignal(t){var e;return null!==(e=this._grammarMap.signal[t])&&void 0!==e?e:null}getData(t){var e;return null!==(e=this._grammarMap.data[t])&&void 0!==e?e:null}getScale(t){var e;return null!==(e=this._grammarMap.scale[t])&&void 0!==e?e:null}getCoordinate(t){var e;return null!==(e=this._grammarMap.coordinate[t])&&void 0!==e?e:null}getMark(t){var e;return null!==(e=this._grammarMap.mark[t])&&void 0!==e?e:null}getCustomized(t){var e;return null!==(e=this._grammarMap.customized[t])&&void 0!==e?e:null}getGrammar(t){return this._grammarMap.data[t]?this._grammarMap.data[t]:this._grammarMap.signal[t]?this._grammarMap.signal[t]:this._grammarMap.scale[t]?this._grammarMap.scale[t]:this._grammarMap.coordinate[t]?this._grammarMap.coordinate[t]:this._grammarMap.mark[t]?this._grammarMap.mark[t]:this._grammarMap.customized[t]?this._grammarMap.customized[t]:null}getAllSignals(){return this._grammars.signal}getAllData(){return this._grammars.data}getAllScales(){return this._grammars.scale}getAllCoordinates(){return this._grammars.coordinate}getAllMarks(){return this._grammars.mark}getAllCustomized(){return this._grammars.customized}traverse(t){var e;Object.values(null!==(e=this._grammars)&&void 0!==e?e:{}).forEach(e=>(null!=e?e:[]).forEach(e=>{t.call(null,e)}))}find(t){let e=null;return this.traverse(i=>!0===t.call(null,i)&&(e=i,!0)),e}filter(t){let e=[];return this.traverse(i=>{!0===t.call(null,i)&&e.push(i)}),e}clear(){this._size=0,this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}}}release(){this._size=0,this._grammars=null,this._grammarMap=null}}class tZ extends tj{constructor(){super(...arguments),this._markNodes=[]}record(t){if(super.record(t),"mark"===t.grammarType){let e={mark:t,parent:null,children:[]};this._markNodes.forEach(i=>{let r=i.mark;r.markType===y.Cm.group&&r.includesChild(t,!1)?(i.children.push(e),e.parent=i):t.markType===y.Cm.group&&t.includesChild(r,!1)&&(e.children.push(i),i.parent=e)}),this._markNodes.push(e)}return this}unrecord(t){if(super.unrecord(t),"mark"===t.grammarType){let e=this._markNodes.find(e=>e.mark===t);this._markNodes.forEach(i=>{i.mark.markType===y.Cm.group&&i.children.includes(e)?(i.children=i.children.filter(t=>t!==e),e.parent=null):t.markType===y.Cm.group&&e.children.includes(i)&&(e.children=e.children.filter(t=>t!==i),i.parent=null)}),this._markNodes=this._markNodes.filter(t=>t!==e)}return this}getAllMarkNodes(){return this._markNodes}clear(){super.clear(),this._markNodes=[]}release(){super.release(),this._markNodes=null}}class tH extends tI.v{addGraphicItem(t,e){let i=t&&t.limitAttrs,r=i&&("rich"===i.textType||i.text&&"rich"===i.text.type),s=(0,tP.CJ)(this,r?y.Cm.richtext:y.Cm.text,t);return super.addGraphicItem(t,e,s)}release(){super.release()}}tH.markType=y.Cm.text;let tN={axis:{label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#89909d",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],start:{x:0,y:0},end:{x:100,y:0},x:0,y:0},circleAxis:{title:{space:4,padding:[0,0,0,0],textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1},text:"theta"},label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#6F6F6F",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],startAngle:0,endAngle:2*Math.PI,radius:100,innerRadius:0,center:{x:0,y:0},x:0,y:0},grid:{style:{stroke:"#f1f2f5"}},circleGrid:{style:{stroke:"#f1f2f5"}},discreteLegend:{layout:"vertical",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:10,spaceRow:10,shape:{space:4,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",stroke:"#D8D8D8",fillOpacity:.5}}},label:{space:4,style:{fontSize:12,fill:"black",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",fillOpacity:.5}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"},state:{selectedHover:{fillOpacity:.7,fill:"gray"},unSelectedHover:{fillOpacity:.2,fill:"gray"}}},focus:!1,focusIconStyle:{size:10,fill:"#333",cursor:"pointer"},visible:!0,padding:{top:2,bottom:2,left:2,right:2}},autoPage:!0,pager:{space:12,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!1,items:[{index:0,id:"",label:"",shape:{fill:"#6690F2",stroke:"#6690F2",symbolType:"circle"}}]},colorLegend:{title:{visible:!1,text:""},colors:[],layout:"horizontal",railWidth:200,railHeight:8,railStyle:{cornerRadius:5}},sizeLegend:{title:{visible:!1,text:""},trackStyle:{fill:"#ccc"},layout:"horizontal",align:"bottom",railWidth:200,railHeight:6,min:0,max:1,value:[0,1]},lineCrosshair:{start:{x:0,y:0},end:{x:0,y:0}},rectCrosshair:{start:{x:0,y:0},end:{x:0,y:0},rectStyle:{width:10,height:10}},sectorCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:Math.PI/6},circleCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI},polygonCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI,sides:6},slider:{layout:"horizontal",railWidth:200,railHeight:10,railStyle:{cornerRadius:5},range:{draggableTrack:!0},startText:{visible:!0,text:"",space:8},endText:{visible:!0,text:"",space:8},min:0,max:1,value:[0,1]},dataLabel:{size:{width:400,height:400},dataLabels:[]},pointLabel:{data:[{text:"",fill:"#606773",data:{}}],overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},lineLabel:{type:"line",data:[{text:"",data:{}}],position:"start",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},areaLabel:{type:"area",data:[{text:"",data:{}}],position:"end",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},rectLabel:{type:"rect",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},symbolLabel:{type:"symbol",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{avoidBaseMark:!0,size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},arcLabel:{type:"arc",data:[{text:"",fill:"#606773",data:{}}],width:800,height:600,position:"outside",zIndex:302},lineDataLabel:{type:"line-data",data:[{text:""}],position:"top",overlap:{avoidBaseMark:!1,clampForce:!1},smartInvert:!1},datazoom:{orient:"bottom",showDetail:"auto",brushSelect:!0,start:0,end:1,position:{x:0,y:0},size:{width:500,height:40},previewData:[]},continuousPlayer:{},discretePlayer:{},tooltip:{},title:{textStyle:{fill:"#21252c"},subtextStyle:{fill:"#606773"}},scrollbar:{width:12,height:12,padding:[2,2],railStyle:{fill:"rgba(0, 0, 0, .1)"}}},tz={symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}},tV=Object.assign({},tN);tV.axis=Object.assign({},tV.axis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),tV.circleAxis=Object.assign({},tV.circleAxis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),tV.grid=Object.assign({},tV.grid,{style:{stroke:"#404349"}}),tV.circleGrid=Object.assign({},tV.circleGrid,{style:{stroke:"#404349"}}),tV.rectLabel=Object.assign({},tV.rectLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),tV.lineLabel=Object.assign({},tV.lineLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),tV.symbolLabel=Object.assign({},tV.symbolLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),tV.title=Object.assign({},tV.title,{textStyle:{fill:"#fdfdfd"},subtextStyle:{fill:"#888c93"}});class tU{static registerTheme(t,e){t&&tU._themes.set(t,e)}static unregisterTheme(t){tU._themes.delete(t)}static getTheme(t){return tU._themes.get(t)}static getDefaultTheme(){return tU.getTheme("default")}}tU._themes=new Map,tU.registerTheme("default",{name:"default",padding:5,palette:{default:["#6690F2","#70D6A3","#B4E6E2","#63B5FC","#FF8F62","#FFDC83","#BCC5FD","#A29BFE","#63C4C7","#F68484"]},marks:tz,components:tN}),tU.registerTheme("dark",{name:"dark",padding:5,background:"#202226",palette:{default:["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},marks:tz,components:tV});var tW=i(7366),tG=i(4198);let t$=Symbol.for("key");class tX{diffGrammar(t,e){return(0,tG.UJ)(t,e,t=>{var e;return null!==(e=t.id())&&void 0!==e?e:Symbol()})}diffMark(t,e,i){let r={enter:[],exit:[],update:[]},s=[],n=[];t.forEach(t=>{t.markType!==y.Cm.group&&(i.morph&&t.getMorphConfig().morph||i.morphAll||i.reuse)?s.push(t):r.exit.push({prev:[t]})}),e.forEach(t=>{t.markType!==y.Cm.group&&(i.morph&&t.getMorphConfig().morph||i.morphAll||i.reuse)?n.push(t):r.enter.push({next:[t]})});let a=this.diffUpdateByGroup(s,n,t=>t.getMorphConfig().morphKey,t=>t.getMorphConfig().morphKey);s=a.prev,n=a.next,r.update=r.update.concat(a.update);let o=this.diffUpdateByGroup(s,n,t=>t.id(),t=>t.id());s=o.prev,n=o.next,r.update=r.update.concat(o.update);let l=(0,tG.pv)(s,t=>{var e,i;return null===(i=null===(e=t.group)||void 0===e?void 0:e.id)||void 0===i?void 0:i.call(e)}),h=(0,tG.pv)(n,t=>{var e,i;return null===(i=null===(e=t.group)||void 0===e?void 0:e.id)||void 0===i?void 0:i.call(e)});return Object.keys(h).forEach(t=>{let e=l.data.get(t),i=h.data.get(t);if(e&&i){for(let t=0;t<Math.max(e.length,i.length);t+=1){let s=e[t],n=i[t];s&&n?r.update.push({prev:[s],next:[n]}):s?r.exit.push({prev:[s]}):n&&r.enter.push({next:[n]})}s=s.filter(t=>!e.includes(t)),n=n.filter(t=>!i.includes(t))}}),s.forEach(t=>r.exit.push({prev:[t]})),n.forEach(t=>r.enter.push({next:[t]})),r}diffUpdateByGroup(t,e,i,r){let s=(0,tG.pv)(t,t=>{var e;return null!==(e=i(t))&&void 0!==e?e:t$}),n=(0,tG.pv)(e,t=>{var e;return null!==(e=r(t))&&void 0!==e?e:t$}),a=t,o=e,l=[];return n.keys.forEach(t=>{if(t!==t$){let e=s.data.get(t),i=n.data.get(t);e&&i&&(l.push({prev:e,next:i}),a=a.filter(t=>!e.includes(t)),o=o.filter(t=>!i.includes(t)))}}),{prev:a,next:o,update:l}}}class tY extends a(){static useRegisters(t){t.forEach(t=>{t()})}constructor(t={},e={}){super(),this._observer=null,this._onResize=(0,o.Z)((...t)=>{let e=this._getContainerSize();e&&this.resize(e.width,e.height)},100),this.delegateEvent=(t,e)=>{let i=(0,tx.Z)(this,t,e,tS.Ng);this.emit(e,i,t.element)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(t=>{t.isDoingProgressive()&&t.evaluateProgressive()}),this.doPreProgressive()},this._config=e,this._options=Object.assign({mode:tS.Uv},t),this.initialize()}getGrammarById(t){return this.grammars.getGrammar(t)}getSignalById(t){return this.grammars.getSignal(t)}getDataById(t){return this.grammars.getData(t)}getScaleById(t){return this.grammars.getScale(t)}getCoordinateById(t){return this.grammars.getCoordinate(t)}getMarkById(t){return this.grammars.getMark(t)}getCustomizedById(t){return this.grammars.getCustomized(t)}getGrammarsByName(t){return this.grammars.filter(e=>e.name()===t)}getGrammarsByType(t){return this.grammars.filter(e=>e.grammarType===t)}getMarksByType(t){return this.grammars.getAllMarks().filter(e=>e.markType===t)}getMarksByName(t){return this.grammars.getAllMarks().filter(e=>e.name()===t)}getMarksBySelector(t){if(!t)return null;let e=(0,l.IX)(t),i=[];return e.forEach(t=>{if((0,f.ch)(t))return void i.push(t);if(t[0]===tS.VK){let e=this.getMarkById(t.slice(1));return void(e&&i.push(e))}let e=t[0]===tS.IL?this.getMarksByName(t.slice(1)):(0,tP.ir)(t)?this.getMarksByType(t):null;e&&e.length&&e.forEach(t=>{i.push(t)})}),i}updateSignal(t,e){(0,h.Z)(t)&&(t=this.getSignalById(t)),t.set(e),this.commit(t)}signal(t,e){let i=new tA(this);return arguments.length>=1&&i.value(t),arguments.length>=2&&i.update(e),this.grammars.record(i),this._dataflow.add(i),i}data(t){let e=new k(this,t);return this.grammars.record(e),this._dataflow.add(e),e}scale(t){let e=t_.F.createGrammar("scale",this,t);return e&&(this.grammars.record(e),this._dataflow.add(e)),e}coordinate(t){let e=t_.F.createGrammar("coordinate",this,t);return e&&(this.grammars.record(e),this._dataflow.add(e)),e}mark(t,e,i){let r;let s=(0,h.Z)(e)?this.getMarkById(e):e;switch(t){case y.Cm.group:r=new tF(this,s);break;case y.Cm.glyph:let n=t_.F.getMark(y.Cm.glyph);n&&(r=new n(this,null==i?void 0:i.glyphType,s));break;case y.Cm.component:r=t_.F.hasComponent(null==i?void 0:i.componentType)?t_.F.createComponent(null==i?void 0:i.componentType,this,s,null==i?void 0:i.mode):new tW.w(this,null==i?void 0:i.componentType,s,null==i?void 0:i.mode);break;case y.Cm.text:r=new tH(this,t,s);break;default:r=t_.F.hasMark(t)?t_.F.createMark(t,this,s):new tI.v(this,t,s)}return this.grammars.record(r),this._dataflow.add(r),r}group(t){return this.mark(y.Cm.group,t)}glyph(t,e){return this.mark(y.Cm.glyph,e,{glyphType:t})}component(t,e,i="2d"){return this.mark(y.Cm.component,e,{componentType:t,mode:i})}axis(t,e="2d"){return this.mark(y.Cm.component,t,{componentType:y.zH.axis,mode:e})}grid(t,e="2d"){return this.mark(y.Cm.component,t,{componentType:y.zH.grid,mode:e})}legend(t){return this.mark(y.Cm.component,t,{componentType:y.zH.legend})}slider(t){return this.mark(y.Cm.component,t,{componentType:y.zH.slider})}label(t){return this.mark(y.Cm.component,t,{componentType:y.zH.label})}datazoom(t){return this.mark(y.Cm.component,t,{componentType:y.zH.datazoom})}player(t){return this.mark(y.Cm.component,t,{componentType:y.zH.player})}title(t){return this.mark(y.Cm.component,t,{componentType:y.zH.title})}scrollbar(t){return this.mark(y.Cm.component,t,{componentType:y.zH.scrollbar})}customized(t,e){let i=t_.F.createGrammar(t,this,null==e?void 0:e.type);if(i)return i.parse(e),this.grammars.record(i),this._dataflow.add(i),i}addGrammar(t){return this.grammars.find(e=>e.uid===t.uid)||(this.grammars.record(t),this._dataflow.add(t),t.parse(t.getSpec()),this._needBuildLayoutTree=!0),this}removeGrammar(t){let e=(0,h.Z)(t)?this.getGrammarById(t):t;return e&&this.grammars.find(t=>t.uid===e.uid)&&("mark"===e.grammarType&&e.prepareRelease(),this._cachedGrammars.record(e),this._dataflow.remove(e),this.grammars.unrecord(e),this._needBuildLayoutTree=!0),this}removeAllGrammars(){return this.grammars.traverse(t=>{"signal"===t.grammarType&&tT.includes(t.id())||"mark"===t.grammarType&&"root"===t.id()||this.removeGrammar(t)}),this}removeAllGraphicItems(){return this.traverseMarkTree(t=>{t.graphicItem&&((0,tP.HX)(t.graphicItem),t.elementMap.forEach(t=>{t.resetGraphicItem()}),t.graphicItem=null)}),this}parseSpec(t){var e,i,r,s,n,a,o,l;if(this.emit(y.ZK.BEFORE_PARSE_VIEW),this._spec=t,tB(t),t.theme?this.theme(t.theme):this.theme(tU.getDefaultTheme()),t.width&&this.width(t.width),t.height&&this.height(t.height),this.padding(null!==(i=null!==(e=t.padding)&&void 0!==e?e:this._options.padding)&&void 0!==i?i:this._theme.padding),!this.width()||!this.height()){let t=this._getContainerSize();t&&(this.updateSignal(tS.RD,t.width),this.updateSignal(tS.kw,t.height))}(null===(r=t.signals)||void 0===r?void 0:r.length)&&t.signals.forEach(t=>{this.signal().parse(t)}),(null===(s=t.data)||void 0===s?void 0:s.length)&&t.data.forEach(t=>{this.data(null).parse(t)}),(null===(n=t.coordinates)||void 0===n?void 0:n.length)&&t.coordinates.forEach(t=>{var e;null===(e=this.coordinate(t.type))||void 0===e||e.parse(t)}),(null===(a=t.scales)||void 0===a?void 0:a.length)&&t.scales.forEach(t=>{var e;null===(e=this.scale(t.type))||void 0===e||e.parse(t)});let h=t_.F.getGrammars();return Object.keys(h).forEach(e=>{let{specKey:i}=h[e];t[i]&&t[i].length&&t[i].forEach(t=>{this.customized(e,t)})}),t.marks&&t.marks.length&&t.marks.forEach(t=>{this.parseMarkSpec(t)}),t.events&&t.events.length&&t.events.forEach(t=>{var e;null===(e=this.event)||void 0===e||e.call(this,t)}),t.interactions&&t.interactions.length&&t.interactions.forEach(t=>{this.interaction(t.type,t)}),!1===t.animation?null===(o=this.animate)||void 0===o||o.disable():null===(l=this.animate)||void 0===l||l.enable(),this.emit(y.ZK.AFTER_PARSE_VIEW),this._needBuildLayoutTree=!0,this._layoutState=y.$s.before,this}updateSpec(t){return this.removeAllInteractions(),this.removeAllGrammars(),this.parseSpec(t)}parseBuiltIn(){tE(this._options,this._config,this.getCurrentTheme()).forEach(t=>{let e=this.signal().parse(t);t.value&&e.set(t.value)}),this.parseMarkSpec({id:"root",type:"group",encode:{enter:{x:0,y:0},update:{width:{signal:"width"},height:{signal:"height"}}}}),this.rootMark=this.getMarkById("root")}parseMarkSpec(t){var e;let i=t.type===y.Cm.glyph?{glyphType:t.glyphType}:t.type===y.Cm.component?{componentType:t.componentType,mode:t.mode}:null;this.mark(t.type,t.group,i).parse(t),null===(e=t.marks)||void 0===e||e.forEach(t=>{this.parseMarkSpec(t)})}theme(t){var e,i,r,s,n,a;(0,h.Z)(t)?this._theme=null!==(e=tU.getTheme(t))&&void 0!==e?e:tU.getDefaultTheme():this._theme=t;let{background:o,padding:l}=null!==(i=this._spec)&&void 0!==i?i:{};return this._theme?(this.background(null!==(r=null!=o?o:this._options.background)&&void 0!==r?r:this._theme.background),this.padding(null!==(s=null!=l?l:this._options.padding)&&void 0!==s?s:this._theme.padding),null===(a=null===(n=this.renderer.stage())||void 0===n?void 0:n.setTheme)||void 0===a||a.call(n,Object.assign({},this._theme.marks))):(this.background(null!=o?o:this._options.background),this.padding(null!=l?l:this._options.padding)),this}getCurrentTheme(){return this._theme}setCurrentTheme(t,e=!0){return this.theme(t),this.grammars.getAllMarks().forEach(t=>{t.commit()}),e?(this.evaluate(),this.renderer.render(!0)):this._dataflow.evaluate(),this}background(t){return arguments.length?(this._background=t,this.renderer.background(t),t):this._background}width(t){let e=this.getSignalById(tS.RD);return arguments.length?(this._options.width=t,this.updateSignal(e,t),t):e.output()}height(t){let e=this.getSignalById(tS.kw);return arguments.length?(this._options.height=t,this.updateSignal(e,t),t):e.output()}viewWidth(t){let e=this.getSignalById(tS.As);if(arguments.length){let e=this.padding();return this.width(t+e.left+e.right),t}return e.output()}viewHeight(t){let e=this.getSignalById(tS.uP);if(arguments.length){let e=this.padding();return this.height(t+e.top+e.bottom),t}return e.output()}padding(t){let e=this.getSignalById(tS.xA);if(arguments.length){let i=tM(t);return this.updateSignal(e,i),i}return tM(e.output())}autoFit(t){let e=this.getSignalById(tS.t3);return arguments.length?(this.updateSignal(e,t),t):e.output()}getViewBox(){let t=this.getSignalById(tS.J0);return null==t?void 0:t.output()}updateLayoutTag(){return this._layoutState=y.$s.before,this}getLayoutState(){return this._layoutState}buildLayoutTree(){let t={},e=[];this.traverseMarkTree(i=>{t[i.id()]=!0,i.group&&t[i.group.id()]||e.push(i),i.markType===y.Cm.group&&i.updateLayoutChildren()},t=>t.needLayout()),this._layoutMarks=e}doLayout(){var t;let e=this._options.doLayout||t_.F.getDefaultLayout();e&&(null===(t=this._layoutMarks)||void 0===t?void 0:t.length)&&(this.emit(y.ZK.BEFORE_DO_LAYOUT),e(this._layoutMarks,this._options,this),this.emit(y.ZK.AFTER_DO_LAYOUT))}handleLayoutEnd(){this.emit(y.ZK.BEFORE_MARK_LAYOUT_END),this._layoutMarks.forEach(t=>{D(t,"layoutChildren",t=>{t.handleLayoutEnd()},e=>e!==t)}),this.emit(y.ZK.AFTER_MARK_LAYOUT_END)}handleRenderEnd(){this.emit(y.ZK.BEFORE_MARK_RENDER_END),D(this.rootMark,"children",t=>{t.handleRenderEnd()}),this.emit(y.ZK.AFTER_MARK_RENDER_END)}commit(t){return this._dataflow.commit(t),this}run(t){return this.evaluate(t),this}doRender(t){this.emit(y.ZK.BEFORE_DO_RENDER),this.renderer&&(!this._progressiveMarks&&this.animate?this.animate.animate():this.traverseMarkTree(t=>{t.cleanExitElements()},null,!0),this.renderer.render(t),this.handleRenderEnd()),this.emit(y.ZK.AFTER_DO_RENDER)}evaluate(t){var e,i;let r=tD(t),s=this._cachedGrammars.size()>0;s&&(this.reuseCachedGrammars(r),this.detachCachedGrammar());let n=this._resizeRenderer(),a=this._dataflow.hasCommitted();return(s||a||this._layoutState||n)&&(this.clearProgressive(),this._dataflow.evaluate(),this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState&&(this._layoutState=y.$s.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=y.$s.reevaluate,this._dataflow.evaluate()),this._layoutState=y.$s.after,(null===(e=this._layoutMarks)||void 0===e?void 0:e.length)&&this.handleLayoutEnd()),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),null===(i=this.morph)||void 0===i||i.call(this,r),this.releaseCachedGrammars(r),this.doRender(!0),this.doPreProgressive()),this}reuseCachedGrammars(t){if(t.reuse){let t=t=>{t.next.reuse(t.prev),t.prev.detachAll(),t.prev.clear(),this._cachedGrammars.unrecord(t.prev)};this._differ.diffGrammar(this._cachedGrammars.getAllSignals(),this.grammars.getAllSignals().filter(t=>!tT.includes(t.id()))).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllData(),this.grammars.getAllData()).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllScales(),this.grammars.getAllScales()).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllCoordinates(),this.grammars.getAllCoordinates()).update.forEach(t)}this._differ.diffMark(this._cachedGrammars.getAllMarks(),this.grammars.getAllMarks().filter(t=>"root"!==t.id()),t).update.forEach(e=>{var i;let r=1===e.prev.length&&1===e.next.length&&e.prev[0].markType===e.next[0].markType,s=e.prev.every(t=>t.getMorphConfig().morph)&&e.next.every(t=>t.getMorphConfig().morph);this.morph&&(t.morph&&s||t.morphAll)?null===(i=this.addMorphMarks)||void 0===i||i.call(this,{prev:e.prev,next:e.next}):r&&t.reuse&&(e.next[0].reuse(e.prev[0]),e.prev[0].detachAll(),e.prev[0].clear(),this._cachedGrammars.unrecord(e.prev[0]))})}detachCachedGrammar(){this._cachedGrammars.traverse(t=>{var e,i;t.detachAll(),"mark"===t.grammarType&&(null===(i=null===(e=t.group)||void 0===e?void 0:e.removeChild)||void 0===i||i.call(e,t))})}releaseCachedGrammars(t){this._cachedGrammars.traverse(t=>{"mark"!==t.grammarType&&t.release()});let e=this._cachedGrammars.getAllMarkNodes();e.forEach(e=>{var i;null===(i=e.mark.animate)||void 0===i||i.stop(),t.enableExitAnimation&&this.animate&&this.animate.animateAddition(e.mark)});let i=t=>{if(t.mark.view&&(!t.mark.animate||0===t.mark.animate.getAnimatorCount())&&(!t.children||0===t.children.length)){t.mark.release();let e=t.parent;e&&(t.parent.children=t.parent.children.filter(e=>e!==t),t.parent=null,i(e))}};e.forEach(t=>{let e=t.mark;e.animate&&0!==e.animate.getAnimatorCount()?e.addEventListener("animationEnd",()=>{e.animate&&0===e.animate.getAnimatorCount()&&i(t)}):i(t)}),this._cachedGrammars.clear()}runAfter(t){return this._dataflow.runAfter(()=>{t.call(null,this)}),this}runBefore(t){return this._dataflow.runBefore(()=>{t.call(null,this)}),this}getImageBuffer(){var t,e;if("node"!==this._options.mode)return void this.logger.error(TypeError("getImageBuffer() now only support node environment."));let i=null===(e=null===(t=this.renderer)||void 0===t?void 0:t.stage)||void 0===e?void 0:e.call(t);return i?(i.render(),i.window.getImageBuffer()):(this.logger.error(ReferenceError("render is not defined")),null)}traverseMarkTree(t,e,i){return D(this.rootMark,"children",t,e,i),this}_bindResizeEvent(){var t,e,i,r,s,n;if(this.autoFit()){let a=null===(s=null===(r=null===(i=null===(e=null===(t=this.renderer)||void 0===t?void 0:t.stage)||void 0===e?void 0:e.call(t))||void 0===i?void 0:i.window)||void 0===r?void 0:r.getContainer)||void 0===s?void 0:s.call(r);if(a){let t=window.ResizeObserver;this._observer=new t(this._onResize),null===(n=this._observer)||void 0===n||n.observe(a)}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this.autoFit()&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}_getContainerSize(){var t,e,i,r,s,n,a,o,l,h,d;let c=null===(s=null===(r=null===(i=null===(e=null===(t=this.renderer)||void 0===t?void 0:t.stage)||void 0===e?void 0:e.call(t))||void 0===i?void 0:i.window)||void 0===r?void 0:r.getContainer)||void 0===s?void 0:s.call(r);if(c){let{width:t,height:e}=(0,u.Op)(c);return{width:null!==(o=null!==(a=null===(n=this._spec)||void 0===n?void 0:n.width)&&void 0!==a?a:this._options.width)&&void 0!==o?o:t,height:null!==(d=null!==(h=null===(l=this._spec)||void 0===l?void 0:l.height)&&void 0!==h?h:this._options.height)&&void 0!==d?d:e}}return null}resize(t,e,i=!0){let r=!1;return t!==this.width()&&(r=!0,this.updateSignal(tS.RD,t)),e!==this.height()&&(r=!0,this.updateSignal(tS.kw,e)),r&&(i?this.evaluate({morph:!1}):this._dataflow.evaluate()),this}_resizeRenderer(){let t=this.width(),e=this.height();return!!this.renderer.shouldResize(t,e)&&(this.renderer.resize(t,e),this.emit("resize",{},{width:t,height:e}),!0)}interaction(t,e){let i=t_.F.createInteraction(t,this,e);return i&&(i.bind(),this._boundInteractions||(this._boundInteractions=[]),this._boundInteractions.push(i)),i}removeInteraction(t,e){if(this._boundInteractions){let i=this._boundInteractions.filter(i=>{var r;return(0,d.Z)(e)?(0,h.Z)(t)?i.type===t:t?i===t:void 0:(null===(r=i.options)||void 0===r?void 0:r.id)===e});i.length&&i.forEach(t=>{t.unbind()})}return this}removeAllInteractions(){return this._boundInteractions&&(this._boundInteractions.forEach(t=>{t.unbind()}),this._boundInteractions=null),this}initializeEventConfig(t){let e=Object.assign({defaults:{}},t),i=(t,e)=>{e.forEach(e=>{(0,c.Z)(t[e])&&(t[e]=t[e].reduce((t,e)=>(t[e]=!0,t),{}))})};return i(e.defaults,["prevent","allow"]),i(e,[tS.Ng,tS.YJ]),e}initEvent(){let t=this.renderer.stage();t&&t.on("*",this.delegateEvent)}releaseStageEvent(){let t=this.renderer.stage();t&&t.off("*",this.delegateEvent)}addEventListener(t,e,i){let r=e;return i&&!1===i.trap||((r=e).raw=e),i&&i.target&&(r.target=i.target),this.on(t,r),this}removeEventListener(t,e){return e?this.off(t,e):this.off(t),this}initializeRenderer(){let t=this._options.width,e=this._options.height;this.renderer=new tb(this),this.renderer.initialize(t,e,this._options,this._eventConfig).background(this._background)}initialize(){var t,e,i;this.grammars=new tj(t=>t.id(),(t,e)=>this.logger.warn(`Grammar id '${t}' has been occupied`,e)),this._cachedGrammars=new tZ(t=>t.id()),this._options.logger&&p.Y.setInstance(this._options.logger),this.logger=p.Y.getInstance(null!==(t=this._options.logLevel)&&void 0!==t?t:0),this._dataflow=new B,this.animate=null===(e=this.initAnimate)||void 0===e?void 0:e.call(this,this),this._differ=new tX,this._options.hooks&&(Object.keys(this._options.hooks).forEach(t=>{this.on(t,this._options.hooks[t])}),this.hooks=this._options.hooks),this.container=null,this.renderer=null,this._eventListeners=[],this._eventConfig=this.initializeEventConfig(this._options.eventConfig),this._theme=this._options.disableTheme?null:tU.getDefaultTheme(),this.parseBuiltIn(),(i=this._options).mode&&g.rF.setEnv(i.mode,i.modeParams||{}),this.initializeRenderer(),this._eventConfig.disable||this.initEvent(),this._bindResizeEvent(),this._needBuildLayoutTree=!0,this._layoutState=y.$s.before,this.theme(this._theme)}pauseProgressive(){return!1}resumeProgressive(){return!1}restartProgressive(){return!1}findProgressiveMarks(){let t=[];return this.traverseMarkTree(e=>{t.push(e)},t=>t.markType!==y.Cm.group&&t.isProgressive()),t.length?(this._progressiveMarks=t,this.renderer&&this.renderer.combineIncrementalLayers(),t):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(t=>t.isDoingProgressive())){let t=g.rF.getRequestAnimationFrame();this._progressiveRafId=t(this.handleProgressiveFrame)}else this._progressiveMarks&&this.animate&&this._progressiveMarks.every(t=>t.canAnimateAfterProgressive())?this.animate.animate():this._progressiveMarks&&(this._progressiveMarks=null)}clearProgressive(){this._progressiveRafId&&g.rF.getCancelAnimationFrame()(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(t=>{t.clearProgressive()}),this._progressiveMarks=null)}release(){var t,e,i,r;this.removeAllInteractions(),this.releaseStageEvent(),this._unBindResizeEvent(),this.clearProgressive(),t_.F.unregisterRuntimeTransforms(),p.Y.setInstance(null),null===(t=this.animate)||void 0===t||t.stop(),this.grammars.release(),this._cachedGrammars.release(),this._dataflow.release(),this._dataflow=null,null===(i=null===(e=this.renderer)||void 0===e?void 0:e.release)||void 0===i||i.call(e),this.renderer=null,this._boundInteractions=null,this.removeAllListeners(),null===(r=this._eventListeners)||void 0===r||r.forEach(t=>{t.source.removeEventListener(t.type,t.handler)}),this._eventListeners=null}}},7366:function(t,e,i){"use strict";i.d(e,{w:()=>o});var r=i(6602),s=i(2698),n=i(4761),a=i(1035);class o extends a.v{constructor(t,e,i,n){super(t,s.Cm.component,i),this._componentDatum={[r.jC]:0},this.componentType=e,this.spec.type="component",this.spec.componentType=e,this.mode=n,this._updateComponentEncoders()}configureComponent(t){return this.spec.componentConfig=t,this.commit(),this}addGraphicItem(t,e,i){let r=null!=i?i:n.F.createGraphicComponent(this.componentType,t,{mode:this.mode,skipDefault:this.spec.skipTheme});return r&&(this.emit(s.ZK.BEFORE_ADD_VRENDER_MARK,{graphicItem:r}),this.graphicParent.appendChild(r),this.emit(s.ZK.AFTER_ADD_VRENDER_MARK,{graphicItem:r})),r}join(t){return super.join(t,r.jC)}encodeState(t,e,i){return super.encodeState(t,e,i),this._updateComponentEncoders(),this}parseRenderContext(){return{large:!1}}_prepareRejoin(){this._componentDatum[r.jC]+=1}evaluateJoin(t){return this.spec.key=r.jC,t?(t[r.jC]=this._componentDatum[r.jC],this._componentDatum=t):this._componentDatum={[r.jC]:this._componentDatum[r.jC]},super.evaluateJoin([this._componentDatum])}_updateComponentEncoders(){this._encoders=this.spec.encode}_getEncoders(){var t;return null!==(t=this._encoders)&&void 0!==t?t:{}}}},9524:function(t,e,i){"use strict";i.d(e,{As:()=>l,IL:()=>p,J0:()=>d,Ng:()=>s,RD:()=>a,Uv:()=>n,VK:()=>g,YJ:()=>r,kw:()=>o,t3:()=>c,uP:()=>h,xA:()=>u});let r="window",s="view",n="browser",a="width",o="height",l="viewWidth",h="viewHeight",u="padding",d="viewBox",c="autoFit",p="@",g="#"},704:function(t,e,i){"use strict";i.d(e,{c:()=>y});var r=i(2698),s=i(4643),n=i(1035),a=i(4761),o=i(6082),l=i(9038),h=i(1036),u=i(306),d=i(9730),c=i(8656),p=i(6602),g=i(8807),m=i(5395);class f extends g.W{constructor(t){super(t),this.getStateAttrs=(t,e)=>{var i,r,s,n;let a=!(0,o.Z)(null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[t]),h=a?Object.assign(Object.assign({},null===(r=this.mark.getSpec().encode)||void 0===r?void 0:r[t]),this.runtimeStatesEncoder[t]):null===(s=this.mark.getSpec().encode)||void 0===s?void 0:s[t],u={};if(!h)return u;if((0,l.Z)(h))return u.attributes=h(this.getDatum(),this,t,e),u;if(!a&&(null===(n=this.graphicItem.glyphStates)||void 0===n?void 0:n[t]))return this.graphicItem.glyphStates[t];if(h){let e=[Object.assign({},this.items[0],{nextAttrs:{}})];return(0,m.h)(this,e,h,this.mark.parameters()),this.coordinateTransformEncode(e),u.attributes=e[0].nextAttrs,this.graphicItem.glyphStates?this.graphicItem.glyphStates[t]||(this.graphicItem.glyphStates[t]=u):this.graphicItem.glyphStates={[t]:u},u}return u},this.glyphMeta=this.mark.getGlyphMeta()}getGlyphGraphicItems(){return this.glyphGraphicItems}initGraphicItem(t={}){if(this.graphicItem)return;this.graphicItem=this.mark.addGraphicItem(t,this.groupKey),this.graphicItem[p.dc]=this,this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1);let e=this.glyphMeta.getMarks();this.glyphGraphicItems={},this.graphicItem.getSubGraphic().forEach(t=>{let i=e[t.name];this.glyphGraphicItems[t.name]=t,t.onBeforeAttributeUpdate=e=>this.mark?(0,c.qX)(i,e,this,t.name):e}),this.clearGraphicAttributes()}useStates(t,e){if(!this.graphicItem)return!1;this.mark.emit(r.ZK.BEFORE_ELEMENT_STATE,{states:t},this),this.states=t.slice();let i=(0,h.Z)(e)?e:this.hasStateAnimation();return this.graphicItem.glyphStateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,i),this.mark.emit(r.ZK.AFTER_ELEMENT_STATE,{states:t},this),!0}encodeGraphic(){this.coordinateTransformEncode(this.items);let t=this.transformElementItems(this.items,this.mark.markType),e=!this.graphicItem;this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null):this.initGraphicItem(),this.diffState===r.OJ.enter||e?(this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!0),this.applyGraphicAttributes(t),this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1)):this.applyGraphicAttributes(t),(this.diffState===r.OJ.enter||this.diffState===r.OJ.update)&&this.states.length&&(Object.values(this.glyphGraphicItems).forEach(t=>{t.states={}}),this.useStates(this.states)),this.items.map(t=>{t.nextAttrs={}})}encodeCustom(t){var e;let i={},r=this.glyphMeta.getChannelEncoder(),s=this.glyphMeta.getFunctionEncoder();if(s&&(i=s.call(null,Object.assign({},null===(e=this.graphicItem)||void 0===e?void 0:e.attribute,t),this.getDatum(),this,this.mark.getGlyphConfig())),r){let e;Object.keys(r).forEach(s=>{var n;if(!(0,o.Z)(t[s])){e||(e=Object.assign({},null===(n=this.graphicItem)||void 0===n?void 0:n.attribute,t));let a=r[s].call(null,s,t[s],e,this.getDatum(),this,this.mark.getGlyphConfig());Object.keys(null!=a?a:{}).forEach(t=>{var e;i[t]=Object.assign(null!==(e=i[t])&&void 0!==e?e:{},a[t])})}})}return i}encodeDefault(){let t={};return this.glyphMeta.getDefaultEncoder()&&Object.assign(t,this.glyphMeta.getDefaultEncoder().call(null,this.getDatum(),this,this.mark.getGlyphConfig())),t}_onGlyphAttributeUpdate(t=!1){return e=>{if(!this.mark)return e;let i=this.glyphMeta.getMarks(),s=(0,c.qX)(this.mark.getAttributeTransforms(),e,this),n=t?this.encodeDefault():null,a=this.encodeCustom(e);return Object.keys(i).forEach(s=>{let o=i[s],l=this.glyphGraphicItems[s],h=Object.assign({},null==a?void 0:a[s]);if(t){let t=null==n?void 0:n[s];Object.keys(null!=t?t:{}).forEach(e=>{(0,u.Z)(this.items[0].nextAttrs,e)||(0,u.Z)(h,e)||(h[e]=t[e])})}let d=Object.assign({},(0,c.o$)(o,e),h),p=this._generateGlyphItems(o,this.items,d);this.coordinateTransformEncode(p);let g=this.transformElementItems(p,o);this.applyGlyphGraphicAttributes(g,s,l),o===r.Cm.shape&&(l.datum=p[0].datum)}),s}}_generateGlyphItems(t,e,i){let r=e.map(t=>Object.assign({},t,{nextAttrs:i}));return p.FQ.includes(t)&&this.mark.getSpec().enableSegments&&r.forEach((t,r)=>{t.nextAttrs=Object.assign({},e[r].nextAttrs,i)}),r}getGraphicAttribute(t,e=!1,i){if(!this.graphicItem)return;let r=this.getPrevGraphicAttributes(i);return e&&(0,u.Z)(r,t)?r[t]:(i?this.glyphGraphicItems[i]:this.graphicItem).attribute[t]}setGraphicAttribute(t,e,i=!0,r){if(!this.graphicItem)return;let s=r?this.glyphGraphicItems[r]:this.graphicItem,n=this.getFinalGraphicAttributes(r),a=this.getPrevGraphicAttributes(r);i&&(n[t]=e),(0,u.Z)(a,t)||(a[t]=s.attribute[t]),s.setAttribute(t,e)}setGraphicAttributes(t,e=!0,i){if(!this.graphicItem)return;let r=i?this.glyphGraphicItems[i]:this.graphicItem,s=this.getFinalGraphicAttributes(i),n=this.getPrevGraphicAttributes(i);Object.keys(t).forEach(i=>{e&&(s[i]=t[i]),(0,u.Z)(n,i)||(n[i]=r.attribute[i])}),r.setAttributes(t)}diffAttributes(t,e){let i={},r=this.getFinalGraphicAttributes(e);for(let e in t)(0,u.Z)(r,e)&&(0,d.X)(r[e],t[e])||(i[e]=t[e]);return i}applyGlyphGraphicAttributes(t,e,i){var r,s;if(this.mark.needAnimate()){let n=this.diffAttributes(t,e),a=null!==(r=this.getPrevGraphicAttributes(e))&&void 0!==r?r:{},o=null!==(s=this.getFinalGraphicAttributes(e))&&void 0!==s?s:{};Object.keys(n).forEach(t=>{a[t]=i.attribute[t],o[t]=n[t]}),this.setNextGraphicAttributes(n,e),this.setPrevGraphicAttributes(a,e),this.setFinalGraphicAttributes(o,e),i.setAttributes(n)}else i.setAttributes(t)}getFinalGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).finalAttrs}setFinalGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).finalAttrs=t}getPrevGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).prevAttrs}setPrevGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).prevAttrs=t}getNextGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).nextAttrs}setNextGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).nextAttrs=t}clearChangedGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(t=>{this.setPrevGraphicAttributes(null,t),this.setNextGraphicAttributes(null,t)})}clearGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),this.setFinalGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(t=>{this.setPrevGraphicAttributes(null,t),this.setNextGraphicAttributes(null,t),this.setFinalGraphicAttributes(null,t)})}remove(){this.glyphGraphicItems=null,super.remove()}release(){this.glyphGraphicItems&&(Object.values(this.glyphGraphicItems).forEach(t=>{t[p.dc]=null}),this.glyphGraphicItems=null),super.release()}}class v extends n.v{constructor(t,e,i){super(t,r.Cm.glyph,i),this.glyphType=e,this.glyphMeta=a.F.getGlyph(e)}configureGlyph(t){return this.spec.glyphConfig=t,this.commit(),this}getGlyphMeta(){return this.glyphMeta}getGlyphConfig(){return this.spec.glyphConfig}addGraphicItem(t,e){let i=(0,s.ib)(this,this.glyphMeta,t);return super.addGraphicItem(t,e,i)}createElement(){return new f(this)}}v.markType=r.Cm.glyph;let y=()=>{a.F.registerMark(r.Cm.glyph,v)}},668:function(t,e,i){"use strict";i.d(e,{S:()=>f});var r=i(1312),s=i.n(r),n=i(4546),a=i(9904),o=i(6082),l=i(7623),h=i(4154),u=i(9038),d=i(9689);let c=(t,e)=>(0,d.ch)(t)?t.output():t&&(0,h.Z)(t)?(0,u.Z)(t.callback)?i=>t.callback(i,e):(0,u.Z)(t.value)?t.value(e):t:t,p=(t,e)=>t?(0,h.Z)(t)?Object.keys(t).reduce((i,r)=>{let s=t[r];return i[r]=c(s,e),i},{}):t.map(t=>c(t,e)):t;var g=i(2698);let m=-1;class f extends s(){constructor(t){super(),this.spec={},this.references=new Map,this.targets=[],this.transforms=[],this.view=t,this.uid=++m}parse(t){return this.id(t.id),this.name(t.name),this.depend(t.dependency),this}depend(t){var e;if(null===(e=this.spec)||void 0===e?void 0:e.dependency){let t=(0,n.IX)(this.spec.dependency).map(t=>(0,a.Z)(t)?this.view.getGrammarById(t):t);this.detach(t)}this.spec.dependency=t;let i=(0,n.IX)(t).map(t=>(0,a.Z)(t)?this.view.getGrammarById(t):t);return this.attach(i),this.commit(),this}addEventListener(t,e,i){let r=e;return i&&!1===i.trap||((r=e).raw=e),i&&i.target&&(r.target=i.target),this.on(t,r),this}removeEventListener(t,e){return e?this.off(t,e):this.off(t),this}emit(t,...e){var i,r;return null===(r=null===(i=this.view)||void 0===i?void 0:i.emit)||void 0===r||r.call(i,t,...e),super.emit(t,...e)}emitGrammarEvent(t,...e){return super.emit(t,...e)}evaluateTransform(t,e,i){if(!t||!t.length)return e;let r=e,s=0,n=t.length;for(;s<n;){let e=t[s];this.emit(g.ZK.BEFORE_TRANSFORM,e.type),r=e.transform(e.isRawOptions?e.options:p(e.options,i),r,i,this.view),s++,this.emit(g.ZK.AFTER_TRANSFORM,e.type)}return r}set(t){return!1}id(t){return arguments.length?(this.view.grammars.unrecord(this),this._id=t,this.view.grammars.record(this),this):this._id}name(t){return arguments.length?(this._name=t,this):this._name}attach(t,e=1){return(0,n.IX)(t).filter(t=>!(0,o.Z)(t)).forEach(i=>{var r;(0,o.Z)(t)||(i.targets.includes(this)||i.targets.push(this),this.references.set(i,(null!==(r=this.references.get(i))&&void 0!==r?r:0)+e))}),this}detach(t,e=1){return(0,n.IX)(t).filter(t=>!(0,o.Z)(t)).forEach(t=>{let i=this.references.get(t)-e;i>0?this.references.set(t,i-1):(this.references.delete(t),t.targets.includes(this)&&(t.targets=t.targets.filter(t=>t!==this)))}),this}detachAll(){this.references.forEach((t,e)=>{this.detach(e,t)})}link(t){this.grammarSource=t}run(){var t;let e=null===(t=this.grammarSource)||void 0===t?void 0:t.output(),i=this.parameters();return this.evaluate(e,i)}commit(){this.view.commit(this)}parameters(){let t={};return this.references.forEach((e,i)=>{(0,l.Z)(i.id())&&(t[i.id()]=i.output())}),t}getSpec(){return this.spec}reuse(t){return this}clear(){this.spec=null,this.view=null}release(){this.clear()}setFunctionSpec(t,e){return(0,o.Z)(this.spec[e])||this.detach((0,d.Lf)(this.spec[e],this.view)),this.spec[e]=t,this.attach((0,d.Lf)(t,this.view)),this.commit(),this}}},1035:function(t,e,i){"use strict";i.d(e,{v:()=>b});var r=i(9904),s=i(6082),n=i(7636),a=i(7623),o=i(6602),l=i(2698),h=i(4198),u=i(4643),d=i(668),c=i(7911),p=i(9689),g=i(9818),m=i(5395),f=i(8656),v=i(2200),y=i(9524),_=i(8807);class b extends d.S{constructor(t,e,i){super(t),this.grammarType="mark",this.elements=[],this.elementMap=new Map,this.isUpdated=!0,this._isReentered=!1,this.differ=new h.Hw([]),this.markType=e,this.spec.type=e,this.spec.encode={update:{}},this.spec.group=i,i&&(this.group=i,this.attach(i),i.appendChild(this))}parse(t){var e,i,s;if(super.parse(t),this.spec.group){let t=(0,r.Z)(this.spec.group)?this.view.getMarkById(this.spec.group):this.spec.group;this.detach(t)}let n=(0,r.Z)(t.group)?this.view.getMarkById(t.group):t.group;return this.attach(n),this.join(null===(e=t.from)||void 0===e?void 0:e.data,t.key,t.sort,t.groupBy,t.groupSort),this.coordinate(t.coordinate),this.state(t.state,this.spec.stateSort),Object.keys(null!==(i=this.spec.encode)&&void 0!==i?i:{}).forEach(t=>{this.encodeState(t,{},!0)}),Object.keys(null!==(s=t.encode)&&void 0!==s?s:{}).forEach(e=>{this.encodeState(e,t.encode[e])}),this.animation(t.animation),this.animationState(t.animationState),this.morph(t.morph,t.morphKey,t.morphElementKey),this.layout(t.layout),this.configure(t),this.transform(t.transform),this.parseAddition(t),this.spec=t,this.markType=t.type,this.commit(),this}parameters(){var t;return null!==(t=this._finalParameters)&&void 0!==t?t:super.parameters()}parseAddition(t){return this}reuse(t){var e;return t.grammarType!==this.grammarType||(this.markType=t.markType,this.coord=t.coord,this.elementMap=t.elementMap,this.elements=t.elements,this.elementMap.forEach(t=>t.mark=this),this.differ=t.differ,null===(e=this.reuseAnimate)||void 0===e||e.call(this,t),this._context=t._context,this.graphicItem=t.graphicItem,this.graphicIndex=t.graphicIndex,this.graphicParent=t.graphicParent,this.needClear=t.needClear,this.isUpdated=t.isUpdated),this}needLayout(){return!(0,s.Z)(this.spec.layout)}handleLayoutEnd(){}handleRenderEnd(){this.needClear&&(this.cleanExitElements(),this.elementMap.forEach(t=>{t.diffState===l.OJ.exit?t.clearGraphicAttributes():t.clearChangedGraphicAttributes()}),this.differ.updateToCurrent(),this.needClear=!1)}evaluateMainTasks(t,e){var i,r;if(this.needSkipBeforeLayout()&&this.view.getLayoutState()===l.$s.before)return this;let s=null===(i=this.view.renderer)||void 0===i?void 0:i.stage();this.init(s,e);let n=this.evaluateTransform(this._getTransformsBeforeJoin(),null!=t?t:o.NM,e),a=null==n?void 0:n.progressive;if(a?this.renderContext={large:!1}:(this.evaluateGroup(n),this.renderContext=this.parseRenderContext(n,e)),null===(r=this.renderContext)||void 0===r?void 0:r.progressive)this.differ.reset(),this.elementMap.clear(),this.evaluateProgressive();else{let t=null;if(a){if(this.renderContext.parameters=e,this.renderContext.beforeTransformProgressive=n.progressive,t=n.progressive.output(),n.progressive.canAnimate&&n.progressive.unfinished())return this.update(this.spec),this}else t=n;this.emit(l.ZK.BEFORE_MARK_JOIN),this.evaluateJoin(t),this.emit(l.ZK.AFTER_MARK_JOIN),this.emit(l.ZK.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,e),this.emit(l.ZK.AFTER_MARK_STATE),this.emit(l.ZK.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),e),this.emit(l.ZK.AFTER_MARK_ENCODE)}return this.update(this.spec),this}evaluateGroup(t){if(this.markType===l.Cm.group)return;let e=(0,h.pv)(null!=t?t:o.NM,this.spec.groupBy,this.spec.groupSort);this._groupEncodeResult=null,this._groupedData=e}_getTransformsAfterEncodeItems(){return this.transforms&&this.transforms.filter(t=>"afterEncodeItems"===t.markPhase)}_getTransformsAfterEncode(){return this.transforms&&this.transforms.filter(t=>(0,s.Z)(t.markPhase)||"afterEncode"===t.markPhase)}_getTransformsBeforeJoin(){return this.transforms?this.transforms.filter(t=>"beforeJoin"===t.markPhase):[]}evaluate(t,e){var i;return this.evaluateMainTasks(t,e),(null===(i=this.renderContext)||void 0===i?void 0:i.progressive)||this.evaluateTransform(this._getTransformsAfterEncode(),this.elements,e),this}output(){return this}join(t,e,i,n,a){return this.grammarSource&&(this.detach(this.grammarSource),this.grammarSource=null),this.spec.from=null,(0,s.Z)(t)||((0,r.Z)(t)?this.grammarSource=this.view.getDataById(t):this.grammarSource=t,this.spec.from={data:t},this.attach(this.grammarSource)),this.spec.key=e,this.spec.sort=i,this.spec.groupBy=n,this.spec.groupSort=a,this.commit(),this}coordinate(t){return(0,r.Z)(t)?this.coord=this.view.getCoordinateById(t):this.coord=t,this.attach(this.coord),this.commit(),this}state(t,e){return this.spec.stateSort=e,this.setFunctionSpec(t,"state")}encode(t,e,i){return this.encodeState(l.OJ.update,t,e,i)}encodeState(t,e,i,s){if(t===l.OJ.enter&&(this._isReentered=!0),this.spec.encode[t]){let n=this.spec.encode[t];if((0,p.hR)(n))this.detach((0,c.$C)(n,this.view));else{let a=(0,r.Z)(e);a&&s||!a&&i?(Object.keys(n).forEach(t=>{this.detach((0,c.$C)(n[t],this.view))}),this.spec.encode[t]={}):a?this.detach((0,c.$C)(n[e],this.view)):Object.keys(e).forEach(t=>{this.detach((0,c.$C)(n[t],this.view))})}}return e&&(this.spec.encode[t]||(this.spec.encode[t]={}),(0,r.Z)(e)?(this.spec.encode[t][e]=i,this.attach((0,c.$C)(i,this.view))):(0,p.hR)(e)?(this.spec.encode[t]=e,this.attach((0,c.$C)(e,this.view))):e&&(Object.assign(this.spec.encode[t],e),Object.values(e).forEach(t=>{this.attach((0,c.$C)(t,this.view))}))),this.commit(),this}_getEncoders(){var t;return null!==(t=this.spec.encode)&&void 0!==t?t:{}}animation(t){return this.spec.animation=t,this}animationState(t){return this.setFunctionSpec(t,"animationState")}layout(t){return this.spec.layout=t,this.commit(),this}morph(t,e,i){return this.spec.morph=t,this.spec.morphKey=e,this.spec.morphElementKey=i,this}transform(t){let e=(0,g.X)(this.spec.transform,this.view);e&&(this.detach(e.refs),this.transforms=[]);let i=(0,g.X)(t,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.spec.transform=t,this.commit(),this}configure(t){let e=["clip","clipPath","zIndex","interactive","context","setCustomizedShape","large","largeThreshold","progressiveStep","progressiveThreshold","support3d","morph","morphKey","morphElementKey","attributeTransforms","skipTheme","enableSegments","stateSort","graphicName","overflow"];return null===t?e.forEach(t=>{(0,s.Z)(this.spec[t])||(this.spec[t]=void 0)}):e.forEach(e=>{(0,s.Z)(t[e])||(this.spec[e]=t[e])}),this}context(t){return this.spec.context=t,this._context=t,this}isCollectionMark(){return o.FQ.includes(this.markType)}needAnimate(){var t;return!(null===(t=this.renderContext)||void 0===t?void 0:t.progressive)&&!(0,s.Z)(this.spec.animation)}getAllElements(){let t=this.elements.slice();return this.elementMap.forEach(e=>{e.diffState!==l.OJ.exit||t.includes(e)||t.push(e)}),this.spec.sort&&t.sort((t,e)=>this.spec.sort(t.getDatum(),e.getDatum())),t}getScales(){let t={};return this.references.forEach((e,i)=>{i.grammarType===l.mr.scale&&(t[i.id()]=i.output())}),t}getScalesByChannel(){let t=this.spec.encode;if(!t)return{};let e={},i=this.parameters();return Object.keys(t).forEach(r=>{let s=t[r];s&&!(0,p.hR)(s)&&Object.keys(s).forEach(t=>{(0,c.zO)(s[t])&&(e[t]=(0,p.Ur)(s[t].scale,i))})}),e}getFieldsByChannel(){let t=this.spec.encode;if(!t)return{};let e={};return Object.keys(t).forEach(i=>{let r=t[i];(0,p.hR)(r)||Object.keys(r).forEach(t=>{(0,c.CJ)(r[t])&&(e[t]=r[t].field)})}),e}init(t,e){var i,r,s,n,a;if(this._delegateEvent||(this._delegateEvent=(t,e)=>{let i=(0,v.Z)(this.view,t,e,y.Ng),r=t.element;(null==r?void 0:r.mark)===this&&this.emitGrammarEvent(e,i,r)},this.initEvent()),null===(i=this.initAnimate)||void 0===i||i.call(this,this.spec),!this.group){let t=(0,p.Ur)(this.spec.group,e);this.group=t,t&&t.appendChild(this)}let h=this.group?this.group.getGroupGraphicItem():t.defaultLayer,d=null!==(n=null===(s=null===(r=this.group)||void 0===r?void 0:r.children)||void 0===s?void 0:s.indexOf(this))&&void 0!==n?n:0;if(this.markType!==l.Cm.group){if(!this.graphicItem){let t=(0,u.CJ)(this,l.Cm.group,{pickable:!1,zIndex:null!==(a=this.spec.zIndex)&&void 0!==a?a:0,overflow:this.spec.overflow});(this.spec.support3d||o.Nc.includes(this.markType))&&t.setMode("3d"),t.name=`${this.id()||this.markType}`,this.graphicItem=t}this.graphicParent=this.graphicItem,h&&(this.graphicIndex!==d||this.graphicItem.parent!==h)&&h.insertIntoKeepIdx(this.graphicItem,d)}else this.graphicParent=h,this.graphicParent.setAttributes({overflow:this.spec.overflow});this.graphicIndex=d}update(t){var e;if(this.emit(l.ZK.BEFORE_MARK_UPDATE),this._context=this.spec.context,this.isUpdated=!0,this.renderContext.progressive||null===(e=this.updateAnimate)||void 0===e||e.call(this,t),this.markType!==l.Cm.group){if((0,s.Z)(t.zIndex)||this.graphicItem.setAttribute("zIndex",t.zIndex),(0,s.Z)(t.clip)||this.graphicItem.setAttribute("clip",t.clip),!(0,s.Z)(t.clipPath)){let e=(0,n.Z)(t.clipPath)?t.clipPath:t.clipPath(this.elements);e&&e.length?this.graphicItem.setAttribute("path",e):this.graphicItem.setAttributes({path:e,clip:!1})}(0,s.Z)(t.overflow)||this.graphicItem.setAttribute("overflow",t.overflow),this.elementMap.forEach(t=>{t.updateGraphicItem()})}else this.elementMap.forEach(t=>{t.updateGraphicItem()});this.emit(l.ZK.AFTER_MARK_UPDATE)}createElement(){return new _.W(this)}evaluateJoin(t){var e,i,r,n;this.needClear=!0;let a=(0,p.wn)(null!==(r=null!==(e=this.spec.key)&&void 0!==e?e:null===(i=this.grammarSource)||void 0===i?void 0:i.getDataIDKey())&&void 0!==r?r:()=>o.jC),u=(0,p.wn)(null!==(n=this.spec.groupBy)&&void 0!==n?n:()=>o.jC),d=this.spec.sort,c=this.isCollectionMark(),g=new Set(this.elements.filter(t=>t.diffState===l.OJ.enter)),m=[];this.differ.setCallback((t,e,i)=>{var r;let n;if((0,s.Z)(e))(n=this.elementMap.get(t))&&(n.diffState=l.OJ.exit);else if((0,s.Z)(i)){if((n=this.elementMap.has(t)?this.elementMap.get(t):this.createElement()).diffState===l.OJ.exit){n.diffState=l.OJ.enter;let t=null===(r=this.animate)||void 0===r?void 0:r.getElementAnimators(n,l.OJ.exit);t&&t.forEach(t=>t.stop("start"))}n.diffState=l.OJ.enter;let i=c?t:u(e[0]);n.updateData(i,e,a),this.elementMap.set(t,n),m.push(n)}else if(n=this.elementMap.get(t)){n.diffState=l.OJ.update;let i=c?t:u(e[0]);n.updateData(i,e,a),m.push(n)}g.delete(n)});let f=null!=t?t:o.NM;c?this.differ.setCurrentData(this._groupedData):this.differ.setCurrentData((0,h.pv)(f,t=>`${u(t)}-${a(t)}`,void 0)),this.differ.doDiff(),g.forEach(t=>{this.elementMap.delete(c?t.groupKey:`${t.groupKey}-${t.key}`),t.remove(),t.release()}),this.elements=m,d&&this.elements.length>=2&&this.elements.sort((t,e)=>d(t.getDatum(),e.getDatum()))}evaluateState(t,e,i){e&&t.forEach(t=>{t.state(e,i)})}evaluateGroupEncode(t,e,i){if(!this._groupedData||!e)return;let r={};return this._groupedData.keys.forEach(s=>{let n=t.find(t=>t.groupKey===s);n&&(r[s]=(0,m.i)(e,n.items&&n.items[0]&&n.items[0].datum,n,i))}),this._groupEncodeResult=r,r}getChannelsFromConfig(t){let e=this.spec;return(0,s.Z)(e.interactive)?null:{pickable:e.interactive}}evaluateEncode(t,e,i,r){let s=this.getChannelsFromConfig();if(e){this.emit(l.ZK.BEFORE_ELEMENT_ENCODE,{encoders:e,parameters:i},this);let n=r?null:this.evaluateGroupEncode(t,e[l.Nw.group],i);t.forEach(t=>{this.markType===l.Cm.glyph&&this._groupEncodeResult?t.items.forEach(e=>{e.nextAttrs=Object.assign(e.nextAttrs,s,this._groupEncodeResult[t.groupKey])}):(null==n?void 0:n[t.groupKey])&&!this.isCollectionMark()?t.items.forEach(e=>{e.nextAttrs=Object.assign(e.nextAttrs,s,n[t.groupKey])}):s&&t.items.forEach(t=>{t.nextAttrs=Object.assign(t.nextAttrs,s)}),t.encodeItems(t.items,e,this._isReentered,i),this.isCollectionMark()&&(null==n?void 0:n[t.groupKey])&&(0,a.Z)(n[t.groupKey].defined)&&(t.items.forEach(e=>{e.nextAttrs.defined=n[t.groupKey].defined}),delete n[t.groupKey].defined)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),t,i),t.forEach(t=>{t.encodeGraphic(this.isCollectionMark()?null==n?void 0:n[t.groupKey]:null)}),this.emit(l.ZK.AFTER_ELEMENT_ENCODE,{encoders:e,parameters:i},this)}else t.forEach(t=>{t.initGraphicItem(s)})}addGraphicItem(t,e,i){var r;let s=null!=i?i:(0,u.CJ)(this,this.markType,t);if(s){if(null===(r=this.renderContext)||void 0===r?void 0:r.progressive){let t;if(this._groupedData){let i=this._groupedData.keys.indexOf(e);i>=0&&(t=this.graphicParent.getChildAt(i))}else t=this.graphicParent.at(0);this.isCollectionMark()?(s.incremental=1,t.appendChild(s)):t.incrementalAppendChild(s)}else this.graphicParent.appendChild(s);return s}}parseRenderContext(t,e){let i=this.markType!==l.Cm.group&&this.spec.progressiveStep>0&&this.spec.progressiveThreshold>0&&this.spec.progressiveStep<this.spec.progressiveThreshold,r=this.spec.large&&this.spec.largeThreshold>0&&t.length>=this.spec.largeThreshold;if(i){let i=this._groupedData;return i&&i.keys&&i.keys.some(t=>i.data.get(t).length>this.spec.progressiveThreshold)?{large:r,parameters:e,progressive:{data:t,step:this.spec.progressiveStep,currentIndex:0,totalStep:i.keys.reduce((t,e)=>Math.max(Math.ceil(i.data.get(e).length/this.spec.progressiveStep),t),1),groupedData:i.data}}:{large:r}}return{large:r}}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}canAnimateAfterProgressive(){return this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.canAnimate()}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this.elements=[],this.graphicParent.children.forEach(t=>{t.incrementalClearChild()}),this.graphicParent.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}evaluateJoinProgressive(){var t,e,i;let r=this.renderContext.progressive.currentIndex,s=(0,p.wn)(null!==(i=null!==(t=this.spec.key)&&void 0!==t?t:null===(e=this.grammarSource)||void 0===e?void 0:e.getDataIDKey())&&void 0!==i?i:()=>o.jC),n=[];if(this.isCollectionMark())return this._groupedData.keys.forEach((t,e)=>{let i=this.renderContext.progressive.groupedData.get(t),a=this.renderContext.progressive.step,o=i.slice(r*a,(r+1)*a);if(0===r){let e=this.createElement();e.diffState=l.OJ.enter,e.updateData(t,o,s),n.push(e)}else{let i=this.elements[e];i.updateData(t,o,s),n.push(i)}}),n;let a={};return this._groupedData.keys.forEach(t=>{let e=this.renderContext.progressive.groupedData.get(t),i=this.renderContext.progressive.step,o=e.slice(r*i,(r+1)*i),h=[];o.forEach(e=>{let i=this.createElement();i.diffState=l.OJ.enter,i.updateData(t,[e],s),h.push(i),n.push(i)}),a[t]=h}),{groupElements:a,elements:n}}evaluateEncodeProgressive(t,e,i){let r=this.renderContext.progressive.currentIndex;if(0===r){if(this.evaluateEncode(t,e,i),0===r&&this._groupEncodeResult&&!this.isCollectionMark()&&this.markType!==l.Cm.glyph){let e=t[0],i=e.getGraphicItem(),r=null==i?void 0:i.parent;r&&this._groupEncodeResult[e.groupKey]&&r.setTheme({common:this._groupEncodeResult[e.groupKey]})}}else this.evaluateEncode(t,e,i,!0)}evaluateProgressive(){var t,e,i;if(null===(t=this.renderContext)||void 0===t?void 0:t.beforeTransformProgressive){let t=this.renderContext.beforeTransformProgressive;t.progressiveRun();let e=t.output();if(t.canAnimate){if(t.unfinished())return;this.evaluateGroup(e)}return this.emit(l.ZK.BEFORE_MARK_JOIN),this.evaluateJoin(e),this.emit(l.ZK.AFTER_MARK_JOIN),this.emit(l.ZK.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,this.renderContext.parameters),this.emit(l.ZK.AFTER_MARK_STATE),this.emit(l.ZK.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),this.renderContext.parameters),void this.emit(l.ZK.AFTER_MARK_ENCODE)}if(!(null===(e=this.renderContext)||void 0===e?void 0:e.progressive))return;let r=this.renderContext.parameters;this.emit(l.ZK.BEFORE_MARK_JOIN);let s=this.evaluateJoinProgressive(),n=Array.isArray(s)?s:s.elements;if(this.emit(l.ZK.AFTER_MARK_JOIN),0===this.renderContext.progressive.currentIndex?(this.graphicParent.removeAllChild(),this._groupedData.keys.forEach(t=>{let e=(0,u.CJ)(this,l.Cm.group,{pickable:!1,zIndex:this.spec.zIndex});e.incremental=this.renderContext.progressive.step,this.graphicParent.appendChild(e)}),this.elements=n):this.elements=this.elements.concat(n),this.emit(l.ZK.BEFORE_MARK_STATE),this.evaluateState(n,this.spec.state,r),this.emit(l.ZK.AFTER_MARK_STATE),this.emit(l.ZK.BEFORE_MARK_ENCODE),Array.isArray(s))this.evaluateEncodeProgressive(n,this._getEncoders(),r);else{let t=s.groupElements;Object.keys(t).forEach(e=>{this.evaluateEncodeProgressive(t[e],this._getEncoders(),r)})}this.emit(l.ZK.AFTER_MARK_ENCODE);let a=null===(i=this._getTransformsAfterEncode())||void 0===i?void 0:i.filter(t=>!0===t.canProgressive);(null==a?void 0:a.length)&&this.evaluateTransform(a,this.elements,r),this.renderContext.progressive.currentIndex+=1}isLargeMode(){return this.renderContext&&this.renderContext.large}cleanExitElements(){this.elementMap.forEach((t,e)=>{t.diffState!==l.OJ.exit||t.isReserved||(this.elementMap.delete(e),t.remove(),t.release())})}getGroupGraphicItem(){if(this.elements&&this.elements[0]&&this.elements[0].getGraphicItem)return this.elements[0].getGraphicItem()}getBounds(){var t;return this.graphicItem?this.graphicItem.AABBBounds:null===(t=this.getGroupGraphicItem())||void 0===t?void 0:t.AABBBounds}getMorphConfig(){var t;return{morph:null!==(t=this.spec.morph)&&void 0!==t&&t,morphKey:this.spec.morphKey,morphElementKey:this.spec.morphElementKey}}getAttributeTransforms(){var t;return null!==(t=this.spec.attributeTransforms)&&void 0!==t?t:f.N7[this.markType]}getContext(){return this._context}needSkipBeforeLayout(){var t,e;if(!0===(null===(t=this.spec.layout)||void 0===t?void 0:t.skipBeforeLayouted))return!0;let i=this.group;for(;i;){if(!0===(null===(e=i.getSpec().layout)||void 0===e?void 0:e.skipBeforeLayouted))return!0;i=i.group}return!1}initEvent(){if(this._delegateEvent){let t=this.view.renderer.stage();t&&t.on("*",this._delegateEvent)}}releaseEvent(){if(this._delegateEvent){let t=this.view.renderer.stage();t&&t.off("*",this._delegateEvent)}}clear(){var t;this.releaseEvent(),this.transforms=null,this.elementMap=null,this.elements=null,this.graphicItem=null,this.animate=null,null===(t=this.group)||void 0===t||t.removeChild(this),this.group=null,super.clear()}prepareRelease(){var t;this.differ.setCurrentData(null),null===(t=this.animate)||void 0===t||t.stop(),this.elementMap.forEach(t=>t.diffState=l.OJ.exit),this._finalParameters=this.parameters()}release(){this.releaseEvent(),this.elements.forEach(t=>t.release()),this.differ=null,this.elements=[],this.elementMap.clear(),this._finalParameters=null,this.animate&&this.animate.release(),this.graphicItem&&(0,u.HX)(this.graphicItem),this.detachAll(),super.release()}}},9280:function(t,e,i){"use strict";i.d(e,{E:()=>c});var r=i(9038),s=i(7636);let n=(t,e,i)=>(t.fields=e||[],t.fname=i,t);var a=i(1130);let o=t=>e=>(0,a.Z)(e,t);var l=i(4659);let h=t=>{l.Y.getInstance().error(t)},u=t=>{let e=[],i=t.length,r,s,n,a=null,o=0,l="";t+="";let u=()=>{e.push(l+t.substring(r,s)),l="",r=s+1};for(r=0,s=0;s<i;s+=1)if("\\"===(n=t[s]))l+=t.substring(r,s),l+=t.substring(++s,++s),r=s;else if(n===a)u(),a=null,o=-1;else{if(a)continue;r===o&&'"'===n||r===o&&"'"===n?(r=s+1,a=n):"."!==n||o?"["===n?(s>r&&u(),o=r=s+1):"]"===n&&(o||h("Access path missing open bracket: "+t),o>0&&u(),o=0,r=s+1):s>r?u():r=s+1}return o&&h("Access path missing closing bracket: "+t),a&&h("Access path missing closing quote: "+t),s>r&&(s+=1,u()),e},d=(t,e,i={})=>{if((0,r.Z)(t))return t;let s=u(t),a=1===s.length?s[0]:t;return n((i&&i.get||o)(s),[a],e||a)},c=(t,e,i={})=>{if((0,s.Z)(t)){let r=t.map(t=>d(t,e,i));return t=>r.map(e=>e(t))}return d(t,e,i)}},1833:function(t,e,i){"use strict";i.d(e,{P:()=>s,p:()=>r});let r={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},s={size:8,stroke:"#000",lineWidth:1,zIndex:1}},1670:function(t,e,i){"use strict";var r,s,n,a;i.d(e,{X9:()=>r,bz:()=>l,n0:()=>o}),(n=r||(r={})).innerView="inner-view",n.axisContainer="axis-container",n.labelContainer="axis-label-container",n.tickContainer="axis-tick-container",n.tick="axis-tick",n.subTick="axis-sub-tick",n.label="axis-label",n.title="axis-title",n.gridContainer="axis-grid-container",n.grid="axis-grid",n.gridRegion="axis-grid-region",n.line="axis-line",n.background="axis-background",n.axisLabelBackground="axis-label-background",n.axisBreak="axis-break",n.axisBreakSymbol="axis-break-symbol",(a=s||(s={})).selected="selected",a.selectedReverse="selected_reverse",a.hover="hover",a.hoverReverse="hover_reverse";let o={[s.selectedReverse]:{},[s.selected]:{},[s.hover]:{},[s.hoverReverse]:{}},l=999},3924:function(t,e,i){"use strict";i.d(e,{b:()=>s});var r=i(7449);class s{isInValidValue(t){return t<0||t>1}getTickCoord(t){let{start:e}=this.attribute,i=this.getRelativeVector();return{x:e.x+i[0]*t,y:e.y+i[1]*t}}getRelativeVector(t){let{start:e,end:i}=this.attribute;return[i.x-e.x,i.y-e.y]}getVerticalVector(t,e=!1,i){let{verticalFactor:s=1}=this.attribute,n=this.getRelativeVector(),a=(0,r.Fv)(n),o=[a[1],-1*a[0]];return(0,r.bA)(o,t*(e?1:-1)*s)}}},5198:function(t,e,i){"use strict";i.d(e,{GK:()=>l,PY:()=>n,Ph:()=>a,nw:()=>h});var r=i(8654),s=i(6082);function n(t){t.forEach(t=>{if(t.rotatedBounds||!t.attribute.angle)return;let e=function(t){let e=t.AABBBounds;return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,centerX:t.attribute.x,centerY:t.attribute.y,angle:t.attribute.angle}}(t),i=(0,r.xj)({x:t.attribute.x,y:t.attribute.y},e.angle,{x:e.centerX,y:e.centerY}),s=i.x-e.centerX,n=i.y-e.centerY;e.x1+=s,e.x2+=s,e.y1+=n,e.y2+=n,e.centerX+=s,e.centerY+=n,t.rotatedBounds=e})}function a(t,e){var i,s;return(null===(i=t.OBBBounds)||void 0===i?void 0:i.empty())||(null===(s=e.OBBBounds)||void 0===s?void 0:s.empty())?(0,r.SX)(t.AABBBounds,e.AABBBounds,!1)&&(!t.rotatedBounds||!e.rotatedBounds||(0,r.nn)(t.rotatedBounds,e.rotatedBounds,!0)):t.OBBBounds.intersects(e.OBBBounds)}let o=Math.sin(Math.PI/10);function l(t,e=o){let i=!(0,s.Z)(t)&&0!==t,r=i?Math.cos(t):1;return i&&Math.abs(r)<=e}function h(t,e=o){let i=!(0,s.Z)(t)&&0!==t,r=i?Math.sin(t):0;return!i||Math.abs(r)<=e}},7192:function(t,e,i){"use strict";i.d(e,{Vu:()=>h,nZ:()=>u});var r=i(9367),s=i(9536),n=i(4683),a=i(5757),o=i(7307),l=i(1369);function h(){(0,r.M)(),(0,s.N)(),(0,n.v)(),(0,a.g)(),(0,o.k)()}function u(){(0,r.M)(),(0,l.N)()}},5236:function(t,e,i){"use strict";i.d(e,{m:()=>d});var r=i(5173),s=i(7623),n=i(9038),a=i(4546),o=i(59),l=i(7413);function h(t,e,i,r){let s;let{breakData:n}=t;if(n&&n()){let{breakDomains:t}=n(),a=e.domain();s=[];for(let e=0;e<a.length-1;e++)r(i,[a[e],a[e+1]]).forEach(e=>{t.some(t=>e>=t[0]&&e<=t[1])||s.push(e)});e.domain(a)}else s=r(i);return s}function u(t,e,i,r,s=!1){if(i&&!e.includes(t)){let i=e.length;if(i>1){s?e.push(t):e.unshift(t);for(let t=0;t<i;t++){let n=s?i-1-t:t;if(!r(e[n]))break;e.splice(n,1),t--,i--}}}}let d=(t,e)=>{var i,d,p,g;let m;if(!(0,r.z2)(t.type))return(0,o.KV)(t.domain());let f=t.range(),v=Math.abs(f[f.length-1]-f[0]);if(v<2)return(0,o.KV)([t.domain()[0]]);let{tickCount:y,forceTickCount:_,tickStep:b,noDecimals:x=!1,labelStyle:S,breakData:A}=e;if((0,s.Z)(b))p=t.stepTicks(b),m=(g=A&&A()?A().breakDomains:null)&&g.length?p.filter(t=>g.every(e=>t<e[0]||t>e[1])):p;else if((0,s.Z)(_))m=h(e,t,_,(e,i)=>i&&i.length?t.domain(i,!0).forceTicks(e):t.forceTicks(e));else if("d3"===e.tickMode)m=h(e,t,null!==(i=(0,n.Z)(y)?y({axisLength:v,labelStyle:S}):y)&&void 0!==i?i:5,(e,i)=>i&&i.length?t.domain(i,!0).d3Ticks(e,{noDecimals:x}):t.d3Ticks(e,{noDecimals:x}));else{let i=null!==(d=(0,n.Z)(y)?y({axisLength:v,labelStyle:S}):y)&&void 0!==d?d:5,r=(0,n.Z)(e.tickMode)?e.tickMode:void 0;m=h(e,t,i,(e,i)=>i&&i.length?t.domain(i,!0).ticks(e,{noDecimals:x,customTicks:r}):t.ticks(e,{noDecimals:x,customTicks:r}))}let k=t.domain();if(e.labelFirstVisible&&k[0]!==m[0]&&!m.includes(k[0])&&m.unshift(k[0]),e.labelLastVisible&&k[k.length-1]!==m[m.length-1]&&!m.includes(k[k.length-1])&&m.push(k[k.length-1]),e.sampling&&m.length>1&&("cartesian"===e.coordinateType||"polar"===e.coordinateType&&"radius"===e.axisOrientType)){let i;let{labelGap:r=4,labelFlush:s}=e;if(6*m.length>v){let r=[],s=Math.floor(6*m.length/v);m.forEach((t,e)=>{e%s!=0&&e!==m.length-1||r.push(t)}),i=(0,o.SZ)(t,r,e).map((t,e)=>({AABBBounds:t,value:r[e]}))}else i=(0,o.SZ)(t,m,e).map((t,e)=>({AABBBounds:t,value:m[e]}));let n=i[0],h=(0,a.Z$)(i),d=A&&A()?c.greedy:c.parity;for(;i.length>=3&&(0,l.A9)(i,r);)i=d(i,r);let p=e.labelFirstVisible,g=e.labelLastVisible;(0,l.qw)(n,h,r)&&i.includes(h)&&i.length>1&&p&&g&&(i.splice(i.indexOf(h),1),g=!1),u(n,i,p,t=>(0,l.qw)(t,n,r)),u(h,i,g,t=>(0,l.qw)(t,h,r)||!(!p||t===n)&&(0,l.qw)(t,n,r),!0);let f=i.map(t=>t.value);f.length<3&&s&&(f.length>1&&f.pop(),(0,a.Z$)(f)!==(0,a.Z$)(m)&&f.push((0,a.Z$)(m))),m=f}return(0,o.KV)(m)},c={parity:function(t){return t.filter((t,e)=>e%2==0)},greedy:function(t,e){let i;return t.filter((t,r)=>(!r||!(0,l.qw)(i,t,e))&&(i=t,!0))}}},59:function(t,e,i){"use strict";i.d(e,{KV:()=>a,SZ:()=>l,tz:()=>h});var r=i(1805),s=i(7393),n=i(8144);let a=t=>t.map((t,e)=>({index:e,value:t})),o=(t,e,i,r)=>i<t?Math.max(t-e/2,i):i>t?Math.min(t-e/2,i-e):i<r?i:i-e,l=(t,e,i)=>{var a;let{labelStyle:l,axisOrientType:h,labelFlush:u,labelFormatter:d,startAngle:c=0}=i,p=null!==(a=l.angle)&&void 0!==a?a:0;"vertical"===l.direction&&(p+=(0,r.M4)(90));let g=["bottom","top"].includes(h),m=["left","right"].includes(h),f=1,v=0;g||(m?(f=0,v=1):c&&(f=Math.cos(c),v=-Math.sin(c)));let y=(0,n.gM)(l),_=t.range();return e.map((i,r)=>{var n,a;let h=d?d(i):`${i}`,{width:c,height:b}=y.quickMeasure(h),x=Math.max(c,12),S=Math.max(b,12),A=t.scale(i),k=f*A,w=v*A,C,T,E=k,M=w;u&&g&&0===r?E=o(k,x,_[0],_[_.length-1]):u&&g&&r===e.length-1?E=o(k,x,_[_.length-1],_[0]):C=null!==(n=l.textAlign)&&void 0!==n?n:"center","right"===C?E-=x:"center"===C&&(E-=x/2),u&&m&&0===r?M=o(w,S,_[0],_[_.length-1]):u&&m&&r===e.length-1?M=o(w,S,_[_.length-1],_[0]):T=null!==(a=l.textBaseline)&&void 0!==a?a:"middle","bottom"===T?M-=S:"middle"===T&&(M-=S/2);let B=(new s.FB).set(E,M,E+x,M+S);return p&&B.rotate(p,k,w),B})},h=t=>["bottom","top","z"].includes(t)},7413:function(t,e,i){"use strict";i.d(e,{A9:()=>g,cN:()=>u,qw:()=>p,st:()=>c,uX:()=>h,uf:()=>l,zl:()=>d});var r=i(325),s=i(1805),n=i(3745),a=i(1833),o=i(5198);function l(t={}){var e,i;let{style:s={},angle:n=.5*Math.PI}=t,o=(0,r.Z)({},a.P,s),h=null!==(e=o.size)&&void 0!==e?e:a.P.size;return Object.assign(Object.assign({},o),{symbolType:null!==(i=o.symbolType)&&void 0!==i?i:`M ${-h/2} ${h*Math.sin(n)} L ${h/2} ${-h*Math.sin(n)}`,symbolSize:h})}function h(t){let e={};return(0,n.Ck)(t,t=>{"group"!==t.type&&t.id&&(e[t.id]=t)}),e}function u(t,e){return{x:t.x+e[0],y:t.y+e[1]}}function d(t,e,i,r,n){let a=[],o=n-r;for(let n=0;n<e;n++){let l=r+n*o/e;a.push((0,s.op)(t,i,l))}return a}function c(t,e){let i="";return 0===t.length||(t.forEach((t,e)=>{0===e?i=`M${t.x},${t.y}`:i+=`L${t.x},${t.y}`}),e&&(i+="Z")),i}function p(t,e,i){var r;let s,n;let a=null===(r=t.attribute)||void 0===r?void 0:r.angle,l=(t,e,i)=>(s=t.AABBBounds,i>Math.max((n=e.AABBBounds).x1-s.x2,s.x1-n.x2,n.y1-s.y2,s.y1-n.y2));return(0,o.nw)(a,Number.EPSILON)?l(t,e,i):(s=t.OBBBounds,n=e.OBBBounds,!s||!n||s.empty()||n.empty()?l(t,e,i):s.intersects(n))}function g(t,e){for(let i,r=1,s=t.length,n=t[0];r<s;n=i,++r)if(p(n,i=t[r],e))return!0;return!1}},9167:function(t,e,i){"use strict";var r,s;i.d(e,{$M:()=>l,Di:()=>a,HW:()=>r,Ze:()=>u,eV:()=>c,gB:()=>p,iR:()=>o,m3:()=>d,n0:()=>h,v2:()=>n});let n=-.5*Math.PI,a=1.5*Math.PI,o="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",l=14;(s=r||(r={})).selected="selected",s.selectedReverse="selected_reverse",s.hover="hover",s.hoverReverse="hover_reverse";let h={[r.selectedReverse]:{},[r.selected]:{},[r.hover]:{},[r.hoverReverse]:{}},u={container:"",width:30,height:30,style:{}},d="scrollDown",c="scrollDrag",p="scrollUp"},3e3:function(t,e,i){"use strict";i.d(e,{k:()=>u});var r=i(411),s=i(3),n=i(5890),a=i(9038),o=i(325),l=i(6082);let h=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class u extends r.ZA{constructor(t,e){super(t),this._skipRenderAttributes=h,(null==e?void 0:e.mode)&&(this.mode=e.mode,this.setMode(e.mode)),(null==e?void 0:e.skipDefault)&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=t,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(t,e,i,r){let s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);if(s)return this._setAttributes(s,i);(0,n.Z)(this.attribute[t])&&(0,n.Z)(e)&&!(0,a.Z)(this.attribute[t])&&!(0,a.Z)(e)?(0,o.Z)(this.attribute[t],e):this.attribute[t]=e,this._skipRenderAttributes.includes(t)||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(t,e,i){return t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t,this._setAttributes(t,e)}_setAttributes(t,e){let i=Object.keys(t);this._mergeAttributes(t,i),i.every(t=>this._skipRenderAttributes.includes(t))||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(i))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(t,e){(0,l.Z)(e)&&(e=Object.keys(t));for(let i=0;i<e.length;i++){let r=e[i];!(0,n.Z)(this.attribute[r])||(0,a.Z)(this.attribute[r])||(0,a.Z)(t[r])?this.attribute[r]=t[r]:(0,o.Z)(this.attribute[r],t[r])}}bindEvents(){}_getNodeId(t){var e;return`${null!==(e=this.id)&&void 0!==e?e:this._uid}-${this.name}-${t}`}_dispatchEvent(t,e){var i;let r=new s.A(t,e);r.manager=null===(i=this.stage)||void 0===i?void 0:i.eventSystem.manager,this.dispatchEvent(r)}}},4309:function(t,e,i){"use strict";i.d(e,{E:()=>K});var r=i(3872),s=i(7578),n=i(8908),a=i(325),o=i(1121),l=i(6082),h=i(9038),u=i(7623),d=i(4154),c=i(7636),p=i(9904),g=i(8654),m=i(3e3),f=i(9921),v=i(2450);let y=["#ffffff","#000000"];function _(t,e,i,r,s,n){if("string"!=typeof t||"string"!=typeof e)return t;let a=new f.Il(t).toHex(),o=new f.Il(e).toHex();return b(a,o,i,r,n)?a:function(t,e,i,r,s,n){let a=[];for(let o of(s&&(s instanceof Array?a.push(...s):a.push(s)),a.push(...y),a))if(t!==o&&b(o,e,i,r,n))return o}(a,o,i,r,s,n)}function b(t,e,i,r,s){if("lightness"===s){let i=f.Il.getColorBrightness(new f.Il(e));return .5>f.Il.getColorBrightness(new f.Il(t))?i>=.5:i<.5}return r?x(t,e)>r:"largeText"===i?x(t,e)>3:x(t,e)>4.5}function x(t,e){let i=S(t),r=S(e);return((i>r?i:r)+.05)/((i>r?r:i)+.05)}function S(t){let e=(0,v.Z)(t),i=e[0]/255,r=e[1]/255,s=e[2]/255;return .2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}function A(t,e,i,r){let s;switch(t){case"base":s=e;break;case"invertBase":s=i;break;case"similarBase":s=r}return s}var k=i(3745),w=i(8144),C=i(9167),T=i(3529);function E(t,e,i,r=!0,s=0){let n=i;s>0&&(n={x1:i.x1-s,x2:i.x2+s,y1:i.y1-s,y2:i.y2+s}),n=(0,T.dK)(t,n);let a=e.outOfBounds(n);return(!r||!a)&&(a&&(n=(0,T.nR)(t,n)),!e.getRange(n))}function M(t,e,i,r=[],s=!0,n=0,a=!1){let o=r.filter(t=>(0,u.Z)(t));for(let r=0;r<o.length;r++){let l;if((l=a?i:i.clone()).setAttributes(o[r]),E(t,e,l.AABBBounds,s,n))return e.setRange((0,T.dK)(t,l.AABBBounds,!0)),o[r]}return!1}let B=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],D=["top","inside-top","inside"];function O(t,e,i,r={}){let{x1:s,x2:n,y1:a,y2:o}=t.AABBBounds,{top:l=0,left:h=0,right:u=0,bottom:d=0}=r,c=Math.min(s,n),p=Math.max(s,n),g=Math.min(a,o),m=Math.max(a,o),f=e+u,v=i+d,y=0,_=0;return c<0-h?y=-c:p>f&&(y=f-p),g<0-l?_=-g:m>v&&(_=v-m),{dx:y,dy:_}}var P=i(3337),I=i(4546),R=i(8378);let L={fadeIn:(t={})=>{var e,i,r;return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:null!==(e=t.opacity)&&void 0!==e?e:1,fillOpacity:null!==(i=t.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(r=t.strokeOpacity)&&void 0!==r?r:1}}},fadeOut:(t={})=>{var e,i,r;return{from:{opacity:null!==(e=t.opacity)&&void 0!==e?e:1,fillOpacity:null!==(i=t.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(r=t.strokeOpacity)&&void 0!==r?r:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}}};function F(t,e){var i,r;return null!==(r=null===(i=L[e])||void 0===i?void 0:i.call(L,t))&&void 0!==r?r:{from:{},to:{}}}let j=(t,e,i,r)=>{let s=Object.assign({},t.attribute),n=Object.assign({},e.attribute);return(0,I.IX)(null==r?void 0:r.excludeChannels).forEach(t=>{delete n[t]}),Object.keys(n).forEach(t=>{i&&!i.includes(t)&&delete n[t]}),{from:s,to:n}};function Z(t,e,i,r){t.attribute.text!==e.attribute.text&&(0,R.Z)(Number(t.attribute.text)*Number(e.attribute.text))&&t.animate().play(new P.Bm({text:t.attribute.text},{text:e.attribute.text},i,r))}let H={mode:"same-time",duration:300,easing:"linear"};var N=i(3901),z=i(9367),V=i(5757),U=i(4683),W=i(9536),G=i(5859);let $=(t,e)=>Math.ceil(t)>Math.floor(e),X=([t,e],[i,r])=>r>t&&e>i;var Y=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};(0,z.M)(),(0,V.g)(),(0,U.v)(),(0,W.N)();class K extends m.k{setBitmap(t){this._bitmap=t}setBitmapTool(t){this._bmpTool=t}constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,a.Z)({},K.defaultAttributes,Y(t,["data"])))),this.name="label",this._onHover=t=>{let e=t.target;e===this._lastHover||(0,o.Z)(e.states)||(e.addState(C.HW.hover,!0),(0,k.Ck)(this,t=>{t===e||(0,o.Z)(t.states)||t.addState(C.HW.hoverReverse,!0)}),this._lastHover=e)},this._onUnHover=t=>{this._lastHover&&((0,k.Ck)(this,t=>{(0,o.Z)(t.states)||(t.removeState(C.HW.hoverReverse),t.removeState(C.HW.hover))}),this._lastHover=null)},this._onClick=t=>{let e=t.target;if(this._lastSelect===e&&e.hasState("selected"))return this._lastSelect=null,void(0,k.Ck)(this,t=>{(0,o.Z)(t.states)||(t.removeState(C.HW.selectedReverse),t.removeState(C.HW.selected))});(0,o.Z)(e.states)||(e.addState(C.HW.selected,!0),(0,k.Ck)(this,t=>{t===e||(0,o.Z)(t.states)||t.addState(C.HW.selectedReverse,!0)}),this._lastSelect=e)},this._handleRelatedGraphicSetState=t=>{var e,i,s,n,a;if((null===(e=t.detail)||void 0===e?void 0:e.type)===r.Gk.STATE||(null===(i=t.detail)||void 0===i?void 0:i.type)===r.Gk.ANIMATE_UPDATE&&(null===(s=t.detail.animationState)||void 0===s?void 0:s.isFirstFrameOfStep)){let e=null!==(a=null===(n=t.target)||void 0===n?void 0:n.currentStates)&&void 0!==a?a:[],i=this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(t.target)];this.updateStatesOfLabels(i,e)}}}labeling(t,e,i,r){}_getLabelLinePoints(t,e){return(0,N.XI)(t.AABBBounds,null==e?void 0:e.AABBBounds)}_createLabelLine(t,e){let i=this._getLabelLinePoints(t,e);if(i){let r=s.i.line({points:i}),{line:a={}}=t.attribute;if(a.customShape){let i=a.customShape;r.pathProxy=r=>i({text:t,baseMark:e},r,new n.r)}return e&&e.attribute.fill&&r.setAttribute("stroke",e.attribute.fill),this.attribute.line&&!(0,o.Z)(this.attribute.line.style)&&r.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(r),r}}render(){if(this._prepare(),(0,l.Z)(this._idToGraphic)||this._isCollectionBase&&(0,l.Z)(this._idToPoint))return;let{overlap:t,smartInvert:e,dataFilter:i,customLayoutFunc:r,customOverlapFunc:s}=this.attribute,n=this.attribute.data;if((0,h.Z)(i)&&(n=i(n)),n&&n.length){let t=new Set;n=n.filter(e=>!t.has(e.id)&&t.add(e.id))}let a=this._initText(n);a=(0,h.Z)(r)?r(n,a,this.getRelatedGraphic.bind(this),this._isCollectionBase?t=>this._idToPoint.get(t.id):null,this):this._layout(a),(0,h.Z)(s)?a=s(a,this.getRelatedGraphic.bind(this),this._isCollectionBase?t=>this._idToPoint.get(t.id):null,this):!1!==t&&(a=this._overlapping(a)),(0,h.Z)(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(a,this.getRelatedGraphic.bind(this),this._isCollectionBase?t=>this._idToPoint.get(t.id):null,this),a&&a.length&&a.forEach(t=>{this._bindEvent(t),this._setStatesOfText(t)}),!1!==e&&this._smartInvert(a),this._renderLabels(a)}_bindEvent(t){if(this.attribute.disableTriggerEvent||!t)return;let{hover:e,select:i}=this.attribute;e&&(t.addEventListener("pointermove",this._onHover),t.addEventListener("pointerout",this._onUnHover)),i&&t.addEventListener("pointerdown",this._onClick)}_setStatesOfText(t){if(!t)return;let e=this.attribute.state;e&&!(0,o.Z)(e)&&(t.states=e)}_setStatesOfLabelLine(t){if(!t)return;let e=this.attribute.labelLineState;e&&!(0,o.Z)(e)&&(t.states=e)}_createLabelText(t){var e,i;let r=Object.assign(Object.assign({},null===(i=null===(e=this.stage)||void 0===e?void 0:e.getTheme())||void 0===i?void 0:i.text),t);return(0,w.vS)(r,"textType")}_prepare(){var t,e;let i=[];if(((0,h.Z)(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():(0,k.tP)(this.getRootNode(),this.attribute.baseMarkGroupName)).forEach(t=>{"willRelease"!==t.releaseStatus&&i.push(t)}),null===(t=this._idToGraphic)||void 0===t||t.clear(),null===(e=this._idToPoint)||void 0===e||e.clear(),this._baseMarks=i,this._isCollectionBase="line-data"===this.attribute.type,!i||0===i.length)return;let{data:r}=this.attribute;if(r&&0!==r.length){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let t=0;for(let e=0;e<i.length;e++){let s=i[e],n=(0,N.CB)(s);if(n&&n.length)for(let e=0;e<n.length;e++){let i=r[t];i&&n[e]&&((0,u.Z)(i.id)||(i.id=`vrender-component-${this.name}-${t}`),this._idToPoint.set(i.id,n[e]),this._idToGraphic.set(i.id,s)),t++}}}else for(let t=0;t<i.length;t++){let e=r[t],s=i[t];e&&s&&((0,u.Z)(e.id)||(e.id=`vrender-component-${this.name}-${t}`),this._idToGraphic.set(e.id,s))}if(!1!==this.attribute.animation){let{animation:t,animationEnter:e,animationExit:i,animationUpdate:r}=this.attribute,s=(0,d.Z)(t)?t:{};this._animationConfig={enter:!1!==e&&(0,a.Z)({},H,s,null!=e?e:{}),exit:!1!==i&&(0,a.Z)({},H,s,null!=i?i:{}),update:!1!==r&&((0,c.Z)(r)?r:(0,a.Z)({},H,s,null!=r?r:{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}getRelatedGraphic(t){return this._idToGraphic.get(t.id)}_initText(t=[]){let{textStyle:e={}}=this.attribute,i=[];for(let r=0;r<t.length;r++){let s=t[r],n=this.getRelatedGraphic(s);if(!n)continue;let a=Object.assign(Object.assign({fill:this._isCollectionBase?(0,c.Z)(n.attribute.stroke)?n.attribute.stroke.find(t=>!!t&&!0!==t):n.attribute.stroke:n.attribute.fill},e),s),o=this._createLabelText(a);i.push(o)}return i}_layout(t){let{position:e,offset:i}=this.attribute;for(let r=0;r<t.length;r++){let s=t[r];if(!s)return;let n=s.attribute,a=this.getRelatedGraphic(n);if(!a)continue;s.attachedThemeGraphic=this;let o=this.getGraphicBounds(s);s.attachedThemeGraphic=null;let l=(0,h.Z)(e)?e(n):e,u=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(n.id),l):this.getGraphicBounds(a,{x:n.x,y:n.y},l),d=this.labeling(o,u,l,i);d&&s.setAttributes(d)}return t}_overlapping(t){var e,i,r;if(0===t.length)return[];let s=(0,d.Z)(this.attribute.overlap)?this.attribute.overlap:{},n=this.getBaseMarkGroup(),a=null!==(e=s.size)&&void 0!==e?e:{width:null!==(i=null==n?void 0:n.AABBBounds.width())&&void 0!==i?i:0,height:null!==(r=null==n?void 0:n.AABBBounds.height())&&void 0!==r?r:0};if(0===a.width||0===a.height)return t;let{strategy:o,priority:l}=s,h=this._bmpTool||(0,T.OM)(a.width,a.height),u=this._bitmap||h.bitmap();return l&&(t=t.sort((t,e)=>l(e.attribute.data)-l(t.attribute.data))),"shiftY"===(null==o?void 0:o.type)?this._overlapGlobal(t,s,h,u):this._overlapByStrategy(t,s,h,u)}_overlapGlobal(t,e,i,r){let s=t.filter(t=>t.attribute.visible&&0!==t.attribute.opacity),{clampForce:n=!0,hideOnHit:a=!0,overlapPadding:o,strategy:l}=e;if(n)for(let e=0;e<s.length;e++){let r=t[e],{dx:s=0,dy:n=0}=O(r,i.width,i.height,i.padding);0===s&&0===n||(r.setAttributes({x:r.attribute.x+s,y:r.attribute.y+n}),r._isClamped=!0)}s=function(t,e){let{maxY:i=Number.MAX_VALUE,labelling:r,globalShiftY:s={enable:!0,maxIterations:10,maxError:.1,padding:1}}=e,n=t.length;if(n<=1)return t;let a=new Map,o=new Map,l=t=>o.get(t).y1Initial,h=t=>o.get(t).height,u=t=>o.get(t).y1,d=t=>o.get(t).x,c=t=>o.get(t).x1,p=t=>o.get(t).x2,g=t=>o.get(t).attempts,m=(t,e)=>{o.get(t).y1=e},f=(t,e)=>{o.get(t).attempts=e};for(let e of(t.sort((t,e)=>t.attribute.x-e.attribute.x),t)){let{y1:t,y2:i,x1:r,x2:s}=e.AABBBounds,{x:n,y:l}=e.attribute;o.set(e,{y1Initial:t,y1:t,y2:i,y:l,height:i-t,x1:r,x2:s,x:n,attempts:0});let h=!1;for(let[t,i]of a){let{start:o,end:l}=t;if(r>=o&&s<=l)i.push(e),h=!0;else if((0,G.Yt)(n,d(i[0]),void 0,5)){let n={start:Math.min(o,r),end:Math.max(l,s)};i.push(e),a.set(n,i),a.delete(t),h=!0}else if(function(t,e){let[i,r]=t,[s,n]=e;return Math.max(0,Math.min(r,n)-Math.max(i,s))}([o,l],[r,s])/(l-o)>.5){let n={start:Math.min(o,r),end:Math.max(l,s)};i.push(e),a.set(n,i),a.delete(t),h=!0}if(h)break}h||a.set({start:r,end:s},[e])}for(let t of a.values())t.sort((t,e)=>l(t)-l(e)),function(t){for(let e=t.length-1;e>=0;e--){let s=t[e],n=t[e-1],a=t[e+1];if(n&&$(u(n)+h(n),u(s))||0===u(s)&&s._isClamped){let{y:t}=r(s);a&&$(t+h(s)/2,u(a))||t+h(s)/2<=i&&m(s,u(s)+t-o.get(s).y)}}}(t);if(!1!==s.enable){let{maxIterations:e=10,maxError:r=.1,padding:a=1,maxAttempts:o=1e3,deltaYTolerance:d=Number.MAX_VALUE}=s;for(let s=0;s<e;s++){t.sort((t,e)=>l(t)-l(e));let e=0;for(let r=0;r<n-1;r++){let s=t[r];if(g(s)>=o)continue;let n,v=r+1;for(;(n=t[v])&&!X([c(s),p(s)],[c(n),p(n)]);)v+=1;if(n){let t=u(s),r=h(s),o=u(n),c=o-(t+r);if(c<a){let r=(a-c)/2;if(e=Math.max(e,r),t+r+h(n)>i){let e=t-(a-c);Math.abs(l(s)-e)<=d&&(m(s,e),f(s,g(s)+1))}else if(t-r<0){let t=o+(a-c);Math.abs(l(n)-t)<=d&&(m(n,t),f(n,g(n)+1))}else{let e=t-r,i=l(s)-e,a=o+r,h=l(n)-a;Math.abs(i)<=d&&Math.abs(h)<=d&&(m(s,e),m(n,a),f(s,g(s)+1),f(n,g(n)+1))}}}}if(e<r)break}}for(let e of t){let t=e.attribute.y+u(e)-l(e);e.setAttribute("y",t)}let v=[];t.sort((t,e)=>t.attribute.x-e.attribute.x);let y=0,_=t.length-1;for(;y<=_;)y===_?v.push(t[y]):(v.push(t[y]),v.push(t[_])),y++,_--;return v}(s,Object.assign(Object.assign({maxY:i.height},l),{labelling:t=>{let e=this.getRelatedGraphic(t.attribute),i=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(t.attribute.id)):this.getGraphicBounds(e,t);return this.labeling(t.AABBBounds,i,"bottom",this.attribute.offset)}}));for(let t=0;t<s.length;t++){let e=s[t],l=e.AABBBounds,h=(0,T.dK)(i,l,!0);if(E(i,r,l,n,o))r.setRange(h);else{if(n&&this._processClampForce(e,i,r,o))continue;a?e.setAttributes({visible:!1}):r.setRange(h)}}return s}_processClampForce(t,e,i,r=0){let{dy:s=0,dx:n=0}=O(t,e.width,e.height,e.padding);if(0===n&&0===s){if(E(e,i,t.AABBBounds,!1,r))return i.setRange((0,T.dK)(e,t.AABBBounds,!0)),!0}else if(E(e,i,{x1:t.AABBBounds.x1+n,x2:t.AABBBounds.x2+n,y1:t.AABBBounds.y1+s,y2:t.AABBBounds.y2+s}))return t.setAttributes({x:t.attribute.x+n,y:t.attribute.y+s}),i.setRange((0,T.dK)(e,t.AABBBounds,!0)),!0;return!1}_overlapByStrategy(t,e,i,r){var s;let{avoidBaseMark:n,strategy:a=[],hideOnHit:o=!0,clampForce:l=!0,avoidMarks:u=[],overlapPadding:d}=e,c=[],m=a.some(t=>"bound"===t.type);n&&(null===(s=this._baseMarks)||void 0===s||s.forEach(t=>{t.AABBBounds&&r.setRange((0,T.dK)(i,t.AABBBounds,!0))})),u.length>0&&u.forEach(t=>{(0,p.Z)(t)?(0,k.Dh)(this.getRootNode(),t).forEach(t=>{t.AABBBounds&&r.setRange((0,T.dK)(i,t.AABBBounds,!0))}):t.AABBBounds&&r.setRange((0,T.dK)(i,t.AABBBounds,!0))});for(let e=0;e<t.length;e++){if(!1===t[e].attribute.visible)continue;let s=t[e],n=this.getRelatedGraphic(s.attribute);if(s.update(),!(0,g.SX)(n.AABBBounds,{x1:0,x2:i.width,y1:0,y2:i.height},!0))continue;if(E(i,r,s.AABBBounds,l,d)&&(!m||m&&n&&n.AABBBounds&&this._canPlaceInside(s.AABBBounds,n.AABBBounds))){r.setRange((0,T.dK)(i,s.AABBBounds,!0)),c.push(s);continue}let u=!1;for(let o=0;o<a.length;o++)if(!1!==(u=function(t,e,i,r,s,n,a){var o,l;let u=null===(o=r.overlap)||void 0===o?void 0:o.clampForce,d=null===(l=r.overlap)||void 0===l?void 0:l.overlapPadding;if("bound"===i.type||"position"===i.type){if((0,h.Z)(a)){let o=(((0,h.Z)(i.position)?i.position(s.attribute):i.position)||("rect"===r.type?D:B)).map(t=>a(s.AABBBounds,n,t,r.offset));return M(t,e,s,o,u,d,!1===i.restorePosition)}return!1}if("moveY"===i.type){let r=(i.offset?(0,h.Z)(i.offset)?i.offset(s.attribute):i.offset:[]).map(t=>({x:s.attribute.x,y:s.attribute.y+t}));return M(t,e,s,r,u,d)}if("moveX"===i.type){let r=(i.offset?(0,h.Z)(i.offset)?i.offset(s.attribute):i.offset:[]).map(t=>({x:s.attribute.x+t,y:s.attribute.y}));return M(t,e,s,r,u,d)}return!1}(i,r,a[o],this.attribute,s,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(t[e].attribute.id)):this.getGraphicBounds(n,t[e].attribute),this.labeling))){s.setAttributes({x:u.x,y:u.y}),c.push(s);break}if(!u&&l&&this._processClampForce(s,i,r,d)){c.push(s);continue}u||o||c.push(s)}return c}getBaseMarkGroup(){let{baseMarkGroupName:t}=this.attribute;if(t)return this.getRootNode().find(e=>e.name===t,!0)}getGraphicBounds(t,e={},i){if(t){if(!1!==t.attribute.visible)return t.AABBBounds;let{x:e,y:i}=t.attribute;return{x1:e,x2:e,y1:i,y2:i}}if(e&&i&&"inside-middle"===i){let{x:t,y:i,x1:r=t,y1:s=i}=e;return{x1:(t+r)/2,x2:(t+r)/2,y1:(i+s)/2,y2:(i+s)/2}}let{x:r,y:s}=e;return{x1:r,x2:r,y1:s,y2:s}}_renderLabels(t){var e;let{syncState:i}=this.attribute,r=new Map,s=this._graphicToText||new Map,n=[],a=[],{visible:o}=null!==(e=this.attribute.line)&&void 0!==e?e:{};t&&t.forEach((t,e)=>{var l;let h;let u=this.getRelatedGraphic(t.attribute),d=this._isCollectionBase?t.attribute.id:u,c=(null==s?void 0:s.get(d))?"update":"enter";if(o&&(h=this._createLabelLine(t,u)),i&&this.updateStatesOfLabels([h?{text:t,labelLine:h}:{text:t}],null!==(l=u.currentStates)&&void 0!==l?l:[]),"enter"===c)n.push(t),r.set(d,h?{text:t,labelLine:h}:{text:t}),this._addLabel({text:t,labelLine:h},n,a,e);else if("update"===c){let e=s.get(d);s.delete(d),r.set(d,e),this._updateLabel(e,{text:t,labelLine:h})}}),this._removeLabel(s),this._graphicToText=r}_addLabel(t,e,i,r){let{text:s,labelLine:n}=t,a=this.getRelatedGraphic(s.attribute);if(this._syncStateWithRelatedGraphic(a),!1!==this._enableAnimation&&!1!==this._animationConfig.enter){if(a){let{from:t,to:o}=F(s.attribute,"fadeIn");s&&this.add(s),n&&(i.push(n),this.add(n)),this._animationConfig.enter.duration>0&&a.once("animate-bind",l=>{s.setAttributes(t),n&&n.setAttributes(t);let h=this._afterRelatedGraphicAttributeUpdate(s,e,n,i,r,a,o,this._animationConfig.enter);a.on("afterAttributeUpdate",h)})}}else s&&this.add(s),n&&this.add(n)}_updateLabel(t,e){let{text:i,labelLine:r}=t,{text:s,labelLine:n}=e;if(!1!==this._enableAnimation&&!1!==this._animationConfig.update){let{duration:e,easing:a}=this._animationConfig.update;(function(t,e,i){if(!(0,c.Z)(i)){let{duration:r,easing:s,increaseEffect:n=!0}=i;return t.animate().to(e.attribute,r,s),void(n&&"text"===t.type&&"text"===e.type&&Z(t,e,r,s))}i.forEach(i=>{let{duration:r,easing:s,increaseEffect:n=!0,channel:a}=i,{to:l}=j(t,e,a,i.options);(0,o.Z)(l)||t.animate().to(l,r,s),n&&"text"===t.type&&"text"===e.type&&Z(t,e,r,s)})})(i,s,this._animationConfig.update),r&&n&&t.labelLine.animate().to(n.attribute,e,a)}else t.text.setAttributes(s.attribute),r&&n&&t.labelLine.setAttributes(n.attribute)}_removeLabel(t){let e=t=>{this.removeChild(t.text),t.labelLine&&this.removeChild(t.labelLine)};if(!1!==this._enableAnimation&&!1!==this._animationConfig.exit){let{duration:i,easing:r}=this._animationConfig.exit;t.forEach(t=>{var s;null===(s=t.text)||void 0===s||s.animate().to(F(t.text.attribute,"fadeOut").to,i,r).onEnd(()=>{e(t)})})}else t.forEach(t=>{e(t)})}updateStatesOfLabels(t,e){t.forEach(t=>{t&&(t.text&&t.text.useStates(e),t.labelLine&&t.labelLine.useStates(e))})}_syncStateWithRelatedGraphic(t){this.attribute.syncState&&t&&t.on("afterAttributeUpdate",this._handleRelatedGraphicSetState)}_afterRelatedGraphicAttributeUpdate(t,e,i,s,n,a,o,{mode:l,duration:h,easing:u,delay:d}){let c=p=>{var g,m,f;let{detail:v}=p;if(!v)return{};let y=null===(g=v.animationState)||void 0===g?void 0:g.step;if(!(v.type===r.Gk.ANIMATE_UPDATE&&y&&!("wait"===y.type&&null==(null===(m=y.prev)||void 0===m?void 0:m.type))))return{};if(v.type===r.Gk.ANIMATE_END)return t.setAttributes(o),void(i&&i.setAttributes(o));let _=()=>{a&&(a.onAnimateBind=void 0,a.removeEventListener("afterAttributeUpdate",c))};switch(l){case"after":v.animationState.end&&(t.animate({onStart:_}).wait(d).to(o,h,u),i&&i.animate().wait(d).to(o,h,u));break;case"after-all":n===e.length-1&&v.animationState.end&&(e.forEach(t=>{t.animate({onStart:_}).wait(d).to(o,h,u)}),s.forEach(t=>{t.animate().wait(d).to(o,h,u)}));break;default:if(this._isCollectionBase){let e=this._idToPoint.get(t.attribute.id);!e||t.animates&&t.animates.has("label-animate")||!a.containsPoint(e.x,e.y,r.LZ.LOCAL,null===(f=this.stage)||void 0===f?void 0:f.getPickerService())||(t.animate({onStart:_}).wait(d).to(o,h,u),i&&i.animate().wait(d).to(o,h,u))}else v.animationState.isFirstFrameOfStep&&(t.animate({onStart:_}).wait(d).to(o,h,u),i&&i.animate().wait(d).to(o,h,u))}};return c}_smartInvert(t){var e,i,r,s,n,a,o;let l=(0,d.Z)(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:h,contrastRatiosThreshold:u,alternativeColors:c,mode:p,interactInvertType:g}=l,m=null!==(e=l.fillStrategy)&&void 0!==e?e:"invertBase",f=null!==(i=l.strokeStrategy)&&void 0!==i?i:"base",v=null!==(r=l.brightColor)&&void 0!==r?r:"#ffffff",y=null!==(s=l.darkColor)&&void 0!==s?s:"#000000",x=null!==(n=l.outsideEnable)&&void 0!==n&&n;if("null"!==m||"null"!==f)for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;let r=this.getRelatedGraphic(i.attribute),s=r.attribute.fill,n=i.attribute.fill;if((0,d.Z)(s)&&s.gradient){let t=null===(o=null===(a=s.stops)||void 0===a?void 0:a[0])||void 0===o?void 0:o.color;t&&(s=t,n=t)}let l=_(n,s,h,u,c,p),S=b(l,v)?v:y,k=this._canPlaceInside(i.AABBBounds,r.AABBBounds),w=!k&&i.AABBBounds&&r.AABBBounds&&r.AABBBounds.intersects(i.AABBBounds);if(k||x||w&&"inside"===g){let t=A(m,s,l,S);if(t&&i.setAttributes({fill:t}),0===i.attribute.lineWidth||0===i.attribute.strokeOpacity)continue;let e=A(f,s,l,S);e&&i.setAttributes({stroke:e})}else if(w&&"none"!==g){if(0===i.attribute.lineWidth||0===i.attribute.strokeOpacity)continue;if(i.attribute.stroke){i.setAttributes({fill:_(i.attribute.fill,i.attribute.stroke,h,u,c,p)});continue}let t=A(m,s,l,S);t&&i.setAttributes({fill:t});let e=A(f,s,l,S);e&&i.setAttributes({stroke:e})}}}_canPlaceInside(t,e){return!(!t||!e)&&e.encloses(t)}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}K.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-2,-1,-2,-1]},offset:0,pickable:!1}},3309:function(t,e,i){"use strict";i.d(e,{X:()=>n,a:()=>s});let r={},s=(t,e)=>{r[t]=e},n=t=>r[t]},3529:function(t,e,i){"use strict";i.d(e,{OM:()=>a,dK:()=>l,nR:()=>o});var r=i(3604);let s=new Uint32Array(33),n=new Uint32Array(33);n[0]=0,s[0]=~n[0];for(let t=1;t<=32;++t)n[t]=n[t-1]<<1|1,s[t]=~n[t];function a(t,e,i={top:0,left:0,right:0,bottom:0}){let{top:r=0,left:o=0,right:l=0,bottom:h=0}=i,u=Math.max(1,Math.sqrt(t*e/1e6)),d=~~((t+o+l+u)/u),c=~~((e+r+h+u)/u),p=t=>~~(t/u);return p.bitmap=()=>(function(t,e){let i=new Uint32Array(~~((t*e+32)/32));return{array:i,get:(e,r)=>{let s=r*t+e;return i[s>>>5]&1<<(31&s)},set:(e,r)=>{var s,n;let a=r*t+e;s=a>>>5,n=1<<(31&a),i[s]|=n},clear:(e,r)=>{var s,n;let a=r*t+e;s=a>>>5,n=~(1<<(31&a)),i[s]&=n},getRange:({x1:r,y1:a,x2:o,y2:l})=>{if(o<0||l<0||r>t||a>e)return!0;let h,u,d,c,p=l;for(;p>=a;--p)if(h=p*t+r,u=p*t+o,(d=h>>>5)==(c=u>>>5)){if(i[d]&s[31&h]&n[1+(31&u)])return!0}else{if(i[d]&s[31&h]||i[c]&n[1+(31&u)])return!0;for(let t=d+1;t<c;++t)if(i[t])return!0}return!1},setRange:({x1:r,y1:a,x2:o,y2:l})=>{var h,u,d,c;let p,g,m,f,v;if(!(o<0)&&!(l<0)&&!(r>t)&&!(a>e))for(;a<=l;++a)if(p=a*t+r,g=a*t+o,(m=p>>>5)==(f=g>>>5))h=s[31&p]&n[1+(31&g)],i[m]|=h;else for(u=s[31&p],i[m]|=u,d=n[1+(31&g)],i[f]|=d,v=m+1;v<f;++v)c=v,i[c]|=0xffffffff},clearRange:({x1:e,y1:r,x2:a,y2:o})=>{var l,h,u,d;let c,p,g,m,f;for(;r<=o;++r)if(c=r*t+e,p=r*t+a,(g=c>>>5)==(m=p>>>5))l=n[31&c]|s[1+(31&p)],i[g]&=l;else for(h=n[31&c],i[g]&=h,u=s[1+(31&p)],i[m]&=u,f=g+1;f<m;++f)d=f,i[d]&=0},outOfBounds:({x1:i,y1:r,x2:s,y2:n})=>i<0||r<0||n>=e||s>=t,toImageData:r=>{let s=r.createImageData(t,e),n=s.data;for(let r=0;r<e;++r)for(let e=0;e<t;++e){let s=r*t+e,a=4*s,o=i[s>>>5]&1<<(31&s);n[a+0]=255*o,n[a+1]=255*o,n[a+2]=255*o,n[a+3]=31}return s}}})(d,c),p.x=t=>~~((t+o)/u),p.y=t=>~~((t+r)/u),p.ratio=u,p.padding=i,p.width=t,p.height=e,p}function o(t,e){let{x1:i,x2:s,y1:n,y2:a}=e,o=(0,r.Z)(i,0,t.width),l=(0,r.Z)(s,0,t.width),h=(0,r.Z)(n,0,t.height),u=(0,r.Z)(a,0,t.height);return{x1:t.x(o),x2:t.x(l),y1:t.y(h),y2:t.y(u)}}function l(t,e,i=!1){return i?o(t,e):{x1:t.x(e.x1),x2:t.x(e.x2),y1:t.y(e.y1),y2:t.y(e.y2)}}},3901:function(t,e,i){"use strict";i.d(e,{CB:()=>u,KN:()=>d,KZ:()=>a,XI:()=>c,aD:()=>o,hw:()=>h,qA:()=>g,qP:()=>l,sk:()=>n,vE:()=>s});var r=i(8654);function s(t){return 3===t||4===t}function n(t){return 1===t||2===t}function a(t,e,i,r,s,n){if(0===t&&0===e||n<=0)return[];if(0===t){let t=-i/e,a=n**2-(t-s)**2;return a<0?[]:0===a?[{x:r,y:t}]:[{x:Math.sqrt(a)+r,y:t},{x:-Math.sqrt(a)+r,y:t}]}if(0===e){let e=-i/t,a=n**2-(e-r)**2;return a<0?[]:0===a?[{x:e,y:s}]:[{x:e,y:Math.sqrt(a)+s},{x:e,y:-Math.sqrt(a)+s}]}let a=(e/t)**2+1,o=2*(e/t*(i/t+r)-s),l=o**2-4*a*((i/t+r)**2+s**2-n**2);if(l<0)return[];let h=(-o+Math.sqrt(l))/(2*a),u=(-o-Math.sqrt(l))/(2*a),d=-(e*h+i)/t;return 0===l?[{x:d,y:h}]:[{x:d,y:h},{x:-(e*u+i)/t,y:u}]}function o(t,e){return e>2*t?NaN:2*Math.asin(e/2/t)}function l(t,e){let{x1:i,y1:r,x2:s,y2:n}=t,{x1:a,y1:o,x2:l,y2:h}=e;return!(i<=a&&s<=a||i>=l&&s>=l||r<=o&&n<=o||r>=h&&n>=h)}let h=(t,e,i="top",r=0)=>{if(!t)return;let{x1:s,y1:n,x2:a,y2:o}=t,l=Math.abs(a-s),h=Math.abs(o-n),u=(e.x1+e.x2)/2,d=(e.y1+e.y2)/2,c=0,p=0,g=0,m=0;e&&(g=Math.abs(e.x1-e.x2)/2,m=Math.abs(e.y1-e.y2)/2);let f={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(i){case"top":p=-1;break;case"bottom":p=1;break;case"left":c=-1;break;case"right":c=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":c=Math.sin(f[i]*(Math.PI/180)),p=Math.cos(f[i]*(Math.PI/180));break;case"center":c=0,p=0}return{x:u+c*(r+g)+l/2*Math.sign(c),y:d+p*(r+m)+h/2*Math.sign(p)}},u=t=>{if(!t||!t.attribute)return[];let{points:e,segments:i}=t.attribute;if(i&&i.length){let t=[];return i.forEach(e=>{e.points.forEach(e=>{t.push(e)})}),t}return e};function d(t,e,i="end",r=0){if(!t||!e)return{x:1/0,y:1/0};let{x1:s,x2:n}=t,a=Math.abs(n-s),o=e.x1,l=o;return"end"===i?l=o+a/2+r:"start"===i&&(l=o-a/2-r),{x:l,y:e.y1}}function c(t,e){if(!t||!e||(0,r.SX)(t,e,!0))return;let i=Math.min(t.x1,t.x2),s=Math.min(t.y1,t.y2),n=Math.min(e.x1,e.x2),a=Math.min(e.y1,e.y2),o=Math.abs(t.x2-i)/2,l=Math.abs(t.y2-s)/2,h=Math.abs(e.x2-n)/2,u=Math.abs(e.y2-a)/2,d=i+o,c=s+l,g=n+h,m=a+u,f=g-d,v=m-c;return[p(f,v,d,c,o,l),p(-f,-v,g,m,h,u)]}function p(t,e,i,r,s,n){return Math.abs(e/t)<n/s?{x:i+(t>0?s:-s),y:r+e*s/Math.abs(t)}:{x:i+t*n/Math.abs(e),y:r+(e>0?n:-n)}}function g(t){return"left"===t?0:"right"===t?1:.5}},3038:function(t,e,i){"use strict";i.d(e,{U:()=>h});var r=i(3215),s=i(7623),n=i(7578),a=i(3e3),o=i(7078),l=i(9414);class h extends a.k{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);let{interactive:t=!0,title:e,padding:i=0}=this.attribute;this._parsedPadding=(0,r.o)(i);let s=n.i.group({x:this._parsedPadding[3],y:this._parsedPadding[0],pickable:t,childrenPickable:t});s.name=l.GN.innerView,this.add(s),this._innerView=s,(null==e?void 0:e.visible)&&this._renderTitle(e),this._renderContent(),this._adjustLayout(),t&&this._bindEvents();let a=this._innerView.AABBBounds;this.attribute.width=a.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=a.height()+this._parsedPadding[0]+this._parsedPadding[2]}_renderTitle(t){let{text:e="",textStyle:i,padding:n=0,background:a,minWidth:h,maxWidth:u,shape:d}=t,c={x:0,y:0,text:e,textStyle:i,padding:(0,r.o)(n),minWidth:h,maxWidth:u};d&&d.visible&&(c.shape=Object.assign({visible:!0},d.style),(0,s.Z)(d.space)&&(c.space=d.space)),a&&a.visible&&(c.panel=Object.assign({visible:!0},a.style));let p=new o.V(c);p.name=l.GN.title,this._title=p,this._innerView.add(p)}_adjustLayout(){var t;if(this._title){let e=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),r=null===(t=this.attribute.title)||void 0===t?void 0:t.align;"center"===r?this._title.setAttribute("x",(e-i)/2):"end"===r&&this._title.setAttribute("x",e-i)}}}},9414:function(t,e,i){"use strict";var r,s,n,a,o,l;i.d(e,{$5:()=>m,DN:()=>d,GN:()=>n,Nu:()=>p,SX:()=>h,Th:()=>f,dk:()=>s,g:()=>u,qL:()=>c,so:()=>g,uu:()=>r});let h=10,u=8,d=8,c=8,p=16,g=8,m=12,f=12;(a=r||(r={})).selected="selected",a.unSelected="unSelected",a.selectedHover="selectedHover",a.unSelectedHover="unSelectedHover",a.focus="focus",(o=s||(s={})).legendItemHover="legendItemHover",o.legendItemUnHover="legendItemUnHover",o.legendItemClick="legendItemClick",o.legendItemAttributeUpdate="legendItemAttributeUpdate",(l=n||(n={})).innerView="innerView",l.title="legendTitle",l.item="legendItem",l.itemShape="legendItemShape",l.itemLabel="legendItemLabel",l.itemValue="legendItemValue",l.focus="legendItemFocus"},4725:function(t,e,i){"use strict";i.d(e,{Fw:()=>d,Vo:()=>c,cV:()=>u});var r=i(9367),s=i(1369),n=i(5049),a=i(6462),o=i(9895),l=i(4258);function h(){(0,r.M)(),(0,n.b)()}function u(){h(),(0,a.s)(),(0,l.M)()}function d(){h(),(0,o.d)()}function c(){h(),(0,o.d)(),(0,s.N)()}},6462:function(t,e,i){"use strict";i.d(e,{s:()=>a});var r=i(9367),s=i(489),n=i(5757);function a(){(0,r.M)(),(0,s.k)(),(0,n.g)()}},4258:function(t,e,i){"use strict";i.d(e,{M:()=>n});var r=i(9367),s=i(7307);function n(){(0,r.M)(),(0,s.k)()}},5767:function(t,e,i){"use strict";i.d(e,{B:()=>g});var r=i(8612),s=i(2937),n=i(6689),a=i(325),o=i(3604),l=i(3531),h=i(3215),u=i(3e3),d=i(4258),c=i(9167);let p={debounce:s.Z,throttle:n.Z};(0,d.M)();class g extends u.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,a.Z)({},g.defaultAttributes,t)),this.name="scrollbar",this._onRailPointerDown=t=>{let e;let{viewX:i,viewY:r}=t,{direction:s,width:n,height:a,range:l}=this.attribute,h=this._sliderSize,[u,d]=this._getScrollRange();if("vertical"===s){let t=r-this._viewPosition.y,i=(0,o.Z)(t-h/2,u,d);e=t/a,this._slider.setAttribute("y",i,!0)}else{let t=i-this._viewPosition.x,r=(0,o.Z)(t-h/2,u,d);e=t/n,this._slider.setAttribute("x",r,!0)}this.setScrollRange([e-(l[1]-l[0])/2,e+(l[1]-l[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=t=>{let{stopSliderDownPropagation:e=!0}=this.attribute;e&&t.stopPropagation();let{direction:i}=this.attribute,{x:s,y:n}=this.stage.eventPointTransform(t);this._prePos="horizontal"===i?s:n,this._dispatchEvent(c.m3,{pos:this._prePos,event:t}),"browser"===r.rF.env?(r.rF.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),r.rF.addEventListener("pointerup",this._onSliderPointerUp)):(this.stage.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.addEventListener("pointerup",this._onSliderPointerUp),this.stage.addEventListener("pointerupoutside",this._onSliderPointerUp))},this._computeScrollValue=t=>{let{direction:e}=this.attribute,{x:i,y:r}=this.stage.eventPointTransform(t),s,n,a=0,{width:o,height:l}=this.getSliderRenderBounds();return s="vertical"===e?((n=r)-this._prePos)/l:((n=i)-this._prePos)/o,[n,s]},this._onSliderPointerMove=t=>{let{stopSliderMovePropagation:e=!0}=this.attribute;e&&t.stopPropagation();let i=this.getScrollRange(),[r,s]=this._computeScrollValue(t);this.setScrollRange([i[0]+s,i[1]+s],!0),this._prePos=r},this._onSliderPointerMoveWithDelay=0===this.attribute.delayTime?this._onSliderPointerMove:p[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=t=>{t.preventDefault();let{range:e,limitRange:i=[0,1]}=this.attribute,s=this.getScrollRange(),[n,a]=this._computeScrollValue(t),o=[s[0]+a,s[1]+a];this._dispatchEvent(c.gB,{pre:e,value:(0,l.Z)(o,i[0],i[1])}),"browser"===r.rF.env?(r.rF.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),r.rF.removeEventListener("pointerup",this._onSliderPointerUp)):(this.stage.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.removeEventListener("pointerup",this._onSliderPointerUp),this.stage.removeEventListener("pointerupoutside",this._onSliderPointerUp))}}setScrollRange(t,e=!0){let{direction:i="horizontal",limitRange:r=[0,1],range:s,realTime:n=!0}=this.attribute,a=(0,l.Z)(t,r[0],r[1]);if(e){let t=this._getSliderPos(a);if(this._slider){let e=t[1]-t[0];this._sliderSize=e,"horizontal"===i?this._slider.setAttributes({x:t[0],width:e},!0):this._slider.setAttributes({y:t[0],height:e},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=a,n&&this._dispatchEvent(c.eV,{pre:s,value:a})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;let{delayType:t="throttle",delayTime:e=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",p[t](this._onRailPointerDown,e)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown)}render(){let t;this._reset();let{direction:e="horizontal",width:i,height:r,range:s,limitRange:n=[0,1],railStyle:a,sliderStyle:o,padding:u=2}=this.attribute,d=this.createOrUpdateChild("scrollbar-container",{},"group"),c=d.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:i,height:r},a),"rect");this._rail=c;let p=this.getSliderRenderBounds(),g=this._getSliderPos((0,l.Z)(s,n[0],n[1])),m=g[1]-g[0];this._sliderSize=m,t="horizontal"===e?{x:g[0],y:p.y1,width:m,height:p.height}:{x:p.x1,y:g[0],width:p.width,height:m};let f=d.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},t),{cornerRadius:this._getDefaultSliderCornerRadius()}),o),{boundsPadding:(0,h.o)(u),pickMode:"imprecise"}),"rect");this._slider=f,this._container=d;let v=this._container.AABBBounds;this._viewPosition={x:v.x1,y:v.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;let{width:t,height:e,padding:i=2}=this.attribute,[r,s,n,a]=(0,h.o)(i),o={x1:a,y1:r,x2:t-s,y2:e-n,width:Math.max(0,t-(a+s)),height:Math.max(0,e-(r+n))};return this._sliderRenderBounds=o,o}_getDefaultSliderCornerRadius(){let{direction:t,round:e}=this.attribute;if(e){let{width:e,height:i}=this.getSliderRenderBounds();return"horizontal"===t?i:e}return 0}_getSliderPos(t){let{direction:e}=this.attribute,{width:i,height:r,x1:s,y1:n}=this.getSliderRenderBounds();return"horizontal"===e?[i*t[0]+s,i*t[1]+s]:[r*t[0]+n,r*t[1]+n]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;let{limitRange:t=[0,1],direction:e}=this.attribute,[i,r]=(0,l.Z)(t,0,1),{width:s,height:n,x1:a,y1:o}=this.getSliderRenderBounds(),h=this._sliderSize;return"horizontal"===e?(0,l.Z)([a+i*s,a+r*s],a,s-h):(0,l.Z)([o+i*n,o+r*n],o,n-h)}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}}g.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0}},1679:function(t,e,i){"use strict";i.d(e,{O:()=>h,j:()=>l});var r=i(9367),s=i(9536),n=i(4914),a=i(489),o=i(7881);function l(){(0,r.M)(),(0,s.N)(),(0,n.M)(),(0,a.k)()}function h(){(0,r.M)(),(0,s.N)(),(0,o.x)(),(0,a.k)()}},114:function(t,e,i){"use strict";i.d(e,{X:()=>c});var r=i(325),s=i(8378),n=i(4546),a=i(7636),o=i(1121),l=i(7578),h=i(3e3),u=i(1679),d=i(1805);(0,u.j)();class c extends h.k{getStartAngle(){return(0,d.LW)(this._startAngle)}getEndAngle(){return(0,d.LW)(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},c.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();let{startSymbol:t,endSymbol:e,lineStyle:i,state:r,visible:h=!0,multiSegment:u,mainSegmentIndex:d}=this.attribute;if(!h)return;this._computeLineAngle();let c=this._getMainSegmentPoints(),p=this._renderSymbol(t,c,"start"),g=this._renderSymbol(e,c,"end");if(this.startSymbol=p,this.endSymbol=g,u){let t=[...this.attribute.points];if((0,s.Z)(d))t[d]=this._clipPoints(t[d]);else{let e=this._clipPoints((0,n.VF)(t));t[0][0]=e[0],t[t.length-1][t[t.length-1].length-1]=e[e.length-1]}t.forEach((t,e)=>{var s,n;let h=l.i.line(Object.assign(Object.assign({points:t},(0,a.Z)(i)?null!==(s=i[e])&&void 0!==s?s:i[i.length-1]:i),{fill:!1}));h.name=`${this.name}-line`,h.id=this._getNodeId("line"+e),(0,o.Z)(null==r?void 0:r.line)||(h.states=(0,a.Z)(r.line)?null!==(n=r.line[e])&&void 0!==n?n:r.line[r.line.length-1]:r.line),this.add(h),this.lines.push(h)})}else{let t=l.i.line;(0,n.IX)(i)[0].cornerRadius&&(t=l.i.polygon);let e=t(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},(0,n.IX)(i)[0]),{fill:!1,closePath:!1}));e.name=`${this.name}-line`,e.id=this._getNodeId("line"),(0,o.Z)(null==r?void 0:r.line)||(e.states=[].concat(r.line)[0]),this.add(e),this.lines.push(e)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,i){let r;if(!e.length)return;let{autoRotate:n=!0}=t;if(t&&t.visible){let a,h;let u=this.getStartAngle(),d=this.getEndAngle(),{state:c}=this.attribute,p=e[0],g=e[e.length-1],{refX:m=0,refY:f=0,refAngle:v=0,style:y,symbolType:_,size:b=12}=t;"start"===i?(a={x:p.x+((0,s.Z)(u)?m*Math.cos(u)+f*Math.cos(u-Math.PI/2):0),y:p.y+((0,s.Z)(u)?m*Math.sin(u)+f*Math.sin(u-Math.PI/2):0)},h=this._computeStartRotate(this._startAngle)):(a={x:g.x+((0,s.Z)(d)?m*Math.cos(d)+f*Math.cos(d-Math.PI/2):0),y:g.y+((0,s.Z)(d)?m*Math.sin(d)+f*Math.sin(d-Math.PI/2):0)},h=this._computeEndRotate(this._endAngle)),(r=l.i.symbol(Object.assign(Object.assign(Object.assign({},a),{symbolType:_,size:b,angle:n?h+v:0,strokeBoundsBuffer:0}),y))).name=`${this.name}-${i}-symbol`,r.id=this._getNodeId(`${i}-symbol`),(0,o.Z)(null==c?void 0:c.symbol)||(r.states=c.symbol),"start"===i?(0,o.Z)(null==c?void 0:c.startSymbol)||(r.states=c.startSymbol):(0,o.Z)(null==c?void 0:c.endSymbol)||(r.states=c.endSymbol),this.add(r)}return r}_getMainSegmentPoints(){let t;if(this._mainSegmentPoints)return this._mainSegmentPoints;let{points:e,multiSegment:i,mainSegmentIndex:r}=this.attribute;return t=i?(0,s.Z)(r)?e[r]:(0,n.VF)(e):e,this._mainSegmentPoints=t,t}_clipPoints(t){let{startSymbol:e={},endSymbol:i={}}=this.attribute,r=t;if(e.visible){let i=e.clip?e.size||10:0;r=[{x:t[0].x-i/2*(Math.cos(this._startAngle)||0),y:t[0].y-i/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]}if(i.visible){let e=i.clip?i.size||10:0,s={x:t[t.length-1].x-e/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-e/2*(Math.sin(this._endAngle)||0)};r=[...r.slice(0,r.length-1),s]}return r}_computeLineAngle(){let t=this._getMainSegmentPoints();if(t.length<=1)return;let e=t[0],i=t[1],r=t[t.length-2],s=t[t.length-1],n=[e.x-i.x,e.y-i.y],a=Math.atan2(n[1],n[0]),o=[s.x-r.x,s.y-r.y],l=Math.atan2(o[1],o[0]);this._startAngle=a,this._endAngle=l}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}c.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}}},9895:function(t,e,i){"use strict";i.d(e,{d:()=>o});var r=i(9367),s=i(5757),n=i(7307),a=i(489);function o(){(0,r.M)(),(0,s.g)(),(0,n.k)(),(0,a.k)()}},5049:function(t,e,i){"use strict";i.d(e,{b:()=>l});var r=i(9367),s=i(7307),n=i(489),a=i(4683),o=i(5757);function l(){(0,r.M)(),(0,s.k)(),(0,n.k)(),(0,a.v)(),(0,o.g)()}},7078:function(t,e,i){"use strict";i.d(e,{V:()=>f});var r=i(8908),s=i(325),n=i(3215),a=i(1036),o=i(1601),l=i(1121),h=i(7623),u=i(4154),d=i(6082),c=i(3e3),p=i(8144),g=i(5049),m=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)0>e.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i};(0,g.b)();class f extends c.k{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,s.Z)({},f.defaultAttributes,t)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var t,e,i;let s;this.cacheStates();let{text:c="",textStyle:g={},shape:f={},panel:v={},space:y=4,minWidth:_,maxWidth:b,padding:x=4,visible:S,state:A,type:k,textAlwaysCenter:w,containerTextAlign:C}=this.attribute,T=(0,n.o)(x),E=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group"),M,B=-T[3],D=-T[0],O=T[1]+T[3],P=T[0]+T[2],I=0,R=0,{visible:L}=f,F=m(f,["visible"]);if((0,a.Z)(L)){let t=(null==F?void 0:F.size)||10,e=(0,o.Z)(t)?t:Math.max(t[0],t[1]);M=E.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:t,strokeBoundsBuffer:0},F),{visible:L,x:e/2,y:e/2}),"symbol"),(0,l.Z)(null==A?void 0:A.shape)||(M.states=A.shape),L&&(R=e+y)}if(O+=R,I+=R,(0,p.TV)({text:c})||"rich"===k){let t=Object.assign(Object.assign(Object.assign({},(0,p.ut)(Object.assign({type:k,text:c},g))),g),{visible:(0,h.Z)(c)&&!1!==S,x:I,y:0});O+=(s=E.createOrUpdateChild("tag-text",t,"richtext")).AABBBounds.width(),P+=s.AABBBounds.height(),B+=s.AABBBounds.x1,D+=s.AABBBounds.y1}else{let r=Object.assign(Object.assign({text:(0,u.Z)(c)&&"type"in c&&"text"===c.type?c.text:c,visible:(0,h.Z)(c)&&!1!==S,lineHeight:null==g?void 0:g.fontSize},g),{x:I,y:0});(0,d.Z)(r.lineHeight)&&(r.lineHeight=g.fontSize),s=E.createOrUpdateChild("tag-text",r,"text"),(0,l.Z)(null==A?void 0:A.text)||(s.states=A.text);let n=(0,p.fe)(r.text,g,null===(e=null===(t=this.stage)||void 0===t?void 0:t.getTheme())||void 0===e?void 0:e.text),a=n.width,m=n.height;O+=a;let v=null!==(i=f.size)&&void 0!==i?i:10,y=(0,o.Z)(v)?v:Math.max(v[0],v[1]);P+=Math.max(m,f.visible?y:0);let{textAlign:x,textBaseline:k}=g;((0,h.Z)(_)||(0,h.Z)(b))&&((0,h.Z)(_)&&O<_&&(O=_),(0,h.Z)(b)&&O>b&&(O=b,s.setAttribute("maxLineWidth",b-T[1]-T[2]))),B=0,D=0;let L=0;if("left"===x||"start"===x?L=1:"right"===x||"end"===x?L=-1:"center"===x&&(L=0),L?L<0?(B-=O,M&&M.setAttribute("x",(M.attribute.x||0)-a),E.setAttribute("x",-T[1]-R)):L>0&&E.setAttribute("x",T[3]):(B-=O/2,M&&M.setAttribute("x",(M.attribute.x||0)-a/2),E.setAttribute("x",-R/2)),(C?"center"===C:w)&&L){let t=O-T[1]-T[3],e=a+R,i=1===L?(t-e)/2+R+a/2:T[0]+R-(O/2+e/2-R)+a/2;if(s.setAttributes({x:i,textAlign:"center"}),M){let t=i-a/2-R+y/2;M.setAttributes({x:t})}}if(("left"===C||"start"===C)&&1!==L){let t=O-T[1]-T[3],e=0===L?-t/2+R/2:-O+T[3]+T[1]+R,i=e+R;s.setAttributes({x:i,textAlign:"left"}),M&&M.setAttributes({x:e+y/2})}if(("right"===C||"end"===C)&&-1!==L){let t=O-T[1]-T[3],e=0===L?t/2+R/2:t;if(s.setAttributes({x:e,textAlign:"right"}),M){let t=e-a-R+y/2;M.setAttributes({x:t})}}"middle"===k?(D-=P/2,M&&M.setAttribute("y",0)):"bottom"===k?(D-=P,M&&M.setAttribute("y",-m/2),E.setAttribute("y",-T[2])):"top"===k&&(E.setAttribute("y",T[0]),M&&M.setAttribute("y",m/2))}let{visible:j}=v,Z=m(v,["visible"]);if(S&&(0,a.Z)(j)){let t=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},Z),{visible:j&&!!c,width:O,height:P,x:B,y:D}),"rect");if((0,l.Z)(null==A?void 0:A.panel)||(t.states=A.panel),Z.customShape){let e=Z.customShape;t.pathProxy=t=>e(this,t,new r.r)}this._bgRect=t}this._textShape=s,this._symbol=M,this.resetStates()}initAttributes(t,e){t=(null==e?void 0:e.skipDefault)?t:(0,s.Z)({},f.defaultAttributes,t),super.initAttributes(t),this.render()}addState(t,e,i){super.addState(t,e,i),this._textShape&&this._textShape.addState(t,e,i),this._bgRect&&this._bgRect.addState(t,e,i),this._symbol&&this._symbol.addState(t,e,i)}removeState(t,e){super.removeState(t,e),this._textShape&&this._textShape.removeState(t,e),this._bgRect&&this._bgRect.removeState(t,e),this._symbol&&this._symbol.removeState(t,e)}cacheStates(){var t,e,i,r,s,n,a,o,l,h,u,d,c,p;this._tagStates=null!==(e=null===(t=this.currentStates)||void 0===t?void 0:t.slice())&&void 0!==e?e:[],this._rectStates=null!==(s=null===(r=null===(i=this._bgRect)||void 0===i?void 0:i.currentStates)||void 0===r?void 0:r.slice())&&void 0!==s?s:[],this._symbolStates=null!==(o=null===(a=null===(n=this._symbol)||void 0===n?void 0:n.currentStates)||void 0===a?void 0:a.slice())&&void 0!==o?o:[],this._textStates=null!==(u=null===(h=null===(l=this._textShape)||void 0===l?void 0:l.currentStates)||void 0===h?void 0:h.slice())&&void 0!==u?u:[],this.clearStates(),null===(d=this._bgRect)||void 0===d||d.clearStates(),null===(c=this._symbol)||void 0===c||c.clearStates(),null===(p=this._textShape)||void 0===p||p.clearStates()}resetStates(){var t,e,i;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&(null===(t=this._bgRect)||void 0===t||t.useStates(this._rectStates)),this._symbolStates.length&&(null===(e=this._symbol)||void 0===e||e.useStates(this._symbolStates)),this._textStates.length&&(null===(i=this._textShape)||void 0===i||i.useStates(this._textStates))}}f.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}}},3745:function(t,e,i){"use strict";function r(t,e){if(!e)return[];let i=t.find(t=>t.name===e,!0);return i?i.getChildren():[]}function s(t,e){if(!e)return[];let i=t.find(t=>t.name===e,!0);return i?i.findAll(t=>"group"!==t.type,!0):[]}function n(t){let e=[t[0]];for(let i=1;i<t.length;i++)t[i].x===t[i-1].x&&t[i].y===t[i-1].y||e.push(t[i]);return e}function a(t){return t>=0&&t<Math.PI/2||t>3*Math.PI/2&&t<=2*Math.PI}function o(t,e,i){return Math.abs(t-e)<i}function l(t,e,i){return t?{textAlign:"right",textBaseline:"middle"}:{textAlign:e<Math.PI&&i.toLocaleLowerCase().includes("top")||e>Math.PI&&i.toLocaleLowerCase().includes("bottom")?"left":e<Math.PI&&i.toLocaleLowerCase().includes("bottom")||e>Math.PI&&i.toLocaleLowerCase().includes("top")?"right":"center",textBaseline:e<Math.PI&&i.includes("inside")||e>Math.PI&&!i.includes("inside")?"bottom":"top"}}i.d(e,{Bh:()=>n,Ck:()=>function t(e,i){e.forEachChildren(e=>{let r=i(e);e.isContainer&&!r&&t(e,i)})},Dh:()=>s,U4:()=>o,WF:()=>a,ic:()=>l,tP:()=>r})},3151:function(t,e,i){"use strict";i.d(e,{Q6:()=>l,fM:()=>a,lO:()=>o});var r=i(9167),s=i(3745),n=i(1121);let a=(t,e,i)=>{let a=t.target;return a!==i&&a.name&&!(0,n.Z)(a.states)?(a.addState(r.HW.hover,!0),(0,s.Ck)(e,t=>{t!==a&&t.name&&!(0,n.Z)(t.states)&&t.addState(r.HW.hoverReverse,!0)}),a):i},o=(t,e,i)=>i?((0,s.Ck)(e,t=>{t.name&&!(0,n.Z)(t.states)&&(t.removeState(r.HW.hoverReverse),t.removeState(r.HW.hover))}),null):i,l=(t,e,i)=>{let a=t.target;return i===a&&a.hasState(r.HW.selected)?((0,s.Ck)(e,t=>{t.name&&!(0,n.Z)(t.states)&&(t.removeState(r.HW.selectedReverse),t.removeState(r.HW.selected))}),null):a.name&&!(0,n.Z)(a.states)?(a.addState(r.HW.selected,!0),(0,s.Ck)(e,t=>{t!==a&&t.name&&!(0,n.Z)(t.states)&&t.addState(r.HW.selectedReverse,!0)}),a):i}},7449:function(t,e,i){"use strict";i.d(e,{Dg:()=>a,Fv:()=>n,bA:()=>s});var r=i(8103);function s(t,e){return[t[0]*e,t[1]*e]}function n(t){let e=function(t){let[e,i]=t;return Math.sqrt(e*e+i*i)}(t);return e>0&&(e=1/e),[t[0]*e,t[1]*e]}function a(t,e,i){let s=function(t,e){let[i,r]=t,[s,n]=e,a=Math.sqrt((i*i+r*r)*(s*s+n*n));return Math.acos(Math.min(Math.max(a&&(i*s+r*n)/a,-1),1))}(t,e),n=(0,r.ir)(t,e)>=0;return i?n?2*Math.PI-s:s:n?s:2*Math.PI-s}},8144:function(t,e,i){"use strict";i.d(e,{TV:()=>d,fe:()=>u,gM:()=>h,ut:()=>p,vS:()=>g});var r=i(1207),s=i(7578),n=i(8485),a=i(4154),o=i(7623),l=i(9167);let h=(t,e,i,s)=>new n.e(Object.assign({defaultFontParams:Object.assign({fontFamily:l.iR,fontSize:l.$M},s),getTextBounds:i?void 0:r.o,specialCharSet:"-/: .,@%'\"~"+n.e.ALPHABET_CHAR_SET+n.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t);function u(t,e,i={}){if(!t)return{width:0,height:0};let s=(0,r.o)({text:t,fontFamily:e.fontFamily||i.fontFamily||l.iR,fontSize:e.fontSize||i.fontSize||12,fontWeight:e.fontWeight||i.fontWeight,textAlign:e.textAlign||"center",textBaseline:e.textBaseline,ellipsis:!!e.ellipsis,maxLineWidth:e.maxLineWidth||1/0,lineHeight:e.fontSize||i.fontSize||12});return{width:s.width(),height:s.height()}}function d(t,e="type"){return"rich"===c(t,e)}function c(t,e="type"){var i,r;return(0,a.Z)(t.text)&&"type"in t.text?null!==(i=t.text.type)&&void 0!==i?i:"text":e in t&&null!==(r=t[e])&&void 0!==r?r:"text"}function p(t){var e,i;return(0,o.Z)(t.maxLineWidth)&&(t.maxWidth=t.maxLineWidth,delete t.maxLineWidth),t.width=null!==(e=t.width)&&void 0!==e?e:0,t.height=null!==(i=t.height)&&void 0!==i?i:0,t.textConfig=t.text.text||t.text,t}function g(t,e="type"){let i=c(t,e);return"rich"===i?s.i.richtext(p(t)):("html"===i?t=function(t){let{text:e,_originText:i}=t,{text:r}=e;return t.html=r,t.text=i,t.renderable=!1,t}(t):"react"===i&&(t=function(t){let{text:e,_originText:i}=t,{text:r}=e;return t.react=r,t.text=i,t.renderable=!1,t}(t)),s.i.text(t))}},6910:function(t,e,i){"use strict";i.d(e,{et:()=>s});var r=i(7393);Symbol.for("BoundsAllocate");let s=new class{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new r.FB)}allocate(t,e,i,s){if(!this.pools.length)return(new r.FB).setValue(t,e,i,s);let n=this.pools.pop();return n.x1=t,n.y1=e,n.x2=i,n.y2=s,n}allocateByObj(t){if(!this.pools.length)return new r.FB(t);let e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},1164:function(t,e,i){"use strict";i.d(e,{A:()=>n});var r=i(534),s=i(9355);let n=new class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){let e=(0,s.JN)(Object.assign({nativeCanvas:r.w.global.createCanvas(t)},t));return this.allocatedCanvas.push(e),e}let e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){let e={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},i=(0,s.JN)(Object.assign({nativeCanvas:r.w.global.createCanvas(e)},e));return this.allocatedCanvas.push(i),i}let e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},8113:function(t,e,i){"use strict";i.d(e,{QE:()=>o,yp:()=>l});var r=i(9935),s=i(7317);function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Symbol.for("MatrixAllocate"),Symbol.for("Mat4Allocate");class a{constructor(){this.pools=[]}static identity(t){return(0,s.TL)(t)}allocate(){if(!this.pools.length)return n();let t=this.pools.pop();return a.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():n();for(let i=0;i<e.length;i++)e[i]=t[i];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}let o=new class{constructor(){this.pools=[]}allocate(t,e,i,s,n,a){if(!this.pools.length)return new r.y(t,e,i,s,n,a);let o=this.pools.pop();return o.a=t,o.b=e,o.c=i,o.d=s,o.e=n,o.f=a,o}allocateByObj(t){if(!this.pools.length)return new r.y(t.a,t.b,t.c,t.d,t.e,t.f);let e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}},l=new a},3118:function(t,e,i){"use strict";i.d(e,{rd:()=>h,rs:()=>d});var r=i(3872),s=i(2959),n=i(8103),a=i(4659),o=i(3419),l=i(86);class h{constructor(t,e,i,r,s){this.from=t,this.to=e,this.duration=i,this.easing=r,this.params=s,this.updateCount=0}bind(t,e){this.target=t,this.subAnimate=e,this.onBind()}onBind(){}onFirstRun(){}onStart(){}onEnd(){}getEndProps(){return this.to}getFromProps(){return this.from}getMergedEndProps(){var t;let e=this.getEndProps();return e?this._endProps===e?this._mergedEndProps:(this._endProps=e,void(this._mergedEndProps=Object.assign({},null!==(t=this.step.prev.getLastProps())&&void 0!==t?t:{},e))):this.step.prev?this.step.prev.getLastProps():e}update(t,e,i){if(0===this.updateCount){this.onFirstRun();let t=this.step.getLastProps();Object.keys(t).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(i[e]=t[e])})}this.updateCount+=1,this.onUpdate(t,e,i),t&&this.onEnd()}}class u extends h{constructor(t){super(null,null,0,"linear"),this.cb=t}onUpdate(t,e,i){}onStart(){this.cb()}}class d{constructor(t=l.R.GenAutoIncrementId(),e=o.P,i){this.id=t,this.timeline=e||o.P,this.status=r.td.INITIAL,this.tailAnimate=new c(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this),this.slience=i}setTimeline(t){t!==this.timeline&&(this.timeline.removeAnimate(this,!1),t.addAnimate(this))}getStartTime(){return this._startTime}getDuration(){return this.subAnimates.reduce((t,e)=>t+e.totalDuration,0)}after(t){let e=t.getDuration();return this._startTime=e,this}afterAll(t){let e=-1/0;return t.forEach(t=>{e=(0,n.Fp)(t.getDuration(),e)}),this._startTime=e,this}parallel(t){return this._startTime=t.getStartTime(),this}static AddInterpolate(t,e){d.interpolateMap.set(t,e)}play(t){if(this.tailAnimate.play(t),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return 1===this.subAnimates.length&&this.tailAnimate.totalDuration===t.duration&&this.trySetAttribute(t.getFromProps(),t.mode),this}trySetAttribute(t,e=d.mode){t&&e&r.uq.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(t,!1,{type:r.Gk.ANIMATE_PLAY})}runCb(t){let e=new u(()=>{t(this,e.step.prev)});return this.tailAnimate.play(e),this}customInterpolate(t,e,i,r,s,n){let a=d.interpolateMap.get(t)||d.interpolateMap.get("");return!!a&&a(t,e,i,r,s,n)}pause(){this.status===r.td.RUNNING&&(this.status=r.td.PAUSED)}resume(){this.status===r.td.PAUSED&&(this.status=r.td.RUNNING)}to(t,e,i,r){if(this.tailAnimate.to(t,e,i,r),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}from(t,e,i,r){if(this.tailAnimate.from(t,e,i,r),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}wait(t){if(this.tailAnimate.wait(t),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}startAt(t){if(this.tailAnimate.startAt(t),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}loop(t){if(this.tailAnimate.loop=t,this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}reversed(t){if(this.tailAnimate.reversed=t,this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}bounce(t){if(this.tailAnimate.bounce=t,this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}subAnimate(){let t=new c(this,this.tailAnimate);return this.tailAnimate=t,this.subAnimates.push(t),t.bind(this.target),this}getStartProps(){return this.subAnimates[0].getStartProps()}getEndProps(){return this.tailAnimate.getEndProps()}depreventAttr(t){this._preventAttrs&&this._preventAttrs.delete(t)}preventAttr(t){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(t)}preventAttrs(t){t.forEach(t=>this.preventAttr(t))}validAttr(t){return!this._preventAttrs||!this._preventAttrs.has(t)}bind(t){return this.target=t,this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.subAnimates.forEach(e=>{e.bind(t)}),this}advance(t){if(this._duringTime<this._startTime){if(this._duringTime+t*this.timeScale<this._startTime)return void(this._duringTime+=t*this.timeScale);t=this._duringTime+t*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===r.td.INITIAL&&(this.status=r.td.RUNNING,this._onStart&&this._onStart.forEach(t=>t())),this.setPosition(Math.max(this.rawPosition,0)+t*this.timeScale)&&this.status===r.td.RUNNING&&(this.status=r.td.END,this._onEnd&&this._onEnd.forEach(t=>t()))}setPosition(t){let e,i=0,r=this.rawPosition,s=this.subAnimates.reduce((t,e)=>t+e.totalDuration,0);t<0&&(t=0);let n=t>=s;if(n&&(t=s),t===r)return n;for(let r=0;r<this.subAnimates.length&&!(i+(e=this.subAnimates[r]).totalDuration>=t);r++)i+=e.totalDuration,e=void 0;return this.rawPosition=t,e.setPosition(t-i),n}onStart(t){this._onStart||(this._onStart=[]),this._onStart.push(t)}onEnd(t){this._onEnd||(this._onEnd=[]),this._onEnd.push(t)}onRemove(t){this._onRemove||(this._onRemove=[]),this._onRemove.push(t)}onFrame(t){this._onFrame||(this._onFrame=[]),this._onFrame.push(t)}release(){this.status=r.td.END}stop(t){t||this.target.onStop(),"start"===t?this.target.onStop(this.getStartProps()):"end"===t?this.target.onStop(this.getEndProps()):this.target.onStop(t),this.release()}}d.mode=r.uq.NORMAL,d.interpolateMap=new Map;class c{get totalDuration(){return this.calcAttr(),this._totalDuration+this._startAt}constructor(t,e){this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=t,this.stepHead=new p(0,0,e?Object.assign({},e.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}calcAttr(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}bind(t){return this.target=t,this}play(t){let e=t.duration;(null==e||e<0)&&(e=0);let i=t.easing,n="string"==typeof i?s.o[i]:i,a=this._addStep(e,null,n);return a.type=r.Tq.customAnimate,this._appendProps(t.getEndProps(),a,!1),this._appendCustomAnimate(t,a),this}to(t,e,i,n){(null==e||e<0)&&(e=0);let a="string"==typeof i?s.o[i]:i,o=this._addStep(e,null,a);return o.type=r.Tq.to,this._appendProps(t,o,!!n&&n.tempProps),o.propKeys||(o.propKeys=Object.keys(o.props)),n&&n.noPreventAttrs||this.target.animates&&this.target.animates.forEach(t=>{t.id!==this.animate.id&&t.preventAttrs(o.propKeys)}),this}from(t,e,i,s){this.to(t,0,i,s);let n={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach(t=>{n[t]=this.getLastPropByName(t,this.stepTail)}),this.to(n,e,i,s),this.stepTail.type=r.Tq.from}startAt(t){return t<0&&(t=0),this._startAt=t,this}getStartProps(){var t;return null===(t=this.stepHead)||void 0===t?void 0:t.props}getEndProps(){return this.stepTail.props}getLastStep(){return this._lastStep}wait(t){if(t>0){let e=this._addStep(+t,null);e.type=r.Tq.wait,e.prev.customAnimate?e.props=e.prev.customAnimate.getEndProps():e.props=e.prev.props,this.target.onAddStep&&this.target.onAddStep(e)}return this}_addStep(t,e,i){let r=new p(this.duration,t,e,i);return this.duration+=t,this.stepTail.append(r),this.stepTail=r,r}_appendProps(t,e,i){e.props=i?t:Object.assign({},t);let r=e.prev,s=e.props;for(e.propKeys||(e.propKeys=Object.keys(e.props)),e.propKeys.forEach(t=>{void 0===e.props[t]&&(e.props[t]=this.target.getDefaultAttribute(t))});r.prev;)r.props&&(r.propKeys||(r.propKeys=Object.keys(r.props)),r.propKeys.forEach(t=>{void 0===s[t]&&(s[t]=r.props[t])})),e.propKeys=Object.keys(e.props),r=r.prev;let n=this.stepHead.props;e.propKeys||(e.propKeys=Object.keys(s)),e.propKeys.forEach(t=>{if(void 0===n[t]){let e=this.animate.getStartProps();n[t]=e[t]=this.target.getComputedAttribute(t)}}),this.target.onAddStep&&this.target.onAddStep(e)}_appendCustomAnimate(t,e){e.customAnimate=t,t.step=e,t.bind(this.target,this)}setPosition(t){var e;let i=this.duration,r=this.loop,s=this.rawPosition,n,a,o=!1,l=null!==(e=this._startAt)&&void 0!==e?e:0;if(t<0&&(t=0),t<l)return this.rawPosition=t,!1;if(t-=l,i<=0&&(o=!0,i<0)||(n=Math.floor(t/i),a=t-n*i,(o=t>=r*i+i)&&(t=(a=i)*(n=r)+i),t===s))return o;let h=!this.reversed!=!(this.bounce&&n%2);return h&&(a=i-a),this._deltaPosition=a-this.position,this.position=a,this.rawPosition=t+l,this.updatePosition(o,h),o}updatePosition(t,e){if(!this.stepHead)return;let i=this.stepHead.next,r=this.position,s=this.duration;if(this.target&&i){let n=i.next;for(;n&&n.position<=r;)n=(i=n).next;let a=t?0===s?1:r/s:(r-i.position)/i.duration;i.easing&&(a=i.easing(a)),this.tryCallCustomAnimateLifeCycle(i,this._lastStep||(e?this.stepTail:this.stepHead),e),this.updateTarget(i,a,t),this._lastStep=i,this.animate._onFrame&&this.animate._onFrame.forEach(t=>t(i,a))}}tryCallCustomAnimateLifeCycle(t,e,i){if(t!==e){if(i){let i=e.prev;for(;i&&i!==t;)i.customAnimate&&(i.customAnimate.onStart&&i.customAnimate.onStart(),i.customAnimate.onEnd&&i.customAnimate.onEnd()),i=t.prev;e&&e.customAnimate&&e.customAnimate.onEnd&&e.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}else{let i=e.next;for(;i&&i!==t;)i.customAnimate&&(i.customAnimate.onStart&&i.customAnimate.onStart(),i.customAnimate.onEnd&&i.customAnimate.onEnd()),i=i.next;e&&e.customAnimate&&e.customAnimate.onEnd&&e.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}}}getLastPropByName(t,e){let i=e.prev;for(;i;){if(i.props&&void 0!==i.props[t])return i.props[t];if(i.customAnimate){let e=i.customAnimate.getEndProps()[t];if(void 0!==e)return e}i=i.prev}return a.Y.getInstance().warn("未知错误，step中找不到属性"),e.props[t]}updateTarget(t,e,i){null==t.props&&null==t.customAnimate||this.target.onStep(this,this.animate,t,e,i)}}class p{constructor(t,e,i,r){this.duration=e,this.position=t,this.props=i,this.easing=r}append(t){t.prev=this,t.next=this.next,this.next=t}getLastProps(){let t=this.prev;for(;t;){if(t.props)return t.props;if(t.customAnimate)return t.customAnimate.getMergedEndProps();t=t.prev}return null}}},3337:function(t,e,i){"use strict";i.d(e,{Bm:()=>p,fN:()=>g,xc:()=>m});var r,s,n=i(1601),a=i(8103),o=(i(7636),i(2683)),l=i(8378),h=i(3604),u=(i(534),i(3872),i(8908),i(3118)),d=i(2959),c=i(3386);i(7574);class p extends u.rd{constructor(t,e,i,r,s){super(t,e,i,r,s)}getEndProps(){return!1===this.valid?{}:{text:this.to}}onBind(){var t,e,i,r,s,o,l,h;this.fromNumber=(0,n.Z)(null===(t=this.from)||void 0===t?void 0:t.text)?null===(e=this.from)||void 0===e?void 0:e.text:Number.parseFloat(null===(i=this.from)||void 0===i?void 0:i.text),this.toNumber=(0,n.Z)(null===(r=this.to)||void 0===r?void 0:r.text)?null===(s=this.to)||void 0===s?void 0:s.text:Number.parseFloat(null===(o=this.to)||void 0===o?void 0:o.text),Number.isFinite(this.toNumber)||(this.fromNumber=0),Number.isFinite(this.toNumber)||(this.valid=!1),!1!==this.valid&&(this.decimalLength=null!==(h=null===(l=this.params)||void 0===l?void 0:l.fixed)&&void 0!==h?h:Math.max((0,a.i4)(this.fromNumber),(0,a.i4)(this.toNumber)))}onEnd(){}onUpdate(t,e,i){var r;!1!==this.valid&&(i.text=t?null===(r=this.to)||void 0===r?void 0:r.text:(this.fromNumber+(this.toNumber-this.fromNumber)*e).toFixed(this.decimalLength))}}(r=s||(s={}))[r.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",r[r.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",r[r.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",r[r.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP",r[r.STROKE=4]="STROKE",u.rd,u.rd,u.rd,u.rd,u.rd;class g extends u.rd{constructor(t,e,i,r,s){var n,a;super(t,e,i,r,s),this.newPointAnimateType=null!==(n=null==s?void 0:s.newPointAnimateType)&&void 0!==n?n:"grow",this.clipRangeByDimension=null!==(a=null==s?void 0:s.clipRangeByDimension)&&void 0!==a?a:"x"}getPoints(t,e=!1){if(t.points)return t.points;if(t.segments){let i=[];return this.segmentsCache||(this.segmentsCache=[]),t.segments.map(t=>{var r,s;t.points&&i.push(...t.points),e&&this.segmentsCache.push(null!==(s=null===(r=t.points)||void 0===r?void 0:r.length)&&void 0!==s?s:0)}),i}return[]}onBind(){let t=this.getPoints(this.from),e=this.getPoints(this.to,!0);this.fromPoints=t?Array.isArray(t)?t:[t]:[],this.toPoints=e?Array.isArray(e)?e:[e]:[];let i=new Map;this.fromPoints.forEach(t=>{t.context&&i.set(t.context,t)});let r,s,n=1/0,a=-1/0;for(let t=0;t<this.toPoints.length;t+=1)if(i.has(this.toPoints[t].context)){n=t,r=i.get(this.toPoints[t].context);break}for(let t=this.toPoints.length-1;t>=0;t-=1)if(i.has(this.toPoints[t].context)){a=t,s=i.get(this.toPoints[t].context);break}"clip"===this.newPointAnimateType&&0!==this.toPoints.length&&(Number.isFinite(a)?(this.clipRange=this.toPoints[a][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],1===this.clipRange&&(this.shrinkClipRange=this.toPoints[a][this.clipRangeByDimension]/this.fromPoints[this.fromPoints.length-1][this.clipRangeByDimension]),(0,l.Z)(this.clipRange)?this.clipRange=(0,h.Z)(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let u=this.toPoints[0];this.interpolatePoints=this.toPoints.map((t,e)=>{let o=i.get(t.context);return o?(u=o,[o,t]):"appear"===this.newPointAnimateType||"clip"===this.newPointAnimateType?[t,t]:e<n&&r?[r,t]:e>a&&s?[s,t]:[u,t]}),this.points=this.interpolatePoints.map(t=>{let e=t[0],i=t[1],r=new o.E9(e.x,e.y,e.x1,e.y1);return r.defined=i.defined,r.context=i.context,r})}onFirstRun(){let t=this.target.attribute.clipRange;(0,l.Z)(t*this.clipRange)&&(this.clipRange*=t)}onUpdate(t,e,i){if(this.points=this.points.map((t,i)=>{let r=(0,c.q9)(this.interpolatePoints[i][0],this.interpolatePoints[i][1],e);return r.context=t.context,r}),this.clipRange){if(this.shrinkClipRange)return void(t?(i.points=this.toPoints,i.clipRange=1):(i.points=this.fromPoints,i.clipRange=this.clipRange-(this.clipRange-this.shrinkClipRange)*e));i.clipRange=this.clipRange+(1-this.clipRange)*e}if(this.segmentsCache&&this.to.segments){let t=0;i.segments=this.to.segments.map((e,i)=>{let r=t+this.segmentsCache[i],s=this.points.slice(t,r);return t=r,Object.assign(Object.assign({},e),{points:s})})}else i.points=this.points}}u.rd,u.rd,u.rd;class m extends u.rd{constructor(t,e){super(null,null,t,"linear"),this.customAnimates=e}initAnimates(){this.customAnimates.forEach(t=>{t.step=this.step,t.subAnimate=this.subAnimate,t.target=this.target})}getEndProps(){let t={};return this.customAnimates.forEach(e=>{Object.assign(t,e.getEndProps())}),t}onBind(){this.initAnimates(),this.customAnimates.forEach(t=>{t.onBind()})}onEnd(){this.customAnimates.forEach(t=>{t.onEnd()})}onStart(){this.customAnimates.forEach(t=>{t.onStart()})}onUpdate(t,e,i){this.updating||(this.updating=!0,this.customAnimates.forEach(r=>{let s=r.easing;e=("string"==typeof s?d.o[s]:s)(e),r.onUpdate(t,e,i)}),this.updating=!1)}}u.rd},2959:function(t,e,i){"use strict";i.d(e,{o:()=>s});var r=i(8103);class s{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0===t?e:t<0?e*(-(e*t)+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return 0===t?0:Math.pow(2,10*t-10)}static expoOut(t){return 1===t?1:1-Math.pow(2,-10*t)}static expoInOut(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-s.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*s.bounceIn(2*t):.5*s.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(0===i||1===i)return i;let s=e/r.f7*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*r.f7/e)}}static getElasticOut(t,e){return function(i){if(0===i||1===i)return i;let s=e/r.f7*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-s)*r.f7/e)+1}}static getElasticInOut(t,e){return function(i){let s=e/r.f7*Math.asin(1/t);return(i*=2)<1?-(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*r.f7/e)*.5):t*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*r.f7/e)*.5+1}}static registerFunc(t,e){s[t]=e}}s.quadIn=s.getPowIn(2),s.quadOut=s.getPowOut(2),s.quadInOut=s.getPowInOut(2),s.cubicIn=s.getPowIn(3),s.cubicOut=s.getPowOut(3),s.cubicInOut=s.getPowInOut(3),s.quartIn=s.getPowIn(4),s.quartOut=s.getPowOut(4),s.quartInOut=s.getPowInOut(4),s.quintIn=s.getPowIn(5),s.quintOut=s.getPowOut(5),s.quintInOut=s.getPowInOut(5),s.backIn=s.getBackIn(1.7),s.backOut=s.getBackOut(1.7),s.backInOut=s.getBackInOut(1.7),s.elasticIn=s.getElasticIn(1,.3),s.elasticOut=s.getElasticOut(1,.3),s.elasticInOut=s.getElasticInOut(1,.3*1.5),s.easeInOutQuad=t=>(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2),s.easeOutElastic=t=>{let e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},s.easeInOutElastic=t=>{let e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1};for(let t=0;t<10;t++)s[`flicker${t}`]=e=>(function(t,e){let i=1/e,r=1;for(;t>i;)t-=i,r*=-1;let s=r*t/i;return s>0?s:1+s})(e,t);for(let t=2;t<10;t++)s[`aIn${t}`]=e=>t*e*e+(1-t)*e},3419:function(t,e,i){"use strict";i.d(e,{L:()=>n,P:()=>a});var r=i(3872),s=i(86);class n{constructor(){this.id=s.R.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}addAnimate(t){this.animateTail?(this.animateTail.nextAnimate=t,t.prevAnimate=this.animateTail,this.animateTail=t,t.nextAnimate=null):(this.animateHead=t,this.animateTail=t),this.animateCount++}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;let e=this.animateHead;for(this.animateCount=0;e;)e.status===r.td.END?this.removeAnimate(e):e.status===r.td.RUNNING||e.status===r.td.INITIAL?(this.animateCount++,e.advance(t)):e.status===r.td.PAUSED&&this.animateCount++,e=e.nextAnimate}clear(){let t=this.animateHead;for(;t;)t.release(),t=t.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}removeAnimate(t,e=!0){t._onRemove&&t._onRemove.forEach(t=>t()),t===this.animateHead?(this.animateHead=t.nextAnimate,t===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):t===this.animateTail?(this.animateTail=t.prevAnimate,this.animateTail.nextAnimate=null):(t.prevAnimate.nextAnimate=t.nextAnimate,t.nextAnimate.prevAnimate=t.prevAnimate),e&&t.release()}}let a=new n},534:function(t,e,i){"use strict";i.d(e,{w:()=>r});let r=new class{}},3140:function(t,e,i){"use strict";i.d(e,{Of:()=>d,MB:()=>u});class r{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){let{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:r=this.L_TIME,R_COUNT:s=this.R_COUNT}=e;if(t.size<i)return 0;let n=0,a=e=>{n++,t.delete(e)},o=Date.now();return t.forEach((t,e)=>{if(t.timestamp.length<s)return a(e);let i=0;for(;o-t.timestamp[t.timestamp.length-1-i]<r&&!(++i>=s););if(i<s)return a(e);for(;o-t.timestamp[0]>r;)t.timestamp.shift()}),n}addLimitedTimestamp(t,e,i){let{R_TIMESTAMP_MAX_SIZE:r=this.R_TIMESTAMP_MAX_SIZE}=i;t.timestamp.length>r&&t.timestamp.shift(),t.timestamp.push(e)}clearTimeStamp(t,e){let{L_TIME:i=this.L_TIME}=e,r=Date.now();t.forEach(t=>{for(;r-t.timestamp[0]>i;)t.timestamp.shift()})}clearItemTimestamp(t,e){let{L_TIME:i=this.L_TIME}=e,r=Date.now();for(;r-t.timestamp[0]>i;)t.timestamp.shift()}}var s=i(8103),n=i(534),a=i(1087);class o{static GetCanvas(){try{return o.canvas||(o.canvas=n.w.global.createCanvas({})),o.canvas}catch(t){return null}}static GetCtx(){if(!o.ctx){let t=o.GetCanvas();o.ctx=t.getContext("2d")}return o.ctx}}class l extends r{static getInstance(){return l._instance||(l._instance=new l),l._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;let i=o.GetCanvas(),r=o.GetCtx();if(i.width=e,i.height=1,!r)return;if(r.translate(0,0),!r)throw Error("获取ctx发生错误");let s=r.createLinearGradient(0,0,e,0);t.forEach(t=>{s.addColorStop(t[0],t[1])}),r.fillStyle=s,r.fillRect(0,0,e,1),this.rgbaSet=r.getImageData(0,0,e,1).data}getColor(t){let e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,i,r,s=[],n=100){let a=`${t}${e}${i}${r}`;s.forEach(t=>a+=t.join()),a+=n;let o=this.dataMap.get(a);return o||(o={data:new l(s,n),timestamp:[]},this.addLimitedTimestamp(o,Date.now(),{}),this.dataMap.set(a,o)),this.clearCache(this.dataMap,this.cacheParams),o.data}}class h{static GetSize(t){for(let e=0;e<h.ImageSize.length;e++)if(h.ImageSize[e]>=t)return h.ImageSize[e];return t}static Get(t,e,i,r,s,n,a){let o=h.GenKey(t,e,i,r,s),l=h.cache[o];if(!l||0===l.length)return null;for(let t=0;t<l.length;t++)if(l[t].width>=n&&l[t].height>=a)return l[t].pattern;return null}static Set(t,e,i,r,s,n,a,o){let l=h.GenKey(t,e,i,r,s);h.cache[l]?h.cache[l].push({width:a,height:o,pattern:n}):h.cache[l]=[{width:a,height:o,pattern:n}]}static GenKey(t,e,i,r,s){return`${e},${i},${r},${s},${t.join()}`}}function u(t,e,i,r){let{stops:n,startAngle:o,endAngle:l}=r;for(;i<0;)i+=s.f7;for(;i>s.f7;)i-=s.f7;if(i<o||i>l)return n[0].color;let h,u,d=(i-o)/(l-o);for(let t=0;t<n.length;t++)if(n[t].offset>=d){h=n[t-1],u=n[t];break}return d=(d-h.offset)/(u.offset-h.offset),(0,a.BM)(h.color,u.color,d,!1)}function d(t,e,i,r,s,n,a,u,d){let c=Math.floor(180*s/Math.PI),p=o.GetCanvas(),g=o.GetCtx();if(!g)return null;let m=h.GetSize(u),f=h.GetSize(d),v=h.Get(e,i,r,n,a,m,f);if(v)return v;let y=Math.sqrt(Math.max(Math.max(Math.pow(i,2)+Math.pow(r,2),Math.pow(m-i,2)+Math.pow(r,2)),Math.max(Math.pow(m-i,2)+Math.pow(f-r,2),Math.pow(i,2)+Math.pow(f-r,2)))),_=c+1,b=s/Math.max(1,_-1),x=l.getInstance().GetOrCreate(i,r,m,f,e,_),S=2*Math.PI*y/360;p.width=m,p.height=f,g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,m,f),g.translate(i,r),g.rotate(n);for(let t=0,e=_-1;t<e&&!(n+t*b>a);t++){let e=x.getColor(t);g.beginPath(),g.rotate(b),g.moveTo(0,0),g.lineTo(y,-2*S),g.lineTo(y,0),g.fillStyle=e,g.closePath(),g.fill()}let A=g.getImageData(0,0,m,f);return p.width=A.width,p.height=A.height,g.putImageData(A,0,0),(v=t.createPattern(p,"no-repeat"))&&h.Set(e,i,r,n,a,v,m,f),v}h.cache={},h.ImageSize=[20,40,80,160,320,640,1280,2560]},4193:function(t,e,i){"use strict";i.d(e,{A:()=>s,r:()=>r});let r=Symbol.for("CanvasFactory"),s=Symbol.for("Context2dFactory")},9355:function(t,e,i){"use strict";i.d(e,{JN:()=>a});var r=i(6480),s=i(534),n=i(4193);function a(t){return r.n.getNamed(n.r,s.w.global.env)(t)}},1087:function(t,e,i){"use strict";i.d(e,{BM:()=>o});var r=i(9772),s=i(1601),n=i(7636);function a(t,e=!1){return Array.isArray(t)&&(0,s.Z)(t[0])?e?`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])},${t[3].toFixed(2)})`:`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])})`:t}function o(t,e,i,r,a){return Array.isArray(t)&&!(0,s.Z)(t[0])||Array.isArray(e)&&!(0,s.Z)(e[0])?[,,,,].fill(0).map((s,a)=>l((0,n.Z)(t)?t[a]:t,(0,n.Z)(e)?e[a]:e,i,r)):l(t,e,i,r,a)}function l(t,e,i,s,n){var l,h,u;if(!t||!e)return t&&a(t)||e&&a(e)||!1;let c,p,g=!1,m=!1;if(Array.isArray(t)?c=t:"string"==typeof t?c=r.VH.Get(t,r.Mr.Color255):g=!0,Array.isArray(e)?p=e:"string"==typeof e?p=r.VH.Get(e,r.Mr.Color255):m=!0,g!==m){let r=g?t:e,l=g?e:t,h=Object.assign(Object.assign({},r),{stops:r.stops.map(t=>Object.assign(Object.assign({},t),{color:a(l)}))});return g?o(r,h,i,s,n):o(h,r,i,s,n)}if(g){if(t.gradient===e.gradient){let r=t.stops,s=e.stops;if(r.length!==s.length)return!1;if("linear"===t.gradient)return function(t,e,i){let r=t.stops,s=e.stops;return{gradient:"linear",x0:t.x0+(e.x0-t.x0)*i,x1:t.x1+(e.x1-t.x1)*i,y0:t.y0+(e.y0-t.y0)*i,y1:t.y1+(e.y1-t.y1)*i,stops:Array(r.length).fill(0).map((t,e)=>({color:d(r[e].color,s[e].color,i),offset:r[e].offset+(s[e].offset-r[e].offset)*i}))}}(t,e,i);if("radial"===t.gradient)return function(t,e,i){let r=t.stops,s=e.stops;return{gradient:"radial",x0:t.x0+(e.x0-t.x0)*i,x1:t.x1+(e.x1-t.x1)*i,y0:t.y0+(e.y0-t.y0)*i,y1:t.y1+(e.y1-t.y1)*i,r0:t.r0+(e.r0-t.r0)*i,r1:t.r1+(e.r1-t.r1)*i,stops:Array(r.length).fill(0).map((t,e)=>({color:d(r[e].color,s[e].color,i),offset:r[e].offset+(s[e].offset-r[e].offset)*i}))}}(t,e,i);if("conical"===t.gradient)return function(t,e,i){let r=t.stops,s=e.stops;return{gradient:"conical",startAngle:t.startAngle+(e.startAngle-t.startAngle)*i,endAngle:t.endAngle+(e.endAngle-t.endAngle)*i,x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i,stops:Array(r.length).fill(0).map((t,e)=>({color:d(r[e].color,s[e].color,i),offset:r[e].offset+(s[e].offset-r[e].offset)*i}))}}(t,e,i)}return!1}return n&&n(c,p),a((l=c,h=p,u=i,[l[0]+(h[0]-l[0])*u,l[1]+(h[1]-l[1])*u,l[2]+(h[2]-l[2])*u,l[3]+(h[3]-l[3])*u]),s)}let h=[0,0,0,0],u=[0,0,0,0];function d(t,e,i){return r.VH.Get(t,r.Mr.Color255,h),r.VH.Get(e,r.Mr.Color255,u),`rgba(${Math.round(h[0]+(u[0]-h[0])*i)},${Math.round(h[1]+(u[1]-h[1])*i)},${Math.round(h[2]+(u[2]-h[2])*i)},${h[3]+(u[3]-h[3])*i})`}},9772:function(t,e,i){"use strict";i.d(e,{Mr:()=>s,VH:()=>a});var r,s,n=i(9921);(r=s||(s={}))[r.Color255=0]="Color255",r[r.Color1=1]="Color1";class a{static Get(t,e=s.Color1,i=[0,0,0,1]){if(e===s.Color1){let e=a.store1[t];if(e)return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i;let r=n.Il.parseColorString(t);if(r){let e=[r.r/255,r.g/255,r.b/255,r.opacity];a.store1[t]=e,a.store255[t]=[r.r,r.g,r.b,r.opacity],i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]}return i}let r=a.store255[t];if(r)return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i;let o=n.Il.parseColorString(t);return o&&(a.store1[t]=[o.r/255,o.g/255,o.b/255,o.opacity],a.store255[t]=[o.r,o.g,o.b,o.opacity],i[0]=o.r,i[1]=o.g,i[2]=o.b,i[3]=o.opacity),i}static Set(t,e,i){if(e===s.Color1)a.store1[t]||(a.store1[t]=i,a.store255[t]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]);else{if(a.store255[t])return;a.store255[t]=i,a.store1[t]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}a.store255={},a.store1={}},2532:function(t,e,i){"use strict";var r,s;i.d(e,{Z:()=>n});let n=(r={},function(t){Object.prototype.hasOwnProperty;let e="function"==typeof Symbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=Object.getPrototypeOf(Function),r=("object"==typeof process&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL,Map),s=new WeakMap;function n(t,e,i){let n=s.get(t);if(o(n)){if(!i)return;n=new r,s.set(t,n)}let a=n.get(e);if(o(a)){if(!i)return;a=new r,n.set(e,a)}return a}function a(t,e,i){let r=n(e,i,!1);return!o(r)&&!!r.has(t)}function o(t){return void 0===t}function l(t){return null===t}function h(t){return"object"==typeof t?null!==t:"function"==typeof t}function u(t){let i=function(t,i){switch(function(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}let r="string",s=function(t,e){let i=t[e];if(null!=i){if(!d(i))throw TypeError();return i}}(t,e);if(void 0!==s){let e=s.call(t,r);if(h(e))throw TypeError();return e}return function(t,e){if("string"===e){let e=t.toString;if(d(e)){let i=e.call(t);if(!h(i))return i}let i=t.valueOf;if(d(i)){let e=i.call(t);if(!h(e))return e}}else{let e=t.valueOf;if(d(e)){let i=e.call(t);if(!h(i))return i}let i=t.toString;if(d(i)){let e=i.call(t);if(!h(e))return e}}throw TypeError()}(t,r)}(t,0);return"symbol"==typeof i?i:""+i}function d(t){return"function"==typeof t}function c(t){let e=Object.getPrototypeOf(t);if("function"!=typeof t||t===i||e!==i)return e;let r=t.prototype,s=r&&Object.getPrototypeOf(r);if(null==s||s===Object.prototype)return e;let n=s.constructor;return"function"!=typeof n||n===t?e:n}t("defineMetadata",function(t,e,i,r){if(!h(i))throw TypeError();return function(t,e,i,r){n(i,r,!0).set(t,e)}(t,e,i,r)}),t("hasMetadata",function(t,e,i){if(!h(e))throw TypeError();return o(i)||(i=u(i)),function t(e,i,r){if(a(e,i,r))return!0;let s=c(i);return null!==s&&t(e,s,r)}(t,e,i)}),t("hasOwnMetadata",function(t,e,i){if(!h(e))throw TypeError();return o(i)||(i=u(i)),a(t,e,i)}),t("getMetadata",function(t,e,i){if(!h(e))throw TypeError();return o(i)||(i=u(i)),function t(e,i,r){if(a(e,i,r))return function(t,e,i){let r=n(e,i,!1);if(!o(r))return r.get(t)}(e,i,r);let s=c(i);return null===s?void 0:t(e,s,r)}(t,e,i)})}(function(t,e){"function"!=typeof r[t]&&Object.defineProperty(r,t,{configurable:!0,writable:!0,value:e}),s&&s(t,e)}),r)},4412:function(t,e,i){"use strict";i.d(e,{Ci:()=>n,P:()=>o,Pv:()=>h,hN:()=>u});var r=i(2683);function s(t,e){let i=0,s=t.length;for(let n=0;n<s;n++){let a=t[n],o=e[n],l=t[(n+1)%s],h=e[(n+1)%s];i+=r.HL.distanceNN(a,o,l,h)}return i/2}function n(t,e,i,r,n){return s([t.x,e.x,i.x,r.x],[t.y,e.y,i.y,r.y])}function a(t,e,i,r,s){let n=1-s;return n*n*n*t+3*e*s*n*n+3*i*s*s*n+r*s*s*s}function o(t,e,i,s,n){let o=a(t.x,e.x,i.x,s.x,n),l=a(t.y,e.y,i.y,s.y,n);return new r.E9(o,l)}function l(t,e,i,r){let s=1-r;return s*s*t+2*s*r*e+r*r*i}function h(t,e,i,s){let n=l(t.x,e.x,i.x,s),a=l(t.y,e.y,i.y,s);return new r.E9(n,a)}function u(t,e,i,r){return s([t.x,e.x,i.x],[t.y,e.y,i.y])}},4286:function(t,e,i){"use strict";i.d(e,{C:()=>n});var r=i(8103);let s=r.BZ-1e-8;class n{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,i,n,a,o){if(Math.abs(a-n)>s)return this.bounds.add(t-i,e-i),void this.bounds.add(t+i,e+i);let l,h,u,d,c=1/0,p=-1/0,g=1/0,m=-1/0;function f(t){u=i*Math.cos(t),d=i*Math.sin(t),u<c&&(c=u),u>p&&(p=u),d<g&&(g=d),d>m&&(m=d)}if(f(n),f(a),a!==n){if((n%=r.BZ)<0&&(n+=r.BZ),(a%=r.BZ)<0&&(a+=r.BZ),a<n&&(o=!o,l=n,n=a,a=l),o)for(a-=r.BZ,l=n-n%r.ou,h=0;h<4&&l>a;++h,l-=r.ou)f(l);else for(l=n-n%r.ou+r.ou,h=0;h<4&&l<a;++h,l+=r.ou)f(l)}this.bounds.add(t+c,e+g),this.bounds.add(t+p,e+m)}arcTo(t,e,i,r,s){this.bounds.add(t,e)}bezierCurveTo(t,e,i,r,s,n){this.bounds.add(t,e),this.bounds.add(i,r),this.bounds.add(s,n)}closePath(){}ellipse(){throw Error("不支持ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,i,r){this.bounds.add(t,e),this.bounds.add(i,r)}rect(t,e,i,r){this.bounds.add(t,e),this.bounds.add(t+i,e+r)}clear(){this.bounds.clear()}release(...t){}}},3116:function(t,e,i){"use strict";i.d(e,{D:()=>o,L:()=>l});var r=i(7636),s=i(8103);let n=function(){let t={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i},e="";function i(t){let i=Error(e+": "+t);throw i.source=e,i}function r(){return s("linear",t.linearGradient,n)||s("radial",t.radialGradient,o)||s("conic",t.conicGradient,a)}function s(e,r,s){return function(e,r){let s=v(e);if(s){v(t.startCall)||i("Missing (");let e=r(s);return v(t.endCall)||i("Missing )"),e}}(r,function(r){let n=s();return n&&(v(t.comma)||i("Missing comma before color stops")),{type:e,orientation:n,colorStops:c(p)}})}function n(){return f("directional",t.sideOrCorner,1)||f("angular",t.angleValue,1)}function a(){return f("angular",t.fromAngleValue,1)}function o(){let i,r,s=l();return s&&((i=[]).push(s),r=e,v(t.comma)&&((s=l())?i.push(s):e=r)),i}function l(){let t=function(){let t=f("shape",/^(circle)/i,0);return t&&(t.style=m()||h()),t}()||function(){let t=f("shape",/^(ellipse)/i,0);return t&&(t.style=g()||h()),t}();if(t)t.at=u();else{let e=h();if(e){t=e;let i=u();i&&(t.at=i)}else{let e=d();e&&(t={type:"default-radial",at:e})}}return t}function h(){return f("extent-keyword",t.extentKeywords,1)}function u(){if(f("position",/^at/,0)){let t=d();return t||i("Missing positioning value"),t}}function d(){let t={x:g(),y:g()};if(t.x||t.y)return{type:"position",value:t}}function c(e){let r=e(),s=[];if(r)for(s.push(r);v(t.comma);)(r=e())?s.push(r):i("One extra comma");return s}function p(){let e=f("hex",t.hexColor,1)||f("rgba",t.rgbaColor,1)||f("rgb",t.rgbColor,1)||f("literal",t.literalColor,0);return e||i("Expected color definition"),e.length=g(),e}function g(){return f("%",t.percentageValue,1)||f("position-keyword",t.positionKeywords,1)||m()}function m(){return f("px",t.pixelValue,1)||f("em",t.emValue,1)}function f(t,e,i){let r=v(e);if(r)return{type:t,value:r[i]}}function v(t){let i=/^[\n\r\t\s]+/.exec(e);i&&y(i[0].length);let r=t.exec(e);return r&&y(r[0].length),r}function y(t){e=e.substr(t)}return function(t){return e=t.toString(),function(){let t=c(r);return e.length>0&&i("Invalid input not EOF"),t}()}}();class a{static IsGradient(t){return!("string"==typeof t&&!t.includes("gradient"))}static IsGradientStr(t){return"string"==typeof t&&t.includes("gradient")}static Parse(t){if(a.IsGradientStr(t))try{let e=n(t)[0];if(e){if("linear"===e.type)return a.ParseLinear(e);if("radial"===e.type)return a.ParseRadial(e);if("conic"===e.type)return a.ParseConic(e)}}catch(t){}return t}static ParseConic(t){let{orientation:e,colorStops:i=[]}=t,r=s.pi/2,n=parseFloat(e.value)/180*s.pi-r;return{gradient:"conical",x:.5,y:.5,startAngle:n,endAngle:n+s.f7,stops:i.map(t=>({color:t.value,offset:parseFloat(t.length.value)/100}))}}static ParseRadial(t){let{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:e.map(t=>({color:t.value,offset:parseFloat(t.length.value)/100}))}}static ParseLinear(t){let{orientation:e,colorStops:i=[]}=t,r=s.pi/2,n="angular"===e.type?parseFloat(e.value)/180*s.pi:0;for(;n<0;)n+=s.f7;for(;n>=s.f7;)n-=s.f7;let a=0,o=0,l=0,h=0;return n<r?(a=0,o=1,l=Math.sin(n),h=o-Math.cos(n)):n<s.pi?(a=0,o=0,l=Math.cos(n-r),h=Math.sin(n-r)):n<s.pi+r?(o=0,l=(a=1)-Math.sin(n-s.pi),h=Math.cos(n-s.pi)):(l=(a=1)-Math.cos(n-r-s.pi),h-=Math.sin(n-r-s.pi)),{gradient:"linear",x0:a,y0:o,x1:l,y1:h,stops:i.map(t=>({color:t.value,offset:parseFloat(t.length.value)/100}))}}}function o(t,e,i){let r=e,{a:s,b:n,c:a,d:o}=t.currentMatrix,l=Math.sign(s)*Math.sqrt(s*s+n*n),h=Math.sign(o)*Math.sqrt(a*a+o*o);return l+h===0?0:r=r/Math.abs(l+h)*2*i}function l(t,e,i,s=0,n=0){let o,h;if(!e||!0===e)return"black";if((0,r.Z)(e))for(let t=0;t<e.length&&!(h=e[t]);t++);else h=e;if("string"==typeof(h=a.Parse(h)))return h;if(i.AABBBounds&&(!i.attribute||0!==i.attribute.scaleX||0!==i.attribute.scaleY)){let e=i.AABBBounds,r=e.x2-e.x1,a=e.y2-e.y1,l=e.x1-s,u=e.y1-n;if(i.attribute){let{scaleX:t=1,scaleY:e=1}=i.attribute;r/=t,a/=e,l/=t,u/=e}"linear"===h.gradient?o=function(t,e,i,r,s,n){var a,o,l,h;let u=t.createLinearGradient(i+(null!==(a=e.x0)&&void 0!==a?a:0)*s,r+(null!==(o=e.y0)&&void 0!==o?o:0)*n,i+(null!==(l=e.x1)&&void 0!==l?l:1)*s,r+(null!==(h=e.y1)&&void 0!==h?h:0)*n);return e.stops.forEach(t=>{u.addColorStop(t.offset,t.color)}),u}(t,h,l,u,r,a):"conical"===h.gradient?o=function(t,e,i,r,s,n){var a,o;let l=t.createConicGradient(i+(null!==(a=e.x)&&void 0!==a?a:0)*s,r+(null!==(o=e.y)&&void 0!==o?o:0)*n,e.startAngle,e.endAngle);return e.stops.forEach(t=>{l.addColorStop(t.offset,t.color)}),l.GetPattern(s+i,n+r,void 0)}(t,h,l,u,r,a):"radial"===h.gradient&&(o=function(t,e,i,r,s,n){var a,o,l,h,u,d;let c=t.createRadialGradient(i+(null!==(a=e.x0)&&void 0!==a?a:.5)*s,r+(null!==(o=e.y0)&&void 0!==o?o:.5)*n,Math.max(s,n)*(null!==(l=e.r0)&&void 0!==l?l:0),i+(null!==(h=e.x1)&&void 0!==h?h:.5)*s,r+(null!==(u=e.y1)&&void 0!==u?u:.5)*n,Math.max(s,n)*(null!==(d=e.r1)&&void 0!==d?d:.5));return e.stops.forEach(t=>{c.addColorStop(t.offset,t.color)}),c}(t,h,l,u,r,a))}return o||"orange"}},8906:function(t,e,i){"use strict";i.d(e,{EM:()=>a,Qc:()=>r,yb:()=>n});let r=Symbol("ContributionProvider");class s{constructor(t,e){this.serviceIdentifier=t,this.container=e}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}}function n(t,e){t(r).toDynamicValue(({container:t})=>new s(e,t)).inSingletonScope().whenTargetNamed(e)}function a(t,e){t(r).toDynamicValue(({container:t})=>new s(e,t)).whenTargetNamed(e)}},8908:function(t,e,i){"use strict";let r,s,n,a,o;i.d(e,{r:()=>C});var l=i(4286),h=i(7393);class u{constructor(){this._curves=[],this.bounds=new h.FB}get curves(){return this._curves}getCurveLengths(){return this._curves.map(t=>t.getLength())}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}let d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},p={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};var g=i(8103),m=i(3872),f=i(1805);function v(t,e,i,r){let s=function(t,e,i,r,s,n,a,o,l){let h=(0,f.M4)(a),u=Math.sin(h),d=Math.cos(h),c=d*(o-t)*.5+u*(l-e)*.5,p=d*(l-e)*.5-u*(o-t)*.5,m=c*c/((i=Math.abs(i))*i)+p*p/((r=Math.abs(r))*r);m>1&&(i*=m=Math.sqrt(m),r*=m);let v=d/i,y=u/i,_=-u/r,b=d/r,x=v*o+y*l,S=_*o+b*l,A=v*t+y*e,k=_*t+b*e,w=1/((A-x)*(A-x)+(k-S)*(k-S))-.25;w<0&&(w=0);let C=Math.sqrt(w);n===s&&(C=-C);let T=.5*(x+A)-C*(k-S),E=.5*(S+k)+C*(A-x),M=Math.atan2(S-E,x-T),B=Math.atan2(k-E,A-T)-M;B<0&&1===n?B+=g.BZ:B>0&&0===n&&(B-=g.BZ);let D=Math.ceil(Math.abs(B/(g.ou+.001))),O=[];for(let t=0;t<D;++t){let e=M+t*B/D,s=M+(t+1)*B/D;O[t]=[T,E,e,s,i,r,u,d]}return O}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,i);for(let e=0;e<s.length;++e){let i=function(t){let e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],l=t[7],h=l*n,u=-o*a,d=o*n,c=l*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(s),f=Math.sin(s),v=.5*(s-r),y=Math.sin(.5*v),_=8/3*y*y/Math.sin(v),b=e+p-_*g,x=i+g+_*p,S=e+m,A=i+f,k=S+_*f,w=A-_*m;return[h*b+u*x,d*b+c*x,h*k+u*w,d*k+c*w,h*S+u*A,d*S+c*A]}(s[e]);t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}}let y=(t,e,i,r,s,n,a)=>{let o=Math.abs(i-e),l=o>.5*Math.PI?Math.ceil(2*o/Math.PI):1,h=(i-e)/l;for(let i=0;i<l;i++){let o=e+h*i,l=e+h*(i+1),u=4*Math.tan(Math.abs(h)/4)/3,d=l<o?-1:1,c=Math.cos(o),p=Math.sin(o),g=Math.cos(l),m=Math.sin(l),f=c*n+r,v=p*a+s,y=g*n+r,_=m*a+s,b=n*u*d,x=a*u*d;t.push(f-b*p,v+x*c,y+b*m,_-x*g,y,_)}};var _=i(5399),b=i(2683),x=i(1123),S=i(7574),A=i(4884);class k{constructor(t){this.path=t,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(t,e){return this._lastX=this._startX=t,this._lastY=this._startY=e,this}lineTo(t,e){let i=this.addLinearCurve(t,e);this.path.addCurve(i),this._lastX=t,this._lastY=e}addLinearCurve(t,e){return new x.g(new b.E9(this._lastX,this._lastY),new b.E9(t,e))}quadraticCurveTo(t,e,i,r){let s=new A.Z(new b.E9(this._lastX,this._lastY),new b.E9(t,e),new b.E9(i,r));this.path.addCurve(s),this._lastX=i,this._lastY=r}bezierCurveTo(t,e,i,r,s,n){let a=new S.AX(new b.E9(this._lastX,this._lastY),new b.E9(t,e),new b.E9(i,r),new b.E9(s,n));this.path.addCurve(a),this._lastX=s,this._lastY=n}arcTo(t,e,i,r,s){throw Error("CurveContext不支持调用arcTo")}ellipse(t,e,i,r,s,n,a,o){throw Error("CurveContext不支持调用ellipse")}rect(t,e,i,r){throw Error("CurveContext不支持调用rect")}arc(t,e,i,r,s,n){throw Error("CurveContext不支持调用arc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}var w=i(613);class C extends u{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new l.C(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([p.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([p.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.commandList.push([p.Q,t,e,i,r]),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,s,n){return this.commandList.push([p.C,t,e,i,r,s,n]),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,s,n),this}arcTo(t,e,i,r,s){return this.commandList.push([p.AT,t,e,i,r,s]),this._ctx&&this._ctx.arcTo(t,e,i,r,s),this}ellipse(t,e,i,r,s,n,a,o){return this.commandList.push([p.E,t,e,i,r,s,n,a,o]),this._ctx&&this._ctx.ellipse(t,e,i,r,s,n,a,o),this}rect(t,e,i,r){return this.commandList.push([p.R,t,e,i,r]),this._ctx&&this._ctx.rect(t,e,i,r),this}arc(t,e,i,r,s,n){return this.commandList.push([p.A,t,e,i,r,s,n]),this._ctx&&this._ctx.arc(t,e,i,r,s,n),this}closePath(){return this.commandList.push([p.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this._curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){let t=new k(this);(0,_.h)(this.commandList,t,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){let t=[];t[p.M]=t=>`M${t[1]} ${t[2]}`,t[p.L]=t=>`L${t[1]} ${t[2]}`,t[p.Q]=t=>`Q${t[1]} ${t[2]} ${t[3]} ${t[4]}`,t[p.C]=t=>`C${t[1]} ${t[2]} ${t[3]} ${t[4]} ${t[5]} ${t[6]}`,t[p.A]=t=>{let e=[];y(e,t[4],t[5],t[1],t[2],t[3],t[3]);let i="";for(let t=0;t<e.length;t+=6)i+=`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`;return i},t[p.R]=t=>`M${t[1]} ${t[2]} h${t[3]} v${t[4]} H${t[1]}Z`,t[p.Z]=t=>"Z",this.toStringCbList=t}let t=this.toStringCbList,e="";return this.commandList.forEach(i=>{e+=t[i[0]](i)}),e}fromString(t,e,i,l,h){this.clear();let u=function(t){let e,i;if(!t)return[];let l=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===l)return[];let h=[];for(let t=0,u=l.length;t<u;t++)if(s=(r=l[t]).slice(1),e=[n=r[0]],null!==(i=s.match(d))){for(let t=0,r=i.length;t<r;t++)Number.isNaN(a=parseFloat(i[t]))||e.push(a);if(o=c[n],e.length-1>o){let t,i=n;for(let r=1,s=e.length;r<s;r+=o){t=[i];for(let i=r,s=r+o;i<s;i++)t.push(e[i]);h.push(t),"m"===i?i="l":"M"===i&&(i="L")}}else h.push(e)}else h.push(e);return h}(t);return this._runCommandStrList(u,e,i,l,h),this._updateBounds(),this}fromLine(t){let{points:e,curveType:i,clipRangeByDimension:r}=t.attribute;if(!e)return;let s=(0,w.X0)(e,i);"x"===r?this.direction=m.Nm.ROW:"y"===r?this.direction=m.Nm.COLUMN:"auto"===r&&(this.direction=s.direction),this._curves=s.curves}fromCustomPath2D(t,e,i,r,s){return this.clear(),this._runCommandList(t.commandList,e,i,r,s),this._updateBounds(),this}transform(t,e,i,r){let s=this.commandList;if(!this.transformCbList){let t=[];t[p.M]=this.moveToTransform,t[p.L]=this.lineToTransform,t[p.Q]=this.quadraticCurveToTransform,t[p.C]=this.bezierCurveToTransform,t[p.AT]=this.arcToTransform,t[p.E]=this.ellipseTransform,t[p.R]=this.rectTransform,t[p.A]=this.arcTransform,t[p.Z]=this.closePathTransform,this.transformCbList=t}s.forEach(s=>{this.transformCbList[s[0]](s,t,e,i,r)}),this._updateBounds()}moveToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i}lineToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i}quadraticCurveToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r+e,t[4]=t[4]*s+i}bezierCurveToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r+e,t[4]=t[4]*s+i,t[5]=t[5]*r+e,t[6]=t[6]*s+i}arcToTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r+e,t[4]=t[4]*s+i,t[5]=t[5]*(r+s)/2}ellipseTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r,t[4]=t[4]*s}rectTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*r,t[4]=t[4]*s}arcTransform(t,e,i,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+i,t[3]=t[3]*(r+s)/2}closePathTransform(){}_runCommandStrList(t,e=0,i=0,r=1,s=1){let n,a,o,l,h,u=null,d=0,c=0,p=0,g=0;for(let m=0,f=t.length;m<f;++m){switch(n=t[m],1===r&&1===s||(n=function(t,e,i){let r=T[0]=t[0];if("a"===r||"A"===r)T[1]=e*t[1],T[2]=i*t[2],T[3]=t[3],T[4]=t[4],T[5]=t[5],T[6]=e*t[6],T[7]=i*t[7];else if("h"===r||"H"===r)T[1]=e*t[1];else if("v"===r||"V"===r)T[1]=i*t[1];else for(let r=1,s=t.length;r<s;++r)T[r]=(r%2==1?e:i)*t[r];return T}(n,r,s)),n[0]){case"l":d+=n[1],c+=n[2],this.lineTo(d+e,c+i);break;case"L":d=n[1],c=n[2],this.lineTo(d+e,c+i);break;case"h":d+=n[1],this.lineTo(d+e,c+i);break;case"H":d=n[1],this.lineTo(d+e,c+i);break;case"v":c+=n[1],this.lineTo(d+e,c+i);break;case"V":c=n[1],this.lineTo(d+e,c+i);break;case"m":d+=n[1],c+=n[2],this.moveTo(d+e,c+i);break;case"M":d=n[1],c=n[2],this.moveTo(d+e,c+i);break;case"c":a=d+n[5],o=c+n[6],p=d+n[3],g=c+n[4],this.bezierCurveTo(d+n[1]+e,c+n[2]+i,p+e,g+i,a+e,o+i),d=a,c=o;break;case"C":d=n[5],c=n[6],p=n[3],g=n[4],this.bezierCurveTo(n[1]+e,n[2]+i,p+e,g+i,d+e,c+i);break;case"s":a=d+n[3],o=c+n[4],null===u[0].match(/[CcSs]/)?(p=d,g=c):(p=2*d-p,g=2*c-g),l=d+n[1],h=c+n[2],this.bezierCurveTo(p+e,g+i,l+e,h+i,a+e,o+i),p=l,g=h,d=a,c=o;break;case"S":a=n[3],o=n[4],null===u[0].match(/[CcSs]/)?(p=d,g=c):(p=2*d-p,g=2*c-g),l=n[1],h=n[2],this.bezierCurveTo(p+e,g+i,l+e,h+i,a+e,o+i),p=l,g=h,d=a,c=o;break;case"q":a=d+n[3],o=c+n[4],p=d+n[1],g=c+n[2],this.quadraticCurveTo(p+e,g+i,a+e,o+i),d=a,c=o;break;case"Q":a=n[3],o=n[4],this.quadraticCurveTo(n[1]+e,n[2]+i,a+e,o+i),d=a,c=o,p=n[1],g=n[2];break;case"t":a=d+n[1],o=c+n[2],null===u[0].match(/[QqTt]/)?(p=d,g=c):"t"===u[0]?(p=2*d-l,g=2*c-h):"q"===u[0]&&(p=2*d-p,g=2*c-g),l=p,h=g,this.quadraticCurveTo(p+e,g+i,a+e,o+i),d=a,c=o,p=d+n[1],g=c+n[2];break;case"T":a=n[1],o=n[2],p=2*d-p,g=2*c-g,this.quadraticCurveTo(p+e,g+i,a+e,o+i),d=a,c=o;break;case"a":v(this,d+e,c+i,[n[1],n[2],n[3],n[4],n[5],n[6]+d+e,n[7]+c+i]),d+=n[6],c+=n[7];break;case"A":v(this,d+e,c+i,[n[1],n[2],n[3],n[4],n[5],n[6]+e,n[7]+i]),d=n[6],c=n[7];break;case"z":case"Z":this.closePath()}u=n}}_runCommandList(t,e=0,i=0,r=1,s=1){if(0!==e||0!==i||1!==r||1!==s)for(let n=0,a=t.length;n<a;++n){let a=t[n].slice();switch(a[0]){case p.L:this.lineToTransform(a,e,i,r,s);break;case p.M:this.moveToTransform(a,e,i,r,s);break;case p.C:this.bezierCurveToTransform(a,e,i,r,s);break;case p.Q:this.quadraticCurveToTransform(a,e,i,r,s);break;case p.A:this.arcToTransform(a,e,i,r,s);break;case p.E:this.ellipseTransform(a,e,i,r,s);break;case p.R:this.rectTransform(a,e,i,r,s);break;case p.AT:this.arcToTransform(a,e,i,r,s);break;case p.Z:this.closePath()}}else this.commandList=t.map(t=>t.slice())}_updateBounds(){this.bounds.clear(),(0,_.h)(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===m.Nm.COLUMN){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,g.Wn)(t.p0.y-e.p1.y)}if(this.direction===m.Nm.ROW){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,g.Wn)(t.p0.x-e.p1.x)}return this._curves.reduce((t,e)=>t+e.getLength(),0)}getYAt(t){if(!this.curves)return 1/0;for(let e=0;e<this.curves.length;e++){let i=this.curves[e];if(i.includeX(t))return i.getYAt(t)}return 1/0}getAttrAt(t){if(!this._curves)return{pos:{x:0,y:0},angle:0};let e,i=0;for(let r=0;r<this._curves.length;r++){let s=(e=this._curves[r]).getLength(this.direction);if(i+s>=t)break;i+=s}let r=(t-i)/e.getLength(this.direction);return{pos:e.getPointAt(r),angle:e.getAngleAt(r)}}drawWithClipRange(t,e,i,r,s){this.tryBuildCurves();let n=this.getLength()*s,a=0;for(let s=0;s<this._curves.length;s++){let o=this._curves[s],l=o.getLength(this.direction);if(!(a+l<=n)){let s=1-(a+l-n)/l;o.draw(t,i,r,e,e,s);break}o.draw(t,i,r,e,e,1),a+=l}}}let T=["l",0,0,0,0,0,0,0]},3872:function(t,e,i){"use strict";var r,s,n,a,o,l,h,u,d,c,p,g,m,f,v,y,_,b;i.d(e,{D5:()=>u,Gk:()=>n,Gz:()=>r,LZ:()=>s,Nm:()=>h,Oh:()=>d,Tq:()=>l,td:()=>a,uq:()=>o}),(c=r||(r={}))[c.NONE=0]="NONE",c[c.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",c[c.UPDATE_SHAPE=2]="UPDATE_SHAPE",c[c.CLEAR_SHAPE=253]="CLEAR_SHAPE",c[c.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",c[c.INIT=179]="INIT",c[c.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",c[c.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",c[c.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",c[c.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",c[c.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",c[c.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",c[c.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",c[c.CLEAR_LAYOUT=127]="CLEAR_LAYOUT",(p=s||(s={}))[p.GLOBAL=1]="GLOBAL",p[p.LOCAL=16]="LOCAL",p[p.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",p[p.LOCAL_ACCURATE=48]="LOCAL_ACCURATE",(g=n||(n={}))[g.INIT=0]="INIT",g[g.DEFAULT=1]="DEFAULT",g[g.STATE=2]="STATE",g[g.ANIMATE_BIND=10]="ANIMATE_BIND",g[g.ANIMATE_PLAY=11]="ANIMATE_PLAY",g[g.ANIMATE_START=12]="ANIMATE_START",g[g.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",g[g.ANIMATE_END=14]="ANIMATE_END",g[g.TRANSLATE=20]="TRANSLATE",g[g.TRANSLATE_TO=21]="TRANSLATE_TO",g[g.SCALE=22]="SCALE",g[g.SCALE_TO=23]="SCALE_TO",g[g.ROTATE=24]="ROTATE",g[g.ROTATE_TO=25]="ROTATE_TO",(m=a||(a={}))[m.INITIAL=0]="INITIAL",m[m.RUNNING=1]="RUNNING",m[m.PAUSED=2]="PAUSED",m[m.END=3]="END",(f=o||(o={}))[f.NORMAL=0]="NORMAL",f[f.SET_ATTR_IMMEDIATELY=1]="SET_ATTR_IMMEDIATELY",(v=l||(l={})).wait="wait",v.from="from",v.to="to",v.customAnimate="customAnimate",(y=h||(h={}))[y.ROW=1]="ROW",y[y.COLUMN=2]="COLUMN",(_=u||(u={}))[_.CubicBezierCurve=0]="CubicBezierCurve",_[_.QuadraticBezierCurve=1]="QuadraticBezierCurve",_[_.ArcCurve=2]="ArcCurve",_[_.LineCurve=3]="LineCurve",_[_.EllipseCurve=4]="EllipseCurve",_[_.MoveCurve=5]="MoveCurve",(b=d||(d={}))[b.beforeFillStroke=0]="beforeFillStroke",b[b.afterFillStroke=1]="afterFillStroke"},86:function(t,e,i){"use strict";i.d(e,{R:()=>r});class r{static GenAutoIncrementId(){return r.auto_increment_id++}}r.auto_increment_id=0},1600:function(t,e,i){"use strict";i.d(e,{f:()=>s});var r=i(6040);let s=(0,i(592).v)(r.B8)},592:function(t,e,i){"use strict";i.d(e,{f:()=>a,v:()=>o});var r=i(2230),s=i(6040),n=i(2532);function a(t){return(e,i,r)=>{var a,o;let l,h;a=s.LD,o=r.toString(),l={},n.Z.hasOwnMetadata(a,e)&&(l=n.Z.getMetadata(a,e)),void 0===(h=l[o])&&(h=[]),h.push(t),l[o]=h,n.Z.defineMetadata(a,l,e)}}function o(t){return e=>(i,s,n)=>a(new r.S(t,e))(i,s,n)}},7428:function(t,e,i){"use strict";i.d(e,{b:()=>n});var r=i(6040),s=i(2532);function n(){return function(t){return s.Z.defineMetadata(r.FL,null,t),t}}},7089:function(t,e,i){"use strict";i.d(e,{t:()=>a});var r=i(2230),s=i(6040),n=i(592);function a(t){return(0,n.f)(new r.S(s.vO,t))}},8429:function(t,e,i){"use strict";i.d(e,{n:()=>s});var r=i(86);class s{constructor(t){this.id=r.R.GenAutoIncrementId(),this.registry=t}}},2230:function(t,e,i){"use strict";i.d(e,{S:()=>s});var r=i(6040);class s{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===r.vO?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}},6040:function(t,e,i){"use strict";i.d(e,{B8:()=>s,FL:()=>o,LD:()=>a,Lc:()=>n,vO:()=>r});let r="named",s="inject",n="multi_inject",a="inversify:tagged",o="inversify:paramtypes"},7317:function(t,e,i){"use strict";i.d(e,{B$:()=>h,G9:()=>d,Iu:()=>l,M5:()=>p,TL:()=>s,fF:()=>g,jI:()=>o,lM:()=>n,mN:()=>u,uD:()=>a,zB:()=>c});var r=i(8103);function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e,i){let r=Math.sin(i),s=Math.cos(i),n=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=e[9],d=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+h*r,t[5]=a*s+u*r,t[6]=o*s+d*r,t[7]=l*s+c*r,t[8]=h*s-n*r,t[9]=u*s-a*r,t[10]=d*s-o*r,t[11]=c*s-l*r,t}function a(t,e,i){let r=Math.sin(i),s=Math.cos(i),n=e[0],a=e[1],o=e[2],l=e[3],h=e[8],u=e[9],d=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-h*r,t[1]=a*s-u*r,t[2]=o*s-d*r,t[3]=l*s-c*r,t[8]=n*r+h*s,t[9]=a*r+u*s,t[10]=o*r+d*s,t[11]=l*r+c*s,t}function o(t,e,i){let r=Math.sin(i),s=Math.cos(i),n=e[0],a=e[1],o=e[2],l=e[3],h=e[4],u=e[5],d=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+h*r,t[1]=a*s+u*r,t[2]=o*s+d*r,t[3]=l*s+c*r,t[4]=h*s-n*r,t[5]=u*s-a*r,t[6]=d*s-o*r,t[7]=c*s-l*r,t}function l(t,e,i){let r,s,n,a,o,l,h,u,d,c,p,g;let m=i[0],f=i[1],v=i[2];return e===t?(t[12]=e[0]*m+e[4]*f+e[8]*v+e[12],t[13]=e[1]*m+e[5]*f+e[9]*v+e[13],t[14]=e[2]*m+e[6]*f+e[10]*v+e[14],t[15]=e[3]*m+e[7]*f+e[11]*v+e[15]):(r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],l=e[5],h=e[6],u=e[7],d=e[8],c=e[9],p=e[10],g=e[11],t[0]=r,t[1]=s,t[2]=n,t[3]=a,t[4]=o,t[5]=l,t[6]=h,t[7]=u,t[8]=d,t[9]=c,t[10]=p,t[11]=g,t[12]=r*m+o*f+d*v+e[12],t[13]=s*m+l*f+c*v+e[13],t[14]=n*m+h*f+p*v+e[14],t[15]=a*m+u*f+g*v+e[15]),t}function h(t,e){t[0]=e.a,t[1]=e.b,t[2]=0,t[3]=0,t[4]=e.c,t[5]=e.d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e.e,t[13]=e.f,t[14]=0,t[15]=1}function u(t,e,i){let r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,i){let r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],l=e[5],h=e[6],u=e[7],d=e[8],c=e[9],p=e[10],g=e[11],m=e[12],f=e[13],v=e[14],y=e[15],_=i[0],b=i[1],x=i[2],S=i[3];return t[0]=_*r+b*o+x*d+S*m,t[1]=_*s+b*l+x*c+S*f,t[2]=_*n+b*h+x*p+S*v,t[3]=_*a+b*u+x*g+S*y,_=i[4],b=i[5],x=i[6],S=i[7],t[4]=_*r+b*o+x*d+S*m,t[5]=_*s+b*l+x*c+S*f,t[6]=_*n+b*h+x*p+S*v,t[7]=_*a+b*u+x*g+S*y,_=i[8],b=i[9],x=i[10],S=i[11],t[8]=_*r+b*o+x*d+S*m,t[9]=_*s+b*l+x*c+S*f,t[10]=_*n+b*h+x*p+S*v,t[11]=_*a+b*u+x*g+S*y,_=i[12],b=i[13],x=i[14],S=i[15],t[12]=_*r+b*o+x*d+S*m,t[13]=_*s+b*l+x*c+S*f,t[14]=_*n+b*h+x*p+S*v,t[15]=_*a+b*u+x*g+S*y,t}function c(t,e,i,n){let a,o,l,h,u,d,c,p,g,m;let f=e[0],v=e[1],y=e[2],_=n[0],b=n[1],x=n[2],S=i[0],A=i[1],k=i[2];return Math.abs(f-S)<r.Ho&&Math.abs(v-A)<r.Ho&&Math.abs(y-k)<r.Ho?s(t):(m=1/Math.hypot(c=f-S,p=v-A,g=y-k),c*=m,p*=m,g*=m,(m=Math.hypot(a=b*g-x*p,o=x*c-_*g,l=_*p-b*c))?(a*=m=1/m,o*=m,l*=m):(a=0,o=0,l=0),(m=Math.hypot(h=p*l-g*o,u=g*a-c*l,d=c*o-p*a))?(h*=m=1/m,u*=m,d*=m):(h=0,u=0,d=0),t[0]=a,t[1]=h,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=p,t[7]=0,t[8]=l,t[9]=d,t[10]=g,t[11]=0,t[12]=-(a*f+o*v+l*y),t[13]=-(h*f+u*v+d*y),t[14]=-(c*f+p*v+g*y),t[15]=1,t)}function p(t,e,i,r,s,n,a){let o=1/(e-i),l=1/(r-s),h=1/(n-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(s+r)*l,t[14]=(a+n)*h,t[15]=1,t}function g(t,e,i){let r=e[0],s=e[1],n=e[2],a=i[3]*r+i[7]*s+i[11]*n+i[15];return a=a||1,t[0]=(i[0]*r+i[4]*s+i[8]*n+i[12])/a,t[1]=(i[1]*r+i[5]*s+i[9]*n+i[13])/a,t[2]=(i[2]*r+i[6]*s+i[10]*n+i[14])/a,t}},5399:function(t,e,i){"use strict";i.d(e,{h:()=>s});let r=[(t,e,i,r,s,n,a)=>e.arc(t[1]*s+i,t[2]*n+r,t[3]*(s+n)/2,t[4],t[5],t[6],a),(t,e,i,r,s,n,a)=>e.arcTo(t[1]*s+i,t[2]*n+r,t[3]*s+i,t[4]*n+r,t[5]*(s+n)/2,a),(t,e,i,r,s,n,a)=>e.bezierCurveTo(t[1]*s+i,t[2]*n+r,t[3]*s+i,t[4]*n+r,t[5]*s+i,t[6]*n+r,a),(t,e,i,r)=>e.closePath(),(t,e,i,r,s,n)=>e.ellipse(t[1]*s+i,t[2]*n+r,t[3]*s,t[4]*n,t[5],t[6],t[7],t[8]),(t,e,i,r,s,n,a)=>e.lineTo(t[1]*s+i,t[2]*n+r,a),(t,e,i,r,s,n,a)=>e.moveTo(t[1]*s+i,t[2]*n+r,a),(t,e,i,r,s,n,a)=>e.quadraticCurveTo(t[1]*s+i,t[2]*n+r,t[3]*s+i,t[4]*n+r,a),(t,e,i,r,s,n,a)=>e.rect(t[1]*s+i,t[2]*n+r,t[3]*s,t[4]*n,a)];function s(t,e,i=0,n=0,a=1,o=1,l){for(let s=0;s<t.length;s++){let h=t[s];r[h[0]](h,e,i,n,a,o,l)}}},231:function(t,e,i){"use strict";i.d(e,{V3:()=>l,fW:()=>o,hJ:()=>h});var r=i(8103),s=i(3872),n=i(1481);function a(t,e,i,r,s,n,a){var o;let l=e.p0,h=r;if(i&&i.originP1===i.originP2&&(l=i.p0),e.defined)r||(t.lineTo(l.x+s,l.y+n,a),h=!r);else{let u;let{originP1:d,originP2:c}=e;if(d&&!1!==d.defined&&!i?u=l:d&&!1!==c.defined&&(u=null!==(o=e.p3)&&void 0!==o?o:e.p1),r){h=!r;let i=u?u.x:e.p0.x,o=u?u.y:e.p0.y;t.moveTo(i+s,o+n,a)}else u&&(h=!r,t.lineTo(u.x+s,u.y+n,a))}return h}function o(t,e,i,o,l){let h;let{offsetX:u=0,offsetY:d=0,offsetZ:c=0,mode:p="none",drawConnect:g=!1}=l||{};if(g&&"none"===p||!e)return;let m=!0,{curves:f}=e;if(i>=1){if(g){let e,i=!0;f.forEach((r,s)=>{r.originP1!==r.originP2&&(i=a(t,r,e,i,u,d,c)),e=r})}else f.forEach(e=>{e.defined?(m&&t.moveTo(e.p0.x+u,e.p0.y+d,c),(0,n.w)(t,e,1,l),m=!1):m=!0});return}if(i<=0)return;"x"===o?h=s.Nm.ROW:"y"===o?h=s.Nm.COLUMN:"auto"===o&&(h=e.direction);let v=i*e.tryUpdateLength(h),y=0,_=!0,b=null;for(let e=0,i=f.length;e<i;e++){let i=f[e],s=i.getLength(h),o=(v-y)/s;if(y+=s,o<0)break;if(g){if(i.originP1===i.originP2){b=i;continue}_=a(t,i,b,_,u,d,c),b=i}else{if(!i.defined){m=!0;continue}m&&t.moveTo(i.p0.x+u,i.p0.y+d,c),(0,n.w)(t,i,(0,r.VV)(o,1),l),m=!1}}}function l(t,e,i,r){let{offsetX:s=0,offsetY:n=0}=r||{},a=e?e.points[e.points.length-1]:i.points[0];t.moveTo(a.x+s,a.y+n),i.points.forEach(e=>{!1!==e.defined?t.lineTo(e.x+s,e.y+n):t.moveTo(e.x+s,e.y+n)})}function h(t,e,i,r){let{offsetX:s=0,offsetY:n=0}=r||{},{points:a}=i,o=[],l=0;for(let t=0;t<a.length;t++)!1===a[t].defined&&(l+1!==t&&o.slice(l,t),l=t);o.push(a),o.forEach((i,r)=>{var a,o,l,h;let u=e&&0===r?e.points[e.points.length-1]:i[0];t.moveTo(u.x+s,u.y+n),i.forEach(e=>{!1!==e.defined?t.lineTo(e.x+s,e.y+n):t.moveTo(e.x+s,e.y+n)});for(let e=i.length-1;e>=0;e--){let r=i[e];t.lineTo(null!==(a=r.x1)&&void 0!==a?a:r.x,null!==(o=r.y1)&&void 0!==o?o:r.y)}t.lineTo(null!==(l=u.x1)&&void 0!==l?l:u.x,null!==(h=u.y1)&&void 0!==h?h:u.y),t.closePath()})}},1481:function(t,e,i){"use strict";i.d(e,{w:()=>s});var r=i(7574);function s(t,e,i,s){if(!e.p1)return;let{offsetX:n=0,offsetY:a=0,offsetZ:o=0}=s||{};if(1===i)e.p2&&e.p3?t.bezierCurveTo(n+e.p1.x,a+e.p1.y,n+e.p2.x,a+e.p2.y,n+e.p3.x,a+e.p3.y,o):t.lineTo(n+e.p1.x,a+e.p1.y,o);else if(e.p2&&e.p3){let[s]=(0,r.mG)(e,i);t.bezierCurveTo(n+s.p1.x,a+s.p1.y,n+s.p2.x,a+s.p2.y,n+s.p3.x,a+s.p3.y,o)}else{let r=e.getPointAt(i);t.lineTo(n+r.x,a+r.y,o)}}},2569:function(t,e,i){"use strict";i.d(e,{H:()=>r});class r{getLength(t){return null!=t?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}},7574:function(t,e,i){"use strict";i.d(e,{AX:()=>d,OB:()=>u,mG:()=>h});var r=i(2683),s=i(8103),n=i(2569),a=i(3872),o=i(4412),l=i(4884);function h(t,e){let{p0:i,p1:s,p2:n,p3:a}=t,l=(0,o.P)(i,s,n,a,e),h=r.HL.pointAtPP(i,s,e),u=r.HL.pointAtPP(s,n,e),c=r.HL.pointAtPP(n,a,e),p=r.HL.pointAtPP(h,u,e),g=r.HL.pointAtPP(u,c,e);return[new d(i,h,p,l),new d(l,g,c,a)]}function u(t,e){let{p0:i,p1:s,p2:n}=t,a=(0,o.Pv)(i,s,n,e),h=r.HL.pointAtPP(i,s,e),u=r.HL.pointAtPP(s,n,e);return[new l.Z(i,h,a),new l.Z(a,u,n)]}class d extends n.H{constructor(t,e,i,r){super(),this.type=a.D5.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=i,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(!1!==this.defined)return(0,o.P)(this.p0,this.p1,this.p2,this.p3,t);throw Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?(0,o.Ci)(this.p0,this.p1,this.p2,this.p3,0):60}calcProjLength(t){return t===a.Nm.ROW?(0,s.Wn)(this.p0.x-this.p3.x):t===a.Nm.COLUMN?(0,s.Wn)(this.p0.y-this.p3.y):0}getAngleAt(t){let e=(0,s.Fp)(t-.01,0),i=(0,s.VV)(t+.01,1),r=this.getPointAt(e),n=this.getPointAt(i);return(0,s.fv)(n.y-r.y,n.x-r.x)}draw(t,e,i,r,s,n){if(t.moveTo(this.p0.x*r+e,this.p0.y*s+i),n>=1)t.bezierCurveTo(this.p1.x*r+e,this.p1.y*s+i,this.p2.x*r+e,this.p2.y*s+i,this.p3.x*r+e,this.p3.y*s+i);else if(n>0){let[a]=h(this,n);t.bezierCurveTo(a.p1.x*r+e,a.p1.y*s+i,a.p2.x*r+e,a.p2.y*s+i,a.p3.x*r+e,a.p3.y*s+i)}}includeX(t){let e=(0,s.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(0,s.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return t>=e&&t<=i}getYAt(t){let e=(0,s.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(t-e)/((0,s.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-e);return this.getPointAt(i).y}}},1123:function(t,e,i){"use strict";i.d(e,{d:()=>o,g:()=>l});var r=i(2683),s=i(8103),n=i(2569),a=i(3872);function o(t,e){let{p0:i,p1:s}=t,n=r.HL.pointAtPP(i,s,e);return[new l(i,n),new l(n,s)]}class l extends n.H{constructor(t,e){super(),this.type=a.D5.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(!1!==this.defined)return r.HL.pointAtPP(this.p0,this.p1,t);throw Error("defined为false的点不能getPointAt")}getAngleAt(t){return null==this.angle&&(this.angle=(0,s.fv)(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?r.HL.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===a.Nm.ROW?(0,s.Wn)(this.p0.x-this.p1.x):t===a.Nm.COLUMN?(0,s.Wn)(this.p0.y-this.p1.y):0}draw(t,e,i,r,s,n){if(t.moveTo(this.p0.x*r+e,this.p0.y*s+i),n>=1)t.lineTo(this.p1.x*r+e,this.p1.y*s+i);else if(n>0){let a=this.getPointAt(n);t.lineTo(a.x*r+e,a.y*s+i)}}includeX(t){return t>=this.p0.x&&t<=this.p1.x||t>=this.p1.x&&t<=this.p0.x}getYAt(t){if(this.includeX(t)){let e=this.p0,i=this.p1;this.p0.x>this.p1.x&&(e=this.p1,i=this.p0);let r=(t-e.x)/(i.x-e.x);return e.y+r*(i.y-e.y)}return 1/0}}},4884:function(t,e,i){"use strict";i.d(e,{Z:()=>l});var r=i(4412),s=i(3872),n=i(2569),a=i(8103),o=i(7574);class l extends n.H{constructor(t,e,i){super(),this.type=s.D5.QuadraticBezierCurve,this.p0=t,this.p1=e,this.p2=i}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(t){if(!1!==this.defined)return(0,r.Pv)(this.p0,this.p1,this.p2,t);throw Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?(0,r.hN)(this.p0,this.p1,this.p2,0):60}calcProjLength(t){return t===s.Nm.ROW?(0,a.Wn)(this.p0.x-this.p2.x):t===s.Nm.COLUMN?(0,a.Wn)(this.p0.y-this.p2.y):0}getAngleAt(t){let e=(0,a.Fp)(t-.01,0),i=(0,a.VV)(t+.01,1),r=this.getPointAt(e),s=this.getPointAt(i);return(0,a.fv)(s.y-r.y,s.x-r.x)}draw(t,e,i,r,s,n){if(t.moveTo(this.p0.x*r+e,this.p0.y*s+i),n>=1)t.quadraticCurveTo(this.p1.x*r+e,this.p1.y*s+i,this.p2.x*r+e,this.p2.y*s+i);else if(n>0){let[a]=(0,o.OB)(this,n);t.quadraticCurveTo(a.p1.x*r+e,a.p1.y*s+i,a.p2.x*r+e,a.p2.y*s+i)}}getYAt(t){throw Error("QuadraticBezierCurve暂不支持getYAt")}includeX(t){throw Error("QuadraticBezierCurve暂不支持includeX")}}},613:function(t,e,i){"use strict";i.d(e,{X0:()=>E});var r=i(8103),s=i(2683),n=i(3872),a=i(7574),o=i(1123);class l{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,i,r,n,o,l,h){let u=new a.AX(new s.E9(this._lastX,this._lastY),new s.E9(t,e),new s.E9(i,r),new s.E9(n,o));u.originP1=this._lastOriginP,u.originP2=h,u.defined=l,this.curves.push(u),this._lastX=n,this._lastY=o,this._lastOriginP=h}closePath(){if(this.curves.length<2)return;let t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw Error("SegContext不支持调用ellipse")}lineTo(t,e,i,r){let s=this.addLinearCurve(t,e,i,this._lastOriginP,r);this.curves.push(s),this._lastX=t,this._lastY=e,this._lastOriginP=r}moveTo(t,e,i){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(t,e,i,r){throw Error("SegContext不支持调用quadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,i,r,n){let a=new o.g(new s.E9(this._lastX,this._lastY),new s.E9(t,e));return a.originP1=r,a.originP2=n,a.defined=i,a}getPointAt(t){throw Error("暂未实现")}getCurveLengths(){return[]}getLength(t){var e,i;if(t===n.Nm.COLUMN){if(!this.curves.length)return 0;let t=this.curves[0],i=this.curves[this.curves.length-1],s=null!==(e=i.p3)&&void 0!==e?e:i.p1;return(0,r.Wn)(t.p0.y-s.y)}if(t===n.Nm.ROW){if(!this.curves.length)return 0;let t=this.curves[0],e=this.curves[this.curves.length-1],s=null!==(i=e.p3)&&void 0!==i?i:e.p1;return(0,r.Wn)(t.p0.x-s.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((t,e)=>t+e.getLength(),0)),this.length}}class h extends l{bezierCurveTo(t,e,i,r,s,n,a,o){return super.bezierCurveTo(e,t,r,i,n,s,a,o)}lineTo(t,e,i,r){return super.lineTo(e,t,i,r)}moveTo(t,e,i){return super.moveTo(e,t,i)}clear(){return super.clear()}}function u(t,e,i=1){let r=!1;for(let i=0,s=e.length;i<=s;i++)i>=s===r&&((r=!r)?t.lineStart():t.lineEnd()),r&&t.point(e[i])}function d(t,e,i){let s=null!=e?e:(0,r.Wn)(i[i.length-1].x-i[0].x)>(0,r.Wn)(i[i.length-1].y-i[0].y)?n.Nm.ROW:n.Nm.COLUMN;return"monotoneY"===t?new h(t,s):new l(t,s)}class c{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function p(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;let s=d("linear",i,t);return u(new c(s,r),t,1),s}function g(t,e,i,r,s){t.context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6,r,t.lastPoint1)}class m{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&g(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;break;default:g(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function f(t,e,i){let r=t._x1-t._x0,s=e-t._x1,n=(t._y1-t._y0)/(r||Number(s<0&&-0)),a=(i-t._y1)/(s||Number(r<0&&-0));return((n<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(n),Math.abs(a),.5*Math.abs((n*s+a*r)/(r+s)))||0}function v(t,e){let i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function y(t,e,i,r,s){let n=t._x0,a=t._y0,o=t._x1,l=t._y1,h=(o-n)/3;t.context.bezierCurveTo(n+h,a+h*e,o-h,l-h*i,o,l,r,t.lastPoint1)}class _{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:y(this,this._t0,v(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN,i=t.x,r=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(i,r,t);break;case 1:this._point=2;break;case 2:this._point=3,y(this,v(this,e=f(this,i,r)),e,!1!==this._lastDefined1&&!1!==this._lastDefined2,t);break;default:y(this,this._t0,e=f(this,i,r),!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class b extends _{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}class x{constructor(t,e=.5,i){this.context=t,this._t=e,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t);else{let r=this._x*(1-this._t)+e*this._t;.5===this._t?this.context.lineTo(r,this._y,!1!==this._lastDefined,this.lastPoint):this.context.lineTo(r,this._y,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(r,i,!1!==this._lastDefined&&!1!==t.defined,t)}}this._lastDefined=t.defined,this._x=e,this._y=i,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function S(t,e,i={}){let{direction:s,startPoint:a}=i;if(t.length<2-Number(!!a))return null;let o=new l("step",null!=s?s:(0,r.Wn)(t[t.length-1].x-t[0].x)>(0,r.Wn)(t[t.length-1].y-t[0].y)?n.Nm.ROW:n.Nm.COLUMN);return u(new x(o,e,a),t,1),o}class A extends c{lineEnd(){this.context.closePath()}}function k(t,e,i,s,n){let a=t._x1,o=t._y1,l=t._x2,h=t._y2;if(t._l01_a>r.Ho){let e=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*e-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,o=(o*e-t._y0*t._l12_2a+t._y2*t._l01_2a)/i}if(t._l23_a>r.Ho){let r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);l=(l*r+t._x1*t._l23_2a-e*t._l12_2a)/s,h=(h*r+t._y1*t._l23_2a-i*t._l12_2a)/s}t.context.bezierCurveTo(a,o,l,h,t._x2,t._y2,s,t.lastPoint1)}function w(t,e){return function(i,r,s={}){let{direction:n,startPoint:a}=s;if(i.length<2-Number(!!a))return null;if(i.length<3-Number(!!a))return p(i,s);let o=d(t,n,i);return u(new e(o,r,a),i,2),o}}let C=w("catmullRom",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,r=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2):this.context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3;default:k(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}),T=w("catmullRomClosed",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,r=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=i;break;case 1:this._point=2,this.context.moveTo(this._x4=e,this._y4=i,t);break;case 2:this._point=3,this._x5=e,this._y5=i;break;default:k(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}});function E(t,e,i){var r,s;switch(e){case"linear":default:return p(t,i);case"basis":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;if(t.length<3-Number(!!r))return p(t,e);let s=d("basis",i,t);return u(new m(s,r),t,2),s}(t,i);case"monotoneX":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;if(t.length<3-Number(!!r))return p(t,e);let s=d("monotoneX",i,t);return u(new _(s,r),t,2),s}(t,i);case"monotoneY":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;if(t.length<3-Number(!!r))return p(t,e);let s=d("monotoneY",i,t);return u(new b(s,r),t,2),s}(t,i);case"step":return S(t,.5,i);case"stepBefore":return S(t,0,i);case"stepAfter":return S(t,1,i);case"catmullRom":return C(t,null!==(r=null==i?void 0:i.curveTension)&&void 0!==r?r:.5,i);case"catmullRomClosed":return T(t,null!==(s=null==i?void 0:i.curveTension)&&void 0!==s?s:.5,i);case"linearClosed":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;let s=d("linear",i,t);return u(new A(s,r),t,1),s}(t,i)}}},6490:function(t,e,i){"use strict";i.d(e,{U:()=>o});var r=i(8103),s=i(1601),n=i(4546);let a=r.pi/2;function o(t,e,i,l,h,u,d=!0,c){let p;if(Array.isArray(d)&&(c=d,d=!0),l<0&&(e+=l,l=-l),h<0&&(i+=h,h=-h),(0,s.Z)(u,!0))p=[u=(0,r.Wn)(u),u,u,u];else if(Array.isArray(u)){let t,e;let i=u;switch(i.length){case 0:p=[0,0,0,0];break;case 1:p=[t=(0,r.Wn)(i[0]),t,t,t];break;case 2:case 3:p=[t=(0,r.Wn)(i[0]),e=(0,r.Wn)(i[1]),t,e];break;default:(p=i)[0]=(0,r.Wn)(p[0]),p[1]=(0,r.Wn)(p[1]),p[2]=(0,r.Wn)(p[2]),p[3]=(0,r.Wn)(p[3])}}else p=[0,0,0,0];if(l<0||p[0]+p[1]+p[2]+p[3]<1e-12)return t.rect(e,i,l,h);let[g,m,f,v]=[[e,i],[e+l,i],[e+l,i+h],[e,i+h]],y=Math.min(l/2,h/2),_=[Math.min(y,p[0]),Math.min(y,p[1]),Math.min(y,p[2]),Math.min(y,p[3])],b=[g[0]+_[0],g[1]],x=[g[0],g[1]+_[0]],S=[m[0]-_[1],m[1]],A=[m[0],m[1]+_[1]],k=[f[0]-_[2],f[1]],w=[f[0],f[1]-_[2]],C=[v[0]+_[3],v[1]],T=[v[0],v[1]-_[3]];if(t.moveTo(b[0],b[1]),d){if(c&&c[0]?c[0](b[0],b[1],S[0],S[1]):t.lineTo(S[0],S[1]),!(0,n.h6)(S,A)){c&&c[0]&&t.moveTo(S[0],S[1]);let e=S[0],i=S[1]+_[1];t.arc(e,i,_[1],-a,0,!1)}if(c&&c[1]?c[1](A[0],A[1],w[0],w[1]):t.lineTo(w[0],w[1]),!(0,n.h6)(k,w)){let e=w[0]-_[2],i=w[1];c&&c[1]&&t.moveTo(w[0],w[1]),t.arc(e,i,_[2],0,a,!1)}if(c&&c[2]?c[2](k[0],k[1],C[0],C[1]):t.lineTo(C[0],C[1]),!(0,n.h6)(C,T)){let e=C[0],i=C[1]-_[3];c&&c[2]&&t.moveTo(C[0],C[1]),t.arc(e,i,_[3],a,r.pi,!1)}if(c&&c[3]?c[3](T[0],T[1],x[0],x[1]):t.lineTo(x[0],x[1]),!(0,n.h6)(b,x)){let e=b[0],i=b[1]+_[0];c&&c[3]&&t.moveTo(x[0],x[1]),t.arc(e,i,_[0],r.pi,r.pi+a,!1)}}else c&&c[0]?c[0](b[0],b[1],S[0],S[1]):t.lineTo(S[0],S[1]),c&&c[1]?c[1](S[0],S[1],k[0],k[1]):t.lineTo(k[0],k[1]),c&&c[2]?c[2](k[0],k[1],C[0],C[1]):t.lineTo(C[0],C[1]),c&&c[2]?c[2](C[0],C[1],b[0],b[1]):t.lineTo(b[0],b[1]);return c||t.closePath(),t}},6562:function(t,e,i){"use strict";function r(t,e,i){let r={},s=[];return t.forEachChildren(t=>{let{zIndex:i=e}=t.attribute;r[i]?r[i].push(t):(r[i]=[t],s.push(i))},i),s.sort((t,e)=>i?e-t:t-e),{childMap:r,zIdxArray:s}}function s(t,e,i,n=!1,a=!1){let o=!1;if(a)o=!0;else{let i;t.forEachChildren((t,r)=>{let{zIndex:s=e}=t.attribute;if(0===r)i=s;else if(i!==s)return o=!0,!0;return!1},n)}if(o){let{childMap:s,zIdxArray:o}=r(t,e,n),l=!1;for(let t=0;t<o.length&&!l;t++){let e=s[o[t]];a&&e.sort((t,e)=>{var i,r;return(n?-1:1)*((null!==(i=e.attribute.z)&&void 0!==i?i:0)-(null!==(r=t.attribute.z)&&void 0!==r?r:0))});for(let t=0;t<e.length;t++)if(i(e[t],t)){l=!0;break}}}else t.forEachChildren(i,n)}function n(t,e,i,r=!1){var s,a,o,l;return s=this,a=void 0,o=void 0,l=function*(){yield t.forEachChildrenAsync(i,r)},new(o||(o=Promise))(function(t,e){function i(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(e){var s;e.done?t(e.value):((s=e.value)instanceof o?s:new o(function(t){t(s)})).then(i,r)}n((l=l.apply(s,a||[])).next())})}function a(t,e,i,s=!1){let n=!1;t.forEachChildren((t,e)=>{let{zIndex:r=i}=t.attribute;if(0===e);else if(void 0!==r)return n=!0,!0;return!1},s);let o=null,l=!1;if(n){let{childMap:n,zIdxArray:a}=r(t,i,s),h=!1;for(let t=0;t<a.length&&!h;t++){let i=n[a[t]];for(let t=0;t<i.length;t++){if(l){h=!0,o=i[t];break}i[t]._uid!==e||(l=!0)}}}else t.forEachChildren(t=>l?(o=t,!0):(t._uid===e&&(l=!0),!1),s);return o}i.d(e,{Ud:()=>n,kD:()=>s,qA:()=>a})},5575:function(t,e,i){"use strict";i.d(e,{WD:()=>h,js:()=>o,nV:()=>l});var r=i(1725),s=i(6082),n=i(7623),a=i(9904);function o(t,e){return"end"===t||"right"===t?-e:"center"===t?-e/2:0}function l(t,e,i,r=0){return"middle"===t?-e/2:"top"===t?0:"bottom"===t?r-e:t&&"alphabetic"!==t?0:(i||(i=e),-(e-i)/2-.79*i)}function h(t){let e={},i=t=>/^\d+(\.\d+)?$/.test(`${t}`)?`${t}px`:`${t}`;return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(i=>{t[i]&&(e[(0,r.Z2)(i)]=t[i])}),["fontSize","lineHeight"].forEach(n=>{let a=(0,r.Z2)(n);(0,s.Z)(t[n])||(e[a]=i(t[n]))}),(0,n.Z)(t.maxLineWidth)&&(e["max-width"]=i(t.maxLineWidth)),t.underline?e["text-decoration"]="underline":t.lineThrough&&(e["text-decoration"]="line-through"),t.fill&&(0,a.Z)(t.fill)&&(e.color=t.fill),e}},3386:function(t,e,i){"use strict";i.d(e,{Dn:()=>d,SA:()=>y,VA:()=>A,dZ:()=>x,dj:()=>p,hT:()=>_,jx:()=>f,q9:()=>v});var r,s,n=i(1036),a=i(7636),o=i(8103),l=i(2683),h=i(9904);(r=s||(s={}))[r.Top=1]="Top",r[r.Right=2]="Right",r[r.Bottom=4]="Bottom",r[r.Left=8]="Left",r[r.ALL=15]="ALL";let u=[!1,!1,!1,!1],d=t=>{var e;let i=!0;if((0,n.Z)(t,!0)){for(let r=0;r<4;r++)u[r]=t,i&&(i=!(null!==(e=u[r])&&void 0!==e&&!e));i=t}else if(Array.isArray(t))for(let e=0;e<4;e++)u[e]=!!t[e],i&&(i=!!u[e]);else u[0]=!1,u[1]=!1,u[2]=!1,u[3]=!1;return{isFullStroke:i,stroke:u}},c=[0,0,0,0],p=t=>t?(0,a.Z)(t)?0===t.length?0:1===t.length?t[0]:2===t.length?(c[0]=t[0],c[2]=t[0],c[1]=t[1],c[3]=t[1],c):t:t:0,g=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],m=[1,2,3,0,1,2,3,0];function f(t,e,i,r){for(;t>=o.f7;)t-=o.f7;for(;t<0;)t+=o.f7;for(;t>e;)e+=o.f7;g[0].x=i,g[1].y=i,g[2].x=-i,g[3].y=-i;let s=Math.ceil(t/o.ou)%4,n=Math.ceil(e/o.ou)%4;if(r.add((0,o.mC)(t)*i,(0,o.O$)(t)*i),r.add((0,o.mC)(e)*i,(0,o.O$)(e)*i),s!==n||e-t>o.pi){let t=!1;for(let e=0;e<m.length;e++)if(t||s!==m[e]){if(t&&n===m[e])break;if(t){let t=g[m[e]];r.add(t.x,t.y)}}else{t=!0;let e=g[s];r.add(e.x,e.y)}}}function v(t,e,i){let{x:r,y:s}=(0,o.KU)(t.x,t.y,e.x,e.y,i),{x:n,y:a}=(0,o.KU)(t.x1,t.y1,e.x1,e.y1,i),h=new l.E9(r,s,n,a);return h.defined=e.defined,h}function y(t,e,i){if(!t||!e)return[];Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);let r=[];if(t.length>e.length){r=e.map(t=>{let e=new l.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let s=0;s<e.length;s++)r[s]=v(t[s],e[s],i)}else{r=e.map(t=>{let e=new l.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let s=0;s<t.length;s++)r[s]=v(t[s],e[s],i)}return r}function _(t,e){if((0,a.Z)(t)){let i;for(let r=0;r<t.length&&void 0===i;r++)i=t[r][e];return i}return t[e]}class b{constructor(t=b.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),t(0)},this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((t,e)=>t+e,0)/this.durations.length,1e3/60),1e3/30)}}b.TimeOut=1e3/60;let x=new b,S=(t,e)=>(0,h.Z)(t)&&"%"===t[t.length-1]?e*(Number.parseFloat(t.substring(0,t.length-1))/100):t,A=(t,e)=>{let i=S(t,e);return isNaN(i)?i:Math.max(e,i)}},3239:function(t,e,i){"use strict";i.d(e,{D0:()=>r,iR:()=>n,y2:()=>s});let r=Symbol.for("EnvContribution"),s=Symbol.for("VGlobal"),n="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol"},6480:function(t,e,i){"use strict";let r;i.d(e,{n:()=>m});var s=i(86);let n={Singleton:"Singleton",Transient:"Transient"},a={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class o{constructor(t,e){this.id=s.R.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=a.Invalid,this.constraint=t=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){let t=new o(this.serviceIdentifier,this.scope);return t.activated=t.scope===n.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}var l=i(6040),h=i(2532);class u{getConstructorMetadata(t){return{compilerGeneratedMetadata:h.Z.getMetadata(l.FL,t),userGeneratedMetadata:h.Z.getMetadata(l.LD,t)||{}}}getPropertiesMetadata(t){throw Error("暂未实现")}}var d=i(2230);let c=(r=l.vO,t=>{let e=e=>{if(null==e)return!1;if(e.key===r&&e.value===t)return!0;if(null==e.constructorArgsMetadata)return!1;let i=e.constructorArgsMetadata;for(let e=0;e<i.length;e++)if(i[e].key===r&&i[e].value===t)return!0;return!1};return e.metaData=new d.S(r,t),e});class p{constructor(t){this._binding=t}inRequestScope(){throw Error("暂未实现")}inSingletonScope(){return this._binding.scope=n.Singleton,this}inTransientScope(){return this._binding.scope=n.Transient,this}whenTargetNamed(t){return this._binding.constraint=c(t),this}}class g{constructor(t){this._binding=t}to(t){return this._binding.type=a.Instance,this._binding.implementationType=t,new p(this._binding)}toSelf(){let t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=a.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new p(this._binding)}toConstantValue(t){return this._binding.type=a.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=n.Singleton,new p(this._binding)}toFactory(t){return this._binding.type=a.Factory,this._binding.factory=t,this._binding.scope=n.Singleton,new p(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}}let m=new class{constructor(t){let e=t||{};e.defaultScope=e.defaultScope||n.Transient,this.options=e,this.id=s.R.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new u}load(t){let e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){let e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){let e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,i){let r=this._getNotAllArgs(t,!1,e,i);return this._get(r)}getNamed(t,e){return this.getTagged(t,l.vO,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){let e=new o(t,this.options.defaultScope),i=this._bindingDictionary.get(t)||[];return i.push(e),this._bindingDictionary.set(t,i),new g(e)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){let t=(t,e)=>{t._binding.moduleId=e},e=e=>i=>{let r=this.bind(i);return t(r,e),r},i=()=>t=>this.unbind(t),r=()=>t=>this.isBound(t),s=e=>i=>{let r=this.rebind(i);return t(r,e),r};return t=>({bindFunction:e(t),isboundFunction:r(),rebindFunction:s(t),unbindFunction:i(),unbindAsyncFunction:t=>null})}_getNotAllArgs(t,e,i,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:i,value:r}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){let e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(e=>e.constraint(t)).forEach(t=>{e.push(this._resolveFromBinding(t))}),t.isMultiInject||1!==e.length?e:e[0]}_getChildRequest(t){let e=t.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(e),r=Object.keys(i),s=[];for(let t=0;t<r.length;t++){let e=i[t],r={};e.forEach(t=>{r[t.key]=t.value});let n={inject:r[l.B8],multiInject:r[l.Lc]},a=n.inject||n.multiInject,o={serviceIdentifier:a,constructorArgsMetadata:e},h=(this._bindingDictionary.get(a)||[]).filter(t=>t.constraint(o));if(h.length){let t={injectIdentifier:a,metadata:e,bindings:h};s.push(t)}}return s}_resolveFromBinding(t){let e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case a.ConstantValue:case a.Function:e=t.cache;break;case a.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;let i=this._getChildRequest(t);return this._createInstance(e,i)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map(t=>t.bindings.length>1?t.bindings.map(t=>this._resolveFromBinding(t)):this._resolveFromBinding(t.bindings[0]))}_saveToScope(t,e){t.scope===n.Singleton&&(t.cache=e,t.activated=!0)}}},6106:function(t,e,i){"use strict";i.d(e,{Gp:()=>r,IT:()=>n,XJ:()=>l,kj:()=>a,no:()=>s,ym:()=>o});let r=Symbol.for("TransformUtil"),s=Symbol.for("GraphicUtil"),n=Symbol.for("LayerService"),a=Symbol.for("StaticLayerHandlerContribution"),o=Symbol.for("DynamicLayerHandlerContribution"),l=Symbol.for("VirtualLayerHandlerContribution")},2575:function(t,e,i){"use strict";i.d(e,{Il:()=>d,Oo:()=>h,zd:()=>u});var r=i(7428),s=i(5859),n=i(86),a=i(6480),o=i(1822),l=i(534);let h=Symbol.for("VWindow"),u=Symbol.for("WindowHandlerContribution"),d=class{get width(){if(this._handler){let t=this._handler.getWH();return this._width=t.width}return this._width}get height(){if(this._handler){let t=this._handler.getWH();return this._height=t.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){this.hooks={onChange:new o.n(["x","y","width","height"])},this.active=()=>{let t=this.global;t.env&&!this.actived&&(a.n.getNamed(u,t.env).configure(this,t),this.actived=!0)},this._uid=n.R.GenAutoIncrementId(),this.global=l.w.global,this.postInit()}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var t;return null!==(t=this._handler.getStyle())&&void 0!==t?t:{}}set style(t){this._handler.setStyle(t)}create(t){var e,i;this._handler.createWindow(t);let r=this._handler.getWH();this._width=r.width,this._height=r.height,t.viewBox?this.setViewBox(t.viewBox):!1!==t.canvasControled?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:null!==(e=t.width)&&void 0!==e?e:this._width,y2:null!==(i=t.height)&&void 0!==i?i:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(t){this._handler=t}setDpr(t){return this._handler.setDpr(t)}resize(t,e){return this._handler.resizeWindow(t,e)}configure(){throw Error("暂不支持")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(t){return this._handler.getImageBuffer?this._handler.getImageBuffer(t):null}addEventListener(t,e,i){return this._handler.addEventListener(t,e,i)}removeEventListener(t,e,i){return this._handler.removeEventListener(t,e,i)}dispatchEvent(t){return this._handler.dispatchEvent(t)}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(t){this._handler.clearViewBox(t)}setViewBox(t){this._handler.setViewBox(t)}setViewBoxTransform(t,e,i,r,s,n){this._handler.setViewBoxTransform(t,e,i,r,s,n)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(t,e){let i=this._handler.getViewBox(),r={x:t,y:e};return this._handler.getViewBoxTransform().transformPoint({x:t,y:e},r),r.x-=i.x1,r.y-=i.y1,r}hasSubView(){let t=this._handler.getViewBox();return!(0===t.x1&&0===t.y1&&(0,s.Yt)(this.width,t.width())&&(0,s.Yt)(this.height,t.height()))}isVisible(t){return this._handler.isVisible(t)}onVisibleChange(t){return this._handler.onVisibleChange(t)}getTopLeft(t){return this._handler.getTopLeft(t)}};d=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],d)},7211:function(t,e,i){"use strict";let r;i.d(e,{kP:()=>n});var s=i(534);function n(){!function(){if(null==r)try{let t=document.createElement("canvas"),e=t.getContext("2d");(r=!!(window&&t.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&e&&e.isPointInPath&&e.isPointInStroke))&&(r=!!document.createElement)}catch(t){r=!1}}();let t=s.w.global&&s.w.global.env;return t?"browser"===t:r}},5405:function(t,e,i){"use strict";i.d(e,{g:()=>r});let r="*"},1361:function(t,e,i){"use strict";i.d(e,{x:()=>s});var r=i(9038);class s{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=s.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){let e=this.pickParams.graphic;if(e.stage){let i=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(i),this._composedDetailPath(t.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch(t){this.nativeEvent.preventDefault&&(0,r.Z)(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch(t){this.nativeEvent.stopPropagation&&(0,r.Z)(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw Error("Method not implemented.")}}},3:function(t,e,i){"use strict";i.d(e,{A:()=>s});var r=i(1361);class s extends r.x{constructor(t,e){super(),this.type=t,this.detail=e}}},5939:function(t,e,i){"use strict";i.d(e,{m:()=>r});let r="object"==typeof performance&&performance.now?performance:Date},6420:function(t,e,i){"use strict";i.d(e,{F:()=>r});class r{static registerPlugin(t,e){r._pluginClasses[t]=e}static getPlugin(t){return r._pluginClasses[t]}}r._pluginClasses={}},5102:function(t,e,i){"use strict";i.d(e,{Q:()=>f,w:()=>m});var r=i(1601),s=i(7636),n=i(1805),a=i(8103),o=i(6502),l=i(8908),h=i(3386),u=i(8535),d=i(534),c=i(1749),p=i(8035);let g=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...o.DH];class m extends o.zs{constructor(t){super(t),this.type="arc",this.numberType=c.r_}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:t,endAngle:e,outerRadius:i,innerRadius:r}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)&&this._validNumber(r)}getParsedCornerRadius(){let t=this.getGraphicTheme(),{cornerRadius:e=t.cornerRadius,innerPadding:i=t.innerPadding,outerPadding:n=t.outerPadding}=this.attribute,{outerRadius:a=t.outerRadius,innerRadius:o=t.innerRadius}=this.attribute;if(a+=n,o-=i,0===e||"0%"===e)return 0;let l=Math.abs(a-o),h=t=>Math.min((0,r.Z)(t,!0)?t:l*parseFloat(t)/100,l/2);if((0,s.Z)(e)){let t=e.map(t=>h(t)||0);return 0===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:(3===t.length&&t.push(0),t)}return h(e)}getParsedAngle(){let t=this.getGraphicTheme(),{startAngle:e=t.startAngle,endAngle:i=t.endAngle}=this.attribute,{cap:r=t.cap}=this.attribute,s=i-e>=0?1:-1,o=i-e;if(i=(e=(0,n.gt)(e))+o,r&&(0,a.Wn)(o)<a.f7-a.Ho){let n=1,o=1;r.length&&(n=Number(r[0]),o=Number(r[1]));let{outerRadius:l=t.outerRadius,innerRadius:h=t.innerRadius}=this.attribute,{outerPadding:u=t.outerPadding,innerPadding:d=t.innerPadding}=this.attribute,c=Math.abs((l+=u)-(h-=d))/2,p=c/l;if(c>a.Ho&&l>a.Ho)return{startAngle:e-s*p*n,endAngle:i+s*p*o,sc:s*p*n,ec:s*p*o}}return{startAngle:e,endAngle:i}}getParsePadAngle(t,e){let i=this.getGraphicTheme(),{innerPadding:r=i.innerPadding,outerPadding:s=i.outerPadding,padAngle:n=i.padAngle}=this.attribute,{outerRadius:o=i.outerRadius,innerRadius:l=i.innerRadius}=this.attribute;o+=s,l-=r;let{padRadius:h=(0,a._b)(o*o+l*l)}=this.attribute,u=(0,a.Wn)(e-t),d=t,c=e,p=t,g=e,m=n/2,f=u,v=u;if(m>a.Ho&&h>a.Ho){let i=e>t?1:-1,r=(0,a.ZR)(Number(h)/l*(0,a.O$)(m)),s=(0,a.ZR)(Number(h)/o*(0,a.O$)(m));return(f-=2*r)>a.Ho?(r*=i,p+=r,g-=r):(f=0,p=g=(t+e)/2),(v-=2*s)>a.Ho?(s*=i,d+=s,c-=s):(v=0,d=c=(t+e)/2),{outerStartAngle:d,outerEndAngle:c,innerStartAngle:p,innerEndAngle:g,innerDeltaAngle:f,outerDeltaAngle:v}}return{outerStartAngle:d,outerEndAngle:c,innerStartAngle:p,innerEndAngle:g,innerDeltaAngle:f,outerDeltaAngle:v}}getGraphicTheme(){return(0,u.gh)(this).arc}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateArcAABBBoundsImprecise(t,e,i):this.updateArcAABBBoundsAccurate(t,e,i));let{tb1:s,tb2:n}=d.w.graphicService.updateTempAABBBounds(i);(0,p.E)(t,e,s),i.union(s),s.setValue(n.x1,n.y1,n.x2,n.y2);let{lineJoin:a=e.lineJoin}=t;return d.w.graphicService.transformAABBBounds(t,i,e,"miter"===a,this),i}updateArcAABBBoundsImprecise(t,e,i){let{outerRadius:r=e.outerRadius,innerRadius:s=e.innerRadius}=t,{outerPadding:n=e.outerPadding,innerPadding:a=e.innerPadding}=t;return(r+=n)<(s-=a)&&(r=s),i.set(-r,-r,r,r),i}updateArcAABBBoundsAccurate(t,e,i){let{outerRadius:r=e.outerRadius,innerRadius:s=e.innerRadius}=t,{outerPadding:n=e.outerPadding,innerPadding:o=e.innerPadding}=t;if((r+=n)<(s-=o)){let t=r;r=s,s=t}let{endAngle:l=e.endAngle,startAngle:u=e.startAngle}=t;if(u>l){let t=u;u=l,l=t}return r<=a.Ho?i.set(0,0,0,0):Math.abs(l-u)>a.f7-a.Ho?i.set(-r,-r,r,r):((0,h.jx)(u,l,r,i),(0,h.jx)(u,l,s,i)),i}needUpdateTags(t){return super.needUpdateTags(t,g)}needUpdateTag(t){return super.needUpdateTag(t,g)}toCustomPath(){var t,e,i,r;let s=this.attribute,{startAngle:n,endAngle:o}=this.getParsedAngle(),h=(null!==(t=s.innerRadius)&&void 0!==t?t:0)-(null!==(e=s.innerPadding)&&void 0!==e?e:0),u=(null!==(i=s.outerRadius)&&void 0!==i?i:0)-(null!==(r=s.outerPadding)&&void 0!==r?r:0),d=(0,a.Wn)(o-n),c=o>n;if(u<h){let t=u;u=h,h=t}let p=new l.r;if(u<=a.Ho)p.moveTo(0,0);else if(d>=a.f7-a.Ho)p.moveTo(0+u*(0,a.mC)(n),0+u*(0,a.O$)(n)),p.arc(0,0,u,n,o,!c),h>a.Ho&&(p.moveTo(0+h*(0,a.mC)(o),0+h*(0,a.O$)(o)),p.arc(0,0,h,o,n,c));else{let t=u*(0,a.mC)(n),e=u*(0,a.O$)(n),i=h*(0,a.mC)(o),r=h*(0,a.O$)(o);p.moveTo(0+t,0+e),p.arc(0,0,u,n,o,!c),p.lineTo(0+i,0+r),p.arc(0,0,h,o,n,c),p.closePath()}return p}clone(){return new m(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return m.NOWORK_ANIMATE_ATTR}}function f(t){return new m(t)}m.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},o.Wl)},4951:function(t,e,i){"use strict";i.d(e,{n:()=>d});var r=i(6502),s=i(8908),n=i(3386),a=i(8535),o=i(534),l=i(1749);let h=["segments","points","curveType","curveTension",...r.DH];class u extends r.zs{constructor(t){super(t),this.type="area",this.numberType=l.Ri}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&0!==t.length}getGraphicTheme(){return(0,a.gh)(this).area}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateAreaAABBBoundsBySegments(t,e,i):this.updateAreaAABBBoundsByPoints(t,e,i)),o.w.graphicService.updateTempAABBBounds(i);let{lineJoin:r=e.lineJoin}=t;return o.w.graphicService.transformAABBBounds(t,i,e,"miter"===r,this),i}updateAreaAABBBoundsByPoints(t,e,i,r){let{points:s=e.points}=t;return s.forEach(t=>{var e,r;i.add(t.x,t.y),i.add(null!==(e=t.x1)&&void 0!==e?e:t.x,null!==(r=t.y1)&&void 0!==r?r:t.y)}),i}updateAreaAABBBoundsBySegments(t,e,i,r){let{segments:s=e.segments}=t;return s.forEach(t=>{t.points.forEach(t=>{var e,r;i.add(t.x,t.y),i.add(null!==(e=t.x1)&&void 0!==e?e:t.x,null!==(r=t.y1)&&void 0!==r?r:t.y)})}),i}_interpolate(t,e,i,r,s){"points"===t&&(s.points=(0,n.SA)(i,r,e))}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=new s.r,e=this.attribute,i=e.segments,r=e=>{if(e&&e.length){let i=!0,r=[];if(e.forEach(e=>{var s,n;!1!==e.defined&&(i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y),r.push({x:null!==(s=e.x1)&&void 0!==s?s:e.x,y:null!==(n=e.y1)&&void 0!==n?n:e.y}),i=!1)}),r.length){for(let e=r.length-1;e>=0;e--)t.lineTo(r[e].x,r[e].y);t.closePath()}}};return e.points?r(e.points):i&&i.length&&i.forEach(t=>{r(t.points)}),t}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},r.Wl)},1207:function(t,e,i){"use strict";let r;i.d(e,{o:()=>n});var s=i(7578);function n(t){return r||(r=s.i.CreateGraphic("text",{})),r.initAttributes(t),r.AABBBounds}},9607:function(t,e,i){"use strict";i.d(e,{F1:()=>l,Iq:()=>T,J7:()=>S,T5:()=>C,Up:()=>f,WC:()=>d,YW:()=>M,ZD:()=>A,bZ:()=>_,e9:()=>b,eh:()=>v,h8:()=>x,jK:()=>E,kx:()=>k,pp:()=>h,q9:()=>c,t8:()=>y,th:()=>w,xF:()=>m});var r=i(9935),s=i(8103),n=i(4659),a=i(8908),o=i(2008);let l={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new r.y},h={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},u={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},d=Object.assign({outerBorder:Object.assign(Object.assign({},u),{distance:0}),innerBorder:Object.assign(Object.assign({},u),{distance:0})},u),c={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",fontWeight:"",ellipsis:"…",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:o.r.fontBounding,keepCenterInLine:!1},p=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null},h),d),{alignSelf:"auto"}),{pickStrokeBuffer:0}),g={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},m=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null},{_debug_bounds:!1}),p),l),f=Object.assign(Object.assign({},m),{startAngle:0,endAngle:s.f7,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),v=Object.assign(Object.assign(Object.assign({},m),g),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),y=Object.assign(Object.assign({},m),{radius:1,startAngle:0,endAngle:s.f7}),_=Object.assign(Object.assign({},m),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),b=Object.assign(Object.assign({},m),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),x=Object.assign(Object.assign(Object.assign({},m),g),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),S=Object.assign(Object.assign({},m),{path:new a.r,fillStrokeOrder:1,clipRange:1,customPath:()=>{n.Y.getInstance().warn("空函数")}}),A=Object.assign(Object.assign({},m),{points:[],cornerRadius:0,closePath:!0}),k=Object.assign(Object.assign({},m),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round"});Object.assign(Object.assign({},m),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round"});let w=Object.assign(Object.assign({},m),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),C=Object.assign(Object.assign(Object.assign({},m),c),{strokeBoundsBuffer:0,keepDirIn3d:!0}),T=Object.assign(Object.assign(Object.assign({},m),c),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),E=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},m),{fill:!0,cornerRadius:0,cornerType:"round"}),M=Object.assign(Object.assign({},E),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1})},1749:function(t,e,i){"use strict";i.d(e,{$M:()=>f,B5:()=>v,Hf:()=>u,IJ:()=>n,IO:()=>x,I_:()=>l,Kh:()=>c,Lo:()=>S,Nd:()=>o,PN:()=>h,Ri:()=>a,Us:()=>y,ZV:()=>m,_u:()=>g,fB:()=>_,jp:()=>p,qm:()=>d,r_:()=>s,tA:()=>b});var r=i(8909);let s=(0,r.Gg)(),n=(0,r.Gg)(),a=(0,r.Gg)();(0,r.Gg)();let o=(0,r.Gg)(),l=(0,r.Gg)(),h=(0,r.Gg)(),u=(0,r.Gg)(),d=(0,r.Gg)(),c=(0,r.Gg)(),p=(0,r.Gg)(),g=(0,r.Gg)(),m=(0,r.Gg)(),f=(0,r.Gg)(),v=(0,r.Gg)(),y=(0,r.Gg)(),_=Symbol.for("GraphicService"),b=Symbol.for("GraphicCreator"),x={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},S=Object.keys(x)},7578:function(t,e,i){"use strict";i.d(e,{i:()=>r});let r=new class{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){let i=this.store.get(t);return i?i(e):null}}},8035:function(t,e,i){"use strict";i.d(e,{E:()=>r});let r=(t,e,i)=>{let{outerBorder:r,shadowBlur:s=e.shadowBlur}=t;if(r){let t=e.outerBorder,{distance:n=t.distance,lineWidth:a=t.lineWidth}=r;i.expand(n+(s+a)/2)}return i}},5977:function(t,e,i){"use strict";i.d(e,{JG:()=>_,M_:()=>y,RT:()=>v});var r,s=i(7428),n=i(1600),a=i(7393),o=i(1601),l=i(1822),h=i(5575),u=i(8909),d=i(8113),c=i(4286),p=i(5399),g=i(1749),m=i(7317),f=i(534);function v(t,e,i){var r;let{x:s=i.x,y:n=i.y,z:a=i.z,dx:o=i.dx,dy:l=i.dy,dz:h=i.dz,scaleX:u=i.scaleX,scaleY:c=i.scaleY,scaleZ:p=i.scaleZ,alpha:g=i.alpha,beta:f=i.beta,angle:v=i.angle,anchor3d:y=e.attribute.anchor,anchor:_}=e.attribute,b=[0,0,0];if(y){if("string"==typeof y[0]){let t=parseFloat(y[0])/100,i=e.AABBBounds;b[0]=i.x1+(i.x2-i.x1)*t}else b[0]=y[0];if("string"==typeof y[1]){let t=parseFloat(y[1])/100,i=e.AABBBounds;b[1]=i.x1+(i.x2-i.x1)*t}else b[1]=y[1];b[2]=null!==(r=y[2])&&void 0!==r?r:0}if((0,m.TL)(t),(0,m.Iu)(t,t,[s+o,n+l,a+h]),(0,m.Iu)(t,t,[b[0],b[1],b[2]]),(0,m.lM)(t,t,f),(0,m.uD)(t,t,g),(0,m.Iu)(t,t,[-b[0],-b[1],b[2]]),(0,m.mN)(t,t,[u,c,p]),v){let i=d.yp.allocate(),r=[0,0];if(_){if("string"==typeof y[0]){let t=parseFloat(y[0])/100,i=e.AABBBounds;r[0]=i.x1+(i.x2-i.x1)*t}else r[0]=y[0];if("string"==typeof y[1]){let t=parseFloat(y[1])/100,i=e.AABBBounds;r[1]=i.x1+(i.x2-i.x1)*t}else r[1]=y[1]}(0,m.Iu)(i,i,[r[0],r[1],0]),(0,m.jI)(i,i,v),(0,m.Iu)(i,i,[-r[0],-r[1],0]),(0,m.G9)(t,t,i)}}function y(t){let{alpha:e,beta:i}=t.attribute;return e||i}let _=class{constructor(t){this.creator=t,this.hooks={onAttributeUpdate:new l.n(["graphic"]),onSetStage:new l.n(["graphic","stage"]),onRemove:new l.n(["graphic"]),onRelease:new l.n(["graphic"]),onAddIncremental:new l.n(["graphic","group","stage"]),onClearIncremental:new l.n(["graphic","group","stage"]),beforeUpdateAABBBounds:new l.n(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new l.n(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new l.n(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new a.FB,this.tempAABBBounds2=new a.FB}onAttributeUpdate(t){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(t)}onSetStage(t,e){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(t,e)}onRemove(t){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(t)}onRelease(t){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(t)}onAddIncremental(t,e,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(t,e,i)}onClearIncremental(t,e){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(t,e)}beforeUpdateAABBBounds(t,e,i,r){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(t,e,i,r)}afterUpdateAABBBounds(t,e,i,r,s){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(t,e,i,r,s)}clearAABBBounds(t,e,i){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(t,e,i)}updatePathProxyAABBBounds(t,e){let i="function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy;if(!i)return!1;let r=new c.C(t);return(0,p.h)(i.commandList,r,0,0),!0}updateHTMLTextAABBBounds(t,e,i,r){let{textAlign:s,textBaseline:n}=t;if(null!=t.forceBoundsHeight){let e=(0,o.Z)(t.forceBoundsHeight)?t.forceBoundsHeight:t.forceBoundsHeight(),r=(0,h.nV)(n,e,e);i.set(i.x1,r,i.x2,r+e)}if(null!=t.forceBoundsWidth){let e=(0,o.Z)(t.forceBoundsWidth)?t.forceBoundsWidth:t.forceBoundsWidth(),r=(0,h.js)(s,e);i.set(r,i.y1,r+e,i.y2)}}combindShadowAABBBounds(t,e){if(e&&e.shadowRoot){let i=e.shadowRoot.AABBBounds;t.union(i)}}transformAABBBounds(t,e,i,r,s){if(!e.empty()){let{scaleX:s=i.scaleX,scaleY:n=i.scaleY,stroke:a=i.stroke,shadowBlur:o=i.shadowBlur,lineWidth:l=i.lineWidth,pickStrokeBuffer:h=i.pickStrokeBuffer,strokeBoundsBuffer:d=i.strokeBoundsBuffer}=t,c=this.tempAABBBounds1,p=this.tempAABBBounds2;if(a&&l){let t=(l+h)/Math.abs(s+n);(0,u.ph)(c,t,r,d),e.union(c),c.setValue(p.x1,p.y1,p.x2,p.y2)}if(o){let{shadowOffsetX:r=i.shadowOffsetX,shadowOffsetY:a=i.shadowOffsetY}=t,l=o/Math.abs(s+n)*2;(0,u.ph)(c,l,!1,d+1),c.translate(r,a),e.union(c)}}if(this.combindShadowAABBBounds(e,s),e.empty())return;let n=!0,o=s.transMatrix;s&&s.isContainer&&(n=!(1===o.a&&0===o.b&&0===o.c&&1===o.d&&0===o.e&&0===o.f)),n&&(0,a.n2)(e,e,o)}validCheck(t,e,i,r){if(!r||null!=t.forceBoundsHeight||null!=t.forceBoundsWidth||r.shadowRoot||r.isContainer)return!0;let{visible:s=e.visible}=t;return!(!r.valid||!s)||(i.empty()||(r.parent&&i.transformWithMatrix(r.parent.globalTransMatrix),f.w.graphicService.clearAABBBounds(r,r.stage,i),i.clear()),!1)}updateTempAABBBounds(t){let e=this.tempAABBBounds1,i=this.tempAABBBounds2;return e.setValue(t.x1,t.y1,t.x2,t.y2),i.setValue(t.x1,t.y1,t.x2,t.y2),{tb1:e,tb2:i}}};_=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),(r=(0,n.f)(g.tA),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],_)},6502:function(t,e,i){"use strict";i.d(e,{zs:()=>t2,DH:()=>tK,Wl:()=>t1});var r=i(7393),s=i(7636),n=i(8103),a=i(9935),o=i(2683),l=i(6082),h=i(306),u=i(9904);let d=t=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(t),c=t=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(t);var p=i(4154),g=i(1312),m=i.n(g),f=i(4659),v=i(1036),y=i(9038),_=i(86);class b extends m(){get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=_.R.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let e=this._lastChild,i=0;for(;e;){if(t(e,i++))return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){if(t(e,i++))return;e=e._next}}}forEachChildrenAsync(t,e=!1){var i,r,s,n;return i=this,r=void 0,s=void 0,n=function*(){if(e){let e=this._lastChild,i=0;for(;e;){let r=t(e,i++);if(r.then&&(r=yield r),r)return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){let r=t(e,i++);if(r.then&&(r=yield r),r)return;e=e._next}}},new(s||(s=Promise))(function(t,e){function a(t){try{l(n.next(t))}catch(t){e(t)}}function o(t){try{l(n.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(t){t(i)})).then(a,o)}l((n=n.apply(i,r||[])).next())})}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw Error("【Node::appendChild】不能将父辈元素append为子元素");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return console.error("暂不支持该函数"),t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertBefore】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertAfter】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&f.Y.getInstance().warn("insertIntoKeepIdx和insertInto混用可能会存在错误"),e>=this.childrenCount)return this.appendChild(t);if(this===t)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertBefore】不能将父辈元素insert为子元素");if(t.parent&&t.parent.removeChild(t),t.parent=this,0===e)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let i=this._firstChild;for(let t=0;t<e;t++){if(!i)return null;t>0&&(i=i._next)}if(!i)return null;t._next=i._next,t._prev=i,i._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){let i;if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){let i=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,i)}this._nodeList[e]=t;for(let t=e-1;t>=0&&!(i=this._nodeList[t]);t--);if(i)return i._next?this.insertBefore(t,i._next):this.appendChild(t);this._ignoreWarn=!0;let r=this.insertInto(t,0);return this._ignoreWarn=!1,r}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){let e=this._nodeList.findIndex(e=>e===t);e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){let t=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=t}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw Error("暂不支持")}find(t,e=!1){let i=null;return this.forEachChildren((e,r)=>!(e===this||!t(e,r))&&(i=e,!0)),e&&this.forEachChildren(e=>{if(e.isContainer){let r=e.find(t,!0);if(r)return i=r,!0}return!1}),i}findAll(t,e=!1){let i=[];return this.forEachChildren((e,r)=>{e!==this&&t(e,r)&&i.push(e)}),e&&this.forEachChildren(e=>{if(e.isContainer){let r=e.findAll(t,!0);r.length&&(i=i.concat(r))}}),i}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(e=>e.name===t,e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<t;i++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;null==t?void 0:t.parent;)t=t.parent;return t||this}hasChildNodes(){return null!==this._firstChild}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){let t=[],e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(null!==e);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw Error("暂不支持")}setAllDescendantsProps(t,e){let i=this._firstChild;for(;i;)i[t]=e,i.setAllDescendantsProps(t,e),i=i._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(null!==e)}clone(){throw Error("暂不支持")}cloneTo(t){throw Error("暂不支持")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,i){let r=(0,v.Z)(i,!0)&&i||(0,p.Z)(i)&&i.capture,s=(0,p.Z)(i)&&i.once,n=(0,y.Z)(e)?void 0:e;return t=r?`${t}capture`:t,e=(0,y.Z)(e)?e:e.handleEvent,s?super.once(t,e,n):super.on(t,e,n),this}on(t,e,i){return this.addEventListener(t,e,i)}removeEventListener(t,e,i){let r=(0,v.Z)(i,!0)&&i||(0,p.Z)(i)&&i.capture,s=(0,y.Z)(e)?void 0:e;t=r?`${t}capture`:t,e=(0,y.Z)(e)?e:e.handleEvent;let n=(0,p.Z)(i)&&i.once;return super.off(t,e,s,n),this}off(t,e,i){return this.removeEventListener(t,e,i)}once(t,e,i){return(0,p.Z)(i)?(i.once=!0,this.addEventListener(t,e,i)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}}var x=i(3),S=i(1361),A=i(9607),k=i(534),w=i(3118);let C={duration:200,easing:"cubicOut"};var T=i(3419),E=i(1087),M=i(8908),B=i(9156),D=i(3872),O=i(4286),P=i(5399),I=i(3386),R=i(1601);class L{bounds(t,e){if((0,R.Z)(t)){let i=t/2;e.x1=-i,e.x2=i,e.y1=-i,e.y2=i}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}parseSize(t){return(0,R.Z)(t)?t:Math.min(t[0],t[1])}}function F(t,e,i,r,s){return s?t.arc(i,r,e,0,n.BZ,!1,s):t.arc(i,r,e,0,n.BZ),!1}let j=new class extends L{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,i,r,s){return F(t,this.parseSize(e)/2,i,r,s)}drawOffset(t,e,i,r,s,n){return F(t,this.parseSize(e)/2+s,i,r,n)}drawToSvgPath(t,e,i,r){let s=this.parseSize(t)/2;return`M ${e-s}, ${i} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0`}},Z=new class extends L{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,i,r,s){var n;return n=this.parseSize(e)/6,t.moveTo(-3*n+i,-n+r,s),t.lineTo(-n+i,-n+r,s),t.lineTo(-n+i,-3*n+r,s),t.lineTo(n+i,-3*n+r,s),t.lineTo(n+i,-n+r,s),t.lineTo(3*n+i,-n+r,s),t.lineTo(3*n+i,n+r,s),t.lineTo(n+i,n+r,s),t.lineTo(n+i,3*n+r,s),t.lineTo(-n+i,3*n+r,s),t.lineTo(-n+i,n+r,s),t.lineTo(-3*n+i,n+r,s),t.closePath(),!0}drawOffset(t,e,i,r,s,n){var a;return a=this.parseSize(e)/6,t.moveTo(-3*a+i-s,-a+r-s,n),t.lineTo(-a+i-s,-a+r-s,n),t.lineTo(-a+i-s,-3*a+r-s,n),t.lineTo(a+i+s,-3*a+r-s,n),t.lineTo(a+i+s,-a+r-s,n),t.lineTo(3*a+i+s,-a+r-s,n),t.lineTo(3*a+i+s,a+r+s,n),t.lineTo(a+i+s,a+r+s,n),t.lineTo(a+i+s,3*a+r+s,n),t.lineTo(-a+i-s,3*a+r+s,n),t.lineTo(-a+i-s,a+r+s,n),t.lineTo(-3*a+i-s,a+r+s,n),t.closePath(),!0}};function H(t,e,i,r,s){return t.moveTo(i,r-e,s),t.lineTo(e+i,r,s),t.lineTo(i,r+e,s),t.lineTo(i-e,r,s),t.closePath(),!0}let N=new class extends L{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,i,r,s){return H(t,this.parseSize(e)/2,i,r,s)}drawFitDir(t,e,i,r,s){return H(t,this.parseSize(e)/2,i,r,s)}drawOffset(t,e,i,r,s,n){return H(t,this.parseSize(e)/2+s,i,r,n)}};function z(t,e,i,r){let s=2*e;return t.rect(i-e,r-e,s,s),!1}let V=new class extends L{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,i,r){return z(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return z(t,this.parseSize(e)/2+s,i,r)}};function U(t,e,i,r,s=0){return t.moveTo(i+e+2*s,e+r+s),t.lineTo(i-e-2*s,e+r+s),t.lineTo(i,r-e-2*s),t.closePath(),!0}class W extends L{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,i,r){return U(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return U(t,this.parseSize(e)/2,i,r,s)}}let G=new W,$=new class extends W{constructor(){super(...arguments),this.type="triangle"}},X=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),Y=Math.sin(n.BZ/10)*X,K=-Math.cos(n.BZ/10)*X;function q(t,e,i,r){let s=Y*e,a=K*e;t.moveTo(i,-e+r),t.lineTo(s+i,a+r);for(let o=1;o<5;++o){let l=n.BZ*o/5,h=Math.cos(l),u=Math.sin(l);t.lineTo(u*e+i,-h*e+r),t.lineTo(h*s-u*a+i,u*s+h*a+r)}return t.closePath(),!0}let J=new class extends L{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,i,r){return q(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return q(t,this.parseSize(e)/2+s,i,r)}},Q=(0,n._b)(3);function tt(t,e,i,r){let s=e/Q,n=s/5;return t.moveTo(0+i,-e+r),t.lineTo(s/2+i,r),t.lineTo(n/2+i,r),t.lineTo(n/2+i,e+r),t.lineTo(-n/2+i,e+r),t.lineTo(-n/2+i,r),t.lineTo(-s/2+i,r),t.closePath(),!0}let te=new class extends L{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,i,r){return tt(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return tt(t,this.parseSize(e)/2+s,i,r)}};function ti(t,e,i,r){let s=2*e;return t.moveTo(i,-e+r),t.lineTo(s/3/2+i,e+r),t.lineTo(-s/3/2+i,e+r),t.closePath(),!0}let tr=new class extends L{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,i,r){return ti(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return ti(t,this.parseSize(e)/2+s,i,r)}};function ts(t,e,i,r){return t.moveTo(-e+i,r),t.lineTo(i,e+r),!1}let tn=new class extends L{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,i,r){return ts(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return ts(t,this.parseSize(e)/2+s,i,r)}},ta=(0,n._b)(3)/2,to=1/(0,n._b)(12);function tl(t,e,i,r){let s=e/2,n=e*to,a=e*to+e,o=-s;return t.moveTo(s+i,n+r),t.lineTo(s+i,a+r),t.lineTo(o+i,a+r),t.lineTo(-.5*s-ta*n+i,ta*s+-.5*n+r),t.lineTo(-.5*s-ta*a+i,ta*s+-.5*a+r),t.lineTo(-.5*o-ta*a+i,ta*o+-.5*a+r),t.lineTo(-.5*s+ta*n+i,-.5*n-ta*s+r),t.lineTo(-.5*s+ta*a+i,-.5*a-ta*s+r),t.lineTo(-.5*o+ta*a+i,-.5*a-ta*o+r),t.closePath(),!1}let th=new class extends L{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,i,r){return tl(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return tl(t,this.parseSize(e)/2+s,i,r)}};function tu(t,e,i,r,s){return t.moveTo(-e+i-2*s,r),t.lineTo(e+i+s,e+r+2*s),t.lineTo(e+i+s,r-e-2*s),t.closePath(),!0}let td=new class extends L{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,i,r){return tu(t,this.parseSize(e)/2,i,r,0)}drawOffset(t,e,i,r,s){return tu(t,this.parseSize(e)/2,i,r,s)}};function tc(t,e,i,r,s=0){return t.moveTo(i-e-s,e+r+2*s),t.lineTo(e+i+2*s,r),t.lineTo(i-e-s,r-e-2*s),t.closePath(),!0}let tp=new class extends L{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,i,r){return tc(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return tc(t,this.parseSize(e)/2,i,r,s)}};function tg(t,e,i,r,s=0){return t.moveTo(i-e-2*s,r-e-s),t.lineTo(i+e+2*s,r-e-s),t.lineTo(i,r+e+2*s),t.closePath(),!0}let tm=new class extends L{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,i,r){return tg(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,s){return tg(t,this.parseSize(e)/2,i,r,s)}},tf=(0,n._b)(3);function tv(t,e,i,r){let s=e*tf;return t.moveTo(i,r+-s/3*2),t.lineTo(e+i,r+s),t.lineTo(i-e,r+s),t.closePath(),!0}let ty=new class extends L{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,i,r){return tv(t,this.parseSize(e)/2/tf,i,r)}drawOffset(t,e,i,r,s){return tv(t,this.parseSize(e)/2/tf+s,i,r)}};function t_(t,e,i,r){let s=2*e;return t.moveTo(e+i,r-s),t.lineTo(i-e,r),t.lineTo(e+i,s+r),!0}let tb=new class extends L{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,i,r){return t_(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,s){return t_(t,this.parseSize(e)/4+s,i,r)}};function tx(t,e,i,r){let s=2*e;return t.moveTo(i-e,r-s),t.lineTo(i+e,r),t.lineTo(i-e,s+r),!0}let tS=new class extends L{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,i,r){return tx(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,s){return tx(t,this.parseSize(e)/4+s,i,r)}};function tA(t,e,i,r){let s=2*e;return t.moveTo(i-s,r+e),t.lineTo(i,r-e),t.lineTo(i+s,r+e),!0}let tk=new class extends L{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,i,r){return tA(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,s){return tA(t,this.parseSize(e)/4+s,i,r)}};function tw(t,e,i,r){let s=2*e;return t.moveTo(i-s,r-e),t.lineTo(i,r+e),t.lineTo(i+s,r-e),!0}let tC=new class extends L{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,i,r){return tw(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,s){return tw(t,this.parseSize(e)/4+s,i,r)}};function tT(t,e,i,r,s){return t.moveTo(i,r-e),t.lineTo(i,r+e),!0}let tE=new class extends L{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,i,r,s){return tT(t,this.parseSize(e)/2,i,r,s)}drawOffset(t,e,i,r,s,n){return tT(t,this.parseSize(e)/2+s,i,r,n)}drawToSvgPath(t,e,i,r){let s=this.parseSize(t)/2;return`M ${e}, ${i-s} L ${e},${i+s}`}};function tM(t,e,i,r,s){return t.moveTo(i-e,r),t.lineTo(i+e,r),!0}let tB=new class extends L{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,i,r,s){return tM(t,this.parseSize(e)/2,i,r,s)}drawOffset(t,e,i,r,s,n){return tM(t,this.parseSize(e)/2+s,i,r,n)}drawToSvgPath(t,e,i,r){let s=this.parseSize(t)/2;return`M ${e-s}, ${i} L ${e+s},${i}`}};function tD(t,e,i,r,s){return t.moveTo(i-e,r-e),t.lineTo(i+e,r+e),t.moveTo(i+e,r-e),t.lineTo(i-e,r+e),!0}let tO=new class extends L{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,i,r,s){return tD(t,this.parseSize(e)/2,i,r,s)}drawOffset(t,e,i,r,s,n){return tD(t,this.parseSize(e)/2+s,i,r,n)}drawToSvgPath(t,e,i,r){let s=this.parseSize(t)/2;return`M ${e-s}, ${i-s} L ${e+s},${i+s} M ${e+s}, ${i-s} L ${e-s},${i+s}`}};function tP(t,e,i,r){return t.rect(i-e[0]/2,r-e[1]/2,e[0],e[1]),!1}function tI(t,e,i,r){let s=e/2;return t.rect(i-e/2,r-s/2,e,s),!1}let tR=new class extends L{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,i,r){return(0,R.Z)(e)?tI(t,e,i,r):tP(t,e,i,r)}drawWithClipRange(t,e,i,r,s,n,a){(0,R.Z)(e)&&(e=[e,e/2]);let o=2*(e[0]+e[1])*s,l=[{x:i+e[0]/2,y:r-e[1]/2},{x:i+e[0]/2,y:r+e[1]/2},{x:i-e[0]/2,y:r+e[1]/2},{x:i-e[0]/2,y:r-e[1]/2}],h=0,u=l[3];t.moveTo(u.x,u.y);for(let e=0;e<l.length;e++){let i=l[e],r=Math.sqrt((i.x-u.x)*(i.x-u.x)+(i.y-u.y)*(i.y-u.y));if(h+r>o){let e=(i.x-u.x)*(o-h)/r,s=(i.y-u.y)*(o-h)/r;t.lineTo(u.x+e,u.y+s);break}t.lineTo(i.x,i.y),u=i,h+=r}return!1}drawOffset(t,e,i,r,s){return(0,R.Z)(e)?tI(t,e+2*s,i,r):tP(t,[e[0]+2*s,e[1]+2*s],i,r)}},tL={};[j,Z,N,V,ty,$,J,te,tr,tn,th,td,tp,G,tm,tb,tS,tk,tC,tR,tE,tB,tO].forEach(t=>{tL[t.type]=t});let tF={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},tj=new r.FB;class tZ{constructor(t,e,i=!1){this.pathStr="",this.type=t,(0,s.Z)(e)?this.svgCache=e:this.path=e,this.isSvg=i}drawOffset(t,e,i,r,s,n,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(s=>{t.beginPath(),(0,P.h)(s.path.commandList,t,i,r,e,e),a&&a(s.path,s.attribute)}),!1):((0,P.h)(this.path.commandList,t,i,r,e+s,e+s),!1)}draw(t,e,i,r,s,n){return e=this.parseSize(e),this.drawOffset(t,e,i,r,0,s,n)}parseSize(t){return(0,R.Z)(t)?t:Math.min(t[0],t[1])}drawWithClipRange(t,e,i,r,s,n,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(n=>{n.path.drawWithClipRange(t,e,i,r,s),a&&a(n.path,n.attribute)}),!1):(this.path.drawWithClipRange(t,e,i,r,s),!1)}bounds(t,e){if(t=this.parseSize(t),this.isSvg){if(!this.svgCache)return;return e.clear(),void this.svgCache.forEach(({path:i})=>{tj.x1=i.bounds.x1*t,tj.y1=i.bounds.y1*t,tj.x2=i.bounds.x2*t,tj.y2=i.bounds.y2*t,e.union(tj)})}this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}class tH{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function tN(t,e,i,r){let s=t.indexOf(e,i);if(-1===s)throw Error(r);return s+e.length-1}function tz(t,e,i,r=">"){let s=function(t,e,i=">"){let r,s="";for(let n=e;n<t.length;n++){let e=t[n];if(r)e===r&&(r="");else if('"'===e||"'"===e)r=e;else if(e===i[0]){if(!i[1]||t[n+1]===i[1])return{data:s,index:n}}else"	"===e&&(e=" ");s+=e}}(t,e+1,r);if(!s)return;let n=s.data,a=s.index,o=n.search(/\s/),l=n,h=!0;-1!==o&&(l=n.substr(0,o).replace(/\s\s*$/,""),n=n.substr(o+1));let u=l;if(i){let t=l.indexOf(":");-1!==t&&(h=(l=l.substr(t+1))!==s.data.substr(t+1))}return{tagName:l,tagExp:n,closeIndex:a,attrExpPresent:h,rawTagName:u}}let tV=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");class tU{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,i){let r=e.tagname;"string"==typeof r&&(e.tagname=r),t.addChild(e)}buildAttributesMap(t,e,i){let r={};if(!t)return;let s=function(t,e){let i=[],r=e.exec(t);for(;r;){let s=[];s.startIndex=e.lastIndex-r[0].length;let n=r.length;for(let t=0;t<n;t++)s.push(r[t]);i.push(s),r=e.exec(t)}return i}(t,tV),n=s.length;for(let t=0;t<n;t++){let e=s[t][1],i=s[t][4];e&&(r[e]=void 0===i||(isNaN(i)?i:Number(i)))}return r}parseXml(t){t=t.replace(/\r\n?/g,"\n");let e=new tH("!xml"),i=e,r="",s="";for(let n=0;n<t.length;n++)if("<"===t[n]){if("/"===t[n+1]){let e=tN(t,">",n,"Closing Tag is not closed."),a=s.lastIndexOf(".");s=s.substring(0,a),(i=this.tagsNodeStack.pop())&&i.child&&r&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=r),r="",n=e}else if("?"===t[n+1])n=tz(t,n,!1,"?>").closeIndex+1;else if("!--"===t.substr(n+1,3))n=tN(t,"--\x3e",n+4,"Comment is not closed.");else{let a=tz(t,n,!1),o=a.tagName,l=a.tagExp,h=a.attrExpPresent,u=a.closeIndex;if(o!==e.tagname&&(s+=s?"."+o:o),l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===o[o.length-1]?(o=o.substr(0,o.length-1),s=s.substr(0,s.length-1),l=o):l=l.substr(0,l.length-1);let t=new tH(o);o!==l&&h&&(t[":@"]=this.buildAttributesMap(l,s,o)),this.addChild(i,t,s),s=s.substr(0,s.lastIndexOf("."))}else{let t=new tH(o);this.tagsNodeStack.push(i),o!==l&&h&&(t[":@"]=this.buildAttributesMap(l,s,o)),this.addChild(i,t,s),i=t}r="",n=u}}else r+=t[n];return e.child}}class tW{constructor(t){this.options=Object.assign({},tW.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){var e,i;return!!this.valid&&(e=new tU(this.options).parseXml(t),this.options,function t(e,i){let r={};for(let s=0;s<e.length;s++){let n=e[s],a=function(t){let e=Object.keys(t);for(let t=0;t<e.length;t++){let i=e[t];if(":@"!==i)return i}}(n),o="";if(o=void 0===i?a:i+"."+a,void 0!==a&&n[a]){let e=t(n[a],o);Object.keys(e).length,n[":@"]&&function(t,e,i){if(e){let i=Object.keys(e),r=i.length;for(let s=0;s<r;s++){let r=i[s];t[r]=e[r]}}}(e,n[":@"],0),void 0!==r[a]&&r.hasOwnProperty(a)?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(e)):r[a]=e}}return r}(e))}}tW.defaultOptions={};var tG=i(1749);let t$=new r.FB,tX=new a.y,tY=new r.FB,tK=["lineWidth","scaleX","scaleY","angle","anchor","visible"],tq=["x","y"],tJ=["scaleX","scaleY"],tQ=["angle"],t0=new o.E9,t1={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class t2 extends b{static mixin(t){let e=Object.keys(t);for(let i=0;i<e.length;++i){let r=e[i];Object.defineProperty(t2.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new r.FB,this._updateTag=D.Gz.INIT,this.attribute=t,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,t.background?this.loadImage(null!==(e=t.background.background)&&void 0!==e?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var i,r;let{dx:s=t.dx,dy:n=t.dy}=this.attribute;if(e&&this.parent){let t=this.parent.attribute;t0.x=s+(null!==(i=t.scrollX)&&void 0!==i?i:0),t0.y=n+(null!==(r=t.scrollY)&&void 0!==r?r:0)}else t0.x=s,t0.y=n;return t0}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(){let t="imprecise"===this.attribute.boundsMode;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;k.w.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let e=this.doUpdateAABBBounds(t);return k.w.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),"empty"===this.attribute.boundsMode&&e.clear(),e}tryUpdateOBBBounds(){return(this._OBBBounds||(this._OBBBounds=new r.a5),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp)?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid)?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds)}combindShadowAABBBounds(t){if(this.shadowRoot){let e=this.shadowRoot.AABBBounds.clone();t.union(e)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){let{clipConfig:t}=this.attribute;if(!t)return null;this.clipPathMap||(this.clipPathMap=new Map);let{shape:e}=t,i=this.clipPathMap.get(e)||null;return i||(this.clipPathMap.size>10&&this.clipPathMap.clear(),(i=this.parsePath(e))&&this.clipPathMap.set(e,i)),i}parsePath(t){var e;if(!t)return null;let i=tL[t];if(i||(i=t2.userSymbolMap[t]))return i;if(!0===((e=t=tF[t]||t).startsWith("<svg")||e.startsWith("<?xml"))){let{svg:e}=(new tW).parse(t);if(!e)return null;let i=(0,s.Z)(e.path)?e.path:[e.path];t$.clear();let r=[];i.forEach(t=>{let e=(new M.r).fromString(t.d),i={};tG.Lo.forEach(e=>{t[e]&&(i[tG.IO[e]]=t[e])}),r.push({path:e,attribute:i}),t$.union(e.bounds)});let a=t$.width(),o=t$.height(),l=1/(0,n.Fp)(a,o);r.forEach(t=>t.path.transform(0,0,l,l));let h=new tZ(t,r,!0);return t2.userSymbolMap[t]=h,h}let r=(new M.r).fromString(t),a=r.bounds.width(),o=r.bounds.height(),l=1/(0,n.Fp)(a,o);r.transform(0,0,l,l);let h=new tZ(t,r);return t2.userSymbolMap[t]=h,h}doUpdateAABBBounds(t){this.updateAABBBoundsStamp++;let e=this.getGraphicTheme();this._AABBBounds.clear();let i=this.attribute,r=this.updateAABBBounds(i,e,this._AABBBounds,t),{boundsPadding:s=e.boundsPadding}=i,n=(0,I.dj)(s);return n&&r.expand(n),this.clearUpdateBoundTag(),r}updatePathProxyAABBBounds(t){let e="function"==typeof this.pathProxy?this.pathProxy(this.attribute):this.pathProxy;if(!e)return!1;let i=new O.C(t);return(0,P.h)(e.commandList,i,0,0),!0}tryUpdateGlobalAABBBounds(){let t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new a.y),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&D.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&k.w.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&D.Gz.UPDATE_BOUNDS)&&k.w.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&D.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&D.Gz.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&D.Gz.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;let i=this.attribute;return Number.isFinite((null!==(t=i.x)&&void 0!==t?t:0)+(null!==(e=i.y)&&void 0!==e?e:0))}_validNumber(t){return null==t||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&D.Gz.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=D.Gz.CLEAR_SHAPE}containsPoint(t,e,i,r){if(!r)return!1;if(i===D.LZ.GLOBAL){let i=new o.E9(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),t=i.x,e=i.y}return r.containsPoint(this,{x:t,y:e})}setAttributes(t,e=!1,i){(t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,i)}_setAttributes(t,e=!1,i){let r=Object.keys(t);for(let e=0;e<r.length;e++){let i=r[e];this.attribute[i]=t[i]}this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(r))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(t,e,i,r){var s;let n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);n?this._setAttributes(n,i,r):(0,l.Z)(null===(s=this.normalAttrs)||void 0===s?void 0:s[t])?(this.attribute[t]=e,this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[t]=e,"background"===t?this.loadImage(e,!0):"shadowGraphic"===t&&this.setShadowGraphic(e)}needUpdateTags(t,e=tK){for(let i=0;i<e.length;i++){let r=e[i];if(-1!==t.indexOf(r))return!0}return!1}needUpdateTag(t,e=tK){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}initAttributes(t){let e={type:D.Gk.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=D.Gz.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var i,r;if(0===t&&0===e)return this;let s={type:D.Gk.TRANSLATE},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tq,s);n&&(t=n.x,e=n.y,delete n.x,delete n.y,this._setAttributes(n));let a=this.attribute,o=a.postMatrix;return o?k.w.transformUtil.fromMatrix(o,o).translate(t,e):(a.x=(null!==(i=a.x)&&void 0!==i?i:A.F1.x)+t,a.y=(null!==(r=a.y)&&void 0!==r?r:A.F1.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}translateTo(t,e){let i=this.attribute;if(i.x===t&&i.y===e)return this;let r={type:D.Gk.TRANSLATE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tq,r);return s?this._setAttributes(s,!1,r):(i.x=t,i.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)),this}scale(t,e,i){var r,s;if(1===t&&1===e)return this;let n={type:D.Gk.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:i},this.attribute,tJ,n);o&&(t=o.scaleX,e=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));let l=this.attribute;if(i){let{postMatrix:r}=this.attribute;r||(r=new a.y,l.postMatrix=r),k.w.transformUtil.fromMatrix(r,r).scale(t,e,i)}else l.scaleX=(null!==(r=l.scaleX)&&void 0!==r?r:A.F1.scaleX)*t,l.scaleY=(null!==(s=l.scaleY)&&void 0!==s?s:A.F1.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this}scaleTo(t,e){let i=this.attribute;if(i.scaleX===t&&i.scaleY===e)return this;let r={type:D.Gk.SCALE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,tJ,r);return s?this._setAttributes(s,!1,r):(i.scaleX=t,i.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)),this}rotate(t,e){var i;if(0===t)return this;let r={type:D.Gk.ROTATE},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,tQ,r);s&&(delete s.angle,this._setAttributes(s,!1,r));let n=this.attribute;if(e){let{postMatrix:i}=this.attribute;i||(i=new a.y,n.postMatrix=i),k.w.transformUtil.fromMatrix(i,i).rotate(t,e)}else n.angle=(null!==(i=n.angle)&&void 0!==i?i:A.F1.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}rotateTo(t){let e=this.attribute;if(e.angle===t)return this;let i={type:D.Gk.ROTATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,tQ,i);return r?this._setAttributes(r,!1,i):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)),this}skewTo(t,e){return this}animate(t){var e;this.animates||(this.animates=new Map);let i=new w.rs(null==t?void 0:t.id,null!==(e=null==t?void 0:t.timeline)&&void 0!==e?e:this.stage&&this.stage.getTimeline(),null==t?void 0:t.slience);if(i.bind(this),t){let{onStart:e,onFrame:r,onEnd:s,onRemove:n}=t;null!=e&&i.onStart(e),null!=r&&i.onFrame(r),null!=s&&i.onEnd(s),null!=n&&i.onRemove(n),i.interpolateFunc=t.interpolate}return this.animates.set(i.id,i),i.onRemove(()=>{i.stop(),this.animates.delete(i.id)}),i}onAttributeUpdate(t){t&&t.skipUpdateCallback||(k.w.graphicService.onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!(0,l.Z)(t)||this.currentStates.includes(t))}getState(t){var e;return null===(e=this.states)||void 0===e?void 0:e[t]}applyStateAttrs(t,e,i,r){var s,n,a,o;if(i){let i;let l=Object.keys(t),h=this.getNoWorkAnimateAttr(),u={};l.forEach(e=>{h[e]?(i||(i={}),i[e]=t[e]):u[e]=r&&void 0===t[e]?this.getDefaultAttribute(e):t[e]});let d=this.animate({slience:!0});d.stateNames=e,d.to(u,null!==(n=null===(s=this.stateAnimateConfig)||void 0===s?void 0:s.duration)&&void 0!==n?n:C.duration,null!==(o=null===(a=this.stateAnimateConfig)||void 0===a?void 0:a.easing)&&void 0!==o?o:C.easing),i&&this.setAttributes(i,!1,{type:D.Gk.STATE})}else this.stopStateAnimates(),this.setAttributes(t,!1,{type:D.Gk.STATE})}updateNormalAttrs(t){let e={};this.normalAttrs?(Object.keys(t).forEach(t=>{t in this.normalAttrs?(e[t]=this.normalAttrs[t],delete this.normalAttrs[t]):e[t]=this.getNormalAttribute(t)}),Object.keys(this.normalAttrs).forEach(e=>{t[e]=this.normalAttrs[e]})):Object.keys(t).forEach(t=>{e[t]=this.getNormalAttribute(t)}),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach(e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))})}getNormalAttribute(t){let e=this.attribute[t];return this.animates&&this.animates.forEach(i=>{if(i.stateNames){let r=i.getEndProps();(0,h.Z)(r,t)&&(e=r[t])}}),e}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if(this.currentStates){let i=(0,s.Z)(t)?e=>!t.includes(e):e=>e!==t,r=this.currentStates.filter(i);r.length!==this.currentStates.length&&this.useStates(r,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){let i=this.currentStates?this.currentStates.slice():[];i.push(t),this.useStates(i,e)}}addState(t,e,i){var r;if(this.currentStates&&this.currentStates.includes(t)&&(e||1===this.currentStates.length))return;let s=e&&(null===(r=this.currentStates)||void 0===r?void 0:r.length)?this.currentStates.concat([t]):[t];this.useStates(s,i)}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null===(i=this.currentStates)||void 0===i?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;let r={};t.forEach(e=>{var i;let s=this.stateProxy?this.stateProxy(e,t):null===(i=this.states)||void 0===i?void 0:i[e];s&&Object.assign(r,s)}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}addUpdateBoundTag(){this._updateTag|=D.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=D.Gz.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=D.Gz.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&D.Gz.UPDATE_SHAPE_AND_BOUNDS)===D.Gz.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=D.Gz.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=D.Gz.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=D.Gz.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=D.Gz.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=D.Gz.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=D.Gz.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=D.Gz.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&D.Gz.UPDATE_LAYOUT)}getAnchor(t,e){let i=[0,0],r=()=>{if(e.b)return e.b;let{scaleX:t,scaleY:i,angle:r}=this.attribute;return tY.copy(this._AABBBounds),this.setAttributes({scaleX:1,scaleY:1,angle:0}),e.b=this.AABBBounds.clone(),this._AABBBounds.copy(tY),this.setAttributes({scaleX:t,scaleY:i,angle:r}),e.b};if("string"==typeof t[0]){let e=parseFloat(t[0])/100,s=r();i[0]=s.x1+(s.x2-s.x1)*e}else i[0]=t[0];if("string"==typeof t[1]){let e=parseFloat(t[1])/100,s=r();i[1]=s.y1+(s.y2-s.y1)*e}else i[1]=t[1];return i}doUpdateLocalMatrix(){let{x:t=A.F1.x,y:e=A.F1.y,scaleX:i=A.F1.scaleX,scaleY:r=A.F1.scaleY,angle:s=A.F1.angle,scaleCenter:n,anchor:o,postMatrix:l}=this.attribute,h=[0,0],u={};if(o&&(h=this.getAnchor(o,u)),n&&(1!==i||1!==r)){let a=this._transMatrix;a.reset(),a.translate(h[0],h[1]),a.rotate(s),a.translate(-h[0],-h[1]),a.translate(t,e),h=this.getAnchor(n,u),k.w.transformUtil.fromMatrix(a,a).scale(i,r,{x:h[0],y:h[1]})}else(0,a.X)(this._transMatrix,this._transMatrix.reset(),t,e,i,r,s,o&&h);let d=this.getOffsetXY(A.F1);if(this._transMatrix.e+=d.x,this._transMatrix.f+=d.y,l){let t=tX.setValue(l.a,l.b,l.c,l.d,l.e,l.f),e=this._transMatrix;t.multiply(e.a,e.b,e.c,e.d,e.e,e.f),e.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);let{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){let e=t.getTimeline();this.animates.forEach(t=>{t.timeline===T.P&&t.setTimeline(e)})}this._onSetStage&&this._onSetStage(this,t,e),k.w.graphicService.onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:D.Gk.ANIMATE_END})}onStep(t,e,i,r,s){let n={};if(i.customAnimate)i.customAnimate.update(s,r,n);else{let a=i.props,o=i.parsedProps,l=i.propKeys;this.stepInterpolate(t,e,n,i,r,s,a,void 0,o,l)}this.setAttributes(n,!1,{type:D.Gk.ANIMATE_UPDATE,animationState:{ratio:r,end:s,step:i,isFirstFrameOfStep:t.getLastStep()!==i}}),this.stage&&this.stage.renderNextFrame()}stepInterpolate(t,e,i,r,s,n,a,o,l,h){h||(h=Object.keys(a),r.propKeys=h),n?r.propKeys.forEach(t=>{e.validAttr(t)&&(i[t]=a[t])}):h.forEach(n=>{var h;let u;if(!e.validAttr(n))return;let d=a[n],c=null!==(h=o&&o[n])&&void 0!==h?h:t.getLastPropByName(n,r);if(null==d||null==c||d===c)return void(i[n]=d);e.interpolateFunc&&e.interpolateFunc(n,s,c,d,i)||e.customInterpolate(n,s,c,d,this,i)||this.defaultInterpolate(d,c,n,i,l,s)||this._interpolate(n,s,c,d,i)}),r.parsedProps=l}defaultInterpolate(t,e,i,r,s,n){if(Number.isFinite(t)&&Number.isFinite(e))return r[i]=e+(t-e)*n,!0;if("fill"===i){s||(s={});let a=s.fillColorArray,o=(0,E.BM)(e,null!=a?a:t,n,!1,(t,e)=>{s.fillColorArray=e});return o&&(r[i]=o),!0}if("stroke"===i){s||(s={});let a=s.strokeColorArray,o=(0,E.BM)(e,null!=a?a:t,n,!1,(t,e)=>{s.strokeColorArray=e});return o&&(r[i]=o),!0}if("shadowColor"===i){s||(s={});let a=s.shadowColorArray,o=(0,E.BM)(e,null!=a?a:t,n,!0,(t,e)=>{s.shadowColorArray=e});return o&&(r[i]=o),!0}if(Array.isArray(t)&&t.length===e.length){let s=[],a=!0;for(let i=0;i<t.length;i++){let r=e[i],o=r+(t[i]-r)*n;if(!Number.isFinite(o)){a=!1;break}s.push(o)}a&&(r[i]=s)}return!1}_interpolate(t,e,i,r,s){}getDefaultAttribute(t){return this.getGraphicTheme()[t]}getComputedAttribute(t){var e;return null!==(e=this.attribute[t])&&void 0!==e?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=null!=t?t:k.w.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(t=>t.toJson())}}createPathProxy(t){return(0,u.Z)(t,!0)?this.pathProxy=(new M.r).fromString(t):this.pathProxy=new M.r,this.pathProxy}loadImage(t,e=!1){var i;if(!t||e&&!(!(i=t).fill&&!i.stroke))return;this.resources||(this.resources=new Map);let r={data:"init",state:null};this.resources.set(t,r),"string"==typeof t?(r.state="loading",t.startsWith("<svg")?(B.h.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):(d(t)||t.includes("/")||c(t))&&(B.h.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):(0,p.Z)(t)?(r.state="success",r.data=t,this.backgroundImg=this.backgroundImg||e):r.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,i){if(!this.resources)return;let r=this.resources.get(t);r&&(r.state="success",r.data=e,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;let i=this.resources.get(t);i&&(i.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach(t=>{t.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus="released",this.stopAnimates(),k.w.graphicService.onRelease(this)}_emitCustomEvent(t,e){var i,r;if(this._events&&t in this._events){let s=new x.A(t,e);s.bubbles=!1,s.manager=null===(r=null===(i=this.stage)||void 0===i?void 0:i.eventSystem)||void 0===r?void 0:r.manager,this.dispatchEvent(s)}}}t2.userSymbolMap={},t2.mixin({dispatchEvent(t){var e;if(!(t instanceof S.x))throw Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=[],t.detailPath&&(t.detailPath=[]),t.target=this,null===(e=null==t?void 0:t.manager)||void 0===e||e.dispatchEvent(t),!t.defaultPrevented},emit(t,e){return this.dispatchEvent(new x.A(t,e))}})},411:function(t,e,i){"use strict";i.d(e,{ZA:()=>c,sS:()=>p});var r,s,n=i(2683),a=i(534),o=i(6502),l=i(8535),h=i(3872),u=i(1749),d=i(9607);(r=s||(s={}))[r.LESS_GROUP=0]="LESS_GROUP",r[r.MORE_GROUP=1]="MORE_GROUP";class c extends o.zs{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=u.I_,this._childUpdateTag=h.Gz.UPDATE_BOUNDS}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new l.Q2),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new l.Q2)}visibleAll(t){this.setAttribute("visible",t),this.forEachChildren(e=>{e.isContainer&&e.visibleAll?e.visibleAll(t):e.setAttribute("visible",t)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(t,e,i){if(i===h.LZ.GLOBAL){let i=new n.E9(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),this.AABBBounds.contains(i.x,i.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&h.Gz.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;a.w.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),a.w.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),"empty"===this.attribute.boundsMode&&e.clear(),e}doUpdateLocalMatrix(){let{x:t=d.F1.x,y:e=d.F1.y,dx:i=d.F1.dx,dy:r=d.F1.dy,scaleX:s=d.F1.scaleX,scaleY:n=d.F1.scaleY,angle:a=d.F1.angle,postMatrix:o}=this.attribute;if(0!==t||0!==e||0!==i||0!==r||1!==s||1!==n||0!==a||o)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return(0,l.gh)(this).group}updateAABBBounds(t,e,i){let r=i;i=i.clone();let{width:s,height:n,path:o,clip:l=e.clip}=t;if(o&&o.length?o.forEach(t=>{i.union(t.AABBBounds)}):null!=s&&null!=n&&i.set(0,0,Math.max(0,s),Math.max(0,n)),!l){this.forEachChildren(t=>{i.union(t.AABBBounds)});let{scrollX:e=0,scrollY:r=0}=t;i.translate(e,r)}return a.w.graphicService.updateTempAABBBounds(i),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),r.copy(i),r}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;let t=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),t}clearUpdateBoundTag(){this._updateTag&=h.Gz.CLEAR_BOUNDS,this._childUpdateTag&=h.Gz.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=h.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&h.Gz.UPDATE_BOUNDS||(this._childUpdateTag|=h.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){let e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),a.w.graphicService.onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),a.w.graphicService.onClearIncremental(this,this.stage)}_updateChildToStage(t){return this.stage&&t&&t.setStage(this.stage,this.layer),this.addUpdateBoundTag(),t}appendChild(t,e=!0){let i=super.appendChild(t);return e&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(t,e){return this._updateChildToStage(super.insertBefore(t,e))}insertAfter(t,e){return this._updateChildToStage(super.insertAfter(t,e))}insertInto(t,e){return this._updateChildToStage(super.insertInto(t,e))}removeChild(t){let e=super.removeChild(t);return t.stage=null,a.w.graphicService.onRemove(t),this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren(e=>{a.w.graphicService.onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),a.w.graphicService.onSetStage(this,t),this.forEachChildren(e=>{e.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&h.Gz.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(e=>e.name===t,e)}createOrUpdateChild(t,e,i){let r=this._getChildByName(t);return r?r.setAttributes(e):((r=a.w.graphicService.creator[i](e)).name=t,this.add(r)),r}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}release(t){t&&this.forEachChildren(e=>{e.release(t)}),super.release()}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=o.Wl},5512:function(t,e,i){"use strict";i.d(e,{B:()=>d,E:()=>u});var r=i(6502),s=i(9607),n=i(8535),a=i(534),o=i(1749),l=i(8035);let h=["width","height","image",...r.DH];class u extends r.zs{constructor(t){super(t),this.type="image",this.numberType=o.PN,this.loadImage(this.attribute.image)}getImageElement(){let{image:t}=this.attribute;if(!t||!this.resources)return null;let e=this.resources.get(t);return"success"!==e.state?null:e.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var t;return null!==(t=this.attribute.repeatX)&&void 0!==t?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return null!==(t=this.attribute.repeatY)&&void 0!==t?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,i){super.imageLoadSuccess(t,e,()=>{this.successCallback&&this.successCallback()}),this.addUpdateBoundTag()}imageLoadFail(t,e){super.imageLoadFail(t,()=>{this.failCallback&&this.failCallback()})}setAttributes(t,e,i){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,i)}setAttribute(t,e,i,r){return"image"===t&&this.loadImage(e),super.setAttribute(t,e,i,r)}getGraphicTheme(){return(0,n.gh)(this).image}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{maxWidth:r=e.maxWidth,maxHeight:s=e.maxHeight}=t,{width:n,height:a}=t;if(null==n||null==a){let t=this.getImageElement();if(t){let e=t.width,i=t.height;if(null!=n)a=i/e*n;else if(null!=a)n=e/i*a;else{let t=e/i;t>r/s?(n=r,a=r/t):(a=s,n=s*t)}}else n=r,a=s}this._actualWidth=n,this._actualHeight=a,i.set(0,0,n,a)}let{tb1:r,tb2:s}=a.w.graphicService.updateTempAABBBounds(i);return(0,l.E)(t,e,r),i.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}getDefaultAttribute(t){return s.jK[t]}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},r.Wl)},7004:function(t,e,i){"use strict";i.d(e,{W:()=>d});var r=i(6502),s=i(8535),n=i(534),a=i(3386),o=i(8908),l=i(1749);let h=["segments","points","curveType","curveTension",...r.DH];class u extends r.zs{constructor(t={}){super(t),this.type="line",this.numberType=l.Hf}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&!(t.length<=1)}_interpolate(t,e,i,r,s){"points"===t&&(s.points=(0,a.SA)(i,r,e))}getGraphicTheme(){return(0,s.gh)(this).line}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateLineAABBBoundsBySegments(t,e,i):this.updateLineAABBBoundsByPoints(t,e,i)),n.w.graphicService.updateTempAABBBounds(i);let{lineJoin:r=e.lineJoin}=t;return n.w.graphicService.transformAABBBounds(t,i,e,"miter"===r,this),i}updateLineAABBBoundsByPoints(t,e,i,r){let{points:s=e.points,connectedType:n}=t;return s.forEach(t=>{!1===t.defined&&"connect"!==n||i.add(t.x,t.y)}),i}updateLineAABBBoundsBySegments(t,e,i,r){let{segments:s=e.segments,connectedType:n}=t;return s.forEach(t=>{t.points.forEach(t=>{!1===t.defined&&"connect"!==n||i.add(t.x,t.y)})}),i}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=this.attribute,e=new o.r,i=t.segments,r=t=>{if(t&&t.length){let i=!0;t.forEach(t=>{!1!==t.defined&&(i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y),i=!1)})}};return i&&i.length?i.forEach(t=>{r(t.points)}):t.points&&r(t.points),e}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},r.Wl)},4051:function(t,e,i){"use strict";i.d(e,{E:()=>p});var r=i(6082),s=i(9904),n=i(6502),a=i(8908),o=i(8535),l=i(534),h=i(1749),u=i(8035);let d=["path","customPath",...n.DH];class c extends n.zs{constructor(t){super(t),this.type="path",this.numberType=h.qm}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{path:t}=this.attribute;return null!=t&&""!==t}getParsedPathShape(){let t=this.getGraphicTheme();if(!this.valid)return t.path;let e=this.attribute;return e.path instanceof a.r?e.path:((0,r.Z)(this.cache)&&this.doUpdatePathShape(),this.cache instanceof a.r?this.cache:t.path)}getGraphicTheme(){return(0,o.gh)(this).path}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let t=this.getParsedPathShape();i.union(t.getBounds())}let{tb1:r,tb2:s}=l.w.graphicService.updateTempAABBBounds(i);(0,u.E)(t,e,r),i.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2);let{lineJoin:n=e.lineJoin}=t;return l.w.graphicService.transformAABBBounds(t,i,e,"miter"===n,this),i}doUpdateAABBBounds(t){return this.doUpdatePathShape(),super.doUpdateAABBBounds(t)}doUpdatePathShape(){let t=this.attribute;(0,s.Z)(t.path,!0)?this.cache=(new a.r).fromString(t.path):t.customPath&&(this.cache=new a.r,t.customPath(this.cache,this))}needUpdateTags(t){return super.needUpdateTags(t,d)}needUpdateTag(t){return super.needUpdateTag(t,d)}toCustomPath(){return(new a.r).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},n.Wl)},7795:function(t,e,i){"use strict";i.d(e,{m:()=>u,p:()=>d});var r=i(6502),s=i(8535),n=i(3386),a=i(8908),o=i(534),l=i(1749);let h=["points","cornerRadius",...r.DH];class u extends r.zs{constructor(t){super(t),this.type="polygon",this.numberType=l.Kh}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{points:t}=this.attribute;return t&&t.length>=2}getGraphicTheme(){return(0,s.gh)(this).polygon}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||this.updatePolygonAABBBoundsImprecise(t,e,i),o.w.graphicService.updateTempAABBBounds(i);let{lineJoin:r=e.lineJoin}=t;return o.w.graphicService.transformAABBBounds(t,i,e,"miter"===r,this),i}updatePolygonAABBBoundsImprecise(t,e,i){let{points:r=e.points}=t;return r.forEach(t=>{i.add(t.x,t.y)}),i}_interpolate(t,e,i,r,s){"points"===t&&(s.points=(0,n.SA)(i,r,e))}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=this.attribute.points,e=new a.r;return t.forEach((t,i)=>{0===i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)}),e.closePath(),e}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=r.Wl},5385:function(t,e,i){"use strict";i.d(e,{U:()=>c,f:()=>p});var r=i(6502),s=i(8908),n=i(8535),a=i(534),o=i(1749),l=i(6082);let h=t=>{if(!t)return{x:0,y:0,width:0,height:0};let e=(0,l.Z)(t.width)?t.x1-t.x:t.width,i=(0,l.Z)(t.height)?t.y1-t.y:t.height,r=0,s=0;return e<0?(r=e,e=-e):Number.isNaN(e)&&(e=0),i<0?(s=i,i=-i):Number.isNaN(i)&&(i=0),{x:r,y:s,width:e,height:i}};var u=i(8035);let d=["width","x1","y1","height","cornerRadius",...r.DH];class c extends r.zs{constructor(t){super(t),this.type="rect",this.numberType=o._u}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return(0,n.gh)(this).rect}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{width:e,height:r}=t,{x1:s,y1:n,x:a,y:o}=t;e=null!=e?e:s-a,r=null!=r?r:n-o,(isFinite(e)||isFinite(r)||isFinite(a)||isFinite(o))&&i.set(0,0,e||0,r||0)}let{tb1:r,tb2:s}=a.w.graphicService.updateTempAABBBounds(i);return(0,u.E)(t,e,r),i.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}needUpdateTags(t){return super.needUpdateTags(t,d)}needUpdateTag(t){return super.needUpdateTag(t,d)}toCustomPath(){let{x:t,y:e,width:i,height:r}=h(this.attribute),n=new s.r;return n.moveTo(t,e),n.rect(t,e,i,r),n}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=r.Wl},1636:function(t,e,i){"use strict";i.d(e,{p:()=>A});var r=i(9904),s=i(1601),n=i(6502),a=i(9607),o=i(3570);class l{constructor(t,e,i,r,s,n,a,l,h,u,d,c,p,g){this.left=t,this.top=e,this.width=i,this.height=r,this.actualHeight=0,this.bottom=e+r,this.right=t+i,this.ellipsis=s,this.wordBreak=n,this.verticalDirection=a,this.lines=[],this.globalAlign=l,this.globalBaseline=h,this.layoutDirection=u,this.directionKey=o.i7[this.layoutDirection],this.isWidthMax=d,this.isHeightMax=c,this.singleLine=p,g?(g.clear(),this.icons=g):this.icons=new Map}draw(t,e){let{width:i,height:r}=this.getActualSize(),s=this.isWidthMax?Math.min(this.width,i):this.width||i||0,n=this.isHeightMax?Math.min(this.height,r):this.height||r||0;n=Math.min(n,r);let a=0;switch(this.globalBaseline){case"top":a=0;break;case"middle":a=-n/2;break;case"bottom":a=-n}let o=0;"right"===this.globalAlign||"end"===this.globalAlign?o=-s:"center"===this.globalAlign&&(o=-s/2);let l=this[this.directionKey.height];this.singleLine&&(l=this.lines[0].height+1);let h=!1;if("middle"===this.verticalDirection){if(this.actualHeight>=l&&0!==l)for(let i=0;i<this.lines.length;i++){let{top:r,height:s}=this.lines[i];if(r+s<this[this.directionKey.top]||r+s>this[this.directionKey.top]+l)break;let n=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(n=!0,h=!0),this.lines[i].draw(t,n,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}else{let i=Math.floor((l-this.actualHeight)/2);"vertical"===this.layoutDirection?o+=i:a+=i;for(let i=0;i<this.lines.length;i++)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(let i=0;i<this.lines.length;i++){let{top:r,height:s}=this.lines[i],n=l-this.lines[i].top-this.lines[i].height;if(0===l)this.lines[i].draw(t,!1,o,n+a,this.ellipsis,e);else{if(n+s>this[this.directionKey.top]+l||n<this[this.directionKey.top])return h;{let r=!1;this.ellipsis&&this.lines[i+1]&&n-this.lines[i+1].height<this[this.directionKey.top]&&(r=!0,h=!0),this.lines[i].draw(t,r,o,n+a,this.ellipsis,e)}}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(o+=this.lines[0].height+1);for(let i=0;i<this.lines.length;i++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&(o-=this.lines[i].height+this.lines[i].top);let{top:r,height:s}=this.lines[i];if(0===l)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e);else{if(r+s<this[this.directionKey.top]||r+s>this[this.directionKey.top]+l)return h;{let r=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(r=!0,h=!0),this.lines[i].draw(t,r,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}}}}return h}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){let r=this.lines[i];r.actualWidth>t&&(t=r.actualWidth),e+=r.height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0,{width:i,height:r}=this.getRawActualSize();this.width;let s=this.height||r||0;s=Math.min(s,r);let n=this[this.directionKey.height];if(this.singleLine&&(n=this.lines[0].height+1),"middle"===this.verticalDirection){if(this.actualHeight>=n&&0!==n)for(let i=0;i<this.lines.length;i++){let{top:r,height:s}=this.lines[i];if(r+s<this[this.directionKey.top]||r+s>this[this.directionKey.top]+n);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+n){let r=!0===this.ellipsis?"...":this.ellipsis||"",s=this.lines[i].getWidthWithEllips(r);s>t&&(t=s),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else{this.actualHeight;for(let i=0;i<this.lines.length;i++)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}}else if("bottom"===this.verticalDirection)for(let i=0;i<this.lines.length;i++){let{top:r,height:s}=this.lines[i],a=n-this.lines[i].top-this.lines[i].height;if(0===n)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(a+s>this[this.directionKey.top]+n||a<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[i+1]&&a-this.lines[i+1].height<this[this.directionKey.top]){let r=!0===this.ellipsis?"...":this.ellipsis||"",s=this.lines[i].getWidthWithEllips(r);s>t&&(t=s),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else for(let i=0;i<this.lines.length;i++){let{top:r,height:s}=this.lines[i];if(0===n)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(r+s<this[this.directionKey.top]||r+s>this[this.directionKey.top]+n);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+n){let r=!0===this.ellipsis?"...":this.ellipsis||"",s=this.lines[i].getWidthWithEllips(r);s>t&&(t=s),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}}var h=i(3386);function u(t,e,i,r){let s=Math.round(t),n=Math.round(i),a=Math.round(e),o=Math.round(r);return{left:t>s?s:s-.5,top:i>n?n:n-.5,right:a>e?a:a+.5,bottom:o>r?o:o+.5}}class d{constructor(t,e,i,r){this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic",this.ascentDescentMode=r;let s=(0,h.VA)(i.lineHeight,this.fontSize);this.lineHeight="number"==typeof s?s>this.fontSize?s:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;let{ascent:n,height:a,descent:l,width:u}=(0,o.MS)(t,i,this.ascentDescentMode),d=0,c=0,p=0;this.height>a&&(c=Math.ceil(d=(this.height-a)/2),p=Math.floor(d)),"top"===this.textBaseline?(this.ascent=d,this.descent=a-d):"bottom"===this.textBaseline?(this.ascent=a-d,this.descent=d):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=n+c,this.descent=l+p),this.length=t.length,this.width=u||0,this.text=t||"",this.newLine=e||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,"vertical"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){let{width:t}=(0,o.MS)(this.text,this.character,this.ascentDescentMode);this.width=t,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(t,e,i,r,s,n,a){if(""===this.text||"\n"===this.text||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let l=e+i,h=this.text,d=this.left+r;l+=this.top;let c=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,c="vertical",l-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)h+=this.ellipsisStr,"right"!==n&&"end"!==n||(d-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,o.Hi)(h,("vertical"===c?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,t)+this.ellipsisStr,"right"===n||"end"===n){let{width:e}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);"vertical"===c||(d-=this.ellipsisWidth-e)}}}return Object.assign(Object.assign({},u(d,d+(this.widthOrigin||this.width),e,e+a)),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(t,e,i,r,s,n,a){let l=e+i,h=this.text,d=this.left+r;l+=this.top;let c=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,c="vertical",l-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)h+=this.ellipsisStr,"right"!==n&&"end"!==n||(d-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,o.Hi)(h,("vertical"===c?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,t)+this.ellipsisStr,"right"===n||"end"===n){let{width:e}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);"vertical"===c||(d-=this.ellipsisWidth-e)}}}switch(this.character.script){case"super":l-=this.ascent*(1/3);break;case"sub":l+=this.descent/2}"vertical"===c&&(t.save(),t.rotateAbout(Math.PI/2,d,l),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(d,l),d=0,l=0);let{lineWidth:p=1}=this.character;if(this.character.stroke&&p&&t.strokeText(h,d,l),this.character.fill&&t.fillText(h,d,l),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){let e=1+l,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){let e=1+l-this.ascent/2,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if("underline"===this.character.textDecoration){let e=1+l,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if("line-through"===this.character.textDecoration){let e=1+l-this.ascent/2,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}"vertical"===c&&t.restore()}getWidthWithEllips(t){let e=this.text,i="vertical"===t?this.height:this.width;if("hide"===this.ellipsis)return i;if("add"===this.ellipsis)return i+this.ellipsisWidth;if("replace"===this.ellipsis){let t=(0,o.Hi)(e,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,t)+this.ellipsisStr;let{width:r}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);return i+this.ellipsisWidth-r}return i}}var c=i(7636),p=i(5512);class g extends p.E{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],"always"===t.backgroundShowMode&&(this._hovered=!0),t.margin){let e=(0,h.dj)(t.margin);this._marginArray="number"==typeof e?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(t,e,i)=>{if((0,c.Z)(i)&&-1!==i.indexOf("margin")||"margin"===i){if(e.margin){let t=(0,h.dj)(e.margin);this._marginArray="number"==typeof t?[t,t,t,t]:t}else this._marginArray=[0,0,0,0]}}}get width(){var t;return(null!==(t=this.attribute.width)&&void 0!==t?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return(null!==(t=this.attribute.height)&&void 0!==t?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();let{width:t=a.jK.width,height:e=a.jK.height}=this.attribute,{backgroundWidth:i=t,backgroundHeight:r=e}=this.attribute;return this._AABBBounds.expand([0,(i-t)/2*2,(r-e)/2*2,0]),this._AABBBounds}setHoverState(t){"hover"===this.attribute.backgroundShowMode&&this._hovered!==t&&(this._hovered=t)}}class m{constructor(t,e,i,r,s,n,a,l){this.left=t,this.width=e,this.baseline=i,this.ascent=r,this.descent=s,this.top=i-r,this.paragraphs=n.map(t=>t),this.textAlign=(this.paragraphs[0]instanceof g?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=a,this.directionKey=o.i7[this.direction],this.actualWidth=0;let h=0;this.paragraphs.forEach((t,e)=>{if(0===e&&t instanceof d){let e=o.cV.exec(t.text);0!==(null==e?void 0:e.index)&&(t.text=t.text.slice(null==e?void 0:e.index),t.updateWidth())}this.actualWidth+=t[this.directionKey.width],h=Math.max(t[this.directionKey.height],h)}),this.height=h,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(e,l)}calcOffset(t,e){let i=this.directionKey,r=this.height,s=this.left,n=0;this.actualWidth<t&&!e&&("right"===this.textAlign||"end"===this.textAlign?s=t-this.actualWidth:"center"===this.textAlign?s=(t-this.actualWidth)/2:"justify"===this.textAlign&&(this.paragraphs.length<2?s=(t-this.actualWidth)/2:n=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(t){t instanceof g?(t["_"+i.x]=s,s+=t[i.width]+n,t["_"+i.y]="top"===t.attribute.textBaseline?0:"bottom"===t.attribute.textBaseline?r-t.height:(r-t.height)/2):(t[i.left]=s,s+=t[i.width]+n)})}draw(t,e,i,r,s,n){if(s&&(e||this.paragraphs.some(t=>t.overflow))){let t=!0,i=!1;for(let e=this.paragraphs.length-1;e>=0;e--){let r=this.paragraphs[e];if(r.overflow)t=t&&""===r.text;else if(t){i=!0;break}}let r=0;if(!i)for(let t=this.paragraphs.length-1;t>=0;t--){let i=this.paragraphs[t];if(i.overflow){if(""===i.text)break;continue}if(i instanceof g)break;if("vertical"===this.direction&&"vertical"!==i.direction){i.verticalEllipsis=!0;break}let n=!0===s?"...":s||"";i.ellipsisStr=n;let{width:a}=(0,o.MS)(n,i.character,i.ascentDescentMode),l=a||0;if(l<=this.blankWidth+r){e&&(i.ellipsis="add");break}if(l<=this.blankWidth+r+i.width){i.ellipsis="replace",i.ellipsisWidth=l,i.ellipsisOtherParagraphWidth=this.blankWidth+r;break}i.ellipsis="hide",r+=i.width}}let a="",l=-1,h=[],u=[h];this.paragraphs.forEach((e,s)=>{if(e instanceof g)return;let n=e.drawBackground(t,r,this.ascent,i,0===s,this.textAlign,this.height);n&&(a===n.fillStyle&&l===n.globalAlpha||(h=[],u.push(h),a=n.fillStyle,l=n.globalAlpha),h.push(n))}),u.forEach(e=>{if(0===e.length)return;let i=e[0],r=e[e.length-1];t.fillStyle=i.fillStyle,t.globalAlpha=i.globalAlpha,t.fillRect(i.left,i.top,r.right-i.left,r.bottom-i.top)}),this.paragraphs.forEach((e,s)=>{if(e instanceof g)return e.setAttributes({x:i+e._x,y:r+e._y}),void n(e,t,i+e._x,r+e._y,this.ascent);let a={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};(0,o.p3)(t,e.character),(0,o.nq)(t,e.character,a),e.draw(t,r,this.ascent,i,0===s,this.textAlign,this.height)})}getWidthWithEllips(t){let e=0;for(let i=this.paragraphs.length-1;i>=0;i--){let r=this.paragraphs[i];if(r instanceof g)break;let{width:s}=(0,o.MS)(t,r.character,r.ascentDescentMode),n=s||0;if(n<=this.blankWidth+e){r.ellipsis="add",r.ellipsisWidth=n;break}if(n<=this.blankWidth+e+r.width){r.ellipsis="replace",r.ellipsisWidth=n,r.ellipsisOtherParagraphWidth=this.blankWidth+e;break}r.ellipsis="hide",e+=r.width}let i=0;return this.paragraphs.forEach((t,e)=>{i+=t instanceof g?t.width:t.getWidthWithEllips(this.direction)}),i}}class f{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=o.i7[this.direction]}store(t){if(t instanceof g){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,i=0;"top"===t.attribute.textBaseline?(e=0,i=t.height):"bottom"===t.attribute.textBaseline?(e=t.height,i=0):(e=t.height/2,i=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(t),0!==t.text.length?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(0===this.lineBuffer.length)return;let t=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,e=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,i=new m(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t,e=!1){t instanceof g?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):0===this.lineBuffer.length?(this.store(t),this.send()):(this.send(),this.deal(t)):"number"!=typeof this.width||this.width<0||(t.newLine&&this.send(),(0!==t.text.length||this.newLine)&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t,e)))}cut(t,e){let i=this[this.directionKey.width]-this.lineWidth||0,r=Math.ceil(i/t[this.directionKey.width]*t.length)||0,s=(0,o.Hi)(t.text,i,t.character,r,"break-word"===this.frame.wordBreak);if(0!==s){let[i,r]=function(t,e){let i=t.text.slice(0,e),r=t.text.slice(e);return[new d(i,t.newLine,t.character,t.ascentDescentMode),new d(r,!0,t.character,t.ascentDescentMode)]}(t,s);this.store(i),e?this.send():this.deal(r)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(t))}}var v=i(8535),y=i(534),_=i(1749);let b=!1;try{b=Intl&&"function"==typeof Intl.Segmenter}catch(t){b=!1}let x=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...n.DH];class S extends n.zs{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=_.$M,this.onBeforeAttributeUpdate=(t,e,i)=>{for(let i in t)if("hoverIconId"===i){if(t[i]===e[i])continue;let r=this._frameCache.icons.get(t[i]);this.updateHoverIconState(r)}}}get width(){var t;return null!==(t=this.attribute.width)&&void 0!==t?t:a.Iq.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return null!==(t=this.attribute.height)&&void 0!==t?t:a.Iq.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return null!==(t=this.attribute.ellipsis)&&void 0!==t?t:a.Iq.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return null!==(t=this.attribute.wordBreak)&&void 0!==t?t:a.Iq.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return null!==(t=this.attribute.verticalDirection)&&void 0!==t?t:a.Iq.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return null!==(t=this.attribute.textAlign)&&void 0!==t?t:a.Iq.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return null!==(t=this.attribute.textBaseline)&&void 0!==t?t:a.Iq.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return null!==(t=this.attribute.textConfig)&&void 0!==t?t:a.Iq.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return(0,v.gh)(this).richtext}static AllSingleCharacter(t){return t.lines?t.lines.every(t=>t.paragraphs.every(t=>!(t.text&&(0,r.Z)(t.text)&&S.splitText(t.text).length>1))):t.every(t=>t.isComposing||!(t.text&&(0,r.Z)(t.text)&&S.splitText(t.text).length>1))}static splitText(t){if(b){let e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),i=[];for(let{segment:r}of e.segment(t))i.push(r);return i}return Array.from(t)}static TransformTextConfig2SingleCharacter(t){let e=[];return t.forEach(t=>{let i=S.splitText(t.text.toString());if((0,r.Z)(t.text)&&i.length>1)for(let r=0;r<i.length;r++){let s=i[r];e.push(Object.assign(Object.assign({},t),{text:s}))}else e.push(t)}),e}updateAABBBounds(t,e,i){var r,s,n,a;let{width:o=e.width,height:l=e.height,maxWidth:h=e.maxWidth,maxHeight:u=e.maxHeight,textAlign:d=e.textAlign,verticalDirection:c=null!==(s=null!==(r=t.textBaseline)&&void 0!==r?r:e.textBaseline)&&void 0!==s?s:e.verticalDirection,editOptions:p}=t;if(o>0&&l>0)i.set(0,0,o,l);else{let{width:t,height:e}=this.getFrameCache().getActualSize(),r=o||t||0,s=l||e||0;s="number"==typeof u&&s>u?u:s||0,r="number"==typeof h&&r>h?h:r||0,i.set(0,0,r,s)}!p||!p.keepHeightWhileEmpty||i.height()||(null===(n=t.textConfig)||void 0===n?void 0:n.length)||(i.y2=i.y1+(null!==(a=t.fontSize)&&void 0!==a?a:12),i.x2=i.x1+2);let g=0;switch(c){case"top":g=0;break;case"middle":g=-i.height()/2;break;case"bottom":g=-i.height()}let m=0;switch(d){case"left":m=0;break;case"center":m=-i.width()/2;break;case"right":m=-i.width()}return i.translate(m,g),y.w.graphicService.updateTempAABBBounds(i),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||y.w.graphicService.updateHTMLTextAABBBounds(t,e,i),y.w.graphicService.transformAABBBounds(t,i,e,!1,this),0===i.width()&&0===i.height()&&i.clear(),i}needUpdateTags(t){return super.needUpdateTags(t,x)}needUpdateTag(t){return super.needUpdateTag(t,x)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){let t=this.getFrameCache();if(t.actualHeight>t.height)return!0;let{disableAutoWrapLine:e}=this.attribute;if(e)for(let e=0;e<t.lines.length;e++){let i=t.lines[e];for(let t=0;t<i.paragraphs.length;t++){let e=i.paragraphs[t];if(e.overflow&&""!==e.text)return!0}}return!1}combinedStyleToCharacter(t){let{fill:e,stroke:i,fontSize:r,fontFamily:s,fontStyle:n,fontWeight:a,lineWidth:o,opacity:l,fillOpacity:h,lineHeight:u,strokeOpacity:d,upgradeAttrs:c}=this.attribute,p=Object.assign({fill:e,stroke:i,fontSize:r,fontFamily:s,fontStyle:n,fontWeight:a,lineWidth:o,opacity:l,fillOpacity:h,strokeOpacity:d},t);return(null==c?void 0:c.lineHeight)&&(p.lineHeight=u),p}doUpdateFrameCache(t){var e;let{maxWidth:i,maxHeight:r,width:n,height:a,ellipsis:o,wordBreak:h,verticalDirection:u,textAlign:c,textBaseline:p,layoutDirection:m,singleLine:v,disableAutoWrapLine:y,editable:_,ascentDescentMode:b,upgradeAttrs:x}=this.attribute,A=x&&x.multiBreakLine,{textConfig:k=[]}=this.attribute;_&&k.length>0&&!S.AllSingleCharacter(k)&&(k=S.TransformTextConfig2SingleCharacter(k),this.attribute.textConfig=k);let w=[],C=null!=t?t:k;for(let t=0;t<C.length;t++)if("image"in C[t]){let e=this.combinedStyleToCharacter(C[t]);e.lineWidth=void 0;let i=e.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(e.id);if(i)w.push(i);else{let t=new g(e);t.successCallback=()=>{var t;this.addUpdateBoundTag(),null===(t=this.stage)||void 0===t||t.renderNextFrame()},t.richtextId=e.id,w.push(t)}}else{let e=this.combinedStyleToCharacter(C[t]);if((0,s.Z)(e.text)&&(e.text=`${e.text}`),e.text&&e.text.includes("\n")){let i=e.text.split("\n");for(let r=0;r<i.length;r++)if(0===r)w.push(new d(i[r],!1,e,b));else if(i[r]||t===C.length-1)w.push(new d(i[r],!0,e,b));else{let e=this.combinedStyleToCharacter(C[t+1]);w.push(new d(i[r],!0,e,b))}}else e.text&&w.push(new d(e.text,!1,e,b))}let T="number"==typeof i&&Number.isFinite(i)&&i>0,E="number"==typeof r&&Number.isFinite(r)&&r>0,M="number"==typeof n&&Number.isFinite(n)&&n>0&&(!T||n<=i),B="number"==typeof a&&Number.isFinite(a)&&a>0&&(!E||a<=r),D=new l(0,0,(M?n:T?i:0)||0,(B?a:E?r:0)||0,o,h,u,c,p,m||"horizontal",!M&&T,!B&&E,v||!1,null===(e=this._frameCache)||void 0===e?void 0:e.icons),O=new f(D);if(O.newLine=A,y){let t=0,e=!1;for(let i=0;i<w.length;i++){let r=w[i];e?(r.overflow=!0,r.left=1/0,r.top=1/0,r.newLine||D.lines[D.lines.length-1].paragraphs.push(r)):O.deal(r,!0),D.lines.length!==t&&(t=D.lines.length,O.lineBuffer.length=0,r.overflow=!0,r.left=1e3,r.top=1e3,D.lines[D.lines.length-1].paragraphs.push(r),e=!0),r.newLine&&(e=!1,O.lineWidth=0),O.send()}}else for(let t=0;t<w.length;t++)O.deal(w[t]);if(O.send(),!("horizontal"===D.layoutDirection?M:B)){let t=D.getActualSizeWidthEllipsis(),e="horizontal"===D.layoutDirection?t.width:t.height;("horizontal"===D.layoutDirection?T:E)&&(e=Math.min(e,"horizontal"===D.layoutDirection?i:r)),D.lines.forEach(function(t){t.calcOffset(e,!1)})}A&&D.lines.forEach(t=>{let e=t.paragraphs;t.paragraphs=t.paragraphs.filter(t=>""!==t.text),0===t.paragraphs.length&&e.length&&(e[0].text="\n",t.paragraphs.push(e[0]))}),this._frameCache=D}clone(){return new S(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach(i=>{i.setStage(t,e)})}bindIconEvent(){this.addEventListener("pointermove",t=>{let e=this.pickIcon(t.global);e&&e===this._currentHoverIcon||(e?this.setAttribute("hoverIconId",e.richtextId):!e&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",t=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(t){var e,i,r,s,n;t?(null===(e=this._currentHoverIcon)||void 0===e||e.setHoverState(!1),this._currentHoverIcon=t,this._currentHoverIcon.setHoverState(!0),null===(i=this.stage)||void 0===i||i.setCursor(t.attribute.cursor),null===(r=this.stage)||void 0===r||r.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null===(s=this.stage)||void 0===s||s.setCursor(),null===(n=this.stage)||void 0===n||n.renderNextFrame())}pickIcon(t){let e;let i=this.getFrameCache(),{e:r,f:s}=this.globalTransMatrix;return i.icons.forEach((i,n)=>{var a,o;let l=i.AABBBounds.clone();l.translate(i._marginArray[3],i._marginArray[0]),l.containsPoint({x:t.x-r,y:t.y-s})&&((e=i).globalX=(null!==(a=e.attribute.x)&&void 0!==a?a:0)+r+i._marginArray[3],e.globalY=(null!==(o=e.attribute.y)&&void 0!==o?o:0)+s+i._marginArray[0])}),e}getNoWorkAnimateAttr(){return S.NOWORK_ANIMATE_ATTR}}function A(t){return new S(t)}S.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},n.Wl)},3570:function(t,e,i){"use strict";i.d(e,{Hi:()=>g,MS:()=>f,SZ:()=>m,cV:()=>u,i7:()=>a,nq:()=>c,p3:()=>p});var r=i(534),s=i(3116),n=i(3239);let a={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},o={fontSize:16,fontFamily:n.iR,fill:!0,stroke:!1,fontWeight:"normal",lineHeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",script:"normal"};String.fromCharCode(160);let l=/\w|\(|\)|-/,h=/[.?!,;:/，。？！、；：]/,u=/\S/,d=(t,e)=>{let i=e.fontSize||16;switch(e.script){case"super":case"sub":i*=.8}t.setTextStyle({textAlign:"left",textBaseline:e.textBaseline||"alphabetic",fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||"",fontSize:i,fontFamily:e.fontFamily})};function c(t,e,i){let r=e&&e.fill||o.fill;if(!r)return void(t.globalAlpha=0);let{fillOpacity:n=1,opacity:a=1}=e;t.globalAlpha=n*a,t.fillStyle=i?(0,s.L)(t,r,{AABBBounds:i}):r,d(t,e)}function p(t,e){let i=e&&e.stroke||o.stroke;if(!i)return void(t.globalAlpha=0);let{strokeOpacity:r=1,opacity:s=1}=e;t.globalAlpha=r*s,t.lineWidth=e&&"number"==typeof e.lineWidth?e.lineWidth:1,t.strokeStyle=i,d(t,e)}function g(t,e,i,s,n){if(!e||e<=0)return 0;let a=r.w.graphicUtil.textMeasure,o=s,l=t.slice(0,o),h=Math.floor(a.measureText(l,i).width),u=t.slice(0,o+1),d=Math.floor(a.measureText(u,i).width);for(;h>e||d<=e;){if(h>e?o--:o++,o>t.length){o=t.length;break}if(o<0){o=0;break}l=t.slice(0,o),h=Math.floor(a.measureText(l,i).width),u=t.slice(0,o+1),d=Math.floor(a.measureText(u,i).width)}return n&&(o=m(t,o)),o}function m(t,e,i=!1){let r=e;for(;l.test(t[r-1])&&l.test(t[r])||h.test(t[r]);)if(--r<=0)return i?function(t,e){let i=e;for(;l.test(t[i+1])&&l.test(t[i])||h.test(t[i]);)if(++i>=t.length)return i;return i+1}(t,e):e;return r}function f(t,e,i="actual"){let s=r.w.graphicUtil.textMeasure.measureText(t,e),n={ascent:0,height:0,descent:0,width:0},a="actual"===i?s.actualBoundingBoxAscent:s.fontBoundingBoxAscent,o="actual"===i?s.actualBoundingBoxDescent:s.fontBoundingBoxDescent;return"number"!=typeof a||"number"!=typeof o?(n.width=Math.floor(s.width),n.height=e.fontSize||0,n.ascent=n.height,n.descent=0):(n.width=Math.floor(s.width),n.height=Math.floor(a+o),n.ascent=Math.floor(a),n.descent=n.height-n.ascent),n}},5196:function(t,e,i){"use strict";i.d(e,{t:()=>p,m:()=>c});var r=i(7636),s=i(6502),n=i(8535),a=i(534),o=i(8908),l=i(1749),h=i(8909);let u=(t,e,i)=>{let{outerBorder:r,shadowBlur:s=e.shadowBlur,strokeBoundsBuffer:n=e.strokeBoundsBuffer}=t;if(r){let t=e.outerBorder,{distance:a=t.distance,lineWidth:o=t.lineWidth}=r;(0,h.ph)(i,a+(s+o)/2,!0,n)}return i},d=["symbolType","size",...s.DH];class c extends s.zs{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=l.B5}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(t=0,e=0,i=1){let r=null;try{r=new Path2D}catch(t){return null}let s=this.getParsedPath();if(!s)return null;s.draw(r,i,t,e)}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{size:t}=this.attribute;return(0,r.Z)(t)?2===t.length&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){let{symbolType:t="circle"}=this.attribute;return super.parsePath(t)}getGraphicTheme(){return(0,n.gh)(this).symbol}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateSymbolAABBBoundsImprecise(t,e,i):this.updateSymbolAABBBoundsAccurate(t,e,i));let{tb1:s,tb2:n}=a.w.graphicService.updateTempAABBBounds(i);u(t,e,s),i.union(s),s.setValue(n.x1,n.y1,n.x2,n.y2);let{lineJoin:o=e.lineJoin}=t;return a.w.graphicService.transformAABBBounds(t,i,e,"miter"===o,this),i}updateSymbolAABBBoundsImprecise(t,e,i){let{size:s=e.size}=t;if((0,r.Z)(s))i.set(-s[0]/2,-s[1]/2,s[0]/2,s[1]/2);else{let t=s/2;i.set(-t,-t,t,t)}return i}updateSymbolAABBBoundsAccurate(t,e,i){let{size:r=e.size}=t;return this.getParsedPath().bounds(r,i),i}needUpdateTags(t){return super.needUpdateTags(t,d)}needUpdateTag(t){return super.needUpdateTag(t,d)}toCustomPath(){let t=this.getParsedPath(),e=this.attribute.size,i=(0,r.Z)(e)?e:[e,e];return t.path?(new o.r).fromCustomPath2D(t.path,0,0,i[0],i[1]):(new o.r).fromString(t.pathStr,0,0,i[0],i[1])}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},s.Wl)},2875:function(t,e,i){"use strict";i.d(e,{r:()=>_});var r=i(7183),s=i(7636),n=i(8654),a=i(7393),o=i(8103),l=i(5575),h=i(2008);class u{constructor(t,e,i){this.fontFamily=t,this.textOptions=e,this.textMeasure=i}LayoutBBox(t,e,i,r){if(t.xOffset="left"===e||"start"===e?0:"center"===e?-(t.width/2):"right"===e||"end"===e?-t.width:0,"top"===i)t.yOffset=0;else if("middle"===i)t.yOffset=-(t.height/2);else if("alphabetic"===i){let e=.79;if(1===r.length){let t=r[0];e=t.ascent/(t.ascent+t.descent)}t.yOffset=-(t.height*e)}else t.yOffset=-t.height;return t}GetLayoutByLines(t,e,i,r,s="",n,a){let{lineWidth:o,suffixPosition:l="end",measureMode:u=h.r.actualBounding,keepCenterInLine:d=!1}=null!=a?a:{};t=t.map(t=>t.toString());let c=[],p=[0,0];if("number"==typeof o&&o!==1/0){let e;for(let i=0,r=t.length;i<r;i++){let r=this.textMeasure.measureTextPixelADscentAndWidth(t[i],this.textOptions,u),a=t[i].toString();if(r.width>o){let r=this.textMeasure.clipTextWithSuffix(t[i],this.textOptions,o,s,n,l);a=r.str,e=r.width}else e=r.width;c.push({str:a,width:e,ascent:r.ascent,descent:r.descent,keepCenterInLine:d})}p[0]=o}else{let e,i,r=0;for(let s=0,n=t.length;s<n;s++){i=t[s];let n=this.textMeasure.measureTextPixelADscentAndWidth(t[s],this.textOptions,u);r=Math.max(r,e=n.width),c.push({str:i,width:e,ascent:n.ascent,descent:n.descent,keepCenterInLine:d})}p[0]=r}p[1]=c.length*r,p[0]=c.reduce((t,e)=>Math.max(t,e.width),0);let g={xOffset:0,yOffset:0,width:p[0],height:p[1]};return this.LayoutBBox(g,e,i,c),this.layoutWithBBox(g,c,e,i,r)}layoutWithBBox(t,e,i,r,s){let n=[0,0],a=e.length*s;"top"===r||("middle"===r?n[1]=(t.height-a)/2:"bottom"===r&&(n[1]=t.height-a));for(let a=0;a<e.length;a++)this.lineOffset(t,e[a],i,r,s,n);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:s,textAlign:i,textBaseline:r}}lineOffset(t,e,i,r,s,n){if("left"===i||"start"===i?e.leftOffset=0:"center"===i?e.leftOffset=(t.width-e.width)/2:"right"!==i&&"end"!==i||(e.leftOffset=t.width-e.width),e.topOffset=s/2+(e.ascent-e.descent)/2+n[1],!e.keepCenterInLine){let t=e.ascent+e.descent+0;if(t<s-0&&("bottom"===r?e.topOffset+=(s-t)/2:"top"===r&&(e.topOffset-=(s-t)/2)),"alphabetic"===r){let t=s/(e.ascent+e.descent);e.topOffset=s/2+(e.ascent-e.descent)/2*t+n[1]}}return n[1]+=s,e}}var d=i(534),c=i(6502),p=i(8535),g=i(3386),m=i(1749),f=i(8909);let v=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...c.DH];class y extends c.zs{get font(){let t=this.getGraphicTheme();return this._font||(this._font=(0,r.U)(this.attribute,t)),this._font}get clipedText(){var t;let e=this.attribute,i=this.getGraphicTheme();return Number.isFinite(this.getMaxWidth(i))?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!==(t=e.text)&&void 0!==t?t:i.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var t,e;let i=this.getGraphicTheme(),r=this.attribute;if(!Number.isFinite(this.getMaxWidth(i)))return!1;let{text:s}=this.attribute;if(this.tryUpdateAABBBounds(),null===(e=null===(t=this.cache)||void 0===t?void 0:t.layoutData)||void 0===e?void 0:e.lines){let t="";return this.cache.layoutData.lines.forEach(e=>{t+=e.str}),(Array.isArray(s)?s.join(""):s)!==t}return"vertical"===r.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(t=>t.text).join("")!==r.text.toString():null!=this.clipedText&&this.clipedText!==r.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=m.Us,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{text:t}=this.attribute;return(0,s.Z)(t)?!t.every(t=>null==t||""===t):null!=t&&""!==t}getGraphicTheme(){return(0,p.gh)(this).text}doUpdateOBBBounds(){let t=this.getGraphicTheme();this._OBBBounds.clear();let e=this.attribute,{angle:i=t.angle}=e;if(!i){let t=this.AABBBounds;return this._OBBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._OBBBounds}this.obbText||(this.obbText=new y({})),this.obbText.setAttributes(Object.assign(Object.assign({},e),{angle:0}));let r=this.obbText.AABBBounds,{x:s,y:a}=e,o={x:(r.x1+r.x2)/2,y:(r.y1+r.y2)/2},l=(0,n.xj)(o,i,{x:s,y:a});return this._OBBBounds.copy(r),this._OBBBounds.translate(l.x-o.x,l.y-o.y),this._OBBBounds.angle=i,this._OBBBounds}updateAABBBounds(t,e,i){let{text:r=e.text}=this.attribute;Array.isArray(r)?this.updateMultilineAABBBounds(r):this.updateSingallineAABBBounds(r);let{tb1:s}=d.w.graphicService.updateTempAABBBounds(i),{scaleX:n=e.scaleX,scaleY:o=e.scaleY,shadowBlur:l=e.shadowBlur,strokeBoundsBuffer:h=e.strokeBoundsBuffer}=t;if(l){let t=l/Math.abs(n+o);(0,f.ph)(s,t,!0,h),i.union(s)}return d.w.graphicService.combindShadowAABBBounds(i,this),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||d.w.graphicService.updateHTMLTextAABBBounds(t,e,i),(0,a.n2)(i,i,this.transMatrix),i}updateSingallineAABBBounds(t){this.updateMultilineAABBBounds([t]);let e=this.cache.layoutData;if(e&&e.lines&&e.lines.length){let t=e.lines[0];this.cache.clipedText=t.str,this.cache.clipedWidth=t.width}return this._AABBBounds}updateMultilineAABBBounds(t){let e=this.getGraphicTheme(),{direction:i=e.direction,underlineOffset:r=e.underlineOffset}=this.attribute,s="horizontal"===i?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return"horizontal"===i&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),s}guessLineHeightBuf(t){return t?.1*t:0}updateHorizontalMultilineAABBBounds(t){var e;let i=this.getGraphicTheme(),r=this.attribute,{fontFamily:s=i.fontFamily,textAlign:n=i.textAlign,textBaseline:a=i.textBaseline,fontSize:o=i.fontSize,fontWeight:l=i.fontWeight,ellipsis:h=i.ellipsis,maxLineWidth:c,stroke:p=i.stroke,wrap:g=i.wrap,measureMode:m=i.measureMode,lineWidth:f=i.lineWidth,whiteSpace:v=i.whiteSpace,suffixPosition:y=i.suffixPosition,ignoreBuf:_=i.ignoreBuf,keepCenterInLine:b=i.keepCenterInLine}=r,x=_?0:this.guessLineHeightBuf(o),S=this.getLineHeight(r,i,x);if("normal"===v||g)return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(null===(e=this.cache)||void 0===e?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}let A=new u(s,{fontSize:o,fontWeight:l,fontFamily:s,lineHeight:S},d.w.graphicUtil.textMeasure).GetLayoutByLines(t,n,a,S,!0===h?i.ellipsis:h||void 0,!1,{lineWidth:c,suffixPosition:y,measureMode:m,keepCenterInLine:b}),{bbox:k}=A;return this.cache.layoutData=A,this.clearUpdateShapeTag(),this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}updateWrapAABBBounds(t){var e,i,r;let n=this.getGraphicTheme(),{fontFamily:a=n.fontFamily,textAlign:o=n.textAlign,textBaseline:l=n.textBaseline,fontSize:h=n.fontSize,ellipsis:c=n.ellipsis,maxLineWidth:p,stroke:g=n.stroke,lineWidth:m=n.lineWidth,wordBreak:f=n.wordBreak,fontWeight:v=n.fontWeight,ignoreBuf:y=n.ignoreBuf,measureMode:_=n.measureMode,suffixPosition:b=n.suffixPosition,heightLimit:x=0,lineClamp:S,keepCenterInLine:A=n.keepCenterInLine}=this.attribute,k=y?0:this.guessLineHeightBuf(h),w=this.getLineHeight(this.attribute,n,k);if(!this.shouldUpdateShape()&&(null===(e=this.cache)||void 0===e?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),g&&this._AABBBounds.expand(m/2),this._AABBBounds}let C=d.w.graphicUtil.textMeasure,T={fontSize:h,fontWeight:v,fontFamily:a,lineHeight:w},E=new u(a,T,C),M=(0,s.Z)(t)?t.map(t=>t.toString()):[t.toString()],B=[],D=[0,0],O=1/0;if(x>0&&(O=Math.max(Math.floor(x/w),1)),S&&(O=Math.min(O,S)),"number"==typeof p&&p!==1/0){if(p>0)for(let t=0;t<M.length;t++){let e=M[t],s=!0;if(t===O-1){let i=C.clipTextWithSuffix(e,T,p,c,!1,b,t!==M.length-1),r=C.measureTextPixelADscentAndWidth(i.str,T,_);B.push({str:i.str,width:i.width,ascent:r.ascent,descent:r.descent,keepCenterInLine:A});break}let n=C.clipText(e,T,p,"break-all"!==f,"keep-all"===f);if(""!==e&&""===n.str||n.wordBreaked){if(c){let t=C.clipTextWithSuffix(e,T,p,c,!1,b);n.str=null!==(i=t.str)&&void 0!==i?i:"",n.width=null!==(r=t.width)&&void 0!==r?r:0}else n.str="",n.width=0;s=!1}let a=C.measureTextPixelADscentAndWidth(n.str,T,_);B.push({str:n.str,width:n.width,ascent:a.ascent,descent:a.descent,keepCenterInLine:A});let o=n.str.length;if(n.wordBreaked&&(""===e||""!==n.str)&&(s=!0,o=n.wordBreaked),n.str.length===e.length);else if(s){let i=e.substring(o);"keep-all"===f&&(i=i.replace(/^\s+/g,"")),M.splice(t+1,0,i)}}let t=0;B.forEach(e=>{t=Math.max(t,e.width)}),D[0]=t}else{let t,e,i=0;for(let r=0,s=M.length;r<s;r++){if(r===O-1){let t=C.clipTextWithSuffix(M[r],T,p,c,!1,b),e=C.measureTextPixelADscentAndWidth(t.str,T,_);B.push({str:t.str,width:t.width,ascent:e.ascent,descent:e.descent,keepCenterInLine:A}),i=Math.max(i,t.width);break}e=M[r],i=Math.max(i,t=C.measureTextWidth(e,T));let s=C.measureTextPixelADscentAndWidth(e,T,_);B.push({str:e,width:t,ascent:s.ascent,descent:s.descent,keepCenterInLine:A})}D[0]=i}D[1]=B.length*w;let P={xOffset:0,yOffset:0,width:D[0],height:D[1]};E.LayoutBBox(P,o,l,B);let I=E.layoutWithBBox(P,B,o,l,w);return this.cache.layoutData=I,this.clearUpdateShapeTag(),this._AABBBounds.set(P.xOffset,P.yOffset,P.xOffset+P.width,P.yOffset+P.height),g&&this._AABBBounds.expand(m/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,i;let r;let s=this.getGraphicTheme(),n=d.w.graphicUtil.textMeasure,a=this.attribute,{maxLineWidth:h=s.maxLineWidth,ellipsis:u=s.ellipsis,fontFamily:c=s.fontFamily,fontSize:p=s.fontSize,fontWeight:g=s.fontWeight,stroke:m=s.stroke,lineWidth:v=s.lineWidth,verticalMode:_=s.verticalMode,suffixPosition:b=s.suffixPosition}=a,x=this.getLineHeight(a,s,0),{textAlign:S=s.textAlign,textBaseline:A=s.textBaseline}=a;if(!_){let t=S;S=null!==(e=y.baselineMapAlign[A])&&void 0!==e?e:"left",A=null!==(i=y.alignMapBaseline[t])&&void 0!==i?i:"top"}if(r=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);r=(0,o.Fp)(e,r)});let t=(0,l.js)(S,r),e=this.cache.verticalList.length*x,i=(0,l.nV)(A,e,p);return this._AABBBounds.set(i,t,i+e,t+r),m&&this._AABBBounds.expand(v/2),this._AABBBounds}let k=t.map(t=>(0,f.Xk)(t.toString()));k.forEach((t,e)=>{if(Number.isFinite(h)){if(u){let i=!0===u?s.ellipsis:u,a=n.clipTextWithSuffixVertical(t,{fontSize:p,fontWeight:g,fontFamily:c},h,i,!1,b);k[e]=a.verticalList,r=a.width}else{let i=n.clipTextVertical(t,{fontSize:p,fontWeight:g,fontFamily:c},h,!1);k[e]=i.verticalList,r=i.width}}else r=0,t.forEach(t=>{let e=t.direction===f.m5.HORIZONTAL?p:n.measureTextWidth(t.text,{fontSize:p,fontWeight:g,fontFamily:c});r+=e,t.width=e})}),this.cache.verticalList=k,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);r=(0,o.Fp)(e,r)});let w=(0,l.js)(S,r),C=this.cache.verticalList.length*x,T=(0,l.nV)(A,C,p);return this._AABBBounds.set(T,w,T+C,w+r),m&&this._AABBBounds.expand(v/2),this._AABBBounds}getMaxWidth(t){var e,i;let r=this.attribute;return null!==(i=null!==(e=r.maxLineWidth)&&void 0!==e?e:r.maxWidth)&&void 0!==i?i:t.maxWidth}getLineHeight(t,e,i){var r;return null!==(r=(0,g.VA)(t.lineHeight,t.fontSize||e.fontSize))&&void 0!==r?r:(t.fontSize||e.fontSize)+i}needUpdateTags(t,e=v){return super.needUpdateTags(t,e)}needUpdateTag(t,e=v){return super.needUpdateTag(t,e)}_interpolate(t,e,i,r,s){"text"===t&&(s.text=r)}clone(){return new y(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return y.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return y.baselineMapAlign}getAlignMapBaseline(){return y.alignMapBaseline}}function _(t){return new y(t)}y.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},c.Wl),y.baselineMapAlign={top:"left",bottom:"right",middle:"center"},y.alignMapBaseline={left:"top",right:"bottom",center:"middle"}},8535:function(t,e,i){"use strict";i.d(e,{Q2:()=>h,gh:()=>function t(e,i){return e.glyphHost?t(e.glyphHost):i?(e.isContainer,i):function(t){let e;if(e=t.isContainer?t:t.parent){for(;e&&!e.theme;)e=e.parent;return e?(e.theme||e.createTheme(),e.theme.getTheme(e)):u.getTheme()}return null}(e)||e.attachedThemeGraphic&&t(e.attachedThemeGraphic)||u.getTheme()}});var r=i(4659),s=i(9607);let n={arc:s.Up,area:s.eh,circle:s.t8,line:s.h8,path:s.J7,symbol:s.th,text:s.T5,rect:s.kx,polygon:s.ZD,richtext:s.Iq,richtextIcon:s.YW,image:s.jK,group:s.bZ,glyph:s.e9},a=Object.keys(n);function o(t,e){Object.keys(e).forEach(i=>{t[i]=e[i]})}let l={arc:Object.assign({},n.arc),area:Object.assign({},n.area),circle:Object.assign({},n.circle),line:Object.assign({},n.line),path:Object.assign({},n.path),symbol:Object.assign({},n.symbol),text:Object.assign({},n.text),rect:Object.assign({},n.rect),polygon:Object.assign({},n.polygon),richtext:Object.assign({},n.richtext),richtextIcon:Object.assign({},n.richtextIcon),image:Object.assign({},n.image),group:Object.assign({},n.group),glyph:Object.assign({},n.glyph)};class h{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},a.forEach(t=>{this._defaultTheme[t]=Object.create(l[t])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t||!this.dirty)return this.combinedTheme;let e={},i=this.getParentWithTheme(t);return i&&(e=i.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,i=!1){if(this.dirty){let s=this.getParentWithTheme(t);if(s){let t=s.theme;(t.dirty||i)&&t.applyTheme(s,e,!0)}this.userTheme?this.doCombine(s&&s.theme.combinedTheme):(s?this.combinedTheme=s.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,r.Y.getInstance().warn("未知错误，走到不应该走的区域里")),this.dirty=!1)}return this.combinedTheme}doCombine(t){let e=this.userTheme,i=this.combinedTheme;a.forEach(r=>{let s=Object.create(l[r]);t&&t[r]&&o(s,t[r]),i[r]&&o(s,i[r]),e[r]&&o(s,e[r]),this.combinedTheme[r]=s}),e.common&&a.forEach(t=>{o(this.combinedTheme[t],e.common)}),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach(e=>{i[e]?Object.assign(i[e],t[e]):i[e]=Object.assign({},t[e])}):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren(t=>{t.isContainer&&(t.theme&&(t.theme.dirty=!0),this.dirtyChildren(t))})}}let u=new h},8909:function(t,e,i){"use strict";i.d(e,{Gg:()=>h,Xk:()=>u,b4:()=>a,m5:()=>s,ph:()=>o});var r,s,n=i(534);function a(t){var e,i,r,s;return e=this,i=void 0,r=void 0,s=function*(){let e=[],i=t.getChildren();yield new Promise(t=>{n.w.global.getRequestAnimationFrame()(()=>{t(null)})}),i.forEach(t=>{t.subLayers.size&&t.subLayers.forEach(t=>{t.drawContribution&&t.drawContribution.hooks&&t.drawContribution.rendering&&e.push(new Promise(e=>{t.drawContribution.hooks.completeDraw.tap("outWait",()=>{t.drawContribution.hooks.completeDraw.taps=t.drawContribution.hooks.completeDraw.taps.filter(t=>"outWait"!==t.name),e(null)})}))})}),yield Promise.all(e)},new(r||(r=Promise))(function(t,n){function a(t){try{l(s.next(t))}catch(t){n(t)}}function o(t){try{l(s.throw(t))}catch(t){n(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof r?i:new r(function(t){t(i)})).then(a,o)}l((s=s.apply(e,i||[])).next())})}function o(t,e,i,r=0){var s,n;return t.expand(e+(r/2+(i?(s=i,n=e,s?n:0):0))),t}let l=0;function h(){return l++}function u(t){let e=[],i=0,r="";for(let n=0;n<t.length;n++)!function(t){if(d.has(t))return!0;if(c.has(t))return!1;let e=!1;return 256>t.codePointAt(0)&&(e=!0),e}(t[n])?(i&&(e.push({text:r,direction:s.VERTICAL}),r="",i=0),e.push({text:t[n],direction:s.HORIZONTAL})):i?r+=t[n]:(i=1,r=t[n]);return r&&e.push({text:r,direction:s.VERTICAL}),e}(r=s||(s={}))[r.HORIZONTAL=0]="HORIZONTAL",r[r.VERTICAL=1]="VERTICAL";let d=new Map;["…","（","）","—","【","】","「","」","《","》"].forEach(t=>d.set(t,!0));let c=new Map;[""].forEach(t=>c.set(t,!0))},2008:function(t,e,i){"use strict";var r,s;i.d(e,{r:()=>r}),(s=r||(r={}))[s.estimate=0]="estimate",s[s.actualBounding=1]="actualBounding",s[s.fontBounding=2]="fontBounding"},8612:function(t,e,i){"use strict";i.d(e,{rF:()=>tJ});var r,s=i(8429),n=i(7428),a=i(1600),o=i(7089),l=i(8906),h=i(1822),u=i(3239),d=i(86),c=function(t,e){return function(i,r){e(i,r,t)}};let p=class{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(t){this._isImageAnonymous=t}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(t){this._env||this.setEnv("browser"),this.envContribution.supportEvent=t}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=t}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=t}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=t}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(t){this._env||this.setEnv("browser"),this.envContribution.applyStyles=t}constructor(t){this.contributions=t,this._isImageAnonymous=!0,this.id=d.R.GenAutoIncrementId(),this.hooks={onSetEnv:new h.n(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}bindContribution(t){let e=[];if(this.contributions.getContributions().forEach(i=>{let r=i.configure(this,t);r&&r.then&&e.push(r)}),e.length)return Promise.all(e)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(t,e){if(e&&!0===e.force||this._env!==t)return this.deactiveCurrentEnv(),this.activeEnv(t,e)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(t,e){let i=this._env;this._env=t;let r=this.bindContribution(e);if(r&&r.then)return r.then(()=>{this.envParams=e,this.hooks.onSetEnv.call(i,t,this)});this.envParams=e,this.hooks.onSetEnv.call(i,t,this)}setActiveEnvContribution(t){this.envContribution=t}createCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(t)}createOffscreenCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(t)}releaseCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(t)}addEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(t,e,i)}removeEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(t,e,i)}dispatchEvent(t){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(t)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(t){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(t):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(t,e){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(t,e):null}loadImage(t){return this._env||this.setEnv("browser"),this.envContribution.loadImage(t)}loadSvg(t){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(t)}loadJson(t){return this._env||this.setEnv("browser"),this.envContribution.loadJson(t)}loadArrayBuffer(t){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(t)}loadBlob(t){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(t)}loadFont(t,e,i){var r,s,n,a;return r=this,s=void 0,n=void 0,a=function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(t,e,i)},new(n||(n=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n(function(t){t(r)})).then(i,o)}l((a=a.apply(r,s||[])).next())})}isChrome(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(t){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(t)}removeDom(t){return this._env||this.setEnv("browser"),this.envContribution.removeDom(t)}createDom(t){return this._env||this.setEnv("browser"),this.envContribution.createDom(t)}updateDom(t,e){return this._env||this.setEnv("browser"),this.envContribution.updateDom(t,e)}getElementTop(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(t,e)}getElementLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(t,e)}getElementTopLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(t,e)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(t){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(t)}};p=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),c(0,(0,a.f)(l.Qc)),c(0,(0,o.t)(u.D0)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],p);var g=i(2008),m=i(9607),f=i(3570),v=i(4659);let y=class{configure(t,e){this.canvas=t.canvas,this.context=t.context,t.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(t,e,i){this.context.setTextStyleWithoutAlignBaseline(e);let r=this.context.measureText(t);return i?this.compatibleMetrics(r,e):r}_measureTextWithAlignBaseline(t,e,i){this.context.setTextStyle(e);let r=this.context.measureText(t);return i?this.compatibleMetrics(r,e):r}compatibleMetrics(t,e){if(null==t.actualBoundingBoxAscent||null==t.actualBoundingBoxDescent||null==t.fontBoundingBoxAscent||null==t.fontBoundingBoxDescent){t={width:t.width};let{ascent:i,descent:r}=this.measureTextBoundADscentEstimate(e);t.actualBoundingBoxAscent=i,t.actualBoundingBoxDescent=r,t.fontBoundingBoxAscent=i,t.fontBoundingBoxDescent=r}if(null==t.actualBoundingBoxLeft||null==t.actualBoundingBoxRight){t={width:t.width,actualBoundingBoxAscent:t.actualBoundingBoxAscent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent};let{left:i,right:r}=this.measureTextBoundLeftRightEstimate(e);t.actualBoundingBoxLeft=i,t.actualBoundingBoxRight=r}return t}estimate(t,{fontSize:e=m.T5.fontSize}){let i=0,r=0;for(let e=0;e<t.length;e++)128>t.charCodeAt(e)?i++:r++;return{width:~~(.8*i*e+r*e),height:e}}measureTextWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsLeftRight(t,e,i){return this.context?{left:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxLeft,right:i.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(e)}measureTextPixelHeight(t,e,i){var r;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).actualBoundingBoxAscent-i.actualBoundingBoxDescent):null!==(r=e.fontSize)&&void 0!==r?r:m.q9.fontSize}measureTextPixelADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundHieght(t,e,i){var r;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).fontBoundingBoxAscent-i.fontBoundingBoxDescent):null!==(r=e.fontSize)&&void 0!==r?r:m.q9.fontSize}measureTextBoundADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).fontBoundingBoxAscent,descent:i.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundADscentEstimate(t){var e;let i=null!==(e=t.fontSize)&&void 0!==e?e:m.q9.fontSize;return{ascent:.79*i,descent:.21*i}}measureTextBoundLeftRightEstimate(t){var e;let i=null!==(e=t.fontSize)&&void 0!==e?e:m.q9.fontSize,{textAlign:r}=t;return"center"===r?{left:i/2,right:i/2}:"right"===r||"end"===r?{left:i,right:0}:{left:0,right:i}}measureTextPixelADscentAndWidth(t,e,i){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:this.estimate(t,e).width});let r=this._measureTextWithoutAlignBaseline(t,e,!0);if(i===g.r.actualBounding)return{ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,width:r.width};if(i===g.r.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:r.width});if(i===g.r.fontBounding){let t=r.fontBoundingBoxAscent,e=r.fontBoundingBoxDescent;if(r.actualBoundingBoxDescent&&e<r.actualBoundingBoxDescent){let i=r.actualBoundingBoxDescent-e;e+=i,t-=i}else if(r.actualBoundingBoxAscent&&t<r.actualBoundingBoxAscent){let i=r.actualBoundingBoxAscent-t;t+=i,e-=i}return{ascent:t,descent:e,width:r.width}}return{ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,width:r.width}}measureText(t,e){return this.context?(this.context.setTextStyleWithoutAlignBaseline(e),this.context.measureText(t)):this.estimate(t,e)}clipTextVertical(t,e,i,r){if(0===t.length)return{verticalList:t,width:0};let{fontSize:s=12}=e;t.forEach(t=>{t.width=0===t.direction?s:this.measureTextWidth(t.text,e)});let n=[],a=0,o=0;for(;o<t.length&&a+t[o].width<i;o++)a+=t[o].width,n.push(t[o]);if(t[o]&&t[o].text.length>1){let s=this._clipText(t[o].text,e,i-a,0,t[o].text.length-1,"end",!1);if(r&&s.str!==t[o].text){let i="",r=0;for(let e=0;e<o;e++){let s=t[e];i+=s.text,r+=s.text.length}i+=t[o].text;let n=r+s.str.length,a=(0,f.SZ)(i,n);(a-=r)!=s.str.length-1&&(s.str=s.str.substring(0,a),s.width=this.measureTextWidth(s.str,e))}n.push(Object.assign(Object.assign({},t[o]),{text:s.str,width:s.width})),a+=s.width}return{verticalList:n,width:a}}clipText(t,e,i,r,s){if(0===t.length)return{str:"",width:0};let n=this.measureTextWidth(t,e);if(n<=i)return{str:t,width:n};if((n=this.measureTextWidth(t[0],e))>i)return{str:"",width:0};let a=this._clipText(t,e,i,0,t.length-1,"end",!1);if(r&&a.str!==t){let i=(0,f.SZ)(t,a.str.length,s);i!==a.str.length&&(i>a.str.length&&(a.wordBreaked=i,i=a.str.length),a.str=t.substring(0,i),a.width=this.measureTextWidth(a.str,e))}return a}_clipText(t,e,i,r,s,n,a){let o;if("start"===n)o=this._clipTextStart(t,e,i,r,s),a&&(o.result=a+o.str);else if("middle"===n){let r=this._clipTextMiddle(t,e,i,"","",0,0,1);o={str:"none",width:r.width,result:r.left+a+r.right}}else o=this._clipTextEnd(t,e,i,r,s),a&&(o.result=o.str+a);return o}_clipTextEnd(t,e,i,r,s){let n;if(r===s){v.Y.getInstance().warn(`【_clipTextEnd】不应该走到这里${t}, ${r}, ${s}`);let i=t.substring(0,s+1);return{str:i,width:this.measureTextWidth(i,e)}}let a=Math.floor((r+s)/2),o=t.substring(0,a+1),l=this.measureTextWidth(o,e);if(l>i){if(o.length<=1)return{str:"",width:0};let s=t.substring(0,a);return(n=this.measureTextWidth(s,e))<=i?{str:s,width:n}:this._clipTextEnd(t,e,i,r,a)}if(l<i){if(a>=t.length-1)return{str:t,width:this.measureTextWidth(t,e)};let r=t.substring(0,a+2);return(n=this.measureTextWidth(r,e))>=i?{str:o,width:l}:this._clipTextEnd(t,e,i,a,s)}return{str:o,width:l}}_clipTextStart(t,e,i,r,s){let n;let a=Math.ceil((r+s)/2),o=t.substring(a-1,t.length),l=this.measureTextWidth(o,e);if(l>i){if(o.length<=1)return{str:"",width:0};let r=t.substring(a,t.length);return(n=this.measureTextWidth(r,e))<=i?{str:r,width:n}:this._clipTextStart(t,e,i,a,t.length)}if(l<i){if(a<=0)return{str:t,width:this.measureTextWidth(t,e)};let s=t.substring(a-2,t.length);return(n=this.measureTextWidth(s,e))>=i?{str:o,width:l}:this._clipTextStart(t,e,i,r,a)}return{str:o,width:l}}_clipTextMiddle(t,e,i,r,s,n,a,o){let l=t.substring(0,o),h=this.measureTextWidth(l,e);if(h+a>i)return{left:r,right:s,width:n+a};let u=t.substring(t.length-o,t.length),d=this.measureTextWidth(u,e);return h+d>i?{left:l,right:s,width:h+a}:this._clipTextMiddle(t,e,i,l,u,h,d,o+1)}clipTextWithSuffixVertical(t,e,i,r,s,n){let a;if(""===r)return this.clipTextVertical(t,e,i,s);if(0===t.length)return{verticalList:t,width:0};let o=this.clipTextVertical(t,e,i,s);if(o.verticalList.length===t.length&&o.verticalList[o.verticalList.length-1].width===t[t.length-1].width)return o;let l=this.measureTextWidth(r,e);if(l>i)return o;if(i-=l,"start"===n){let n=this.revertVerticalList(t);a=this.clipTextVertical(n,e,i,s);let o=this.revertVerticalList(a.verticalList);o.unshift({text:r,direction:1,width:l}),a.verticalList=o}else if("middle"===n){let n=this.clipTextVertical(t,e,i/2,s),o=this.revertVerticalList(t),h=this.clipTextVertical(o,e,i/2,s);n.verticalList.push({text:r,direction:1,width:l}),this.revertVerticalList(h.verticalList).forEach(t=>n.verticalList.push(t)),a={verticalList:n.verticalList,width:n.width+h.width}}else(a=this.clipTextVertical(t,e,i,s)).verticalList.push({text:r,direction:1,width:l});return a.width+=l,a}revertVerticalList(t){return t.reverse().map(t=>{let e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})})}clipTextWithSuffix(t,e,i,r,s,n,a=!1){if(""===r)return this.clipText(t,e,i,s);if(0===t.length)return{str:"",width:0};let o=this.measureTextWidth(t,e);if(!a&&o<=i)return{str:t,width:o};let l=this.measureTextWidth(r,e);if(l>i)return{str:"",width:0};if(a&&o+l<=i)return{str:t+r,width:o+l};i-=l;let h=this._clipText(t,e,i,0,t.length-1,n,r);if(s&&h.str!==t){let i=(0,f.SZ)(t,h.str.length);i!==h.str.length&&(h.result=t.substring(0,i),h.width=this.measureTextWidth(h.str,e))}else a&&h.str===t&&(h.result=t+r);return h.str=h.result,h.width+=l,h}};y=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],y);let _=Symbol.for("TextMeasureContribution"),b=class extends y{};b=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],b);var x=i(8485),S=i(9935),A=i(1164),k=i(534),w=i(6480),C=i(2575),T=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},E=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},M=function(t,e){return function(i,r){e(i,r,t)}};let B=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(t){this.contributions=t,this.configured=!1,this.global=k.w.global,this.global.hooks.onSetEnv.tap("graphic-util",(t,e,i)=>{this.configured=!1,this.configure(i,e)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}configure(t,e){this.configured||(this.contributions.getContributions().forEach(t=>{t.configure(this,e)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){let t=A.A.shareCanvas();this._canvas=t,this._context=t.getContext("2d")}}bindTextMeasure(t){this._textMeasure=t}measureText(t,e,i="native"){var r;this.configure(this.global,this.global.env);let s=this.global.measureTextMethod;this.global.measureTextMethod=i;let n={width:this._textMeasure.measureTextWidth(t,e),height:null!==(r=e.fontSize)&&void 0!==r?r:m.q9.fontSize};return this.global.measureTextMethod=s,n}createTextMeasureInstance(t,e,i){return this.configure(this.global,this.global.env),new x.e(Object.assign({defaultFontParams:{fontFamily:m.q9.fontFamily,fontSize:m.q9.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:"-/: .,@%'\"~"+x.e.ALPHABET_CHAR_SET+x.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t)}drawGraphicToCanvas(t,e,i){if(!e.defaultLayer)return null;let r=w.n.get(C.Oo),s=t.AABBBounds,n=s.width(),a=s.height(),o=-s.x1,l=-s.y1;r.create({viewBox:{x1:o,y1:l,x2:s.x2,y2:s.y2},width:n,height:a,canvas:i,dpr:e.window.dpr,canvasControled:!0,offscreen:!0,title:""});let h=e.params.optimize.disableCheckGraphicWidthOutRange;e.params.optimize.disableCheckGraphicWidthOutRange=!0,e.defaultLayer.getNativeHandler().drawTo(r,[t],{transMatrix:r.getViewBoxTransform(),viewBox:r.getViewBox(),stage:e,layer:e.defaultLayer,renderService:e.renderService,background:"transparent",clear:!0,updateBounds:!1}),e.params.optimize.disableCheckGraphicWidthOutRange=h;let u=r.getNativeHandler();return u.nativeCanvas?u.nativeCanvas:null}};B=T([(0,n.b)(),M(0,(0,a.f)(l.Qc)),M(0,(0,o.t)(_)),E("design:paramtypes",[Object])],B),(tH=tN||(tN={}))[tH.transform=0]="transform",tH[tH.matrix=1]="matrix";let D=new S.y,O=class{constructor(){this.matrix=new S.y}init(t){return this.mode=tN.transform,this.originTransform=t,this.matrix.reset(),this}fromMatrix(t,e){return this.mode=tN.matrix,this.outSourceMatrix=t,this.outTargetMatrix=e,this}scaleMatrix(t,e,i){let r=this.outSourceMatrix;if(D.setValue(r.a,r.b,r.c,r.d,r.e,r.f),this.outTargetMatrix.reset(),i){let{x:r,y:s}=i;this.outTargetMatrix.translate(r,s),this.outTargetMatrix.scale(t,e),this.outTargetMatrix.translate(-r,-s)}else this.outTargetMatrix.scale(t,e);return this.outTargetMatrix.multiply(D.a,D.b,D.c,D.d,D.e,D.f),this}rotateMatrix(t,e){let i=this.outSourceMatrix;if(D.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),e){let{x:i,y:r}=e;this.outTargetMatrix.translate(i,r),this.outTargetMatrix.rotate(t),this.outTargetMatrix.translate(-i,-r)}else this.outTargetMatrix.rotate(t);return this.outTargetMatrix.multiply(D.a,D.b,D.c,D.d,D.e,D.f),this}scale(t,e,i){return this.mode===tN.matrix?this.scaleMatrix(t,e,i):this}rotate(t,e){return this.mode===tN.matrix?this.rotateMatrix(t,e):this}translateMatrix(t,e){let i=this.outSourceMatrix;return D.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(t,e),this.outTargetMatrix.multiply(D.a,D.b,D.c,D.d,D.e,D.f),this}translate(t,e){return this.mode===tN.matrix?this.translateMatrix(t,e):this}simplify(t){return this.mode===tN.matrix?this.simplifyMatrix(t):this}simplifyMatrix(t){return this}};O=T([(0,n.b)(),E("design:paramtypes",[])],O);var P=i(8535),I=i(411);class R extends I.ZA{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw Error("暂不支持")}get dpr(){return this._dpr}constructor(t,e,i,r){var s;super({}),this.stage=t,this.global=e,this.window=i,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,i,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!==(s=r.zIndex)&&void 0!==s?s:0}),this.layer=this,this.subLayers=new Map,this.theme=new P.Q2,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){let e=Array.from(this.subLayers.values()).sort((t,e)=>t.zIndex-e.zIndex);this.layerHandler.merge(e.map(e=>(e.layer.subLayers.size&&e.layer.combineSubLayer(t),e.layer.getNativeHandler()))),t&&e.forEach(t=>{t.group&&(t.group.incremental=0)}),e.forEach(t=>{k.w.layerService.releaseLayer(this.stage,t.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw Error("暂不支持")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(i=>{i.layer.renderCount=this.renderCount,i.layer.render(t,e)})}render(t,e){var i;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:null!==(i=t.background)&&void 0!==i?i:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach(t=>t(this)),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw Error("暂不支持")}setToFrame(t){throw Error("暂不支持")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(t=>{k.w.layerService.releaseLayer(this.stage,t.layer)})}drawTo(t,e){var i;this.layerHandler.drawTo(t,[this],Object.assign({background:null!==(i=e.background)&&void 0!==i?i:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach(t=>t(this))}}var L=i(6106);let F=tz=class{static GenerateLayerId(){return`${tz.idprefix}_${tz.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=k.w.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(t){return this.layerMap.get(t)}getRecommendedLayerType(t){return t||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}getLayerHandler(t){return"static"===t?w.n.get(L.kj):"dynamic"===t?w.n.get(L.ym):w.n.get(L.XJ)}createLayer(t,e={main:!1}){var i;this.tryInit();let r=this.getRecommendedLayerType(e.layerMode);r=e.main||e.canvasId?"static":r;let s=this.getLayerHandler(r),n=new R(t,this.global,t.window,Object.assign(Object.assign({main:!1},e),{layerMode:r,canvasId:null!==(i=e.canvasId)&&void 0!==i?i:tz.GenerateLayerId(),layerHandler:s})),a=this.layerMap.get(t)||[];return a.push(n),this.layerMap.set(t,a),this.staticLayerCountInEnv--,n}prepareStageLayer(t){let e;t.forEachChildren(t=>{let i=t.getNativeHandler();"virtual"===i.type?(i.mainHandler=e,e.secondaryHandlers.push(i)):(e=i).secondaryHandlers=[]})}releaseLayer(t,e){e.release();let i=this.layerMap.get(t)||[];this.layerMap.set(t,i.filter(t=>t!==e))}layerCount(t){return(this.layerMap.get(t)||[]).length}restLayerCount(t){return"browser"===this.global.env?10:0}releaseStage(t){this.layerMap.delete(t)}};F.idprefix="visactor_layer",F.prefix_count=0,F=tz=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],F);let j=new s.n(t=>{t(u.y2).to(p).inSingletonScope(),t(C.Oo).to(C.Il),t(L.no).to(B).inSingletonScope(),t(L.Gp).to(O).inSingletonScope(),t(L.IT).to(F).inSingletonScope()});var Z=i(6403);let H=new s.n(t=>{t(Z.pi).to(Z.I2)});var N=i(7141),z=i(2683),V=i(8113),U=i(8103),W=i(1749);let G=(t,e,i,r)=>{let s,n=!1,a=!1;if(e.forEachChildren(t=>!(n=t.numberType===W.IJ)),e.forEachChildren(t=>!(a=!!t.findFace)),n){let t=e.getChildren(),o=[...t];o.sort((t,e)=>{var i,r,s,n;let a=(null!==(r=null!==(i=t.attribute.startAngle)&&void 0!==i?i:0+t.attribute.endAngle)&&void 0!==r?r:0)/2,o=(null!==(n=null!==(s=e.attribute.startAngle)&&void 0!==s?s:0+e.attribute.endAngle)&&void 0!==n?n:0)/2;for(;a<0;)a+=U.f7;for(;o<0;)o+=U.f7;return o-a}),o.forEach(t=>{t._next=null,t._prev=null}),e.removeAllChild(),e.update(),o.forEach(t=>{e.appendChild(t)}),r.hack_pieFace="outside",(s=i(n,a))&&s.graphic||(r.hack_pieFace="inside",s=i(n,a)),s&&s.graphic||(r.hack_pieFace="top",s=i(n,a)),e.removeAllChild(),t.forEach(t=>{t._next=null,t._prev=null}),t.forEach(t=>{e.appendChild(t)})}else if(a){let r=e.getChildren(),o=r.map(e=>({ave_z:e.findFace().vertices.map(i=>{var r;return t.view(i[0],i[1],null!==(r=i[2]+e.attribute.z)&&void 0!==r?r:0)[2]}).reduce((t,e)=>t+e,0),g:e}));o.sort((t,e)=>e.ave_z-t.ave_z),e.removeAllChild(),o.forEach(t=>{t.g._next=null,t.g._prev=null}),e.update(),o.forEach(t=>{e.add(t.g)}),s=i(n,a),e.removeAllChild(),r.forEach(t=>{t._next=null,t._prev=null}),e.update(),r.forEach(t=>{e.add(t)})}else s=i(n,a);return s};var $=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};let X=class{constructor(){this.order=1}afterPickItem(t,e,i,r,s){if(t.graphic){let e=t.graphic;for(;e.parent;)e=e.parent;e.shadowHost&&(t.params={shadowTarget:t.graphic},t.graphic=e.shadowHost)}return t}};X=$([(0,n.b)()],X);let Y=class{constructor(){this.order=1}afterPickItem(t,e,i,r,s){return t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx?this._pickItem(t,e,i,r,s):null}beforePickItem(t,e,i,r,s){return t.attribute.shadowRootIdx<0?this._pickItem(t,e,i,r,s):null}_pickItem(t,e,i,r,s){var n;if(!t.shadowRoot)return null;let{parentMatrix:a}=s||{};if(!a)return null;let o=e.pickContext;o.highPerformanceSave();let l=null===(n=(0,P.gh)(t))||void 0===n?void 0:n[t.type],{shadowPickMode:h=null==l?void 0:l.shadowPickMode}=t.attribute,u=t.shadowRoot,d=V.QE.allocateByObj(a),c=new z.E9(d.a*i.x+d.c*i.y+d.e,d.b*i.x+d.d*i.y+d.f),p=e.pickGroup(u,c,d,r);return o.highPerformanceRestore(),!p.graphic&&p.group&&"full"===h&&(p.graphic=p.group),p}};Y=$([(0,n.b)()],Y);let K=class{constructor(){this.order=1}beforePickItem(t,e,i,r,s){let n=t.baseGraphic;if(n&&n.parent){let t=new z.E9(i.x,i.y),s=e.pickContext;s.highPerformanceSave();let a=n.parent.globalTransMatrix;a.transformPoint(t,t);let o=n.isContainer?e.pickGroup(n,t.clone(),a,r):e.pickItem(n,t.clone(),a,r);return s.highPerformanceRestore(),o}return null}};K=$([(0,n.b)()],K);let q=class{constructor(){this.order=1}beforePickItem(t,e,i,r,s){if(!t.in3dMode||r.in3dInterceptor)return null;let n=e.pickContext,a=t.stage;if(!n||!a)return null;if(r.in3dInterceptor=!0,n.save(),this.initCanvasCtx(n),n.camera=a.camera,t.isContainer){let a=G(n,t,()=>e.pickGroup(t,i,s.parentMatrix,r),r);return n.camera=null,r.in3dInterceptor=!1,n.restore(),a}return n.restore(),null}initCanvasCtx(t){t.setTransformForCurrent()}};q=$([(0,n.b)()],q);let J=new s.n((t,e,i)=>{i(N.hH)||(t(N.BR).toSelf(),t(N.hH).toService(N.BR)),t(q).toSelf().inSingletonScope(),t(N.uH).toService(q),t(Y).toSelf().inSingletonScope(),t(N.uH).toService(Y),t(K).toSelf().inSingletonScope(),t(N.uH).toService(K),(0,l.yb)(t,N.uH),t(X).toSelf().inSingletonScope(),t(N.tn).toService(X),(0,l.yb)(t,N.tn)});var Q=i(5977),tt=i(7578);let te=new s.n(t=>{t(W.fB).to(Q.JG).inSingletonScope(),t(W.tA).toConstantValue(tt.i)});var ti=i(7050),tr=function(t,e){return function(i,r){e(i,r,t)}};let ts=class{constructor(t){this.autoEnablePlugins=t,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(t,e){this.stage=t,this.actived=!0;let{pluginList:i}=e;i&&w.n.isBound(ti.X)&&this.autoEnablePlugins.getContributions().forEach(t=>{i.includes(t.name)&&this.register(t)})}findPluginsByName(t){let e=[];return this.onStartupFinishedPlugin.forEach(i=>{i.name===t&&e.push(i)}),this.onRegisterPlugin.forEach(i=>{i.name===t&&e.push(i)}),e}register(t){"onStartupFinished"===t.activeEvent?this.onStartupFinishedPlugin.push(t):"onRegister"===t.activeEvent&&(this.onRegisterPlugin.push(t),t.activate(this))}unRegister(t){"onStartupFinished"===t.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(t),1):"onRegister"===t.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(t),1),t.deactivate(this)}release(...t){this.onStartupFinishedPlugin.forEach(t=>{t.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(t=>{t.deactivate(this)}),this.onRegisterPlugin=[]}};ts=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tr(0,(0,a.f)(l.Qc)),tr(0,(0,o.t)(ti.X)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],ts);let tn=new s.n(t=>{t(ti.H).to(ts),(0,l.EM)(t,ti.X)}),ta=new s.n(t=>{(0,l.yb)(t,u.D0)}),to=new s.n(t=>{t(_).to(b).inSingletonScope(),(0,l.yb)(t,_)});var tl=i(9355);let th=class{constructor(){this.type="static",this.offscreen=!1,this.global=k.w.global}setDpr(t){this.canvas.dpr=t}init(t,e,i){if(this.layer=t,this.window=e,i.main)this.main=!0,this.context=e.getContext(),this.canvas=this.context.getCanvas();else{let t;this.main=!1,i.canvasId&&(t=this.global.getElementById(i.canvasId)),t||(t=this.global.createCanvas({width:e.width,height:e.height})),t.style&&(t.style["pointer-events"]="none");let r=e.getContext().getCanvas().nativeCanvas,s=(0,tl.JN)({nativeCanvas:t,width:e.width,height:e.height,dpr:e.dpr,id:i.canvasId,canvasControled:!0,container:e.getContainer(),x:r.offsetLeft,y:r.offsetTop});s.applyPosition(),this.canvas=s,this.context=s.getContext()}}resize(t,e){this.canvas.resize(t,e)}resizeView(t,e){}render(t,e,i){var r;if(!this.main){let t=this.window.getContext().getCanvas().nativeCanvas;t&&(this.canvas.x!==t.offsetLeft||this.canvas.y!==t.offsetTop)&&(this.canvas.x=t.offsetLeft,this.canvas.y=t.offsetTop,this.canvas.applyPosition())}e.renderService.render(t,Object.assign(Object.assign({context:this.context,clear:null!==(r=e.background)&&void 0!==r?r:"#ffffff"},e),i))}merge(t){t.forEach(t=>{let e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)})}prepare(t,e){}drawTo(t,e,i){var r;let s=t.getContext();i.renderService.render(e,Object.assign(Object.assign({context:s},i),{clear:i.clear?null!==(r=i.background)&&void 0!==r?r:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};th=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],th);let tu=new s.n(t=>{t(th).toSelf(),t(L.kj).toService(th)});var td=i(6040);let tc=(0,i(592).v)(td.Lc);var tp=i(6562),tg=i(7393),tm=i(7636),tf=i(8654),tv=i(4481),ty=i(7317);let t_=Symbol.for("DrawItemInterceptor"),tb=new tg.FB,tx=new tg.FB;class tS{constructor(){this.order=1}afterDrawItem(t,e,i,r,s){return null==t.attribute.shadowRootIdx&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0||(t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(t,e,i,r,s),!1}beforeDrawItem(t,e,i,r,s){return null==t.attribute.shadowRootIdx&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0||(t.attribute.shadowRootIdx<0||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(t,e,i,r,s),!1}drawItem(t,e,i,r,s){if(!t.shadowRoot)return!1;let{context:n}=i;if(n.highPerformanceSave(),n.transformFromMatrix(t.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds){tb.copy(r.dirtyBounds),tx.copy(r.backupDirtyBounds);let e=t.globalTransMatrix.getInverse();r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(e),r.backupDirtyBounds.copy(r.dirtyBounds)}return r.renderGroup(t.shadowRoot,i,V.QE.allocate(1,0,0,1,0,0)),n.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&(r.dirtyBounds.copy(tb),r.backupDirtyBounds.copy(tx)),!0}}class tA{constructor(){this.order=1}afterDrawItem(t,e,i,r,s){return t.attribute._debug_bounds&&this.drawItem(t,e,i,r,s),!1}drawItem(t,e,i,r,s){if(!t.attribute._debug_bounds)return!1;let{context:n}=i;n.highPerformanceSave(),t.parent&&n.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&n.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);let a=t.AABBBounds;return!0!==t.attribute._debug_bounds&&t.attribute._debug_bounds(n,t),n.strokeRect(a.x1,a.y1,a.width(),a.height()),n.highPerformanceRestore(),!0}}let tk=class{constructor(){this.order=1,this.interceptors=[new tS,new tC,new tw,new tA]}afterDrawItem(t,e,i,r,s){for(let n=0;n<this.interceptors.length;n++)if(this.interceptors[n].afterDrawItem&&this.interceptors[n].afterDrawItem(t,e,i,r,s))return!0;return!1}beforeDrawItem(t,e,i,r,s){if((!t.in3dMode||i.in3dInterceptor)&&!t.shadowRoot&&!(t.baseGraphic||t.attribute.globalZIndex||t.interactiveGraphic))return!1;for(let n=0;n<this.interceptors.length;n++)if(this.interceptors[n].beforeDrawItem&&this.interceptors[n].beforeDrawItem(t,e,i,r,s))return!0;return!1}};tk=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],tk);class tw{constructor(){this.order=1}beforeDrawItem(t,e,i,r,s){return!this.processing&&(t.baseGraphic?this.beforeDrawInteractive(t,e,i,r,s):this.beforeSetInteractive(t,e,i,r,s))}beforeSetInteractive(t,e,i,r,s){let n=t.interactiveGraphic;if(t.attribute.globalZIndex){n||(n=t.clone(),t.interactiveGraphic=n,n.baseGraphic=t),n.setAttributes({globalZIndex:0,zIndex:t.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();let e=i.stage.getLayer("_builtin_interactive");return e&&this.getShadowRoot(e).add(n),!0}if(n){i.stage.tryInitInteractiveLayer();let e=i.stage.getLayer("_builtin_interactive");e&&this.getShadowRoot(e).removeChild(n),t.interactiveGraphic=null,n.baseGraphic=null}return!1}beforeDrawInteractive(t,e,i,r,s){let n=t.baseGraphic,a=!!n.stage,o=n.parent;for(;a&&o&&o.stage!==o;)a=!!o.stage,o=o.parent;if(!a){let e=i.stage.getLayer("_builtin_interactive");return e&&this.getShadowRoot(e).removeChild(t),!0}if(n){this.processing=!0;let{context:t}=i;return t.highPerformanceSave(),t.setTransformFromMatrix(n.parent.globalTransMatrix,!0),n.isContainer?r.renderGroup(n,i,n.parent.globalTransMatrix):r.renderItem(n,i),t.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(t){var e;let i=t.getElementById("_interactive_group");return i||((i=tt.i.CreateGraphic("group",{})).id="_interactive_group",t.add(i)),null!==(e=i.shadowRoot)&&void 0!==e?e:i.attachShadow()}}class tC{constructor(){this.order=1}beforeDrawItem(t,e,i,r,s){if(!t.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;let{context:n,stage:a}=e.drawParams;n.canvas,n.save(),this.initCanvasCtx(n),n.camera=a.camera;let o=n.currentMatrix;o.a/=n.dpr,o.b/=n.dpr,o.c/=n.dpr,o.d/=n.dpr,o.e/=n.dpr,o.f/=n.dpr;let l=V.yp.allocate();(0,ty.B$)(l,o);let h=n.modelMatrix;if(h){if(l){let t=V.yp.allocate();n.modelMatrix=(0,ty.G9)(t,h,l)}}else n.modelMatrix=l;return n.setTransform(1,0,0,1,0,0,!0),t.isContainer?G(n,t,(e,s)=>r.renderGroup(t,i,t.parent.globalTransMatrix,!e&&s),i):r.renderItem(t,i),n.camera=null,n.restore(),n.modelMatrix!==h&&V.yp.free(n.modelMatrix),n.modelMatrix=h,i.in3dInterceptor=!1,!0}initCanvasCtx(t){t.setTransformForCurrent()}}var tT=i(3116),tE=i(6910),tM=function(t,e){return function(i,r){e(i,r,t)}};let tB=class{constructor(t,e){this.contributions=t,this.drawItemInterceptorContributions=e,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new tg.YZ,this.backupDirtyBounds=new tg.YZ,this.global=k.w.global,this.layerService=k.w.layerService,(0,tm.Z)(this.contributions)||(this.contributions=[this.contributions]),this.init()}init(){this.contributions.forEach(t=>{if(t.style){let e=this.styleRenderMap.get(t.style)||new Map;e.set(t.numberType,t),this.styleRenderMap.set(t.style,e)}else this.defaultRenderMap.set(t.numberType,t)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order)}prepareForDraw(t,e){e.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!e.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(t,e){this.prepareForDraw(t,e),e.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(e.renderStyle)||this.defaultRenderMap,this.currentRenderService=t;let{context:i,stage:r,viewBox:s,transMatrix:n}=e;if(!i)return;let a=this.dirtyBounds.setValue(0,0,s.width(),s.height());if(r.dirtyBounds&&!r.dirtyBounds.empty()){let t=(0,tf.di)(a,r.dirtyBounds,!1);a.x1=Math.floor(t.x1),a.y1=Math.floor(t.y1),a.x2=Math.ceil(t.x2),a.y2=Math.ceil(t.y2)}let o=i.dpr%1;(o||.5!==o)&&(a.x1=Math.floor(a.x1*i.dpr)/i.dpr,a.y1=Math.floor(a.y1*i.dpr)/i.dpr,a.x2=Math.ceil(a.x2*i.dpr)/i.dpr,a.y2=Math.ceil(a.y2*i.dpr)/i.dpr),this.backupDirtyBounds.copy(a),i.inuse=!0,i.setClearMatrix(n.a,n.b,n.c,n.d,n.e,n.f),i.clearMatrix(),i.setTransformForCurrent(!0),i.translate(s.x1,s.y1,!0),i.beginPath(),i.rect(a.x1,a.y1,a.width(),a.height()),i.clip(),r.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(t,i,e),i.save(),t.renderTreeRoots.sort((t,e)=>{var i,r;return(null!==(i=t.attribute.zIndex)&&void 0!==i?i:m.xF.zIndex)-(null!==(r=e.attribute.zIndex)&&void 0!==r?r:m.xF.zIndex)}).forEach(t=>{t.isContainer?this.renderGroup(t,e,V.QE.allocate(1,0,0,1,0,0)):this.renderItem(t,e)}),i.restore(),i.setClearMatrix(1,0,0,1,0,0),i.inuse=!1,i.draw()}doRegister(){throw Error("暂不支持")}_findNextGraphic(t){let e=t.parent,i=t._uid;for(;e;){let t=(0,tp.qA)(e,i,m.xF.zIndex);if(t)return t;i=e._uid,e=e.parent}return null}renderGroup(t,e,i,r){if(e.break||!1===t.attribute.visibleAll)return;if(t.incremental&&(null==e.startAtId||e.startAtId===t._uid))return e.break=!0,void this._increaseRender(t,e);if(this.useDirtyBounds&&!(0,tf.SX)(t.AABBBounds,this.dirtyBounds,!1)&&"empty"!==t.attribute.boundsMode)return;let s,n=i;if(this.useDirtyBounds){s=tE.et.allocateByObj(this.dirtyBounds);let e=t.transMatrix;n=V.QE.allocateByObj(i).multiply(e.a,e.b,e.c,e.d,e.e,e.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(n.getInverse())}this.renderItem(t,e,{drawingCb:()=>{var i;r?t.forEachChildren(t=>{e.break||(t.isContainer?this.renderGroup(t,e,n):this.renderItem(t,e))}):(0,tp.kD)(t,m.xF.zIndex,t=>{e.break||(t.isContainer?this.renderGroup(t,e,n):this.renderItem(t,e))},!1,!!(null===(i=e.context)||void 0===i?void 0:i.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(s),tE.et.free(s),V.QE.free(n))}_increaseRender(t,e){let{layer:i,stage:r}=e,{subLayers:s}=i,n=s.get(t._uid);n||(n={layer:this.layerService.createLayer(r),zIndex:s.size,group:t},s.set(t._uid,n));let a=n.layer.getNativeHandler().getContext(),o=n.drawContribution||w.n.get(tv.Pf);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:n.layer,context:a,startAtId:t._uid,break:!1})),n.drawContribution=o;let l=this._findNextGraphic(t);if(l){if(l.isContainer&&l.incremental)this._increaseRender(l,e);else{let t=s.get(l._uid);t||(t={layer:this.layerService.createLayer(r),zIndex:s.size},s.set(l._uid,t));let i=t.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:t.layer,context:i,startAtId:l._uid,break:!1}))}}}getRenderContribution(t){let e;return e||(e=this.selectRenderByNumberType(t.numberType,t)),e||(e=this.selectRenderByType(t.type)),e}renderItem(t,e,i){if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let s=this.InterceptorContributions[r];if(s.beforeDrawItem&&s.beforeDrawItem(t,this.currentRenderService,e,this,i))return}let r=this.getRenderContribution(t);if(!r)return;let s,n=this.scrollMatrix&&(0!==this.scrollMatrix.e||0!==this.scrollMatrix.f);if(t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;(e||i)&&(n=!0,this.scrollMatrix||(this.scrollMatrix=V.QE.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-e,-i))}if(n&&(s=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),this.useDirtyBounds&&!t.isContainer&&"empty"!==t.attribute.boundsMode&&!(0,tf.SX)(t.AABBBounds,null!=s?s:this.dirtyBounds,!1)){if(n&&t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(e,i)}return}let a=null!=e.startAtId&&t._uid!==e.startAtId;if(t._uid===e.startAtId&&(e.startAtId=null),i&&(i.skipDraw=a),a?t.isContainer&&r.draw(t,this.currentRenderService,e,i):r.draw(t,this.currentRenderService,e,i),n&&t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(e,i)}if(this.InterceptorContributions.length)for(let i=0;i<this.InterceptorContributions.length;i++){let r=this.InterceptorContributions[i];if(r.afterDrawItem&&r.afterDrawItem(t,this.currentRenderService,e,this))return}}selectRenderByType(t){return v.Y.getInstance().warn("未知错误，不应该走到这里"),null}selectRenderByNumberType(t,e){let i;if(e.attribute.renderStyle){let r=this.styleRenderMap.get(e.attribute.renderStyle);i=r&&r.get(t)}return i||this.currentRenderMap.get(t)||this.defaultRenderMap.get(t)}clearScreen(t,e,i){var r,s;let{clear:n,viewBox:a}=i,o=a.width(),l=a.height();if(n){e.clearRect(0,0,o,l);let i=null===(r=t.drawParams)||void 0===r?void 0:r.stage;if(i&&(e.globalAlpha=null!==(s=i.attribute.opacity)&&void 0!==s?s:1),i&&i.backgroundImg&&i.resources){let t=i.resources.get(n);t&&"success"===t.state&&t.data&&e.drawImage(t.data,0,0,o,l)}else e.fillStyle=(0,tT.L)(e,n,{AABBBounds:{x1:0,y1:0,x2:0+o,y2:0+l}},0,0),e.fillRect(0,0,o,l)}}afterDraw(t,e){}};tB=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tM(0,tc(tv.uz)),tM(1,(0,a.f)(l.Qc)),tM(1,(0,o.t)(t_)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Array,Object])],tB);var tD=i(6490),tO=i(6003),tP=i(3482),tI=i(3872),tR=i(623);class tL extends tR.M2{constructor(){super(...arguments),this.time=tI.Oh.beforeFillStroke}drawShape(t,e,i,r,s,n,a,o,l,h,u,d){let{background:c,backgroundMode:p=l.backgroundMode,backgroundFit:g=l.backgroundFit,backgroundKeepAspectRatio:m=l.backgroundKeepAspectRatio,backgroundScale:f=l.backgroundScale,backgroundOffsetX:v=l.backgroundOffsetX,backgroundOffsetY:y=l.backgroundOffsetY}=t.attribute;if(c){if(t.backgroundImg&&t.resources){let i=t.resources.get(c);if("success"!==i.state||!i.data)return;e.highPerformanceSave(),e.setTransformFromMatrix(t.parent.globalTransMatrix,!0);let r=t.AABBBounds;this.doDrawImage(e,i.data,r,{backgroundMode:p,backgroundFit:g,backgroundKeepAspectRatio:m,backgroundScale:f,backgroundOffsetX:v,backgroundOffsetY:y}),e.highPerformanceRestore(),e.setTransformForCurrent()}else e.highPerformanceSave(),e.fillStyle=c,e.fill(),e.highPerformanceRestore()}}}let tF=new tL;var tj=function(t,e){return function(i,r){e(i,r,t)}};let tZ=class{constructor(t){this.groupRenderContribitions=t,this.numberType=W.I_}drawShape(t,e,i,r,s,n,a,o){let l=(0,P.gh)(t,null==n?void 0:n.theme).group,{fill:h=l.fill,background:u,stroke:d=l.stroke,opacity:c=l.opacity,width:p=l.width,height:g=l.height,clip:m=l.clip,fillOpacity:f=l.fillOpacity,strokeOpacity:v=l.strokeOpacity,cornerRadius:y=l.cornerRadius,path:_=l.path,lineWidth:b=l.lineWidth,visible:x=l.visible,fillStrokeOrder:S=l.fillStrokeOrder,cornerType:A=l.cornerType,x:k=l.x,y:w=l.y}=t.attribute,C=(0,tO.GT)(c,f,p,g,h),T=(0,tO.Ze)(c,v,p,g),E=(0,tO.dz)(h,u),M=(0,tO.ak)(d,b);if(!t.valid||!x||!m&&(!E&&!M||!(C||T||a||o||u)))return;if(_&&_.length&&s.drawContribution){let t=e.disableFill,i=e.disableStroke,r=e.disableBeginPath;e.disableFill=!0,e.disableStroke=!0,e.disableBeginPath=!0,_.forEach(t=>{s.drawContribution.getRenderContribution(t).draw(t,s.renderService,s,n)}),e.disableFill=t,e.disableStroke=i,e.disableBeginPath=r}else 0===y||(0,tm.Z)(y)&&y.every(t=>0===t)?(e.beginPath(),e.rect(i,r,p,g)):(e.beginPath(),(0,tD.U)(e,i,r,p,g,y,"bevel"!==A));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(tF));let B={doFill:E,doStroke:M};e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this._groupRenderContribitions.forEach(n=>{n.time===tI.Oh.beforeFillStroke&&n.drawShape(t,e,i,r,E,M,C,T,l,s,a,o,B)}),m&&e.clip();let D=()=>{B.doFill&&(a?a(e,t.attribute,l):C&&(e.setCommonStyle(t,t.attribute,k-i,w-r,l),e.fill()))},O=()=>{B.doStroke&&(o?o(e,t.attribute,l):T&&(e.setStrokeStyle(t,t.attribute,k-i,w-r,l),e.stroke()))};S?(O(),D()):(D(),O()),this._groupRenderContribitions.forEach(n=>{n.time===tI.Oh.afterFillStroke&&n.drawShape(t,e,i,r,E,M,C,T,l,s,a,o)})}draw(t,e,i,r){let s;let{context:n}=i;if(!n)return;let{clip:a,baseOpacity:o=1,drawMode:l,x:h,y:u,width:d,height:c}=t.attribute,p=n.nativeContext,g=n.canvas.nativeCanvas;if(l>0){let t=n.canvas,e=tJ.createCanvas({width:t.width,height:t.height,dpr:1}),i=e.getContext("2d"),r=n.nativeContext.getTransform();i.setTransform(r.a,r.b,r.c,r.d,r.e,r.f),1===l&&(i.save(),i.clearRect(0,0,t.width,t.height),i.beginPath(),i.rect(h,u,d,c),i.clip(),i.drawImage(t.nativeCanvas,0,0,t.width,t.height,0,0,t.displayWidth,t.displayHeight),i.restore()),n.nativeContext=i,t.nativeCanvas=e}a?n.save():n.highPerformanceSave();let m=n.baseGlobalAlpha;n.baseGlobalAlpha*=o;let f=(0,P.gh)(t,null==r?void 0:r.theme).group,v=n.modelMatrix;if(n.camera){let e=V.yp.allocate(),i=V.yp.allocate();(0,Q.RT)(i,t,f),(0,ty.G9)(e,v||e,i),n.modelMatrix=e,V.yp.free(i),n.setTransform(1,0,0,1,0,0,!0)}else n.transformFromMatrix(t.transMatrix,!0);n.beginPath(),r.skipDraw?this.drawShape(t,n,0,0,i,r,()=>!1,()=>!1):this.drawShape(t,n,0,0,i);let{scrollX:y=f.scrollX,scrollY:_=f.scrollY}=t.attribute;if((y||_)&&n.translate(y,_),r&&r.drawingCb&&(s=r.drawingCb()),n.modelMatrix!==v&&V.yp.free(n.modelMatrix),n.modelMatrix=v,n.baseGlobalAlpha=m,l>0){let t=n.nativeContext,e=n.canvas.nativeCanvas;p.save(),p.setTransform(n.dpr,0,0,n.dpr,0,0,!0),1===l&&t.rect(h,u,d,c),p.drawImage(e,0,0,e.width,e.height,0,0,n.canvas.displayWidth,n.canvas.displayHeight);let i=t.getTransform();p.setTransform(i.a,i.b,i.c,i.d,i.e,i.f),n.nativeContext=p,n.canvas.nativeCanvas=g,p.restore()}s&&s.then?s.then(()=>{a?n.restore():n.highPerformanceRestore()}):a?n.restore():n.highPerformanceRestore()}};tZ=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tj(0,(0,a.f)(l.Qc)),tj(0,(0,o.t)(tP.jd)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tZ);var tH,tN,tz,tV,tU=i(7999),tW=i(6401),tG=function(t,e){return function(i,r){e(i,r,t)}},t$=function(t,e,i,r){return new(i||(i=Promise))(function(s,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function o(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?s(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,o)}l((r=r.apply(t,e||[])).next())})};(r=tV||(tV={}))[r.NORMAL=0]="NORMAL",r[r.STOP=1]="STOP";let tX=class extends tB{constructor(t,e,i,r){super(t,r),this.contributions=t,this.lineRender=e,this.areaRender=i,this.drawItemInterceptorContributions=r,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=tV.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new h.n([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(t,e){return t$(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=t,this.lastDrawContext=e,this.checkingForDrawPromise=this.checkForDraw(e);let i=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,i)return;this.currentRenderService=t;let{context:r,viewBox:s}=e;r&&(r.inuse=!0,r.clearMatrix(),r.setTransformForCurrent(!0),r.save(),e.restartIncremental&&this.clearScreen(this.currentRenderService,r,e),r.translate(s.x1,s.y1,!0),r.save(),t.renderTreeRoots.sort((t,e)=>{var i,r;return(null!==(i=t.attribute.zIndex)&&void 0!==i?i:m.xF.zIndex)-(null!==(r=e.attribute.zIndex)&&void 0!==r?r:m.xF.zIndex)}).forEach(t=>{this.renderGroup(t,e)}),this.hooks.completeDraw.tap("top-draw",()=>{r.restore(),r.restore(),r.draw(),r.inuse=!1,this.rendering=!1}))})}_increaseRender(t,e){return t$(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(t,e)})}_renderIncrementalGroup(t,e){return t$(this,void 0,void 0,function*(){this.count=t.count,yield new Promise(i=>{this.renderItem(t,e,{drawingCb:()=>t$(this,void 0,void 0,function*(){if(2!==t.count)yield(0,tp.Ud)(t,m.xF.zIndex,(i,r)=>{if(this.status===tV.STOP)return!0;if(i.isContainer||r<this.currentIdx)return!1;let s=this.currFrameStartAt+t.incremental;return r<s&&(this.currentIdx=r+1,this.renderItem(i,e)),r===s-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),i(!1);else{let r=t.getChildAt(0);if(r.incremental&&r.attribute.segments)for(r.incrementalAt||(r.incrementalAt=0);r.incrementalAt<r.attribute.segments.length;)e.multiGraphicOptions={startAtIdx:r.incrementalAt,length:r.incremental},this.renderItem(r,e),r.incrementalAt+=r.incremental,yield this.waitToNextFrame();else this.renderItem(r,e);i(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return t$(this,void 0,void 0,function*(){return new Promise(t=>{this.global.getRequestAnimationFrame()(()=>{t(!1)})})})}checkForDraw(t){return t$(this,void 0,void 0,function*(){let e=this.rendering;return t.restartIncremental&&(e=!1,yield this.forceStop(),this.resetToInit()),e})}forceStop(){return t$(this,void 0,void 0,function*(){this.rendering&&(this.status=tV.STOP,yield new Promise(t=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=tV.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(t=>"stopCb"!==t.name),t(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(t,e){return t$(this,void 0,void 0,function*(){if(!e.break&&!1!==t.attribute.visibleAll)return t.incremental&&e.startAtId===t._uid?(yield this._increaseRender(t,e),void(e.break=!0)):void(yield new Promise(i=>{this.renderItem(t,e,{drawingCb:()=>t$(this,void 0,void 0,function*(){yield(0,tp.Ud)(t,m.xF.zIndex,t=>t$(this,void 0,void 0,function*(){e.break||t.isContainer&&(yield this.renderGroup(t,e))})),i(!1)})})}))})}};tX=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tG(0,tc(tv.uz)),tG(1,(0,a.f)(tU.U)),tG(2,(0,a.f)(tW.K)),tG(3,(0,a.f)(l.Qc)),tG(3,(0,o.t)(t_)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Array,Object,Object,Object])],tX);var tY=i(6936);let tK=new s.n(t=>{t(tR.M2).toSelf().inSingletonScope(),t(tY.$).toSelf().inSingletonScope(),t(tv.Iv).to(tB),t(tv.Pf).to(tX),t(tv.Cb).to(tZ).inSingletonScope(),t(tv.uz).toService(tv.Cb),(0,l.yb)(t,tP.jd),t(tR.Sg).toSelf().inSingletonScope(),(0,l.yb)(t,tP.tg),(0,l.yb)(t,tv.uz),t(tk).toSelf().inSingletonScope(),t(t_).toService(tk),(0,l.yb)(t,t_)});function tq(){var t;tq.__loaded||(tq.__loaded=!0,w.n.load(j),w.n.load(te),w.n.load(H),w.n.load(J),w.n.load(tn),(t=w.n).load(ta),t.load(to),t.load(tu),function(t){t.load(tK)}(w.n))}tq.__loaded=!1,tq();let tJ=w.n.get(u.y2);k.w.global=tJ;let tQ=w.n.get(L.no);k.w.graphicUtil=tQ;let t0=w.n.get(L.Gp);k.w.transformUtil=t0;let t1=w.n.get(W.fB);k.w.graphicService=t1;let t2=w.n.get(L.IT);k.w.layerService=t2},7141:function(t,e,i){"use strict";i.d(e,{BR:()=>s,hH:()=>r,tn:()=>a,uH:()=>n}),Symbol.for("GraphicPicker");let r=Symbol.for("PickerService");Symbol.for("BoundsPicker");let s=Symbol.for("GlobalPickerService"),n=Symbol.for("PickItemInterceptor"),a=Symbol.for("PickServiceInterceptor")},4159:function(t,e,i){"use strict";i.d(e,{B:()=>v});var r=i(86),s=i(534),n=i(8535),a=i(9607),o=i(5575),l=i(6082),h=i(8727),u=i(9038),d=i(4154),c=i(9904),p=i(1725);class g{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=r.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0,this.onWheel=t=>{try{let e=new t.constructor(t.type,t);this.pluginService.stage.window.getContext().getCanvas().nativeCanvas.dispatchEvent(e)}catch(t){return}}}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&this.drawHTML([...t.stage.getChildren()])})}deactivate(t){t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(t=>t.name!==this.key),s.w.graphicService.hooks.onRemove.unTap(this.key),s.w.graphicService.hooks.onRelease.unTap(this.key),this.release()}getWrapContainer(t,e,i){let r;return r=e?"string"==typeof e?s.w.global.getElementById(e):e:t.window.getContainer(),{wrapContainer:s.w.global.createDom(Object.assign({tagName:"div",parent:r},i)),nativeContainer:r}}parseDefaultStyleFromGraphic(t){let e="text"===t.type&&t.attribute?t.attribute:(0,n.gh)(t).text;return(0,o.WD)(e)}getTransformOfText(t){let e=(0,n.gh)(t).text,{textAlign:i=e.textAlign,textBaseline:r=e.textBaseline}=t.attribute,{rotateDeg:s,scaleX:a,scaleY:o}=t.globalTransMatrix.toTransformAttrs(),l={left:"0",start:"0",end:"-100%",center:"-50%",right:"-100%",top:"0",middle:"-50%",bottom:"-100%",alphabetic:"-79%"},h={left:"0",start:"0",end:"100%",center:"50%",right:"100%",top:"0",middle:"50%",bottom:"100%",alphabetic:"79%"};return{textAlign:i,transform:`translate(${l[i]},${l[r]}) rotate(${s}deg) scaleX(${a}) scaleY(${o})`,transformOrigin:`${h[i]} ${h[r]}`}}updateStyleOfWrapContainer(t,e,i,r,n){let{pointerEvents:a,penetrateEventList:o=[]}=n,g=this.parseDefaultStyleFromGraphic(t);g.display=!1!==t.attribute.visible?"block":"none",g.pointerEvents=!0===a?"all":a||"none","none"!==g.pointerEvents&&(this.removeWrapContainerEventListener(i),o.forEach(t=>{"wheel"===t&&i.addEventListener("wheel",this.onWheel)})),i.style.position||(i.style.position="absolute",r.style.position="relative");let m=0,f=0,v=t.globalAABBBounds,y=n.anchorType;if((0,l.Z)(y)&&(y="text"===t.type?"position":"boundsLeftTop"),"boundsLeftTop"===y&&(y="top-left"),"position"===y||v.empty()){let e=t.globalTransMatrix;m=e.e,f=e.f}else{let t=(0,h.v)(v,y);m=t.x,f=t.y}let _=s.w.global.getElementTopLeft(r,!1),b=e.window.getTopLeft(!1),x=e.viewBox,S=m+b.left-_.left+x.x1,A=f+b.top-_.top+x.y1;if(g.left=`${S}px`,g.top=`${A}px`,"text"===t.type&&"position"===y&&(g=Object.assign(Object.assign({},g),this.getTransformOfText(t))),(0,u.Z)(n.style)){let e=n.style({top:A,left:S,width:v.width(),height:v.height()},t,i);e&&(g=Object.assign(Object.assign({},g),e))}else(0,d.Z)(n.style)?g=Object.assign(Object.assign({},g),n.style):(0,c.Z)(n.style)&&n.style&&(g=Object.assign(Object.assign({},g),(0,p.wv)(n.style)));s.w.global.updateDom(i,{width:n.width,height:n.height,style:g})}clearCacheContainer(){this.htmlMap&&Object.keys(this.htmlMap).forEach(t=>{this.htmlMap[t]&&this.htmlMap[t].renderId!==this.renderId&&this.removeElement(t)}),this.renderId+=1}drawHTML(t){"browser"===s.w.global.env&&(t.sort((t,e)=>{var i,r;return(null!==(i=t.attribute.zIndex)&&void 0!==i?i:a.xF.zIndex)-(null!==(r=e.attribute.zIndex)&&void 0!==r?r:a.xF.zIndex)}).forEach(t=>{this.renderGroupHTML(t)}),this.clearCacheContainer())}renderGroupHTML(t){this.renderGraphicHTML(t),t.forEachChildren(t=>{t.isContainer?this.renderGroupHTML(t):this.renderGraphicHTML(t)})}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;let{wrapContainer:e}=this.htmlMap[t];e&&s.w.global.removeDom(e),this.htmlMap[t]=null}removeWrapContainerEventListener(t){t.removeEventListener("wheel",this.onWheel)}renderGraphicHTML(t){var e;let{html:i}=t.attribute;if(!i)return;let r=t.stage;if(!r)return;let{dom:s,container:n}=i;if(!s)return;let a=(0,l.Z)(i.id)?`${null!==(e=t.id)&&void 0!==e?e:t._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[a]&&n&&n!==this.htmlMap[a].container&&this.removeElement(a),this.htmlMap&&this.htmlMap[a])"string"==typeof s?this.htmlMap[a].wrapContainer.innerHTML=s:s!==this.htmlMap[a].wrapContainer.firstChild&&(this.htmlMap[a].wrapContainer.removeChild(this.htmlMap[a].wrapContainer.firstChild),this.htmlMap[a].wrapContainer.appendChild(s));else{let{wrapContainer:t,nativeContainer:e}=this.getWrapContainer(r,n);t&&("string"==typeof s?t.innerHTML=s:t.appendChild(s),this.htmlMap||(this.htmlMap={}),this.htmlMap[a]={wrapContainer:t,nativeContainer:e,container:n,renderId:this.renderId})}if(!this.htmlMap||!this.htmlMap[a])return;let{wrapContainer:o,nativeContainer:h}=this.htmlMap[a];this.updateStyleOfWrapContainer(t,r,o,h,i),this.htmlMap[a].renderId=this.renderId}release(){"browser"===s.w.global.env&&this.removeAllDom(this.pluginService.stage.defaultLayer)}removeAllDom(t){this.htmlMap&&(Object.keys(this.htmlMap).forEach(t=>{this.removeElement(t)}),this.htmlMap=null)}}var m=i(6420);class f extends g{constructor(){super(...arguments),this.name="ReactAttributePlugin",this.activeEvent="onRegister",this._uid=r.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={}}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;let{root:e,wrapContainer:i,unmount:r}=this.htmlMap[t];e?s.w.global.getRequestAnimationFrame()(()=>{e.unmount()}):r&&r(),i&&s.w.global.removeDom(i),this.htmlMap[t]=null}renderGraphicHTML(t){var e;let{react:i}=t.attribute;if(!i)return;let r=t.stage;if(!r)return;let s=r.params.ReactDOM,{element:n,container:a}=i;if(!n||!s||!s.createRoot&&!s.render)return;let o=(0,l.Z)(i.id)?`${null!==(e=t.id)&&void 0!==e?e:t._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[o]&&a&&a!==this.htmlMap[o].container&&this.removeElement(o),this.htmlMap&&this.htmlMap[o])s.createRoot?this.htmlMap[o].root.render(n):s.render(n,this.htmlMap[o].wrapContainer);else{let{wrapContainer:t,nativeContainer:e}=this.getWrapContainer(r,a);if(t){if(this.htmlMap||(this.htmlMap={}),s.createRoot){let i=s.createRoot(t);i.render(n),this.htmlMap[o]={root:i,wrapContainer:t,nativeContainer:e,container:a,renderId:this.renderId}}else s.render(n,t),this.htmlMap[o]={wrapContainer:t,nativeContainer:e,container:a,renderId:this.renderId,unmount:()=>{s.unmountComponentAtNode(t)}}}}if(!this.htmlMap||!this.htmlMap[o])return;let{wrapContainer:h,nativeContainer:u}=this.htmlMap[o];this.updateStyleOfWrapContainer(t,r,h,u,i),this.htmlMap[o].renderId=this.renderId}}let v=()=>{m.F.registerPlugin("ReactAttributePlugin",f)}},7050:function(t,e,i){"use strict";i.d(e,{H:()=>s,X:()=>r});let r=Symbol.for("AutoEnablePlugins"),s=Symbol.for("PluginService")},98:function(t,e,i){"use strict";i.d(e,{j:()=>T});var r=i(7636),s=i(8103),n=i(7428),a=i(1600),o=i(7089),l=i(8906),h=i(613),u=i(8535),d=i(3482),c=i(3872),p=i(7574),g=i(1123),m=i(1481);function f(t,e,i,r){let{offsetX:s=0,offsetY:n=0,offsetZ:a=0}=r||{},o=!0;e.forEach(e=>{e.defined?(o&&t.moveTo(e.p0.x+s,e.p0.y+n,a),(0,m.w)(t,e,1,r),o=!1):o=!0}),o=!0;for(let e=i.length-1;e>=0;e--){let l=i[e];l.defined?(o&&t.lineTo(l.p0.x+s,l.p0.y+n,a),(0,m.w)(t,l,1,r),o=!1):o=!0}t.closePath()}var v=i(1749),y=i(231),_=i(9292),b=i(623),x=i(6936),S=i(3386);class A extends x.${constructor(){super(...arguments),this.time=c.Oh.afterFillStroke}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){var p,g,m,f;this.textureMap||this.initTextureMap(e,t.stage);let{attribute:v=t.attribute}=c||{},{texture:y=null!==(p=t.attribute.texture)&&void 0!==p?p:(0,S.hT)(l,"texture"),textureColor:_=null!==(g=t.attribute.textureColor)&&void 0!==g?g:(0,S.hT)(l,"textureColor"),textureSize:b=null!==(m=t.attribute.textureSize)&&void 0!==m?m:(0,S.hT)(l,"textureSize"),texturePadding:x=null!==(f=t.attribute.texturePadding)&&void 0!==f?f:(0,S.hT)(l,"texturePadding")}=v;y&&this.drawTexture(y,t,e,i,r,l,_,b,x)}}let k=new A,w=b.R6;var C=function(t,e){return function(i,r){e(i,r,t)}};let T=class extends _.Y{constructor(t){super(),this.areaRenderContribitions=t,this.numberType=v.Ri,this.builtinContributions=[k,w],this.init(t)}drawLinearAreaHighPerformance(t,e,i,s,n,a,o,l,h,u,d,c,p){var g,m,f;let{points:v}=t.attribute;if(v.length<2)return;e.beginPath();let y=null!==(g=this.z)&&void 0!==g?g:0,_=v[0];e.moveTo(_.x+o,_.y+l,y);for(let t=1;t<v.length;t++){let i=v[t];e.lineTo(i.x+o,i.y+l,y)}for(let t=v.length-1;t>=0;t--){let i=v[t];e.lineTo((null!==(m=i.x1)&&void 0!==m?m:i.x)+o,(null!==(f=i.y1)&&void 0!==f?f:i.y)+l,y)}e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,o,l,!!n,!1,i,!1,h,u,c,null,{attribute:t.attribute});let{x:b=0,x:x=0}=t.attribute;!1!==i&&(c?c(e,t.attribute,h):n&&(e.setCommonStyle(t,t.attribute,b-o,x-l,h),e.fill())),this.afterRenderStep(t,e,o,l,!!n,!1,i,!1,h,u,c,null,{attribute:t.attribute}),(()=>{var i,n;if(s){let{stroke:s=h&&h.stroke}=t.attribute;if((0,r.Z)(s)&&(s[0]||s[2])&&!1===s[1]){if(e.beginPath(),s[0]){e.moveTo(_.x+o,_.y+l,y);for(let t=1;t<v.length;t++){let i=v[t];e.lineTo(i.x+o,i.y+l,y)}}else if(s[2]){let t=v[v.length-1];e.moveTo(t.x+o,t.y+l,y);for(let t=v.length-2;t>=0;t--){let r=v[t];e.lineTo((null!==(i=r.x1)&&void 0!==i?i:r.x)+o,(null!==(n=r.y1)&&void 0!==n?n:r.y)+l,y)}}}p?p(e,t.attribute,h):(e.setStrokeStyle(t,t.attribute,b-o,x-l,h),e.stroke())}})()}drawShape(t,e,i,r,n,a,o,l){var d,c,p,g,m,f;let v=(0,u.gh)(t,null==a?void 0:a.theme).area,{fill:y=v.fill,stroke:_=v.stroke,fillOpacity:b=v.fillOpacity,z:x=v.z,strokeOpacity:S=v.strokeOpacity,curveTension:A=v.curveTension,connectedType:k=v.connectedType}=t.attribute,w=this.valid(t,v,o,l);if(!w)return;let{doFill:C}=w,T=w.doStroke&&w.sVisible,{clipRange:E=v.clipRange,closePath:M,points:B,segments:D}=t.attribute,{curveType:O=v.curveType}=t.attribute;function P(t,e){return"connect"!==e?t:t.filter(t=>!1!==t.defined)}if(M&&"linear"===O&&(O="linearClosed"),1===E&&!D&&!B.some(t=>!1===t.defined)&&"linear"===O)return this.drawLinearAreaHighPerformance(t,e,!!y,T,b,S,i,r,v,n,a,o,l);if(t.shouldUpdateShape()){if(D&&D.length){let e,i,r;let s=D.map((t,r)=>{if(t.points.length<=1&&0===r)return t.points[0]&&(i={endX:t.points[0].x,endY:t.points[0].y}),null;1===r?e={x:i.endX,y:i.endY}:r>1&&(e.x=i.endX,e.y=i.endY);let s=(0,h.X0)(P(t.points,k),O,{startPoint:e,curveTension:A});return i=s,s}).filter(t=>!!t),n=[];for(let t=D.length-1;t>=0;t--){let e=D[t].points,i=[];for(let t=e.length-1;t>=0;t--)i.push({x:null!==(d=e[t].x1)&&void 0!==d?d:e[t].x,y:null!==(c=e[t].y1)&&void 0!==c?c:e[t].y});if(0!==t){let e=D[t-1].points,r=e[e.length-1];r&&i.push({x:null!==(p=r.x1)&&void 0!==p?p:r.x,y:null!==(g=r.y1)&&void 0!==g?g:r.y})}i.length>1&&(r=(0,h.X0)(P(i,k),"stepBefore"===O?"stepAfter":"stepAfter"===O?"stepBefore":O,{curveTension:A}),n.unshift(r))}t.cacheArea=n.map((t,e)=>({top:s[e],bottom:t}))}else{if(!B||!B.length)return t.cacheArea=null,void t.clearUpdateShapeTag();{let e=P(B,k),i=[];for(let t=e.length-1;t>=0;t--)i.push({x:null!==(m=e[t].x1)&&void 0!==m?m:e[t].x,y:null!==(f=e[t].y1)&&void 0!==f?f:e[t].y});let r=(0,h.X0)(e,O,{curveTension:A}),s=(0,h.X0)(i,"stepBefore"===O?"stepAfter":"stepAfter"===O?"stepBefore":O,{curveTension:A});t.cacheArea={top:r,bottom:s}}}t.clearUpdateShapeTag()}if(Array.isArray(t.cacheArea)){let a=t.attribute.segments.filter(t=>t.points.length);if(1===a[0].points.length&&a.shift(),1===E){let s=!1;t.cacheArea.forEach((h,u)=>{s||(s=this.drawSegmentItem(e,h,C,b,T,S,a[u],[v,t.attribute],E,i,r,x,t,n,o,l))})}else{let h=E*t.cacheArea.reduce((t,e)=>t+e.top.getLength(),0),u=0,d=!1;t.cacheArea.forEach((c,p)=>{if(d)return;let g=c.top.getLength(),m=(h-u)/g;u+=g,m>0&&(d=this.drawSegmentItem(e,c,C,b,T,S,a[p],[v,t.attribute],(0,s.VV)(m,1),i,r,x,t,n,o,l))})}}else this.drawSegmentItem(e,t.cacheArea,C,b,T,S,t.attribute,v,E,i,r,x,t,n,o,l)}draw(t,e,i,r){let s=(0,u.gh)(t,null==r?void 0:r.theme).area;this._draw(t,s,!1,i,r)}drawSegmentItem(t,e,i,r,s,n,a,o,l,h,u,d,c,p,g,m){return this._drawSegmentItem(t,e,i,r,s,n,a,o,l,h,u,d,c,p,g,m)}_drawSegmentItem(t,e,i,n,a,o,l,h,u,d,m,v,_,b,x,S){if(!(e&&e.top&&e.bottom&&e.top.curves&&e.top.curves.length&&e.bottom.curves&&e.bottom.curves.length))return;t.beginPath();let{points:A,segments:k}=_.attribute,w,C,T=c.Nm.ROW;if(k){let t=k[k.length-1];C=k[0].points[0],w=t.points[t.points.length-1]}else C=A[0],w=A[A.length-1];let E=(0,s.Wn)(w.x-C.x),M=(0,s.Wn)(w.y-C.y);T=null==w.x1?c.Nm.ROW:null==w.y1?c.Nm.COLUMN:Number.isFinite(E+M)?E>M?c.Nm.ROW:c.Nm.COLUMN:c.Nm.ROW,function(t,e,i,r){var n;let{top:a,bottom:o}=e;if(a.curves.length!==o.curves.length)return;if(i>=1){let e=[],i=[],s=!0;for(let n=0,l=a.curves.length;n<l;n++){let h=a.curves[n];s!==h.defined?(s?(f(t,e,i,r),e.length=0,i.length=0):(e.push(h),i.push(o.curves[l-n-1])),s=!s):s&&(e.push(h),i.push(o.curves[l-n-1]))}return void f(t,e,i,r)}if(i<=0)return;let{direction:l}=r||{},{curves:h}=a,u=null!==(n=h[h.length-1].p3)&&void 0!==n?n:h[h.length-1].p1,d=(0,s.Wn)(u.x-h[0].p0.x),m=(0,s.Wn)(u.y-h[0].p0.y);l=null!=l?l:d>m?c.Nm.ROW:c.Nm.COLUMN,Number.isFinite(d)||(l=c.Nm.COLUMN),Number.isFinite(m)||(l=c.Nm.ROW);let v=i*(l===c.Nm.ROW?d:m),y=0,_=!0,b=[],x=[];for(let e=0,i=a.curves.length;e<i;e++){let s=a.curves[e],n=s.getLength(l),h=(v-y)/n;if(h<0)break;y+=n;let u=null,d=null;_!==s.defined?(_?(f(t,b,x,r),b.length=0,x.length=0):(u=s,d=o.curves[i-e-1]),_=!_):_&&(u=s,d=o.curves[i-e-1]),u&&d&&(h<1&&(u=u.p2&&u.p3?(0,p.mG)(u,h)[0]:(0,g.d)(u,h)[0],d=d.p2&&d.p3?(0,p.mG)(d,1-h)[1]:(0,g.d)(d,1-h)[1]),u.defined=_,d.defined=_,b.push(u),x.push(d)),u=null,d=null}f(t,b,x,r)}(t.camera?t:t.nativeContext,e,u,{offsetX:d,offsetY:m,offsetZ:v,direction:T}),this.beforeRenderStep(_,t,d,m,!!n,!1,i,!1,h,b,x,null,{attribute:l}),t.setShadowBlendStyle&&t.setShadowBlendStyle(_,l,h);let{x:B=0,x:D=0}=l;return!1!==i&&(x?x(t,l,h):n&&(t.setCommonStyle(_,l,B-d,D-m,h),t.fill())),this.afterRenderStep(_,t,d,m,!!n,!1,i,!1,h,b,x,null,{attribute:l}),(()=>{if(!1!==a){if(S)S(t,l,h);else{let{stroke:i=h&&h[1]&&h[1].stroke}=l;(0,r.Z)(i)&&(i[0]||i[2])&&!1===i[1]&&(t.beginPath(),(0,y.fW)(t.camera?t:t.nativeContext,i[0]?e.top:e.bottom,u,T===c.Nm.ROW?"x":"y",{offsetX:d,offsetY:m,offsetZ:v})),t.setStrokeStyle(_,l,B-d,D-m,h),t.stroke()}}})(),!1}};T=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),C(0,(0,a.f)(l.Qc)),C(0,(0,o.t)(d.Gq)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],T)},9292:function(t,e,i){"use strict";i.d(e,{Y:()=>c});var r=i(5977),s=i(8113),n=i(6003),a=i(3872),o=i(7317),l=i(8535),h=i(5399),u=i(623);let d={x:0,y:0,z:0,lastModelMatrix:null};class c{init(t){t&&(this._renderContribitions=t.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(u.rJ),this.builtinContributions.push(u.Eo),this.builtinContributions.forEach(t=>this._renderContribitions.push(t)),this._renderContribitions.length&&(this._renderContribitions.sort((t,e)=>e.order-t.order),this._beforeRenderContribitions=this._renderContribitions.filter(t=>t.time===a.Oh.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(t=>t.time===a.Oh.afterFillStroke))}beforeRenderStep(t,e,i,r,s,n,a,o,l,h,u,d,c){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(p=>{(!p.supportedAppName||!t.stage||!t.stage.params||!t.stage.params.context||!t.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName))&&p.drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c)})}afterRenderStep(t,e,i,r,s,n,a,o,l,h,u,d,c){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(p=>{(!p.supportedAppName||!t.stage||!t.stage.params||!t.stage.params.context||!t.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName))&&p.drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c)})}drawPathProxy(t,e,i,r,s,a,o,u){if(!t.pathProxy)return!1;let d=(0,l.gh)(t,null==a?void 0:a.theme)[t.type.replace("3d","")],{fill:c=d.fill,stroke:p=d.stroke,opacity:g=d.opacity,fillOpacity:m=d.fillOpacity,lineWidth:f=d.lineWidth,strokeOpacity:v=d.strokeOpacity,visible:y=d.visible,x:_=d.x,y:b=d.y}=t.attribute,x=(0,n.Bv)(g,m,c),S=(0,n.Kf)(g,v),A=(0,n.dz)(c),k=(0,n.ak)(p,f);if(!y||!A&&!k||!(x||S||o||u))return!0;e.beginPath();let w="function"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy;return(0,h.h)(w.commandList,e,i,r),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,d),this.beforeRenderStep(t,e,i,r,A,k,x,S,d,s,o,u),k&&(u?u(e,t.attribute,d):S&&(e.setStrokeStyle(t,t.attribute,i-_,r-b,d),e.stroke())),A&&(o?o(e,t.attribute,d):x&&(e.setCommonStyle(t,t.attribute,i-_,r-b,d),e.fill())),this.afterRenderStep(t,e,i,r,A,k,x,S,d,s,o,u),!0}valid(t,e,i,r){let{fill:s=e.fill,background:a,stroke:o=e.stroke,opacity:l=e.opacity,fillOpacity:h=e.fillOpacity,lineWidth:u=e.lineWidth,strokeOpacity:d=e.strokeOpacity,visible:c=e.visible}=t.attribute,p=(0,n.Bv)(l,h,s),g=(0,n.Kf)(l,d),m=(0,n.dz)(s,a),f=(0,n.ak)(o,u);return!(!t.valid||!c)&&!(!m&&!f)&&!!(p||g||i||r||a)&&{fVisible:p,sVisible:g,doFill:m,doStroke:f}}transform(t,e,i,n=!1){let{x:a=e.x,y:l=e.y,z:h=e.z,scaleX:u=e.scaleX,scaleY:c=e.scaleY,angle:p=e.angle,postMatrix:g}=t.attribute,m=i.modelMatrix,f=i.camera;d.x=a,d.y=l,d.z=h,d.lastModelMatrix=m;let v=f&&(n||(0,r.M_)(t)),y=v?t.transMatrix.onlyTranslate()&&!g:1===u&&1===c&&0===p&&!g;if(v){let n=s.yp.allocate(),a=s.yp.allocate();(0,r.RT)(a,t,e),(0,o.G9)(n,m||n,a),d.x=0,d.y=0,d.z=0,i.modelMatrix=n,i.setTransform(1,0,0,1,0,0,!0),s.yp.free(a)}if(y&&!m){let r=t.getOffsetXY(e);d.x+=r.x,d.y+=r.y,d.z=h,i.setTransformForCurrent()}else if(v)d.x=0,d.y=0,d.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(f&&i.project){let r=t.getOffsetXY(e);d.x+=r.x,d.y+=r.y,this.transformWithoutTranslate(i,d.x,d.y,d.z,u,c,p)}else i.transformFromMatrix(t.transMatrix,!0),d.x=0,d.y=0,d.z=0;return d}transformUseContext2d(t,e,i,r){let s=r.camera;if(this.camera=s,s){let e=t.AABBBounds,s=e.x2-e.x1,n=e.y2-e.y1,a=r.project(0,0,i),o=r.project(s,0,i),l=r.project(s,n,i),h={x:0,y:0},u={x:s,y:0},d={x:s,y:n};r.camera=null;let c=1/(h.x*(d.y-u.y)-u.x*d.y+d.x*u.y+(u.x-d.x)*h.y),p=-(h.y*(l.x-o.x)-u.y*l.x+d.y*o.x+(u.y-d.y)*a.x)*c,g=(u.y*l.y+h.y*(o.y-l.y)-d.y*o.y+(d.y-u.y)*a.y)*c,m=(h.x*(l.x-o.x)-u.x*l.x+d.x*o.x+(u.x-d.x)*a.x)*c,f=-(u.x*l.y+h.x*(o.y-l.y)-d.x*o.y+(d.x-u.x)*a.y)*c,v=(h.x*(d.y*o.x-u.y*l.x)+h.y*(u.x*l.x-d.x*o.x)+(d.x*u.y-u.x*d.y)*a.x)*c,y=(h.x*(d.y*o.y-u.y*l.y)+h.y*(u.x*l.y-d.x*o.y)+(d.x*u.y-u.x*d.y)*a.y)*c;r.setTransform(p,g,m,f,v,y,!0)}}restoreTransformUseContext2d(t,e,i,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(t,e,i,r,s,n,a){let o=t.project(e,i,r);t.translate(o.x,o.y,!1),t.scale(s,n,!1),t.rotate(a,!1),t.translate(-o.x,-o.y,!1),t.setTransformForCurrent()}_draw(t,e,i,r,n){let{context:a}=r;if(!a)return;let{renderable:o}=t.attribute;if(!1===o)return;a.highPerformanceSave();let{x:l,y:h,z:u,lastModelMatrix:d}=this.transform(t,e,a,i);this.z=u,this.drawPathProxy(t,a,l,h,r,n)||(this.drawShape(t,a,l,h,r,n),this.z=0,a.modelMatrix!==d&&s.yp.free(a.modelMatrix),a.modelMatrix=d),a.highPerformanceRestore()}}},623:function(t,e,i){"use strict";i.d(e,{Eo:()=>f,M2:()=>c,R6:()=>p,Sg:()=>g,rJ:()=>m});var r=i(7428),s=i(1600),n=i(7089),a=i(8535),o=i(1164),l=i(3872),h=i(8906),u=i(3482),d=function(t,e){return function(i,r){e(i,r,t)}};class c{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,o,l,h,u,d,c,p){var g;let{background:m,backgroundOpacity:f=null!==(g=t.attribute.fillOpacity)&&void 0!==g?g:h.backgroundOpacity,opacity:v=h.opacity,backgroundMode:y=h.backgroundMode,backgroundFit:_=h.backgroundFit,backgroundKeepAspectRatio:b=h.backgroundKeepAspectRatio,backgroundScale:x=h.backgroundScale,backgroundOffsetX:S=h.backgroundOffsetX,backgroundOffsetY:A=h.backgroundOffsetY,backgroundClip:k=h.backgroundClip}=t.attribute;if(m){if(t.backgroundImg&&t.resources){let s=t.resources.get(m);if("success"!==s.state||!s.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){let i=(0,a.gh)(t.parent).group,{scrollX:r=i.scrollX,scrollY:s=i.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(r,s)}k&&e.clip();let n=t.AABBBounds;e.setCommonStyle(t,t.attribute,i,r,h),e.globalAlpha=f*v,this.doDrawImage(e,s.data,n,{backgroundMode:y,backgroundFit:_,backgroundKeepAspectRatio:b,backgroundScale:x,backgroundOffsetX:S,backgroundOffsetY:A}),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,h),e.globalAlpha=f*v,e.fillStyle=m,e.fill(),e.highPerformanceRestore()}}doDrawImage(t,e,i,r){let{backgroundMode:s,backgroundFit:n,backgroundKeepAspectRatio:a,backgroundScale:l=1,backgroundOffsetX:h=0,backgroundOffsetY:u=0}=r,d=i.width(),c=i.height(),p=d,g=c;if("no-repeat"===s){if(n){if(a){let r=Math.max(d/e.width,c/e.height);t.drawImage(e,i.x1+h,i.y1+u,e.width*r*l,e.height*r*l)}else t.drawImage(e,i.x1,i.y1,i.width(),i.height())}else{let r=e.width*l,s=e.height*l;t.drawImage(e,i.x1+h,i.y1+u,r,s)}}else{if(n&&"repeat"!==s&&(e.width||e.height)){let i=e.width,r=e.height;"repeat-x"===s?(p=c/r*i,g=c):"repeat-y"===s&&(g=d/i*r,p=d);let n=t.dpr,a=o.A.allocate({width:p,height:g,dpr:n}),l=a.getContext("2d");l&&(l.inuse=!0,l.clearMatrix(),l.setTransformForCurrent(!0),l.clearRect(0,0,p,g),l.drawImage(e,0,0,p,g),e=a.nativeCanvas),o.A.free(a)}let r=t.dpr,a=t.createPattern(e,s);a.setTransform&&a.setTransform(new DOMMatrix([1/r,0,0,1/r,0,0])),t.fillStyle=a,t.translate(i.x1,i.y1),t.fillRect(0,0,d,c),t.translate(-i.x1,-i.y1)}}}let p=new c,g=class{constructor(t){this.subRenderContribitions=t,this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(p=>{p.render(t,e,i,r,s,n,a,o,l,h,u,d,c)})}};g=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),d(0,(0,s.f)(h.Qc)),d(0,(0,n.t)(u.tg)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=new class{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){var p,g;let{clipConfig:m}=t.attribute;if(!m)return;let f=t.getClipPath();if(!f)return;let v=!(u||d),y=t.AABBBounds,_=null!==(p=t.attribute.width)&&void 0!==p?p:y.width(),b=null!==(g=t.attribute.height)&&void 0!==g?g:y.height();v&&e.save(),e.beginPath(),!1===f.draw(e,[_,b],i+_/2,r+b/2,0)&&e.closePath(),u&&u(e,t.attribute,l,!0),v&&e.clip()}},f=new class{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){let{clipConfig:p}=t.attribute;p&&t.getClipPath()&&(u||d||e.restore())}}},6936:function(t,e,i){"use strict";i.d(e,{$:()=>o,H:()=>l});var r=i(1164),s=i(3872),n=i(5196),a=i(8103);class o{constructor(){this.time=s.Oh.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}createCommonPattern(t,e,i,s,n){let a=(t-2*e)/2,o=s.dpr,l=r.A.allocate({width:t,height:t,dpr:o}),h=l.getContext("2d");if(!h)return null;h.inuse=!0,h.clearMatrix(),h.setTransformForCurrent(!0),h.clearRect(0,0,t,t),n(a,h);let u=s.createPattern(l.nativeCanvas,"repeat");return u.setTransform&&u.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),r.A.free(l),u}createCirclePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(t,e)=>{e.fillStyle=i,e.arc(t,t,t,0,a.f7),e.fill()})}createDiamondPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(e,r)=>{let s=t/2;r.fillStyle=i,r.moveTo(s,s-e),r.lineTo(e+s,s),r.lineTo(s,s+e),r.lineTo(s-e,s),r.closePath(),r.fill()})}createRectPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(t,r)=>{r.fillStyle=i,r.fillRect(e,e,2*t,2*t)})}createVerticalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(r,s)=>{s.fillStyle=i,s.fillRect(e,0,2*r,t)})}createHorizontalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(r,s)=>{s.fillStyle=i,s.fillRect(0,e,t,2*r)})}createBiasLRLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(e,r)=>{r.strokeStyle=i,r.lineWidth=e,r.moveTo(0,0),r.lineTo(t,t);let s=t/2,n=-s;r.moveTo(s,n),r.lineTo(s+t,n+t),r.moveTo(-s,-n),r.lineTo(-s+t,-n+t),r.stroke()})}createBiasRLLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(e,r)=>{r.strokeStyle=i,r.lineWidth=e,r.moveTo(t,0),r.lineTo(0,t);let s=t/2;r.moveTo(t+s,s),r.lineTo(s,s+t),r.moveTo(t-s,-s),r.lineTo(-s,-s+t),r.stroke()})}createGridPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(t,r)=>{r.fillStyle=i,r.fillRect(e,e,t,t),r.fillRect(e+t,e+t,t,t)})}initTextureMap(t,e){this.textureMap=new Map}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){this.textureMap||this.initTextureMap(e,t.stage);let{texture:p=l.texture,textureColor:g=l.textureColor,textureSize:m=l.textureSize,texturePadding:f=l.texturePadding}=t.attribute;p&&this.drawTexture(p,t,e,i,r,l,g,m,f)}drawTexture(t,e,i,s,a,o,l,h,u){var d;let{textureRatio:c=o.textureRatio,textureOptions:p=null}=e.attribute,g=this.textureMap.get(t);if(!g)switch(t){case"circle":g=this.createCirclePattern(h,u,l,i);break;case"diamond":g=this.createDiamondPattern(h,u,l,i);break;case"rect":g=this.createRectPattern(h,u,l,i);break;case"vertical-line":g=this.createVerticalLinePattern(h,u,l,i);break;case"horizontal-line":g=this.createHorizontalLinePattern(h,u,l,i);break;case"bias-lr":g=this.createBiasLRLinePattern(h,u,l,i);break;case"bias-rl":g=this.createBiasRLLinePattern(h,u,l,i);break;case"grid":g=this.createGridPattern(h,u,l,i)}if(p&&p.dynamicTexture){let g;let{gridConfig:m={},useNewCanvas:f}=p,v=e.AABBBounds;s=v.x1,a=v.y1;let y=i;if(f){let t=(g=r.A.allocate({width:v.width(),height:v.height(),dpr:i.dpr})).getContext("2d");t.clearRect(0,0,v.width(),v.height()),s=0,a=0,i=t}if(y.save(),e.parent&&!e.transMatrix.onlyTranslate()){let{scrollX:t=0,scrollY:i=0}=e.parent.attribute;y.setTransformFromMatrix(e.parent.globalTransMatrix),y.translate(t,i,!0)}y.setCommonStyle(e,e.attribute,s,a,o),y.clip();let _=v.width(),b=v.height(),x=m.columns?m.columns:Math.ceil(_/h),S=m.rows?m.rows:Math.ceil(b/h),A=m.gutterColumn?m.gutterColumn:2*u,k=m.gutterRow?m.gutterRow:2*u;this._tempSymbolGraphic||(this._tempSymbolGraphic=(0,n.t)({}));let w=m.columns?_/m.columns:h,C=m.rows?b/m.rows:h;this._tempSymbolGraphic.setAttributes({size:[w-A,C-k],symbolType:t});let T=this._tempSymbolGraphic.getParsedPath();for(let t=0;t<S;t++)for(let r=0;r<x;r++){let n=s+h/2+r*h,o=a+h/2+t*h;null===(d=p.beforeDynamicTexture)||void 0===d||d.call(p,i,t,r,S,x,c,e,v.width(),v.height()),i.beginPath(),!1===T.draw(i,Math.min(w-A,C-k),n,o,0)&&i.closePath(),i.fillStyle=l,p.dynamicTexture(i,t,r,S,x,c,e,v.width(),v.height())}f&&(y.globalAlpha=1,y.drawImage(g.nativeCanvas,0,0,g.nativeCanvas.width,g.nativeCanvas.height,v.x1,v.y1,v.width()*y.dpr,v.height()*y.dpr)),y.restore()}else if(g)i.highPerformanceSave(),i.setCommonStyle(e,e.attribute,s,a,o),i.fillStyle=g,i.fill(),i.highPerformanceRestore();else if("wave"===t){i.save(),i.setCommonStyle(e,e.attribute,s,a,o),i.clip();let t=e.AABBBounds;(function(t,e,i,r,s,n,a){let{fill:o="orange",percent:l=.6,frequency:h=4,opacity:u,phi:d=0}=s,{amplitude:c=10}=s;c*=e<=.5?4*e-1:-4*e+3;let p=r*(1-l),g=Math.max(Math.round(i/70),2);t.beginPath(),t.moveTo(0+n,r+a),t.lineTo(0+n,p+a);let m=i/h*e,f=i/Math.PI/(2*h);for(let e=0;e<i;e+=g){let i=c*Math.sin((e+m+d)/f+d);t.lineTo(e+n,p+i+a)}t.lineTo(i+n,r+a),t.closePath(),t.fillStyle=o,isFinite(u)&&(t.globalAlpha=u),t.fill()})(i,c,t.width(),t.height(),Object.assign(Object.assign({},p||{}),{fill:l}),s+t.x1-s,a+t.y1-a),i.restore()}}}let l=new o},3482:function(t,e,i){"use strict";i.d(e,{$K:()=>d,Gq:()=>s,JO:()=>a,Mj:()=>o,OL:()=>r,U7:()=>l,X3:()=>u,d5:()=>h,jd:()=>n,tg:()=>c});let r=Symbol.for("ArcRenderContribution"),s=Symbol.for("AreaRenderContribution");Symbol.for("CircleRenderContribution");let n=Symbol.for("GroupRenderContribution"),a=Symbol.for("ImageRenderContribution"),o=Symbol.for("PathRenderContribution"),l=Symbol.for("PolygonRenderContribution"),h=Symbol.for("RectRenderContribution"),u=Symbol.for("SymbolRenderContribution"),d=Symbol.for("TextRenderContribution");Symbol.for("CommonRenderContribution");let c=Symbol.for("InteractiveSubRenderContribution")},8792:function(t,e,i){"use strict";i.d(e,{Er:()=>p,NB:()=>g,d4:()=>c,gq:()=>f,k7:()=>m,sH:()=>d});var r=i(7636),s=i(7428),n=i(3116),a=i(623),o=i(6490),l=i(3872),h=i(6936),u=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};class d{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,a,l,h,u,d,c,p,g){let{outerBorder:m,innerBorder:f}=t.attribute,v=m&&!1!==m.visible,y=f&&!1!==f.visible;if(!v&&!y)return;let{cornerRadius:_=d.cornerRadius,cornerType:b=d.cornerType,opacity:x=d.opacity,x:S=d.x,y:A=d.y,scaleX:k=d.scaleX,scaleY:w=d.scaleY,x1:C,y1:T,keepStrokeScale:E=d.keepStrokeScale}=t.attribute,{width:M,height:B}=t.attribute;M=(null!=M?M:C-i)||0,B=(null!=B?B:T-s)||0;let D=(a,l)=>{let h=!(!a||!a.stroke),u="outerBorder"===l?-1:1,{distance:c=d[l].distance}=a,p=E?c:(0,n.D)(e,c,e.dpr),m=i+u*p,f=s+u*p,v=2*p;if(0===_||(0,r.Z)(_)&&_.every(t=>0===t)?(e.beginPath(),e.rect(m,f,M-u*v,B-u*v)):(e.beginPath(),(0,o.U)(e,m,f,M-u*v,B-u*v,_,"bevel"!==b)),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,d),g)g(e,a,d[l]);else if(h){let r=d[l].opacity;d[l].opacity=x,e.setStrokeStyle(t,a,(S-i)/k,(A-s)/w,d[l]),d[l].opacity=r,e.stroke()}};v&&D(m,"outerBorder"),y&&D(f,"innerBorder")}}let c=class{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){let{stroke:p=l.stroke}=t.attribute;Array.isArray(p)&&p.some(t=>!1===t)&&(c.doStroke=!1)}};c=u([(0,s.b)()],c);let p=class{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,n,a,l,h,u,d,c,p){let{x1:g,y1:m,x:f=u.x,y:v=u.y,stroke:y=u.stroke,cornerRadius:_=u.cornerRadius,cornerType:b=u.cornerType}=t.attribute,{width:x,height:S}=t.attribute;if(x=(null!=x?x:g-f)||0,S=(null!=S?S:m-v)||0,Array.isArray(y)&&y.some(t=>!1===t)){if(e.setStrokeStyle(t,t.attribute,i,s,u),!(0===_||(0,r.Z)(_)&&_.every(t=>0===t))){let r,n=0;return(0,o.U)(e,i,s,x,S,_,"bevel"!==b,[,,,,].fill(0).map((a,o)=>(a,l,h,d)=>{y[o]&&(n===o-1&&y[o]===r||(e.setStrokeStyle(t,Object.assign(Object.assign({},t.attribute),{stroke:y[o]}),i,s,u),e.beginPath(),e.moveTo(a,l),r=y[o]),n=o,e.lineTo(h,d),e.stroke(),3===o&&e.beginPath())})),void e.stroke()}if(e.beginPath(),e.moveTo(i,s),y[0]?e.lineTo(i+x,s):e.moveTo(i+x,s),y[1]?e.lineTo(i+x,s+S):e.moveTo(i+x,s+S),y[2]?e.lineTo(i,s+S):e.moveTo(i,s+S),y[3]){let t=y[0]?s-e.lineWidth/2:s;e.lineTo(i,t)}else e.moveTo(i,s);e.stroke()}}};p=u([(0,s.b)()],p);let g=new d,m=h.H,f=a.R6},4033:function(t,e,i){"use strict";i.d(e,{C:()=>u});var r=i(4154),s=i(3872),n=i(623),a=i(6910),o=i(1207),l=i(6490);class h extends n.M2{constructor(){super(...arguments),this.time=s.Oh.beforeFillStroke}drawShape(t,e,i,s,n,h,u,d,c,p,g,m){var f,v,y,_,b,x,S,A,k,w;let C;let{backgroundMode:T=c.backgroundMode,backgroundFit:E=c.backgroundFit,backgroundKeepAspectRatio:M=c.backgroundKeepAspectRatio}=t.attribute,B,{background:D}=t.attribute;if(!D)return;let O=()=>{"richtext"===t.type&&(e.restore(),e.save(),B&&e.setTransformFromMatrix(B,!0,1))};"richtext"===t.type&&(B=e.currentMatrix.clone(),e.restore(),e.save(),e.setTransformForCurrent());let P=(0,r.Z)(D)&&D.background,I=t.transMatrix.onlyTranslate();if(P){let e=t.AABBBounds,i=(null!==(f=D.x)&&void 0!==f?f:e.x1)+(null!==(v=D.dx)&&void 0!==v?v:0),r=(null!==(y=D.y)&&void 0!==y?y:e.y1)+(null!==(_=D.dy)&&void 0!==_?_:0),s=null!==(b=D.width)&&void 0!==b?b:e.width(),n=null!==(x=D.height)&&void 0!==x?x:e.height();if(C=a.et.allocate(i,r,i+s,r+n),D=D.background,!I){let t=C.width(),e=C.height();C.set((null!==(S=D.x)&&void 0!==S?S:0)+(null!==(A=D.dx)&&void 0!==A?A:0),(null!==(k=D.y)&&void 0!==k?k:0)+(null!==(w=D.dy)&&void 0!==w?w:0),t,e)}}else C=t.AABBBounds,I||(C=(0,o.o)(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(t.backgroundImg&&t.resources){let r=t.resources.get(D);if("success"!==r.state||!r.data)return void O();e.highPerformanceSave(),I&&e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.setCommonStyle(t,t.attribute,i,s,c),this.doDrawImage(e,r.data,C,{backgroundMode:T,backgroundFit:E,backgroundKeepAspectRatio:M}),e.highPerformanceRestore(),e.setTransformForCurrent()}else{let{backgroundCornerRadius:r}=t.attribute;e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,s,c),e.fillStyle=D,r?((0,l.U)(e,C.x1,C.y1,C.width(),C.height(),r,!0),e.fill()):e.fillRect(C.x1,C.y1,C.width(),C.height()),e.highPerformanceRestore()}P&&a.et.free(C),O()}}let u=new h},6401:function(t,e,i){"use strict";i.d(e,{K:()=>h});var r=i(7428),s=i(1749),n=i(8535),a=i(6003),o=i(98),l=i(231);let h=class extends o.j{constructor(){super(...arguments),this.numberType=s.Ri}drawShape(t,e,i,r,s,o,l){if(t.incremental&&s.multiGraphicOptions){let{startAtIdx:o,length:h}=s.multiGraphicOptions,{segments:u=[]}=t.attribute;if(o>u.length)return;let d=(0,n.gh)(t).area,{fill:c=d.fill,fillOpacity:p=d.fillOpacity,opacity:g=d.opacity,visible:m=d.visible}=t.attribute,f=(0,a.Bv)(g,p,c),v=(0,a.dz)(c);if(t.valid&&m&&v&&(f||l))for(let s=o;s<o+h;s++)this.drawIncreaseSegment(t,e,u[s-1],u[s],t.attribute.segments[s],[d,t.attribute],i,r)}else super.drawShape(t,e,i,r,s,o,l)}drawIncreaseSegment(t,e,i,r,s,n,a,o){r&&(e.beginPath(),(0,l.hJ)(e.camera?e:e.nativeContext,i,r,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,s,n),e.setCommonStyle(t,s,a,o,n),e.fill())}};h=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],h)},7999:function(t,e,i){"use strict";i.d(e,{U:()=>h});var r=i(7428),s=i(8535),n=i(1749),a=i(6003),o=i(1132),l=i(231);let h=class extends o.X{constructor(){super(...arguments),this.numberType=n.Hf}drawShape(t,e,i,r,n,o,l,h){if(t.incremental&&n.multiGraphicOptions){let{startAtIdx:e,length:o}=n.multiGraphicOptions,{segments:u=[]}=t.attribute;if(e>u.length)return;let d=(0,s.gh)(t).line,{fill:c=d.fill,stroke:p=d.stroke,opacity:g=d.opacity,fillOpacity:m=d.fillOpacity,strokeOpacity:f=d.strokeOpacity,lineWidth:v=d.lineWidth,visible:y=d.visible}=t.attribute,_=(0,a.Bv)(g,m,c),b=(0,a.Kf)(g,f),x=(0,a.dz)(c),S=(0,a.ak)(p,v);if(!t.valid||!y||!x&&!S||!(_||b||l||h))return;let{context:A}=n;for(let s=e;s<e+o;s++)this.drawIncreaseSegment(t,A,u[s-1],u[s],t.attribute.segments[s],[d,t.attribute],i,r)}else super.drawShape(t,e,i,r,n,o,l,h)}drawIncreaseSegment(t,e,i,r,s,n,a,o){r&&(e.beginPath(),(0,l.V3)(e.nativeContext,i,r,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,s,n),e.setStrokeStyle(t,s,a,o,n),e.stroke())}};h=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],h)},1132:function(t,e,i){"use strict";i.d(e,{X:()=>d});var r=i(7636),s=i(8103),n=i(7428),a=i(8535),o=i(1749),l=i(9292),h=i(231),u=i(613);let d=class extends l.Y{constructor(){super(...arguments),this.numberType=o.Hf}draw(t,e,i,r){let s=(0,a.gh)(t,null==r?void 0:r.theme).line;this._draw(t,s,!1,i,r)}drawSegmentItem(t,e,i,s,n,a,o,l,u,d,c,p,g,m,f){var v;if(!e)return;t.beginPath();let y=null!==(v=this.z)&&void 0!==v?v:0;(0,h.fW)(t.camera?t:t.nativeContext,e,u,d,{offsetX:c,offsetY:p,offsetZ:y}),g.cache&&!(0,r.Z)(g.cache)&&g.cache.curves.every(t=>t.defined)&&g.attribute.curveType&&g.attribute.curveType.includes("Closed")&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(g,o,l);let{x:_=0,x:b=0}=o;return!1!==i&&(m?m(t,o,l):n&&(t.setCommonStyle(g,o,_-c,b-p,l),t.fill())),!1!==s&&(f?f(t,o,l):a&&(t.setStrokeStyle(g,o,_-c,b-p,l),t.stroke())),!1}drawLinearLineHighPerformance(t,e,i,r,s,n,a,o,l,h,u,d,c){var p;e.beginPath();let g=null!==(p=this.z)&&void 0!==p?p:0,{points:m}=t.attribute,f=m[0];e.moveTo(f.x+a,f.y+o,g);for(let t=1;t<m.length;t++){let i=m[t];e.lineTo(i.x+a,i.y+o,g)}e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l);let{x:v=0,x:y=0}=t.attribute;!1!==i&&(d?d(e,t.attribute,l):s&&(e.setCommonStyle(t,t.attribute,v-a,y-o,l),e.fill())),!1!==r&&(c?c(e,t.attribute,l):n&&(e.setStrokeStyle(t,t.attribute,v-a,y-o,l),e.stroke()))}drawShape(t,e,i,r,n,o,l,h){let d=(0,a.gh)(t,null==o?void 0:o.theme).line,{fill:c=d.fill,stroke:p=d.stroke,fillOpacity:g=d.fillOpacity,strokeOpacity:m=d.strokeOpacity,segments:f,points:v,closePath:y,curveTension:_=d.curveTension,connectedType:b=d.connectedType}=t.attribute;if(!this.valid(t,d,l,h))return;let{curveType:x=d.curveType}=t.attribute;y&&"linear"===x&&(x="linearClosed");let{clipRange:S=d.clipRange,clipRangeByDimension:A=d.clipRangeByDimension}=t.attribute;if(1===S&&!f&&!v.some(t=>!1===t.defined)&&"linear"===x)return this.drawLinearLineHighPerformance(t,e,!!c,!!p,g,m,i,r,d,n,o,l,h);function k(t,e){return"none"===e?t:t.filter(t=>!1!==t.defined)}if(t.shouldUpdateShape()){let{points:e,segments:i}=t.attribute;if(i&&i.length){let e,r;if(t.cache=i.map((t,i)=>{if(t.points.length<=1&&0===i)return t.points[0]&&(r={endX:t.points[0].x,endY:t.points[0].y,curves:[{defined:!1!==t.points[0].defined}]}),null;1===i?e={x:r.endX,y:r.endY,defined:r.curves[r.curves.length-1].defined}:i>1&&(e.x=r.endX,e.y=r.endY,e.defined=r.curves[r.curves.length-1].defined);let s=(0,u.X0)(k(t.points,b),x,{startPoint:e,curveTension:_});return r=s,s}).filter(t=>!!t),"linearClosed"===x){let e;for(let i=0;i<t.cache.length;i++){let r=t.cache[i];for(let t=0;t<r.curves.length;t++)if(r.curves[t].defined){e=r.curves[t].p0;break}if(e)break}t.cache[t.cache.length-1]&&t.cache[t.cache.length-1].lineTo(e.x,e.y,!0)}}else{if(!e||!e.length)return t.cache=null,void t.clearUpdateShapeTag();t.cache=(0,u.X0)(k(e,b),x,{curveTension:_})}t.clearUpdateShapeTag()}if(Array.isArray(t.cache)){let n=t.attribute.segments.filter(t=>t.points.length);if(1===n[0].points.length&&n.shift(),1===S){let s=!1;t.cache.forEach((a,o)=>{s||(s=this.drawSegmentItem(e,a,!!c,!!p,g,m,n[o],[d,t.attribute],S,A,i,r,t,l,h))})}else{let a=S*t.cache.reduce((t,e)=>t+e.getLength(),0),o=0,u=!1;t.cache.forEach((f,v)=>{if(u)return;let y=f.getLength(),_=(a-o)/y;o+=y,_>0&&(u=this.drawSegmentItem(e,f,!!c,!!p,g,m,n[v],[d,t.attribute],(0,s.VV)(_,1),A,i,r,t,l,h))})}}else this.drawSegmentItem(e,t.cache,!!c,!!p,g,m,t.attribute,d,S,A,i,r,t,l,h)}};d=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],d)},4481:function(t,e,i){"use strict";i.d(e,{AC:()=>n,Cb:()=>l,EY:()=>m,FU:()=>y,Gs:()=>a,Iv:()=>b,K2:()=>p,O:()=>h,Pf:()=>r,Uj:()=>c,Xe:()=>s,ZT:()=>d,e0:()=>_,fS:()=>f,lG:()=>u,sP:()=>v,tP:()=>g,uz:()=>o});let r=Symbol.for("IncrementalDrawContribution"),s=Symbol.for("ArcRender"),n=Symbol.for("Arc3dRender"),a=Symbol.for("AreaRender");Symbol.for("CircleRender");let o=Symbol.for("GraphicRender"),l=Symbol.for("GroupRender"),h=Symbol.for("LineRender"),u=Symbol.for("PathRender"),d=Symbol.for("PolygonRender"),c=Symbol.for("RectRender"),p=Symbol.for("Rect3DRender"),g=Symbol.for("SymbolRender"),m=Symbol.for("TextRender"),f=Symbol.for("RichTextRender"),v=Symbol.for("Pyramid3dRender"),y=Symbol.for("GlyphRender"),_=Symbol.for("ImageRender");Symbol.for("RenderSelector");let b=Symbol.for("DrawContribution")},6003:function(t,e,i){"use strict";i.d(e,{Bv:()=>o,Eg:()=>p,GT:()=>l,Kf:()=>h,ZN:()=>c,Ze:()=>u,ak:()=>a,dz:()=>n,gI:()=>d});var r=i(7636),s=i(8103);function n(t,e){return!(!t&&!e)}function a(t,e){return((0,r.Z)(t)?t.some(t=>t||void 0===t):!!t)&&e>0}function o(t,e,i){return i&&t*e>0}function l(t,e,i,r,s){return s&&t*e>0&&0!==i&&0!==r}function h(t,e){return t*e>0}function u(t,e,i,r){return t*e>0&&0!==i&&0!==r}function d(t,e,i,r,s,n,a){let o=t-i,l=e-r,h=(a?n:-n)/Math.sqrt(o*o+l*l),u=h*l,d=-h*o,c=t+u,p=e+d,g=i+u,m=r+d,f=(c+g)/2,v=(p+m)/2,y=g-c,_=m-p,b=y*y+_*_,x=s-n,S=c*m-g*p,A=(_<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-S*S)),k=(S*_-y*A)/b,w=(-S*y-_*A)/b,C=(S*_+y*A)/b,T=(-S*y+_*A)/b,E=k-f,M=w-v,B=C-f,D=T-v;return E*E+M*M>B*B+D*D&&(k=C,w=T),{cx:k,cy:w,x01:-u,y01:-d,x11:k*(s/x-1),y11:w*(s/x-1)}}function c(t,e,i,n,a){let o,l,h,u;let d=(0,s.Wn)(i-e),c=t.getParsedCornerRadius(),p=(0,r.Z)(c),{outerDeltaAngle:g,innerDeltaAngle:m,outerStartAngle:f,outerEndAngle:v,innerEndAngle:y,innerStartAngle:_}=t.getParsePadAngle(e,i),b=p?c[0]:c,x=p?c[1]:c,S=p?c[2]:c,A=p?c[3]:c,k=Math.max(x,b),w=Math.max(S,A),C=k,T=w,E=a*(0,s.mC)(f),M=a*(0,s.O$)(f),B=n*(0,s.mC)(y),D=n*(0,s.O$)(y);if((w>s.Ho||k>s.Ho)&&(o=a*(0,s.mC)(v),l=a*(0,s.O$)(v),h=n*(0,s.mC)(_),u=n*(0,s.O$)(_),d<s.pi)){let t=function(t,e,i,r,n,a,o,l){let h=i-t,u=r-e,d=o-n,c=l-a,p=c*h-d*u;return p*p<s.Ho?[]:(p=(d*(e-a)-c*(t-n))/p,[t+p*h,e+p*u])}(E,M,h,u,o,l,B,D);if(t){let e=E-t[0],i=M-t[1],r=o-t[0],h=l-t[1],u=1/(0,s.O$)((0,s.Kh)((e*r+i*h)/((0,s._b)(e*e+i*i)*(0,s._b)(r*r+h*h)))/2),d=(0,s._b)(t[0]*t[0]+t[1]*t[1]);T=(0,s.VV)(w,(n-d)/(u-1)),C=(0,s.VV)(k,(a-d)/(u+1))}}return{outerDeltaAngle:g,xors:E,yors:M,xirs:h,yirs:u,xore:o,yore:l,xire:B,yire:D,limitedOcr:C,limitedIcr:T,outerCornerRadiusStart:b,outerCornerRadiusEnd:x,maxOuterCornerRadius:k,maxInnerCornerRadius:w,outerStartAngle:f,outerEndAngle:v,innerDeltaAngle:m,innerEndAngle:y,innerStartAngle:_,innerCornerRadiusStart:A,innerCornerRadiusEnd:S}}function p(t,e,i,r,n,a,o){let{startAngle:l,endAngle:h}=t.getParsedAngle(),u=(0,s.Wn)(h-l),p=h>l,g=!1;if(n<a){let t=n;n=a,a=t}if(n<=s.Ho)e.moveTo(i,r);else if(u>=s.f7-s.Ho)e.moveTo(i+n*(0,s.mC)(l),r+n*(0,s.O$)(l)),e.arc(i,r,n,l,h,!p),a>s.Ho&&(e.moveTo(i+a*(0,s.mC)(h),r+a*(0,s.O$)(h)),e.arc(i,r,a,h,l,p));else{let{outerDeltaAngle:u,xors:m,yors:f,xirs:v,yirs:y,limitedOcr:_,outerCornerRadiusStart:b,outerCornerRadiusEnd:x,maxOuterCornerRadius:S,xore:A,yore:k,xire:w,yire:C,outerStartAngle:T,outerEndAngle:E,limitedIcr:M,innerDeltaAngle:B,innerEndAngle:D,innerStartAngle:O,innerCornerRadiusStart:P,innerCornerRadiusEnd:I,maxInnerCornerRadius:R}=c(t,l,h,a,n);if(u<.001)o&&(o[3]||o[1])&&e.moveTo(i+m,r+f),g=!0;else if(_>s.Ho){let t=(0,s.VV)(b,_),a=(0,s.VV)(x,_),l=d(v,y,m,f,n,t,Number(p)),h=d(A,k,w,C,n,a,Number(p));_<S&&t===a?!o||o[0]?(e.moveTo(i+l.cx+l.x01,r+l.cy+l.y01),e.arc(i+l.cx,r+l.cy,_,(0,s.fv)(l.y01,l.x01),(0,s.fv)(h.y01,h.x01),!p)):e.moveTo(i+l.cx+_*(0,s.mC)((0,s.fv)(h.y01,h.x01)),r+l.cy+_*(0,s.O$)((0,s.fv)(h.y01,h.x01))):!o||o[0]?(e.moveTo(i+l.cx+l.x01,r+l.cy+l.y01),t>0&&e.arc(i+l.cx,r+l.cy,t,(0,s.fv)(l.y01,l.x01),(0,s.fv)(l.y11,l.x11),!p),e.arc(i,r,n,(0,s.fv)(l.cy+l.y11,l.cx+l.x11),(0,s.fv)(h.cy+h.y11,h.cx+h.x11),!p),a>0&&e.arc(i+h.cx,r+h.cy,a,(0,s.fv)(h.y11,h.x11),(0,s.fv)(h.y01,h.x01),!p)):a>0?e.moveTo(i+h.cx+a*(0,s.mC)((0,s.fv)(h.y01,h.x01)),r+h.cy+a*(0,s.O$)((0,s.fv)(h.y01,h.x01))):e.moveTo(i+A,r+n*(0,s.O$)(E))}else!o||o[0]?(e.moveTo(i+m,r+f),e.arc(i,r,n,T,E,!p)):e.moveTo(i+n*(0,s.mC)(E),r+n*(0,s.O$)(E));if(!(a>s.Ho)||B<.001)!o||o[1]?e.lineTo(i+w,r+C):e.moveTo(i+w,r+C),g=!0;else if(M>s.Ho){let t=(0,s.VV)(P,M),n=(0,s.VV)(I,M),l=d(w,C,A,k,a,-n,Number(p)),h=d(m,f,v,y,a,-t,Number(p));if(!o||o[1]?e.lineTo(i+l.cx+l.x01,r+l.cy+l.y01):e.moveTo(i+l.cx+l.x01,r+l.cy+l.y01),M<R&&t===n){let t=(0,s.fv)(h.y01,h.x01);!o||o[2]?e.arc(i+l.cx,r+l.cy,M,(0,s.fv)(l.y01,l.x01),t,!p):e.moveTo(i+l.cx+(0,s.mC)(t),r+l.cy+(0,s.O$)(t))}else!o||o[2]?(n>0&&e.arc(i+l.cx,r+l.cy,n,(0,s.fv)(l.y01,l.x01),(0,s.fv)(l.y11,l.x11),!p),e.arc(i,r,a,(0,s.fv)(l.cy+l.y11,l.cx+l.x11),(0,s.fv)(h.cy+h.y11,h.cx+h.x11),p),t>0&&e.arc(i+h.cx,r+h.cy,t,(0,s.fv)(h.y11,h.x11),(0,s.fv)(h.y01,h.x01),!p)):t>0?e.moveTo(i+h.cx+t*(0,s.mC)((0,s.fv)(h.y01,h.x01)),r+h.cy+t*(0,s.O$)((0,s.fv)(h.y01,h.x01))):e.moveTo(i+v,r+y)}else!o||o[1]?e.lineTo(i+w,r+C):e.moveTo(i+w,r+C),!o||o[2]?e.arc(i,r,a,D,O,p):e.moveTo(i+a*(0,s.mC)(O),r+a*(0,s.O$)(O))}return o?o[3]&&e.lineTo(i+n*(0,s.mC)(l),r+n*(0,s.O$)(l)):e.closePath(),g}},6403:function(t,e,i){"use strict";i.d(e,{I2:()=>l,pi:()=>o});var r,s=i(7428),n=i(1600),a=i(4481);let o=Symbol.for("RenderService");Symbol.for("BeforeRenderConstribution");let l=class{constructor(t){this.drawContribution=t}prepare(t){t&&this.renderTreeRoots.forEach(e=>{this._prepare(e,t)})}_prepare(t,e){t.forEachChildren(t=>{this._prepare(t,e)}),t.update({bounds:e,trans:!0})}prepareRenderList(){}beforeDraw(t){}draw(t){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(t){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}render(t,e){this.renderTreeRoots=t,this.drawParams=e;let i=e.updateBounds;this.prepare(i),this.prepareRenderList(),this.beforeDraw(e),this.draw(e),this.afterDraw(e),this.drawParams=null}};l=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),(r=(0,n.f)(a.Iv),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],l)},9156:function(t,e,i){"use strict";i.d(e,{h:()=>s});var r=i(534);class s{static GetImage(t,e){var i;let n=s.cache.get(t);n?"fail"===n.loadState?r.w.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):"init"===n.loadState||"loading"===n.loadState?null===(i=n.waitingMark)||void 0===i||i.push(e):e&&e.imageLoadSuccess(t,n.data):s.loadImage(t,e)}static GetSvg(t,e){var i;let n=s.cache.get(t);n?"fail"===n.loadState?r.w.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):"init"===n.loadState||"loading"===n.loadState?null===(i=n.waitingMark)||void 0===i||i.push(e):e&&e.imageLoadSuccess(t,n.data):(n={type:"image",loadState:"init"},s.cache.set(t,n),n.dataPromise=r.w.global.loadSvg(t),n.dataPromise?(n.waitingMark=[e],n.dataPromise.then(e=>{var i;n.loadState=(null==e?void 0:e.data)?"success":"fail",n.data=null==e?void 0:e.data,null===(i=n.waitingMark)||void 0===i||i.map((i,r)=>{(null==e?void 0:e.data)?(n.loadState="success",n.data=e.data,i.imageLoadSuccess(t,e.data)):(n.loadState="fail",i.imageLoadFail(t))}),n.waitingMark&&(n.waitingMark=[])})):(n.loadState="fail",e.imageLoadFail(t)))}static GetFile(t,e){let i=s.cache.get(t);return i?"fail"===i.loadState?Promise.reject():"init"===i.loadState||"loading"===i.loadState?i.dataPromise.then(t=>t.data):Promise.resolve(i.data):(i={type:e,loadState:"init"},s.cache.set(t,i),"arrayBuffer"===e?i.dataPromise=r.w.global.loadArrayBuffer(t):"blob"===e?i.dataPromise=r.w.global.loadBlob(t):"json"===e&&(i.dataPromise=r.w.global.loadJson(t)),i.dataPromise.then(t=>t.data))}static loading(){setTimeout(()=>{if(!s.isLoading&&s.toLoadAueue.length){s.isLoading=!0;let t=s.toLoadAueue.splice(0,10),e=[];t.forEach(t=>{let{url:i,marks:n}=t,a={type:"image",loadState:"init"};if(s.cache.set(i,a),a.dataPromise=r.w.global.loadImage(i),a.dataPromise){a.waitingMark=n;let t=a.dataPromise.then(t=>{var e;a.loadState=(null==t?void 0:t.data)?"success":"fail",a.data=null==t?void 0:t.data,null===(e=a.waitingMark)||void 0===e||e.map((e,r)=>{(null==t?void 0:t.data)?(a.loadState="success",a.data=t.data,e.imageLoadSuccess(i,t.data)):(a.loadState="fail",e.imageLoadFail(i))}),a.waitingMark&&(a.waitingMark=[])});e.push(t)}else a.loadState="fail",n.forEach(t=>t.imageLoadFail(i))}),Promise.all(e).then(()=>{s.isLoading=!1,this.onLoadSuccessCb.forEach(t=>t()),s.loading()}).catch(t=>{console.error(t),s.isLoading=!1,this.onLoadSuccessCb.forEach(t=>t()),s.loading()})}},0)}static loadImage(t,e){let i=n(t,s.toLoadAueue);if(-1!==i)return s.toLoadAueue[i].marks.push(e),void s.loading();s.toLoadAueue.push({url:t,marks:[e]}),s.loading()}static improveImageLoading(t){let e=n(t,s.toLoadAueue);if(-1!==e){let t=s.toLoadAueue.splice(e,1);s.toLoadAueue.unshift(t[0])}}static onLoadSuccess(t){this.onLoadSuccessCb.push(t)}}function n(t,e){for(let i=0;i<e.length;i++)if(e[i].url===t)return i;return -1}s.cache=new Map,s.isLoading=!1,s.toLoadAueue=[],s.onLoadSuccessCb=[]},1822:function(t,e,i){"use strict";i.d(e,{n:()=>s});class r{constructor(t,e){this._args=t,this.name=e,this.taps=[]}tap(t,e){this._tap("sync",t,e)}unTap(t,e){let i="string"==typeof t?t.trim():t.name;i&&(this.taps=this.taps.filter(t=>!(t.name===i&&(!e||t.fn===e))))}_parseOptions(t,e,i){let r;if("string"==typeof e)r={name:e.trim()};else if("object"!=typeof e||null===e)throw Error("Invalid tap options");if("string"!=typeof r.name||""===r.name)throw Error("Missing name for tap");return Object.assign({type:t,fn:i},r)}_tap(t,e,i){this._insert(this._parseOptions(t,e,i))}_insert(t){let e;"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let i=0;"number"==typeof t.stage&&(i=t.stage);let r=this.taps.length;for(;r>0;){r--;let t=this.taps[r];this.taps[r+1]=t;let s=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(s>i)){r++;break}}this.taps[r]=t}}class s extends r{call(...t){this.taps.map(t=>t.fn).forEach(e=>e(...t))}}},4021:function(t,e,i){"use strict";i.d(e,{D:()=>n});var r=i(9292),s=i(8113);class n extends r.Y{contains(t,e,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=t.getGraphicTheme();r.highPerformanceSave();let{x:a,y:o,z:l,lastModelMatrix:h}=this.transform(t,n,r),u=e;if(r.camera){u=e.clone();let i=t.parent.globalTransMatrix;u.x=i.a*e.x+i.c*e.y+i.e,u.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(t,r,a,o,i,null,(t,e,i)=>!!d||(d=t.isPointInPath(u.x,u.y))),this.canvasRenderer.z=0,r.modelMatrix!==h&&s.yp.free(r.modelMatrix),r.modelMatrix=h,r.highPerformanceRestore(),d}}},1434:function(t,e,i){"use strict";i.d(e,{Q:()=>a});var r=i(9292),s=i(3116),n=i(8113);class a extends r.Y{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;r.highPerformanceSave();let a=t.getGraphicTheme(),{x:o,y:l,z:h,lastModelMatrix:u}=this.transform(t,a,r),d=e;if(r.camera){d=e.clone();let i=t.parent.globalTransMatrix;d.x=i.a*e.x+i.c*e.y+i.e,d.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=h;let c=!1;return this.canvasRenderer.drawShape(t,r,o,l,{},null,t=>!!c||(c=t.isPointInPath(d.x,d.y)),(t,e,i)=>{if(c)return!0;let n=e.lineWidth||i.lineWidth,a=e.pickStrokeBuffer||i.pickStrokeBuffer,o=e.keepStrokeScale||i.keepStrokeScale;return r.lineWidth=o?n+a:(0,s.D)(r,n+a,r.dpr),c=t.isPointInStroke(d.x,d.y)}),this.canvasRenderer.z=0,r.modelMatrix!==u&&n.yp.free(r.modelMatrix),r.modelMatrix=u,r.highPerformanceRestore(),c}}},1335:function(t,e,i){"use strict";i.d(e,{o:()=>s});var r=i(3116);class s{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode||!this.canvasRenderer)return!0;let{pickContext:s}=null!=i?i:{};if(!s)return!1;let n=t.getGraphicTheme();s.highPerformanceSave();let{x:a=n.x,y:o=n.y}=t.attribute;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(n);a+=e.x,o+=e.y,s.setTransformForCurrent()}else a=0,o=0,s.transformFromMatrix(t.transMatrix,!0);let l=!1,h=!1;return this.canvasRenderer.drawShape(t,s,a,o,{},null,(t,i,r,s)=>!(!l&&!h)||(l=t.isPointInPath(e.x,e.y),h=s||h,l),(t,i,n,a)=>{if(l||h)return!0;let o=i.lineWidth||n.lineWidth,u=i.pickStrokeBuffer||n.pickStrokeBuffer,d=i.keepStrokeScale||n.keepStrokeScale;return s.lineWidth=d?o+u:(0,r.D)(s,o+u,s.dpr),l=t.isPointInStroke(e.x,e.y),h=a||h,l}),s.highPerformanceRestore(),l}}},479:function(t,e,i){"use strict";i.d(e,{$Y:()=>n,CV:()=>f,DS:()=>x,Dp:()=>m,EL:()=>M,ES:()=>y,Ex:()=>l,O2:()=>w,RC:()=>S,Rz:()=>v,Se:()=>T,Sp:()=>A,TF:()=>b,Uv:()=>p,XN:()=>r,Yr:()=>u,ZY:()=>C,cs:()=>a,e_:()=>g,g2:()=>o,ks:()=>_,nb:()=>h,p1:()=>d,pE:()=>E,t3:()=>s,uV:()=>c,ww:()=>k});let r=Symbol.for("MathPickerContribution"),s=Symbol.for("MathArcPicker"),n=Symbol.for("MathAreaPicker");Symbol.for("MathCirclePicker");let a=Symbol.for("MathImagePicker"),o=Symbol.for("MathLinePicker"),l=Symbol.for("MathPathPicker"),h=Symbol.for("MathRectPicker"),u=Symbol.for("MathSymbolPicker"),d=Symbol.for("MathTextPicker"),c=Symbol.for("MathPolygonPicker"),p=Symbol.for("MathGlyphPicker"),g=Symbol.for("CanvasArcPicker"),m=Symbol.for("CanvasArc3dPicker"),f=Symbol.for("CanvasAreaPicker");Symbol.for("CanvasCirclePicker");let v=Symbol.for("CanvasImagePicker");Symbol.for("CanvasGifImagePicker");let y=Symbol.for("CanvasLinePicker");Symbol.for("CanvasLottiePicker");let _=Symbol.for("CanvasPathPicker"),b=Symbol.for("CanvasRectPicker"),x=Symbol.for("CanvasRect3dPicker"),S=Symbol.for("CanvasSymbolPicker"),A=Symbol.for("CanvasTextPicker"),k=Symbol.for("CanvasPolygonPicker"),w=Symbol.for("CanvasPyramid3dPicker"),C=Symbol.for("CanvasRichTextPicker"),T=Symbol.for("CanvasGlyphPicker"),E=Symbol.for("CanvasGroupPicker"),M=Symbol.for("CanvasPickerContribution")},873:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(1749),s=i(7428);let n=class{constructor(){this.type="image",this.numberType=r.PN}contains(t,e,i){let{pickContext:r}=null!=i?i:{};return!!r&&!!t.AABBBounds.containsPoint(e)}};n=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],n)},1671:function(t,e,i){"use strict";i.d(e,{X:()=>r});let r=(0,i(7211).kP)()},7881:function(t,e,i){"use strict";i.d(e,{x:()=>U});var r,s,n=i(5102),a=i(7578),o=i(6480),l=i(8906),h=i(8429),u=i(8103),d=i(1036),c=i(7428),p=i(1600),g=i(7089),m=i(8535),f=i(3386),v=i(6003),y=i(3140),_=i(3482),b=i(1749),x=i(9292),S=i(3116),A=i(623),k=i(3872),w=i(6936);let C=new class{constructor(){this.time=k.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d){let{outerBorder:c,innerBorder:p}=t.attribute,g=c&&!1!==c.visible,m=p&&!1!==p.visible;if(!g&&!m)return;let{innerPadding:f=l.innerPadding,outerPadding:y=l.outerPadding,startAngle:_=l.startAngle,endAngle:b=l.endAngle,opacity:x=l.opacity,x:A=l.x,y:k=l.y,scaleX:w=l.scaleX,scaleY:C=l.scaleY,keepStrokeScale:T=l.keepStrokeScale}=t.attribute,{innerRadius:E=l.innerRadius,outerRadius:M=l.outerRadius}=t.attribute;M+=y,E-=f;let B=(s,n)=>{let a=!(!s||!s.stroke),{distance:o=l[n].distance}=s,h=T?o:(0,S.D)(e,o,e.dpr),u=o/M,c="outerBorder"===n?1:-1;if(t.setAttributes({outerRadius:M+c*h,innerRadius:E-c*h,startAngle:_-c*u,endAngle:b+c*u}),e.beginPath(),(0,v.Eg)(t,e,i,r,M+c*h,E-c*h),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),d)d(e,s,l[n]);else if(a){let a=l[n].opacity;l[n].opacity=x,e.setStrokeStyle(t,s,(A-i)/w,(k-r)/C,l[n]),l[n].opacity=a,e.stroke()}};g&&B(c,"outerBorder"),m&&B(p,"innerBorder"),t.setAttributes({outerRadius:M,innerRadius:E,startAngle:_,endAngle:b})}},T=w.H,E=A.R6;var M=function(t,e){return function(i,r){e(i,r,t)}};let B=class extends x.Y{constructor(t){super(),this.arcRenderContribitions=t,this.numberType=b.r_,this.builtinContributions=[C,E,T],this.init(t)}drawArcTailCapPath(t,e,i,r,s,n,a,o){let l=o-a,h=t.getParsedAngle(),d=h.startAngle,c=h.endAngle;c=o,(0,u.Wn)(c-d);let p=c>d,g=!1;if(s<n){let t=s;s=n,n=t}let{outerDeltaAngle:m,xors:f,yors:y,xirs:_,yirs:b,limitedOcr:x,outerCornerRadiusStart:S,outerCornerRadiusEnd:A,maxOuterCornerRadius:k,xore:w,yore:C,xire:T,yire:E,limitedIcr:M,innerDeltaAngle:B,innerStartAngle:D,innerCornerRadiusStart:O,innerCornerRadiusEnd:P,maxInnerCornerRadius:I}=(0,v.ZN)(t,d,c,n,s);if(x>u.Ho){let t=(0,u.VV)(S,x),n=(0,u.VV)(A,x),a=(0,v.gI)(_,b,f,y,s,t,Number(p)),o=(0,v.gI)(w,C,T,E,s,n,Number(p));if(x<k&&t===n)e.moveTo(i+a.cx+a.x01,r+a.cy+a.y01),e.arc(i+a.cx,r+a.cy,x,(0,u.fv)(a.y01,a.x01),(0,u.fv)(o.y01,o.x01),!p);else{let t=c-l-.03,a=(0,u.fv)(o.y11,o.x11);e.arc(i,r,s,t,a,!p),n>0&&e.arc(i+o.cx,r+o.cy,n,(0,u.fv)(o.y11,o.x11),(0,u.fv)(o.y01,o.x01),!p)}}else e.moveTo(i+f,r+y);if(!(n>u.Ho)||B<.001)e.lineTo(i+T,r+E),g=!0;else if(M>u.Ho){let t=(0,u.VV)(O,M),s=(0,u.VV)(P,M),a=(0,v.gI)(T,E,w,C,n,-s,Number(p)),o=(0,v.gI)(f,y,_,b,n,-t,Number(p));if(e.lineTo(i+a.cx+a.x01,r+a.cy+a.y01),M<I&&t===s){let t=(0,u.fv)(o.y01,o.x01);e.arc(i+a.cx,r+a.cy,M,(0,u.fv)(a.y01,a.x01),t,!p)}else{s>0&&e.arc(i+a.cx,r+a.cy,s,(0,u.fv)(a.y01,a.x01),(0,u.fv)(a.y11,a.x11),!p);let t=(0,u.fv)(a.cy+a.y11,a.cx+a.x11),o=c-l-.03;e.arc(i,r,n,t,o,p)}}else e.lineTo(i+n*(0,u.mC)(D),r+n*(0,u.O$)(D));return g}drawShape(t,e,i,r,s,n,a,o){let l=(0,m.gh)(t,null==n?void 0:n.theme).arc,{fill:h=l.fill,stroke:c=l.stroke,x:p=l.x,y:g=l.y,fillStrokeOrder:_=l.fillStrokeOrder}=t.attribute,b=this.valid(t,l,a,o);if(!b)return;let{fVisible:x,sVisible:S,doFill:A,doStroke:k}=b,{outerPadding:w=l.outerPadding,innerPadding:C=l.innerPadding,cap:T=l.cap,forceShowCap:E=l.forceShowCap}=t.attribute,{outerRadius:M=l.outerRadius,innerRadius:B=l.innerRadius}=t.attribute;M+=w,B-=C;let D=0,O=((0,d.Z)(T)&&T||T[0])&&"conical"===h.gradient;if(O){let{sc:e,startAngle:i,endAngle:r}=t.getParsedAngle();(0,u.Wn)(r-i)<u.f7-u.Ho&&(D=e||0,h.startAngle-=D,h.endAngle-=D)}let P=!1,{isFullStroke:I,stroke:R}=(0,f.Dn)(c);if(A||I){e.beginPath(),(0,v.Eg)(t,e,i,r,M,B),P=!0,e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,A,k,x,S,l,s,a,o);let n=()=>{A&&(a?a(e,t.attribute,l):x&&(e.setCommonStyle(t,t.attribute,p-i,g-r,l),e.fill()))},h=()=>{k&&I&&(o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,p-i,g-r,l),e.stroke()))};_?(h(),n()):(n(),h())}if(!I&&k&&(e.beginPath(),(0,v.Eg)(t,e,i,r,M,B,R),P||this.beforeRenderStep(t,e,i,r,A,k,x,S,l,s,a,o),o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,i,r,l),e.stroke())),((0,d.Z)(T)&&T||T[1])&&E){let{startAngle:n,endAngle:h}=t.getParsedAngle();if((0,u.Wn)(h-n)>=u.f7-u.Ho){e.beginPath();let n=Math.abs(M-B)/2/M,{endAngle:h=l.endAngle,fill:u=l.fill}=t.attribute;this.drawArcTailCapPath(t,e,i,r,M,B,h,h+n),P||this.beforeRenderStep(t,e,i,r,A,k,x,S,l,s,a,o),(()=>{if(A&&"conical"===u.gradient){let s=(0,y.MB)(0,0,h,u);a||v.Bv&&(e.setCommonStyle(t,t.attribute,i,r,l),e.fillStyle=s,e.fill())}})(),k&&(o||S&&(e.setStrokeStyle(t,t.attribute,i,r,l),e.stroke()))}}this.afterRenderStep(t,e,i,r,A,k,x,S,l,s,a,o),O&&(h.startAngle+=D,h.endAngle+=D)}draw(t,e,i,r){let s=(0,m.gh)(t,null==r?void 0:r.theme).arc;this._draw(t,s,!1,i,r)}};B=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),M(0,(0,p.f)(l.Qc)),M(0,(0,g.t)(_.OL)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],B);var D=i(4481);let O=!1,P=new h.n(t=>{O||(O=!0,t(B).toSelf().inSingletonScope(),t(D.Xe).to(B).inSingletonScope(),t(D.uz).toService(D.Xe),t(_.OL).toService(A.Sg),(0,l.yb)(t,_.OL))});var I=i(1671),R=i(1335);let L=class extends R.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=b.r_}};L=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(r=(0,p.f)(D.Xe),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],L);var F=i(479);let j=!1,Z=new h.n((t,e,i,r)=>{j||(j=!0,t(F.e_).to(L).inSingletonScope(),t(F.EL).toService(F.e_))}),H=class extends R.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=b.r_}};H=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(s=(0,p.f)(D.Xe),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],H);let N=!1,z=new h.n((t,e,i,r)=>{N||(N=!0,t(F.t3).to(H).inSingletonScope(),t(F.XN).toService(F.t3))});function V(){V.__loaded||(V.__loaded=!0,a.i.RegisterGraphicCreator("arc",n.Q),o.n.load(P),o.n.load(I.X?Z:z))}V.__loaded=!1;let U=V},3483:function(t,e,i){"use strict";i.d(e,{d:()=>B});var r,s,n=i(4951),a=i(7578),o=i(6480),l=i(8906),h=i(8429),u=i(98),d=i(623),c=i(3482),p=i(6401),g=i(4481);let m=!1,f=new h.n(t=>{m||(m=!0,t(u.j).toSelf().inSingletonScope(),t(g.Gs).to(u.j).inSingletonScope(),t(g.uz).toService(g.Gs),t(c.Gq).toService(d.Sg),(0,l.yb)(t,c.Gq),t(p.K).toSelf().inSingletonScope())});var v=i(1671),y=i(479),_=i(1749),b=i(7428),x=i(1600),S=i(1335);let A=class extends S.o{constructor(t){super(),this.canvasRenderer=t,this.type="area",this.numberType=_.Ri}};A=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,b.b)(),(r=(0,x.f)(g.Gs),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],A);let k=!1,w=new h.n((t,e,i,r)=>{k||(k=!0,t(y.CV).to(A).inSingletonScope(),t(y.EL).toService(y.CV))}),C=class extends S.o{constructor(t){super(),this.canvasRenderer=t,this.type="area",this.numberType=_.Ri}};C=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,b.b)(),(s=(0,x.f)(g.Gs),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],C);let T=!1,E=new h.n((t,e,i,r)=>{T||(T=!0,t(y.$Y).to(C).inSingletonScope(),t(y.XN).toService(y.$Y))});function M(){M.__loaded||(M.__loaded=!0,a.i.RegisterGraphicCreator("area",n.n),o.n.load(f),o.n.load(v.X?w:E))}M.__loaded=!1;let B=M},9367:function(t,e,i){"use strict";i.d(e,{M:()=>a});var r=i(411),s=i(7578);function n(){n.__loaded||(n.__loaded=!0,s.i.RegisterGraphicCreator("group",r.sS))}n.__loaded=!1;let a=n},4437:function(t,e,i){"use strict";i.d(e,{i:()=>z});var r,s=i(5512),n=i(7578),a=i(6480),o=i(8906),l=i(8429),h=i(623),u=i(3482),d=i(7428),c=i(1600),p=i(7089),g=i(8535),m=i(1749),f=i(7636),v=i(9904),y=i(6490),_=i(9292),b=i(3872),x=i(8792);class S extends x.sH{constructor(){super(...arguments),this.time=b.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d){return super.drawShape(t,e,i,r,s,n,a,o,l,h,u,d)}}let A=new S,k=h.R6;var w=i(9156),C=function(t,e){return function(i,r){e(i,r,t)}};let T=["","repeat-x","repeat-y","repeat"],E=class extends _.Y{constructor(t){super(),this.imageRenderContribitions=t,this.numberType=m.PN,this.builtinContributions=[A,k],this.init(t)}drawShape(t,e,i,r,s,n,a,o){let l=(0,g.gh)(t).image,{repeatX:h=l.repeatX,repeatY:u=l.repeatY,x:d=l.x,y:c=l.y,cornerRadius:p=l.cornerRadius,fillStrokeOrder:m=l.fillStrokeOrder,cornerType:v=l.cornerType,image:_}=t.attribute,b=this.valid(t,l,a);if(!b)return;let{fVisible:x,sVisible:S,doFill:A,doStroke:k}=b;if(!_||!t.resources)return;let w=t.resources.get(_);if("success"!==w.state)return;let C=t.width,E=t.height;e.beginPath();let M=!1;0===p||(0,f.Z)(p)&&p.every(t=>0===t)?e.rect(i,r,C,E):((0,y.U)(e,i,r,C,E,p,"bevel"!==v),M=!0),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l);let B=()=>{if(A){if(a)a(e,t.attribute,l);else if(x){e.setCommonStyle(t,t.attribute,i,r,l);let s=0;if("repeat"===h&&(s|=1),"repeat"===u&&(s|=2),s){let t=e.createPattern(w.data,T[s]);e.fillStyle=t,e.translate(i,r,!0),e.fillRect(0,0,C,E),e.translate(-i,-r,!0)}else e.drawImage(w.data,i,r,C,E)}}},D=()=>{k&&(o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,d-i,c-r,l),e.stroke()))};m?(D(),M&&(e.save(),e.clip()),this.beforeRenderStep(t,e,i,r,A,!1,x,!1,l,s,a),B(),M&&e.restore()):(M&&(e.save(),e.clip()),this.beforeRenderStep(t,e,i,r,A,!1,x,!1,l,s,a),B(),M&&e.restore(),D()),this.afterRenderStep(t,e,i,r,A,!1,x,!1,l,s,a)}draw(t,e,i){let{image:r}=t.attribute;if(!r||!t.resources)return;let s=t.resources.get(r);if("loading"===s.state&&(0,v.Z)(r))return void w.h.improveImageLoading(r);if("success"!==s.state)return;let{context:n}=e.drawParams;if(!n)return;let a=(0,g.gh)(t).image;this._draw(t,a,!1,i)}};E=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),C(0,(0,c.f)(o.Qc)),C(0,(0,p.t)(u.JO)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],E);var M=i(4481);let B=!1,D=new l.n(t=>{B||(B=!0,t(M.e0).to(E).inSingletonScope(),t(M.uz).toService(M.e0),t(u.JO).toService(h.Sg),(0,o.yb)(t,u.JO))});var O=i(1671),P=i(479),I=i(1335);let R=class extends I.o{constructor(t){super(),this.canvasRenderer=t,this.type="image",this.numberType=m.PN}};R=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),(r=(0,c.f)(M.e0),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],R);let L=!1,F=new l.n((t,e,i,r)=>{L||(L=!0,t(P.Rz).to(R).inSingletonScope(),t(P.EL).toService(P.Rz))});var j=i(873);let Z=!1,H=new l.n((t,e,i,r)=>{Z||(Z=!0,t(P.cs).to(j.Z).inSingletonScope(),t(j.Z).toService(P.cs))});function N(){N.__loaded||(N.__loaded=!0,n.i.RegisterGraphicCreator("image",s.B),a.n.load(D),a.n.load(O.X?F:H))}N.__loaded=!1;let z=N},9536:function(t,e,i){"use strict";i.d(e,{N:()=>E});var r,s,n=i(7004),a=i(7578),o=i(6480),l=i(8429),h=i(7999),u=i(1132),d=i(4481);let c=!1,p=new l.n(t=>{c||(c=!0,t(u.X).toSelf().inSingletonScope(),t(h.U).toSelf().inSingletonScope(),t(d.O).to(u.X).inSingletonScope(),t(d.uz).toService(d.O))});var g=i(1671),m=i(479),f=i(1749),v=i(7428),y=i(1600),_=i(1434);let b=class extends _.Q{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};b=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,v.b)(),(r=(0,y.f)(d.O),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],b);let x=!1,S=new l.n((t,e,i,r)=>{x||(x=!0,t(m.ES).to(b).inSingletonScope(),t(m.EL).toService(m.ES))});var A=i(1335);let k=class extends A.o{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};k=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,v.b)(),(s=(0,y.f)(d.O),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],k);let w=!1,C=new l.n((t,e,i,r)=>{w||(w=!0,t(m.g2).to(k).inSingletonScope(),t(m.XN).toService(m.g2))});function T(){T.__loaded||(T.__loaded=!0,a.i.RegisterGraphicCreator("line",n.W),o.n.load(p),o.n.load(g.X?S:C))}T.__loaded=!1;let E=T},1369:function(t,e,i){"use strict";i.d(e,{N:()=>F});var r,s,n=i(4051),a=i(7578),o=i(6480),l=i(8906),h=i(8429),u=i(623),d=i(3482),c=i(7428),p=i(1600),g=i(7089),m=i(5399),f=i(8535),v=i(1749),y=i(9292);let _=i(6936).H,b=u.R6;var x=function(t,e){return function(i,r){e(i,r,t)}};let S=class extends y.Y{constructor(t){super(),this.pathRenderContribitions=t,this.numberType=v.qm,this.builtinContributions=[b,_],this.init(t)}drawShape(t,e,i,r,s,n,a,o){var l,h,u;let d=null!==(l=this.tempTheme)&&void 0!==l?l:(0,f.gh)(t,null==n?void 0:n.theme).path,{x:c=d.x,y:p=d.y,fillStrokeOrder:g=d.fillStrokeOrder}=t.attribute,v=null!==(h=this.z)&&void 0!==h?h:0,y=this.valid(t,d,a,o);if(!y)return;let{fVisible:_,sVisible:b,doFill:x,doStroke:S}=y;if(e.beginPath(),t.pathShape)(0,m.h)(t.pathShape.commandList,e,i,r,1,1,v);else{let s=null!==(u=t.attribute.path)&&void 0!==u?u:d.path;(0,m.h)(s.commandList,e,i,r,1,1,v)}e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,d),this.beforeRenderStep(t,e,i,r,x,S,_,b,d,s,a,o);let A=()=>{S&&(o?o(e,t.attribute,d):b&&(e.setStrokeStyle(t,t.attribute,c-i,p-r,d),e.stroke()))},k=()=>{x&&(a?a(e,t.attribute,d):_&&(e.setCommonStyle(t,t.attribute,c-i,p-r,d),e.fill()))};g?(A(),k()):(k(),A()),this.afterRenderStep(t,e,i,r,x,S,_,b,d,s,a,o)}draw(t,e,i,r){let s=(0,f.gh)(t,null==r?void 0:r.theme).path;this.tempTheme=s,this._draw(t,s,!1,i,r),this.tempTheme=null}};S=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),x(0,(0,p.f)(l.Qc)),x(0,(0,g.t)(d.Mj)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);var A=i(4481);let k=!1,w=new h.n(t=>{k||(k=!0,t(S).toSelf().inSingletonScope(),t(A.lG).to(S).inSingletonScope(),t(A.uz).toService(A.lG),t(d.Mj).toService(u.Sg),(0,l.yb)(t,d.Mj))});var C=i(1671),T=i(479),E=i(1434);let M=class extends E.Q{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=v.qm}};M=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(r=(0,p.f)(A.lG),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],M);let B=!1,D=new h.n((t,e,i,r)=>{B||(B=!0,t(T.ks).to(M).inSingletonScope(),t(T.EL).toService(T.ks))});var O=i(1335);let P=class extends O.o{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=v.qm}};P=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(s=(0,p.f)(A.lG),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],P);let I=!1,R=new h.n((t,e,i,r)=>{I||(I=!0,t(T.Ex).to(P).inSingletonScope(),t(T.XN).toService(T.Ex))});function L(){L.__loaded||(L.__loaded=!0,a.i.RegisterGraphicCreator("path",n.E),o.n.load(w),o.n.load(C.X?D:R))}L.__loaded=!1;let F=L},4914:function(t,e,i){"use strict";i.d(e,{M:()=>Z});var r,s,n=i(7795),a=i(7578),o=i(6480),l=i(8906),h=i(8429),u=i(623),d=i(3482),c=i(7636),p=i(7428),g=i(1600),m=i(7089),f=i(8535),v=i(1749);function y(t,e,i,r){t.moveTo(e[0].x+i,e[0].y+r);for(let s=1;s<e.length;s++)t.lineTo(e[s].x+i,e[s].y+r)}function _(t,e){return Math.sqrt(t*t+e*e)}function b(t,e,i,r,s){let n=e/i;return{x:t.x-r*n,y:t.y-s*n}}var x=i(9292);let S=i(6936).H,A=u.R6;var k=function(t,e){return function(i,r){e(i,r,t)}};let w=class extends x.Y{constructor(t){super(),this.polygonRenderContribitions=t,this.numberType=v.Kh,this.builtinContributions=[A,S],this.init(t)}drawShape(t,e,i,r,s,n,a,o){let l=(0,f.gh)(t,null==n?void 0:n.theme).polygon,{points:h=l.points,cornerRadius:u=l.cornerRadius,x:d=l.x,y:p=l.y,closePath:g=l.closePath,fillStrokeOrder:m=l.fillStrokeOrder}=t.attribute,v=this.valid(t,l,a,o);if(!v)return;let{fVisible:x,sVisible:S,doFill:A,doStroke:k}=v;e.beginPath(),u<=0||(0,c.Z)(u)&&u.every(t=>0===t)?y(e.camera?e:e.nativeContext,h,i,r):function(t,e,i,r,s,n=!0){var a;if(e.length<3)return void y(t,e,i,r);let o=0,l=e.length-1;n||(o+=1,l-=1,t.moveTo(e[0].x+i,e[0].y+r));for(let n=o;n<=l;n++){let o=e[0===n?l:(n-1)%e.length],h=e[n%e.length],u=e[(n+1)%e.length],d=h.x-o.x,c=h.y-o.y,p=h.x-u.x,g=h.y-u.y,m=Math.abs(Math.tan((Math.atan2(c,d)-Math.atan2(g,p))/2)),f=Array.isArray(s)?null!==(a=s[n%e.length])&&void 0!==a?a:0:s,v=f/m,y=_(d,c),x=_(p,g),S=Math.min(y,x);v>S&&(v=S,f=S*m);let A=b(h,v,y,d,c),k=b(h,v,x,p,g),w=2*h.x-A.x-k.x,C=2*h.y-A.y-k.y,T=_(w,C),E=b(h,_(v,f),T,w,C),M=Math.atan2(A.y-E.y,A.x-E.x),B=Math.atan2(k.y-E.y,k.x-E.x),D=B-M;D<0&&(M=B,D=-D),D>Math.PI&&(D-=Math.PI),0===n?t.moveTo(A.x+i,A.y+r):t.lineTo(A.x+i,A.y+r),D&&t.arcTo(h.x+i,h.y+r,k.x+i,k.y+r,f),t.lineTo(k.x+i,k.y+r)}n||t.lineTo(e[l+1].x+i,e[l+1].y+r)}(e.camera?e:e.nativeContext,h,i,r,u,g),g&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,A,k,x,S,l,s,a,o);let w=()=>{A&&(a?a(e,t.attribute,l):x&&(e.setCommonStyle(t,t.attribute,d-i,p-r,l),e.fill()))},C=()=>{k&&(o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,d-i,p-r,l),e.stroke()))};m?(C(),w()):(w(),C()),this.afterRenderStep(t,e,i,r,A,k,x,S,l,s,a,o)}draw(t,e,i,r){let s=(0,f.gh)(t,null==r?void 0:r.theme).polygon;this._draw(t,s,!1,i,r)}};w=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),k(0,(0,g.f)(l.Qc)),k(0,(0,m.t)(d.U7)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],w);var C=i(4481);let T=!1,E=new h.n(t=>{T||(T=!0,t(C.ZT).to(w).inSingletonScope(),t(C.uz).toService(C.ZT),t(d.U7).toService(u.Sg),(0,l.yb)(t,d.U7))});var M=i(1671),B=i(479),D=i(1335);let O=class extends D.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=v.Kh}};O=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(r=(0,g.f)(C.ZT),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],O);let P=!1,I=new h.n((t,e,i,r)=>{P||(P=!0,t(B.ww).to(O).inSingletonScope(),t(B.EL).toService(B.ww))}),R=class extends D.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=v.Kh}};R=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(s=(0,g.f)(C.ZT),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],R);let L=!1,F=new h.n((t,e,i,r)=>{L||(L=!0,t(B.uV).to(R).inSingletonScope(),t(B.XN).toService(B.uV))});function j(){j.__loaded||(j.__loaded=!0,a.i.RegisterGraphicCreator("polygon",n.p),o.n.load(E),o.n.load(M.X?I:F))}j.__loaded=!1;let Z=j},7307:function(t,e,i){"use strict";i.d(e,{k:()=>N});var r,s,n=i(5385),a=i(7578),o=i(6480),l=i(8906),h=i(8429),u=i(8792),d=i(623),c=i(3482),p=i(7636),g=i(7428),m=i(1600),f=i(7089),v=i(8535),y=i(1749),_=i(6490),b=i(6003),x=i(9292),S=function(t,e){return function(i,r){e(i,r,t)}};let A=class extends x.Y{constructor(t){super(),this.rectRenderContribitions=t,this.type="rect",this.numberType=y._u,this.builtinContributions=[u.NB,u.gq,u.k7],this.init(t)}drawShape(t,e,i,r,s,n,a,o){var l;let h=null!==(l=this.tempTheme)&&void 0!==l?l:(0,v.gh)(t,null==n?void 0:n.theme).rect,{fill:u=h.fill,background:d,stroke:c=h.stroke,cornerRadius:g=h.cornerRadius,cornerType:m=h.cornerType,opacity:f=h.opacity,fillOpacity:y=h.fillOpacity,lineWidth:x=h.lineWidth,strokeOpacity:S=h.strokeOpacity,visible:A=h.visible,x1:k,y1:w,x:C=h.x,y:T=h.y,fillStrokeOrder:E=h.fillStrokeOrder}=t.attribute,{width:M,height:B}=t.attribute;M=(null!=M?M:k-C)||0,B=(null!=B?B:w-T)||0;let D=(0,b.GT)(f,y,M,B,u),O=(0,b.Ze)(f,S,M,B),P=(0,b.dz)(u,d),I=(0,b.ak)(c,x);if(!t.valid||!A||!P&&!I||!(D||O||a||o||d))return;0===g||(0,p.Z)(g)&&g.every(t=>0===t)?(e.beginPath(),e.rect(i,r,M,B)):(e.beginPath(),(0,_.U)(e,i,r,M,B,g,"bevel"!==m));let R={doFill:P,doStroke:I};e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,i,r,P,I,D,O,h,s,a,o,R);let L=()=>{R.doFill&&(a?a(e,t.attribute,h):D&&(e.setCommonStyle(t,t.attribute,C-i,T-r,h),e.fill()))},F=()=>{R.doStroke&&(o?o(e,t.attribute,h):O&&(e.setStrokeStyle(t,t.attribute,C-i,T-r,h),e.stroke()))};E?(F(),L()):(L(),F()),this.afterRenderStep(t,e,i,r,P,I,D,O,h,s,a,o)}draw(t,e,i,r){let s=(0,v.gh)(t,null==r?void 0:r.theme).rect;this.tempTheme=s,this._draw(t,s,!1,i,r),this.tempTheme=null}};A=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,g.b)(),S(0,(0,m.f)(l.Qc)),S(0,(0,f.t)(c.d5)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],A);var k=i(4481);let w=!1,C=new h.n(t=>{w||(w=!0,t(A).toSelf().inSingletonScope(),t(k.Uj).to(A).inSingletonScope(),t(k.uz).toService(k.Uj),t(u.Er).toSelf(),t(u.d4).toSelf(),t(c.d5).toService(u.Er),t(c.d5).toService(u.d4),t(c.d5).toService(d.Sg),(0,l.yb)(t,c.d5))});var T=i(1671),E=i(479),M=i(7393),B=i(1601),D=i(3116);let O=new M.FB;class P{constructor(){this.type="rect",this.numberType=y._u}contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let s=t.getGraphicTheme(),{cornerRadius:n=s.cornerRadius}=t.attribute,{x:a=s.x,y:o=s.y}=t.attribute;r.highPerformanceSave();let l=!0;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(s);a+=e.x,o+=e.y,r.setTransformForCurrent()}else a=0,o=0,l=!1,r.transformFromMatrix(t.transMatrix,!0);let h=!0;if(!l||t.shadowRoot||(0,B.Z)(n,!0)&&0!==n||(0,p.Z)(n)&&n.some(t=>0!==t))h=!1,this.canvasRenderer.drawShape(t,r,a,o,{},null,(t,i,r)=>!!h||(h=t.isPointInPath(e.x,e.y)),(t,i,s)=>{if(h)return!0;let n=i.lineWidth||s.lineWidth,a=i.pickStrokeBuffer||s.pickStrokeBuffer,o=i.keepStrokeScale||s.keepStrokeScale;return r.lineWidth=o?n+a:(0,D.D)(r,n+a,r.dpr),h=t.isPointInStroke(e.x,e.y)});else{let{fill:i=s.fill,stroke:r=s.stroke,lineWidth:n=s.lineWidth}=t.attribute;if(i)h=!0;else if(r){let i=t.AABBBounds;O.setValue(i.x1,i.y1,i.x2,i.y2),O.expand(-n/2),h=!O.containsPoint(e)}}return r.highPerformanceRestore(),h}}let I=class extends P{constructor(t){super(),this.canvasRenderer=t}};I=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,g.b)(),(r=(0,m.f)(k.Uj),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],I);let R=!1,L=new h.n((t,e,i,r)=>{R||(R=!0,t(E.TF).to(I).inSingletonScope(),t(E.EL).toService(E.TF))}),F=class extends P{constructor(t){super(),this.canvasRenderer=t}};F=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,g.b)(),(s=(0,m.f)(k.Uj),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],F);let j=!1,Z=new h.n((t,e,i,r)=>{j||(j=!0,t(E.nb).to(F).inSingletonScope(),t(E.XN).toService(E.nb))});function H(){H.__loaded||(H.__loaded=!0,a.i.RegisterGraphicCreator("rect",n.f),o.n.load(C),o.n.load(T.X?L:Z))}H.__loaded=!1;let N=H},4683:function(t,e,i){"use strict";i.d(e,{v:()=>M});var r,s=i(1636),n=i(7578),a=i(6480),o=i(8429),l=i(7428),h=i(6490),u=i(8535),d=i(1749),c=i(6003),p=i(9292),g=i(4033);let m=class extends p.Y{constructor(){super(),this.numberType=d.$M,this.builtinContributions=[g.C],this.init()}drawShape(t,e,i,r,s){let n=(0,u.gh)(t).richtext,{strokeOpacity:a=n.strokeOpacity,opacity:o=n.opacity,fillOpacity:l=n.fillOpacity,visible:h=n.visible}=t.attribute;if(!t.valid||!h)return;let d=(0,c.Bv)(o,l,!0),p=(0,c.Bv)(o,a,!0);d&&(e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,n),e.translate(i,r),this.beforeRenderStep(t,e,i,r,d,p,d,p,n,s),t.getFrameCache().draw(e,this.drawIcon),this.afterRenderStep(t,e,i,r,d,p,d,p,n,s))}drawIcon(t,e,i,r,s){var n;let a=(0,u.gh)(t).richtextIcon,{width:o=a.width,height:l=a.height,opacity:d=a.opacity,image:c,backgroundFill:p=a.backgroundFill,backgroundFillOpacity:g=a.backgroundFillOpacity,backgroundStroke:m=a.backgroundStroke,backgroundStrokeOpacity:f=a.backgroundStrokeOpacity,backgroundRadius:v=a.backgroundRadius,margin:y}=t.attribute,{backgroundWidth:_=o,backgroundHeight:b=l}=t.attribute;if(y&&(i+=t._marginArray[3],r+=t._marginArray[0]),t._hovered){let t=(_-o)/2,s=(b-l)/2;0===v?(e.beginPath(),e.rect(i-t,r-s,_,b)):(e.beginPath(),(0,h.U)(e,i-t,r-s,_,b,v,!0)),p&&(e.globalAlpha=g,e.fillStyle=p,e.fill()),m&&(e.globalAlpha=f,e.strokeStyle=m,e.stroke())}let x=c&&(null===(n=null==t?void 0:t.resources)||void 0===n?void 0:n.get(c));x&&"success"===x.state&&(e.globalAlpha=d,e.drawImage(x.data,i,r,o,l))}draw(t,e,i){let r=(0,u.gh)(t).richtext;this._draw(t,r,!1,i)}};m=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],m);var f=i(4481);let v=!1,y=new o.n(t=>{v||(v=!0,t(f.fS).to(m).inSingletonScope(),t(f.uz).toService(f.fS))});var _=i(1671),b=i(479),x=i(1600);let S=class{constructor(t){this.canvasRenderer=t,this.type="richtext",this.numberType=d.$M}contains(t,e,i){return!!t.AABBBounds.containsPoint(e)}};S=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),(r=(0,x.f)(f.fS),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);let A=!1,k=new o.n((t,e,i,r)=>{A||(A=!0,t(b.ZY).to(S).inSingletonScope(),t(b.EL).toService(b.ZY))});var w=i(873);let C=!1,T=new o.n((t,e,i,r)=>{C||(C=!0,t(b.cs).to(w.Z).inSingletonScope(),t(w.Z).toService(b.cs))});function E(){E.__loaded||(E.__loaded=!0,n.i.RegisterGraphicCreator("richtext",s.p),a.n.load(y),a.n.load(_.X?k:T))}E.__loaded=!1;let M=E},489:function(t,e,i){"use strict";i.d(e,{k:()=>V});var r,s,n=i(5196),a=i(7578),o=i(6480),l=i(8906),h=i(8429),u=i(623),d=i(3482),c=i(4481),p=i(7428),g=i(1600),m=i(7089),f=i(8535),v=i(1749),y=i(9292),_=i(7636),b=i(3116),x=i(3872),S=i(6936);let A=new class{constructor(){this.time=x.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d){let c=t.getParsedPath();if(!c)return;let{outerBorder:p,innerBorder:g}=t.attribute,m=p&&!1!==p.visible,f=g&&!1!==g.visible;if(!m&&!f)return;let{size:v=l.size,opacity:y=l.opacity,x:_=l.x,y:x=l.y,scaleX:S=l.scaleX,scaleY:A=l.scaleY,keepStrokeScale:k=l.keepStrokeScale}=t.attribute,w=(s,n)=>{let a=!(!s||!s.stroke),{distance:o=l[n].distance}=s,h=k?o:(0,b.D)(e,o,e.dpr);if(e.beginPath(),!1===c.drawOffset(e,v,i,r,("outerBorder"===n?1:-1)*h)&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),d)d(e,s,l[n]);else if(a){let a=l[n].opacity;l[n].opacity=y,e.setStrokeStyle(t,s,(_-i)/S,(x-r)/A,l[n]),l[n].opacity=a,e.stroke()}};m&&w(p,"outerBorder"),f&&w(g,"innerBorder")}},k=new class{constructor(){this.time=x.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,s,n,a,o,l,h,u,d,c){let{clipRange:p=l.clipRange,x:g=l.x,y:m=l.y,z:f=l.z,size:v=l.size,scaleX:y=l.scaleX,scaleY:_=l.scaleY}=t.attribute,b=t.getParsedPath();b&&p<1&&p>0&&(e.beginPath(),b.drawWithClipRange&&b.drawWithClipRange(e,v,i,r,p,f,(s,n)=>{var a,h,u,c;if(t._parsedPath.svgCache){let e=Object.assign({},n);e.fill=null!==(a=n.fill)&&void 0!==a?a:t.attribute.fill,e.opacity=null!==(h=n.opacity)&&void 0!==h?h:t.attribute.opacity,e.fillOpacity=t.attribute.fillOpacity,e.stroke=null!==(u=n.stroke)&&void 0!==u?u:t.attribute.stroke,e.lineWidth=null!==(c=n.lineWidth)&&void 0!==c?c:t.attribute.lineWidth,n=e}n.stroke&&(d?d(e,t.attribute,l):o&&(e.setStrokeStyle(t,n,(g-i)/y,(m-r)/_,l),e.stroke()))}),n&&!b.isSvg&&(d?d(e,t.attribute,l):o&&(e.setStrokeStyle(t,t.attribute,(g-i)/y,(m-r)/_,l),e.stroke())))}},w=S.H,C=u.R6;var T=function(t,e){return function(i,r){e(i,r,t)}};let E=class extends y.Y{constructor(t){super(),this.symbolRenderContribitions=t,this.numberType=v.B5,this.builtinContributions=[A,C,w,k],this.init(t)}drawShape(t,e,i,r,s,n,a,o){var l;let h=(0,f.gh)(t,null==n?void 0:n.theme).symbol,{size:u=h.size,x:d=h.x,y:c=h.y,scaleX:p=h.scaleX,scaleY:g=h.scaleY,fillStrokeOrder:m=h.fillStrokeOrder,clipRange:v=h.clipRange}=t.attribute,y=this.valid(t,h,a,o);if(!y)return;let{fVisible:b,sVisible:x,doFill:S,doStroke:A}=y,k=t.getParsedPath();if(!k)return;let{keepDirIn3d:w=h.keepDirIn3d}=t.attribute,C=null!==(l=this.z)&&void 0!==l?l:0;e.beginPath();let T=i,E=r,M=C,B=e.camera;if(w&&B&&e.project){let t=e.project(i,r,C);e.camera=null,(0,_.Z)(u)&&(u[0],u[1]),T=t.x,E=t.y,M=void 0}!1===k.draw(e,u,T,E,M,(s,n)=>{var l,u,f,y;if(t._parsedPath.svgCache){let e=Object.assign({},n);e.fill=null!==(l=n.fill)&&void 0!==l?l:t.attribute.fill,e.opacity=null!==(u=n.opacity)&&void 0!==u?u:t.attribute.opacity,e.fillOpacity=t.attribute.fillOpacity,e.stroke=null!==(f=n.stroke)&&void 0!==f?f:t.attribute.stroke,e.lineWidth=null!==(y=n.lineWidth)&&void 0!==y?y:t.attribute.lineWidth,n=e}let _=()=>{n.fill&&(a?a(e,t.attribute,h):(e.setCommonStyle(t,n,d-i,c-r,h),e.fill()))},b=()=>{n.stroke&&(o?o(e,t.attribute,h):x&&v>=1&&(e.setStrokeStyle(t,n,(d-i)/p,(c-r)/g,h),e.stroke()))};m?(b(),_()):(_(),b())})&&e.closePath(),e.camera=B,e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,i,r,S,A,b,x,h,s,a,o);let D=()=>{S&&!k.isSvg&&(a?a(e,t.attribute,h):b&&(e.setCommonStyle(t,t.attribute,d-i,c-r,h),e.fill()))},O=()=>{A&&!k.isSvg&&(o?o(e,t.attribute,h):x&&v>=1&&(e.setStrokeStyle(t,t.attribute,(d-i)/p,(c-r)/g,h),e.stroke()))};m?(O(),D()):(D(),O()),this.afterRenderStep(t,e,i,r,S,A,b,x,h,s,a,o)}draw(t,e,i,r){let s=(0,f.gh)(t,null==r?void 0:r.theme).symbol;this._draw(t,s,!1,i,r)}};E=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),T(0,(0,g.f)(l.Qc)),T(0,(0,m.t)(d.X3)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],E);let M=!1,B=new h.n(t=>{M||(M=!0,t(E).toSelf().inSingletonScope(),t(c.tP).to(E).inSingletonScope(),t(c.uz).toService(c.tP),t(d.X3).toService(u.Sg),(0,l.yb)(t,d.X3))});var D=i(1671),O=i(479),P=i(8113),I=i(4021);let R=class extends I.D{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=v.B5}contains(t,e,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let s=t.getParsedPath();if(!r.camera){if(!t.AABBBounds.containsPoint(e))return!1;if(s.isSvg||"imprecise"===t.attribute.pickMode)return!0}r.highPerformanceSave();let n=t.getGraphicTheme(),{x:a,y:o,z:l,lastModelMatrix:h}=this.transform(t,n,r),u=e;if(r.camera){u=e.clone();let i=t.parent.globalTransMatrix;u.x=i.a*e.x+i.c*e.y+i.e,u.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=l;let d=!1;return this.canvasRenderer.drawShape(t,r,a,o,{},null,(t,e,i)=>!!d||(d=t.isPointInPath(u.x,u.y)),(t,e,i)=>{if(d)return!0;let s=e.lineWidth||i.lineWidth,n=e.pickStrokeBuffer||i.pickStrokeBuffer,a=e.keepStrokeScale||i.keepStrokeScale;return r.lineWidth=a?s+n:(0,b.D)(r,s+n,r.dpr),d=t.isPointInStroke(u.x,u.y)}),this.canvasRenderer.z=0,r.modelMatrix!==h&&P.yp.free(r.modelMatrix),r.modelMatrix=h,r.highPerformanceRestore(),d}};R=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(r=(0,g.f)(c.tP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],R);let L=!1,F=new h.n((t,e,i,r)=>{L||(L=!0,t(O.RC).to(R).inSingletonScope(),t(O.EL).toService(O.RC))});var j=i(1335);let Z=class extends j.o{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=v.B5}};Z=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(s=(0,g.f)(c.tP),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],Z);let H=!1,N=new h.n((t,e,i,r)=>{H||(H=!0,t(O.Yr).to(Z).inSingletonScope(),t(O.XN).toService(O.Yr))});function z(){z.__loaded||(z.__loaded=!0,a.i.RegisterGraphicCreator("symbol",n.t),o.n.load(B),o.n.load(D.X?F:N))}z.__loaded=!1;let V=z},5757:function(t,e,i){"use strict";i.d(e,{g:()=>j});var r,s=i(2875),n=i(7578),a=i(6480),o=i(8906),l=i(8429),h=i(623),u=i(3482),d=i(4481),c=i(7428),p=i(1600),g=i(7089),m=i(8535),f=i(1749),v=i(5575),y=i(9292),_=i(8113),b=i(8103),x=i(6082),S=i(3386),A=i(4033),k=function(t,e){return function(i,r){e(i,r,t)}};let w=class extends y.Y{constructor(t){super(),this.textRenderContribitions=t,this.numberType=f.Us,this.builtinContributions=[A.C],this.init(t)}drawShape(t,e,i,r,s,n,a,o){var l,h,u;let d=(0,m.gh)(t,null==n?void 0:n.theme).text,{text:c,underline:p=d.underline,lineThrough:g=d.lineThrough,keepDirIn3d:f=d.keepDirIn3d,direction:v=d.direction,fontSize:y=d.fontSize,verticalMode:x=d.verticalMode,x:A=d.x,y:k=d.y}=t.attribute,w=null!==(l=(0,S.VA)(t.attribute.lineHeight,y))&&void 0!==l?l:y,C=this.valid(t,d,a,o);if(!C)return;let{fVisible:T,sVisible:E,doFill:M,doStroke:B}=C,D=!f,O=this.z||0;e.beginPath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,d),this.beforeRenderStep(t,e,i,r,M,B,T,E,d,s,a,o),D&&this.transformUseContext2d(t,d,O,e);let P=(s,n,l,h)=>{let u=i+n,c=r+l;if(h){e.highPerformanceSave(),u+=y;let t=_.QE.allocate(1,0,0,1,0,0);t.rotateByCenter(Math.PI/2,u,c),e.transformFromMatrix(t,!0),_.QE.free(t)}B&&(o?o(e,t.attribute,d):E&&(e.setStrokeStyle(t,t.attribute,A-i,k-r,d),e.strokeText(s,u,c,O))),M&&(a?a(e,t.attribute,d):T&&(e.setCommonStyle(t,t.attribute,A-i,k-r,d),e.fillText(s,u,c,O))),h&&(e.highPerformanceRestore(),e.setTransformForCurrent())};if(e.setTextStyleWithoutAlignBaseline(t.attribute,d,O),"horizontal"===v){let{multilineLayout:s}=t;if(!s)return void e.highPerformanceRestore();let{xOffset:n,yOffset:l}=s.bbox;B&&(o?o(e,t.attribute,d):E&&(e.setStrokeStyle(t,t.attribute,A-i,k-r,d),s.lines.forEach(t=>{e.strokeText(t.str,(t.leftOffset||0)+n+i,(t.topOffset||0)+l+r,O)}))),M&&(a?a(e,t.attribute,d):T&&(e.setCommonStyle(t,t.attribute,A-i,k-r,d),s.lines.forEach(s=>{e.fillText(s.str,(s.leftOffset||0)+n+i,(s.topOffset||0)+l+r,O),this.drawUnderLine(p,g,t,(s.leftOffset||0)+n+i,(s.topOffset||0)+l+r,s.descent,(s.descent-s.ascent)/2,O,d,e,{width:s.width})})))}else{let{textAlign:i=d.textAlign,textBaseline:r=d.textBaseline}=t.attribute;if(!x){let e=i;i=null!==(h=t.getBaselineMapAlign()[r])&&void 0!==h?h:"left",r=null!==(u=t.getAlignMapBaseline()[e])&&void 0!==u?u:"top"}t.tryUpdateAABBBounds();let{verticalList:s}=t.cache;e.textAlign="left",e.textBaseline="top";let n=w*s.length,a=0;s.forEach(t=>{let e=t.reduce((t,e)=>t+(e.width||0),0);a=(0,b.Fp)(e,a)});let o=0,l=0;"bottom"===r?l=-n:"middle"===r&&(l=-n/2),"center"===i?o-=a/2:"right"===i&&(o-=a),s.forEach((t,e)=>{let r=t.reduce((t,e)=>t+(e.width||0),0),s=a-r,h=o;"center"===i?h+=s/2:"right"===i&&(h+=s),t.forEach(t=>{let{text:i,width:r,direction:s}=t;P(i,n-(e+1)*w+l,h,s),h+=r})})}D&&this.restoreTransformUseContext2d(t,d,O,e),this.afterRenderStep(t,e,i,r,M,B,T,E,d,s,a,o)}draw(t,e,i,r){let s=(0,m.gh)(t,null==r?void 0:r.theme).text,{keepDirIn3d:n=s.keepDirIn3d}=t.attribute;this._draw(t,s,!n,i,r)}drawUnderLine(t,e,i,r,s,n,a,o,l,h,u){if(e+t<=0)return;let{textAlign:d=l.textAlign,fill:c=l.fill,opacity:p=l.opacity,underlineOffset:g=l.underlineOffset,underlineDash:m=l.underlineDash,fillOpacity:f=l.fillOpacity}=i.attribute,y=!(0,x.Z)(u),_=y?u.width:i.clipedWidth,b=y?0:(0,v.js)(d,_),S={lineWidth:0,stroke:c,opacity:p,strokeOpacity:f};if(t){S.lineWidth=t,h.setStrokeStyle(i,S,r,s,l),m&&h.setLineDash(m),h.beginPath();let e=s+n+g;h.moveTo(r+b,e,o),h.lineTo(r+b+_,e,o),h.stroke()}if(e){S.lineWidth=e,h.setStrokeStyle(i,S,r,s,l),h.beginPath();let t=s+a;h.moveTo(r+b,t,o),h.lineTo(r+b+_,t,o),h.stroke()}}};w=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),k(0,(0,p.f)(o.Qc)),k(0,(0,g.t)(u.$K)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],w);let C=!1,T=new l.n(t=>{C||(C=!0,t(d.EY).to(w).inSingletonScope(),t(d.uz).toService(d.EY),t(u.$K).toService(h.Sg),(0,o.yb)(t,u.$K))});var E=i(1671),M=i(479),B=i(4021);let D=class extends B.D{constructor(t){super(),this.canvasRenderer=t,this.type="text",this.numberType=f.Us}contains(t,e,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let s=t.AABBBounds;if(!r.camera)return!!s.containsPoint(e);r.highPerformanceSave();let n=t.getGraphicTheme(),{keepDirIn3d:a=n.keepDirIn3d}=t.attribute,{x:o,y:l,z:h,lastModelMatrix:u}=this.transform(t,n,r,!a);this.canvasRenderer.z=h;let d=e;if(r.camera){d=e.clone();let i=t.parent.globalTransMatrix;d.x=i.a*e.x+i.c*e.y+i.e,d.y=i.b*e.x+i.d*e.y+i.f}let c=!1;return this.canvasRenderer.drawShape(t,r,o,l,{},null,(e,i,r)=>{if(c)return!0;let{fontSize:s=n.fontSize,textBaseline:a=n.textBaseline,textAlign:u=n.textAlign}=t.attribute,p=t.AABBBounds,g=p.height(),m=p.width(),f=(0,v.nV)(a,g,s),y=(0,v.js)(u,m);return e.rect(y+o,f+l,m,g,h),c=e.isPointInPath(d.x,d.y)},(t,e,i)=>c),this.canvasRenderer.z=0,r.modelMatrix!==u&&_.yp.free(r.modelMatrix),r.modelMatrix=u,r.highPerformanceRestore(),c}};D=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(r=(0,p.f)(d.EY),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],D);let O=!1,P=new l.n((t,e,i,r)=>{O||(O=!0,t(M.Sp).to(D).inSingletonScope(),t(M.EL).toService(M.Sp))}),I=class{constructor(){this.type="text",this.numberType=f.Us}contains(t,e,i){return!!t.AABBBounds.containsPoint(e)}};I=function(t,e,i,r){var s,n=arguments.length,a=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(n<3?s(a):n>3?s(e,i,a):s(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)()],I);let R=!1,L=new l.n((t,e,i,r)=>{R||(R=!0,t(M.p1).to(I).inSingletonScope(),t(M.XN).toService(M.p1))});function F(){F.__loaded||(F.__loaded=!0,n.i.RegisterGraphicCreator("text",s.r),a.n.load(T),a.n.load(E.X?P:L))}F.__loaded=!1;let j=F},1287:function(t,e,i){"use strict";i.d(e,{j:()=>g});var r=i(7623),s=i(9896),n=i(5859),a=i(6082),o=i(1601),l=i(8028),h=i(8919),u=i(5173),d=i(1319);function c(t,e,i,r){let s=[],n=t;for(;n<=e;)s.push(n),n+=i;return r&&s.reverse(),s}function p(t,e,i,r){let s,n;if(e=Math.floor(+e),t=Math.floor(+t),!(i=Math.floor(+i)))return[];if(t===e)return[t];if(s=e<t){let i=t;t=e,e=i}let a=(0,d.i)(1,e-t+1)(i);if(n=Math.floor((e-t+1)/a),!r)for(;Math.ceil((e-t+1)/n)>i&&a>1;)a-=1,n=Math.floor((e-t)/a);return c(t,e,n,s)}class g extends l.J{constructor(t){super(),this.type=u._f.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,e){if(t)return this;this._wholeRange=null;let i=this._calculateWholeRange(this._range,e),r=super.domain().length,s=i[1]<i[0],n=i[Number(s)-0],a=i[1-Number(s)],o=(0,h.U6)(r,this._paddingInner,this._paddingOuter);return this._step=(a-n)/Math.max(1,o||1),this._round&&(this._step=Math.floor(this._step)),n+=(a-n-this._step*(r-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(n=Math.round(n),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:s,start:s?n+this._step*(r-1):n,count:r},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let r=this._index.get(e);if(!r){if(this._unknown!==l.O)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}let{count:s,start:n,reverse:a}=this._bandRangeState,o=n+(r-1)%s*(a?-1:1)*this._step;return this._fishEyeTransform?this._fishEyeTransform(o):o}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let e;if((0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)&&2===t.length){let i=(0,h.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]);e=Math.abs(i[1]-i[0])}else e=Math.abs(t[1]-t[0]);let i=(0,h.at)(super.domain().length,e,this._paddingInner,this._paddingOuter,this._round);i<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):i>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=i,this._isFixed=!1)}if(this.isBandwidthFixed()){let i=(0,h.$l)(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),s=Math.min((t[1]-t[0])/i,1);if((0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)){let r=this._rangeFactorStart+s<=1,n=this._rangeFactorEnd-s>=0;if("rangeFactorStart"===e&&r?this._rangeFactorEnd=this._rangeFactorStart+s:"rangeFactorEnd"===e&&n?this._rangeFactorStart=this._rangeFactorEnd-s:t[0]<=t[1]?r?this._rangeFactorEnd=this._rangeFactorStart+s:n?this._rangeFactorStart=this._rangeFactorEnd-s:(this._rangeFactorStart=0,this._rangeFactorEnd=s):n?this._rangeFactorStart=this._rangeFactorEnd-s:r?this._rangeFactorEnd=this._rangeFactorStart+s:(this._rangeFactorStart=1-s,this._rangeFactorEnd=1),i>0){let e=t[0]-i*this._rangeFactorStart;this._wholeRange=[e,e+i]}else{let e=t[1]+i*(1-this._rangeFactorEnd);this._wholeRange=[e-i,e]}}else this._rangeFactorStart=0,this._rangeFactorEnd=s,this._wholeRange=[t[0],t[0]+i];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){let t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){let e=this._domain;if((0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)&&e.length){let i=this._getInvertIndex(t[0]),r=this._getInvertIndex(t[1]);return e.slice(Math.min(i,r),Math.max(i,r)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[(0,s.H)(t[0]),(0,s.H)(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[(0,s.H)(t[0]),(0,s.H)(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return -1===t?e:p(0,e.length-1,t,!1).map(t=>e[t])}tickData(t=10){return this.ticks(t).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return p(0,e.length-1,t,!0).filter(t=>t<e.length).map(t=>e[t])}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(function(t,e,i){let r;if(e=Math.floor(+e),t=Math.floor(+t),i=(0,d.i)(1,e-t+1)(Math.floor(+i)),r=e<t){let i=t;t=e,e=i}return c(t,e,i,r)})(0,e.length-1,t).map(t=>e[t])}_getInvertIndex(t){let e=0,i=this.step()/2,r=this.bandwidth()/2,s=this._domain.length,a=this.range(),o=a[0]>a[a.length-1];for(e=0;e<s;e++){let a=this.scale(this._domain[e])+r;if(0===e&&(!o&&!(0,n.Vy)(t,a+i)||o&&!(0,n.SQ)(t,a-i))||e===s-1||!(0,n.SQ)(t,a-i)&&!(0,n.Vy)(t,a+i))break}return e>=0&&e<=s-1?e:s-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return void 0!==t?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return void 0!==t?(this._round=t,this.rescale(e)):this._round}align(t,e){return void 0!==t?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return(0,a.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return(0,a.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?("auto"===t?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth="auto"===t?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth="auto"===t?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&(0,o.Z)(this._userBandwidth)}clone(){var t,e,i;return new g(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!==(t=this._userBandwidth)&&void 0!==t?t:"auto",!0).maxBandwidth(null!==(e=this._maxBandwidth)&&void 0!==e?e:"auto",!0).minBandwidth(null!==(i=this._maxBandwidth)&&void 0!==i?i:"auto")}}},2342:function(t,e,i){"use strict";i.d(e,{s:()=>o});var r=i(7623),s=i(6082),n=i(3604),a=i(8919);class o{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:(0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)&&2===t.length?(this._wholeRange=(0,a.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(2===t.length&&t.every(t=>t>=0&&t<=1)&&(this._wholeRange=null,0===t[0]&&1===t[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):(0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return(0,s.Z)(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,s.Z)(this._rangeFactorEnd)||1===this._rangeFactorEnd)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t,this._rangeFactorEnd=null!==(i=this._rangeFactorEnd)&&void 0!==i?i:1)),this)}rangeFactorEnd(t,e){var i;return(0,s.Z)(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,s.Z)(this._rangeFactorStart)||0===this._rangeFactorStart)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorEnd=t,this._rangeFactorStart=null!==(i=this._rangeFactorStart)&&void 0!==i?i:0)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);let{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,a=this.range(),o=a[0],l=a[a.length-1],h=Math.min(o,l),u=Math.max(o,l),d=(0,n.Z)(null!==(t=this._fishEyeOptions.focus)&&void 0!==t?t:0,h,u),c=(0,s.Z)(r)?(u-h)*i:r,p=Math.exp(e);p=p/(p-1)*c;let g=e/c;this._fishEyeTransform=t=>{let e=Math.abs(t-d);return e>=c?t:e<=1e-6?d:d+(t-d)*(p*(1-Math.exp(-e*g))/e*.75+.25)}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var i;return null!==(i=null==this?void 0:this[t])&&void 0!==i?i:e}}},4878:function(t,e,i){"use strict";i.d(e,{y:()=>_});var r={};i.r(r),i.d(r,{Color:()=>n.Il,DEFAULT_COLORS:()=>n.QP,RGB:()=>n.eX,hexToRgb:()=>a.Z,hslToRgb:()=>o.Z,interpolateRgb:()=>u,rgbToHex:()=>l,rgbToHsl:()=>h.Z});var s=i(2342),n=i(9921),a=i(2450),o=i(4287);function l(t,e,i){return Number(0x1000000+(t<<16)+(e<<8)+i).toString(16).slice(1)}var h=i(6879);function u(t,e){let i=t.r,r=e.r,s=t.g,a=e.g,o=t.b,l=e.b,h=t.opacity,u=e.opacity;return t=>{let e=Math.round(i*(1-t)+r*t),d=Math.round(s*(1-t)+a*t),c=Math.round(o*(1-t)+l*t);return new n.eX(e,d,c,h*(1-t)+u*t)}}var d=i(6082),c=i(5660);let{interpolateRgb:p}=r;function g(t,e){let i;let r=typeof e;if((0,d.Z)(e)||"boolean"===r)return()=>e;if("number"===r)return(0,c.k4)(t,e);if("string"===r){if(i=n.Il.parseColorString(e)){let e=p(n.Il.parseColorString(t),i);return t=>e(t).formatRgb()}return(0,c.k4)(Number(t),Number(e))}return e instanceof n.eX?p(t,e):e instanceof n.Il?p(t.color,e.color):e instanceof Date?(0,c.NW)(t,e):(0,c.k4)(Number(t),Number(e))}var m=i(8919),f=i(7623),v=i(9896),y=i(1319);class _ extends s.s{constructor(t=m.yR,e=m.yR){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=m.yR,this._piecewise=m.Pd,this._interpolate=g}calculateVisibleDomain(t){var e;return(0,f.Z)(this._rangeFactorStart)&&(0,f.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:null!==(e=this._niceDomain)&&void 0!==e?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this.transformer),c.k4)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return(null!==(i=this._niceDomain)&&void 0!==i?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;let r=Array.from(t,v.H);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();let i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){let i=Array.from(t);return this._range=i,this._interpolate=c.OD,this.rescale(e)}rescale(t){var e;if(t)return this;let i=null!==(e=this._niceDomain)&&void 0!==e?e:this._domain,r=i.length,s=this._range.length,n=Math.min(r,s);if(r&&r<s&&this._forceAlign){let t=s-r+1,e=i[r-1],a=r>=2?(e-i[r-2])/t:0;for(let s=1;s<=t;s++)i[r-2+s]=e-a*(t-s);n=s}return this._autoClamp&&(this._clamp=(0,y.i)(i[0],i[n-1])),this._piecewise=n>2?m.PP:m.Pd,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:m.yR),this.rescale(i)):this._clamp!==m.yR}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){let e=this.ticks(t);return(null!=e?e:[]).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return(0,d.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return(0,d.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}},6132:function(t,e,i){"use strict";i.d(e,{f:()=>l});var r=i(5173),s=i(855),n=i(4878),a=i(9038),o=i(7623);class l extends n.y{constructor(){super(...arguments),this.type=r._f.Linear}clone(){return(new l).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(t=10,e){let i=this.calculateVisibleDomain(this._range);return(0,s.Z6)(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if((0,a.Z)(null==e?void 0:e.customTicks))return e.customTicks(this,t);if((0,o.Z)(this._rangeFactorStart)&&(0,o.Z)(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(t,e);let r=null!==(i=this._niceDomain)&&void 0!==i?i:this._domain,n=this._domain,l=r[0],h=r[r.length-1],u=(0,s.sd)(n[0],n[n.length-1],t,e);if(!u.length)return u;if(this._domainValidator)u=u.filter(this._domainValidator);else if((u[0]!==l||u[u.length-1]!==h)&&this._niceType){let t=r.slice();if("all"===this._niceType?(t[0]=u[0],t[t.length-1]=u[u.length-1],this._niceDomain=t,this.rescale()):"min"===this._niceType&&u[0]!==l?(t[0]=u[0],this._niceDomain=t,this.rescale()):"max"===this._niceType&&u[u.length-1]!==h&&(t[t.length-1]=u[u.length-1],this._niceDomain=t,this.rescale()),"all"!==this._niceType){let e=Math.min(t[0],t[t.length-1]),i=Math.max(t[0],t[t.length-1]);u=u.filter(t=>t>=e&&t<=i)}}return u}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,s.S8)(e[0],e[e.length-1],t)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,s.Hb)(e[0],e[e.length-1],t)}nice(t=10,e){var i,r;let n=this._domain,a=[];if(e){let t=(0,s.OQ)(n,e);if(a=t.niceMinMax,this._domainValidator=t.domainValidator,this._niceType=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){let e=(0,s.EL)(n.slice(),t);"min"===this._niceType?e[e.length-1]=null!==(i=a[1])&&void 0!==i?i:e[e.length-1]:"max"===this._niceType&&(e[0]=null!==(r=a[0])&&void 0!==r?r:e[0]),this._niceDomain=e,this.rescale()}return this}niceMin(t=10){this._niceType="min";let e=this._domain[this._domain.length-1],i=(0,s.EL)(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";let e=this._domain[0],i=(0,s.EL)(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}}},8028:function(t,e,i){"use strict";i.d(e,{J:()=>o,O:()=>a});var r=i(5173),s=i(2342),n=i(7623);let a=Symbol("implicit");class o extends s.s{specified(t){var e;return t?(this._specified=Object.assign(null!==(e=this._specified)&&void 0!==e?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=r._f.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=a}clone(){let t=(new o).domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return(0,n.Z)(this._rangeFactorStart)&&(0,n.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let r=this._index.get(e);if(!r){if(this._unknown!==a)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}let s=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(s):s}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();for(let e of(this._domain=[],this._index=new Map,t)){let t=`${e}`;this._index.has(t)||this._index.set(t,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();let e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&null!==(e=this._index.get(`${t}`))&&void 0!==e?e:-1}}},5173:function(t,e,i){"use strict";var r,s;i.d(e,{_f:()=>r,dx:()=>o,lK:()=>l,z2:()=>a}),(s=r||(r={})).Identity="identity",s.Linear="linear",s.Log="log",s.Pow="pow",s.Sqrt="sqrt",s.Symlog="symlog",s.Time="time",s.Quantile="quantile",s.Quantize="quantize",s.Threshold="threshold",s.Ordinal="ordinal",s.Point="point",s.Band="band";let n={};function a(t){switch(t){case r.Linear:case r.Log:case r.Pow:case r.Sqrt:case r.Symlog:case r.Time:return!0;default:return!1}}function o(t){return!!n[t]}function l(t){switch(t){case r.Ordinal:case r.Point:case r.Band:return!0;default:return!1}}Object.values(r).forEach(t=>{n[t]=!0})},855:function(t,e,i){"use strict";i.d(e,{sd:()=>g,Hb:()=>y,e3:()=>S,jb:()=>A,EL:()=>_,RX:()=>k,OQ:()=>b,S8:()=>v,Z6:()=>d});var r=i(7623);let s=t=>{let e=null,i=null;return(...r)=>(e&&r.every((t,i)=>t===e[i])||(e=r,i=t(...r)),i)};var n=i(1601),a=i(8919);let o=Math.sqrt(50),l=Math.sqrt(10),h=Math.sqrt(2),u=(t,e,i)=>{let s=1,n=t,a=Math.floor((e-1)/2),o=Math.abs(t);return t>=0&&t<=Number.MIN_VALUE?n=0:t<0&&t>=-Number.MIN_VALUE?n=-(e-1):!i&&o<1?s=m(o).step:(i||o>1)&&(n=Math.floor(t)-a*s),s>0?(t>0?n=Math.max(n,0):t<0&&(n=Math.min(n,-(e-1)*s)),(function(t,e,i){(0,r.Z)(e)||(e=t,t=0),(0,r.Z)(i)||(i=1);let s=-1,n=0|Math.max(0,Math.ceil((e-t)/i)),a=Array(n);for(;++s<n;)a[s]=t+s*i;return a})(0,e).map(t=>n+t*s)):t>0?c(0,-(e-1)/s,s):c((e-1)/s,0,s)},d=s((t,e,i,r)=>{let s,n,a,o,l=-1;if(i=+i,(t=+t)==(e=+e)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return[t];if((s=e<t)&&(n=t,t=e,e=n),!isFinite(o=f(t,e,i).step))return[];if(o>0){let i=Math.round(t/o),r=Math.round(e/o);for(i*o<t&&++i,r*o>e&&--r,a=Array(n=r-i+1);++l<n;)a[l]=(i+l)*o}else if(o<0&&(null==r?void 0:r.noDecimals)){o=1;let i=Math.ceil(t),r=Math.floor(e);if(!(i<=r))return[];for(a=Array(n=r-i+1);++l<n;)a[l]=i+l}else{let i=Math.round(t*(o=-o)),r=Math.round(e*o);for(i/o<t&&++i,r/o>e&&--r,a=Array(n=r-i+1);++l<n;)a[l]=(i+l)/o}return s&&a.reverse(),a}),c=(t,e,i)=>{let r,s,n=-1;if(i>0){let a=Math.floor(t/i),o=Math.ceil(e/i);for((a+1)*i<t&&++a,(o-1)*i>e&&--o,s=Array(r=o-a+1);++n<r;)s[n]=(a+n)*i}else{let a=Math.floor(t*(i=-i)),o=Math.ceil(e*i);for((a+1)/i<t&&++a,(o-1)/i>e&&--o,s=Array(r=o-a+1);++n<r;)s[n]=(a+n)/i}return s},p=(t,e,i)=>{let r;let s=t[0],n=t[t.length-1],a=e-t.length;if(n<=0){let e=[];for(r=a;r>=1;r--)e.push(s-r*i);return e.concat(t)}if(s>=0){for(r=1;r<=a;r++)t.push(n+r*i);return t}let o=[],l=[];for(r=1;r<=a;r++)r%2==0?o=[s-Math.floor(r/2)*i].concat(o):l.push(n+Math.ceil(r/2)*i);return o.concat(t).concat(l)},g=s((t,e,i,r)=>{let s,n,a;if(i=+i,(t=+t)==(e=+e)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return u(t,i,null==r?void 0:r.noDecimals);(s=e<t)&&(a=t,t=e,e=a);let o=f(t,e,i),l=o.step;if(!isFinite(l))return[];if(l>0){let r=1,{power:s,gap:a}=o,h=10===a?2*10**s:1*10**s;for(;r<=5&&(n=c(t,e,l)).length>i+1&&i>2;)l+=h,r+=1;i>2&&n.length<i-1&&(n=p(n,i,l))}else(null==r?void 0:r.noDecimals)&&l<0&&(l=1),n=c(t,e,l);return s&&n.reverse(),n}),m=t=>{let e=Math.floor(Math.log(t)/Math.LN10),i=t/10**e,r=1;return i>=o?r=10:i>=l?r=5:i>=h&&(r=2),e>=0?{step:r*10**e,gap:r,power:e}:{step:-(10**-e)/r,gap:r,power:e}};function f(t,e,i){return m((e-t)/Math.max(0,i))}function v(t,e,i){let r;if(i=+i,(t=+t)==(e=+e)&&i>0)return[t];if(i<=0||0==(r=(e-t)/Math.max(1,i-1))||!isFinite(r))return[];let s=Array(i);for(let e=0;e<i;e++)s[e]=t+e*r;return s}function y(t,e,i){let r,s,n=-1;if(i=+i,(s=(e=+e)<(t=+t))&&(r=t,t=e,e=r),!isFinite(i)||e-t<=i)return[t];let a=Math.floor((e-t)/i+1),o=Array(a);for(;++n<a;)o[n]=t+n*i;return s&&o.reverse(),o}function _(t,e=10){let i,r,s=0,n=t.length-1,a=t[s],o=t[n],l=10;for(o<a&&(r=a,a=o,o=r,r=s,s=n,n=r);l-- >0;){if((r=f(a,o,e).step)===i)return t[s]=a,t[n]=o,t;if(r>0)a=Math.floor(a/r)*r,o=Math.ceil(o/r)*r;else{if(!(r<0))break;a=Math.ceil(a*r)/r,o=Math.floor(o*r)/r}i=r}}function b(t,e){let i=(0,n.Z)(e.forceMin),r=(0,n.Z)(e.forceMax),s=null,a=[],o=null,l=i&&r?t=>t>=e.forceMin&&t<=e.forceMax:i?t=>t>=e.forceMin:r?t=>t<=e.forceMax:null;return i?a[0]=e.forceMin:(0,n.Z)(e.min)&&e.min<=Math.min(t[0],t[t.length-1])&&(a[0]=e.min),r?a[1]=e.forceMax:(0,n.Z)(e.max)&&e.max>=Math.max(t[0],t[t.length-1])&&(a[1]=e.max),(0,n.Z)(a[0])&&(0,n.Z)(a[1])?((o=t.slice())[0]=a[0],o[o.length-1]=a[1]):s=(0,n.Z)(a[0])||(0,n.Z)(a[1])?(0,n.Z)(a[0])?"max":"min":"all",{niceType:s,niceDomain:o,niceMinMax:a,domainValidator:l}}let x=(t,e,i)=>1>Math.abs(e-t)?+i.toFixed(1):Math.round(+i),S=s((t,e,i,r,s,n,a)=>{let o=t,l=e,h=l<o;h&&([o,l]=[l,o]);let u,d,c=s(o),p=s(l),m=[];if(!(r%1)&&p-c<i){if(c=Math.floor(c),p=Math.ceil(p),o>0){for(;c<=p;++c)for(u=1;u<r;++u)if(!((d=c<0?u/n(-c):u*n(c))<o)){if(d>l)break;m.push(d)}}else for(;c<=p;++c)for(u=r-1;u>=1;--u)if(!((d=c>0?u/n(-c):u*n(c))<o)){if(d>l)break;m.push(d)}2*m.length<i&&(m=g(o,l,i))}else m=g(c,p,Math.min(p-c,i)).map(n);return m=m.filter(t=>0!==t),(null==a?void 0:a.noDecimals)&&(m=Array.from(new Set(m.map(t=>Math.floor(t))))),h?m.reverse():m}),A=s((t,e,i,r,s,n)=>{let o=[],l={},h=s(t),u=s(e),d=[];if(Number.isInteger(r))d=g(h,u,i);else{let t=(u-h)/(i-1);for(let e=0;e<i;e++)d.push(h+e*t)}return d.forEach(i=>{let s=n(i),h=Number.isInteger(r)?x(t,e,s):x(t,e,(0,a.ok)(s)),u=x(t,e,(0,a.uT)(h,[t,e]));l[u]||isNaN(u)||!(d.length>1)||(l[u]=1,o.push(u))}),o}),k=s((t,e,i,r,s)=>v(r(t),r(e),i).map(t=>(0,a.ok)(s(t))));s((t,e,i,r,s)=>y(r(t),r(e),i).map(t=>(0,a.ok)(s(t))))},8919:function(t,e,i){"use strict";i.d(e,{$l:()=>p,BK:()=>m,J7:()=>h,PP:()=>f,Pd:()=>d,U6:()=>c,at:()=>g,ge:()=>a,kx:()=>v,ok:()=>y,op:()=>n,uT:()=>_,yR:()=>s,ye:()=>l});var r=i(8986);function s(t){return t}let n=t=>-Math.log(-t),a=t=>-Math.exp(-t),o=t=>isFinite(t)?Math.pow(10,t):t<0?0:t,l=t=>10===t?o:t===Math.E?Math.exp:e=>Math.pow(t,e),h=t=>t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:(t=Math.log(t),e=>Math.log(e)/t);function u(t,e){if(t=Number(t),e=Number(e)-t)return i=>(i-t)/e;let i=Number.isNaN(e)?NaN:.5;return()=>i}function d(t,e,i){let r,s;let n=t[0],a=t[1],o=e[0],l=e[1];return a<n?(r=u(a,n),s=i(l,o)):(r=u(n,a),s=i(o,l)),t=>s(r(t))}function c(t,e,i){let r;return r=1===t?t+2*i:t-e+2*i,t?r>0?r:1:0}function p(t,e,i,r){return 1===i&&(i=0),c(t,i,r)*(e/(1-i))}function g(t,e,i,r,s){let n=e/Math.max(1,c(t,i,r)||1);s&&(n=Math.floor(n));let a=n*(1-i);return s&&(a=Math.round(a)),a}function m(t,e){let i=(t[1]-t[0])/(e[1]-e[0]),r=t[0]-i*e[0];return[r,i+r]}function f(t,e,i){let s=Math.min(t.length,e.length)-1,n=Array(s),a=Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)n[o]=u(t[o],t[o+1]),a[o]=i(e[o],e[o+1]);return function(e){let i=(0,r.b4)(t,e,1,s)-1;return a[i](n[i](e))}}let v=(t,e)=>{let i=t.slice(),r=0,s=i.length-1,n=i[r],a=i[s];return a<n&&([r,s]=[s,r],[n,a]=[a,n]),i[r]=e.floor(n),i[s]=e.ceil(a),i},y=(t,e=!1)=>{let i=Math.floor(Math.log10(t)),r=t/Math.pow(10,i);return(e?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,i)},_=(t,e)=>{let i,r;return e[0]<e[1]?(i=e[0],r=e[1]):(i=e[1],r=e[0]),Math.min(Math.max(t,i),r)}},4218:function(t,e,i){"use strict";i.d(e,{H:()=>a,K:()=>o});var r=i(325),s=i(4154),n=i(7636);function a(t,...e){let i=-1,s=e.length;for(;++i<s;){let s=e[i];(0,r.p)(t,s,!0,!0)}return t}function o(t,e,i,r){Object.keys(t).forEach(o=>{if((0,s.Z)(e))e.type===o&&((0,n.Z)(t[o])?t[o].length>=e.index&&(t[o][e.index]=r?a({},t[o][e.index],i):i):t[o]=r?a({},t[o],i):i);else if((0,n.Z)(t[o])){let s=t[o].findIndex(t=>t.id===e);s>=0&&(t[o][s]=r?a({},t[o][s],i):i)}else t.id===e&&(t[o]=r?a({},t[o],i):i)})}},1071:function(t,e,i){"use strict";i.d(e,{$s:()=>a,Hn:()=>n});var r=i(6082),s=i(1130);let n=(t,e,i)=>{if((0,r.Z)(e))return t;let s=e[0];return(0,r.Z)(s)?t:1===e.length?(t[s]=i,t):((0,r.Z)(t[s])&&("number"==typeof e[1]?t[s]=[]:t[s]={}),n(t[s],e.slice(1),i))},a=(t,e,i)=>{if(!(0,r.Z)(e))return(0,s.Z)(t,e,i)}},1805:function(t,e,i){"use strict";i.d(e,{Dt:()=>n,LW:()=>l,M4:()=>s,Re:()=>h,gt:()=>a,op:()=>o,tc:()=>u});var r=i(8103);function s(t){return Math.PI/180*t}function n(t){return 180*t/Math.PI}let a=(t=0)=>{if(t<0)for(;t<-r.BZ;)t+=r.BZ;else if(t>0)for(;t>r.BZ;)t-=r.BZ;return t};function o(t,e,i){return e?{x:t.x+e*Math.cos(i),y:t.y+e*Math.sin(i)}:{x:t.x,y:t.y}}function l(t){for(;t<0;)t+=2*Math.PI;for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function h(t,e,i,r){let{x:s,y:n}=e,a=function(t,e){let i=Math.abs(e-t);if(i>=2*Math.PI||2*Math.PI-i<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];let r=l(Math.min(t,e)),s=r+i,n=[r,s],a=Math.floor(r/Math.PI)*Math.PI/2;for(;a<s;)a>r&&n.push(a),a+=Math.PI/2;return n}(i,r),{width:o,height:h}=t,u=[];return a.forEach(t=>{let e=Math.sin(t),i=Math.cos(t);1===e?u.push(h-n):-1===e?u.push(n):1===i?u.push(o-s):-1===i?u.push(s):(e>0?u.push(Math.abs((h-n)/e)):u.push(Math.abs(n/e)),i>0?u.push(Math.abs((o-s)/i)):u.push(Math.abs(s/i)))}),Math.min.apply(null,u)}function u(t){return(t=l(t))>0&&t<=Math.PI/2?2:t>Math.PI/2&&t<=Math.PI?3:t>Math.PI&&t<=3*Math.PI/2?4:1}},9921:function(t,e,i){"use strict";i.d(e,{Il:()=>y,QP:()=>c,eX:()=>_});var r=i(1601),s=i(7636),n=i(7623),a=i(6082),o=i(3604),l=i(4287),h=i(6879);let u=/^#([0-9a-f]{3,8})$/,d={transparent:0xffffff00},c={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function p(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function g(t){return(0,r.Z)(t)?new _(t>>16,t>>8&255,255&t,1):(0,s.Z)(t)?new _(t[0],t[1],t[2]):new _(255,255,255)}function m(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function f(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let v=(t,e)=>{let i=u.exec(t);if(e||i){let t=parseInt(i[1],16),e=i[1].length;return 3===e?new _((t>>8&15)+((t>>8&15)<<4),(t>>4&15)+((t>>4&15)<<4),(15&t)+((15&t)<<4),1):6===e?g(t):8===e?new _(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):null}};class y{static Brighter(t,e=1){return 1===e?t:new y(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return 1===e?t:new y(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){let i=t instanceof y?t:new y(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3();case"wcag":return i.getLuminanceWCAG()}}static parseColorString(t){if((0,n.Z)(d[t])){var e;return e=d[t],(0,r.Z)(e)?new _(e>>>24,e>>>16&255,e>>>8&255,255&e):(0,s.Z)(e)?new _(e[0],e[1],e[2],e[3]):new _(255,255,255,1)}if((0,n.Z)(c[t]))return g(c[t]);let i=`${t}`.trim().toLowerCase(),a=v(i);if(void 0!==a)return a;if(/^(rgb|RGB|rgba|RGBA)/.test(i)){let t=i.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new _(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),parseFloat(t[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(i)){let t=i.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),e=(0,l.Z)(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10));return new _(e.r,e.g,e.b,parseFloat(t[3]))}}constructor(t){let e=y.parseColorString(t);e?this.color=e:(console.warn(`Warn: 传入${t}无法解析为Color`),this.color=new _(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){let{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){let{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){let{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){let r=this.color.opacity,s=(0,h.Z)(this.color.r,this.color.g,this.color.b),n=(0,l.Z)((0,a.Z)(t)?s.h:(0,o.Z)(t,0,360),(0,a.Z)(e)?s.s:e>=0&&e<=1?100*e:e,(0,a.Z)(i)?s.l:i<=1&&i>=0?100*i:i);return this.color=new _(n.r,n.g,n.b,r),this}setRGB(t,e,i){return(0,a.Z)(t)||(this.color.r=t),(0,a.Z)(e)||(this.color.g=e),(0,a.Z)(i)||(this.color.b=i),this}setHex(t){let e=v(`${t}`.trim().toLowerCase(),!0);return null!=e?e:this}setColorName(t){let e=c[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}getLuminanceWCAG(){let t=this.color.r/255,e=this.color.g/255,i=this.color.b/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}clone(){return new y(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){let i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=m(t.color.r),this.color.g=m(t.color.g),this.color.b=m(t.color.b),this}copyLinearToSRGB(t){return this.color.r=f(t.color.r),this.color.g=f(t.color.g),this.color.b=f(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class _{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),(0,n.Z)(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${p(this.r)+p(this.g)+p(this.b)+(1===this.opacity?"":p(255*this.opacity))}`}formatRgb(){let t=this.opacity;return`${1===t?"rgb(":"rgba("}${this.r},${this.g},${this.b}${1===t?")":`,${t})`}`}formatHsl(){let t=this.opacity,{h:e,s:i,l:r}=(0,h.Z)(this.r,this.g,this.b);return`${1===t?"hsl(":"hsla("}${e},${i}%,${r}%${1===t?")":`,${t})`}`}toString(){return this.formatHex()}}},2450:function(t,e,i){"use strict";function r(t){let e="",i="",r="",s="#"===t[0]?1:0;for(let n=s;n<t.length;n++)"#"!==t[n]&&(n<s+2?e+=t[n]:n<s+4?i+=t[n]:n<s+6&&(r+=t[n]));return[parseInt(e,16),parseInt(i,16),parseInt(r,16)]}i.d(e,{Z:()=>r})},4287:function(t,e,i){"use strict";function r(t,e,i){let r=(1-Math.abs(2*(i/=100)-1))*(e/=100),s=r*(1-Math.abs(t/60%2-1)),n=i-r/2,a=0,o=0,l=0;return 0<=t&&t<60?(a=r,o=s,l=0):60<=t&&t<120?(a=s,o=r,l=0):120<=t&&t<180?(a=0,o=r,l=s):180<=t&&t<240?(a=0,o=s,l=r):240<=t&&t<300?(a=s,o=0,l=r):300<=t&&t<360&&(a=r,o=0,l=s),{r:a=Math.round(255*(a+n)),g:o=Math.round(255*(o+n)),b:l=Math.round(255*(l+n))}}i.d(e,{Z:()=>r})},6879:function(t,e,i){"use strict";function r(t,e,i){t/=255;let r=Math.min(t,e/=255,i/=255),s=Math.max(t,e,i),n=s-r,a=0,o=0,l=0;return(a=Math.round(60*(a=0===n?0:s===t?(e-i)/n%6:s===e?(i-t)/n+2:(t-e)/n+4)))<0&&(a+=360),l=(s+r)/2,{h:a,s:o=+(100*(o=0===n?0:n/(1-Math.abs(2*l-1)))).toFixed(1),l:l=+(100*l).toFixed(1)}}i.d(e,{Z:()=>r})},4546:function(t,e,i){"use strict";i.d(e,{CE:()=>l,IX:()=>a,V4:()=>d,VF:()=>function t(e){if(!(0,r.Z)(e))return[e];let i=[];for(let r of e)i.push(...t(r));return i},Z$:()=>o,h6:()=>u,iH:()=>h});var r=i(7636),s=i(9626),n=i(7623);function a(t){return(0,n.Z)(t)?(0,r.Z)(t)?t:[t]:[]}function o(t){if((0,s.Z)(t))return t[t.length-1]}let l=(t,e)=>{var i;if(0===t.length)return;let r=t[0];for(let s=1;s<t.length;s++){let n=t[s];(null!==(i=null==e?void 0:e(n,r))&&void 0!==i?i:n-r)>0&&(r=n)}return r},h=(t,e)=>{var i;if(0===t.length)return;let r=t[0];for(let s=1;s<t.length;s++){let n=t[s];(null!==(i=null==e?void 0:e(n,r))&&void 0!==i?i:n-r)<0&&(r=n)}return r};function u(t,e){if(!(0,r.Z)(t)||!(0,r.Z)(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function d(t){return t&&(0,r.Z)(t)?Array.from(new Set(a(t))):t}},2442:function(t,e,i){"use strict";function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}i.d(e,{j:()=>r})},8986:function(t,e,i){"use strict";i.d(e,{b4:()=>n,o0:()=>a});var r=i(2442),s=i(6082);function n(t,e,i=0,a){for((0,s.Z)(a)&&(a=t.length);i<a;){let s=i+a>>>1;(0,r.j)(t[s],e)>0?a=s:i=s+1}return i}let a=(t,e,i)=>{let r=t,s=e;for(;r<s;){let t=Math.floor((r+s)/2);i(t)>=0?s=t:r=t+1}return r}},3604:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=function(t,e,i){return t<e?e:t>i?i:t}},3531:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=(t,e,i)=>{let[r,s]=t;s<r&&(r=t[1],s=t[0]);let n=s-r;return n>=i-e?[e,i]:[r=Math.min(Math.max(r,e),i-n),r+n]}},1319:function(t,e,i){"use strict";function r(t,e){let i;return t>e&&(i=t,t=e,e=i),i=>Math.max(t,Math.min(e,i))}i.d(e,{i:()=>r})},645:function(t,e,i){"use strict";i.d(e,{Z:()=>function t(e,i,n){let u;if(!(0,h.Z)(e)||"object"!=typeof e||i&&i(e))return e;let d=(0,r.Z)(e),c=e.length;u=d?Array(c):"object"==typeof e?{}:(0,s.Z)(e)||(0,o.Z)(e)||(0,l.Z)(e)?e:a(e)?new Date(+e):void 0;let p=d?void 0:Object.keys(Object(e)),g=-1;if(u)for(;++g<(p||e).length;){let r=p?p[g]:g,s=e[r];n&&n.includes(r.toString())?u[r]=s:u[r]=t(s,i,n)}return u}});var r=i(7636),s=i(1036),n=i(4250);let a=t=>(0,n.Z)(t,"Date");var o=i(1601),l=i(9904),h=i(7623)},2937:function(t,e,i){"use strict";i.d(e,{Z:()=>a});var r=i(4154),s=i(8378);let n=!1;try{n="function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame}catch(t){n=!1}n=!1;let a=function(t,e,i){let a,o,l,h,u,d,c=0,p=!1,g=!1,m=!0,f=!e&&0!==e&&n;if("function"!=typeof t)throw TypeError("Expected a function");function v(e){let i=a,r=o;return a=o=void 0,c=e,h=t.apply(r,i)}function y(t,e){return f?(cancelAnimationFrame(u),requestAnimationFrame(t)):setTimeout(t,e)}function _(t){let i=t-d;return void 0===d||i>=e||i<0||g&&t-c>=l}function b(){let t=Date.now();if(_(t))return x(t);u=y(b,function(t){let i=t-c,r=e-(t-d);return g?Math.min(r,l-i):r}(t))}function x(t){return u=void 0,m&&a?v(t):(a=o=void 0,h)}function S(...t){let i=Date.now(),r=_(i);if(a=t,o=this,d=i,r){if(void 0===u){var s;return c=s=d,u=y(b,e),p?v(s):h}if(g)return u=y(b,e),v(d)}return void 0===u&&(u=y(b,e)),h}return e=+e||0,(0,r.Z)(i)&&(p=!!i.leading,(g="maxWait"in i)&&(l=Math.max((0,s.Z)(i.maxWait)?i.maxWait:0,e)),m="trailing"in i?!!i.trailing:m),S.cancel=function(){void 0!==u&&function(t){if(f)return cancelAnimationFrame(t);clearTimeout(t)}(u),c=0,a=d=o=u=void 0},S.flush=function(){return void 0===u?h:x(Date.now())},S.pending=function(){return void 0!==u},S}},1130:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(9904);let s=(t,e,i)=>{let s=(0,r.Z)(e)?e.split("."):e;for(let e=0;e<s.length;e++)t=t?t[s[e]]:void 0;return void 0===t?i:t}},306:function(t,e,i){"use strict";i.d(e,{Z:()=>s});let r=Object.prototype.hasOwnProperty,s=(t,e)=>null!=t&&r.call(t,e)},5660:function(t,e,i){"use strict";function r(t,e){return i=>t*(1-i)+e*i}function s(t,e){return function(i){return Math.round(t*(1-i)+e*i)}}function n(t,e){let i=t.valueOf(),r=e.valueOf(),s=new Date;return t=>(s.setTime(i*(1-t)+r*t),s)}i.d(e,{IT:()=>l,NW:()=>n,OD:()=>s,k4:()=>r});let a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=RegExp(a.source,"g");function l(t,e){var i,s;let n,l,h,u=a.lastIndex=o.lastIndex=0,d=-1,c=[],p=[];for(t+="",e+="";(n=a.exec(t))&&(l=o.exec(e));)(h=l.index)>u&&(h=e.slice(u,h),c[d]?c[d]+=h:c[++d]=h),(n=n[0])===(l=l[0])?c[d]?c[d]+=l:c[++d]=l:(c[++d]=null,p.push({i:d,x:r(n,l)})),u=o.lastIndex;return u<e.length&&(h=e.slice(u),c[d]?c[d]+=h:c[++d]=h),c.length<2?p[0]?(i=p[0].x,function(t){return i(t)+""}):(s=e,function(){return s}):(e=p.length,function(t){for(let i,r=0;r<e;++r)c[(i=p[r]).i]=i.x(t);return c.join("")})}},7636:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(4250);let s=t=>Array.isArray?Array.isArray(t):(0,r.Z)(t,"Array")},9626:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=function(t){return null!==t&&"function"!=typeof t&&Number.isFinite(t.length)}},1036:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(4250);let s=(t,e=!1)=>e?"boolean"==typeof t:!0===t||!1===t||(0,r.Z)(t,"Boolean")},1121:function(t,e,i){"use strict";i.d(e,{Z:()=>h});var r=i(6082),s=i(9626);let n=t=>({}).toString.call(t).replace(/^\[object /,"").replace(/]$/,""),a=Object.prototype,o=function(t){let e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||a)},l=Object.prototype.hasOwnProperty,h=function(t){if((0,r.Z)(t))return!0;if((0,s.Z)(t))return!t.length;let e=n(t);if("Map"===e||"Set"===e)return!t.size;if(o(t))return!Object.keys(t).length;for(let e in t)if(l.call(t,e))return!1;return!0}},9730:function(t,e,i){"use strict";i.d(e,{X:()=>function t(e,i,l){if(e===i)return!0;if(typeof e!=typeof i||null==e||null==i)return!1;if(Number.isNaN(e)&&Number.isNaN(i))return!0;if(a(e)!==a(i))return!1;if((0,s.Z)(e))return!!(null==l?void 0:l.skipFunction);if("object"!=typeof e)return!1;if((0,r.Z)(e)){if(e.length!==i.length)return!1;for(let r=e.length-1;r>=0;r--)if(!t(e[r],i[r],l))return!1;return!0}if(!(0,n.Z)(e))return!1;let h=o(e),u=o(i);if(h.length!==u.length)return!1;h.sort(),u.sort();for(let t=h.length-1;t>=0;t--)if(h[t]!=u[t])return!1;for(let r=h.length-1;r>=0;r--){let s=h[r];if(!t(e[s],i[s],l))return!1}return!0}});var r=i(7636),s=i(9038),n=i(5890);function a(t){return Object.prototype.toString.call(t)}function o(t){return Object.keys(t)}},9038:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>"function"==typeof t},6082:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>null==t},1601:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(4250);let s=(t,e=!1)=>{let i=typeof t;return e?"number"===i:"number"===i||(0,r.Z)(t,"Number")}},4154:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>{let e=typeof t;return null!==t&&"object"===e||"function"===e}},5890:function(t,e,i){"use strict";i.d(e,{Z:()=>n});let r=t=>"object"==typeof t&&null!==t;var s=i(4250);let n=function(t){if(!r(t)||!(0,s.Z)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},9904:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(4250);let s=(t,e=!1)=>{let i=typeof t;return e?"string"===i:"string"===i||(0,r.Z)(t,"String")}},4250:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=(t,e)=>Object.prototype.toString.call(t)===`[object ${e}]`},7846:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>void 0===t},7623:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>null!=t},8378:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(1601);let s=t=>(0,r.Z)(t)&&Number.isFinite(t)},325:function(t,e,i){"use strict";i.d(e,{Z:()=>h,p:()=>o});var r=i(7636),s=i(9626),n=i(5890),a=i(7623);function o(t,e,i=!1,h=!1){if(e&&t!==e&&(0,a.Z)(e)&&"object"==typeof e){let u=Object(e),d=[];for(let t in u)d.push(t);let{length:c}=d,p=-1;for(;c--;){let c=d[++p];!(0,a.Z)(u[c])||"object"!=typeof u[c]||h&&(0,r.Z)(t[c])?l(t,c,u[c]):function(t,e,i,a=!1,h=!1){let u=t[i],d=e[i],c=e[i],p=!0;if((0,r.Z)(d)){if(a)c=[];else if((0,r.Z)(u))c=u;else if((0,s.Z)(u)){c=Array(u.length);let t=-1,e=u.length;for(;++t<e;)c[t]=u[t]}}else(0,n.Z)(d)?(c=null!=u?u:{},"function"!=typeof u&&"object"==typeof u||(c={})):p=!1;p&&o(c,d,a,h),l(t,i,c)}(t,e,c,i,h)}}}function l(t,e,i){var r,s;(void 0===i||(r=t[e],r===(s=i)||Number.isNaN(r)&&Number.isNaN(s)))&&(void 0!==i||e in t)||(t[e]=i)}function h(t,...e){let i=-1,r=e.length;for(;++i<r;)o(t,e[i],!0);return t}},7773:function(t,e,i){"use strict";function r(t,e,i=!0){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames){let r=Object.getOwnPropertyNames(e);for(let s=0;s<r.length;s++){let n=r[s];"constructor"!==n&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n])}}else!function(t,e,i){let r=function(t){if(!t)return[];if(Object.keys)return Object.keys(t);let e=[];for(let i in t)t.hasOwnProperty(i)&&e.push(i);return e}(e);for(let s=0;s<r.length;s++){let n=r[s];(i?null!=e[n]:null==t[n])&&(t[n]=e[n])}}(t,e,i)}i.d(e,{jB:()=>r})},5859:function(t,e,i){"use strict";function r(t,e,i=1e-10,s=1e-10){let n=i*Math.max(t,e);return Math.abs(t-e)<=Math.max(s,n)}function s(t,e,i,s){return t>e&&!r(t,e,i,s)}function n(t,e,i,s){return t<e&&!r(t,e,i,s)}i.d(e,{SQ:()=>n,Vy:()=>s,Yt:()=>r})},9198:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(5890),s=i(9904);function n(t,e){if(!t||!(0,r.Z)(t))return t;let i={};return Object.keys(t).forEach(r=>{let n=t[r],a=!1;e.forEach(t=>{((0,s.Z)(t)&&t===r||t instanceof RegExp&&r.match(t))&&(a=!0)}),a||(i[r]=n)}),i}},6689:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(2937),s=i(4154);let n=function(t,e,i){let n=!0,a=!0;if("function"!=typeof t)throw TypeError("Expected a function");return(0,s.Z)(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),(0,r.Z)(t,e,{leading:n,trailing:a,maxWait:e})}},9896:function(t,e,i){"use strict";function r(t){return Number(t)}i.d(e,{H:()=>r})},7393:function(t,e,i){"use strict";i.d(e,{FB:()=>o,YZ:()=>a,a5:()=>l,n2:()=>n});var r=i(7636),s=i(8654);function n(t,e,i){let{x1:r,y1:s,x2:n,y2:a}=e;return i.onlyTranslate()?(t!==e&&t.setValue(e.x1,e.y1,e.x2,e.y2),t.translate(i.e,i.f)):(t.clear(),t.add(i.a*r+i.c*s+i.e,i.b*r+i.d*s+i.f),t.add(i.a*n+i.c*s+i.e,i.b*n+i.d*s+i.f),t.add(i.a*n+i.c*a+i.e,i.b*n+i.d*a+i.f),t.add(i.a*r+i.c*a+i.e,i.b*r+i.d*a+i.f)),e}class a{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new a(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return(0,r.Z)(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){let r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){let s=this.scalePoints(t,e,i,r);return this.clear().add(s[0],s[1]).add(s[2],s[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return n(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){let{x1:r,y1:s,x2:n,y2:a}=this,o=Math.cos(t),l=Math.sin(t),h=e-e*o+i*l,u=i-e*l-i*o;return[o*r-l*s+h,l*r+o*s+u,o*r-l*a+h,l*r+o*a+u,o*n-l*s+h,l*n+o*s+u,o*n-l*a+h,l*n+o*a+u]}scalePoints(t,e,i,r){let{x1:s,y1:n,x2:a,y2:o}=this;return[t*s+(1-t)*i,e*n+(1-e)*r,t*a+(1-t)*i,e*o+(1-e)*r]}}class o extends a{}class l extends a{constructor(t,e=0){var i;super(t),t&&(this.angle=null!==(i=t.angle)&&void 0!==i?i:e)}intersects(t){return(0,s.nn)(this,t)}setValue(t=0,e=0,i=0,r=0,s=0){return super.setValue(t,e,i,r),this.angle=s,this}clone(){return new l(this)}}},9935:function(t,e,i){"use strict";i.d(e,{X:()=>a,y:()=>n});var r=i(1805),s=i(8103);class n{constructor(t=1,e=0,i=0,r=1,s=0,n=0){this.a=t,this.b=e,this.c=i,this.d=r,this.e=s,this.f=n}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,e,i,r,s,n){return!(this.e!==s||this.f!==n||this.a!==t||this.d!==r||this.b!==e||this.c!==i)}setValue(t,e,i,r,s,n){return this.a=t,this.b=e,this.c=i,this.d=r,this.e=s,this.f=n,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){let t=this.a,e=this.b,i=this.c,r=this.d,s=this.e,a=this.f,o=new n,l=t*r-e*i;return o.a=r/l,o.b=-e/l,o.c=-i/l,o.d=t/l,o.e=(i*a-r*s)/l,o.f=-(t*a-e*s)/l,o}rotate(t){let e=Math.cos(t),i=Math.sin(t),r=this.a*e+this.c*i,s=this.b*e+this.d*i,n=-(this.a*i)+this.c*e,a=-(this.b*i)+this.d*e;return this.a=r,this.b=s,this.c=n,this.d=a,this}rotateByCenter(t,e,i){let r=Math.cos(t),s=Math.sin(t),n=r*this.a-s*this.b,a=s*this.a+r*this.b,o=r*this.c-s*this.d,l=s*this.c+r*this.d,h=r*this.e-s*this.f+((1-r)*e+s*i),u=s*this.e+r*this.f+((1-r)*i-s*e);return this.a=n,this.b=a,this.c=o,this.d=l,this.e=h,this.f=u,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,i,r,s,n){return this.multiply(t,e,i,r,s,n),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){let{a:t,b:e,c:i,d:r,e:s,f:n}=this;return this.a=e,this.b=t,this.c=r,this.d=i,this.e=n,this.f=s,this}multiply(t,e,i,r,s,n){let a=this.a,o=this.b,l=this.c,h=this.d,u=a*s+l*n+this.e,d=o*s+h*n+this.f;return this.a=a*t+l*e,this.b=o*t+h*e,this.c=a*i+l*r,this.d=o*i+h*r,this.e=u,this.f=d,this}interpolate(t,e){let i=new n;return i.a=this.a+(t.a-this.a)*e,i.b=this.b+(t.b-this.b)*e,i.c=this.c+(t.c-this.c)*e,i.d=this.d+(t.d-this.d)*e,i.e=this.e+(t.e-this.e)*e,i.f=this.f+(t.f-this.f)*e,i}transformPoint(t,e){let{a:i,b:r,c:s,d:n,e:a,f:o}=this,l=i*n-r*s,{x:h,y:u}=t;e.x=n/l*h+-s/l*u+(s*o-n*a)/l,e.y=-r/l*h+i/l*u+-(i*o-r*a)/l}onlyTranslate(t=1){return this.a===t&&0===this.b&&0===this.c&&this.d===t}clone(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){let t=this.a,e=this.b,i=this.c,s=this.d,n=t*s-e*i,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!==t||0!==e){let r=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/r):-Math.acos(t/r),a.scaleX=r,a.scaleY=n/r,a.skewX=(t*i+e*s)/n,a.skewY=0}else if(0!==i||0!==s){let r=Math.sqrt(i*i+s*s);a.rotateDeg=Math.PI/2-(s>0?Math.acos(-i/r):-Math.acos(i/r)),a.scaleX=n/r,a.scaleY=r,a.skewX=0,a.skewY=(t*i+e*s)/n}return a.rotateDeg=(0,r.Dt)(a.rotateDeg),a}}function a(t,e,i,r,n,a,o,l){let h,u;let d=e.a,c=e.b,p=e.c,g=e.d,m=e.e,f=e.f,v=(0,s.mC)(o),y=(0,s.O$)(o);l?(h=l[0],u=l[1]):(h=i,u=r);let _=h-i,b=u-r,x=d*v+p*y,S=c*v+g*y,A=p*v-d*y,k=g*v-c*y;t.a=n*x,t.b=n*S,t.c=a*A,t.d=a*k,t.e=m+d*h+p*u-x*_-A*b,t.f=f+c*h+g*u-S*_-k*b}},2683:function(t,e,i){"use strict";i.d(e,{E9:()=>n,HL:()=>a});var r=i(1601),s=i(8103);class n{constructor(t=0,e=0,i,r){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=i,this.y1=r}clone(){return new n(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return(0,r.Z)(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return(0,r.Z)(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw Error("暂不支持")}div(t){throw Error("暂不支持")}}class a{static distancePP(t,e){return(0,s._b)((0,s.sQ)(t.x-e.x,2)+(0,s.sQ)(t.y-e.y,2))}static distanceNN(t,e,i,r){return(0,s._b)((0,s.sQ)(t-i,2)+(0,s.sQ)(e-r,2))}static distancePN(t,e,i){return(0,s._b)((0,s.sQ)(e-t.x,2)+(0,s.sQ)(i-t.y,2))}static pointAtPP(t,e,i){return new n((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y)}}},1725:function(t,e,i){"use strict";function r(t,e=0,i=0){let s;if(!t)return{width:e,height:i};try{s=null==window?void 0:window.getComputedStyle}catch(t){s=()=>({})}let n=s(t);if(/^(\d*\.?\d+)(px)$/.exec(n.width)){let r=parseFloat(n.width)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)||t.clientWidth-1,s=parseFloat(n.height)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)||t.clientHeight-1;return{width:r<=0?e:r,height:s<=0?i:s}}return{width:e,height:i}}function s(t){let{x:e,y:i}=t.getBoundingClientRect();return{x:e,y:i}}i.d(e,{Op:()=>r,Z2:()=>a,to:()=>s,wv:()=>n});let n=(t="")=>{let e={};return t.split(";").forEach(t=>{if(t){let i=t.split(":");if(2===i.length){let t=i[0].trim(),r=i[1].trim();t&&r&&(e[t]=r)}}}),e},a=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase()},9711:function(t,e,i){"use strict";i.d(e,{k:()=>r});class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=t=>this.locale_shortWeekdays[t.getDay()],this.formatWeekday=t=>this.locale_weekdays[t.getDay()],this.formatShortMonth=t=>this.locale_shortMonths[t.getMonth()],this.formatMonth=t=>this.locale_months[t.getMonth()],this.formatDayOfMonth=(t,e)=>this.pad(t.getDate(),e,2),this.formatHour24=(t,e)=>this.pad(t.getHours(),e,2),this.formatHour12=(t,e)=>this.pad(t.getHours()%12||12,e,2),this.formatMilliseconds=(t,e)=>this.pad(t.getMilliseconds(),e,3),this.formatMonthNumber=(t,e)=>this.pad(t.getMonth()+1,e,2),this.formatMinutes=(t,e)=>this.pad(t.getMinutes(),e,2),this.formatPeriod=t=>this.locale_periods[+(t.getHours()>=12)],this.formatSeconds=(t,e)=>this.pad(t.getSeconds(),e,2),this.formatFullYear=(t,e)=>this.pad(t.getFullYear()%1e4,e,4),this.formatUTCShortWeekday=t=>this.locale_shortWeekdays[t.getUTCDay()],this.formatUTCWeekday=t=>this.locale_weekdays[t.getUTCDay()],this.formatUTCShortMonth=t=>this.locale_shortMonths[t.getUTCMonth()],this.formatUTCMonth=t=>this.locale_months[t.getUTCMonth()],this.formatUTCDayOfMonth=(t,e)=>this.pad(t.getUTCDate(),e,2),this.formatUTCHour24=(t,e)=>this.pad(t.getUTCHours(),e,2),this.formatUTCHour12=(t,e)=>this.pad(t.getUTCHours()%12||12,e,2),this.formatUTCMilliseconds=(t,e)=>this.pad(t.getUTCMilliseconds(),e,3),this.formatUTCMonthNumber=(t,e)=>this.pad(t.getUTCMonth()+1,e,2),this.formatUTCMinutes=(t,e)=>this.pad(t.getUTCMinutes(),e,2),this.formatUTCPeriod=t=>this.locale_periods[+(t.getUTCHours()>=12)],this.formatUTCSeconds=(t,e)=>this.pad(t.getUTCSeconds(),e,2),this.formatUTCFullYear=(t,e)=>this.pad(t.getUTCFullYear()%1e4,e,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(t,e,i)=>{let r=this.shortWeekdayRe.exec(e.slice(i));return r?(t.w=this.shortWeekdayLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseWeekday=(t,e,i)=>{let r=this.weekdayRe.exec(e.slice(i));return r?(t.w=this.weekdayLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseShortMonth=(t,e,i)=>{let r=this.shortMonthRe.exec(e.slice(i));return r?(t.m=this.shortMonthLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseMonth=(t,e,i)=>{let r=this.monthRe.exec(e.slice(i));return r?(t.m=this.monthLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseDayOfMonth=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1},this.parseHour24=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1},this.parseMilliseconds=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1},this.parseMonthNumber=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.m=r-1,i+r[0].length):-1},this.parseMinutes=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1},this.parsePeriod=(t,e,i)=>{let r=this.periodRe.exec(e.slice(i));return r?(t.p=this.periodLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseSeconds=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1},this.parseFullYear=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(t,e)=>this.newFormat(t,this.formats)(new Date(this.getFullTimeStamp(e))),this.timeUTCFormat=(t,e)=>this.newFormat(t,this.utcFormats)(new Date(this.getFullTimeStamp(e))),this.timeParse=(t,e)=>this.newParse(t,!1)(e+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(t){return t.replace(this.requoteRe,"\\$&")}localDate(t){if(0<=t.y&&t.y<100){let e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}utcDate(t){if(0<=t.y&&t.y<100){let e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}newDate(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}formatRe(t){return RegExp("^(?:"+t.map(this.requoteF).join("|")+")","i")}formatLookup(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}pad(t,e,i){let r=t<0?"-":"",s=(r?-t:t)+"",n=s.length;return r+(n<i?Array(i-n+1).join(e)+s:s)}parseSpecifier(t,e,i,r){let s,n,a=0,o=e.length,l=i.length;for(;a<o;){if(r>=l)return -1;if(37===(s=e.charCodeAt(a++))){if(s=e.charAt(a++),!(n=this.parses[s in this.pads?e.charAt(a++):s])||(r=n(t,i,r))<0)return -1}else if(s!==i.charCodeAt(r++))return -1}return r}newParse(t,e){let i=this;return function(r){let s=i.newDate(1900,void 0,1);return i.parseSpecifier(s,t,r+="",0)!==r.length?null:"Q"in s?new Date(s.Q):"s"in s?new Date(1e3*s.s+("L"in s?s.L:0)):(!e||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,i.utcDate(s)):i.localDate(s))}}newFormat(t,e){let i=this;return function(r){let s,n;let a=[],o=-1,l=0,h=t.length;for(r instanceof Date||(r=new Date(+r));++o<h;)37===t.charCodeAt(o)&&(a.push(t.slice(l,o)),(n=i.pads[s=t.charAt(++o)])?s=t.charAt(++o):n="e"===s?" ":"0",a.push(s=(0,e[s])(r,n)),l=o+1);return a.push(t.slice(l,o)),a.join("")}}getFullTimeStamp(t){let e=parseInt(t+"",10);return 10===String(e).length?1e3*e:e}}},8654:function(t,e,i){"use strict";i.d(e,{Kj:()=>o,SX:()=>u,di:()=>l,nn:()=>f,qr:()=>d,xj:()=>p});var r,s,n=i(1805),a=i(8103);function o(t,e,i,r){let s=t[0],n=e[0],a=i[0],o=r[0];return n<s&&([s,n]=[n,s]),o<a&&([o,a]=[a,o]),!(n<a||o<s)&&(s=t[1],n=e[1],a=i[1],o=r[1],n<s&&([s,n]=[n,s]),o<a&&([o,a]=[a,o]),!(n<a||o<s))}function l(t,e,i){if(null===t)return e;if(null===e)return t;let{x11:r,x12:s,y11:n,y12:a,x21:o,x22:l,y21:u,y22:d}=h(t,e,i);return r>=l||s<=o||n>=d||a<=u?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(r,o),y1:Math.max(n,u),x2:Math.min(s,l),y2:Math.min(a,d)}}(r=s||(s={}))[r.NONE=0]="NONE",r[r.BBOX1=1]="BBOX1",r[r.BBOX2=2]="BBOX2";let h=(t,e,i)=>{let r=t.x1,s=t.x2,n=t.y1,a=t.y2,o=e.x1,l=e.x2,h=e.y1,u=e.y2;return i&&(r>s&&([r,s]=[s,r]),n>a&&([n,a]=[a,n]),o>l&&([o,l]=[l,o]),h>u&&([h,u]=[u,h])),{x11:r,x12:s,y11:n,y12:a,x21:o,x22:l,y21:h,y22:u}};function u(t,e,i){if(t&&e){if(!i)return!(t.x1>e.x2||t.x2<e.x1||t.y1>e.y2||t.y2<e.y1);let{x11:r,x12:s,y11:n,y12:a,x21:o,x22:l,y21:u,y22:d}=h(t,e,!0);return!(r>l||s<o||n>d||a<u)}return!0}function d(t,e,i){if(!e)return!0;if(!i)return t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2;let r=e.x1,s=e.x2,n=e.y1,a=e.y2;return r>s&&([r,s]=[s,r]),n>a&&([n,a]=[a,n]),t.x>=r&&t.x<=s&&t.y>=n&&t.y<=a}function c(t,e){return Math.abs(e[0]*t[0]+e[1]*t[1])}function p({x:t,y:e},i,r={x:0,y:0}){return{x:(t-r.x)*Math.cos(i)-(e-r.y)*Math.sin(i)+r.x,y:(t-r.x)*Math.sin(i)+(e-r.y)*Math.cos(i)+r.y}}function g(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}}function m(t,e){let i=e?(0,n.M4)(t.angle):t.angle,r=g(t);return[p({x:t.x1,y:t.y1},i,r),p({x:t.x2,y:t.y1},i,r),p({x:t.x2,y:t.y2},i,r),p({x:t.x1,y:t.y2},i,r)]}function f(t,e,i=!1){let r=m(t,i),s=m(e,i),o=(t,e)=>[e.x-t.x,e.y-t.y],l=o(g(t),g(e)),h=o(r[0],r[1]),u=o(r[1],r[2]),d=o(s[0],s[1]),p=o(s[1],s[2]),v=i?(0,n.M4)(t.angle):t.angle,y=i?(0,n.M4)(90-t.angle):t.angle+a.ou,_=i?(0,n.M4)(e.angle):e.angle,b=i?(0,n.M4)(90-e.angle):e.angle+a.ou;y>a.f7&&(y-=a.f7),b>a.f7&&(b-=a.f7);let x=(t,e,i,r)=>{let s=[Math.cos(e),Math.sin(e)];return t+(c(s,i)+c(s,r))/2>c(s,l)};return x((t.x2-t.x1)/2,v,d,p)&&x((t.y2-t.y1)/2,y,d,p)&&x((e.x2-e.x1)/2,_,h,u)&&x((e.y2-e.y1)/2,b,h,u)}},8727:function(t,e,i){"use strict";i.d(e,{v:()=>r});let r=(t,e)=>{let{x1:i,x2:r,y1:s,y2:n}=t,a=Math.abs(r-i),o=Math.abs(n-s),l=(i+r)/2,h=(s+n)/2,u=0,d=0;switch(e){case"top":case"inside-top":d=-.5;break;case"bottom":case"inside-bottom":d=.5;break;case"left":case"inside-left":u=-.5;break;case"right":case"inside-right":u=.5;break;case"top-right":u=.5,d=-.5;break;case"top-left":u=-.5,d=-.5;break;case"bottom-right":u=.5,d=.5;break;case"bottom-left":u=-.5,d=.5}return{x:l+=u*a,y:h+=d*o}}},8485:function(t,e,i){"use strict";i.d(e,{e:()=>h});var r=i(7623),s=i(6082),n=i(9904),a=i(7636);let o=t=>{let e=t.charCodeAt(0),i=2===t.length?t.charCodeAt(1):0,r=e;return 55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e&=1023,i&=1023,r=(e<<10|i)+65536),12288===r||65281<=r&&r<=65376||65504<=r&&r<=65510?"F":8361===r||65377<=r&&r<=65470||65474<=r&&r<=65479||65482<=r&&r<=65487||65490<=r&&r<=65495||65498<=r&&r<=65500||65512<=r&&r<=65518?"H":4352<=r&&r<=4447||4515<=r&&r<=4519||4602<=r&&r<=4607||9001<=r&&r<=9002||11904<=r&&r<=11929||11931<=r&&r<=12019||12032<=r&&r<=12245||12272<=r&&r<=12283||12289<=r&&r<=12350||12353<=r&&r<=12438||12441<=r&&r<=12543||12549<=r&&r<=12589||12593<=r&&r<=12686||12688<=r&&r<=12730||12736<=r&&r<=12771||12784<=r&&r<=12830||12832<=r&&r<=12871||12880<=r&&r<=13054||13056<=r&&r<=19903||19968<=r&&r<=42124||42128<=r&&r<=42182||43360<=r&&r<=43388||44032<=r&&r<=55203||55216<=r&&r<=55238||55243<=r&&r<=55291||63744<=r&&r<=64255||65040<=r&&r<=65049||65072<=r&&r<=65106||65108<=r&&r<=65126||65128<=r&&r<=65131||110592<=r&&r<=110593||127488<=r&&r<=127490||127504<=r&&r<=127546||127552<=r&&r<=127560||127568<=r&&r<=127569||131072<=r&&r<=194367||177984<=r&&r<=196605||196608<=r&&r<=262141?"W":32<=r&&r<=126||162<=r&&r<=163||165<=r&&r<=166||172===r||175===r||10214<=r&&r<=10221||10629<=r&&r<=10630?"Na":161===r||164===r||167<=r&&r<=168||170===r||173<=r&&r<=174||176<=r&&r<=180||182<=r&&r<=186||188<=r&&r<=191||198===r||208===r||215<=r&&r<=216||222<=r&&r<=225||230===r||232<=r&&r<=234||236<=r&&r<=237||240===r||242<=r&&r<=243||247<=r&&r<=250||252===r||254===r||257===r||273===r||275===r||283===r||294<=r&&r<=295||299===r||305<=r&&r<=307||312===r||319<=r&&r<=322||324===r||328<=r&&r<=331||333===r||338<=r&&r<=339||358<=r&&r<=359||363===r||462===r||464===r||466===r||468===r||470===r||472===r||474===r||476===r||593===r||609===r||708===r||711===r||713<=r&&r<=715||717===r||720===r||728<=r&&r<=731||733===r||735===r||768<=r&&r<=879||913<=r&&r<=929||931<=r&&r<=937||945<=r&&r<=961||963<=r&&r<=969||1025===r||1040<=r&&r<=1103||1105===r||8208===r||8211<=r&&r<=8214||8216<=r&&r<=8217||8220<=r&&r<=8221||8224<=r&&r<=8226||8228<=r&&r<=8231||8240===r||8242<=r&&r<=8243||8245===r||8251===r||8254===r||8308===r||8319===r||8321<=r&&r<=8324||8364===r||8451===r||8453===r||8457===r||8467===r||8470===r||8481<=r&&r<=8482||8486===r||8491===r||8531<=r&&r<=8532||8539<=r&&r<=8542||8544<=r&&r<=8555||8560<=r&&r<=8569||8585===r||8592<=r&&r<=8601||8632<=r&&r<=8633||8658===r||8660===r||8679===r||8704===r||8706<=r&&r<=8707||8711<=r&&r<=8712||8715===r||8719===r||8721===r||8725===r||8730===r||8733<=r&&r<=8736||8739===r||8741===r||8743<=r&&r<=8748||8750===r||8756<=r&&r<=8759||8764<=r&&r<=8765||8776===r||8780===r||8786===r||8800<=r&&r<=8801||8804<=r&&r<=8807||8810<=r&&r<=8811||8814<=r&&r<=8815||8834<=r&&r<=8835||8838<=r&&r<=8839||8853===r||8857===r||8869===r||8895===r||8978===r||9312<=r&&r<=9449||9451<=r&&r<=9547||9552<=r&&r<=9587||9600<=r&&r<=9615||9618<=r&&r<=9621||9632<=r&&r<=9633||9635<=r&&r<=9641||9650<=r&&r<=9651||9654<=r&&r<=9655||9660<=r&&r<=9661||9664<=r&&r<=9665||9670<=r&&r<=9672||9675===r||9678<=r&&r<=9681||9698<=r&&r<=9701||9711===r||9733<=r&&r<=9734||9737===r||9742<=r&&r<=9743||9748<=r&&r<=9749||9756===r||9758===r||9792===r||9794===r||9824<=r&&r<=9825||9827<=r&&r<=9829||9831<=r&&r<=9834||9836<=r&&r<=9837||9839===r||9886<=r&&r<=9887||9918<=r&&r<=9919||9924<=r&&r<=9933||9935<=r&&r<=9953||9955===r||9960<=r&&r<=9983||10045===r||10071===r||10102<=r&&r<=10111||11093<=r&&r<=11097||12872<=r&&r<=12879||57344<=r&&r<=63743||65024<=r&&r<=65039||65533===r||127232<=r&&r<=127242||127248<=r&&r<=127277||127280<=r&&r<=127337||127344<=r&&r<=127386||917760<=r&&r<=917999||983040<=r&&r<=1048573||1048576<=r&&r<=1114109?"A":"N"};var l=i(7183);class h{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet="-/: .,@%'\"~",this._option=t,this._userSpec=null!=e?e:{},this.textSpec=this._initSpec(),(0,r.Z)(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=(0,r.Z)(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if((0,s.Z)(this._canvas)&&((0,r.Z)(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),(0,s.Z)(this._canvas)&&"undefined"!=typeof window&&void 0!==window.document&&globalThis&&(0,r.Z)(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),(0,s.Z)(this._context)&&(0,r.Z)(this._canvas)){let t=this._canvas.getContext("2d");(0,r.Z)(t)&&(t.save(),t.font=(0,l.U)(this.textSpec),this._contextSaved=!0,this._context=t)}return!(0,s.Z)(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;let{defaultFontParams:r={}}=this._option,{fontStyle:s=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:o=null!==(t=r.fontWeight)&&void 0!==t?t:"normal",fontSize:l=null!==(e=r.fontSize)&&void 0!==e?e:12,fontFamily:h=null!==(i=r.fontFamily)&&void 0!==i?i:"sans-serif",align:u,textAlign:d=null!=u?u:"center",baseline:c,textBaseline:p=null!=c?c:"middle",ellipsis:g,limit:m}=this._userSpec,{lineHeight:f=l}=this._userSpec;return(0,n.Z)(f)&&"%"===f[f.length-1]&&(f=l*(Number.parseFloat(f.substring(0,f.length-1))/100)),{fontStyle:s,fontVariant:a,fontFamily:h,fontSize:l,fontWeight:o,textAlign:d,textBaseline:p,ellipsis:g,limit:m,lineHeight:f}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){let e;if((0,s.Z)(t))return{width:0,height:0};if((0,s.Z)(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);let{fontFamily:i,fontSize:r,fontWeight:n,textAlign:a,textBaseline:o,ellipsis:l,limit:h,lineHeight:u}=this.textSpec;try{let s=this._option.getTextBounds({text:t,fontFamily:i,fontSize:r,fontWeight:n,textAlign:a,textBaseline:o,ellipsis:!!l,maxLineWidth:h||1/0,lineHeight:u});e={width:s.width(),height:s.height()}}catch(i){this._notSupportVRender=!0,e=this.measureWithNaiveCanvas(t)}return e}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){if(!this.initContext())return this._quickMeasureWithoutCanvas(t);let e=this._context.measureText(t),{fontSize:i,lineHeight:r}=this.textSpec;return{width:e.width,height:null!=r?r:i,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){let e={width:0,height:0};for(let i=0;i<t.length;i++){let r=t[i],n=this._measureSpecialChar(r);(0,s.Z)(n)&&h.NUMBERS_CHAR_SET.includes(r)&&(n=this._measureNumberChar()),(0,s.Z)(n)&&["F","W"].includes(o(r))&&(n=this._measureFullSizeChar()),(0,s.Z)(n)&&(n=this._measureLetterChar()),e.width+=n.width,e.height=Math.max(e.height,n.height),(0,s.Z)(n.fontBoundingBoxAscent)||(e.fontBoundingBoxAscent=n.fontBoundingBoxAscent),(0,s.Z)(n.fontBoundingBoxDescent)||(e.fontBoundingBoxDescent=n.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){let e={width:0,height:0},{fontSize:i,lineHeight:r}=this.textSpec;for(let r=0;r<t.length;r++){let s=["F","W"].includes(o(t[r]))?1:.53;e.width+=s*i}return e.height=null!=r?r:i,e}_measureReduce(t,e){let{fontSize:i,lineHeight:n}=this.textSpec,o={width:0,height:0};if((0,s.Z)(t))return o;if((0,a.Z)(t)){let s=t.filter(r.Z).map(t=>t.toString());return 0===s.length?o:1===s.length?e(s[0]):{width:s.reduce((t,i)=>Math.max(t,e(i).width),0),height:s.length*((null!=n?n:i)+1)+1}}return e(t.toString())}_measureNumberChar(){if((0,s.Z)(this._numberCharSize)){let t=this._standardMethod(h.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/h.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return(0,s.Z)(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(h.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if((0,s.Z)(this._letterCharSize)){let t=this._standardMethod(h.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/h.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return(0,r.Z)(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){(0,r.Z)(this._canvas)&&(this._canvas=null),(0,r.Z)(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}h.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",h.NUMBERS_CHAR_SET="0123456789",h.FULL_SIZE_CHAR="字"},7183:function(t,e,i){"use strict";function r(t,e={},i){i||(i=1);let{fontStyle:s=e.fontStyle,fontVariant:n=e.fontVariant,fontWeight:a=e.fontWeight,fontSize:o=e.fontSize,fontFamily:l=e.fontFamily}=t;return(s?s+" ":"")+(n?n+" ":"")+(a?a+" ":"")+o*i+"px "+(l||"sans-serif")}i.d(e,{U:()=>r})},4659:function(t,e,i){"use strict";i.d(e,{Y:()=>l,h:()=>s});var r,s,n=i(1601);let a="undefined"!=typeof console;function o(t,e,i){let r=[e].concat([].slice.call(i));a&&console[t].apply(console,r)}(r=s||(s={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Info=3]="Info",r[r.Debug=4]="Debug";class l{static getInstance(t,e){return l._instance&&(0,n.Z)(t)?l._instance.level(t):l._instance||(l._instance=new l(t,e)),l._instance}static setInstance(t){return l._instance=t}static setInstanceLevel(t){l._instance?l._instance.level(t):l._instance=new l(t)}static clearInstance(){l._instance=null}constructor(t=s.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){let e=this._onErrorHandler.findIndex(e=>e===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=s.Info}canLogDebug(){return this._level>=s.Debug}canLogError(){return this._level>=s.Error}canLogWarn(){return this._level>=s.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=s.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):o(null!==(e=this._method)&&void 0!==e?e:"error","ERROR",t)),this}warn(...t){return this._level>=s.Warn&&o(this._method||"warn","WARN",t),this}info(...t){return this._level>=s.Info&&o(this._method||"log","INFO",t),this}debug(...t){return this._level>=s.Debug&&o(this._method||"log","DEBUG",t),this}}l._instance=null},8103:function(t,e,i){"use strict";i.d(e,{BZ:()=>a,Fp:()=>d,Ho:()=>r,KU:()=>y,Kh:()=>f,O$:()=>p,VV:()=>c,Wn:()=>l,ZR:()=>v,_b:()=>g,f2:()=>x,f7:()=>o,fv:()=>h,i4:()=>b,ir:()=>_,mC:()=>u,ou:()=>n,pi:()=>s,sQ:()=>m});let r=1e-12,s=Math.PI,n=s/2,a=2*s,o=2*Math.PI,l=Math.abs,h=Math.atan2,u=Math.cos,d=Math.max,c=Math.min,p=Math.sin,g=Math.sqrt,m=Math.pow;function f(t){return t>1?0:t<-1?s:Math.acos(t)}function v(t){return t>=1?n:t<=-1?-n:Math.asin(t)}function y(t,e,i,r,s){let n=i,a=r;return"number"==typeof t&&"number"==typeof i&&(n=(1-s)*t+s*i),"number"==typeof e&&"number"==typeof r&&(a=(1-s)*e+s*r),{x:n,y:a}}function _(t,e){return t[0]*e[1]-t[1]*e[0]}function b(t){let e=t.toString().split(/[eE]/),i=(e[0].split(".")[1]||"").length-(+e[1]||0);return i>0?i:0}function x(t,e){return function(t,e=10){return Math.round(t*e)/e}(t-e,10**Math.max(b(t),b(e)))}},3215:function(t,e,i){"use strict";i.d(e,{o:()=>a});var r=i(8378),s=i(7636),n=i(4154);function a(t){if((0,r.Z)(t))return[t,t,t,t];if((0,s.Z)(t)){let e=t.length;if(1===e){let e=t[0];return[e,e,e,e]}if(2===e){let[e,i]=t;return[e,i,e,i]}if(3===e){let[e,i,r]=t;return[e,i,r,i]}if(4===e)return t}if((0,n.Z)(t)){let{top:e=0,right:i=0,bottom:r=0,left:s=0}=t;return[e,i,r,s]}return[0,0,0,0]}},2107:function(t,e){"use strict";e.parse=function(t){for(var e,i=[],r=String(t||""),s=r.indexOf(","),n=0,a=!1;!a;)-1===s&&(s=r.length,a=!0),((e=r.slice(n,s).trim())||!a)&&i.push(e),n=s+1,s=r.indexOf(",",n);return i}},874:function(t,e,i){"use strict";var r=i(6935),s={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var i,n,a,o,l,h,u,d,c=!1;e||(e={}),a=e.debug||!1;try{if(l=r(),h=document.createRange(),u=document.getSelection(),(d=document.createElement("span")).textContent=t,d.ariaHidden="true",d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(i){if(i.stopPropagation(),e.format){if(i.preventDefault(),void 0===i.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=s[e.format]||s.default;window.clipboardData.setData(r,t)}else i.clipboardData.clearData(),i.clipboardData.setData(e.format,t)}e.onCopy&&(i.preventDefault(),e.onCopy(i.clipboardData))}),document.body.appendChild(d),h.selectNodeContents(d),u.addRange(h),!document.execCommand("copy"))throw Error("copy command was unsuccessful");c=!0}catch(r){a&&console.error("unable to copy using execCommand: ",r),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(r){a&&console.error("unable to copy using clipboardData: ",r),a&&console.error("falling back to prompt"),i="message"in e?e.message:"Copy to clipboard: #{key}, Enter",n=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",o=i.replace(/#{\s*key\s*}/g,n),window.prompt(o,t)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(h):u.removeAllRanges()),d&&document.body.removeChild(d),l()}return c}},1312:function(t){"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function n(t,e,r,n,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new s(r,n||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,s=[];if(0===this._eventsCount)return s;for(r in t=this._events)e.call(t,r)&&s.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,n=r.length,a=Array(n);s<n;s++)a[s]=r[s].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,s,n,a){var o=i?i+t:t;if(!this._events[o])return!1;var l,h,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,s),!0;case 5:return u.fn.call(u.context,e,r,s,n),!0;case 6:return u.fn.call(u.context,e,r,s,n,a),!0}for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var c,p=u.length;for(h=0;h<p;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),d){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,r);break;case 4:u[h].fn.call(u[h].context,e,r,s);break;default:if(!l)for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u[h].fn.apply(u[h].context,l)}}return!0},o.prototype.on=function(t,e,i){return n(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return n(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,s){var n=i?i+t:t;if(!this._events[n])return this;if(!e)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||s&&!o.once||r&&o.context!==r||a(this,n);else{for(var l=0,h=[],u=o.length;l<u;l++)(o[l].fn!==e||s&&!o[l].once||r&&o[l].context!==r)&&h.push(o[l]);h.length?this._events[n]=1===h.length?h[0]:h:a(this,n)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},4892:function(t){"use strict";t.exports=function(t,i){for(var r,s,n,a=t||"",o=i||"div",l={},h=0;h<a.length;)e.lastIndex=h,n=e.exec(a),(r=a.slice(h,n?n.index:a.length))&&(s?"#"===s?l.id=r:l.className?l.className.push(r):l.className=[r]:o=r,h+=r.length),n&&(s=n[0],h++);return{type:"element",tagName:o,properties:l,children:[]}};var e=/[#.]/g},3333:function(t,e,i){"use strict";var r=i(6613),s=i(5678),n=i(4892),a=i(2868).parse,o=i(2107).parse;t.exports=function(t,e,i){var s=i?function(t){for(var e,i=t.length,r=-1,s={};++r<i;)s[(e=t[r]).toLowerCase()]=e;return s}(i):null;return function(i,u){var d,c,p,g,m,f,v=n(i,e),y=Array.prototype.slice.call(arguments,2),_=v.tagName.toLowerCase();if(v.tagName=s&&l.call(s,_)?s[_]:_,u&&(d=u,c=v,"string"==typeof d||"length"in d||(p=c.tagName,m=(g=d).type,"input"!==p&&m&&"string"==typeof m&&("object"==typeof g.children&&"length"in g.children||((m=m.toLowerCase(),"button"===p)?"menu"!==m&&"submit"!==m&&"reset"!==m&&"button"!==m:"value"in g))))&&(y.unshift(u),u=null),u)for(f in u)!function(e,i,s){var n,l,u;null!=s&&s==s&&(l=(n=r(t,i)).property,"string"==typeof(u=s)&&(n.spaceSeparated?u=a(u):n.commaSeparated?u=o(u):n.commaOrSpaceSeparated&&(u=a(o(u).join(" ")))),"style"===l&&"string"!=typeof s&&(u=function(t){var e,i=[];for(e in t)i.push([e,t[e]].join(": "));return i.join("; ")}(u)),"className"===l&&e.className&&(u=e.className.concat(u)),e[l]=function(t,e,i){var r,s,n;if("object"!=typeof i||!("length"in i))return h(t,e,i);for(s=i.length,r=-1,n=[];++r<s;)n[r]=h(t,e,i[r]);return n}(n,l,u))}(v.properties,f,u[f]);return function t(e,i){var r,s;if("string"==typeof i||"number"==typeof i){e.push({type:"text",value:String(i)});return}if("object"==typeof i&&"length"in i){for(r=-1,s=i.length;++r<s;)t(e,i[r]);return}if("object"!=typeof i||!("type"in i))throw Error("Expected node, nodes, or string, got `"+i+"`");e.push(i)}(v.children,y),"template"===v.tagName&&(v.content={type:"root",children:v.children},v.children=[]),v}};var l={}.hasOwnProperty;function h(t,e,i){var r=i;return t.number||t.positiveNumber?isNaN(r)||""===r||(r=Number(r)):(t.boolean||t.overloadedBoolean)&&"string"==typeof r&&(""===r||s(i)===s(e))&&(r=!0),r}},6274:function(t,e,i){"use strict";var r=i(6621),s=i(3333)(r,"div");s.displayName="html",t.exports=s},6675:function(t,e,i){"use strict";t.exports=i(6274)},2640:function(t,e,i){var r;r=function(t){"use strict";function e(t){return t.replace(/(-|:)(.)/g,function(t,e,i){return i.toUpperCase()})}t=t&&t.hasOwnProperty("default")?t.default:t;var i=["table","tbody","thead","tfoot","tr"],r={for:"htmlFor",class:"className",allowfullscreen:["allowFullScreen","allowFullscreen"],autocomplete:"autoComplete",autofocus:["autoFocus"],contenteditable:"contentEditable",spellcheck:"spellCheck",srcdoc:"srcDoc",srcset:"srcSet",itemscope:"itemScope",itemprop:"itemProp",itemtype:"itemType"};function s(t,e){var i=r[e],s=document.createElement(t);if(i)return{name:Array.isArray(i)?i[0]:i,isBoolean:n(s,Array.isArray(i)?i[1]||e:i)};for(var a in s)if(a.toLowerCase()===e.toLowerCase())return{name:a,isBoolean:n(s,a)};return{name:e,isBoolean:n(s,e)}}function n(t,e){return t.setAttribute(e,""),!0===t[e]||a.indexOf(e)>-1}var a=["itemScope"];function o(e,i,r,s){void 0===s&&(s=null);var n=r[e],a=r._;return n?t.createElement(n,i,s):a?a(e,i,s):t.createElement(e,i,s)}return function(t,r){if(void 0===r&&(r={}),"string"!=typeof t)throw TypeError("Expected HTML string");var n=document.createElement("div");n.innerHTML=t.trim();var a=Array.from(n.childNodes).map(function(t,n){return function t(r,n,a){var l,h=a.transform||{},u=a.preserveAttributes||[],d=a.dangerouslySetChildren||["style"],c=h._;if(8===r.nodeType)return null;if(3===r.nodeType){var p=r.textContent;return c?c(p):p}for(var g={},m=r.attributes,f=0;f<m.length;f++)g[m[f].name]=m[f].value;g.key=n.toString();var v=r.tagName.toLowerCase(),y=(void 0===(l=g)&&(l={}),Object.keys(l).reduce(function(t,i){if(/^on.*/.test(i))return t;var r=i;/^(data|aria)-/.test(i)||0===u.filter(function(t){return t instanceof RegExp?t.test(i):t===i}).length&&(r=e(i));var n,a,o=s(v,r);if("style"===o.name)t[o.name]=(n=l.style,a={},n.split(";").filter(function(t){return""!==t.trim()}).forEach(function(t){var i,r=t.split(":");if(r.length>1){var s,n=(s=r[0].trim(),/^-ms-/.test(s)&&(s=s.substr(1)),s.startsWith("--")?s:e(s)),o=(i=r.slice(1).join(":").trim(),/^\d+$/.test(i)?Number(i):i.replace(/'/g,'"'));a[n]=o}}),a);else{var h=l[i],d=""===h||String(h).toLowerCase()===r.toLowerCase();t[o.name]=o.isBoolean?d:h}return t},{})),_=Array.from(r.childNodes).map(function(e,r){return i.indexOf(v)>-1&&3===e.nodeType&&(e.textContent=e.textContent.trim(),""===e.textContent)?null:t(e,n+"."+r,a)}).filter(Boolean);if(d.indexOf(v)>-1){var b=r.innerHTML;return b&&("style"!==v&&"script"!==v&&(b=b.replace(/"/g,"&quot;")),y.dangerouslySetInnerHTML={__html:b.trim()}),o(v,y,h)}return o(v,y,h,0===_.length?null:_)}(t,String(n),r)}).filter(Boolean);return 1===a.length?a[0]:a}},t.exports=r(i(5271))},3670:function(t){"use strict";t.exports=function(t,e,i,r,s,n,a,o){if(!t){var l;if(void 0===e)l=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[i,r,s,n,a,o],u=0;(l=Error(e.replace(/%s/g,function(){return h[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},4599:function(t){"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}},1831:function(t,e,i){"use strict";var r=i(4599),s=i(8451);t.exports=function(t){return r(t)||s(t)}},8451:function(t){"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=48&&e<=57}},9401:function(t){"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}},9981:function(t){var e;e=function(){var t,e,i,r={};r.version="0.2.0";var s=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(t,e,i){return t<e?e:t>i?i:t}r.configure=function(t){var e,i;for(e in t)void 0!==(i=t[e])&&t.hasOwnProperty(e)&&(s[e]=i);return this},r.status=null,r.set=function(t){var e=r.isStarted();t=n(t,s.minimum,1),r.status=1===t?null:t;var i=r.render(!e),l=i.querySelector(s.barSelector),h=s.speed,u=s.easing;return i.offsetWidth,a(function(e){var n,a,d,c;""===s.positionUsing&&(s.positionUsing=r.getPositioningCSS()),o(l,(n=t,a=h,d=u,(c="translate3d"===s.positionUsing?{transform:"translate3d("+(-1+n)*100+"%,0,0)"}:"translate"===s.positionUsing?{transform:"translate("+(-1+n)*100+"%,0)"}:{"margin-left":(-1+n)*100+"%"}).transition="all "+a+"ms "+d,c)),1===t?(o(i,{transition:"none",opacity:1}),i.offsetWidth,setTimeout(function(){o(i,{transition:"all "+h+"ms linear",opacity:0}),setTimeout(function(){r.remove(),e()},h)},h)):setTimeout(e,h)}),this},r.isStarted=function(){return"number"==typeof r.status},r.start=function(){r.status||r.set(0);var t=function(){setTimeout(function(){r.status&&(r.trickle(),t())},s.trickleSpeed)};return s.trickle&&t(),this},r.done=function(t){return t||r.status?r.inc(.3+.5*Math.random()).set(1):this},r.inc=function(t){var e=r.status;return e?("number"!=typeof t&&(t=(1-e)*n(Math.random()*e,.1,.95)),e=n(e+t,0,.994),r.set(e)):r.start()},r.trickle=function(){return r.inc(Math.random()*s.trickleRate)},t=0,e=0,r.promise=function(i){return i&&"resolved"!==i.state()&&(0===e&&r.start(),t++,e++,i.always(function(){0==--e?(t=0,r.done()):r.set((t-e)/t)})),this},r.render=function(t){if(r.isRendered())return document.getElementById("nprogress");h(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=s.template;var i,n=e.querySelector(s.barSelector),a=t?"-100":(-1+(r.status||0))*100,l=document.querySelector(s.parent);return o(n,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),!s.showSpinner&&(i=e.querySelector(s.spinnerSelector))&&c(i),l!=document.body&&h(l,"nprogress-custom-parent"),l.appendChild(e),e},r.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(s.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&c(t)},r.isRendered=function(){return!!document.getElementById("nprogress")},r.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var a=(i=[],function(t){i.push(t),1==i.length&&function t(){var e=i.shift();e&&e(t)}()}),o=function(){var t=["Webkit","O","Moz","ms"],e={};function i(i,r,s){var n;r=e[n=(n=r).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})]||(e[n]=function(e){var i=document.body.style;if(e in i)return e;for(var r,s=t.length,n=e.charAt(0).toUpperCase()+e.slice(1);s--;)if((r=t[s]+n)in i)return r;return e}(n)),i.style[r]=s}return function(t,e){var r,s,n=arguments;if(2==n.length)for(r in e)void 0!==(s=e[r])&&e.hasOwnProperty(r)&&i(t,r,s);else i(t,n[1],n[2])}}();function l(t,e){return("string"==typeof t?t:d(t)).indexOf(" "+e+" ")>=0}function h(t,e){var i=d(t),r=i+e;l(i,e)||(t.className=r.substring(1))}function u(t,e){var i,r=d(t);l(t,e)&&(i=r.replace(" "+e+" "," "),t.className=i.substring(1,i.length-1))}function d(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function c(t){t&&t.parentNode&&t.parentNode.removeChild(t)}return r},"function"==typeof define&&define.amd?define(e):t.exports=e()},3026:function(t){"use strict";var e;t.exports=function(t){var i,r="&"+t+";";return(e=e||document.createElement("i")).innerHTML=r,(59!==(i=e.textContent).charCodeAt(i.length-1)||"semi"===t)&&i!==r&&i}},3177:function(t,e,i){"use strict";var r=i(2436),s=i(3290),n=i(8451),a=i(9401),o=i(1831),l=i(3026);t.exports=function(t,e){var i,n,a={};for(n in e||(e={}),c)i=e[n],a[n]=null==i?c[n]:i;return(a.position.indent||a.position.start)&&(a.indent=a.position.indent||[],a.position=a.position.start),function(t,e){var i,n,a,c,_,b,x,S,A,k,w,C,T,E,M,B,D,O,P,I,R,L=e.additional,F=e.nonTerminated,j=e.text,Z=e.reference,H=e.warning,N=e.textContext,z=e.referenceContext,V=e.warningContext,U=e.position,W=e.indent||[],G=t.length,$=0,X=-1,Y=U.column||1,K=U.line||1,q="",J=[];for("string"==typeof L&&(L=L.charCodeAt(0)),O=Q(),k=H?function(t,e){var i=Q();i.column+=e,i.offset+=e,H.call(V,y[t],i,t)}:d,$--,G++;++$<G;)if(10===x&&(Y=W[X]||1),38===(x=t.charCodeAt($))){if(9===(A=t.charCodeAt($+1))||10===A||12===A||32===A||38===A||60===A||A!=A||L&&A===L){q+=u(x),Y++;continue}for(E=M=$+1,R=M,35===A?(R=++E,88===(A=t.charCodeAt(R))||120===A?(B=g,R=++E):B=m):B=p,a="",T="",b="",D=v[B],R--;++R<G&&D(A=t.charCodeAt(R));)b+=u(A),B===p&&h.call(r,b)&&(a=b,T=r[b]);if((_=59===t.charCodeAt(R))&&(R++,(c=B===p&&l(b))&&(a=b,T=c)),I=1+R-M,_||F){b?B===p?(_&&!T?k(5,1):(a!==b&&(I=1+(R=E+a.length)-E,_=!1),_||(w=a?1:3,e.attribute?61===(A=t.charCodeAt(R))?(k(w,I),T=null):o(A)?T=null:k(w,I):k(w,I))),S=T):(_||k(2,I),(i=S=parseInt(b,f[B]))>=55296&&i<=57343||i>1114111?(k(7,I),S=u(65533)):S in s?(k(6,I),S=s[S]):(C="",((n=S)>=1&&n<=8||11===n||n>=13&&n<=31||n>=127&&n<=159||n>=64976&&n<=65007||(65535&n)==65535||(65535&n)==65534)&&k(6,I),S>65535&&(S-=65536,C+=u(S>>>10|55296),S=56320|1023&S),S=C+u(S))):B!==p&&k(4,I)}S?(tt(),O=Q(),$=R-1,Y+=R-M+1,J.push(S),P=Q(),P.offset++,Z&&Z.call(z,S,{start:O,end:P},t.slice(M-1,R)),O=P):(b=t.slice(M-1,R),q+=b,Y+=b.length,$=R-1)}else 10===x&&(K++,X++,Y=0),x==x?(q+=u(x),Y++):tt();return J.join("");function Q(){return{line:K,column:Y,offset:$+(U.offset||0)}}function tt(){q&&(J.push(q),j&&j.call(N,q,{start:O,end:Q()}),q="")}}(t,a)};var h={}.hasOwnProperty,u=String.fromCharCode,d=Function.prototype,c={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},p="named",g="hexadecimal",m="decimal",f={};f[g]=16,f[m]=10;var v={};v[p]=o,v[m]=n,v[g]=a;var y={};y[1]="Named character references must be terminated by a semicolon",y[2]="Numeric character references must be terminated by a semicolon",y[3]="Named character references cannot be empty",y[4]="Numeric character references cannot be empty",y[5]="Named character references must be known",y[6]="Numeric character references cannot be disallowed",y[7]="Numeric character references cannot be outside the permissible Unicode range"},8925:function(t,e,i){var r=function(t){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,r={},s={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof n?new n(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++i}),t.__id},clone:function t(e,i){var r,n;switch(i=i||{},s.util.type(e)){case"Object":if(i[n=s.util.objId(e)])return i[n];for(var a in r={},i[n]=r,e)e.hasOwnProperty(a)&&(r[a]=t(e[a],i));return r;case"Array":if(i[n=s.util.objId(e)])return i[n];return r=[],i[n]=r,e.forEach(function(e,s){r[s]=t(e,i)}),r;default:return e}},getLanguage:function(t){for(;t;){var i=e.exec(t.className);if(i)return i[1].toLowerCase();t=t.parentElement}return"none"},setLanguage:function(t,i){t.className=t.className.replace(RegExp(e,"gi"),""),t.classList.add("language-"+i)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw Error()}catch(r){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var i in e)if(e[i].src==t)return e[i]}return null}},isActive:function(t,e,i){for(var r="no-"+e;t;){var s=t.classList;if(s.contains(e))return!0;if(s.contains(r))return!1;t=t.parentElement}return!!i}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(t,e){var i=s.util.clone(s.languages[t]);for(var r in e)i[r]=e[r];return i},insertBefore:function(t,e,i,r){var n=(r=r||s.languages)[t],a={};for(var o in n)if(n.hasOwnProperty(o)){if(o==e)for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);i.hasOwnProperty(o)||(a[o]=n[o])}var h=r[t];return r[t]=a,s.languages.DFS(s.languages,function(e,i){i===h&&e!=t&&(this[e]=a)}),a},DFS:function t(e,i,r,n){n=n||{};var a=s.util.objId;for(var o in e)if(e.hasOwnProperty(o)){i.call(e,o,e[o],r||o);var l=e[o],h=s.util.type(l);"Object"!==h||n[a(l)]?"Array"!==h||n[a(l)]||(n[a(l)]=!0,t(l,i,o,n)):(n[a(l)]=!0,t(l,i,null,n))}}},plugins:{},highlightAll:function(t,e){s.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,i){var r={callback:i,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),s.hooks.run("before-all-elements-highlight",r);for(var n,a=0;n=r.elements[a++];)s.highlightElement(n,!0===e,r.callback)},highlightElement:function(e,i,r){var n=s.util.getLanguage(e),a=s.languages[n];s.util.setLanguage(e,n);var o=e.parentElement;o&&"pre"===o.nodeName.toLowerCase()&&s.util.setLanguage(o,n);var l=e.textContent,h={element:e,language:n,grammar:a,code:l};function u(t){h.highlightedCode=t,s.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,s.hooks.run("after-highlight",h),s.hooks.run("complete",h),r&&r.call(h.element)}if(s.hooks.run("before-sanity-check",h),(o=h.element.parentElement)&&"pre"===o.nodeName.toLowerCase()&&!o.hasAttribute("tabindex")&&o.setAttribute("tabindex","0"),!h.code){s.hooks.run("complete",h),r&&r.call(h.element);return}if(s.hooks.run("before-highlight",h),!h.grammar){u(s.util.encode(h.code));return}if(i&&t.Worker){var d=new Worker(s.filename);d.onmessage=function(t){u(t.data)},d.postMessage(JSON.stringify({language:h.language,code:h.code,immediateClose:!0}))}else u(s.highlight(h.code,h.grammar,h.language))},highlight:function(t,e,i){var r={code:t,grammar:e,language:i};if(s.hooks.run("before-tokenize",r),!r.grammar)throw Error('The language "'+r.language+'" has no grammar.');return r.tokens=s.tokenize(r.code,r.grammar),s.hooks.run("after-tokenize",r),n.stringify(s.util.encode(r.tokens),r.language)},tokenize:function(t,e){var i=e.rest;if(i){for(var r in i)e[r]=i[r];delete e.rest}var h=new o;return l(h,h.head,t),function t(e,i,r,o,h,u){for(var d in r)if(r.hasOwnProperty(d)&&r[d]){var c=r[d];c=Array.isArray(c)?c:[c];for(var p=0;p<c.length;++p){if(u&&u.cause==d+","+p)return;var g=c[p],m=g.inside,f=!!g.lookbehind,v=!!g.greedy,y=g.alias;if(v&&!g.pattern.global){var _=g.pattern.toString().match(/[imsuy]*$/)[0];g.pattern=RegExp(g.pattern.source,_+"g")}for(var b=g.pattern||g,x=o.next,S=h;x!==i.tail&&(!u||!(S>=u.reach));S+=x.value.length,x=x.next){var A,k=x.value;if(i.length>e.length)return;if(!(k instanceof n)){var w=1;if(v){if(!(A=a(b,S,e,f))||A.index>=e.length)break;var C=A.index,T=A.index+A[0].length,E=S;for(E+=x.value.length;C>=E;)E+=(x=x.next).value.length;if(E-=x.value.length,S=E,x.value instanceof n)continue;for(var M=x;M!==i.tail&&(E<T||"string"==typeof M.value);M=M.next)w++,E+=M.value.length;w--,k=e.slice(S,E),A.index-=S}else if(!(A=a(b,0,k,f)))continue;var C=A.index,B=A[0],D=k.slice(0,C),O=k.slice(C+B.length),P=S+k.length;u&&P>u.reach&&(u.reach=P);var I=x.prev;if(D&&(I=l(i,I,D),S+=D.length),function(t,e,i){for(var r=e.next,s=0;s<i&&r!==t.tail;s++)r=r.next;e.next=r,r.prev=e,t.length-=s}(i,I,w),x=l(i,I,new n(d,m?s.tokenize(B,m):B,y,B)),O&&l(i,x,O),w>1){var R={cause:d+","+p,reach:P};t(e,i,r,x.prev,S,R),u&&R.reach>u.reach&&(u.reach=R.reach)}}}}}}(t,h,e,h.head,0),function(t){for(var e=[],i=t.head.next;i!==t.tail;)e.push(i.value),i=i.next;return e}(h)},hooks:{all:{},add:function(t,e){var i=s.hooks.all;i[t]=i[t]||[],i[t].push(e)},run:function(t,e){var i=s.hooks.all[t];if(i&&i.length)for(var r,n=0;r=i[n++];)r(e)}},Token:n};function n(t,e,i,r){this.type=t,this.content=e,this.alias=i,this.length=0|(r||"").length}function a(t,e,i,r){t.lastIndex=e;var s=t.exec(i);if(s&&r&&s[1]){var n=s[1].length;s.index+=n,s[0]=s[0].slice(n)}return s}function o(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function l(t,e,i){var r=e.next,s={value:i,prev:e,next:r};return e.next=s,r.prev=s,t.length++,s}if(t.Prism=s,n.stringify=function t(e,i){if("string"==typeof e)return e;if(Array.isArray(e)){var r="";return e.forEach(function(e){r+=t(e,i)}),r}var n={type:e.type,content:t(e.content,i),tag:"span",classes:["token",e.type],attributes:{},language:i},a=e.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(n.classes,a):n.classes.push(a)),s.hooks.run("wrap",n);var o="";for(var l in n.attributes)o+=" "+l+'="'+(n.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+n.tag+' class="'+n.classes.join(" ")+'"'+o+">"+n.content+"</"+n.tag+">"},!t.document)return t.addEventListener&&(s.disableWorkerMessageHandler||t.addEventListener("message",function(e){var i=JSON.parse(e.data),r=i.language,n=i.code,a=i.immediateClose;t.postMessage(s.highlight(n,s.languages[r],r)),a&&t.close()},!1)),s;var h=s.util.currentScript();function u(){s.manual||s.highlightAll()}if(h&&(s.filename=h.src,h.hasAttribute("data-manual")&&(s.manual=!0)),!s.manual){var d=document.readyState;"loading"===d||"interactive"===d&&h&&h.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return s}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});t.exports&&(t.exports=r),void 0!==i.g&&(i.g.Prism=r)},4049:function(t,e,i){"use strict";var r=i(6257);function s(){}function n(){}n.resetWarningCache=s,t.exports=function(){function t(t,e,i,s,n,a){if(a!==r){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}t.isRequired=t;var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:n,resetWarningCache:s};return i.PropTypes=i,i}},507:function(t,e,i){t.exports=i(4049)()},6257:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6613:function(t,e,i){"use strict";var r=i(5678),s=i(7038),n=i(2929),a="data";t.exports=function(t,e){var i,c,p,g=r(e),m=e,f=n;return g in t.normal?t.property[t.normal[g]]:(g.length>4&&g.slice(0,4)===a&&o.test(e)&&("-"===e.charAt(4)?m=a+(i=e.slice(5).replace(l,d)).charAt(0).toUpperCase()+i.slice(1):(p=(c=e).slice(4),e=l.test(p)?c:("-"!==(p=p.replace(h,u)).charAt(0)&&(p="-"+p),a+p)),f=s),new f(m,e))};var o=/^data[-\w.:]+$/i,l=/-[a-z]/g,h=/[A-Z]/g;function u(t){return"-"+t.toLowerCase()}function d(t){return t.charAt(1).toUpperCase()}},6621:function(t,e,i){"use strict";var r=i(3725),s=i(6522),n=i(7941),a=i(6933),o=i(51),l=i(5812);t.exports=r([n,s,a,o,l])},51:function(t,e,i){"use strict";var r=i(7949),s=i(5998),n=r.booleanish,a=r.number,o=r.spaceSeparated;t.exports=s({transform:function(t,e){return"role"===e?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:n,ariaAutoComplete:null,ariaBusy:n,ariaChecked:n,ariaColCount:a,ariaColIndex:a,ariaColSpan:a,ariaControls:o,ariaCurrent:null,ariaDescribedBy:o,ariaDetails:null,ariaDisabled:n,ariaDropEffect:o,ariaErrorMessage:null,ariaExpanded:n,ariaFlowTo:o,ariaGrabbed:n,ariaHasPopup:null,ariaHidden:n,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:o,ariaLevel:a,ariaLive:null,ariaModal:n,ariaMultiLine:n,ariaMultiSelectable:n,ariaOrientation:null,ariaOwns:o,ariaPlaceholder:null,ariaPosInSet:a,ariaPressed:n,ariaReadOnly:n,ariaRelevant:null,ariaRequired:n,ariaRoleDescription:o,ariaRowCount:a,ariaRowIndex:a,ariaRowSpan:a,ariaSelected:n,ariaSetSize:a,ariaSort:null,ariaValueMax:a,ariaValueMin:a,ariaValueNow:a,ariaValueText:null,role:null}})},5812:function(t,e,i){"use strict";var r=i(7949),s=i(5998),n=i(2160),a=r.boolean,o=r.overloadedBoolean,l=r.booleanish,h=r.number,u=r.spaceSeparated,d=r.commaSeparated;t.exports=s({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:n,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:d,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:a,allowPaymentRequest:a,allowUserMedia:a,alt:null,as:null,async:a,autoCapitalize:null,autoComplete:u,autoFocus:a,autoPlay:a,capture:a,charSet:null,checked:a,cite:null,className:u,cols:h,colSpan:null,content:null,contentEditable:l,controls:a,controlsList:u,coords:h|d,crossOrigin:null,data:null,dateTime:null,decoding:null,default:a,defer:a,dir:null,dirName:null,disabled:a,download:o,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:a,formTarget:null,headers:u,height:h,hidden:a,high:h,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:d,inputMode:null,integrity:null,is:null,isMap:a,itemId:null,itemProp:u,itemRef:u,itemScope:a,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:a,low:h,manifest:null,max:null,maxLength:h,media:null,method:null,min:null,minLength:h,multiple:a,muted:a,name:null,nonce:null,noModule:a,noValidate:a,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:a,optimum:h,pattern:null,ping:u,placeholder:null,playsInline:a,poster:null,preload:null,readOnly:a,referrerPolicy:null,rel:u,required:a,reversed:a,rows:h,rowSpan:h,sandbox:u,scope:null,scoped:a,seamless:a,selected:a,shape:null,size:h,sizes:null,slot:null,span:h,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:d,start:h,step:null,style:null,tabIndex:h,target:null,title:null,translate:null,type:null,typeMustMatch:a,useMap:null,value:l,width:h,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:h,borderColor:null,bottomMargin:h,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:a,declare:a,event:null,face:null,frame:null,frameBorder:null,hSpace:h,leftMargin:h,link:null,longDesc:null,lowSrc:null,marginHeight:h,marginWidth:h,noResize:a,noHref:a,noShade:a,noWrap:a,object:null,profile:null,prompt:null,rev:null,rightMargin:h,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:h,valueType:null,version:null,vAlign:null,vLink:null,vSpace:h,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:a,disableRemotePlayback:a,prefix:null,property:null,results:h,security:null,unselectable:null}})},2160:function(t,e,i){"use strict";var r=i(2874);t.exports=function(t,e){return r(t,e.toLowerCase())}},2874:function(t){"use strict";t.exports=function(t,e){return e in t?t[e]:e}},5998:function(t,e,i){"use strict";var r=i(5678),s=i(9131),n=i(7038);t.exports=function(t){var e,i,a=t.space,o=t.mustUseProperty||[],l=t.attributes||{},h=t.properties,u=t.transform,d={},c={};for(e in h)i=new n(e,u(l,e),h[e],a),-1!==o.indexOf(e)&&(i.mustUseProperty=!0),d[e]=i,c[r(e)]=e,c[r(i.attribute)]=e;return new s(d,c,a)}},7038:function(t,e,i){"use strict";var r=i(2929),s=i(7949);t.exports=o,o.prototype=new r,o.prototype.defined=!0;var n=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],a=n.length;function o(t,e,i,o){var l,h,u,d,c,p,g=-1;for(l=this,(h=o)&&(l.space=h),r.call(this,t,e);++g<a;){u=this,d=p=n[g],(c=(i&s[p])===s[p])&&(u[d]=c)}}},2929:function(t){"use strict";t.exports=i;var e=i.prototype;function i(t,e){this.property=t,this.attribute=e}e.space=null,e.attribute=null,e.property=null,e.boolean=!1,e.booleanish=!1,e.overloadedBoolean=!1,e.number=!1,e.commaSeparated=!1,e.spaceSeparated=!1,e.commaOrSpaceSeparated=!1,e.mustUseProperty=!1,e.defined=!1},3725:function(t,e,i){"use strict";var r=i(6192),s=i(9131);t.exports=function(t){for(var e,i,n=t.length,a=[],o=[],l=-1;++l<n;)e=t[l],a.push(e.property),o.push(e.normal),i=e.space;return new s(r.apply(null,a),r.apply(null,o),i)}},9131:function(t){"use strict";t.exports=i;var e=i.prototype;function i(t,e,i){this.property=t,this.normal=e,i&&(this.space=i)}e.space=null,e.normal={},e.property={}},7949:function(t,e){"use strict";var i=0;function r(){return Math.pow(2,++i)}e.boolean=r(),e.booleanish=r(),e.overloadedBoolean=r(),e.number=r(),e.spaceSeparated=r(),e.commaSeparated=r(),e.commaOrSpaceSeparated=r()},6522:function(t,e,i){"use strict";var r=i(5998);t.exports=r({space:"xlink",transform:function(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},7941:function(t,e,i){"use strict";var r=i(5998);t.exports=r({space:"xml",transform:function(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},6933:function(t,e,i){"use strict";var r=i(5998),s=i(2160);t.exports=r({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:s,properties:{xmlns:null,xmlnsXLink:null}})},5678:function(t){"use strict";t.exports=function(t){return t.toLowerCase()}},5154:function(t){var e="undefined"!=typeof Element,i="function"==typeof Map,r="function"==typeof Set,s="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;t.exports=function(t,n){try{return function t(n,a){if(n===a)return!0;if(n&&a&&"object"==typeof n&&"object"==typeof a){var o,l,h,u;if(n.constructor!==a.constructor)return!1;if(Array.isArray(n)){if((o=n.length)!=a.length)return!1;for(l=o;0!=l--;)if(!t(n[l],a[l]))return!1;return!0}if(i&&n instanceof Map&&a instanceof Map){if(n.size!==a.size)return!1;for(u=n.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=n.entries();!(l=u.next()).done;)if(!t(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&n instanceof Set&&a instanceof Set){if(n.size!==a.size)return!1;for(u=n.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(a)){if((o=n.length)!=a.length)return!1;for(l=o;0!=l--;)if(n[l]!==a[l])return!1;return!0}if(n.constructor===RegExp)return n.source===a.source&&n.flags===a.flags;if(n.valueOf!==Object.prototype.valueOf&&"function"==typeof n.valueOf&&"function"==typeof a.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString&&"function"==typeof n.toString&&"function"==typeof a.toString)return n.toString()===a.toString();if((o=(h=Object.keys(n)).length)!==Object.keys(a).length)return!1;for(l=o;0!=l--;)if(!Object.prototype.hasOwnProperty.call(a,h[l]))return!1;if(e&&n instanceof Element)return!1;for(l=o;0!=l--;)if(("_owner"!==h[l]&&"__v"!==h[l]&&"__o"!==h[l]||!n.$$typeof)&&!t(n[h[l]],a[h[l]]))return!1;return!0}return n!=n&&a!=a}(t,n)}catch(t){if((t.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw t}}},3810:function(t,e,i){"use strict";i.d(e,{B6:()=>V,ql:()=>q});var r=i(5271),s=i(507),n=i.n(s),a=i(5154),o=i.n(a),l=i(3670),h=i.n(l),u=i(631),d=i.n(u);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){if(null==t)return{};var i,r,s={},n=Object.keys(t);for(r=0;r<n.length;r++)e.indexOf(i=n[r])>=0||(s[i]=t[i]);return s}var f={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},v={rel:["amphtml","canonical","alternate"]},y={type:["application/ld+json"]},_={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},b=Object.keys(f).map(function(t){return f[t]}),x={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},S=Object.keys(x).reduce(function(t,e){return t[x[e]]=e,t},{}),A=function(t,e){for(var i=t.length-1;i>=0;i-=1){var r=t[i];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},k=function(t){var e=A(t,f.TITLE),i=A(t,"titleTemplate");if(Array.isArray(e)&&(e=e.join("")),i&&e)return i.replace(/%s/g,function(){return e});var r=A(t,"defaultTitle");return e||r||void 0},w=function(t,e){return e.filter(function(e){return void 0!==e[t]}).map(function(e){return e[t]}).reduce(function(t,e){return c({},t,e)},{})},C=function(t,e,i){var r={};return i.filter(function(e){return!!Array.isArray(e[t])||(void 0!==e[t]&&console&&"function"==typeof console.warn&&console.warn("Helmet: "+t+' should be of type "Array". Instead found type "'+typeof e[t]+'"'),!1)}).map(function(e){return e[t]}).reverse().reduce(function(t,i){var s={};i.filter(function(t){for(var i,n=Object.keys(t),a=0;a<n.length;a+=1){var o=n[a],l=o.toLowerCase();-1===e.indexOf(l)||"rel"===i&&"canonical"===t[i].toLowerCase()||"rel"===l&&"stylesheet"===t[l].toLowerCase()||(i=l),-1===e.indexOf(o)||"innerHTML"!==o&&"cssText"!==o&&"itemprop"!==o||(i=o)}if(!i||!t[i])return!1;var h=t[i].toLowerCase();return r[i]||(r[i]={}),s[i]||(s[i]={}),!r[i][h]&&(s[i][h]=!0,!0)}).reverse().forEach(function(e){return t.push(e)});for(var n=Object.keys(s),a=0;a<n.length;a+=1){var o=n[a],l=c({},r[o],s[o]);r[o]=l}return t},[]).reverse()},T=function(t,e){if(Array.isArray(t)&&t.length){for(var i=0;i<t.length;i+=1)if(t[i][e])return!0}return!1},E=function(t){return Array.isArray(t)?t.join(""):t},M=function(t,e){return Array.isArray(t)?t.reduce(function(t,i){return!function(t,e){for(var i=Object.keys(t),r=0;r<i.length;r+=1)if(e[i[r]]&&e[i[r]].includes(t[i[r]]))return!0;return!1}(i,e)?t.default.push(i):t.priority.push(i),t},{priority:[],default:[]}):{default:t}},B=function(t,e){var i;return c({},t,((i={})[e]=void 0,i))},D=[f.NOSCRIPT,f.SCRIPT,f.STYLE],O=function(t,e){return void 0===e&&(e=!0),!1===e?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},P=function(t){return Object.keys(t).reduce(function(e,i){var r=void 0!==t[i]?i+'="'+t[i]+'"':""+i;return e?e+" "+r:r},"")},I=function(t,e){return void 0===e&&(e={}),Object.keys(t).reduce(function(e,i){return e[x[i]||i]=t[i],e},e)},R=function(t,e){return e.map(function(e,i){var s,n=((s={key:i})["data-rh"]=!0,s);return Object.keys(e).forEach(function(t){var i=x[t]||t;"innerHTML"===i||"cssText"===i?n.dangerouslySetInnerHTML={__html:e.innerHTML||e.cssText}:n[i]=e[t]}),r.createElement(t,n)})},L=function(t,e,i){switch(t){case f.TITLE:return{toComponent:function(){var t,i,s,n;return i=e.titleAttributes,(s={key:t=e.title})["data-rh"]=!0,n=I(i,s),[r.createElement(f.TITLE,n,t)]},toString:function(){var r,s,n;return r=e.title,s=P(e.titleAttributes),n=E(r),s?"<"+t+' data-rh="true" '+s+">"+O(n,i)+"</"+t+">":"<"+t+' data-rh="true">'+O(n,i)+"</"+t+">"}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return I(e)},toString:function(){return P(e)}};default:return{toComponent:function(){return R(t,e)},toString:function(){return e.reduce(function(e,r){var s=Object.keys(r).filter(function(t){return!("innerHTML"===t||"cssText"===t)}).reduce(function(t,e){var s=void 0===r[e]?e:e+'="'+O(r[e],i)+'"';return t?t+" "+s:s},""),n=r.innerHTML||r.cssText||"",a=-1===D.indexOf(t);return e+"<"+t+' data-rh="true" '+s+(a?"/>":">"+n+"</"+t+">")},"")}}}},F=function(t){var e=t.baseTag,i=t.bodyAttributes,r=t.encode,s=t.htmlAttributes,n=t.noscriptTags,a=t.styleTags,o=t.title,l=t.titleAttributes,h=t.linkTags,u=t.metaTags,d=t.scriptTags,c={toComponent:function(){},toString:function(){return""}};if(t.prioritizeSeoTags){var p,g,m,b,x,S,A=(p=t.linkTags,g=t.scriptTags,m=t.encode,b=M(t.metaTags,_),x=M(p,v),S=M(g,y),{priorityMethods:{toComponent:function(){return[].concat(R(f.META,b.priority),R(f.LINK,x.priority),R(f.SCRIPT,S.priority))},toString:function(){return L(f.META,b.priority,m)+" "+L(f.LINK,x.priority,m)+" "+L(f.SCRIPT,S.priority,m)}},metaTags:b.default,linkTags:x.default,scriptTags:S.default});c=A.priorityMethods,h=A.linkTags,u=A.metaTags,d=A.scriptTags}return{priority:c,base:L(f.BASE,e,r),bodyAttributes:L("bodyAttributes",i,r),htmlAttributes:L("htmlAttributes",s,r),link:L(f.LINK,h,r),meta:L(f.META,u,r),noscript:L(f.NOSCRIPT,n,r),script:L(f.SCRIPT,d,r),style:L(f.STYLE,a,r),title:L(f.TITLE,{title:void 0===o?"":o,titleAttributes:l},r)}},j=[],Z=function(t,e){var i=this;void 0===e&&(e="undefined"!=typeof document),this.instances=[],this.value={setHelmet:function(t){i.context.helmet=t},helmetInstances:{get:function(){return i.canUseDOM?j:i.instances},add:function(t){(i.canUseDOM?j:i.instances).push(t)},remove:function(t){var e=(i.canUseDOM?j:i.instances).indexOf(t);(i.canUseDOM?j:i.instances).splice(e,1)}}},this.context=t,this.canUseDOM=e,e||(t.helmet=F({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},H=r.createContext({}),N=n().shape({setHelmet:n().func,helmetInstances:n().shape({get:n().func,add:n().func,remove:n().func})}),z="undefined"!=typeof document,V=function(t){function e(i){var r;return(r=t.call(this,i)||this).helmetData=new Z(r.props.context,e.canUseDOM),r}return p(e,t),e.prototype.render=function(){return r.createElement(H.Provider,{value:this.helmetData.value},this.props.children)},e}(r.Component);V.canUseDOM=z,V.propTypes={context:n().shape({helmet:n().shape()}),children:n().node.isRequired},V.defaultProps={context:{}},V.displayName="HelmetProvider";var U=function(t,e){var i,r=document.head||document.querySelector(f.HEAD),s=r.querySelectorAll(t+"[data-rh]"),n=[].slice.call(s),a=[];return e&&e.length&&e.forEach(function(e){var r=document.createElement(t);for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&("innerHTML"===s?r.innerHTML=e.innerHTML:"cssText"===s?r.styleSheet?r.styleSheet.cssText=e.cssText:r.appendChild(document.createTextNode(e.cssText)):r.setAttribute(s,void 0===e[s]?"":e[s]));r.setAttribute("data-rh","true"),n.some(function(t,e){return i=e,r.isEqualNode(t)})?n.splice(i,1):a.push(r)}),n.forEach(function(t){return t.parentNode.removeChild(t)}),a.forEach(function(t){return r.appendChild(t)}),{oldTags:n,newTags:a}},W=function(t,e){var i=document.getElementsByTagName(t)[0];if(i){for(var r=i.getAttribute("data-rh"),s=r?r.split(","):[],n=[].concat(s),a=Object.keys(e),o=0;o<a.length;o+=1){var l=a[o],h=e[l]||"";i.getAttribute(l)!==h&&i.setAttribute(l,h),-1===s.indexOf(l)&&s.push(l);var u=n.indexOf(l);-1!==u&&n.splice(u,1)}for(var d=n.length-1;d>=0;d-=1)i.removeAttribute(n[d]);s.length===n.length?i.removeAttribute("data-rh"):i.getAttribute("data-rh")!==a.join(",")&&i.setAttribute("data-rh",a.join(","))}},G=function(t,e){var i=t.baseTag,r=t.htmlAttributes,s=t.linkTags,n=t.metaTags,a=t.noscriptTags,o=t.onChangeClientState,l=t.scriptTags,h=t.styleTags,u=t.title,d=t.titleAttributes;W(f.BODY,t.bodyAttributes),W(f.HTML,r),void 0!==u&&document.title!==u&&(document.title=E(u)),W(f.TITLE,d);var c={baseTag:U(f.BASE,i),linkTags:U(f.LINK,s),metaTags:U(f.META,n),noscriptTags:U(f.NOSCRIPT,a),scriptTags:U(f.SCRIPT,l),styleTags:U(f.STYLE,h)},p={},g={};Object.keys(c).forEach(function(t){var e=c[t],i=e.newTags,r=e.oldTags;i.length&&(p[t]=i),r.length&&(g[t]=c[t].oldTags)}),e&&e(),o(t,p,g)},$=null,X=function(t){function e(){for(var e,i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).rendered=!1,e}p(e,t);var i=e.prototype;return i.shouldComponentUpdate=function(t){return!d()(t,this.props)},i.componentDidUpdate=function(){this.emitChange()},i.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},i.emitChange=function(){var t,e,i=this.props.context,r=i.setHelmet,s=null,n={baseTag:(t=["href"],(e=i.helmetInstances.get().map(function(t){var e=c({},t.props);return delete e.context,e})).filter(function(t){return void 0!==t[f.BASE]}).map(function(t){return t[f.BASE]}).reverse().reduce(function(e,i){if(!e.length)for(var r=Object.keys(i),s=0;s<r.length;s+=1){var n=r[s].toLowerCase();if(-1!==t.indexOf(n)&&i[n])return e.concat(i)}return e},[])),bodyAttributes:w("bodyAttributes",e),defer:A(e,"defer"),encode:A(e,"encodeSpecialCharacters"),htmlAttributes:w("htmlAttributes",e),linkTags:C(f.LINK,["rel","href"],e),metaTags:C(f.META,["name","charset","http-equiv","property","itemprop"],e),noscriptTags:C(f.NOSCRIPT,["innerHTML"],e),onChangeClientState:A(e,"onChangeClientState")||function(){},scriptTags:C(f.SCRIPT,["src","innerHTML"],e),styleTags:C(f.STYLE,["cssText"],e),title:k(e),titleAttributes:w("titleAttributes",e),prioritizeSeoTags:T(e,"prioritizeSeoTags")};V.canUseDOM?($&&cancelAnimationFrame($),n.defer?$=requestAnimationFrame(function(){G(n,function(){$=null})}):(G(n),$=null)):F&&(s=F(n)),r(s)},i.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},i.render=function(){return this.init(),null},e}(r.Component);X.propTypes={context:N.isRequired},X.displayName="HelmetDispatcher";var Y=["children"],K=["children"],q=function(t){function e(){return t.apply(this,arguments)||this}p(e,t);var i=e.prototype;return i.shouldComponentUpdate=function(t){return!o()(B(this.props,"helmetData"),B(t,"helmetData"))},i.mapNestedChildrenToProps=function(t,e){if(!e)return null;switch(t.type){case f.SCRIPT:case f.NOSCRIPT:return{innerHTML:e};case f.STYLE:return{cssText:e};default:throw Error("<"+t.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},i.flattenArrayTypeChildren=function(t){var e,i=t.child,r=t.arrayTypeChildren;return c({},r,((e={})[i.type]=[].concat(r[i.type]||[],[c({},t.newChildProps,this.mapNestedChildrenToProps(i,t.nestedChildren))]),e))},i.mapObjectTypeChildren=function(t){var e,i,r=t.child,s=t.newProps,n=t.newChildProps,a=t.nestedChildren;switch(r.type){case f.TITLE:return c({},s,((e={})[r.type]=a,e.titleAttributes=c({},n),e));case f.BODY:return c({},s,{bodyAttributes:c({},n)});case f.HTML:return c({},s,{htmlAttributes:c({},n)});default:return c({},s,((i={})[r.type]=c({},n),i))}},i.mapArrayTypeChildrenToProps=function(t,e){var i=c({},e);return Object.keys(t).forEach(function(e){var r;i=c({},i,((r={})[e]=t[e],r))}),i},i.warnOnInvalidChildren=function(t,e){return h()(b.some(function(e){return t.type===e}),"function"==typeof t.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+b.join(", ")+" are allowed. Helmet does not support rendering <"+t.type+"> elements. Refer to our API for more information."),h()(!e||"string"==typeof e||Array.isArray(e)&&!e.some(function(t){return"string"!=typeof t}),"Helmet expects a string as a child of <"+t.type+">. Did you forget to wrap your children in braces? ( <"+t.type+">{``}</"+t.type+"> ) Refer to our API for more information."),!0},i.mapChildrenToProps=function(t,e){var i=this,s={};return r.Children.forEach(t,function(t){if(t&&t.props){var r=t.props,n=r.children,a=m(r,Y),o=Object.keys(a).reduce(function(t,e){return t[S[e]||e]=a[e],t},{}),l=t.type;switch("symbol"==typeof l?l=l.toString():i.warnOnInvalidChildren(t,n),l){case f.FRAGMENT:e=i.mapChildrenToProps(n,e);break;case f.LINK:case f.META:case f.NOSCRIPT:case f.SCRIPT:case f.STYLE:s=i.flattenArrayTypeChildren({child:t,arrayTypeChildren:s,newChildProps:o,nestedChildren:n});break;default:e=i.mapObjectTypeChildren({child:t,newProps:e,newChildProps:o,nestedChildren:n})}}}),this.mapArrayTypeChildrenToProps(s,e)},i.render=function(){var t=this.props,e=t.children,i=m(t,K),s=c({},i),n=i.helmetData;return e&&(s=this.mapChildrenToProps(e,s)),!n||n instanceof Z||(n=new Z(n.context,n.instances)),n?r.createElement(X,c({},s,{context:n.value,helmetData:void 0})):r.createElement(H.Consumer,null,function(t){return r.createElement(X,c({},s,{context:t}))})},e}(r.Component);q.propTypes={base:n().object,bodyAttributes:n().object,children:n().oneOfType([n().arrayOf(n().node),n().node]),defaultTitle:n().string,defer:n().bool,encodeSpecialCharacters:n().bool,htmlAttributes:n().object,link:n().arrayOf(n().object),meta:n().arrayOf(n().object),noscript:n().arrayOf(n().object),onChangeClientState:n().func,script:n().arrayOf(n().object),style:n().arrayOf(n().object),title:n().string,titleAttributes:n().object,titleTemplate:n().string,prioritizeSeoTags:n().bool,helmetData:n().object},q.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},q.displayName="Helmet"},8621:function(t,e){"use strict";var i,r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),e.isFragment=function(t){return function(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case n:case o:case a:case c:case p:return t;default:switch(t=t&&t.$$typeof){case u:case h:case d:case m:case g:case l:return t;default:return e}}case s:return e}}}(t)===n}},6479:function(t,e,i){"use strict";t.exports=i(8621)},3572:function(t,e,i){"use strict";e.lazyWithPreload=void 0;var r=i(5271);e.lazyWithPreload=function(t){var e,i,s=(0,r.lazy)(t),n=(0,r.forwardRef)(function(t,i){var n=(0,r.useRef)(null!=e?e:s);return(0,r.createElement)(n.current,Object.assign(i?{ref:i}:{},t))});return n.preload=function(){return i||(i=t().then(function(t){return e=t.default})),i},n}},4335:function(t,e,i){"use strict";var r=i(2939);e.default=void 0;var s=r(i(2663));e.default=s.default},4678:function(t,e,i){"use strict";var r,s,n="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof i.g?i.g:{},a=(s=(r="Prism"in n)?n.Prism:void 0,function(){r?n.Prism=s:delete n.Prism,r=void 0,s=void 0});n.Prism={manual:!0,disableWorkerMessageHandler:!0};var o=i(6675),l=i(3177),h=i(8925),u=i(1042),d=i(579),c=i(1625),p=i(7600);a();var g={}.hasOwnProperty;function m(){}m.prototype=h;var f=new m;function v(t){if("function"!=typeof t||!t.displayName)throw Error("Expected `function` for `grammar`, got `"+t+"`");void 0===f.languages[t.displayName]&&t(f)}t.exports=f,f.highlight=function(t,e){var i,r=h.highlight;if("string"!=typeof t)throw Error("Expected `string` for `value`, got `"+t+"`");if("Object"===f.util.type(e))i=e,e=null;else{if("string"!=typeof e)throw Error("Expected `string` for `name`, got `"+e+"`");if(g.call(f.languages,e))i=f.languages[e];else throw Error("Unknown language: `"+e+"` is not registered")}return r.call(this,t,i,e)},f.register=v,f.alias=function(t,e){var i,r,s,n,a=f.languages,o=t;for(i in e&&((o={})[t]=e),o)for(s=(r="string"==typeof(r=o[i])?[r]:r).length,n=-1;++n<s;)a[r[n]]=a[i]},f.registered=function(t){if("string"!=typeof t)throw Error("Expected `string` for `language`, got `"+t+"`");return g.call(f.languages,t)},f.listLanguages=function(){var t,e=f.languages,i=[];for(t in e)g.call(e,t)&&"object"==typeof e[t]&&i.push(t);return i},v(u),v(d),v(c),v(p),f.util.encode=function(t){return t},f.Token.stringify=function(t,e,i){var r;return"string"==typeof t?{type:"text",value:t}:"Array"===f.util.type(t)?function(t,e){for(var i,r=[],s=t.length,n=-1;++n<s;)""!==(i=t[n])&&null!=i&&r.push(i);for(n=-1,s=r.length;++n<s;)i=r[n],r[n]=f.Token.stringify(i,e,r);return r}(t,e):(r={type:t.type,content:f.Token.stringify(t.content,e,i),tag:"span",classes:["token",t.type],attributes:{},language:e,parent:i},t.alias&&(r.classes=r.classes.concat(t.alias)),f.hooks.run("wrap",r),o(r.tag+"."+r.classes.join("."),function(t){var e;for(e in t)t[e]=l(t[e]);return t}(r.attributes),r.content))}},1625:function(t){"use strict";function e(t){t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}}t.exports=e,e.displayName="clike",e.aliases=[]},579:function(t){"use strict";function e(t){var e,i;e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css,(i=t.languages.markup)&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}t.exports=e,e.displayName="css",e.aliases=[]},7600:function(t){"use strict";function e(t){t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source)+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript}t.exports=e,e.displayName="javascript",e.aliases=["js"]},2961:function(t){"use strict";function e(t){!function(t){var e=t.util.clone(t.languages.javascript),i=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,s=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function n(t,e){return RegExp(t=t.replace(/<S>/g,function(){return i}).replace(/<BRACES>/g,function(){return r}).replace(/<SPREAD>/g,function(){return s}),e)}s=n(s).source,t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=n(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,t.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside.comment=e.comment,t.languages.insertBefore("inside","attr-name",{spread:{pattern:n(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:n(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx}}},t.languages.jsx.tag);var a=function(t){return t?"string"==typeof t?t:"string"==typeof t.content?t.content:t.content.map(a).join(""):""},o=function(e){for(var i=[],r=0;r<e.length;r++){var s=e[r],n=!1;if("string"!=typeof s&&("tag"===s.type&&s.content[0]&&"tag"===s.content[0].type?"</"===s.content[0].content[0].content?i.length>0&&i[i.length-1].tagName===a(s.content[0].content[1])&&i.pop():"/>"===s.content[s.content.length-1].content||i.push({tagName:a(s.content[0].content[1]),openedBraces:0}):i.length>0&&"punctuation"===s.type&&"{"===s.content?i[i.length-1].openedBraces++:i.length>0&&i[i.length-1].openedBraces>0&&"punctuation"===s.type&&"}"===s.content?i[i.length-1].openedBraces--:n=!0),(n||"string"==typeof s)&&i.length>0&&0===i[i.length-1].openedBraces){var l=a(s);r<e.length-1&&("string"==typeof e[r+1]||"plain-text"===e[r+1].type)&&(l+=a(e[r+1]),e.splice(r+1,1)),r>0&&("string"==typeof e[r-1]||"plain-text"===e[r-1].type)&&(l=a(e[r-1])+l,e.splice(r-1,1),r--),e[r]=new t.Token("plain-text",l,null,l)}s.content&&"string"!=typeof s.content&&o(s.content)}};t.hooks.add("after-tokenize",function(t){("jsx"===t.language||"tsx"===t.language)&&o(t.tokens)})}(t)}t.exports=e,e.displayName="jsx",e.aliases=[]},1042:function(t){"use strict";function e(t){t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.value.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(e,i){var r={};r["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};s["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var n={};n[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:s},t.languages.insertBefore("markup","cdata",n)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(e,i){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:t.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml}t.exports=e,e.displayName="markup",e.aliases=["html","mathml","svg","xml","ssml","atom","rss"]},2663:function(t,e,i){"use strict";var r=i(2961),s=i(6409);function n(t){var e,i;t.register(r),t.register(s),e=t.util.clone(t.languages.typescript),t.languages.tsx=t.languages.extend("jsx",e),delete t.languages.tsx.parameter,delete t.languages.tsx["literal-property"],(i=t.languages.tsx.tag).pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+i.pattern.source+")",i.pattern.flags),i.lookbehind=!0}t.exports=n,n.displayName="tsx",n.aliases=[]},6409:function(t){"use strict";function e(t){var e;t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"],e=t.languages.extend("typescript",{}),delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}t.exports=e,e.displayName="typescript",e.aliases=["ts"]},631:function(t){t.exports=function(t,e,i,r){var s=i?i.call(r,t,e):void 0;if(void 0!==s)return!!s;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(e),l=0;l<n.length;l++){var h=n[l];if(!o(h))return!1;var u=t[h],d=e[h];if(!1===(s=i?i.call(r,u,d,h):void 0)||void 0===s&&u!==d)return!1}return!0}},2868:function(t,e){"use strict";e.parse=function(t){var e=String(t||"").trim();return""===e?[]:e.split(i)};var i=/[ \t\n\r\f]+/g},6935:function(t){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,i=[],r=0;r<t.rangeCount;r++)i.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||i.forEach(function(e){t.addRange(e)}),e&&e.focus()}}},6192:function(t){t.exports=function(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var s in r)e.call(r,s)&&(t[s]=r[s])}return t};var e=Object.prototype.hasOwnProperty},905:function(t,e,i){"use strict";var r=i(7763),s=i(967),n=i.t(s,2),a=i(8751),o=i.t(a,2),l=i(2676),h=i(1859),u=i(9449),d=i(5271),c=i(6780),p=i(3810),g=i(5567),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},f=function(t){return"IMG"===t.tagName},v=function(t){return t&&1===t.nodeType},y=function(t){return".svg"===(t.currentSrc||t.src).substr(-4).toLowerCase()},_=function(t){try{if(Array.isArray(t))return t.filter(f);if(NodeList.prototype.isPrototypeOf(t))return[].slice.call(t).filter(f);if(v(t))return[t].filter(f);if("string"==typeof t)return[].slice.call(document.querySelectorAll(t)).filter(f);return[]}catch(t){throw TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},b=function(t){var e=document.createElement("div");return e.classList.add("medium-zoom-overlay"),e.style.background=t,e},x=function(t){var e=t.getBoundingClientRect(),i=e.top,r=e.left,s=e.width,n=e.height,a=t.cloneNode(),o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return a.removeAttribute("id"),a.style.position="absolute",a.style.top=i+o+"px",a.style.left=r+l+"px",a.style.width=s+"px",a.style.height=n+"px",a.style.transform="",a},S=function(t,e){var i=m({bubbles:!1,cancelable:!1,detail:void 0},e);if("function"==typeof window.CustomEvent)return new CustomEvent(t,i);var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),r};!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}");let A=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=window.Promise||function(t){function e(){}t(e,e)},s=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=e.reduce(function(t,e){return[].concat(t,_(e))},[]);return r.filter(function(t){return -1===l.indexOf(t)}).forEach(function(t){l.push(t),t.classList.add("medium-zoom-image")}),h.forEach(function(t){var e=t.type,i=t.listener,s=t.options;r.forEach(function(t){t.addEventListener(e,i,s)})}),f},n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,i=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},e=void 0,i=void 0;if(c.container){if(c.container instanceof Object)e=(t=m({},t,c.container)).width-t.left-t.right-2*c.margin,i=t.height-t.top-t.bottom-2*c.margin;else{var r=(v(c.container)?c.container:document.querySelector(c.container)).getBoundingClientRect();t=m({},t,{width:r.width,height:r.height,left:r.left,top:r.top})}}e=e||t.width-2*c.margin,i=i||t.height-2*c.margin;var s=p.zoomedHd||p.original,n=y(s)?e:s.naturalWidth||e,a=y(s)?i:s.naturalHeight||i,o=s.getBoundingClientRect(),l=o.top,h=o.left,u=o.width,d=o.height,g=Math.min(Math.min(Math.max(u,n),e)/u,Math.min(Math.max(d,a),i)/d),f=(-h+(e-u)/2+c.margin+t.left)/g,_=(-l+(i-d)/2+c.margin+t.top)/g,b="scale("+g+") translate3d("+f+"px, "+_+"px, 0)";p.zoomed.style.transform=b,p.zoomedHd&&(p.zoomedHd.style.transform=b)};return new r(function(t){if(e&&-1===l.indexOf(e)||p.zoomed){t(f);return}if(e)p.original=e;else if(l.length>0){var r=l;p.original=r[0]}else{t(f);return}if(p.original.dispatchEvent(S("medium-zoom:open",{detail:{zoom:f}})),d=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,u=!0,p.zoomed=x(p.original),document.body.appendChild(g),c.template){var s=v(c.template)?c.template:document.querySelector(c.template);p.template=document.createElement("div"),p.template.appendChild(s.content.cloneNode(!0)),document.body.appendChild(p.template)}if(p.original.parentElement&&"PICTURE"===p.original.parentElement.tagName&&p.original.currentSrc&&(p.zoomed.src=p.original.currentSrc),document.body.appendChild(p.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),p.original.classList.add("medium-zoom-image--hidden"),p.zoomed.classList.add("medium-zoom-image--opened"),p.zoomed.addEventListener("click",a),p.zoomed.addEventListener("transitionend",function e(){u=!1,p.zoomed.removeEventListener("transitionend",e),p.original.dispatchEvent(S("medium-zoom:opened",{detail:{zoom:f}})),t(f)}),p.original.getAttribute("data-zoom-src")){p.zoomedHd=p.zoomed.cloneNode(),p.zoomedHd.removeAttribute("srcset"),p.zoomedHd.removeAttribute("sizes"),p.zoomedHd.removeAttribute("loading"),p.zoomedHd.src=p.zoomed.getAttribute("data-zoom-src"),p.zoomedHd.onerror=function(){clearInterval(n),console.warn("Unable to reach the zoom image target "+p.zoomedHd.src),p.zoomedHd=null,i()};var n=setInterval(function(){p.zoomedHd.complete&&(clearInterval(n),p.zoomedHd.classList.add("medium-zoom-image--opened"),p.zoomedHd.addEventListener("click",a),document.body.appendChild(p.zoomedHd),i())},10)}else if(p.original.hasAttribute("srcset")){p.zoomedHd=p.zoomed.cloneNode(),p.zoomedHd.removeAttribute("sizes"),p.zoomedHd.removeAttribute("loading");var o=p.zoomedHd.addEventListener("load",function(){p.zoomedHd.removeEventListener("load",o),p.zoomedHd.classList.add("medium-zoom-image--opened"),p.zoomedHd.addEventListener("click",a),document.body.appendChild(p.zoomedHd),i()})}else i()})},a=function(){return new r(function(t){if(u||!p.original){t(f);return}u=!0,document.body.classList.remove("medium-zoom--opened"),p.zoomed.style.transform="",p.zoomedHd&&(p.zoomedHd.style.transform=""),p.template&&(p.template.style.transition="opacity 150ms",p.template.style.opacity=0),p.original.dispatchEvent(S("medium-zoom:close",{detail:{zoom:f}})),p.zoomed.addEventListener("transitionend",function e(){p.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(p.zoomed),p.zoomedHd&&document.body.removeChild(p.zoomedHd),document.body.removeChild(g),p.zoomed.classList.remove("medium-zoom-image--opened"),p.template&&document.body.removeChild(p.template),u=!1,p.zoomed.removeEventListener("transitionend",e),p.original.dispatchEvent(S("medium-zoom:closed",{detail:{zoom:f}})),p.original=null,p.zoomed=null,p.zoomedHd=null,p.template=null,t(f)})})},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target;return p.original?a():n({target:e})},l=[],h=[],u=!1,d=0,c=i,p={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(e)?c=e:(e||"string"==typeof e)&&s(e);var g=b((c=m({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},c)).background);document.addEventListener("click",function(t){var e=t.target;if(e===g){a();return}-1!==l.indexOf(e)&&o({target:e})}),document.addEventListener("keyup",function(t){var e=t.key||t.keyCode;("Escape"===e||"Esc"===e||27===e)&&a()}),document.addEventListener("scroll",function(){if(!u&&p.original){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(d-t)>c.scrollOffset&&setTimeout(a,150)}}),window.addEventListener("resize",a);var f={open:n,close:a,toggle:o,update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.background&&(g.style.background=t.background),t.container&&t.container instanceof Object&&(t.container=m({},c.container,t.container)),t.template){var e=v(t.template)?t.template:document.querySelector(t.template);t.template=e}return c=m({},c,t),l.forEach(function(t){t.dispatchEvent(S("medium-zoom:update",{detail:{zoom:f}}))}),f},clone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(m({},c,e))},attach:s,detach:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];p.zoomed&&a();var r=e.length>0?e.reduce(function(t,e){return[].concat(t,_(e))},[]):l;return r.forEach(function(t){t.classList.remove("medium-zoom-image"),t.dispatchEvent(S("medium-zoom:detach",{detail:{zoom:f}}))}),l=l.filter(function(t){return -1===r.indexOf(t)}),f},on:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.forEach(function(r){r.addEventListener("medium-zoom:"+t,e,i)}),h.push({type:"medium-zoom:"+t,listener:e,options:i}),f},off:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.forEach(function(r){r.removeEventListener("medium-zoom:"+t,e,i)}),h=h.filter(function(i){return!(i.type==="medium-zoom:"+t&&i.listener.toString()===e.toString())}),f},getOptions:function(){return c},getImages:function(){return l},getZoomedImage:function(){return p.original}};return f};i(1526);let k=[g.default,[function(t){let{pathname:e}=(0,h.TH)(),{selector:i=".rspress-doc img",options:r={}}=t;return(0,d.useEffect)(()=>{let t;let e=setTimeout(()=>{t=A(document.querySelectorAll(i),{...r,background:"var(--rp-c-bg)"})},100);return()=>{clearTimeout(e),null==t||t.detach(),null==t||t.close()}},[e]),null},{}]];async function w(t){var e,i;let r=(0,h.Ww)(t);if(r){let t=await r.preload(),e=(0,u.bw)(r.filePath),s=c.default.pages.find(t=>{let e=t=>t.replace(/\/$/,"").toLowerCase();return(0,h.pV)(e(t.routePath),e(r.path))}),n=encodeURIComponent(e),a=(null===(i=t.default.__RSPRESS_PAGE_META)||void 0===i?void 0:i[n])||{},{toc:o=[],title:l="",frontmatter:d={},...p}=u.I6.test(r.filePath)?a:t;return{siteData:c.default,page:{...p,pagePath:e,...s,pageType:(null==d?void 0:d.pageType)||"doc",title:l,frontmatter:d,toc:o}}}let s=c.default.lang||"",n=(null===(e=c.default.multiVersion)||void 0===e?void 0:e.default)||"";if(c.default.lang&&"undefined"!=typeof window){let t=location.pathname.replace(c.default.base,"").split("/").slice(0,2);if(c.default.locales.length){let e=c.default.locales.find(e=>{let{lang:i}=e;return t.includes(i)});e&&(s=e.lang)}if(c.default.multiVersion.versions){let e=c.default.multiVersion.versions.find(e=>t.includes(e));e&&(n=e)}}return{siteData:c.default,page:{pagePath:"",pageType:"404",routePath:"/404",lang:s,frontmatter:{},title:"404",toc:[],version:n,_filepath:"",_relativePath:""}}}function C(t){let{helmetContext:e}=t,{setData:i,data:s}=(0,d.useContext)(h.R0),n=s.page.frontmatter||{},{pathname:a,search:o}=(0,h.TH)(),u=new URLSearchParams(o),c="globalUIComponents",g=!1===n[c]||"0"===u.get(c);return(0,d.useLayoutEffect)(()=>{(async function(){try{let t=await w(a);null==i||i(t)}catch(t){console.log(t)}})()},[a,i]),(0,l.jsxs)(p.B6,{context:e,children:[(0,l.jsx)(r.default.Layout,{}),!g&&k.map((t,e)=>{if(Array.isArray(t)){let[i,r]=t;return d.createElement(i,{key:e,...r})}return d.createElement(t,{key:e})})]})}i(6263),i(6042);var T={"@theme":function(t){t.exports=r},"react-dom":function(t){t.exports=n},"react-dom/client":function(t){t.exports=o}},E={};function M(t){var e=E[t];if(void 0!==e)return e.exports;var i=E[t]={exports:{}};return T[t](i,i.exports,M),i.exports}let B=c.default.ssg,{default:D,useThemeState:O}=M("@theme");(async function(){let t=document.getElementById("root"),e=async()=>{let t=await w(window.location.pathname);return function(){let[e,i]=(0,d.useState)(t),[r,s]=O();return(0,l.jsx)(h.Ni.Provider,{value:(0,d.useMemo)(()=>({theme:r,setTheme:s}),[r,s]),children:(0,l.jsx)(h.R0.Provider,{value:(0,d.useMemo)(()=>({data:e,setData:i}),[e,i]),children:(0,l.jsx)(h.VK,{children:(0,l.jsx)(C,{})})})})}},i=await e();{let{createRoot:e,hydrateRoot:r}=M("react-dom/client");(0,u.yv)()&&B?r(t,(0,l.jsx)(i,{})):e(t).render((0,l.jsx)(i,{}))}})().then(()=>{D.setup()})},6780:function(t,e,i){"use strict";i.r(e),i.d(e,{default:()=>r});let r={title:"Sensoro Design Chart",description:"",icon:"/logo.png",route:{cleanUrls:!0},themeConfig:{enableContentAnimation:!0,enableAppearanceAnimation:!1,lastUpdated:!0,hideNavbar:"auto",socialLinks:[{icon:"github",mode:"link",content:"https://github.com/Sensoro/sensoro-design-charts"}],locales:[],nav:{default:[{text:"VChart 图表",link:"/charts/start/introduction",activeMatch:"/charts/"},{text:"扩展图表",link:"/custom/",activeMatch:"/custom/"},{text:"示例图表",link:"/demos/",activeMatch:"/demos/"}]},sidebar:{"/charts":[{text:"开始",collapsible:!0,collapsed:!1,items:[{text:"介绍",link:"/charts/start/introduction",_fileKey:"charts/start/introduction"},{text:"快速开始",link:"/charts/start/getting-started",_fileKey:"charts/start/getting-started"}],link:"",_fileKey:""},{text:"面积图",link:"/charts/Area",_fileKey:"charts/Area"},{text:"折线图",link:"/charts/Line",_fileKey:"charts/Line"},{text:"区间柱图",link:"/charts/RangeColumn",_fileKey:"charts/RangeColumn"},{text:"饼图",link:"/charts/Pie",_fileKey:"charts/Pie"},{text:"桑基图",link:"/charts/Sankey",_fileKey:"charts/Sankey"},{text:"柱状图",link:"/charts/Bar",_fileKey:"charts/Bar"}],"/custom":[{text:"Hello world!",link:"/custom/index",_fileKey:"custom/index"},{text:"DoubleOverlapArea",link:"/custom/DoubleOverlapArea",_fileKey:"custom/DoubleOverlapArea"},{text:"HideAxesStackBar",link:"/custom/HideAxesStackBar",_fileKey:"custom/HideAxesStackBar"}],"/demos":[{text:"概览",link:"/demos/index",_fileKey:"demos/index"},{text:"定制化配置",collapsible:!0,collapsed:!1,items:[{text:"饼图",link:"/demos/config/Pie",_fileKey:"demos/config/Pie"},{text:"区间柱图",link:"/demos/config/RangeColumn",_fileKey:"demos/config/RangeColumn"}],link:"",_fileKey:""}],"/global":[{text:"ChartTheme",link:"/global/ChartTheme.tsx",_fileKey:"global/ChartTheme"}],"/public":[]}},base:"/sensoro-design-charts/",lang:"",locales:[],logo:"/logo.png",logoText:"Sensoro Design Chart",ssg:!1,multiVersion:{default:"",versions:[]},search:{},pages:[{title:"面积图",routePath:"/sensoro-design-charts/charts/Area",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/Area.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"柱状图",routePath:"/sensoro-design-charts/charts/Bar",lang:"",toc:[{text:"示例",id:"示例",depth:2,charIndex:3},{text:"基础饼图",id:"基础饼图",depth:3,charIndex:-1}],frontmatter:{},version:"",_relativePath:"charts/Bar.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"折线图",routePath:"/sensoro-design-charts/charts/Line",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/Line.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"饼图",routePath:"/sensoro-design-charts/charts/Pie",lang:"",toc:[{text:"示例",id:"示例",depth:2,charIndex:108},{text:"基础饼图",id:"基础饼图",depth:3,charIndex:114},{text:"环图",id:"环图",depth:3,charIndex:-1}],frontmatter:{},version:"",_relativePath:"charts/Pie.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"区间柱图",routePath:"/sensoro-design-charts/charts/RangeColumn",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/RangeColumn.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"桑基图",routePath:"/sensoro-design-charts/charts/Sankey",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/Sankey.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Area/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Area/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Bar/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Bar/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Line/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Line/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Line/step1",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Line/step1.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Pie/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Pie/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Pie/ring",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Pie/ring.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/RangeColumn/stack",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/RangeColumn/stack.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/charts/demo/Sankey/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/demo/Sankey/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"快速开始",routePath:"/sensoro-design-charts/charts/start/getting-started",lang:"",toc:[{text:"1. 安装依赖",id:"1-安装依赖",depth:2,charIndex:-1}],frontmatter:{},version:"",_relativePath:"charts/start/getting-started.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"介绍",routePath:"/sensoro-design-charts/charts/start/introduction",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"charts/start/introduction.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"DoubleOverlapArea",routePath:"/sensoro-design-charts/custom/DoubleOverlapArea",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"custom/DoubleOverlapArea.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"HideAxesStackBar",routePath:"/sensoro-design-charts/custom/HideAxesStackBar",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"custom/HideAxesStackBar.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/custom/demo/DoubleOverlapArea/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"custom/demo/DoubleOverlapArea/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/custom/demo/DoubleOverlapArea/decimal",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"custom/demo/DoubleOverlapArea/decimal.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/custom/demo/HideAxesStackBar/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"custom/demo/HideAxesStackBar/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"Hello world!",routePath:"/sensoro-design-charts/custom/",lang:"",toc:[{text:"Start",id:"start",depth:2,charIndex:3}],frontmatter:{},version:"",_relativePath:"custom/index.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"饼图",routePath:"/sensoro-design-charts/demos/config/Pie",lang:"",toc:[{text:"小型环图",id:"小型环图",depth:2,charIndex:-1}],frontmatter:{},version:"",_relativePath:"demos/config/Pie.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"区间柱图",routePath:"/sensoro-design-charts/demos/config/RangeColumn",lang:"",toc:[{text:"同一维度分布图",id:"同一维度分布图",depth:2,charIndex:-1}],frontmatter:{},version:"",_relativePath:"demos/config/RangeColumn.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/demos/config/demo/Pie/basic",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"demos/config/demo/Pie/basic.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/demos/config/demo/RangeColumn/stack",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"demos/config/demo/RangeColumn/stack.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"概览",routePath:"/sensoro-design-charts/demos/",lang:"",toc:[],frontmatter:{overview:!0,title:"概览"},version:"",_relativePath:"demos/index.mdx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/global/ChartTheme",lang:"",toc:[],frontmatter:{},version:"",_relativePath:"global/ChartTheme.tsx",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"},{title:"",routePath:"/sensoro-design-charts/",lang:"",toc:[],frontmatter:{pageType:"home",hero:{name:"Sensoro Design Chart",text:"基于 vchart 的图表库",actions:[{theme:"brand",text:"图表",link:"/charts/start/introduction"},{theme:"alt",text:"GitHub",link:"https://github.com/Sensoro/sensoro-design-charts"}],image:{src:"/logo.png",alt:"Logo"}},features:[{title:"Blazing fast build speed",details:"The core compilation module is based on the Rust front-end toolchain, providing a more ultimate development experience.",icon:"\uD83C\uDFC3\uD83C\uDFFB‍♀️"},{title:"Support for MDX content writing",details:"MDX is a powerful way to write content, allowing you to use React components in Markdown.",icon:"\uD83D\uDCE6"},{title:"Built-in full-text search",details:"Automatically generates a full-text search index for you during construction, providing out-of-the-box full-text search capabilities.",icon:"\uD83C\uDFA8"},{title:"Simpler I18n solution",details:"With the built-in I18n solution, you can easily provide multi-language support for documents or components.",icon:"\uD83C\uDF0D"},{title:"Static site generation",details:"In production, it automatically builds into static HTML files, which can be easily deployed anywhere.",icon:"\uD83C\uDF08"},{title:"Providing multiple custom capabilities",details:"Through its extension mechanism, you can easily extend theme UI and build process.",icon:"\uD83D\uDD25"}]},version:"",_relativePath:"index.md",extraHighlightLanguages:["jsx","tsx"],lastUpdatedTime:"2025/3/21 03:50:16"}],markdown:{showLineNumbers:!1,defaultWrapCode:!1,codeHighlighter:"prism"}}},2939:function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},453:function(t,e,i){"use strict";i.d(e,{Zo:()=>o,ah:()=>n});var r=i(5271);let s=r.createContext({});function n(t){let e=r.useContext(s);return r.useMemo(()=>"function"==typeof t?t(e):{...e,...t},[e,t])}let a={};function o({components:t,children:e,disableParentContext:i}){let o;return o=i?"function"==typeof t?t({}):t||a:n(t),r.createElement(s.Provider,{value:o},e)}},9449:function(t,e,i){"use strict";i.d(e,{$U:()=>y,E9:()=>k,I6:()=>n,Kw:()=>m,Qj:()=>g,_f:()=>d,bw:()=>h,lm:()=>u,mi:()=>p,nY:()=>c,pJ:()=>A,pZ:()=>v,rp:()=>a,t6:()=>o,tz:()=>S,xM:()=>_,xf:()=>f,yc:()=>x,yv:()=>l});let r=/\?.*$/s,s=/#.*$/s,n=/\.mdx?$/,a="rspress-theme-appearance",o="search_index",l=()=>!0,h=t=>t.replace(s,"").replace(r,"");function u(t){return t.replace(/#.*$/,"")}let d=()=>!0;function c(t){return"/"===t.charAt(0)||f(t)?t:`/${t}`}function p(t){return"/"===t.charAt(t.length-1)?t:`${t}/`}function g(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function m(t){return g(c(function(t){let e=t.replace(/\\/g,"/"),i=e.startsWith("/"),r=e.split("/"),s=[];for(let t of r)"."===t||""===t||(".."===t?s.length>0&&".."!==s[s.length-1]?s.pop():i&&s.push(".."):s.push(t));let n=s.join("/");return i&&(n=`/${n}`),n}(t)))}function f(t=""){return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("mailto:")||t.startsWith("tel:")}function v(t=""){return/^\s*data:/i.test(t)}function y(t,e,i,r="",s=!1,n=!1){let a=k(t,r);(!a||n)&&(a=s?"/index":"/index.html"),a.endsWith("/")&&(a+=s?"/index":"/index.html");let o="",l="",h="",u=a.split("/").filter(Boolean);return i.current&&i.current!==i.default&&(o=u.shift()||""),e.target!==e.default?(l=e.target,e.current!==e.default&&u.shift()):u.shift(),h=u.join("/")||"",(o||l)&&!h&&(h=s?"index":"index.html"),A(c([o,l,h].filter(Boolean).join("/")),r)}function _(t,e,i="",r=!1,s=!1){let n=k(t,i);(!n||s)&&(n=r?"/index":"/index.html");let a="",o=n.split("/").filter(Boolean);e.target!==e.default?(a=e.target,e.current!==e.default&&o.shift()):o.shift();let l=o.join("/")||"";return a&&!l&&(l=r?"index":"index.html"),A(c([a,l].filter(Boolean).join("/")),i)}let b=t=>{let[e,i=""]=t.split("#");return{url:e,hash:i}};function x(t,e=!1){if(!t)return"/";if(f(t))return t;let{url:i,hash:r}=b(decodeURIComponent(t));return e||i.endsWith(".html")||(i.endsWith("/")?i+="index.html":i+=".html"),e&&i.endsWith("/")&&(i+="index"),e&&i.endsWith(".html")&&(i=i.replace(/\.html$/,"")),c(r?`${i}#${r}`:i)}function S(t,e){return c(t).replace(m(e),"")}function A(t,e){let i=c(t),r=m(e);return i.startsWith(r)?i:`${r}${i}`}function k(t,e){return c(t).replace(RegExp(`^${m(e)}`),"")}},7763:function(t,e,i){"use strict";let r;i.r(e),i.d(e,{Overview:()=>ss,Layout:()=>iR,SwitchAppearance:()=>r$,Toc:()=>sD,HomeFeature:()=>rT,isMobileDevice:()=>eH,useEditLink:()=>i5,useHiddenNav:()=>eY,DocFooter:()=>e8,PrevNextPage:()=>sc,Tabs:()=>sv,useLocaleSiteData:()=>e5,usePathUtils:()=>ix,HomeLayout:()=>iO,Nav:()=>r7,SourceCode:()=>sT,bindingAsideScroll:()=>eJ,PackageManagerTabs:()=>su,parseInlineMarkdownText:()=>e$,usePrevNextPage:()=>e6,Card:()=>rS,default:()=>sO,Steps:()=>sE,setup:()=>eQ,Link:()=>rI,scrollToTarget:()=>eq,renderHtmlOrText:()=>eN,DocLayout:()=>iD,ScrollToTop:()=>sg,LastUpdated:()=>rO,renderInlineMarkdown:()=>eG,Tag:()=>sM,Tab:()=>sy,SearchPanel:()=>sw,EditLink:()=>rk,useSidebarData:()=>e4,useThemeState:()=>rv,SocialLinks:()=>rU,useFullTextSearch:()=>rd,useEnableNav:()=>eX,Button:()=>rx,useRedirect4FirstVisit:()=>iP,getCustomMDXComponent:()=>i3,Badge:()=>r_,RenderType:()=>rh,HomeFooter:()=>rE,SidebarList:()=>iv,HomeHero:()=>rB,Aside:()=>e1,LinkCard:()=>rR,Sidebar:()=>im,NotFoundLayout:()=>iL,Search:()=>sC});var s,n,a,o,l={};i.r(l),i.d(l,{onSearch:()=>eR}),i(3112);var h=i(2676),u=i(453),d=i(1859);let c=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g;var p=i(5271),g=i(2640);let m=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var f="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,y=f||v||Function("return this")();let _=function(){return y.Date.now()};var b=/\s/;let x=function(t){for(var e=t.length;e--&&b.test(t.charAt(e)););return e};var S=/^\s+/,A=y.Symbol,k=Object.prototype,w=k.hasOwnProperty,C=k.toString,T=A?A.toStringTag:void 0;let E=function(t){var e=w.call(t,T),i=t[T];try{t[T]=void 0;var r=!0}catch(t){}var s=C.call(t);return r&&(e?t[T]=i:delete t[T]),s};var M=Object.prototype.toString,B=A?A.toStringTag:void 0;let D=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":B&&B in Object(t)?E(t):M.call(t)},O=function(t){return"symbol"==typeof t||null!=t&&"object"==typeof t&&"[object Symbol]"==D(t)};var P=0/0,I=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,L=/^0o[0-7]+$/i,F=parseInt;let j=function(t){if("number"==typeof t)return t;if(O(t))return P;if(m(t)){var e,i="function"==typeof t.valueOf?t.valueOf():t;t=m(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=(e=t)?e.slice(0,x(e)+1).replace(S,""):e;var r=R.test(t);return r||L.test(t)?F(t.slice(2),r?2:8):I.test(t)?P:+t};var Z=Math.max,H=Math.min;let N=function(t,e,i){var r,s,n,a,o,l,h=0,u=!1,d=!1,c=!0;if("function"!=typeof t)throw TypeError("Expected a function");function p(e){var i=r,n=s;return r=s=void 0,h=e,a=t.apply(n,i)}function g(t){var i=t-l,r=t-h;return void 0===l||i>=e||i<0||d&&r>=n}function f(){var t,i,r,s=_();if(g(s))return v(s);o=setTimeout(f,(t=s-l,i=s-h,r=e-t,d?H(r,n-i):r))}function v(t){return(o=void 0,c&&r)?p(t):(r=s=void 0,a)}function y(){var t,i=_(),n=g(i);if(r=arguments,s=this,l=i,n){if(void 0===o)return h=t=l,o=setTimeout(f,e),u?p(t):a;if(d)return clearTimeout(o),o=setTimeout(f,e),p(l)}return void 0===o&&(o=setTimeout(f,e)),a}return e=j(e)||0,m(i)&&(u=!!i.leading,n=(d="maxWait"in i)?Z(j(i.maxWait)||0,e):n,c="trailing"in i?!!i.trailing:c),y.cancel=function(){void 0!==o&&clearTimeout(o),h=0,r=l=s=o=void 0},y.flush=function(){return void 0===o?a:v(_())},y},z=function(t,e,i){var r=!0,s=!0;if("function"!=typeof t)throw TypeError("Expected a function");return m(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),N(t,e,{leading:r,maxWait:e,trailing:s})};var V=i(9449);let U=t=>(0,h.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"})}),W=t=>(0,h.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"})});i(6308);var G=i(3810);let $=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M16 7H3V5h13zM3 19h13v-2H3zm19-7-4-3v2H3v2h15v2z"})}),X=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{fill:"#22a041",d:"M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"})}),Y=t=>(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 30 30",...t,children:[(0,h.jsx)("path",{fill:"currentColor",d:"M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2"}),(0,h.jsx)("path",{fill:"currentColor",d:"M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"})]}),K=t=>(0,h.jsx)("svg",{width:32,height:32,viewBox:"0 0 30 30",...t,children:(0,h.jsx)("path",{fill:"#49cd37",d:"m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9z"})});var q=i(874);function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function Q(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return J(t,void 0);var i=({}).toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?J(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e,i){var r;return(r=function(t,e){if("object"!=tt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=tt(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==tt(r)?r:r+"")in t)?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ti(){return(ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(null,arguments)}function tr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function ts(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(i),!0).forEach(function(e){te(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tr(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var tn={},ta=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function to(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function tl(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?to(Object(i),!0).forEach(function(e){te(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):to(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var th=/\n/g;function tu(t){var e,i,r,s,n=t.codeString,a=t.codeStyle,o=t.containerStyle,l=t.numberStyle,h=t.startingLineNumber;return p.createElement("code",{style:Object.assign({},a,void 0===o?{float:"left",paddingRight:"10px"}:o)},(i=(e={lines:n.replace(/\n$/,"").split("\n"),style:void 0===l?{}:l,startingLineNumber:h}).lines,r=e.startingLineNumber,s=e.style,i.map(function(t,e){var i=e+r;return p.createElement("span",{key:"line-".concat(e),className:"react-syntax-highlighter-line-number",style:"function"==typeof s?s(i):s},"".concat(i,"\n"))})))}function td(t,e){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(t),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:e},children:[{type:"text",value:t}]}}function tc(t,e,i){var r={display:"inline-block",minWidth:"".concat(i.toString().length,".25em"),paddingRight:"1em",textAlign:"right",userSelect:"none"},s="function"==typeof t?t(e):t;return tl(tl({},r),s)}function tp(t){var e=t.children,i=t.lineNumber,r=t.lineNumberStyle,s=t.largestLineNumber,n=t.showInlineLineNumbers,a=t.lineProps,o=void 0===a?{}:a,l=t.className,h=void 0===l?[]:l,u=t.showLineNumbers,d=t.wrapLongLines,c=t.wrapLines,p=void 0!==c&&c?tl({},"function"==typeof o?o(i):o):{};if(p.className=p.className?[].concat(Q(p.className.trim().split(/\s+/)),Q(h)):h,i&&n){var g=tc(r,i,s);e.unshift(td(i,g))}return d&u&&(p.style=tl({display:"flex"},p.style)),{type:"element",tagName:"span",properties:p,children:e}}function tg(t){var e=t.rows,i=t.stylesheet,r=t.useInlineStyles;return e.map(function(t,e){return function t(e){var i=e.node,r=e.stylesheet,s=e.style,n=e.useInlineStyles,a=e.key,o=i.properties,l=i.type,h=i.tagName,u=i.value;if("text"===l)return u;if(h){var d,c,g=(d=0,function(e){return d+=1,e.map(function(e,i){return t({node:e,stylesheet:r,useInlineStyles:n,key:"code-segment-".concat(d,"-").concat(i)})})});if(n){var m=Object.keys(r).reduce(function(t,e){return e.split(".").forEach(function(e){t.includes(e)||t.push(e)}),t},[]),f=o.className&&o.className.includes("token")?["token"]:[],v=o.className&&f.concat(o.className.filter(function(t){return!m.includes(t)}));c=ts(ts({},o),{},{className:v.join(" ")||void 0,style:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return(function(t){if(0===t.length||1===t.length)return t;var e,i=t.join(".");return!tn[i]&&(tn[i]=0===(e=t.length)||1===e?t:2===e?[t[0],t[1],"".concat(t[0],".").concat(t[1]),"".concat(t[1],".").concat(t[0])]:3===e?[t[0],t[1],t[2],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0])]:e>=4?[t[0],t[1],t[2],t[3],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[2],".").concat(t[3]),"".concat(t[3],".").concat(t[0]),"".concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[0]),"".concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[3],".").concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[2],".").concat(t[1],".").concat(t[0])]:void 0),tn[i]})(t.filter(function(t){return"token"!==t})).reduce(function(t,e){return ts(ts({},t),i[e])},e)}(o.className,Object.assign({},o.style,void 0===s?{}:s),r)})}else c=ts(ts({},o),{},{className:o.className.join(" ")});var y=g(i.children);return p.createElement(h,ti({key:a},c),y)}}({node:t,stylesheet:i,useInlineStyles:r,key:"code-segement".concat(e)})})}function tm(t){return t&&void 0!==t.highlightAuto}var tf=i(4678),tv=i.n(tf),ty=(s=tv(),n={},function(t){var e=t.language,i=t.children,r=t.style,a=void 0===r?n:r,o=t.customStyle,l=void 0===o?{}:o,h=t.codeTagProps,u=void 0===h?{className:e?"language-".concat(e):void 0,style:tl(tl({},a['code[class*="language-"]']),a['code[class*="language-'.concat(e,'"]')])}:h,d=t.useInlineStyles,c=void 0===d||d,g=t.showLineNumbers,m=void 0!==g&&g,f=t.showInlineLineNumbers,v=void 0===f||f,y=t.startingLineNumber,_=void 0===y?1:y,b=t.lineNumberContainerStyle,x=t.lineNumberStyle,S=void 0===x?{}:x,A=t.wrapLines,k=t.wrapLongLines,w=void 0!==k&&k,C=t.lineProps,T=t.renderer,E=t.PreTag,M=void 0===E?"pre":E,B=t.CodeTag,D=void 0===B?"code":B,O=t.code,P=void 0===O?(Array.isArray(i)?i[0]:i)||"":O,I=t.astGenerator,R=function(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;i[r]=t[r]}return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],-1===e.indexOf(i)&&({}).propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}(t,ta);I=I||s;var L=m?p.createElement(tu,{containerStyle:b,codeStyle:u.style||{},numberStyle:S,startingLineNumber:_,codeString:P}):null,F=a.hljs||a['pre[class*="language-"]']||{backgroundColor:"#fff"},j=tm(I)?"hljs":"prismjs",Z=c?Object.assign({},R,{style:Object.assign({},F,l)}):Object.assign({},R,{className:R.className?"".concat(j," ").concat(R.className):j,style:Object.assign({},l)});if(w?u.style=tl({whiteSpace:"pre-wrap"},u.style):u.style=tl({whiteSpace:"pre"},u.style),!I)return p.createElement(M,Z,L,p.createElement(D,u,P));(void 0===A&&T||w)&&(A=!0),T=T||tg;var H=[{type:"text",value:P}],N=function(t){var e=t.astGenerator,i=t.language,r=t.code,s=t.defaultCodeValue;if(tm(e)){var n=-1!==e.listLanguages().indexOf(i);return"text"===i?{value:s,language:"text"}:n?e.highlight(i,r):e.highlightAuto(r)}try{return i&&"text"!==i?{value:e.highlight(r,i)}:{value:s}}catch(t){return{value:s}}}({astGenerator:I,language:e,code:P,defaultCodeValue:H});null===N.language&&(N.value=H);var z=N.value.length;1===z&&"text"===N.value[0].type&&(z=N.value[0].value.split("\n").length);var V=z+_,U=function(t,e,i,r,s,n,a,o,l){var h,u=function t(e){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=0;s<e.length;s++){var n=e[s];if("text"===n.type)r.push(tp({children:[n],className:Q(new Set(i))}));else if(n.children){var a=i.concat(n.properties.className);t(n.children,a).forEach(function(t){return r.push(t)})}}return r}(t.value),d=[],c=-1,p=0;function g(t,n){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e||h.length>0?function(t,n){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return tp({children:t,lineNumber:n,lineNumberStyle:o,largestLineNumber:a,showInlineLineNumbers:s,lineProps:i,className:h,showLineNumbers:r,wrapLongLines:l,wrapLines:e})}(t,n,h):function(t,e){if(r&&e&&s){var i=tc(o,e,a);t.unshift(td(e,i))}return t}(t,n)}for(;p<u.length;)!function(){var t=u[p],e=t.children[0].value;if(e.match(th)){var i=e.split("\n");i.forEach(function(e,s){var a=r&&d.length+n,o={type:"text",value:"".concat(e,"\n")};if(0===s){var l=g(u.slice(c+1,p).concat(tp({children:[o],className:t.properties.className})),a);d.push(l)}else if(s===i.length-1){var h=u[p+1]&&u[p+1].children&&u[p+1].children[0],m={type:"text",value:"".concat(e)};if(h){var f=tp({children:[m],className:t.properties.className});u.splice(p+1,0,f)}else{var v=g([m],a,t.properties.className);d.push(v)}}else{var y=g([o],a,t.properties.className);d.push(y)}}),c=p}p++}();if(c!==u.length-1){var m=u.slice(c+1,u.length);if(m&&m.length){var f=g(m,r&&d.length+n);d.push(f)}}return e?d:(h=[]).concat.apply(h,d)}(N,A,void 0===C?{}:C,m,v,_,V,S,w);return p.createElement(M,Z,p.createElement(D,u,!v&&L,T({rows:U,stylesheet:a,useInlineStyles:c})))});ty.registerLanguage=function(t,e){return tv().register(e)},ty.alias=function(t,e){return tv().alias(t,e)};let t_={tsx:["jsx"]},tb={tsx:i(4335).default};function tx(t){return void 0===t||t}function tS(t){let e=Array(t);for(let i=0;i<t;i++)e[i]=tA();return e}function tA(){return Object.create(null)}function tk(t,e){return e.length-t.length}function tw(t){return"string"==typeof t}function tC(t){return"object"==typeof t}function tT(t){return"function"==typeof t}function tE(t,e){var i=tM;if(t&&(e&&(t=tO(t,e)),this.H&&(t=tO(t,this.H)),this.J&&1<t.length&&(t=tO(t,this.J)),i||""===i)){if(e=t.split(i),this.filter){t=this.filter,i=e.length;let r=[];for(let s=0,n=0;s<i;s++){let i=e[s];i&&!t[i]&&(r[n++]=i)}t=r}else t=e}return t}let tM=/[\p{Z}\p{S}\p{P}\p{C}]+/u,tB=/[\u0300-\u036f]/g;function tD(t,e){let i=Object.keys(t),r=i.length,s=[],n="",a=0;for(let o=0,l,h;o<r;o++)(h=t[l=i[o]])?(s[a++]=tP(e?"(?!\\b)"+l+"(\\b|_)":l),s[a++]=h):n+=(n?"|":"")+l;return n&&(s[a++]=tP(e?"(?!\\b)("+n+")(\\b|_)":"("+n+")"),s[a]=""),s}function tO(t,e){for(let i=0,r=e.length;i<r&&(t=t.replace(e[i],e[i+1]));i+=2);return t}function tP(t){return RegExp(t,"g")}function tI(t){let e="",i="";for(let r=0,s=t.length,n;r<s;r++)(n=t[r])!==i&&(e+=i=n);return e}function tR(t){return tE.call(this,(""+t).toLowerCase(),!1)}let tL={},tF={};function tj(t){tZ(t,"add"),tZ(t,"append"),tZ(t,"search"),tZ(t,"update"),tZ(t,"remove")}function tZ(t,e){t[e+"Async"]=function(){let t;let i=this,r=arguments;var s=r[r.length-1];return tT(s)&&(t=s,delete r[r.length-1]),s=new Promise(function(t){setTimeout(function(){i.async=!0;let s=i[e].apply(i,r);i.async=!1,t(s)})}),t?(s.then(t),this):s}}function tH(t,e,i,r){let s=t.length,n=[],a,o,l=0;r&&(r=[]);for(let h=s-1;0<=h;h--){let u=t[h],d=u.length,c=tA(),p=!a;for(let t=0;t<d;t++){let d=u[t],g=d.length;if(g)for(let t=0,u,m;t<g;t++)if(m=d[t],a){if(a[m]){if(!h){if(i)i--;else if(n[l++]=m,l===e)return n}(h||r)&&(c[m]=1),p=!0}if(r&&(u=(o[m]||0)+1,o[m]=u,u<s)){let t=r[u-2]||(r[u-2]=[]);t[t.length]=m}}else c[m]=1}if(r)a||(o=c);else if(!p)return[];a=c}if(r)for(let t=r.length-1,s,o;0<=t;t--){o=(s=r[t]).length;for(let t=0,r;t<o;t++)if(!a[r=s[t]]){if(i)i--;else if(n[l++]=r,l===e)return n;a[r]=1}}return n}function tN(t){this.l=!0!==t&&t,this.cache=tA(),this.h=[]}function tz(t,e,i){tC(t)&&(t=t.query);let r=this.cache.get(t);return r||(r=this.search(t,e,i),this.cache.set(t,r)),r}tN.prototype.set=function(t,e){if(!this.cache[t]){var i=this.h.length;for(i===this.l?delete this.cache[this.h[i-1]]:i++,--i;0<i;i--)this.h[i]=this.h[i-1];this.h[0]=t}this.cache[t]=e},tN.prototype.get=function(t){let e=this.cache[t];if(this.l&&e&&(t=this.h.indexOf(t))){let e=this.h[t-1];this.h[t-1]=this.h[t],this.h[t]=e}return e};let tV={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function tU(t,e,i,r,s,n,a,o){setTimeout(function(){let l=t(i?i+"."+r:r,JSON.stringify(a));l&&l.then?l.then(function(){e.export(t,e,i,s,n+1,o)}):e.export(t,e,i,s,n+1,o)})}function tW(t,e){if(!(this instanceof tW))return new tW(t);if(t){tw(t)?t=tV[t]:(i=t.preset)&&(t=Object.assign({},i[i],t)),i=t.charset;var i,r=t.lang;tw(i)&&(-1===i.indexOf(":")&&(i+=":default"),i=tF[i]),tw(r)&&(r=tL[r])}else t={};let s,n,a=t.context||{};if(this.encode=t.encode||i&&i.encode||tR,this.register=e||tA(),this.D=s=t.resolution||9,this.G=e=i&&i.G||t.tokenize||"strict",this.depth="strict"===e&&a.depth,this.l=tx(a.bidirectional),this.s=n=tx(t.optimize),this.m=tx(t.fastupdate),this.B=t.minlength||1,this.C=t.boost,this.map=n?tS(s):tA(),this.A=s=a.resolution||1,this.h=n?tS(s):tA(),this.F=i&&i.F||t.rtl,this.H=(e=t.matcher||r&&r.H)&&tD(e,!1),this.J=(e=t.stemmer||r&&r.J)&&tD(e,!0),i=e=t.filter||r&&r.filter){i=e,r=tA();for(let t=0,e=i.length;t<e;t++)r[i[t]]=1;i=r}this.filter=i,this.cache=(e=t.cache)&&new tN(e)}function tG(t,e,i,r,s){return i&&1<t?e+(r||0)<=t?i+(s||0):(t-1)/(e+(r||0))*(i+(s||0))+1|0:0}function t$(t,e,i,r,s,n,a){let o=a?t.h:t.map;(!e[i]||a&&!e[i][a])&&(t.s&&(o=o[r]),a?((e=e[i]||(e[i]=tA()))[a]=1,o=o[a]||(o[a]=tA())):e[i]=1,o=o[i]||(o[i]=[]),t.s||(o=o[r]||(o[r]=[])),n&&o.includes(s)||(o[o.length]=s,t.m&&((t=t.register[s]||(t.register[s]=[]))[t.length]=o)))}function tX(t,e,i,r,s,n,a,o){let l=[],h=o?t.h:t.map;if(t.s||(h=tK(h,a,o,t.l)),h){let i=0,u=Math.min(h.length,o?t.A:t.D);for(let e=0,d=0,c,p;e<u&&(!(c=h[e])||(t.s&&(c=tK(c,a,o,t.l)),s&&c&&n&&((p=c.length)<=s?(s-=p,c=null):(c=c.slice(s),s=0)),!c||(l[i++]=c,!n||!((d+=c.length)>=r))));e++);if(i)return n?tY(l,r,0):void(e[e.length]=l)}return!i&&l}function tY(t,e,i){return t=1===t.length?t[0]:[].concat.apply([],t),i||t.length>e?t.slice(i,i+e):t}function tK(t,e,i,r){return t=i?(t=t[(r=r&&e>i)?e:i])&&t[r?i:e]:t[e]}function tq(t,e,i,r,s){let n=0;if(t.constructor===Array){if(s)-1!==(e=t.indexOf(e))?1<t.length&&(t.splice(e,1),n++):n++;else{s=Math.min(t.length,i);for(let a=0,o;a<s;a++)(o=t[a])&&(n=tq(o,e,i,r,s),r||n||delete t[a])}}else for(let a in t)(n=tq(t[a],e,i,r,s))||delete t[a];return n}function tJ(t){t=t.data;var e=self._index;let i=t.args;var r=t.task;"init"===r?(r=t.options||{},t=t.factory,e=r.encode,r.cache=!1,e&&0===e.indexOf("function")&&(r.encode=Function("return "+e)()),t?(Function("return "+t)()(self),self._index=new self.FlexSearch.Index(r),delete self.FlexSearch):self._index=new tW(r)):(t=t.id,e=e[r].apply(e,i),postMessage("search"===r?{id:t,msg:e}:{id:t}))}(o=tW.prototype).append=function(t,e){return this.add(t,e,!0)},o.add=function(t,e,i,r){if(e&&(t||0===t)){if(!r&&!i&&this.register[t])return this.update(t,e);if(r=(e=this.encode(e)).length){let h=tA(),u=tA(),d=this.depth,c=this.D;for(let p=0;p<r;p++){let g=e[this.F?r-1-p:p];var s=g.length;if(g&&s>=this.B&&(d||!u[g])){var n=tG(c,r,p),a="";switch(this.G){case"full":if(2<s){for(n=0;n<s;n++)for(var o=s;o>n;o--)if(o-n>=this.B){var l=tG(c,r,p,s,n);t$(this,u,a=g.substring(n,o),l,t,i)}break}case"reverse":if(1<s){for(o=s-1;0<o;o--)(a=g[o]+a).length>=this.B&&t$(this,u,a,tG(c,r,p,s,o),t,i);a=""}case"forward":if(1<s){for(o=0;o<s;o++)(a+=g[o]).length>=this.B&&t$(this,u,a,n,t,i);break}default:if(this.C&&(n=Math.min(n/this.C(e,g,p)|0,c-1)),t$(this,u,g,n,t,i),d&&1<r&&p<r-1){for(s=tA(),a=this.A,n=g,o=Math.min(d+1,r-p),s[n]=1,l=1;l<o;l++)if((g=e[this.F?r-1-p-l:p+l])&&g.length>=this.B&&!s[g]){s[g]=1;let e=this.l&&g>n;t$(this,h,e?n:g,tG(a+(r/2>a?0:1),r,p,o-1,l-1),t,i,e?g:n)}}}}}this.m||(this.register[t]=1)}}return this},o.search=function(t,e,i){let r,s,n;i||(!e&&tC(t)?t=(i=t).query:tC(e)&&(i=e));let a=[],o,l,h=0;if(i){t=i.query||t,e=i.limit,h=i.offset||0;var u=i.context;l=i.suggest}if(t&&1<(o=(t=this.encode(""+t)).length)){i=tA();var d=[];for(let e=0,r=0,s;e<o;e++)if((s=t[e])&&s.length>=this.B&&!i[s]){if(!this.s&&!l&&!this.map[s])return a;d[r++]=s,i[s]=1}o=(t=d).length}if(!o)return a;for(e||(e=100),u=this.depth&&1<o&&!1!==u,i=0,u?(r=t[0],i=1):1<o&&t.sort(tk);i<o;i++){if(n=t[i],u?(s=tX(this,a,l,e,h,2===o,n,r),l&&!1===s&&a.length||(r=n)):s=tX(this,a,l,e,h,1===o,n),s)return s;if(l&&i===o-1){if(!(d=a.length)){if(u){u=0,i=-1;continue}return a}if(1===d)return tY(a[0],e,h)}}return tH(a,e,h,l)},o.contain=function(t){return!!this.register[t]},o.update=function(t,e){return this.remove(t).add(t,e)},o.remove=function(t,e){let i=this.register[t];if(i){if(this.m)for(let e=0,r;e<i.length;e++)(r=i[e]).splice(r.indexOf(t),1);else tq(this.map,t,this.D,this.s),this.depth&&tq(this.h,t,this.A,this.s);if(e||delete this.register[t],this.cache){e=this.cache;for(let i=0,r;i<e.h.length;i++)r=e.h[i],e.cache[r].includes(t)&&(e.h.splice(i--,1),delete e.cache[r])}}return this},o.searchCache=tz,o.export=function(t,e,i,r,s,n){let a,o,l=!0;switch(void 0===n&&(l=new Promise(t=>{n=t})),s||(s=0)){case 0:if(a="reg",this.m)for(let t in o=tA(),this.register)o[t]=1;else o=this.register;break;case 1:a="cfg",o={doc:0,opt:this.s?1:0};break;case 2:a="map",o=this.map;break;case 3:a="ctx",o=this.h;break;default:void 0===i&&n&&n();return}return tU(t,e||this,i,a,r,s,o,n),l},o.import=function(t,e){if(e)switch(tw(e)&&(e=JSON.parse(e)),t){case"cfg":this.s=!!e.opt;break;case"reg":this.m=!1,this.register=e;break;case"map":this.map=e;break;case"ctx":this.h=e}},tj(tW.prototype);let tQ=0;function t0(t){var e;if(!(this instanceof t0))return new t0(t);t?tT(e=t.encode)&&(t.encode=e.toString()):t={},(e=(self||window)._factory)&&(e=e.toString());let r="undefined"==typeof window&&self.exports,s=this;this.o=function(t,e,r){let s;try{s=e?new(i(3638)).Worker("//node/node.js"):t?new Worker(URL.createObjectURL(new Blob(["onmessage="+tJ.toString()],{type:"text/javascript"}))):new Worker(tw(r)?r:"worker/worker.js",{type:"module"})}catch(t){}return s}(e,r,t.worker),this.h=tA(),this.o&&(r?this.o.on("message",function(t){s.h[t.id](t.msg),delete s.h[t.id]}):this.o.onmessage=function(t){t=t.data,s.h[t.id](t.msg),delete s.h[t.id]},this.o.postMessage({task:"init",factory:e,options:t}))}function t1(t){t0.prototype[t]=t0.prototype[t+"Async"]=function(){let e;let i=this,r=[].slice.call(arguments);var s=r[r.length-1];return tT(s)&&(e=s,r.splice(r.length-1,1)),s=new Promise(function(e){setTimeout(function(){i.h[++tQ]=e,i.o.postMessage({task:t,id:tQ,args:r})})}),e?(s.then(e),this):s}}function t2(t){if(!(this instanceof t2))return new t2(t);var e,i=t.document||t.doc||t;this.K=[],this.h=[],this.A=[],this.register=tA(),this.key=(e=i.key||i.id)&&t3(e,this.A)||"id",this.m=tx(t.fastupdate),this.C=(e=i.store)&&!0!==e&&[],this.store=e&&tA(),this.I=(e=i.tag)&&t3(e,this.A),this.l=e&&tA(),this.cache=(e=t.cache)&&new tN(e),t.cache=!1,this.o=t.worker,this.async=!1,e=tA();let r=i.index||i.field||i;tw(r)&&(r=[r]);for(let i=0,s,n;i<r.length;i++)tw(s=r[i])||(n=s,s=s.field),n=tC(n)?Object.assign({},t,n):t,this.o&&(e[s]=new t0(n),e[s].o||(this.o=!1)),this.o||(e[s]=new tW(n,this.register)),this.K[i]=t3(s,this.A),this.h[i]=s;if(this.C)for(tw(t=i.store)&&(t=[t]),i=0;i<t.length;i++)this.C[i]=t3(t[i],this.A);this.index=e}function t3(t,e){let i=t.split(":"),r=0;for(let s=0;s<i.length;s++)0<=(t=i[s]).indexOf("[]")&&(t=t.substring(0,t.length-2))&&(e[r]=!0),t&&(i[r++]=t);return r<i.length&&(i.length=r),1<r?i:i[0]}function t5(t,e){if(tw(e))t=t[e];else for(let i=0;t&&i<e.length;i++)t=t[e[i]];return t}function t4(t,e,i,r){let s=this.l[t],n=s&&s.length-i;if(n&&0<n)return(n>e||i)&&(s=s.slice(i,i+e)),r&&(s=t6.call(this,s)),{tag:t,result:s}}function t6(t){let e=Array(t.length);for(let i=0,r;i<t.length;i++)r=t[i],e[i]={id:r,doc:this.store[r]};return e}t1("add"),t1("append"),t1("search"),t1("update"),t1("remove"),(o=t2.prototype).add=function(t,e,i){if(tC(t)&&(t=t5(e=t,this.key)),e&&(t||0===t)){if(!i&&this.register[t])return this.update(t,e);for(let r=0,s,n;r<this.h.length;r++)n=this.h[r],tw(s=this.K[r])&&(s=[s]),function t(e,i,r,s,n,a,o,l){if(e=e[o]){if(s===i.length-1){if(e.constructor===Array){if(r[s]){for(i=0;i<e.length;i++)n.add(a,e[i],!0,!0);return}e=e.join(" ")}n.add(a,e,l,!0)}else if(e.constructor===Array)for(o=0;o<e.length;o++)t(e,i,r,s,n,a,o,l);else o=i[++s],t(e,i,r,s,n,a,o,l)}}(e,s,this.A,0,this.index[n],t,s[0],i);if(this.I){let r=t5(e,this.I),s=tA();tw(r)&&(r=[r]);for(let e=0,n,a;e<r.length;e++)if(!s[n=r[e]]&&(s[n]=1,a=this.l[n]||(this.l[n]=[]),!i||!a.includes(t))&&(a[a.length]=t,this.m)){let e=this.register[t]||(this.register[t]=[]);e[e.length]=a}}if(this.store&&(!i||!this.store[t])){let i;if(this.C){i=tA();for(let t=0,r;t<this.C.length;t++)tw(r=this.C[t])?i[r]=e[r]:function t(e,i,r,s,n){if(e=e[n],s===r.length-1)i[n]=e;else if(e){if(e.constructor===Array)for(i=i[n]=Array(e.length),n=0;n<e.length;n++)t(e,i,r,s,n);else i=i[n]||(i[n]=tA()),n=r[++s],t(e,i,r,s,n)}}(e,i,r,0,r[0])}this.store[t]=i||e}}return this},o.append=function(t,e){return this.add(t,e,!0)},o.update=function(t,e){return this.remove(t).add(t,e)},o.remove=function(t){if(tC(t)&&(t=t5(t,this.key)),this.register[t]){for(var e=0;e<this.h.length&&(this.index[this.h[e]].remove(t,!this.o),!this.m);e++);if(this.I&&!this.m)for(let i in this.l){let r=(e=this.l[i]).indexOf(t);-1!==r&&(1<e.length?e.splice(r,1):delete this.l[i])}this.store&&delete this.store[t],delete this.register[t]}return this},o.search=function(t,e,i,r){i||(!e&&tC(t)?(i=t,t=""):tC(e)&&(i=e,e=0));let s=[],n=[],a,o,l,h,u,d,c=0;if(i){if(i.constructor===Array)l=i,i=null;else{if(t=i.query||t,l=(a=i.pluck)||i.index||i.field,h=i.tag,o=this.store&&i.enrich,u="and"===i.bool,e=i.limit||e||100,d=i.offset||0,h&&(tw(h)&&(h=[h]),!t)){for(let t=0,i;t<h.length;t++)(i=t4.call(this,h[t],e,d,o))&&(s[s.length]=i,c++);return c?s:[]}tw(l)&&(l=[l])}}l||(l=this.h),u=u&&(1<l.length||h&&1<h.length);let p=!r&&(this.o||this.async)&&[];for(let a=0,g,m,f;a<l.length;a++){let v;if(tw(m=l[a])||(m=(v=m).field,t=v.query||t,e=v.limit||e,o=v.enrich||o),p)p[a]=this.index[m].searchAsync(t,e,v||i);else{if(f=(g=r?r[a]:this.index[m].search(t,e,v||i))&&g.length,h&&f){let t=[],i=0;u&&(t[0]=[g]);for(let e=0,r,s;e<h.length;e++)r=h[e],(f=(s=this.l[r])&&s.length)&&(i++,t[t.length]=u?[s]:s);i&&(f=(g=u?tH(t,e||100,d||0):function(t,e){let i=tA(),r=tA(),s=[];for(let e=0;e<t.length;e++)i[t[e]]=1;for(let t=0,n;t<e.length;t++){n=e[t];for(let t=0,e;t<n.length;t++)i[e=n[t]]&&!r[e]&&(r[e]=1,s[s.length]=e)}return s}(g,t)).length)}if(f)n[c]=m,s[c++]=g;else if(u)return[]}}if(p){let r=this;return new Promise(function(s){Promise.all(p).then(function(n){s(r.search(t,e,i,n))})})}if(!c)return[];if(a&&(!o||!this.store))return s[0];for(let t=0,e;t<n.length;t++){if((e=s[t]).length&&o&&(e=t6.call(this,e)),a)return e;s[t]={field:n[t],result:e}}return s},o.contain=function(t){return!!this.register[t]},o.get=function(t){return this.store[t]},o.set=function(t,e){return this.store[t]=e,this},o.searchCache=tz,o.export=function(t,e,i,r,s,n){let a;if(void 0===n&&(a=new Promise(t=>{n=t})),s||(s=0),r||(r=0),r<this.h.length){let i=this.h[r],a=this.index[i];e=this,setTimeout(function(){a.export(t,e,s?i:"",r,s++,n)||(r++,s=1,e.export(t,e,i,r,s,n))})}else{let e,a;switch(s){case 1:e="tag",a=this.l,i=null;break;case 2:e="store",a=this.store,i=null;break;default:n();return}tU(t,this,i,e,r,s,a,n)}return a},o.import=function(t,e){if(e)switch(tw(e)&&(e=JSON.parse(e)),t){case"tag":this.l=e;break;case"reg":this.m=!1,this.register=e;for(let t=0,i;t<this.h.length;t++)(i=this.index[this.h[t]]).register=e,i.m=!1;break;case"store":this.store=e;break;default:let i=(t=t.split("."))[0];t=t[1],i&&t&&this.index[i].import(t,e)}},tj(t2.prototype);let t8=[tP("[\xe0\xe1\xe2\xe3\xe4\xe5]"),"a",tP("[\xe8\xe9\xea\xeb]"),"e",tP("[\xec\xed\xee\xef]"),"i",tP("[\xf2\xf3\xf4\xf5\xf6ő]"),"o",tP("[\xf9\xfa\xfb\xfcű]"),"u",tP("[\xfdŷ\xff]"),"y",tP("\xf1"),"n",tP("[\xe7c]"),"k",tP("\xdf"),"s",tP(" & ")," and "];function t7(t){var e=t=""+t;return e.normalize&&(e=e.normalize("NFD").replace(tB,"")),tE.call(this,e.toLowerCase(),!t.normalize&&t8)}let t9=/[^a-z0-9]+/,et={b:"p",v:"f",w:"f",z:"s",x:"s",ß:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function ee(t){t=t7.call(this,t).join(" ");let e=[];if(t){let i=t.split(t9),r=i.length;for(let s=0,n,a=0;s<r;s++)if((t=i[s])&&(!this.filter||!this.filter[t])){let i=et[n=t[0]]||n,r=i;for(let e=1;e<t.length;e++){let s=et[n=t[e]]||n;s&&s!==r&&(i+=s,r=s)}e[a++]=i}}return e}let ei=[tP("ae"),"a",tP("oe"),"o",tP("sh"),"s",tP("th"),"t",tP("ph"),"f",tP("pf"),"f",tP("(?![aeo])h(?![aeo])"),"",tP("(?!^[aeo])h(?!^[aeo])"),""];function er(t,e){return t&&(2<(t=ee.call(this,t).join(" ")).length&&(t=tO(t,ei)),e||(1<t.length&&(t=tI(t)),t&&(t=t.split(" ")))),t||[]}let es=tP("(?!\\b)[aeo]");tF["latin:default"]={encode:tR,F:!1,G:""},tF["latin:simple"]={encode:t7,F:!1,G:""},tF["latin:balance"]={encode:ee,F:!1,G:"strict"},tF["latin:advanced"]={encode:er,F:!1,G:""},tF["latin:extra"]={encode:function(t){return t&&(1<(t=er.call(this,t,!0)).length&&(t=t.replace(es,"")),1<t.length&&(t=tI(t)),t&&(t=t.split(" "))),t||[]},F:!1,G:""};let en={"###":"2b963093"};var ea=i(6780),eo=i(9981);let el=t=>(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",...t,children:[(0,h.jsx)("circle",{cx:8,cy:16,r:2,fill:"currentColor"}),(0,h.jsx)("circle",{cx:16,cy:16,r:2,fill:"currentColor"}),(0,h.jsx)("circle",{cx:24,cy:16,r:2,fill:"currentColor"})]});var eh=!1;if("undefined"!=typeof window){var eu={get passive(){eh=!0;return}};window.addEventListener("testPassive",null,eu),window.removeEventListener("testPassive",null,eu)}var ed="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),ec=[],ep=!1,eg=-1,em=void 0,ef=void 0,ev=void 0,ey=function(t){return ec.some(function(e){return!!(e.options.allowTouchMove&&e.options.allowTouchMove(t))})},e_=function(t){var e=t||window.event;return!!ey(e.target)||e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1)},eb=function(t){if(void 0===ev){var e=!!t&&!0===t.reserveScrollBarGap,i=window.innerWidth-document.documentElement.clientWidth;if(e&&i>0){var r=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);ev=document.body.style.paddingRight,document.body.style.paddingRight=r+i+"px"}}void 0===em&&(em=document.body.style.overflow,document.body.style.overflow="hidden")},ex=function(){void 0!==ev&&(document.body.style.paddingRight=ev,ev=void 0),void 0!==em&&(document.body.style.overflow=em,em=void 0)},eS=function(){if(void 0!==ef){var t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10);document.body.style.position=ef.position,document.body.style.top=ef.top,document.body.style.left=ef.left,window.scrollTo(e,t),ef=void 0}},eA=function(t,e){var i=t.targetTouches[0].clientY-eg;return!ey(t.target)&&(e&&0===e.scrollTop&&i>0?e_(t):e&&e.scrollHeight-e.scrollTop<=e.clientHeight&&i<0?e_(t):(t.stopPropagation(),!0))},ek=function(t,e){if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}!ec.some(function(e){return e.targetElement===t})&&(ec=[].concat(function(t){if(!Array.isArray(t))return Array.from(t);for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}(ec),[{targetElement:t,options:e||{}}]),ed?window.requestAnimationFrame(function(){if(void 0===ef){ef={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,e=t.scrollY,i=t.scrollX,r=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-e,document.body.style.left=-i,setTimeout(function(){return window.requestAnimationFrame(function(){var t=r-window.innerHeight;t&&e>=r&&(document.body.style.top=-(e+t))})},300)}}):eb(e),ed&&(t.ontouchstart=function(t){1===t.targetTouches.length&&(eg=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&eA(e,t)},ep||(document.addEventListener("touchmove",e_,eh?{passive:!1}:void 0),ep=!0)))},ew=function(){ed&&(ec.forEach(function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null}),ep&&(document.removeEventListener("touchmove",e_,eh?{passive:!1}:void 0),ep=!1),eg=-1),ed?eS():ex(),ec=[]};let eC=t=>(0,h.jsx)("svg",{width:18,height:18,viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.7 14.7 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.5 16.5 0 0 0 3 5.58A16.8 16.8 0 0 1 3 18l.75 1.86A18.5 18.5 0 0 0 9.53 16a16.9 16.9 0 0 0 5.76 3.84L16 18a14.5 14.5 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"})}),eT=t=>(0,h.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"})}),eE=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{d:"M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5s.2.8-.1 1.1c-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2M9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2"})}),eM=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{d:"M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6m0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4M12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1M12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1M5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3M19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3M3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1M23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1M4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3M18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3"})});var eB=i(967);let eD=t=>(0,h.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"})}),eO=t=>(0,h.jsx)("svg",{width:24,height:24,viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"var(--rp-c-gray)",d:"m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9"})}),eP=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M24 9.4 22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6z"})}),eI=t=>(0,h.jsx)("svg",{width:32,height:32,viewBox:"0 0 24 24",...t,children:(0,h.jsxs)("g",{fill:"none",stroke:"var(--rp-c-brand)",strokeLinecap:"round",strokeWidth:2,children:[(0,h.jsx)("path",{strokeDasharray:60,strokeDashoffset:60,strokeOpacity:.3,d:"M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Z",children:(0,h.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"1.3s",values:"60;0"})}),(0,h.jsxs)("path",{strokeDasharray:15,strokeDashoffset:15,d:"M12 3a9 9 0 0 1 9 9",children:[(0,h.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.3s",values:"15;0"}),(0,h.jsx)("animateTransform",{attributeName:"transform",dur:"1.5s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})]})]})}),eR=()=>{},eL=t=>(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,fill:"none",viewBox:"0 0 48 48",...t,children:[(0,h.jsx)("path",{stroke:"currentColor",strokeWidth:4,d:"M24 5v6m7 1 4-4m-18 4-4-4m27 33H8a2 2 0 0 1-2-2v-8.46a2 2 0 0 1 .272-1.007l6.15-10.54A2 2 0 0 1 14.148 18H33.85a2 2 0 0 1 1.728.992l6.149 10.541A2 2 0 0 1 42 30.541V39a2 2 0 0 1-2 2Z"}),(0,h.jsx)("path",{stroke:"currentColor",strokeWidth:4,d:"M41.5 30H28s-1 3-4 3-4-3-4-3H6.5"})]}),eF=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M13.414 17.586 18 22.172V8H8V6h10a2 2 0 0 1 2 2v14.172l4.586-4.586L26 19l-7 7-7-7Z"})}),ej=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})}),eZ=t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"m21.94 13.11-1.05-3.22c0-.03-.01-.06-.02-.09l-2.11-6.48a.86.86 0 0 0-.8-.57c-.36 0-.68.25-.79.58l-2 6.17H8.84L6.83 3.33a.85.85 0 0 0-.79-.58c-.37 0-.69.25-.8.58L3.13 9.82v.01l-1.07 3.28c-.16.5.01 1.04.44 1.34l9.22 6.71c.17.12.39.12.56-.01l9.22-6.7c.43-.3.6-.84.44-1.34M8.15 10.45l2.57 7.91-6.17-7.91m8.73 7.92 2.47-7.59.1-.33h3.61l-5.59 7.16m4.1-13.67 1.81 5.56h-3.62m-1.3.95-1.79 5.51L12 19.24l-2.86-8.79M6.03 3.94 7.84 9.5H4.23m-1.18 4.19c-.09-.07-.13-.19-.09-.29l.79-2.43 5.82 7.45m11.38-4.73-6.51 4.73.02-.03 5.79-7.42.79 2.43c.04.1 0 .22-.09.29"})});function eH(){return window.innerWidth<1280}function eN(t){return t?"number"==typeof t?t:/<([a-z]+)([^<]*)(?:>(.*?)<\/\1>|\s*\/>)/i.test(t)?g(t):t.replace(/\\</g,"<").replace(/\\>/g,">").replace(/&lt;/g,"<").replace(/&gt;/g,">"):""}let ez=/`(.*?)`/g,eV=/\*{2}(?!\*)(.*?)\*{2}(?!\*)/g,eU=/\*(?!\*)(.*?)\*(?!\*)/g,eW=/\~{2}(.*?)\~{2}/g;function eG(t){return eN(t.replace(/`[^`]+`/g,t=>t.replace(/</g,"&lt;")).replace(eV,"<strong>$1</strong>").replace(eU,"<em>$1</em>").replace(eW,"<del>$1</del>").replace(ez,"<code>$1</code>"))}function e$(t){return t.replace(eV,"$1").replace(eU,"$1").replace(eW,"$1").replace(ez,"$1")}function eX(){let{siteData:{themeConfig:t},page:{frontmatter:e={}}}=(0,d.Vi)(),i=(e?.navbar??!0)&&t?.hideNavbar!=="always",[r,s]=(0,p.useState)(i);return[r,s]}function eY(){let{siteData:{themeConfig:t}}=(0,d.Vi)(),e=t.hideNavbar??"never",[i,r]=(0,p.useState)(!1),{pathname:s}=(0,d.TH)(),n=(0,p.useRef)(0);return"never"!==e&&("always"===e||((0,p.useEffect)(()=>{r(!1);let t=z(()=>{let{scrollTop:t}=document.documentElement;t!==n.current&&(r(n.current>0&&t-n.current>0),n.current=t<=0?0:t)},200);return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[s]),i))}function eK(t,e=72){let i=Number.parseInt(window.getComputedStyle(t).paddingTop,10);return Math.round(window.scrollY+t.getBoundingClientRect().top-e-i)}function eq(t,e,i=72){window.scrollTo({left:0,top:eK(t,i),...e?{behavior:"smooth"}:{}})}function eJ(){let t=document.getElementById("aside-container"),e=Array.from(document.querySelectorAll(".rspress-doc .header-anchor")).filter(t=>t.parentElement?.tagName!=="H1");if(!t||!e.length)return;let i=null;if(!Array.from(t?.getElementsByTagName("a")||[]).map(t=>decodeURIComponent(t.hash)).length)return;let r=(e,r)=>{if(e[r]){let s=e[r].getAttribute("href"),n=t?.querySelector(`a[href="#${s?.slice(1)}"]`);n&&(i&&i.classList.remove("aside-active"),(i=n).classList.add("aside-active"))}},s=()=>{if(document.documentElement.scrollTop+window.innerHeight>=document.documentElement.scrollHeight)r(e,e.length-1);else for(let t=0;t<e.length;t++){let i=e[t],s=e[t+1],n=Math.ceil(window.scrollY),a=eK(i.parentElement);if(0===t&&n<a||0===n){r(e,0);break}if(!s){r(e,t);break}let o=eK(s.parentElement);if(n>=a&&n<o){r(e,t);break}}},n=z(s,100);return window.addEventListener("scroll",n),s(),()=>{i&&i.classList.remove("aside-active"),window.removeEventListener("scroll",n)}}function eQ(){(0,V._f)()&&(window.addEventListener("click",t=>{let e=t.target.closest("a");if(e){let{origin:i,hash:r,target:s,pathname:n,search:a}=e,o=window.location;r&&"_blank"!==s&&i===o.origin&&(n===o.pathname&&a===o.search&&r&&e.classList.contains("header-anchor")?(t.preventDefault(),history.pushState(null,"",r),function(t,e,i=!1){let r=null;try{r=t.classList.contains("header-anchor")?t:document.getElementById(decodeURIComponent(e.slice(1)))}catch(t){console.warn(t)}r&&eq(r,i)}(e,r,!0),window.dispatchEvent(new Event("hashchange"))):window.addEventListener("RspressReloadContent",()=>{location.hash.length>1&&eq(document.getElementById(location.hash.slice(1)),!1)}))}},{capture:!0}),window.addEventListener("hashchange",t=>{t.preventDefault()}))}let e0=({header:t,baseHeaderLevel:e})=>(0,h.jsx)("li",{children:(0,h.jsx)("a",{href:`#${t.id}`,title:e$(t.text),className:"aside-link transition-all duration-300 hover:text-text-1 text-text-2 block",style:{marginLeft:(t.depth-e)*12,fontWeight:"semibold"},onClick:e=>{e.preventDefault(),window.location.hash=t.id},children:(0,h.jsx)("span",{className:"aside-link-text block",children:eG(t.text)})})});function e1(t){let{headers:e}=t,i=e.length>0,r=e[0]?.depth||2,s=eY(),{hash:n="",pathname:a}=(0,d.TH)(),o=(0,p.useMemo)(()=>decodeURIComponent(n),[n]);return(0,p.useEffect)(()=>{let t;return setTimeout(()=>{t=eJ()},100),()=>{t&&t()}},[e]),(0,p.useEffect)(()=>{if(0===o.length)window.scrollTo(0,0);else{let t=document.getElementById(o.slice(1));t&&eq(t,!1,s?0:72)}},[o,e,a]),(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)("div",{className:i?"<lg:hidden":"hidden",children:(0,h.jsxs)("div",{id:"aside-container",className:"relative text-sm font-medium",children:[(0,h.jsx)("div",{className:"leading-7 block text-sm font-semibold pl-3",children:t.outlineTitle}),(0,h.jsx)("nav",{className:"mt-1",children:(0,h.jsx)("ul",{className:"relative",children:e.map(t=>(0,h.jsx)(e0,{baseHeaderLevel:r,header:t},`${a}#${t.id}`))})})]})})})}let e2=(t,e)=>{let i=(0,d.pJ)(t);if(i===e)return!0;let r=(0,V.mi)(i);if(e.startsWith(r))return!0;let s=`${i}.`;return e.startsWith(s)},e3=(t,e)=>{for(let i of Object.keys(t).sort((t,e)=>e.length-t.length))if(e2(i,e))return t[i];return[]};function e5(){let t=(0,d.Vi)(),{page:{lang:e}}=t,i=t?.siteData?.themeConfig??{},r=t.siteData.lang??"",s=i?.locales;return s&&0!==s.length?{...s.find(t=>t.lang===e),langRoutePrefix:e===r?"/":(0,V.mi)(e)}:{nav:i.nav,sidebar:i.sidebar,prevPageText:i.prevPageText,nextPageText:i.nextPageText,sourceCodeText:i.sourceCodeText,searchPlaceholderText:i.searchPlaceholderText,searchNoResultsText:i.searchNoResultsText,searchSuggestedQueryText:i.searchSuggestedQueryText,overview:i.overview}}function e4(){let{sidebar:t}=e5(),{pathname:e}=(0,d.TH)(),i=decodeURIComponent(e);return(0,p.useMemo)(()=>e3(t,i),[t,i])}function e6(){let{pathname:t}=(0,d.TH)(),e=e4(),i=[],r=t=>{"items"in t?(t.link&&i.push({text:t.text,link:t.link}),t.items.forEach(t=>{"dividerType"in t||r(t)})):i.push(t)};e.forEach(t=>!("dividerType"in t)&&r(t));let s=i.findIndex(e=>(0,d.pV)((0,d.pJ)(e.link),t));return{prevPage:i[s-1]||null,nextPage:i[s+1]||null}}function e8(){let{prevPage:t,nextPage:e}=e6(),{lastUpdated:i=!1}=e5(),{siteData:r}=(0,d.Vi)(),{themeConfig:s}=r,n=s.lastUpdated||i;return(0,h.jsxs)("footer",{className:"mt-8",children:[(0,h.jsx)("div",{className:"xs:flex pb-5 px-2 justify-end items-center",children:n&&(0,h.jsx)(rO,{})}),(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)(rk,{})}),(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-around gap-4 pt-6",children:[(0,h.jsx)("div",{className:"prev_c92d1 flex flex-col",children:t?(0,h.jsx)(sc,{type:"prev",text:t.text,href:(0,d.AP)(t.link)}):null}),(0,h.jsx)("div",{className:"next_c11be flex flex-col",children:e?(0,h.jsx)(sc,{type:"next",text:e.text,href:(0,d.AP)(e.link)}):null})]})]})}let e7={hidden:"hidden_f8586",container:"container_e4235",navContainer:"navContainer_d18b1",leftNav:"leftNav_e6722",rightNav:"rightNav_a2fea",singleItem:"singleItem_c1154",activeItem:"activeItem_a28b5",navBarTitle:"navBarTitle_c5f07",menuItem:"menu-item_b8238",mobileNavMenu:"mobileNavMenu_e7045"},e9=()=>{let{siteData:t}=(0,d.Vi)(),e=e5(),{logo:i,logoText:r}=t,s=e.title??t.title,n=(0,p.useMemo)(()=>i?"string"==typeof i?(0,h.jsx)("img",{src:(0,d.i6)(i),alt:"logo",id:"logo",className:"rspress-logo"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:(0,d.i6)(i.light),alt:"logo",id:"logo",className:"rspress-logo dark:hidden"}),(0,h.jsx)("img",{src:(0,d.i6)(i.dark),alt:"logo",id:"logo",className:"rspress-logo hidden dark:block"})]}):null,[i]);return(0,h.jsx)("div",{className:`${e7.navBarTitle}`,children:(0,h.jsxs)(rI,{href:e.langRoutePrefix,className:"flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60",children:[n&&(0,h.jsx)("div",{className:"mr-1 min-w-8",children:n}),r&&(0,h.jsx)("span",{children:r}),!n&&!r&&(0,h.jsx)("span",{children:s})]})})};function it(t){let{depth:e,dividerType:i}=t;return(0,h.jsx)("div",{className:`${"dashed"===i?"border-dashed":"border-solid"} border-t border-divider-light my-3`,style:{marginLeft:0===e?0:"18px"}})}function ie({icon:t,...e}){return t?"string"==typeof t?(0,h.jsx)("img",{src:t,alt:"",...e}):(0,h.jsx)(t,{...e}):null}let ii={navTitleMask:"navTitleMask_fb17c",sidebar:"sidebar_dd719",sidebarContent:"sidebarContent_da296",open:"open_becbd",menuLink:"menuLink_bb039",menuItem:"menuItem_ac22e",collapseContainer:"collapseContainer_d6e4e",menuItemActive:"menuItemActive_de63c"},ir=t=>"dividerType"in t,is=t=>!("items"in t)&&"link"in t,ia=t=>"sectionHeaderText"in t,io=t=>"link"in t&&(0,V.xf)(t.link),il=t=>{let e=(0,d.Ww)(t);e&&e.preload()},ih=()=>{let{pathname:t}=(0,d.TH)();return(0,p.useCallback)(e=>(function(t,e){let i=(0,d.Tm)((0,d.pJ)(t)),r=(0,d.Tm)(e);return null!==(0,d.LX)(i,r)})(e,decodeURIComponent(t)),[t])};function iu(t){let{item:e,depth:i=0,activeMatcher:r,id:s,setSidebarData:n}=t,a=(0,d.s0)(),o=(0,p.useRef)(null),l=(0,p.useRef)(),u=(0,p.useRef)(null),c=(0,p.useRef)(!0),g=(0,p.useRef)("collapsed"in e&&e.collapsed),m=e.link&&r(e.link),{collapsed:f,collapsible:v=!0}=e,y=(0,h.jsx)("div",{style:{cursor:"pointer",transition:"transform 0.2s ease-out",transform:f?"rotate(0deg)":"rotate(90deg)"},children:(0,h.jsx)(ie,{icon:U})});(0,p.useEffect)(()=>{if(c.current||!o.current||!u.current)return;l.current&&clearTimeout(l.current);let t=o.current,e=u.current,i=e.clientHeight+4;f?(t.style.maxHeight=`${i}px`,t.style.transitionDuration="0.5s",e.style.opacity="0",l.current=window.setTimeout(()=>{o.current&&(o.current.style.maxHeight="0px")},0)):(t.style.maxHeight=`${i}px`,t.style.transitionDuration="0.3s",e.style.opacity="1",l.current=window.setTimeout(()=>{o.current&&o.current.style.removeProperty("max-height")},300))},[f]),(0,p.useEffect)(()=>{c.current=!1},[]);let _=t=>{t.stopPropagation(),n(t=>{let e=[...t],i=s.split("-").map(Number),r=e[i.shift()];for(let t of i)r=r.items[t];return"items"in r&&(r.collapsed=!r.collapsed),e})};return(0,h.jsxs)("section",{className:"rspress-sidebar-section mt-0.5 block","data-context":e.context,style:{marginLeft:0===i?0:"18px"},children:[(0,h.jsxs)("div",{className:`rspress-sidebar-collapse flex justify-between items-center ${m?ii.menuItemActive:ii.menuItem}`,"data-context":e.context,onMouseEnter:()=>e.link&&il(e.link),onClick:t=>{e.link&&a((0,d.pJ)((0,d.AP)(e.link))),v&&_(t)},style:{borderRadius:0===i?"0 var(--rp-radius) var(--rp-radius) 0":void 0,cursor:v||e.link?"pointer":"normal"},children:[(0,h.jsxs)("h2",{className:"py-2 px-3 text-sm font-medium flex",style:{...0===i?ip:{}},children:[(0,h.jsx)(sM,{tag:e.tag}),(0,h.jsx)("span",{className:"flex-center",style:{fontSize:0===i?"14px":"13px"},children:eG(e.text)})]}),v&&(0,h.jsx)("div",{className:`${ii.collapseContainer} p-2 rounded-xl`,onClick:_,children:y})]}),(0,h.jsx)("div",{ref:o,className:"transition-all duration-300 ease-in-out",style:{overflow:"hidden",maxHeight:g.current?0:void 0},children:(0,h.jsx)("div",{ref:u,className:"rspress-sidebar-group transition-opacity duration-500 ease-in-out",style:{opacity:g.current?0:1,marginLeft:0===i?"12px":0},children:e?.items?.map((e,r)=>ir(e)?h.jsx(it,{depth:i+1,dividerType:e.dividerType},r):h.jsx("div",{className:"rspress-sidebar-item","data-context":e.context,children:h.jsx(id,{...t,item:e,depth:i+1,id:`${s}-${r}`})},r))})})]},s)}function id(t){let{item:e,depth:i=0,activeMatcher:r,id:s,setSidebarData:n}=t,a="link"in e&&e.link&&r(e.link),o=(0,p.useRef)(null);return((0,p.useEffect)(()=>{a&&o.current?.scrollIntoView({block:"center"})},[]),"items"in e)?(0,h.jsx)(iu,{id:s,activeMatcher:r,item:e,depth:i,collapsed:e.collapsed,setSidebarData:n},`${e.text}-${s}`):(0,h.jsx)(rI,{href:(0,d.AP)(e.link),className:ii.menuLink,children:(0,h.jsxs)("div",{ref:o,onMouseEnter:()=>il(e.link),className:`${a?ii.menuItemActive:ii.menuItem} mt-0.5 py-2 px-3 font-medium flex`,style:{fontSize:0===i?"14px":"13px",marginLeft:0===i?0:"18px",borderRadius:"0 var(--rp-radius) var(--rp-radius) 0",...0===i?ip:{}},children:[(0,h.jsx)(sM,{tag:e.tag}),(0,h.jsx)("span",{children:eG(e.text)})]})})}function ic({sectionHeaderText:t,tag:e}){return(0,h.jsxs)("div",{className:"rspress-sidebar-section-header",children:[(0,h.jsx)(sM,{tag:e}),(0,h.jsx)("span",{children:eG(t)})]})}let ip={fontSize:"14px",paddingLeft:"24px",fontWeight:"bold"},ig=new WeakMap;function im(t){let{isSidebarOpen:e,beforeSidebar:i,afterSidebar:s,uiSwitch:n,navTitle:a}=t,{pathname:o}=(0,d.TH)(),l=e4(),[u,c]=(0,p.useState)(()=>l.filter(Boolean).flat()),g=decodeURIComponent(o),m=ih();return(0,p.useEffect)(()=>{(0,V._f)()&&(e?(r=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=r||"")},[e]),(0,p.useEffect)(()=>{if(l===u)return;ig=new WeakMap;let t=e=>ig.has(e)?ig.get(e):"link"in e&&e.link&&m(e.link)||"items"in e&&e.items.some(e=>t(e))?(ig.set(e,!0),!0):(ig.set(e,!1),!1),e=i=>{"items"in i&&(i.items.forEach(e),t(i)&&(i.collapsed=!1))},i=l.filter(Boolean).flat();i.forEach(e),c(i)},[l,g]),(0,h.jsxs)("aside",{className:`${ii.sidebar} rspress-sidebar ${e?ii.open:""}`,children:[n?.showNavbar?(0,h.jsx)("div",{className:ii.navTitleMask,children:a||(0,h.jsx)(e9,{})}):null,(0,h.jsx)("div",{className:`rspress-scrollbar ${ii.sidebarContent}`,children:(0,h.jsxs)("nav",{className:"pb-2",children:[i,(0,h.jsx)(iv,{sidebarData:u,setSidebarData:c}),s]})})]})}function iv({sidebarData:t,setSidebarData:e}){let i=ih();return(0,h.jsx)(h.Fragment,{children:t.map((t,r)=>(0,h.jsx)(iy,{item:t,index:r,setSidebarData:e,activeMatcher:i},r))})}function iy(t){let{item:e,index:i,setSidebarData:r,activeMatcher:s}=t;return ir(e)?(0,h.jsx)(it,{depth:0,dividerType:e.dividerType},i):ia(e)?(0,h.jsx)(ic,{sectionHeaderText:e.sectionHeaderText,tag:e.tag},i):io(e)?(0,h.jsx)("div",{className:"rspress-sidebar-item rspress-sidebar-custom-link","data-context":e.context,children:(0,h.jsx)(id,{id:String(i),item:e,depth:0,collapsed:e.collapsed??!0,setSidebarData:r,activeMatcher:s},i)},i):(0,h.jsx)(id,{id:String(i),item:e,depth:0,activeMatcher:s,collapsed:e.collapsed??!0,setSidebarData:r},i)}function i_({isSidebarOpen:t,onIsSidebarOpenChange:e,outlineTitle:i,uiSwitch:r}){let s=(0,p.useRef)(null),n=(0,p.useRef)(null),[a,o]=(0,p.useState)(!1),{pathname:l}=(0,d.TH)();(0,p.useEffect)(()=>{e(!1)},[l]),(0,p.useEffect)(()=>(document.addEventListener("mouseup",u),document.addEventListener("touchend",u),()=>{document.addEventListener("mouseup",u),document.removeEventListener("touchend",u)}),[]);let u=t=>{let{current:e}=n;if(e?.contains(t.target))return;let{current:i}=s;i&&!i.contains(t.target)&&o(!1)};return(0,h.jsxs)("div",{className:"rspress-sidebar-menu",children:[r?.showSidebar&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("button",{onClick:function(){e(!0)},className:"flex-center mr-auto",children:[(0,h.jsx)("div",{className:"text-md mr-2",children:(0,h.jsx)(ie,{icon:W})}),(0,h.jsx)("span",{className:"text-sm",children:"Menu"})]}),t&&(0,h.jsx)("div",{onClick:function(){e(!1)},className:"rspress-sidebar-back-drop",style:{background:"rgba(0, 0, 0, 0.6)"}})]}),r?.showAside&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("button",{onClick:()=>o(t=>!t),className:"flex-center ml-auto",ref:n,children:[(0,h.jsx)("span",{className:"text-sm",children:i}),(0,h.jsx)("div",{className:"text-md mr-2",style:{transform:a?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease-out",marginTop:"2px"},children:(0,h.jsx)(ie,{icon:U})})]}),(0,h.jsx)("div",{className:`rspress-local-toc-container ${a?"rspress-local-toc-container-show":""}`,children:(0,h.jsx)(sD,{onItemClick:()=>{o(!1)}})})]})]})}let ib=(0,p.createContext)({tabData:{},setTabData:()=>{}});function ix(){let t=(0,d.Jr)(),e=(0,d.aw)(),i=(0,d.Vi)(),r=i.siteData.lang,s=i.siteData.multiVersion.default;return{normalizeLinkHref:i=>{let n=i;if((r||s)&&!(0,V.xf)(n)&&!n.startsWith("#")){let i=(n=(0,d.E9)(n)).split("/").filter(Boolean),a="",o="",l="";return s&&(e!==s?(a=e,i[0]===e&&i.shift()):i[0]===s&&i.shift()),r&&(t!==r?(o=t,i[0]===t&&i.shift()):i[0]===r&&i.shift()),l=i.join("/"),(0,d.AP)((0,d.pJ)([a,o,l].filter(Boolean).join("/")))}return n}}}let iS={title:"title_fb7eb",blockquote:"blockquote_f1063",link:"link_a9ef4","inline-link":"inline-link_f855c"},iA=t=>{let{href:e="",className:i=""}=t,{normalizeLinkHref:r}=ix();return i.includes("header-anchor")||e.startsWith("#")?(0,h.jsx)("a",{...t,className:`${iS.link} ${i}`}):(0,h.jsx)(rI,{...t,className:`${i} ${iS.link} ${iS["inline-link"]}`,href:r(e)})},ik=t=>(0,h.jsx)("h1",{...t,className:`rspress-doc-title text-3xl mb-10 leading-10 tracking-tight ${iS.title}`}),iw=t=>(0,h.jsx)("h2",{...t,className:`mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light ${iS.title}`}),iC=t=>(0,h.jsx)("h3",{...t,className:`mt-10 mb-2 leading-7 text-xl ${iS.title}`}),iT=t=>(0,h.jsx)("h4",{...t,className:`mt-8 leading-6 text-lg ${iS.title}`}),iE=t=>(0,h.jsx)("h5",{...t,className:iS.title}),iM=t=>(0,h.jsx)("h6",{...t,className:iS.title}),iB={asideContainer:"aside-container_bc5fa",content:"content_ff766",docLayout:"docLayout_af141"};function iD(t){let{beforeDocFooter:e,afterDocFooter:i,beforeDoc:r,afterDoc:s,beforeDocContent:n,afterDocContent:a,beforeOutline:o,afterOutline:l,beforeSidebar:g,afterSidebar:m,uiSwitch:f,navTitle:v,components:y}=t,{siteData:_,page:b}=(0,d.Vi)(),{headingTitle:x,title:S,toc:A=[],frontmatter:k}=b,[w,C]=(0,p.useState)({}),{themeConfig:T}=_,E=T.enableScrollToTop??!1,M=e5(),B=M?.outlineTitle||T?.outlineTitle||"ON THIS PAGE",D=k?.overview??!1,O={...i3(),...y},P=(0,h.jsx)(ib.Provider,{value:{tabData:w,setTabData:C},children:(0,h.jsx)(u.Zo,{components:O,children:(0,h.jsx)(d.VY,{})})}),I=(0,p.useMemo)(()=>{var t;let e=S&&("string"!=typeof(t=S)?"":(t=t.toLowerCase()).replace(c,"").replace(/ /g,"-"));return!1!==_.themeConfig.fallbackHeadingTitle&&!x&&e&&(0,h.jsxs)(ik,{id:e,children:[S,(0,h.jsx)(iA,{className:"header-anchor",href:`#${e}`,"aria-hidden":!0,children:"#"})]})},[x,S]),[R,L]=(0,p.useState)(!1);return(0,h.jsxs)("div",{className:`${iB.docLayout} pt-0`,style:{...f?.showNavbar?{}:{marginTop:0}},children:[r,(0,h.jsx)(im,{isSidebarOpen:R,beforeSidebar:g,afterSidebar:m,uiSwitch:f,navTitle:v}),(0,h.jsxs)("div",{className:"flex-1 relative min-w-0",children:[(0,h.jsx)(i_,{isSidebarOpen:R,onIsSidebarOpenChange:L,outlineTitle:B,uiSwitch:f}),(0,h.jsxs)("div",{className:`${iB.content} rspress-doc-container flex`,children:[(0,h.jsx)("div",{className:"flex-1 overflow-x-auto",children:D?(0,h.jsxs)(h.Fragment,{children:[n,(0,h.jsx)(ss,{content:P}),a]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"rspress-doc",children:[n,I,P,a]}),(0,h.jsxs)("div",{className:"rspress-doc-footer",children:[e,f?.showDocFooter&&(0,h.jsx)(e8,{}),i]})]})}),E&&(0,h.jsx)(d.ri,{children:(0,h.jsx)(sg,{})}),f?.showAside&&(0,h.jsx)("div",{className:iB.asideContainer,style:{...f?.showNavbar?{}:{marginTop:0,paddingTop:"32px"}},children:(0,h.jsxs)("div",{children:[o,(0,h.jsx)(e1,{headers:A,outlineTitle:B}),l]})})]})]}),s]})}function iO(t){let{beforeHero:e,afterHero:i,beforeFeatures:r,afterFeatures:s}=t,{page:{frontmatter:n,routePath:a}}=(0,d.Vi)();return(0,h.jsxs)("div",{className:"relative",style:{minHeight:"calc(100vh - var(--rp-nav-height))",paddingBottom:"80px"},children:[(0,h.jsxs)("div",{className:"pb-12",children:[e,(0,h.jsx)(rB,{frontmatter:n,routePath:a}),i,r,(0,h.jsx)(rT,{frontmatter:n,routePath:a}),s]}),(0,h.jsx)(rE,{})]})}function iP(){let{siteData:t,page:e}=(0,d.Vi)(),i=t.lang||"",r=Object.values(t.themeConfig.locales||{}).map(t=>t.lang)||[],s=e.lang;(0,p.useEffect)(()=>{let e;if("auto"!==(t.themeConfig.localeRedirect??"auto")||!i||/bot|spider|crawl|lighthouse/i.test(window.navigator.userAgent))return;let{pathname:n,search:a}=window.location,o=(0,d.E9)(n),l="rspress-visited";if(localStorage.getItem(l))return;localStorage.setItem(l,"1");let h=window.navigator.language.split("-")[0];r.includes(h)&&h!==s&&(e=h===i?n.replace(`/${s}`,""):s===i?(0,d.pJ)(`/${h}${o}`):n.replace(`/${s}`,`/${h}`))&&window.location.replace(e+a)},[])}let iI=(t,e)=>e?(t=t.trim(),(e=e.trim()).startsWith("-")||e.startsWith("|"))?`${t} ${e}`:`${t} - ${e}`:t,iR=t=>{let{top:e,bottom:i,beforeDocFooter:r,afterDocFooter:s,beforeDoc:n,afterDoc:a,beforeDocContent:o,afterDocContent:l,beforeSidebar:u,afterSidebar:c,beforeOutline:g,afterOutline:m,beforeNavTitle:f,afterNavTitle:v,navTitle:y,beforeNav:_,beforeHero:b,afterHero:x,beforeFeatures:S,afterFeatures:A,afterNavMenu:k,components:w}=t,C={beforeDocFooter:r,afterDocFooter:s,beforeDocContent:o,afterDocContent:l,beforeDoc:n,afterDoc:a,beforeSidebar:u,afterSidebar:c,beforeOutline:g,afterOutline:m,components:w},T={beforeHero:b,afterHero:x,beforeFeatures:S,afterFeatures:A},{siteData:E,page:M}=(0,d.Vi)(),{pageType:B,lang:D,title:O,frontmatter:P={}}=M,I=e5();iP();let R=P.title??O,L=E.title||I.title||"";R=R&&"doc"===B?iI(R,P.titleSuffix||L):"home"===B?iI(L,P.titleSuffix):"404"===B?iI("404",L):L;let F=P?.description||E.description||I.description,j={...function(){let{page:t,siteData:e}=(0,d.Vi)(),{frontmatter:i}=t,{themeConfig:r}=e,s=e5(),n=(0,d.TH)(),a=i?.overview??!1,o=()=>{let t="undefined"==typeof window||window.top===window.self;return(i?.outline??r?.outline??t)&&!a},[l,h]=eX(),[u,c]=(0,p.useState)(o()),[g,m]=(0,p.useState)(i?.footer??!0),f=s.sidebar||{},v=i?.sidebar!==!1&&Object.keys(f).length>0;return(0,p.useEffect)(()=>{c(o())},[t,e]),(0,p.useEffect)(()=>{let t=new URLSearchParams(n.search),e=document.documentElement.style,i=e.getPropertyValue("--rp-sidebar-width"),r=e.getPropertyValue("--rp-aside-width"),s=t.get("navbar"),a=t.get("sidebar"),o=t.get("outline"),u=t.get("footer");return"0"===s&&h(!1),"0"===a&&document.documentElement.style.setProperty("--rp-sidebar-width","0px"),"0"===o&&document.documentElement.style.setProperty("--rp-aside-width","0px"),"0"===u&&m(!1),()=>{document.documentElement.style.setProperty("--rp-sidebar-width",i),document.documentElement.style.setProperty("--rp-aside-width",r),h(l),m(g)}},[n.search]),(0,p.useEffect)(()=>{(0,V._f)()&&history.scrollRestoration&&(history.scrollRestoration=n.hash.length?"manual":"auto")},[!n.hash.length]),{showAside:u,showNavbar:l,showSidebar:v,showDocFooter:g}}(),...t.uiSwitch};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(G.ql,{htmlAttributes:{lang:D||"en"},children:[R?(0,h.jsx)("title",{children:R}):null,F?(0,h.jsx)("meta",{name:"description",content:F}):null]}),e,"blank"!==B&&j.showNavbar&&(0,h.jsx)(r7,{beforeNavTitle:f,afterNavTitle:v,navTitle:y,beforeNav:_,afterNavMenu:k}),(0,h.jsx)("section",{children:(()=>{switch(B){case"home":return(0,h.jsx)(sO.HomeLayout,{...T});case"doc":return(0,h.jsx)(iD,{...C,uiSwitch:j,navTitle:y});case"404":return(0,h.jsx)(sO.NotFoundLayout,{});case"custom":case"blank":return(0,h.jsx)(d.VY,{});default:return(0,h.jsx)(iD,{...C})}})()}),i]})};function iL(){let{siteData:t,page:e}=(0,d.Vi)(),i=t.lang,r=t.multiVersion.default;if(i&&"undefined"!=typeof window&&location.pathname.includes(`/${i}/`)){let t=location.pathname.replace(`/${i}/`,"/");return window.location.replace(t),(0,h.jsx)(h.Fragment,{})}let s="/";return r&&e.version!==r&&(s+=`${e.version}/`),i&&e.lang!==i&&(s+=`${e.lang}/`),(0,h.jsxs)("div",{className:"m-auto mt-50 p-16 sm:p-8 sm:pt-24 sm:pb-40 text-center flex-center flex-col",children:[(0,h.jsx)("p",{className:"text-6xl font-semibold",children:"404"}),(0,h.jsx)("h1",{className:"leading-5 pt-3 text-xl font-bold",children:"PAGE NOT FOUND"}),(0,h.jsx)("div",{style:{height:"1px"},className:"mt-6 mx-auto mb-4.5 w-16 bg-gray-light-1"}),(0,h.jsx)("div",{className:"pt-5",children:(0,h.jsx)("a",{className:"py-2 px-4 rounded-2xl inline-block border-solid border-brand text-brand font-medium hover:border-brand-dark hover:text-brand-dark transition-colors duration-300",href:(0,d.pJ)(s),"aria-label":"go to home",children:"Take me home"})})]})}let iF={"code-button-group":"code-button-group_fb445",codeButtonGroup:"code-button-group_fb445","code-copy-button":"code-copy-button_c5089",codeCopyButton:"code-copy-button_c5089","icon-success":"icon-success_d5ec0",iconSuccess:"icon-success_d5ec0","code-copied":"code-copied_e2224",codeCopied:"code-copied_e2224","icon-copy":"icon-copy_ef942",iconCopy:"icon-copy_ef942","icon-wrapped":"icon-wrapped_fb89b",iconWrapped:"icon-wrapped_fb89b","wrapped-btn":"wrapped-btn_a2562",wrappedBtn:"wrapped-btn_a2562","icon-wrap":"icon-wrap_ccd3d",iconWrap:"icon-wrap_ccd3d"},ij=new Map;function iZ({codeBlockRef:t}){let e=(0,p.useRef)(null);return(0,h.jsxs)("button",{className:iF.codeCopyButton,onClick:()=>(function(t,e){let i="";if(!t)return;let r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),s=r.nextNode();for(;s;)s.parentElement.classList.contains("linenumber")||(i+=s.nodeValue),s=r.nextNode();if(q(i)&&e){e.classList.add(iF.codeCopied),clearTimeout(ij.get(e));let t=setTimeout(()=>{e.classList.remove(iF.codeCopied),e.blur(),ij.delete(e)},2e3);ij.set(e,t)}})(t.current,e.current),ref:e,title:"Copy code",children:[(0,h.jsx)(ie,{icon:Y,className:iF.iconCopy}),(0,h.jsx)(ie,{icon:K,className:iF.iconSuccess})]})}let iH={doctype:{color:"var(--code-token-text)",fontStyle:"italic"},token:{color:"var(--code-token-text)"},comment:{color:"var(--code-token-comment)"},punctuation:{color:"var(--code-token-punctuation)"},property:{color:"var(--code-token-parameter)"},constant:{color:"var(--code-token-constant)"},string:{color:"var(--code-token-string)"},symbol:{color:"var(--code-token-symbol)"},variable:{color:"var(--code-token-variable)"},"attr-name":{color:"var(--code-token-symbol)"},"attr-value":{color:"var(--code-token-string-expression)"},builtin:{color:"var(--code-token-symbol)"},function:{color:"var(--code-token-function)"},keyword:{color:"var(--code-token-keyword)"},tag:{color:"var(--code-token-function)"},inserted:{color:"var(--code-token-inserted)"},deleted:{color:"var(--code-token-deleted)"},regex:{color:"var(--code-token-keyword)"},key:{color:"var(--code-token-variable)"},title:{color:"var(--code-token-keyword)"},important:{color:"#EBCB8B",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},table:{display:"content"}},iN=!1;function iz(t){let{siteData:e}=(0,d.Vi)(),{meta:i,language:r,codeWrap:s}=t,{showLineNumbers:n}=e.markdown,a="",o=[];return i&&(a=/{[\d,-]*}/i.exec(i)?.[0]||"")&&(o=a.replace(/[{}]/g,"").split(",").map(t=>{let[e,i]=t.split("-");return i?Array.from({length:Number(i)-Number(e)+1},(t,i)=>i+Number(e)):Number(e)}).flat()),iN||(Object.keys(tb).forEach(t=>{ty.registerLanguage(t,tb[t])}),ty.alias(t_),iN=!0),(0,h.jsx)(ty,{language:r,style:iH,wrapLines:!0,className:"code",wrapLongLines:s,customStyle:{backgroundColor:"inherit"},showLineNumbers:n||o.length>0,lineProps:t=>({style:{...o.includes(t)?{backgroundColor:"var(--rp-code-line-highlight-color)"}:{},display:"block",padding:"0 1.25rem"}}),children:String(t.children).trim()})}function iV(t){let{siteData:e}=(0,d.Vi)(),i=t.codeHighlighter??e.markdown.codeHighlighter,{defaultWrapCode:r}=e.markdown,[s,n]=(0,p.useState)(r),a=(0,p.useRef)(null),o=(0,p.useRef)(null),{className:l}=t,u=l?.replace(/language-/,"");if(!u)return(0,h.jsx)("code",{...t});let c=t=>{s?t?.classList.remove(iF.wrappedBtn):t?.classList.add(iF.wrappedBtn),n(!s)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{ref:o,children:"prism"===i?(0,h.jsx)(iz,{...t,language:u,codeWrap:s}):(0,h.jsx)("pre",{...t,style:{overflowX:"auto"},children:(0,h.jsx)("code",{style:{whiteSpace:s?"pre-wrap":"pre"},children:t.children})})}),(0,h.jsxs)("div",{className:iF.codeButtonGroup,children:[(0,h.jsxs)("button",{ref:a,className:iF.codeWrapButton,onClick:()=>c(a.current),title:"Toggle code wrap",children:[(0,h.jsx)(ie,{icon:X,className:iF.iconWrapped}),(0,h.jsx)(ie,{icon:$,className:iF.iconWrap})]}),(0,h.jsx)(iZ,{codeBlockRef:o})]})]})}let iU=t=>(0,h.jsx)("hr",{...t,className:"my-12 border-t border-solid border-divider-light"}),iW=t=>(0,h.jsx)("img",{...t,src:(0,d.i6)(t.src||"")}),iG=t=>(0,h.jsx)("ol",{...t,className:"list-decimal pl-5 my-4 leading-7"}),i$=t=>(0,h.jsx)("ul",{...t,className:"list-disc pl-5 my-4 leading-7"}),iX=t=>(0,h.jsx)("li",{...t,className:"[&:not(:first-child)]:mt-2"}),iY=t=>(0,h.jsx)("p",{...t,className:"my-4 leading-7"}),iK=t=>(0,h.jsx)("blockquote",{...t,className:`border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 ${iS.blockquote}`}),iq=t=>(0,h.jsx)("strong",{...t,className:"font-semibold"});function iJ({children:t}){let e=t=>{let{className:e,meta:i}=t.props,r=function(t){if(!t)return"";let e=t,i=/{[\d,-]*}/i;return i.exec(t)?.[0]&&(e=t.replace(i,"").trim()),e=e.split("=")[1]??"",e?.replace(/["'`]/g,"")}(i);return(0,h.jsxs)("div",{className:e||"language-bash",children:[r&&(0,h.jsx)("div",{className:"rspress-code-title",children:r}),(0,h.jsx)("div",{className:"rspress-code-content rspress-scrollbar",children:t})]})};return Array.isArray(t)?(0,h.jsx)("div",{children:t.map(t=>e(t))}):e(t)}let iQ=t=>(0,h.jsx)("table",{...t,className:"block border-collapse text-base my-5 overflow-x-auto leading-7 border-gray-light-3 dark:border-divider"}),i0=t=>(0,h.jsx)("tr",{...t,className:"border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"}),i1=t=>(0,h.jsx)("td",{...t,className:"border border-solid px-4 py-2 border-gray-light-3 dark:border-divider"}),i2=t=>(0,h.jsx)("th",{...t,className:"border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-3 dark:border-divider"});function i3(){return{h1:ik,h2:iw,h3:iC,h4:iT,h5:iE,h6:iM,ul:i$,ol:iG,li:iX,table:iQ,td:i1,th:i2,tr:i0,hr:iU,p:iY,blockquote:iK,strong:iq,a:iA,code:iV,pre:iJ,img:iW}}function i5(){let{siteData:t,page:e}=(0,d.Vi)(),i=e5().editLink??t.themeConfig?.editLink??{};if(!i.docRepoBaseUrl||!i.text)return null;let{docRepoBaseUrl:r}=i;r.endsWith("/")||(r+="/");let s=e._relativePath.replace(/\\/g,"/"),n=`${r}${s}`;return{text:i.text,link:n}}let i4="default",i6=/[\u3131-\u314e|\u314f-\u3163|\uac00-\ud7a3]/u,i8=/[\u0400-\u04FF]/u;function i7(t){let e=t.toString().toLowerCase().normalize("NFD");if(i8.test(String(t)))return e.normalize("NFC");let i=e.replace(/[\u0300-\u036f]/g,"");return i6.test(String(t))?i.normalize("NFC"):i}function i9(t){return t.replace(/https?:\/\/[^/]+/,"")}function rt(t){return t.charCodeAt(0)>255?3:1}let re=t=>t.map(t=>"string"==typeof t?{value:t,label:t}:t);function ri(t,e){let i=0,r=0;for(let s=0;s<t.length&&!(r>=e);s++)r+=rt(t.charAt(s)),i++;return i}function rr(t){let e=0;for(let i=0;i<t.length;i++)e+=rt(t.charAt(i));return e}let rs=/[\u3131-\u314e|\u314f-\u3163|\uac00-\ud7a3]|[\u4E00-\u9FCC\u3400-\u4DB5\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|[\ud86a-\ud86c][\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|[\u3041-\u3096]|[\u30A1-\u30FA]/giu,rn=/[\u0400-\u04FF]/g;function ra(t,e){let i=[],r=null;do(r=e.exec(t))&&i.push(r[0]);while(r);return i}class ro{#t;#e;#i;#r;async #s(t,e){let r=`${e??""}###${t??""}`;if(!en[r])return[];let s=e?`.${e.replace(".","_")}`:"",n=t?`.${t}`:"",a=`${(0,V.Qj)(i.p)}/static/${V.t6}${s}${n}.${en[r]}.json`,o=t=>{console.error("Failed to fetch search index, please reload the page and try again."),console.error(t)};try{let t=await fetch(a);if(t.ok)return t.json();o(t)}catch(t){o(t)}return[]}async fetchSearchIndex(t){if(this.#r)return this.#r;let{currentLang:e,currentVersion:i}=t,r="remote"!==t.mode&&t.versioned;return this.#r=this.#s(e,r?i:""),this.#r}async init(t){let e=(await this.fetchSearchIndex(t)).map(t=>({...t,normalizedContent:i7(t.content),headers:t.toc.map(t=>i7(t.text)).join(" "),normalizedTitle:i7(t.title)})),i={tokenize:"full",document:{id:"id",store:!0,index:["normalizedTitle","headers","normalizedContent"]},cache:100};for(let t of(this.#t=new t2(i),this.#e=new t2({...i,tokenize:t=>ra(t,rs)}),this.#i=new t2({...i,tokenize:t=>ra(t,rn)}),e))this.#t.addAsync(t.id,t),this.#e.addAsync(t.id,t),this.#i.addAsync(t.id,t)}async search(t){let{keyword:e,limit:i}=t,r={enrich:!0,limit:i,index:["normalizedTitle","headers","normalizedContent"]},s=await Promise.all([this.#t?.searchAsync(e,r),this.#e?.searchAsync(e,r),this.#i?.searchAsync(e,r)]),n=[],a=new Set;return s.forEach(t=>{t&&function(t){for(let e of t)e.result.forEach(t=>{let e=t.id;a.has(e)||(a.add(e),n.push(t.doc))})}(t)}),[{index:i4,hits:n}]}}class rl{#n;async init(t){this.#n=t}async fetchSearchIndex(t){return[]}async search(t){let{apiUrl:e,searchIndexes:i}=this.#n,{keyword:r,limit:s}=t,n=Object.entries({keyword:r,limit:s.toString(),searchIndexes:i?.map(t=>"string"==typeof t?t:t.value).join(",")||"",lang:this.#n?.currentLang??""}).map(t=>t.map(encodeURIComponent).join("=")).join("&");try{return(await fetch(`${e}?${n}`)).json()}catch(t){return console.error(t),[]}}}var rh=((a={}).Default="default",a.Custom="custom",a);class ru{#n;#a=i4;#o;constructor(t){(this.#n=t,this.#a=t.indexName??i4,"remote"===t.mode)?this.#o=new rl:this.#o=new ro}async init(){await this.#o?.init(this.#n)}async fetchSearchIndex(){return this.#o?.fetchSearchIndex(this.#n)}async match(t,e=7){let i=await this.#o?.search({keyword:t,limit:e}),r=i7(t),s=i?.find(t=>this.#l(t.index))||{index:i4,renderType:rh.Default,hits:[]};return[{group:this.#a,renderType:rh.Default,result:this.#h(r,s)},...(i?.filter(t=>!this.#l(t.index))||[]).map(t=>({group:t.index,renderType:rh.Default,result:this.#h(r,t)}))]}#h(t,e){let i=[];return e?.hits.forEach(e=>{this.#u(e,t,i);let r=this.#d(e,t,i);this.#c(e,t,i,r)}),i}#u(t,e,i){let{title:r=""}=t,s=i7(r);return!!s.includes(e)&&(i.push({type:"title",title:r,header:r,link:`${t.domain}${(0,d.AP)(t.routePath)}`,query:e,highlightInfoList:[{start:s.indexOf(e),length:rr(e)}]}),!0)}#d(t,e,i){let r=new WeakSet,{toc:s=[],domain:n="",title:a=""}=t;for(let[o,l]of s.entries())if(i7(l.text).includes(e)){let h=(function(t,e){let i=t[e],r=e,s=[i];for(;i&&i.depth>2;){let e=!1;for(let n=r-1;n>=0;n--){let a=t[n];if(a.depth>1&&a.depth===i.depth-1){i=a,r=n,s.unshift(i),e=!0;break}}if(!e)break}return s})(s,o).map(t=>t.text).join(" > "),u=i7(h).indexOf(e),c=`${a} > `;i.push({type:"header",title:t.title,header:`${c}${h}`,highlightInfoList:[{start:u+c.length,length:rr(e)}],link:`${n}${(0,d.AP)(t.routePath)}#${l.id}`,query:e}),r.add(l)}return r}#c(t,e,i,r){let{content:s,toc:n,domain:a}=t;if(!s.length)return;let o=i7(s),l=o.indexOf(e),h=n.map(t=>t.charIndex),u=t=>n[h.findIndex((e,i)=>{if(!(i<n.length-1))return e<t;{let r=h[i+1];if(e<=t&&r>=t)return!0}return!1})],c=t=>t&&r?.has(t);if(-1===l){let r=t._matchesPosition?.content;if(!r?.length)return;let n=t._matchesPosition.content[0].start,o=u(n);if(c(o))return;let l=ri(s,n),h=ri(s,n+100),p=s.slice(l,h),g=t._matchesPosition.content.filter(t=>t.start>=n&&t.start+t.length<=n+100).map(t=>({start:ri(s,t.start)-l+3,length:t.length}));i.push({type:"content",title:t.title,header:o?.text??t.title,link:`${a}${(0,d.AP)(t.routePath)}${o?`#${o.id}`:""}`,query:e,highlightInfoList:g,statement:`...${p}...`});return}for(;-1!==l;){let n=u(l),h=s.slice(0,l).lastIndexOf("\n");h=-1===h?0:h;let p=s.indexOf("\n\n",l+e.length),g=s.slice(h,p);g.length>100&&(g=this.#p(g,e));let m=i7(g).indexOf(e),f=[{start:m,length:rr(e)}];!c(n)&&(i.push({type:"content",title:t.title,header:n?.text??t.title,statement:g,highlightInfoList:f,link:`${a}${(0,d.AP)(t.routePath)}${n?`#${n.id}`:""}`,query:e}),n&&r?.add(n)),l=o.indexOf(e,l+g.length-m)}}#p(t,e){let i=i7(t).indexOf(i7(e)),r=Math.floor((100-e.length)/2),s=t.slice(0,i);s.length>r&&(s=`...${t.slice(i-r+3,i)}`);let n=t.slice(i+e.length);return n.length>r&&(n=`${t.slice(i+e.length,i+r-3)}...`),s+e+n}#l(t){return t===this.#a||t===i4}}function rd(){let{siteData:t,page:e}=(0,d.Vi)(),[i,r]=(0,p.useState)(!1),s=(0,p.useRef)(null);return(0,p.useEffect)(()=>{(async function(){if(!i){let i=new ru({...t.search,mode:"local",currentLang:e.lang,currentVersion:e.version});s.current=i,await i.init(),r(!0)}})()},[]),{initialized:i,search:s.current?.match.bind(s.current)}}let rc=t=>{let e=(0,p.useRef)(t);return e.current=t,(0,p.useRef)((...t)=>e.current(...t)).current},rp=t=>{let[e,i]=(0,p.useState)(()=>"undefined"!=typeof window&&window.matchMedia(t).matches);return(0,p.useEffect)(()=>{let e=window.matchMedia(t),r=t=>i(t.matches);return e.addEventListener("change",r),()=>e.removeEventListener("change",r)},[t]),e},rg=(t,e)=>{let[i,r]=(0,p.useState)(()=>"undefined"==typeof window?e:localStorage.getItem(t)??e),s=(0,p.useCallback)(e=>{r(i=>{let r="function"==typeof e?e(i):e;return null==r?localStorage.removeItem(t):localStorage.setItem(t,r),r})},[t]);return(0,p.useEffect)(()=>{let i=i=>{i.key===t&&r(localStorage.getItem(t)??e)};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}},[t,e]),[i,s]},rm=t=>["light","dark","auto"].includes(t)?t:"auto",rf=!1===ea.default.themeConfig.darkMode,rv=()=>{let t=rp("(prefers-color-scheme: dark)"),[e,i]=rg(V.rp,"auto"),r=rc(()=>{if(rf)return"light";let i=rm(e);return"auto"===i?t?"dark":"light":i}),[s,n]=(0,p.useState)(()=>{if("undefined"==typeof window)return"light";let t=window.RSPRESS_THEME??window.MODERN_THEME;return t?"dark"===t?"dark":"light":r()}),a=(0,p.useCallback)((t,e=t)=>{rf||(n(t),i(e),l(!0))},[]);(0,p.useEffect)(()=>{document.documentElement.classList.toggle("dark","dark"===s),document.documentElement.style.colorScheme=s},[s]);let[o,l]=(0,p.useState)(!0);return(0,p.useEffect)(()=>{l(!1)},[o]),(0,p.useEffect)(()=>{o||a(r(),rm(e))},[e]),(0,p.useEffect)(()=>{o||a(t?"dark":"light","auto")},[t]),[s,a]},ry={badge:"badge_cbafb",tip:"tip_cce85",info:"info_e8cd3",warning:"warning_b5c28",danger:"danger_b0301",outline:"outline_faf5e"};function r_({children:t,type:e="tip",text:i,outline:r=!1}){return(0,h.jsx)("span",{className:`inline-flex items-center justify-center rounded-full border border-solid ${r?"border-current":"border-transparent"} font-semibold align-middle px-2.5 h-6 gap-1 text-xs ${ry.badge} ${ry[e]} ${r?ry.outline:""}`,children:t||i})}let rb={button:"button_e8e0d",medium:"medium_fe00b",big:"big_f7033",brand:"brand_dc619",alt:"alt_b0249"};function rx(t){let{theme:e="brand",size:i="big",href:r="/",external:s=!1,className:n=""}=t,a=null;return"button"===t.type?a="button":"a"===t.type&&(a=s?"a":rI),p.createElement(a??"a",{className:`${rb.button} ${rb[e]} ${rb[i]} ${n}`,href:r},t.text)}function rS({content:t,title:e,icon:i,style:r}){return(0,h.jsxs)("div",{className:"border border-gray-400 rounded-lg p-6",style:r,children:[(0,h.jsxs)("p",{className:"flex items-center gap-2 mb-4",children:[i&&(0,h.jsx)("div",{children:i}),e&&(0,h.jsx)("span",{className:"text-2xl font-bold",children:e})]}),(0,h.jsx)("div",{className:"text-base overflow-auto",children:t})]})}let rA={editLink:"editLink_e1cfa"};function rk(){let t=i5();if(!t)return null;let{text:e,link:i}=t;return(0,h.jsx)("a",{href:i,target:"_blank",className:rA.editLink,children:e})}let rw={"grid-2":"grid-2_bce10",grid2:"grid-2_bce10","grid-4":"grid-4_bd059",grid4:"grid-4_bd059","grid-6":"grid-6_ce438",grid6:"grid-6_ce438","grid-3":"grid-3_bf296",grid3:"grid-3_bf296",featureCard:"featureCard_a17b6"},rC=t=>{let{span:e}=t;return`grid-${e||4}`};function rT({frontmatter:t,routePath:e}){let i=t?.features;return(0,h.jsx)("div",{className:"overflow-hidden m-auto flex flex-wrap max-w-6xl",children:i?.map(t=>{let{icon:i,title:r,details:s,link:n}=t,a=n;return n&&(a=V.xf(n)?n:d.AP(V.pJ(n,e))),h.jsx("div",{className:`${rw[rC(t)]} rounded hover:var(--rp-c-brand)`,children:h.jsx("div",{className:"h-full p-2",children:h.jsxs("article",{className:`rspress-home-feature-card ${rw.featureCard} h-full p-8 rounded-4xl border-transparent`,style:{cursor:a?"pointer":"auto"},onClick:()=>{a&&(window.location.href=a)},children:[i?h.jsx("div",{className:"flex-center",children:h.jsx("div",{className:"rspress-home-feature-icon w-12 h-12 text-3xl text-center",children:eN(i)})}):null,h.jsx("h2",{className:"rspress-home-feature-title font-bold text-center",children:r}),h.jsx("p",{className:"rspress-home-feature-detail leading-6 pt-2 text-sm text-text-2 font-medium",children:eN(s)})]},r)})},r)})})}function rE(){let{siteData:t}=(0,d.Vi)(),{message:e}=t.themeConfig.footer||{};return e?(0,h.jsx)("footer",{className:"absolute bottom-0 mt-12 py-8 px-6 sm:p-8 w-full border-t border-solid border-divider-light",children:(0,h.jsx)("div",{className:"m-auto w-full text-center",children:(0,h.jsx)("div",{className:"font-medium text-sm text-text-2",dangerouslySetInnerHTML:{__html:e}})})}):null}let rM={name:"modern",text:"modern ssg",tagline:"modern ssg",actions:[],image:void 0};function rB({frontmatter:t,routePath:e}){let i=t?.hero||rM,r=void 0!==i.image,s=r?"sm:max-w-xl":"sm:max-w-4xl",n=i.text?i.text.toString().split(/\n/g).filter(t=>""!==t):[],a="string"==typeof i.image?.src?{light:i.image.src,dark:i.image.src}:i.image?.src||{light:"",dark:""};return(0,h.jsxs)("div",{className:"m-auto pt-0 px-6 pb-12 sm:pt-10 sm:px-16 md:pt-16 md:px-16 md:pb-16 relative",children:[(0,h.jsx)("div",{className:"mask_bbaa6",style:{left:r?"75%":"50%"}}),(0,h.jsxs)("div",{className:"m-auto flex flex-col md:flex-row max-w-6xl min-h-[50vh] mt-12 sm:mt-0",children:[(0,h.jsxs)("div",{className:"flex flex-col justify-center items-center text-center max-w-xl sm:max-w-4xl m-auto order-2 md:order-1",children:[(0,h.jsx)("h1",{className:"font-bold text-3xl pb-2 sm:text-6xl md:text-7xl m-auto sm:m-4 md:m-0 md:pb-3 lg:pb-2 leading-tight z-10",children:(0,h.jsx)("span",{className:"clip_aacad",style:{lineHeight:"1.3"},children:eN(i.name)})}),0!==n.length&&n.map(t=>(0,h.jsx)("p",{className:`rspress-home-hero-text mx-auto md:m-0 text-3xl sm:text-5xl md:text-6xl sm:pb-2 font-bold z-10 ${s}`,style:{lineHeight:"1.2"},children:eN(t)},t)),(0,h.jsx)("p",{className:`rspress-home-hero-tagline whitespace-pre-wrap pt-4 m-auto md:m-0 text-sm sm:tex-xl md:text-[1.5rem] text-text-2 font-medium z-10 ${s}`,children:eN(i.tagline)}),i.actions?.length&&(0,h.jsx)("div",{className:"grid md:flex md:flex-wrap md:justify-center gap-3 m--1.5 pt-6 sm:pt-8 z-10",children:i.actions.map(t=>{let i=(0,V.xf)(t.link)?t.link:(0,d.AP)((0,V.pJ)(t.link,e));return(0,h.jsx)("div",{className:"flex flex-shrink-0 p-1",children:(0,h.jsx)(rx,{type:"a",href:i,text:eN(t.text),theme:t.theme,className:"w-full"})},i)})})]}),r?(0,h.jsxs)("div",{className:"rspress-home-hero-image md:flex-center m-auto order-1 md:order-2 sm:flex md:none lg:flex",children:[(0,h.jsx)("img",{src:(0,d.i6)(a.light),alt:i.image?.alt,srcSet:rD(i.image?.srcset),sizes:rD(i.image?.sizes),width:375,height:375,className:"dark:hidden"}),(0,h.jsx)("img",{src:(0,d.i6)(a.dark),alt:i.image?.alt,srcSet:rD(i.image?.srcset),sizes:rD(i.image?.sizes),width:375,height:375,className:"hidden dark:block"})]}):null]})]})}function rD(t){return(Array.isArray(t)?t:[t]).filter(Boolean).join(", ")||void 0}function rO(){let{lastUpdatedText:t="Last Updated"}=e5(),{page:{lastUpdatedTime:e},siteData:i}=(0,d.Vi)(),{themeConfig:r}=i,s=r?.lastUpdatedText||t;return(0,h.jsx)("div",{className:"flex text-sm text-text-2 leading-6 sm:leading-8 font-medium",children:(0,h.jsxs)("p",{children:[s,": ",(0,h.jsx)("span",{children:e})]})})}let rP={link:"link_a7cea"};function rI(t){let{href:e="/",children:i,className:r="",onNavigate:s,keepCurrentParams:n=!1,...a}=t,o=(0,V.xf)(e),l=o?"_blank":"",u=o?"noopener noreferrer":void 0,c=o?e:(0,d.pJ)((0,d.AP)(e)),p=(0,d.s0)(),{pathname:g,search:m}=(0,d.TH)(),f=n?c+m:c,v=(0,d.pV)(g,c),y=async t=>{if(0!==t.button||t.currentTarget.target&&"_self"!==t.currentTarget.target||t.metaKey||t.shiftKey||t.altKey||t.ctrlKey)return;t.preventDefault();let e=c.split("#")[1];if(!o&&v&&e){let t=document.getElementById(e);t&&(eq(t,!0),p(f,{replace:!1}));return}if(!v){let t=(0,d.Ww)(c);if(t){let e=setTimeout(()=>{eo.start()},200);await t.preload(),clearTimeout(e),eo.done()}s?.(),p(f,{replace:!1})}};return o?(0,h.jsx)("a",{...a,href:c,target:l,rel:u,className:`${rP.link} ${r}`,children:i}):(0,h.jsx)("a",{...a,className:`${rP.link} ${r} cursor-pointer`,rel:u,target:l,onClick:t=>{a.onClick?.(t),y(t)},href:c,children:i})}eo.configure({showSpinner:!1});function rR(t){let{href:e,title:i,description:r,style:s}=t;return(0,h.jsxs)("div",{className:"relative border border-gray-400 rounded-lg p-6 flex justify-between items-start hover:border-gray-500 transition-all duration-300 linkCard_f82f1",style:s,children:[(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("a",{href:e,className:"flex items-center gap-2 mb-4 link_e1101",children:i&&(0,h.jsx)("span",{className:"text-2xl font-bold",children:i})}),(0,h.jsx)("span",{className:"text-base overflow-auto",children:r})]}),(0,h.jsx)(U,{})]})}function rL(){let{nav:t}=e5(),e=(0,d.aw)();return Array.isArray(t)?t:[...t[e.length>0?e:"default"]]}function rF(t){let{pathname:e,base:i}=t,r=new RegExp(t.activeMatch||t.link).test((0,V.tz)(e,i));return(0,h.jsx)(rI,{href:(0,d.AP)(t.link),onClick:t.onClick,children:(0,h.jsxs)("div",{className:`rspress-nav-menu-item ${e7.singleItem} ${r?e7.activeItem:""} text-sm font-medium ${t.compact?"mx-0.5":"mx-1.5"} px-3 py-2 flex items-center`,children:[(0,h.jsx)(sM,{tag:t.tag}),t.text,t.rightIcon]},t.text)})}function rj(){let{siteData:t,page:e}=(0,d.Vi)(),i=(0,d.aw)(),{pathname:r,search:s}=(0,d.TH)(),n=t.lang||"",a=t.multiVersion.default||"",o=Object.values(t.locales||t.themeConfig.locales||{}),l=t.route?.cleanUrls||!1,u=o.length>1,{lang:c,pageType:p}=e,{base:g}=t;return u?{text:(0,h.jsx)(ie,{icon:eC,style:{width:"18px",height:"18px"}}),items:o.map(t=>({text:t?.label,link:(0,V.$U)(r+s,{current:c,target:t.lang,default:n},{current:i,default:a},g,l,"404"===p)})),activeValue:o.find(t=>c===t.lang)?.label}:{items:[]}}function rZ(){let{siteData:t,page:e}=(0,d.Vi)(),i=(0,d.aw)(),{pathname:r}=(0,d.TH)(),s=t.route?.cleanUrls||!1,n=t.multiVersion.default||"",a=t.multiVersion.versions||[],{base:o}=t;return{items:a.map(t=>({text:t,link:(0,V.xM)(r,{current:i,target:t,default:n},o,s,"404"===e.pageType)})),text:i,activeValue:i}}let rH={socialLinksIcon:"social-links-icon_a4ad0",menuItem:"menu-item_e90a6"},rN=t=>{let{link:e,popperStyle:i={}}=t,{icon:r,mode:s="link",content:n}=e,a=(0,h.jsx)(h.Fragment,{});if(r){let t="string"==typeof r?({github:'<svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>'})[r]:r.svg;a=(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}let[o,l]=(0,p.useState)(!1),u=()=>{l(!0)},d=()=>{l(!1)};return"link"===s?(0,h.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"social-links",children:(0,h.jsx)("div",{className:`${rH.socialLinksIcon}`,children:a})},n):"text"===s?(0,h.jsxs)("div",{className:`${rH.socialLinksIcon} cursor-pointer relative mx-3`,onMouseEnter:u,onMouseLeave:d,children:[a,o?(0,h.jsx)("div",{style:{boxShadow:"var(--rp-shadow-3)",border:"1px solid var(--rp-c-divider-light)",...i},className:"z-[1] p-3 w-50 absolute right-0 bg-white dark:bg-dark",children:(0,h.jsx)("div",{className:"text-md",children:n})}):null]}):"img"===s?(0,h.jsxs)("div",{className:`${rH.socialLinksIcon} cursor-pointer relative`,onMouseEnter:u,onMouseLeave:d,children:[a,o?(0,h.jsx)("div",{className:"break-all z-[1] p-3 w-[50px] h-[50px] absolute right-0 bg-white dark:bg-dark rounded-xl",style:{boxShadow:"var(--rp-shadow-3)",...i},children:(0,h.jsx)("img",{src:n,alt:"img"})}):null]}):"dom"===s?(0,h.jsxs)("div",{className:`${rH.socialLinksIcon} cursor-pointer relative`,onMouseEnter:u,onMouseLeave:d,children:[a,o?(0,h.jsx)("div",{className:"break-all z-[1] p-3 absolute right-0 bg-white dark:bg-dark rounded-xl",style:{boxShadow:"var(--rp-shadow-3)",...i},children:(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})}):null]}):(0,h.jsx)("div",{})},rz=t=>{let{links:e}=t;return(0,h.jsx)("div",{style:{boxShadow:"var(--rp-shadow-3)",marginRight:"-2px",border:"1px solid var(--rp-c-divider-light)",background:"var(--rp-c-bg)"},className:"absolute top-8 right-0 z-1 p-3 w-32 rounded-2xl flex flex-wrap gap-4",children:e.map(t=>(0,h.jsx)(rN,{link:t,popperStyle:{top:"1.25rem"}},t.content))})},rV=t=>{let{links:e,moreIconVisible:i=!1,mouseEnter:r}=t;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2",children:e.map((t,e)=>(0,h.jsx)(rN,{link:t,popperStyle:{top:"2.5rem"}},e))}),i?(0,h.jsx)("div",{className:"md:ml-1 p-2",onMouseEnter:r,children:(0,h.jsx)(ie,{icon:eT})}):null]})},rU=({socialLinks:t})=>{let e=t.length>5,i=t.slice(0,5),r=t.slice(5),[s,n]=(0,p.useState)(!1),a=(0,p.useCallback)(()=>{n(!1)},[n]),o=(0,p.useCallback)(()=>{n(!0)},[n]);return(0,h.jsxs)("div",{className:`social-links ${rH.menuItem} flex-center relative`,onMouseLeave:a,children:[(0,h.jsx)(rV,{links:i,moreIconVisible:e,mouseEnter:o}),s?(0,h.jsx)(rz,{links:r}):null]})},rW=()=>"function"==typeof document?.startViewTransition&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches,rG=()=>{let t=document.createElement("style");return t.innerHTML=`
      .rspress-doc {
        view-transition-name: none !important;
      }
  `,document.head.appendChild(t),()=>{document.head.removeChild(t)}};function r$({onClick:t}){let{theme:e,setTheme:i=()=>{}}=(0,p.useContext)(d.Ni);return(0,h.jsx)("div",{onClick:r=>{let s=rW(),n=ea.default?.themeConfig?.enableAppearanceAnimation,a="dark"===e?"light":"dark",o="dark"===a;if(s&&n){let e=r.clientX,s=r.clientY,n=Math.hypot(Math.max(e,innerWidth-e+200),Math.max(s,innerHeight-s+200)),l=rG(),h=document.startViewTransition(async()=>{(0,eB.flushSync)(()=>{i(a),t?.()})}),u=[`circle(0px at ${e}px ${s}px)`,`circle(${n}px at ${e}px ${s}px)`];h.ready.then(()=>{document.documentElement.animate({clipPath:o?[...u].reverse():u},{duration:400,easing:"ease-in",pseudoElement:o?"::view-transition-old(root)":"::view-transition-new(root)",id:""}).finished.then(()=>{l()})})}else i(a),t?.()},className:"md:mr-2 rspress-nav-appearance",children:(0,h.jsxs)("div",{className:"p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7",children:[(0,h.jsx)(ie,{className:"dark:hidden",icon:eM,width:"18",height:"18",fill:"currentColor"}),(0,h.jsx)(ie,{className:"hidden dark:block",icon:eE,width:"18",height:"18",fill:"currentColor"})]})})}let rX={navScreen:"navScreen_ec30c",active:"active_d804e",container:"container_c935d",navMenu:"navMenu_b887b",navMenuItem:"navMenuItem_e7978",navAppearance:"navAppearance_bf893",socialAndAppearance:"socialAndAppearance_eda28",navScreenMenuGroup:"navScreenMenuGroup_e771d",open:"open_aaab4",button:"button_ea41e",buttonSpan:"buttonSpan_f4b8f",items:"items_dd149",down:"down_f631a"};function rY(t){let{activeValue:e}=t,[i,r]=(0,p.useState)(!1);function s({item:t}){return(0,h.jsx)("div",{className:"p-1 text-center",children:(0,h.jsx)("span",{className:"text-brand",children:t.text})})}function n({item:t}){return(0,h.jsx)("div",{className:"py-1 font-medium",children:(0,h.jsx)(rI,{href:t.link,children:(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"flex justify-center",children:(0,h.jsx)("span",{children:t.text})})})})})}let a=t=>e===t.text?(0,h.jsx)(s,{item:t},t.link):(0,h.jsx)(n,{item:t},t.link),o=t=>(0,h.jsxs)("div",{children:["link"in t?a(t):(0,h.jsx)("p",{className:"font-bold text-gray-400 my-1 not:first:border",children:t.text}),t.items.map(a)]});return(0,h.jsxs)("div",{className:`${i?rX.open:""} ${rX.navScreenMenuGroup} relative`,children:[(0,h.jsxs)("button",{className:rX.button,onClick:()=>{r(!i)},children:[(0,h.jsx)("span",{className:rX.buttonSpan,children:t.text}),(0,h.jsx)(eD,{className:`${i?rX.open:""} ${rX.down} `})]}),(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:rX.items,children:t.items.map(t=>(0,h.jsx)("div",{children:"items"in t?o(t):a(t)},t.text))})})]})}let rK=()=>{let t=rj();return(0,h.jsx)("div",{className:"flex text-sm font-bold justify-center",children:(0,h.jsx)("div",{className:"mx-1.5 my-1",children:(0,h.jsx)(rY,{...t})})})},rq=()=>{let t=rZ();return(0,h.jsx)("div",{className:`${rX.navTranslations} flex text-sm font-bold justify-center`,children:(0,h.jsx)("div",{className:"mx-1.5 my-1",children:(0,h.jsx)(rY,{...t})})})},rJ=()=>(0,h.jsx)("div",{className:`mt-2 ${rX.navAppearance} flex justify-center`,children:(0,h.jsx)(d.ri,{children:(0,h.jsx)(r$,{})})}),rQ=({menuItems:t,pathname:e,base:i,langs:r,toggleScreen:s})=>(0,h.jsx)("div",{className:rX.navMenu,children:t.map(t=>(0,h.jsx)("div",{className:`${rX.navMenuItem} w-full`,children:"link"in t?(0,h.jsx)(rF,{pathname:e,base:i,langs:r,onClick:s,...t},t.text):(0,h.jsx)("div",{className:"mx-3 last:mr-0",children:(0,h.jsx)(rY,{...t,items:"items"in t?t.items:t})},t.text)},t.text))});function r0(t){let{isScreenOpen:e,toggleScreen:i,siteData:r,pathname:s}=t,n=(0,p.useRef)(null),a=r.themeConfig.locales||[],o=a.length>1,l=r.multiVersion.versions.length>1,u=rL(),d=!1!==r.themeConfig.darkMode,c=r?.themeConfig?.socialLinks||[],g=c.length>0,m=a.map(t=>t.lang||"zh")||[],{base:f}=r;return(0,p.useEffect)(()=>(n.current&&e&&ek(n.current,{reserveScrollBarGap:!0}),()=>{ew()}),[e]),(0,h.jsx)("div",{className:`${rX.navScreen} ${e?rX.active:""} rspress-nav-screen`,ref:n,id:"navScreen",children:(0,h.jsxs)("div",{className:rX.container,children:[(0,h.jsx)(rQ,{menuItems:u,base:f,langs:m,pathname:s,toggleScreen:i}),(0,h.jsxs)("div",{className:"flex-center flex-col gap-2",children:[d&&(0,h.jsx)(rJ,{}),o&&(0,h.jsx)(rK,{}),l&&(0,h.jsx)(rq,{}),g&&(0,h.jsx)(rU,{socialLinks:c})]})]})})}let r1={navHamburger:"navHamburger_ac64c",active:"active_bc9a1"};function r2(t){let{siteData:e,pathname:i}=t,{isScreenOpen:r,toggleScreen:s}=function(){let{pathname:t}=(0,d.TH)(),[e,i]=(0,p.useState)(!1);function r(){i(!0),window.addEventListener("resize",n)}function s(){i(!1),window.removeEventListener("resize",n)}function n(){window.outerWidth>=768&&s()}return(0,p.useEffect)(()=>{s()},[t]),{isScreenOpen:e,openScreen:r,closeScreen:s,toggleScreen:function(){e?s():r()}}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r0,{isScreenOpen:r,toggleScreen:s,siteData:e,pathname:i}),(0,h.jsx)("button",{onClick:s,"aria-label":"mobile hamburger",className:`${r?r1.active:""} rspress-mobile-hamburger ${r1.navHamburger} text-gray-500`,children:(0,h.jsx)(ie,{icon:el,fill:"currentColor"})})]})}function r3({item:t}){return(0,h.jsxs)("div",{className:"rounded-2xl my-1 flex",style:{padding:"0.4rem 1.5rem 0.4rem 0.75rem"},children:[t.tag&&(0,h.jsx)(sM,{tag:t.tag}),(0,h.jsx)("span",{className:"text-brand",children:t.text})]},t.link)}function r5({item:t}){return(0,h.jsx)("div",{className:"font-medium my-1",children:(0,h.jsx)(rI,{href:t.link,children:(0,h.jsx)("div",{className:"rounded-2xl hover:bg-mute",style:{padding:"0.4rem 1.5rem 0.4rem 0.75rem"},children:(0,h.jsxs)("div",{className:"flex",children:[t.tag&&(0,h.jsx)(sM,{tag:t.tag}),(0,h.jsx)("span",{children:t.text})]})})})},t.link)}function r4(t){let{activeValue:e,items:i,base:r="",link:s="",pathname:n=""}=t,[a,o]=(0,p.useState)(!1),l=(0,p.useRef)(),u=()=>{l.current&&(clearTimeout(l.current),l.current=void 0)},d=t=>{let i=new RegExp(t.activeMatch||t.link).test((0,V.tz)(n,r));return e===t.text||!e&&i?(0,h.jsx)(r3,{item:t},t.link):(0,h.jsx)(r5,{item:t},t.link)},c=t=>(0,h.jsxs)("div",{children:["link"in t?d(t):(0,h.jsx)("p",{className:"font-bold text-gray-400 my-1 not:first:border",children:t.text}),t.items.map(d)]});return(0,h.jsxs)("div",{className:"relative flex-center h-14",onMouseLeave:()=>{l.current=window.setTimeout(()=>{o(!1)},150)},children:[(0,h.jsx)("button",{onMouseEnter:()=>{u(),o(!0)},className:"rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200",children:s?(0,h.jsx)(rF,{...t,rightIcon:(0,h.jsx)(ie,{icon:eD})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{className:"text-sm font-medium flex",style:{marginRight:"2px"},children:[(0,h.jsx)(sM,{tag:t.tag}),t.text]}),(0,h.jsx)(ie,{icon:eD})]})}),(0,h.jsx)("div",{className:"rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300",style:{opacity:a?1:0,visibility:a?"visible":"hidden",right:0,top:"52px"},onMouseEnter:u,children:(0,h.jsx)("div",{className:"p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap",style:{boxShadow:"var(--rp-shadow-3)",zIndex:100,border:"1px solid var(--rp-c-divider-light)",borderRadius:"var(--rp-radius-large)",background:"var(--rp-c-bg)"},children:i.map(t=>(0,h.jsx)("div",{children:"items"in t?c(t):d(t)},t.text))})})]})}function r6(){let t=rj();return(0,h.jsx)("div",{className:`translation ${e7.menuItem} flex text-sm font-bold items-center px-3 py-2`,children:(0,h.jsx)("div",{children:(0,h.jsx)(r4,{...t})})})}function r8(){let t=rZ();return(0,h.jsx)("div",{className:`translation ${e7.menuItem} flex text-sm font-bold items-center px-3 py-2`,children:(0,h.jsx)("div",{children:(0,h.jsx)(r4,{...t})})})}function r7(t){let{beforeNavTitle:e,afterNavTitle:i,beforeNav:r,afterNavMenu:s,navTitle:n}=t,{siteData:a,page:o}=(0,d.Vi)(),{base:l}=a,{pathname:u}=(0,d.TH)(),[c,g]=(0,p.useState)(!1),m=eY(),f=Object.values(a.locales||a.themeConfig.locales||{}),v=f.length>1,y=a.multiVersion.versions.length>1,_=a.themeConfig.socialLinks||[],b=_.length>0,x=f.map(t=>t.lang||"")||[],S=()=>{g(eH())};(0,p.useEffect)(()=>(window.addEventListener("resize",S),g(eH()),()=>{window.removeEventListener("resize",S)}),[]);let A=({menuItems:t})=>(0,h.jsx)("div",{className:"rspress-nav-menu menu h-14",children:t.map(e=>"items"in e||Array.isArray(e)?(0,h.jsx)("div",{className:"mx-3 last:mr-0",children:(0,h.jsx)(r4,{...e,base:l,pathname:u,langs:x,items:"items"in e?e.items:e})},e.text):(0,h.jsx)(rF,{pathname:u,langs:x,base:l,compact:t.length>5,...e},e.link))}),k=rL(),w=t=>t.position??"right",C=k.filter(t=>"left"===w(t)),T=k.filter(t=>"right"===w(t)),E=a?.themeConfig?.search!==!1,M=!1!==a.themeConfig.darkMode;return(0,h.jsxs)(h.Fragment,{children:[r,(0,h.jsx)("div",{className:`${e7.navContainer} rspress-nav px-6 ${m&&!c?e7.hidden:""} ${c&&("never"!==a.themeConfig.hideNavbar||"doc"===o.pageType)?"relative":"sticky"}`,children:(0,h.jsxs)("div",{className:`${e7.container} flex justify-between items-center h-full`,children:[e,n||(0,h.jsx)(e9,{}),i,(0,h.jsxs)("div",{className:"flex flex-1 justify-end items-center",children:[C.length>0?(0,h.jsx)("div",{className:e7.leftNav,children:(0,h.jsx)(A,{menuItems:C})}):null,(0,h.jsxs)("div",{className:e7.rightNav,children:[E&&(0,h.jsx)("div",{className:"flex sm:flex-1 items-center sm:pl-4 sm:pr-2",children:(0,h.jsx)(sC,{})}),(0,h.jsx)(A,{menuItems:T}),(0,h.jsxs)("div",{className:"flex-center flex-row",children:[v&&(0,h.jsx)(r6,{}),y&&(0,h.jsx)(r8,{}),M&&(0,h.jsx)("div",{className:"mx-2",children:(0,h.jsx)(r$,{})}),b&&(0,h.jsx)(rU,{socialLinks:_})]})]}),s,(0,h.jsxs)("div",{className:e7.mobileNavMenu,children:[c&&E&&(0,h.jsx)(sC,{}),(0,h.jsx)(r2,{siteData:a,pathname:u})]})]})]})})]})}let r9={"header-anchor":"header-anchor_d4f17",headerAnchor:"header-anchor_d4f17","overview-groups":"overview-groups_ced08",overviewGroups:"overview-groups_ced08","overview-group-li":"overview-group-li_e0f17",overviewGroupLi:"overview-group-li_e0f17","level-2":"level-2_e4d63",level2:"level-2_e4d63","level-3":"level-3_b489a",level3:"level-3_b489a","level-4":"level-4_a9543",level4:"level-4_a9543","overview-group":"overview-group_f8331",overviewGroup:"overview-group_f8331",header:"header_ba4f6"},st=t=>t.toLowerCase().replace(/-/g," "),se=(t,e)=>st(t).includes(st(e)),si=({query:t,setQuery:e,searchRef:i,filterNameText:r,filterPlaceholderText:s})=>(0,h.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,h.jsx)("label",{htmlFor:"api-filter",children:r}),(0,h.jsx)("input",{ref:i,type:"search",placeholder:s,id:"api-filter",value:t,onChange:t=>e(t.target.value),className:"border border-gray-300 dark:border-gray-700 rounded-lg px-3 py-2 transition-shadow duration-250 ease-in-out focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50"})]}),sr=({group:t,styles:e})=>(0,h.jsxs)("div",{className:"mb-16",children:[(0,h.jsx)("h2",{children:eG(t.name)}),(0,h.jsx)("div",{className:e.overviewGroups,children:t.items.map(t=>(0,h.jsxs)("div",{className:e.overviewGroup,children:[(0,h.jsx)("div",{className:"flex",children:(0,h.jsx)("h3",{style:{marginBottom:8},children:(0,h.jsx)(rI,{href:(0,d.AP)(t.link),children:eG(t.text)})})}),(0,h.jsx)("ul",{className:"list-none",children:t.headers?.map(i=>h.jsx("li",{className:`${e.overviewGroupLi} ${e[`level${i.depth}`]} first:mt-2`,children:h.jsx(rI,{href:`${d.AP(t.link)}#${i.id}`,children:eG(i.text)})},i.id))})]},t.link))})]},t.name);function ss(t){let{siteData:e,page:{routePath:i,title:r,frontmatter:s}}=(0,d.Vi)(),{content:n,groups:a,defaultGroupTitle:o="Others"}=t,[l,u]=(0,p.useState)(""),c=(0,p.useRef)(null);(0,p.useEffect)(()=>{c.current?.focus()},[]);let g=t=>(0,d.pJ)(t).startsWith(i.replace(/overview$/,""))&&!(0,d.pV)((0,d.pJ)(t),i),m=t=>"link"in t&&t.link?t.link:"items"in t?m(t.items[0]):"",{pages:f}=e,v=f.filter(t=>g(t.routePath)),y=e4(),{overview:{filterNameText:_="Filter",filterPlaceholderText:b="Enter keyword",filterNoResultText:x="No matching API found"}={}}=e5();function S(e,r,s){if(ir(e)||(0,d.pJ)(e.link)===`${i}index`&&s?.overview===!0)return!1;let n=t?.overviewHeaders??e.overviewHeaders??s?.overviewHeaders??r?.overviewHeaders??[2],a=v.find(t=>(0,d.pV)(t.routePath,(0,d.pJ)(e.link||""))),o=m(e);return{...e,link:o,headers:a?.toc?.filter(t=>n.some(e=>t.depth===e))||[]}}y[0]?.link!==i&&(y=function t(e,i){let r;let s=e.findIndex(t=>(function(t){if(ir(t))return!1;let e=(0,d.pJ)(t.link),r=e.endsWith("/index")?e.slice(0,-5):e,s=i.replace(/\/$/,"");return e===i||r===i||e===s||r===s})(t));if(-1===s)return e.map(e=>"items"in e?t(e.items,i):[]).flat();let n=e[s];if("items"in n&&Array.isArray(r=n.items)&&r.length>=1)return n.items.every(t=>!("items"in t))?[n]:n.items.filter(t=>!ir(t));let a=[...e];return"items"in n||a.splice(s,1),a.filter(t=>!ir(t))}(y,i));let A=a??(0,p.useMemo)(()=>y.filter(t=>Array.isArray(t?.items)?t.items.filter(t=>g(m(t))).length>0:!!(is(t)&&g(m(t)))).map(t=>{let e=[];return t?.items?e=t?.items?.map(e=>S(e,t,s)).filter(Boolean):is(t)&&(e=[S({link:t.link,text:t.text||"",tag:t.tag,_fileKey:t._fileKey,overviewHeaders:t.overviewHeaders},void 0,s)]),{name:t.text||"",items:e}}),[y,i,s]),k=(0,p.useMemo)(()=>l?A.map(t=>{if(se(t.name,l))return t;let e=t.items.map(t=>{if(se(t.text||"",l))return t;let e=t.headers?.filter(({text:t})=>se(t,l));return e?.length?{...t,headers:e}:null}).filter(Boolean);return e.length?{...t,items:e}:null}).filter(Boolean):A,[A,l]);return(0,h.jsxs)("div",{className:"overview-index mx-auto",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-10",children:[(0,h.jsx)("h1",{className:"text-3xl leading-10 tracking-tight",children:r||"Overview"}),(0,h.jsx)(si,{query:l,setQuery:u,searchRef:c,filterNameText:_,filterPlaceholderText:b})]}),n,k.length>0?k.map(t=>(0,h.jsx)(sr,{group:t,styles:r9},t?.name)):(0,h.jsx)("div",{className:"text-lg text-gray-500 text-center mt-9 pt-9 border-t border-gray-200 dark:border-gray-800",children:`${x}: ${l}`})]})}function sn(t){return(0,h.jsxs)("svg",{id:"Bun",width:"1.2em",height:"1.2em",viewBox:"0 0 80 70",...t,children:[(0,h.jsx)("path",{id:"Shadow",d:"M71.09,20.74c-.16-.17-.33-.34-.5-.5s-.33-.34-.5-.5-.33-.34-.5-.5-.33-.34-.5-.5-.33-.34-.5-.5-.33-.34-.5-.5-.33-.34-.5-.5A26.46,26.46,0,0,1,75.5,35.7c0,16.57-16.82,30.05-37.5,30.05-11.58,0-21.94-4.23-28.83-10.86l.5.5.5.5.5.5.5.5.5.5.5.5.5.5C19.55,65.3,30.14,69.75,42,69.75c20.68,0,37.5-13.48,37.5-30C79.5,32.69,76.46,26,71.09,20.74Z"}),(0,h.jsxs)("g",{id:"Body",children:[(0,h.jsx)("path",{id:"Background",d:"M73,35.7c0,15.21-15.67,27.54-35,27.54S3,50.91,3,35.7C3,26.27,9,17.94,18.22,13S33.18,3,38,3s8.94,4.13,19.78,10C67,17.94,73,26.27,73,35.7Z",style:{fill:"#fbf0df"}}),(0,h.jsx)("path",{id:"Bottom_Shadow","data-name":"Bottom Shadow",d:"M73,35.7a21.67,21.67,0,0,0-.8-5.78c-2.73,33.3-43.35,34.9-59.32,24.94A40,40,0,0,0,38,63.24C57.3,63.24,73,50.89,73,35.7Z",style:{fill:"#f6dece"}}),(0,h.jsx)("path",{id:"Light_Shine","data-name":"Light Shine",d:"M24.53,11.17C29,8.49,34.94,3.46,40.78,3.45A9.29,9.29,0,0,0,38,3c-2.42,0-5,1.25-8.25,3.13-1.13.66-2.3,1.39-3.54,2.15-2.33,1.44-5,3.07-8,4.7C8.69,18.13,3,26.62,3,35.7c0,.4,0,.8,0,1.19C9.06,15.48,20.07,13.85,24.53,11.17Z",style:{fill:"#fffefc"}}),(0,h.jsx)("path",{id:"Top",d:"M35.12,5.53A16.41,16.41,0,0,1,29.49,18c-.28.25-.06.73.3.59,3.37-1.31,7.92-5.23,6-13.14C35.71,5,35.12,5.12,35.12,5.53Zm2.27,0A16.24,16.24,0,0,1,39,19c-.12.35.31.65.55.36C41.74,16.56,43.65,11,37.93,5,37.64,4.74,37.19,5.14,37.39,5.49Zm2.76-.17A16.42,16.42,0,0,1,47,17.12a.33.33,0,0,0,.65.11c.92-3.49.4-9.44-7.17-12.53C40.08,4.54,39.82,5.08,40.15,5.32ZM21.69,15.76a16.94,16.94,0,0,0,10.47-9c.18-.36.75-.22.66.18-1.73,8-7.52,9.67-11.12,9.45C21.32,16.4,21.33,15.87,21.69,15.76Z",style:{fill:"#ccbea7",fillRule:"evenodd"}}),(0,h.jsx)("path",{id:"Outline",d:"M38,65.75C17.32,65.75.5,52.27.5,35.7c0-10,6.18-19.33,16.53-24.92,3-1.6,5.57-3.21,7.86-4.62,1.26-.78,2.45-1.51,3.6-2.19C32,1.89,35,.5,38,.5s5.62,1.2,8.9,3.14c1,.57,2,1.19,3.07,1.87,2.49,1.54,5.3,3.28,9,5.27C69.32,16.37,75.5,25.69,75.5,35.7,75.5,52.27,58.68,65.75,38,65.75ZM38,3c-2.42,0-5,1.25-8.25,3.13-1.13.66-2.3,1.39-3.54,2.15-2.33,1.44-5,3.07-8,4.7C8.69,18.13,3,26.62,3,35.7,3,50.89,18.7,63.25,38,63.25S73,50.89,73,35.7C73,26.62,67.31,18.13,57.78,13,54,11,51.05,9.12,48.66,7.64c-1.09-.67-2.09-1.29-3-1.84C42.63,4,40.42,3,38,3Z"})]}),(0,h.jsxs)("g",{id:"Mouth",children:[(0,h.jsx)("g",{id:"Background-2","data-name":"Background",children:(0,h.jsx)("path",{d:"M45.05,43a8.93,8.93,0,0,1-2.92,4.71,6.81,6.81,0,0,1-4,1.88A6.84,6.84,0,0,1,34,47.71,8.93,8.93,0,0,1,31.12,43a.72.72,0,0,1,.8-.81H44.26A.72.72,0,0,1,45.05,43Z",style:{fill:"#b71422"}})}),(0,h.jsxs)("g",{id:"Tongue",children:[(0,h.jsx)("path",{id:"Background-3","data-name":"Background",d:"M34,47.79a6.91,6.91,0,0,0,4.12,1.9,6.91,6.91,0,0,0,4.11-1.9,10.63,10.63,0,0,0,1-1.07,6.83,6.83,0,0,0-4.9-2.31,6.15,6.15,0,0,0-5,2.78C33.56,47.4,33.76,47.6,34,47.79Z",style:{fill:"#ff6164"}}),(0,h.jsx)("path",{id:"Outline-2","data-name":"Outline",d:"M34.16,47a5.36,5.36,0,0,1,4.19-2.08,6,6,0,0,1,4,1.69c.23-.25.45-.51.66-.77a7,7,0,0,0-4.71-1.93,6.36,6.36,0,0,0-4.89,2.36A9.53,9.53,0,0,0,34.16,47Z"})]}),(0,h.jsx)("path",{id:"Outline-3","data-name":"Outline",d:"M38.09,50.19a7.42,7.42,0,0,1-4.45-2,9.52,9.52,0,0,1-3.11-5.05,1.2,1.2,0,0,1,.26-1,1.41,1.41,0,0,1,1.13-.51H44.26a1.44,1.44,0,0,1,1.13.51,1.19,1.19,0,0,1,.25,1h0a9.52,9.52,0,0,1-3.11,5.05A7.42,7.42,0,0,1,38.09,50.19Zm-6.17-7.4c-.16,0-.2.07-.21.09a8.29,8.29,0,0,0,2.73,4.37A6.23,6.23,0,0,0,38.09,49a6.28,6.28,0,0,0,3.65-1.73,8.3,8.3,0,0,0,2.72-4.37.21.21,0,0,0-.2-.09Z"})]}),(0,h.jsxs)("g",{id:"Face",children:[(0,h.jsx)("ellipse",{id:"Right_Blush","data-name":"Right Blush",cx:"53.22",cy:"40.18",rx:"5.85",ry:"3.44",style:{fill:"#febbd0"}}),(0,h.jsx)("ellipse",{id:"Left_Bluch","data-name":"Left Bluch",cx:"22.95",cy:"40.18",rx:"5.85",ry:"3.44",style:{fill:"#febbd0"}}),(0,h.jsx)("path",{id:"Eyes",d:"M25.7,38.8a5.51,5.51,0,1,0-5.5-5.51A5.51,5.51,0,0,0,25.7,38.8Zm24.77,0A5.51,5.51,0,1,0,45,33.29,5.5,5.5,0,0,0,50.47,38.8Z",style:{fillRule:"evenodd"}}),(0,h.jsx)("path",{id:"Iris",d:"M24,33.64a2.07,2.07,0,1,0-2.06-2.07A2.07,2.07,0,0,0,24,33.64Zm24.77,0a2.07,2.07,0,1,0-2.06-2.07A2.07,2.07,0,0,0,48.75,33.64Z",style:{fill:"#fff",fillRule:"evenodd"}})]})]})}function sa(t){return(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",...t,children:[(0,h.jsx)("path",{fill:"#C12127",d:"M0 256V0h256v256z"}),(0,h.jsx)("path",{fill:"#FFF",d:"M48 48h160v160h-32V80h-48v128H48z"})]})}function so(t){return(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 128 128",...t,children:[(0,h.jsx)("path",{fill:"#f8ab00",d:"M0 .004V40h39.996V.004Zm43.996 0V40h40V.004Zm44.008 0V40H128V.004Zm0 43.996v39.996H128V44Z"}),(0,h.jsx)("path",{fill:"#4c4c4c",d:"M43.996 44v39.996h40V44ZM0 87.996v40h39.996v-40Zm43.996 0v40h40v-40Zm44.008 0v40H128v-40Z"})]})}function sl(t){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 128 128",...t,children:(0,h.jsxs)("g",{fill:"#2c8ebb",children:[(0,h.jsx)("path",{d:"M99.24 80.71C94.9 80.76 91.1 83 87.89 85c-6 3.71-9 3.47-9 3.47l-.1-.17c-.41-.67 1.92-6.68-.69-13.84c-2.82-7.83-7.3-9.72-6.94-10.32c1.53-2.59 5.36-6.7 6.89-14.36c.91-4.64.67-12.28-1.39-16.28c-.38-.74-3.78 1.24-3.78 1.24s-3.18-7.09-4.07-7.66c-2.87-1.84-6 7.61-6 7.61a14 14 0 0 0-11.71 4.5a9.64 9.64 0 0 1-3.85 2.27c-.41.14-.91.12-2.15 3.47c-1.9 5.07 3.24 10.81 3.24 10.81s-6.13 4.33-8.4 9.72a24.78 24.78 0 0 0-1.75 11.68s-4.36 3.78-4.64 7.68a12.87 12.87 0 0 0 1.77 7.83a1.94 1.94 0 0 0 2.63.91s-2.9 3.38-.19 4.81c2.47 1.29 6.63 2 8.83-.19c1.6-1.6 1.92-5.17 2.51-6.63c.14-.34.62.57 1.08 1a10 10 0 0 0 1.36 1s-3.9 1.68-2.3 5.51c.53 1.27 2.42 2.08 5.51 2.06c1.15 0 13.76-.72 17.12-1.53a4.33 4.33 0 0 0 2.61-1.46a63 63 0 0 0 15.49-7c4.74-3.09 6.68-3.93 10.51-4.84c3.16-.75 2.95-5.65-1.24-5.58z"}),(0,h.jsx)("path",{d:"M64 2a62 62 0 1 0 62 62A62 62 0 0 0 64 2zm37.3 87.83c-3.35.81-4.91 1.44-9.41 4.36a67 67 0 0 1-15.56 7.18a8.71 8.71 0 0 1-3.64 1.77c-3.81.93-16.88 1.63-17.91 1.63h-.24c-4 0-6.27-1.24-7.49-2.54c-3.4 1.7-7.8 1-11-.69a5.55 5.55 0 0 1-3-3.9a6 6 0 0 1 0-2.06a6.66 6.66 0 0 1-.79-1A16.38 16.38 0 0 1 30 84.52c.29-3.73 2.87-7.06 4.55-8.83A28.56 28.56 0 0 1 36.61 64a26.82 26.82 0 0 1 6.82-9c-1.65-2.78-3.33-7.06-1.7-11.42c1.17-3.11 2.13-4.84 4.24-5.58a6.84 6.84 0 0 0 2.51-1.34A17.65 17.65 0 0 1 60.34 31c.19-.48.41-1 .65-1.46c1.6-3.4 3.3-5.31 5.29-6a4.88 4.88 0 0 1 4.4.5c.65.43 1.48 1 3.9 6a4.69 4.69 0 0 1 2.85-.1a3.81 3.81 0 0 1 2.39 1.94c2.47 4.74 2.8 13.19 1.72 18.62a33.8 33.8 0 0 1-5.84 13.31a25.73 25.73 0 0 1 5.77 9.43a25.42 25.42 0 0 1 1.41 10.41A28.7 28.7 0 0 0 86 81.91c3.06-1.89 7.68-4.74 13.19-4.81a6.62 6.62 0 0 1 7 5.7a6.35 6.35 0 0 1-4.89 7.03z"})]})})}function sh(t){if(t.startsWith("yarn create"))return t.replace(/(yarn create [^\s]+)@latest/,"$1");if(!t?.includes("install"))return t;let e=t.split(" ").filter(t=>!t.startsWith("-")&&!t.startsWith("--")).join(" ");return"yarn install"===e||"bun install"===e?t:t.replace("install","add")}function su({command:t,additionalTabs:e=[]}){let i;let r={npm:(0,h.jsx)(sa,{}),yarn:(0,h.jsx)(sl,{}),pnpm:(0,h.jsx)(so,{}),bun:(0,h.jsx)(sn,{})};return e.forEach(t=>{r[t.tool]=t.icon}),"string"==typeof t?(i={npm:`npm ${t}`,yarn:`yarn ${t}`,pnpm:`pnpm ${t}`,bun:`bun ${t}`},e.forEach(e=>{i[e.tool]=`${e.tool} ${t}`})):i=t,i.yarn&&(i.yarn=sh(i.yarn)),i.bun&&(i.bun=sh(i.bun)),(0,h.jsx)(sv,{groupId:"package.manager",values:Object.entries(i).map(([t])=>(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:15},children:[r[t],(0,h.jsx)("span",{style:{marginLeft:6,marginBottom:2},children:t})]},t)),children:Object.entries(i).map(([t,e])=>(0,h.jsx)(sy,{children:(0,h.jsx)(iJ,{children:(0,h.jsx)(iV,{className:"language-js",codeHighlighter:"prism",children:e})})},t))})}let sd={pagerLink:"pager-link_e0d2d",title:"title_a3acb",next:"next_ad355",desc:"desc_dcc01"};function sc(t){let{type:e,text:i,href:r}=t,{prevPageText:s="Previous Page",nextPageText:n="Next Page"}=e5(),a="prev"===e?sd.pagerLink:`${sd.pagerLink} ${sd.next}`;return(0,h.jsxs)(rI,{href:r,className:a,onMouseEnter:()=>il(r),children:[(0,h.jsx)("span",{className:sd.desc,children:"prev"===e?s:n}),(0,h.jsx)("span",{className:sd.title,children:i})]})}let sp={scrollToTop:"scroll-to-top_e22be",entered:"entered_c8faf"};function sg(){let[t,e]=(0,p.useState)(!1),i=()=>{e((window.scrollY||document.documentElement.scrollTop)>0)};return(0,p.useEffect)(()=>{window.addEventListener("scroll",i)},[]),(0,h.jsx)("button",{className:`${sp.scrollToTop} ${t?sp.entered:""}`,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"})})})}let sm={container:"container_df5ed",tabList:"tab-list_ccbcc",tab:"tab_cae68",notSelected:"not-selected_dab7a",selected:"selected_f5c1e",noScrollbar:"no-scrollbar_db61f"},sf=t=>t&&"object"==typeof t&&"label"in t?t.label||t.value:t,sv=(0,p.forwardRef)((t,e)=>{let{values:i,defaultValue:r,onChange:s,children:n,groupId:a,tabPosition:o="left",tabContainerClassName:l}=t,u=p.Children.toArray(n).filter(t=>!("string"==typeof t&&""===t.trim())),d=i||[];0===d.length&&(d=p.Children.map(u,t=>(0,p.isValidElement)(t)?{label:t.props?.label,value:t.props?.value||t.props?.label}:{label:void 0,value:void 0}));let{tabData:c,setTabData:g}=(0,p.useContext)(ib),[m,f]=(0,p.useState)(()=>void 0===r?0:d.findIndex(t=>"string"==typeof t?t===r:!!t&&"object"==typeof t&&"value"in t&&t.value===r)),[v,y]=rg(`rspress.tabs.${a}`,m.toString()),_=(0,p.useMemo)(()=>a?void 0!==c[a]?c[a]:Number.parseInt(v):m,[a&&c[a]]);(0,p.useEffect)(()=>{if(a){let t=Number.parseInt(v);_!==t&&g({...c,[a]:t})}},[v]);let b=a?_:m;return(0,h.jsxs)("div",{className:sm.container,ref:e,children:[(0,h.jsx)("div",{className:l,children:d.length?(0,h.jsx)("div",{className:`${sm.tabList} ${sm.noScrollbar}`,style:{justifyContent:"center"===o?"center":"flex-start"},children:d.map((t,e)=>(0,h.jsx)("div",{className:`${sm.tab} ${b===e?sm.selected:sm.notSelected}`,onClick:()=>{s?.(e),a?(g({...c,[a]:e}),y(e.toString())):f(e)},children:sf(t)},e))}):null}),(0,h.jsx)("div",{children:p.Children.toArray(u)[b]})]})});function sy({children:t,...e}){return(0,h.jsx)("div",{...e,className:"rounded px-2",children:t})}function s_({query:t}){let{searchNoResultsText:e="No results for",searchSuggestedQueryText:i="Please try again with a different keyword"}=e5();return(0,h.jsxs)("div",{className:"flex flex-col items-center pt-8 pb-2",children:[(0,h.jsx)(ie,{icon:eL,className:"mb-4 opacity-80"}),(0,h.jsxs)("p",{className:"mb-2",children:[e," ",(0,h.jsxs)("b",{children:['"',t,'"']})]}),(0,h.jsx)("p",{children:i})]})}let sb={mask:"mask_ac6b3",modal:"modal_e4a04",inputForm:"inputForm_d4ba2",input:"input_f8add",close:"close_bee84",searchHits:"searchHits_dc1b2",groupTitle:"groupTitle_fe27c",navSearchButton:"navSearchButton_df1fb",searchWord:"searchWord_af2c1",suggestItem:"suggestItem_b1e66",suggestItemContainer:"suggestItemContainer_f5e47",contentWrapper:"contentWrapper_efb78",mark:"mark_b6cd5",titleForContent:"titleForContent_f2995",actionIcon:"actionIcon_f4ffd",current:"current_eb655",tabClassName:"tabClassName_b3f85",mobileNavSearchButton:"mobileNavSearchButton_d85a9"},sx={title:t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M4 4a2 2 0 0 1 2-2h8a1 1 0 0 1 .707.293l5 5A1 1 0 0 1 20 8v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm13.586 4L14 4.414V8zM12 4H6v16h12V10h-5a1 1 0 0 1-1-1z"})}),header:t=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 32 32",...t,children:(0,h.jsx)("path",{fill:"currentColor",d:"M28 12v-2h-6V4h-2v6h-8V4h-2v6H4v2h6v8H4v2h6v6h2v-6h8v6h2v-6h6v-2h-6v-8Zm-8 8h-8v-8h8Z"})}),content:t=>(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 32 32",...t,children:[(0,h.jsx)("circle",{cx:22,cy:24,r:2,fill:"currentColor"}),(0,h.jsx)("path",{fill:"none",d:"M22 28a4 4 0 1 1 4-4 4.004 4.004 0 0 1-4 4m0-6a2 2 0 1 0 2 2 2.003 2.003 0 0 0-2-2"}),(0,h.jsx)("path",{fill:"currentColor",d:"M29.777 23.479A8.64 8.64 0 0 0 22 18a8.64 8.64 0 0 0-7.777 5.479L14 24l.223.521A8.64 8.64 0 0 0 22 30a8.64 8.64 0 0 0 7.777-5.479L30 24ZM22 28a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4"}),(0,h.jsx)("path",{fill:"currentColor",d:"M12 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v4h2v-6a.91.91 0 0 0-.3-.7l-7-7A.9.9 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h4Zm6-23.6 5.6 5.6H18Z"})]})};function sS({suggestion:t,closeSearch:e,isCurrent:i,setCurrentSuggestionIndex:r,inCurrentDocIndex:s,scrollTo:n,onMouseMove:a}){let o=sx[t.type],l=s&&!(0,d.yv)()?i9(t.link):t.link,u=(0,p.useRef)(null);i&&u.current?.offsetTop&&n(u.current?.offsetTop,u.current?.offsetHeight);let c=(t,e)=>{let i=[],r=0;for(let s of e){let{start:e,length:n}=s,a=t.slice(r,e),o=function(t,e,i){let r="",s=0,n=t.length;for(let e=0;e<n&&!((s+=rt(t.charAt(e)))>0+i);e++)s>0&&(r+=t.charAt(e));return r}(t.slice(e),0,n);i.push(a),i.push((0,h.jsx)("span",{className:sb.mark,children:o},e)),r=e+o.length}return r<t.length&&i.push(t.slice(r)),i},g=null;switch(t.type){case"title":case"header":g=(()=>{if("header"===t.type||"title"===t.type){let{header:e,highlightInfoList:i}=t;return(0,h.jsx)("div",{className:"font-medium",children:c(e,i)})}return(0,h.jsx)("div",{className:"font-medium",children:t.header})})();break;case"content":g=(0,h.jsxs)(h.Fragment,{children:[(()=>{if("content"!==t.type)return(0,h.jsx)("div",{});let{statement:e,highlightInfoList:i}=t;return(0,h.jsx)("div",{className:"text-sm text-gray-light w-full",children:c(e,i)})})(),(0,h.jsx)("p",{className:sb.titleForContent,children:t.title})]})}return(0,h.jsx)("li",{className:`rspress-search-suggest-item ${sb.suggestItem} ${i?sb.current:""}`,onMouseEnter:r,onMouseMove:a,ref:u,children:(0,h.jsx)("a",{href:l,onClick:t=>{e(),t.stopPropagation()},target:s?"_self":"_blank",children:(0,h.jsxs)("div",{className:sb.suggestItemContainer,children:[(0,h.jsx)("div",{className:sb.hitIcon,children:(0,h.jsx)(ie,{icon:o})}),(0,h.jsx)("div",{className:sb.contentWrapper,children:(0,h.jsx)("span",{children:g})}),(0,h.jsx)("div",{className:sb.actionIcon,children:(0,h.jsx)(ie,{icon:eF})})]})})},t.link)}let sA={ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ENTER:"Enter",SEARCH:"KeyK",ESC:"Escape"},sk=t=>{let e=(0,p.useRef)(t);return e.current=t,(0,p.useCallback)(N((...t)=>e.current(...t),150),[])};function sw({focused:t,setFocused:e}){let[i,r]=(0,p.useState)(""),[s,n]=(0,p.useState)([]),a=(0,p.useRef)(null),[o,u]=(0,p.useState)(!1),[c,g]=(0,p.useState)(0),[m,f]=(0,p.useState)(0),v=(0,p.useRef)(null),y=(0,p.useRef)(null),[_,b]=(0,p.useState)("initial"),x=(0,p.useRef)(null),S=(0,p.useRef)(null),A=(0,p.useRef)({pageX:null,pageY:null}),[k,w]=(0,p.useState)(!1),C=(t,e)=>{let i=x.current?.offsetHeight,r=x.current?.scrollTop;if(k&&void 0!==i&&void 0!==r){let n=t+e-i-(1===s.length?50:-10);n>r&&x.current?.scrollTo({top:n});let a=1===s.length?t-70:t-10;a<r&&x.current?.scrollTo({top:a})}},{siteData:T,page:{lang:E,version:M}}=(0,d.Vi)(),{searchPlaceholderText:B="Search Docs"}=e5(),{search:D,title:O}=T,P=D&&"remote"!==D.mode&&D.versioned,I=[{group:O,result:[],renderType:rh.Default}],R=s[c]?.result??[],L=s[c]?.renderType??rh.Default;if(!1===D)return null;let F=()=>{if(v.current)return v.current;let t={currentLang:E,currentVersion:M},e=new ru({indexName:O,...D,...t});return v.current=e,y.current=t,v.current};async function j(){if("initial"!==_)return;let t=F();b("initing"),await t.init(),b("inited");let e=a.current?.value;e&&(n(await t.match(e)||I),u(!1))}let Z=()=>{e(!1),g(0),f(0)};(0,p.useEffect)(()=>{let i=i=>{switch(i.code){case sA.SEARCH:(i.ctrlKey||i.metaKey)&&(i.preventDefault(),e(!t));break;case sA.ARROW_DOWN:if(i.isComposing)return;t&&(i.preventDefault(),R&&L===rh.Default&&(w(!0),f((m+1)%R.length)));break;case sA.ARROW_UP:if(i.isComposing)return;if(t&&(i.preventDefault(),L===rh.Default)){let t=R.length;w(!0),f((m-1+t)%t)}break;case sA.ENTER:if(i.isComposing)return;if(m>=0&&L===rh.Default){let t=[...Object.values(N(R))].flat()[m];0===c?window.location.href=(0,V.yv)()?t.link:i9(t.link):window.open(t.link),Z()}break;case sA.ESC:Z()}};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[f,e,t,c,R,m]),(0,p.useEffect)(()=>{t?(n(I),j()):r("")},[t]),(0,p.useEffect)(()=>{"requestIdleCallback"in window&&!v.current&&window.requestIdleCallback(()=>{F().fetchSearchIndex()})},[]),(0,p.useEffect)(()=>{if("initial"===_)return;let{currentLang:t,currentVersion:e}=y.current??{},i=P&&M!==e;(E!==t||i)&&(b("initial"),v.current=null,j())},[E,M,P]);let H=sk(async t=>{let e=t;if(r(e),D&&"remote"===D.mode&&D.searchLoading&&u(!0),e){let t=[];if("beforeSearch"in l){let t=await l.beforeSearch(e);t&&(e=t)}let i=await v.current?.match(e);if(i&&t.push(...i),"onSearch"in l){let i=await l.onSearch(e,t);i&&t.push(...i.map(t=>({renderType:rh.Custom,...t})))}"afterSearch"in l&&await l.afterSearch(e,t),a.current?.value===e&&(n(t||I),u(!1))}}),N=t=>t.reduce((t,e)=>{let i=e.title;return t[i]||(t[i]=[]),t[i].push(e),t},{}),z=(t,e,i)=>{if(i)return(0,h.jsx)("div",{className:"flex flex-col items-center",children:(0,h.jsx)(ie,{icon:eI,className:"m-8 opacity-80"})});if(0===t.length&&"inited"===_)return(0,h.jsx)(s_,{query:e});let r=N(t),s=-1;return(0,h.jsx)("ul",{className:sb.suggestList,children:Object.keys(r).map(t=>{let e=r[t]||[];return(0,h.jsx)("li",{children:(0,h.jsx)("ul",{className:"pb-2",children:e.map(t=>{let e=++s;return(0,h.jsx)(sS,{suggestion:t,isCurrent:e===m,setCurrentSuggestionIndex:t=>{(A.current.pageX!==t.pageX||A.current.pageY!==t.pageY)&&(w(!1),f(e))},onMouseMove:t=>{A.current={pageX:t.pageX,pageY:t.pageY}},closeSearch:()=>{Z()},inCurrentDocIndex:0===c,scrollTo:C},`${t.title}-${e}`)})})},t)})})};return(0,h.jsx)(h.Fragment,{children:t&&(0,eB.createPortal)((0,h.jsx)("div",{className:sb.mask,onClick:()=>{Z()},children:(0,h.jsxs)("div",{className:`${sb.modal}`,onClick:t=>{e(!0),t.stopPropagation()},children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsxs)("div",{className:sb.inputForm,children:[(0,h.jsx)("label",{children:(0,h.jsx)(ie,{icon:eO})}),(0,h.jsx)("input",{className:`rspress-search-panel-input ${sb.input}`,ref:a,placeholder:B,"aria-label":"SearchPanelInput",autoComplete:"off",autoFocus:!0,onChange:t=>H(t.target.value)}),(0,h.jsx)("label",{children:(0,h.jsx)(ie,{icon:eP,className:sb.close,onClick:t=>{a.current&&(t.stopPropagation(),i?(a.current.value="",r("")):Z())}})})]}),(0,h.jsx)("h2",{className:"text-brand ml-2 sm:hidden cursor-pointer",onClick:t=>{t.stopPropagation(),Z()},children:"Cancel"})]}),i&&"inited"===_?(0,h.jsx)("div",{className:`${sb.searchHits}  rspress-scrollbar`,ref:x,children:((t,e,r)=>{if(1===t.length){let e=t[0].result;return 0!==e.length||r?(0,h.jsx)("div",{ref:S,children:z(e,i,r)}):(0,h.jsx)(s_,{query:i})}let s=t.map(t=>e&&"remote"===e.mode?re(e.searchIndexes||[]).find(e=>e.value===t.group).label:t.group);return(0,h.jsx)(sv,{values:s,tabContainerClassName:sb.tabClassName,onChange:t=>{g(t),f(0)},ref:S,children:t.map(t=>(0,h.jsxs)(sy,{children:[t.renderType===rh.Default&&z(t.result,i,r),t.renderType===rh.Custom&&l.render(t.result)]},t.group))})})(s,D,o)}):null]})}),document.getElementById("search-container"))})}function sC(){let[t,e]=(0,p.useState)(!1),[i,r]=(0,p.useState)(null),{searchPlaceholderText:s="Search Docs"}=e5();return(0,p.useEffect)(()=>{r(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?"⌘":"Ctrl")},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:`rspress-nav-search-button ${sb.navSearchButton}`,onClick:()=>e(!0),children:(0,h.jsxs)("button",{children:[(0,h.jsx)(ie,{icon:eO,width:"18",height:"18"}),(0,h.jsx)("p",{className:sb.searchWord,children:s}),(0,h.jsxs)("div",{style:{opacity:i?1:0},children:[(0,h.jsx)("span",{children:i}),(0,h.jsx)("span",{children:"K"})]})]})}),(0,h.jsx)("div",{className:sb.mobileNavSearchButton,onClick:()=>e(!0),children:(0,h.jsx)(ie,{icon:eO})}),(0,h.jsx)(sw,{focused:t,setFocused:e})]})}function sT(t){let{href:e,platform:i="github"}=t,{sourceCodeText:r="Source"}=e5();return(0,h.jsx)("div",{className:"inline-block rounded border border-solid border-gray-light-3 dark:border-divider text-gray-400 sourceCode_c1837",children:(0,h.jsxs)("a",{href:e,target:"_blank",className:"flex items-center content-center transition-all duration-300 text-xs block px-2 py-1 ",children:[(0,h.jsx)("span",{className:"mr-2 inline-flex w-4 h-4",children:(0,h.jsx)(ie,{icon:"gitlab"===i?eZ:ej})}),(0,h.jsx)("span",{children:r})]})})}function sE({children:t}){return(0,h.jsx)("div",{className:"ml-4 mb-11 border-l pl-6 rspressSteps_f17c8 [counter-reset:step]",children:t})}let sM=({tag:t})=>t?t.trim().startsWith("<svg")?(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:t},style:{width:20,marginRight:4}}):(0,h.jsx)("img",{src:t}):null,sB=({header:t,onItemClick:e})=>(0,h.jsx)("li",{children:(0,h.jsx)("a",{href:`#${t.id}`,className:"rspress-toc-link sm:text-normal text-sm",style:{marginLeft:(t.depth-2)*12},onClick:i=>{i.preventDefault(),window.location.hash=t.id;let r=document.getElementById(t.id);r&&eq(r,!1),e?.(t)},children:(0,h.jsx)("span",{className:"rspress-toc-link-text block",children:eG(t.text)})})},t.id);function sD({onItemClick:t}){let{page:e}=(0,d.Vi)();return(0,h.jsx)("ul",{children:e.toc.map(e=>(0,h.jsx)(sB,{header:e,onItemClick:t},e.id))})}let sO={Layout:iR,NotFoundLayout:iL,HomeLayout:iO,setup:eQ}},2436:function(t){"use strict";t.exports=JSON.parse('{"AElig":"\xc6","AMP":"&","Aacute":"\xc1","Acirc":"\xc2","Agrave":"\xc0","Aring":"\xc5","Atilde":"\xc3","Auml":"\xc4","COPY":"\xa9","Ccedil":"\xc7","ETH":"\xd0","Eacute":"\xc9","Ecirc":"\xca","Egrave":"\xc8","Euml":"\xcb","GT":">","Iacute":"\xcd","Icirc":"\xce","Igrave":"\xcc","Iuml":"\xcf","LT":"<","Ntilde":"\xd1","Oacute":"\xd3","Ocirc":"\xd4","Ograve":"\xd2","Oslash":"\xd8","Otilde":"\xd5","Ouml":"\xd6","QUOT":"\\"","REG":"\xae","THORN":"\xde","Uacute":"\xda","Ucirc":"\xdb","Ugrave":"\xd9","Uuml":"\xdc","Yacute":"\xdd","aacute":"\xe1","acirc":"\xe2","acute":"\xb4","aelig":"\xe6","agrave":"\xe0","amp":"&","aring":"\xe5","atilde":"\xe3","auml":"\xe4","brvbar":"\xa6","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","eacute":"\xe9","ecirc":"\xea","egrave":"\xe8","eth":"\xf0","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","iacute":"\xed","icirc":"\xee","iexcl":"\xa1","igrave":"\xec","iquest":"\xbf","iuml":"\xef","laquo":"\xab","lt":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","ntilde":"\xf1","oacute":"\xf3","ocirc":"\xf4","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","oslash":"\xf8","otilde":"\xf5","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","raquo":"\xbb","reg":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","thorn":"\xfe","times":"\xd7","uacute":"\xfa","ucirc":"\xfb","ugrave":"\xf9","uml":"\xa8","uuml":"\xfc","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},3290:function(t){"use strict";t.exports=JSON.parse('{"0":"�","128":"€","130":"‚","131":"ƒ","132":"„","133":"…","134":"†","135":"‡","136":"ˆ","137":"‰","138":"Š","139":"‹","140":"Œ","142":"Ž","145":"‘","146":"’","147":"“","148":"”","149":"•","150":"–","151":"—","152":"˜","153":"™","154":"š","155":"›","156":"œ","158":"ž","159":"Ÿ"}')}}]);