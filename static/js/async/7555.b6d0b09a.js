"use strict";(self.webpackChunksensoro_design_charts=self.webpackChunksensoro_design_charts||[]).push([["7555"],{58799:function(e,n,a){a.r(n),a.d(n,{default:()=>v});var t=a(52676),l=a(40453),u=a(36426),r=a(12819),i=a(68478),o=a(74469);function d(e){let n=Object.assign({h1:"h1",a:"a",pre:"pre",code:"code"},(0,l.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"doubleoverlaparea",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#doubleoverlaparea",children:"#"}),"DoubleOverlapArea"]}),"\n",(0,t.jsxs)(o.Z,{isMobile:"false",demoId:"_custom_DoubleOverlapArea_1",children:[(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import type { DoubleOverlapAreaProps } from '@sensoro-design/chart';\nimport { DoubleOverlapArea } from '@sensoro-design/chart';\n\nfunction Example() {\n  const spec: DoubleOverlapAreaProps = {\n    title: {\n      text: '基本示例',\n    },\n    height: 400,\n    data: [\n      { values: [{ date: 0, value: 11635 }, { date: 1, value: 8730 }, { date: 2, value: 6931 }] },\n      { values: [{ date: 2, value: 6931 }, { date: 3, value: 6850 }, { date: 4, value: 5366 }, { date: 5, value: 4874 }, { date: 6, value: 5347 }, { date: 7, value: 41115 }, { date: 8, value: 81250 }, { date: 9, value: 81437 }, { date: 10, value: 103941 }, { date: 11, value: 105994 }, { date: 12, value: 116688 }, { date: 13, value: 118847 }, { date: 14, value: 101091 }, { date: 15, value: 107977 }, { date: 16, value: 129702 }, { date: 17, value: 109491 }, { date: 18, value: 106720 }, { date: 19, value: 52051 }, { date: 20, value: 37894 }, { date: 21, value: 29828 }, { date: 22, value: 21099 }] },\n      { values: [{ date: 22, value: 21099 }, { date: 23, value: 14170 }] },\n    ],\n    tooltip: {\n      dimension: {\n        title: {\n          value: (datum) => {\n            return `${datum?.date}:00 ~ ${datum?.date + 1}:00`;\n          },\n        },\n        content: {\n          key: '出行次数',\n          value: (datum) => {\n            return datum?.value;\n          },\n        },\n      },\n    },\n  };\n\n  return (\n    <DoubleOverlapArea {...spec} />\n  );\n};\n\nexport default Example;\n"})})}),(0,t.jsx)(u.default,{})]}),"\n",(0,t.jsxs)(o.Z,{isMobile:"false",demoId:"_custom_DoubleOverlapArea_2",children:[(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import type { DoubleOverlapAreaProps } from '@sensoro-design/chart';\nimport { DoubleOverlapArea } from '@sensoro-design/chart';\n\nfunction Example() {\n  const spec: DoubleOverlapAreaProps = {\n    title: {\n      text: '数值较小',\n    },\n    height: 400,\n    data: [\n      {\n        values: [\n          { date: 'Jan', value: 0 },\n          { date: 'Feb', value: 0 },\n          { date: 'Mar', value: 0 },\n          { date: 'Apr', value: 0 },\n          { date: 'May', value: 1 },\n        ],\n      },\n      {\n        values: [\n          { date: 'May', value: 1 },\n          { date: 'Jun', value: 1 },\n        ],\n      },\n      {\n        values: [\n          { date: 'Jun', value: 1 },\n          { date: 'Jul', value: 0 },\n          { date: 'Aug', value: 0 },\n          { date: 'Sept', value: 0 },\n        ],\n      },\n    ],\n    xAxes: {\n      tick: {\n        tickCount: () => {\n          return 5;\n        },\n      },\n      label: {\n        formatMethod: (text) => {\n          return `${text}1`;\n        },\n      },\n    },\n    yAxes: {\n      tick: {\n        tickStep: 1,\n      },\n      max: 5,\n    },\n  };\n\n  return (\n    <DoubleOverlapArea {...spec} />\n  );\n};\n\nexport default Example;\n"})})}),(0,t.jsx)(r.default,{})]}),"\n",(0,t.jsxs)(o.Z,{isMobile:"false",demoId:"_custom_DoubleOverlapArea_3",children:[(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import type { DoubleOverlapAreaProps, IGradient, IMarkLineSpec, IMarkPointSpec } from '@sensoro-design/chart';\nimport { useGetState } from '@rcuse/core';\nimport { DoubleOverlapArea } from '@sensoro-design/chart';\nimport { colorBlue06, colorGreyPro09, colorWhite } from '@sensoro-design/chart-theme';\nimport { isNotNil } from 'es-toolkit/predicate';\nimport React from 'react';\n\nconst linearColor: IGradient = {\n  gradient: 'linear',\n  x0: 0.5,\n  y0: 0,\n  x1: 0.5,\n  y1: 1,\n  stops: [\n    {\n      offset: 0,\n      color: 'rgba(43,109,229,0.35)',\n    },\n    {\n      offset: 1,\n      color: 'rgba(43,109,229,0)',\n    },\n  ],\n};\n\nfunction getMarkLineItem(opts: IMarkLineSpec): IMarkLineSpec {\n  return {\n    endSymbol: {\n      visible: false,\n    },\n    zIndex: 1,\n    line: {\n      style: {\n        stroke: linearColor,\n        lineDash: [0],\n        lineWidth: 24,\n      },\n    },\n    ...opts,\n  };\n}\n\nfunction getMarkLineLabel() {\n  const label: IMarkLineSpec['label'] = {\n    text: '再次点击可取消选中',\n    style: {\n      fill: colorWhite,\n    },\n    labelBackground: {\n      visible: true,\n      padding: {\n        top: 8,\n        left: 12,\n        right: 12,\n        bottom: 8,\n      },\n      style: {\n        fill: colorGreyPro09,\n      },\n    },\n    dy: -8,\n  };\n\n  return label;\n}\n\nfunction getMarkPoint(opts: IMarkPointSpec): IMarkPointSpec {\n  const markPoint = {\n    itemLine: {\n      visible: true,\n      startSymbol: {\n        visible: true,\n        size: 10,\n        style: {\n          lineWidth: 2,\n          fill: '#fff',\n          stroke: 'default',\n        },\n      },\n      line: {\n        style: {\n          visible: false,\n        },\n      },\n    },\n    ...opts,\n  };\n\n  return markPoint;\n}\n\nfunction Example() {\n  const timeoutRef = React.useRef<NodeJS.Timeout>();\n  const [, setFirstSelect, getFirstSelect] = useGetState(true);\n  const [, setSelectVal, getSelectVal] = useGetState<{ date: number; value: number } | null>(null);\n  const [markLine, setMarkLine] = React.useState<DoubleOverlapAreaProps['markLine']>([]);\n  const [markPoint, setMarkPoint] = React.useState<IMarkPointSpec[]>([]);\n\n  const spec: DoubleOverlapAreaProps = {\n    title: {\n      text: '事件',\n    },\n    height: 400,\n    data: [\n      { values: [{ date: 0, value: 11635 }, { date: 1, value: 8730 }, { date: 2, value: 6931 }] },\n      { values: [{ date: 2, value: 6931 }, { date: 3, value: 6850 }, { date: 4, value: 5366 }, { date: 5, value: 4874 }, { date: 6, value: 5347 }, { date: 7, value: 41115 }, { date: 8, value: 81250 }, { date: 9, value: 81437 }, { date: 10, value: 103941 }, { date: 11, value: 105994 }, { date: 12, value: 116688 }, { date: 13, value: 118847 }, { date: 14, value: 101091 }, { date: 15, value: 107977 }, { date: 16, value: 129702 }, { date: 17, value: 109491 }, { date: 18, value: 106720 }, { date: 19, value: 52051 }, { date: 20, value: 37894 }, { date: 21, value: 29828 }, { date: 22, value: 21099 }] },\n      { values: [{ date: 22, value: 21099 }, { date: 23, value: 14170 }] },\n    ],\n    tooltip: {\n      dimension: {\n        title: {\n          value: (datum) => {\n            return `${datum?.date}:00 ~ ${datum?.date + 1}:00`;\n          },\n        },\n        content: {\n          key: '出行次数',\n          value: (datum) => {\n            return datum?.value;\n          },\n        },\n      },\n    },\n  };\n\n  React.useEffect(() => {\n    timeoutRef.current && clearTimeout(timeoutRef.current);\n  }, []);\n\n  const handleChangeMarkLine = () => {\n    const selectVal = getSelectVal();\n    const firstSelect = getFirstSelect();\n\n    const markLine: IMarkLineSpec[] = [];\n    const markPoint: IMarkPointSpec[] = [];\n\n    if (isNotNil(selectVal)) {\n      markLine.push(\n        getMarkLineItem({\n          x: selectVal.date,\n          label: firstSelect ? getMarkLineLabel() : undefined,\n        }),\n        getMarkLineItem({\n          x: selectVal.date,\n          line: {\n            style: {\n              stroke: colorBlue06,\n              lineWidth: 1,\n              lineDash: [3, 2],\n            },\n          },\n        }),\n      );\n\n      markPoint.push(\n        getMarkPoint({\n          x: selectVal.date,\n          y: selectVal.value,\n        }),\n      );\n    }\n\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    if (firstSelect) {\n      setFirstSelect(false);\n      timeoutRef.current = setTimeout(() => {\n        handleChangeMarkLine();\n      }, 3 * 1000);\n    }\n\n    setMarkLine(markLine);\n    setMarkPoint(markPoint);\n  };\n\n  const handleDimensionClick: DoubleOverlapAreaProps['onDimensionClick'] = (e) => {\n    const datum = e.dimensionInfo[0];\n\n    // 根据数据判断\n    if (datum && datum.value >= 2 && datum.value <= 22) {\n      const val = e.dimensionInfo[0].value;\n      const datum = e.dimensionInfo[0].data[1].datum[0];\n\n      if (getSelectVal() === val) {\n        setSelectVal(null);\n      }\n      else {\n        setSelectVal(datum);\n      }\n\n      handleChangeMarkLine();\n    }\n  };\n\n  return (\n    <DoubleOverlapArea\n      {...spec}\n      markLine={markLine}\n      markPoint={markPoint}\n      onDimensionClick={handleDimensionClick}\n      markArea={[\n        {\n          x: 2,\n          x1: 22,\n          zIndex: 1000,\n          area: {\n            style: {\n              fillOpacity: 0,\n              cursor: 'pointer',\n            },\n          },\n        },\n      ]}\n      crosshair={[\n        {\n          xField: {\n            visible: true,\n            line: {\n              type: 'line',\n              width: 1,\n              style: {\n                stroke: colorBlue06,\n              },\n            },\n          },\n          followTooltip: true,\n        },\n        {\n          xField: {\n            visible: true,\n            line: {\n              type: 'rect',\n              width: 24,\n              style: {\n                fill: linearColor,\n              },\n            },\n          } as any,\n          followTooltip: true,\n        },\n\n      ]}\n    />\n  );\n};\n\nexport default Example;\n"})})}),(0,t.jsx)(i.default,{})]})]})}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(d,e)})):d(e)}let v=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["custom%2FDoubleOverlapArea.mdx"]={toc:[],title:"DoubleOverlapArea",headingTitle:"DoubleOverlapArea",frontmatter:{}}},36426:function(e,n,a){a.r(n),a.d(n,{default:()=>u});var t=a(52676),l=a(89851);let u=function(){return(0,t.jsx)(l.k4,{title:{text:"基本示例"},height:400,data:[{values:[{date:0,value:11635},{date:1,value:8730},{date:2,value:6931}]},{values:[{date:2,value:6931},{date:3,value:6850},{date:4,value:5366},{date:5,value:4874},{date:6,value:5347},{date:7,value:41115},{date:8,value:81250},{date:9,value:81437},{date:10,value:103941},{date:11,value:105994},{date:12,value:116688},{date:13,value:118847},{date:14,value:101091},{date:15,value:107977},{date:16,value:129702},{date:17,value:109491},{date:18,value:106720},{date:19,value:52051},{date:20,value:37894},{date:21,value:29828},{date:22,value:21099}]},{values:[{date:22,value:21099},{date:23,value:14170}]}],tooltip:{dimension:{title:{value:e=>`${null==e?void 0:e.date}:00 ~ ${(null==e?void 0:e.date)+1}:00`},content:{key:"出行次数",value:e=>null==e?void 0:e.value}}}})}},12819:function(e,n,a){a.r(n),a.d(n,{default:()=>u});var t=a(52676),l=a(89851);let u=function(){return(0,t.jsx)(l.k4,{title:{text:"数值较小"},height:400,data:[{values:[{date:"Jan",value:0},{date:"Feb",value:0},{date:"Mar",value:0},{date:"Apr",value:0},{date:"May",value:1}]},{values:[{date:"May",value:1},{date:"Jun",value:1}]},{values:[{date:"Jun",value:1},{date:"Jul",value:0},{date:"Aug",value:0},{date:"Sept",value:0}]}],xAxes:{tick:{tickCount:()=>5},label:{formatMethod:e=>`${e}1`}},yAxes:{tick:{tickStep:1},max:5}})}},68478:function(e,n,a){a.r(n),a.d(n,{default:()=>v});var t=a(52676),l=a(61827),u=a(89851),r=a(745),i=a(80316),o=a(75271);let d={gradient:"linear",x0:.5,y0:0,x1:.5,y1:1,stops:[{offset:0,color:"rgba(43,109,229,0.35)"},{offset:1,color:"rgba(43,109,229,0)"}]};function s(e){return{endSymbol:{visible:!1},zIndex:1,line:{style:{stroke:d,lineDash:[0],lineWidth:24}},...e}}let v=function(){let e=o.useRef(),[,n,a]=(0,l.$k)(!0),[,v,c]=(0,l.$k)(null),[m,p]=o.useState([]),[f,h]=o.useState([]);o.useEffect(()=>{e.current&&clearTimeout(e.current)},[]);let k=()=>{let t=c(),l=a(),u=[],o=[];(0,i.D)(t)&&(u.push(s({x:t.date,label:l?{text:"再次点击可取消选中",style:{fill:r.A2},labelBackground:{visible:!0,padding:{top:8,left:12,right:12,bottom:8},style:{fill:r.JA}},dy:-8}:void 0}),s({x:t.date,line:{style:{stroke:r.Rw,lineWidth:1,lineDash:[3,2]}}})),o.push({itemLine:{visible:!0,startSymbol:{visible:!0,size:10,style:{lineWidth:2,fill:"#fff",stroke:"default"}},line:{style:{visible:!1}}},x:t.date,y:t.value})),e.current&&clearTimeout(e.current),l&&(n(!1),e.current=setTimeout(()=>{k()},3e3)),p(u),h(o)};return(0,t.jsx)(u.k4,{title:{text:"事件"},height:400,data:[{values:[{date:0,value:11635},{date:1,value:8730},{date:2,value:6931}]},{values:[{date:2,value:6931},{date:3,value:6850},{date:4,value:5366},{date:5,value:4874},{date:6,value:5347},{date:7,value:41115},{date:8,value:81250},{date:9,value:81437},{date:10,value:103941},{date:11,value:105994},{date:12,value:116688},{date:13,value:118847},{date:14,value:101091},{date:15,value:107977},{date:16,value:129702},{date:17,value:109491},{date:18,value:106720},{date:19,value:52051},{date:20,value:37894},{date:21,value:29828},{date:22,value:21099}]},{values:[{date:22,value:21099},{date:23,value:14170}]}],tooltip:{dimension:{title:{value:e=>`${null==e?void 0:e.date}:00 ~ ${(null==e?void 0:e.date)+1}:00`},content:{key:"出行次数",value:e=>null==e?void 0:e.value}}},markLine:m,markPoint:f,onDimensionClick:e=>{let n=e.dimensionInfo[0];if(n&&n.value>=2&&n.value<=22){let n=e.dimensionInfo[0].value,a=e.dimensionInfo[0].data[1].datum[0];c()===n?v(null):v(a),k()}},markArea:[{x:2,x1:22,zIndex:1e3,area:{style:{fillOpacity:0,cursor:"pointer"}}}],crosshair:[{xField:{visible:!0,line:{type:"line",width:1,style:{stroke:r.Rw}}},followTooltip:!0},{xField:{visible:!0,line:{type:"rect",width:24,style:{fill:d}}},followTooltip:!0}]})}}}]);