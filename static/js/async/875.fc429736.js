/*! For license information please see 875.fc429736.js.LICENSE.txt */
"use strict";(self.webpackChunksensoro_design_charts=self.webpackChunksensoro_design_charts||[]).push([["875"],{3854:function(t,e,i){i.d(e,{T:()=>_});var s=i(4258),r=i(8068),n=i(3885),a=i(8469),o=i(666),l=i(6979);class h extends o.I{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["point","line","area","seriesMark","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","areaLabel"])}transformSpec(t){super.transformSpec(t),(0,l.R2)(t)}}var d=i(5839),u=i(7773),c=i(4224);class p extends d.P{constructor(){super(...arguments),this.transformerConstructor=h,this.type="area",this.seriesType=n.A.area}}p.type="area",p.seriesType=n.A.area,p.transformerConstructor=h,(0,u.jB)(p,c.T);var g=i(1637),m=i(4871),f=i(9006),v=i(1497);let _=(0,f.C)("AreaChart",{type:"area",vchartConstrouctor:s.H},[()=>{(0,r.w)(),a.F.registerChart(p.type,p)},g.U,m.v$,...v.l])},9006:function(t,e,i){i.d(e,{C:()=>M});var s=i(5271),r=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let n=s.createContext(null);n.displayName="ChartContext";var a=i(6082),o=i(9198),l=i(7623),h=i(9730);let d=s.createContext(null);d.displayName="ViewContext";var u=i(6479);let c=t=>{let e=[];return s.Children.forEach(t,t=>{(0,a.Z)(t)||((0,u.isFragment)(t)?e=e.concat(c(t.props.children)):e.push(t))}),e},p={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"},g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{onLegendItemHover:"legendItemHover",onLegendItemUnHover:"legendItemUnHover",onLegendItemClick:"legendItemClick",onLegendFilter:"legendFilter",onLegendSelectedDataChange:"legendSelectedDataChange"}),{onBrushStart:"brushStart",onBrushChange:"brushChange",onBrushEnd:"brushEnd",onBrushClear:"brushClear"}),{onPlayerPlay:"playerPlay",onPlayerPause:"playerPause",onPlayerEnd:"playerEnd",onPlayerChange:"playerChange",onPlayerForward:"playerForward",onPlayerBackward:"playerBackward"}),{onDataZoomChange:"dataZoomChange"}),{onScrollBarChange:"scrollBarChange"}),{onDimensionHover:"dimensionHover",onDimensionClick:"dimensionClick"}),{onInitialized:"initialized",onRendered:"rendered",onRenderFinished:"renderFinished",onAnimationFinished:"animationFinished",onLayoutStart:"layoutStart",onLayoutEnd:"layoutEnd"}),{onDrill:"drill"}),p),m=Object.keys(g).concat(Object.keys(p).map(t=>`${t}Filter`));Object.keys(p),Object.keys(p).reduce((t,e)=>(t[p[e]]=e,t),{});let f=(t,e=p)=>{let i={};return Object.keys(t).forEach(s=>{e[s]&&t[s]&&(i[s]=t[s])}),i},v=(t,e,i,s=p)=>{if(!e&&!i||!t)return!1;let r=i?f(i,s):null,n=e?f(e,s):null;return r&&Object.keys(r).forEach(e=>{n&&n[e]&&n[e]===r[e]||t.off(s[e],r[e])}),n&&Object.keys(n).forEach(i=>{if(!r||!r[i]||r[i]!==n[i]){let r=e[`${i}Filter`];r?t.on(s[i],r,n[i]):t.on(s[i],n[i])}}),!0};var _=i(4154),y=i(3685);let b=`${y.Bq}_REACT_TOOLTIP`;var x=i(967);let S=(t,e,i)=>{let r;if((null==i?void 0:i.tooltipRender)?(r=i.tooltipRender,delete i.tooltipRender):(null==i?void 0:i.children)?r=(t,e,r)=>s.Children.map(i.children,i=>(0,_.Z)(i)?s.cloneElement(i,{tooltipElement:t,actualTooltip:e,params:r}):i):e.tooltipRender&&(r=e.tooltipRender),r){let n;return(null==i?void 0:i.reserveDefaultTooltip)?(n=i.reserveDefaultTooltip,delete i.reserveDefaultTooltip):n=e.reserveDefaultTooltip,Object.assign(Object.assign({},i),{updateElement:(e,i,a)=>{let{changePositionOnly:o}=a;if(!o){if(!n){e.style.width="auto",e.style.height="auto",e.style.minHeight="auto",e.style.padding="0px";for(let t=0;t<e.children.length;t++){let i=e.children[t];i.className!==b&&"none"!==i.style.display&&(i.style.display="none")}}t((0,x.createPortal)(s.createElement("div",{className:b},r(e,i,a)),e))}}})}return i},A=["children","hooks","ref",...m,"vchartConstrouctor","useSyncRender","skipFunctionDiff","onError","onReady","spec","container","options","morphConfig"],k={morph:!1,enableExitAnimation:!1},w=(t,e)=>`${t&&t.type&&(t.type.displayName||t.type.name)}-${e}`,T=t=>{let e={};return c(t.children).map((t,i)=>{let s=t&&t.type&&t.type.parseSpec;if(s&&t.props){let r=s((0,a.Z)(t.props.componentId)?Object.assign(Object.assign({},t.props),{componentId:w(t,i)}):t.props);r.isSingle?e[r.specName]=r.spec:(e[r.specName]||(e[r.specName]=[]),e[r.specName].push(r.spec))}}),e},C=s.forwardRef((t,e)=>{let[i,r]=(0,s.useState)(0),a=(0,s.useRef)({});(0,s.useImperativeHandle)(e,()=>{var t;return null===(t=a.current)||void 0===t?void 0:t.chart});let u=!!t.spec,[p,m]=(0,s.useState)(null),f=(0,s.useRef)(!1),_=(0,s.useRef)((0,o.Z)(t,A)),y=(0,s.useRef)(null),b=s.useRef(null),x=!!t.skipFunctionDiff,[C,M]=(0,s.useState)(null),E=t=>{let e;u&&t.spec?(e=t.spec,(0,l.Z)(t.data)&&(e=Object.assign(Object.assign({},t.spec),{data:t.data}))):e=Object.assign(Object.assign({},_.current),y.current);let i=S(M,t,e.tooltip);return i&&(e.tooltip=i),e},B=()=>{if(!f.current){if(!a.current||!a.current.chart)return;v(a.current.chart,t,b.current,g);let e=a.current.chart.getCompiler().getVGrammarView();r(i+1),t.onReady&&t.onReady(a.current.chart,0===i),m(e)}};return(0,s.useEffect)(()=>{var e,i,s;let r=u?null:T(t);if(!(null===(e=a.current)||void 0===e?void 0:e.chart))return u||(y.current=r),(t=>{let e=new t.vchartConstrouctor(E(t),Object.assign(Object.assign({},t.options),{onError:t.onError,autoFit:!0,dom:t.container}));a.current=Object.assign(Object.assign({},a.current),{chart:e}),f.current=!1})(t),a.current.chart&&(a.current.chart.renderSync({reuse:!1}),B()),void(b.current=t);if(u)return void((0,h.X)(b.current.spec,t.spec,{skipFunction:x})?b.current.data!==t.data&&(a.current.chart.updateFullDataSync(t.data),B(),b.current=t):(a.current.chart.updateSpecSync(E(t),void 0,null!==(i=t.morphConfig)&&void 0!==i?i:k),B(),b.current=t));let n=(0,o.Z)(t,A);(0,h.X)(n,_.current,{skipFunction:x})&&(0,h.X)(r,y.current)||(_.current=n,y.current=r,a.current.chart.updateSpecSync(E(t),void 0,null!==(s=t.morphConfig)&&void 0!==s?s:k),B(),b.current=t)},[t]),(0,s.useEffect)(()=>()=>{a&&a.current&&a.current.chart&&(a.current.chart.release(),a.current.chart=null),b.current=null,f.current=!0},[]),s.createElement(n.Provider,{value:a.current},s.createElement(d.Provider,{value:p},c(t.children).map((t,e)=>{if("string"==typeof t)return null;let r=w(t,e);return s.createElement(s.Fragment,{key:r},s.cloneElement(t,{updateId:i,componentId:r}))}),C))}),M=(t,e,i)=>{i&&i.length&&e.vchartConstrouctor&&e.vchartConstrouctor.useRegisters(i);let n=function(t,e="ChartContainer",i){let n=s.forwardRef((e,n)=>{let a=(0,s.useRef)(),[o,l]=(0,s.useState)(!1),{className:h,style:d,width:u}=e,c=r(e,["className","style","width"]);return(0,s.useLayoutEffect)(()=>{l(!0)},[]),s.createElement("div",{ref:a,className:h,style:Object.assign({position:"relative",height:e.height||"100%",width:e.width||"100%"},d)},o?s.createElement(t,Object.assign({ref:n,container:a.current},i?i(c):c)):s.createElement(s.Fragment,null))});return n.displayName=e||t.name,n}(C,t,t=>e?Object.assign(t,e):t);return n.displayName=t,n}},3228:function(t,e,i){i.d(e,{h:()=>tt});var s=i(4258),r=i(5839),n=i(8469),a=i(4154),o=i(1130),l=i(5507),h=i(6979),d=i(4218);class u extends l.w{_getDefaultSeriesSpec(t){let e=super._getDefaultSeriesSpec(t);return delete e.data,e}_transformAxisSpec(t){t.axes&&t.autoBandSize&&t.series.forEach((e,i)=>{var s;if("bar"===e.type){let r=this._findBandAxisBySeries(e,i,t.axes);if(r&&!r.bandSize&&!r.maxBandSize&&!r.minBandSize){let t=(0,a.Z)(e.autoBandSize)&&null!==(s=e.autoBandSize.extend)&&void 0!==s?s:0,{barMaxWidth:i,barMinWidth:n,barWidth:o,barGapInGroup:l}=e;this._applyAxisBandSize(r,t,{barMaxWidth:i,barMinWidth:n,barWidth:o,barGapInGroup:l})}}})}transformSpec(t){if(super.transformSpec(t),t.series&&t.series.length){let e=this._getDefaultSeriesSpec(t);t.series.forEach(t=>{this._isValidSeries(t.type)&&Object.keys(e).forEach(i=>{i in t||(t[i]=e[i])})})}t.axes&&t.axes.length&&t.axes.forEach(e=>{(0,o.Z)(e,"trimPadding")&&(0,d.H)(e,(0,h.Sh)(this.type,t))}),this._transformAxisSpec(t)}}var c=i(4224),p=i(7773);class g extends r.P{constructor(){super(...arguments),this.transformerConstructor=u,this.type="common"}}g.type="common",g.transformerConstructor=u,(0,p.jB)(g,c.T);var m=i(7501),f=i(1532),v=i(5103),_=i(6818),y=i(9026),b=i(1637),x=i(4871),S=i(8068),A=i(3418),k=i(9208),w=i(3685),T=i(5287),C=i(9038),M=i(7636),E=i(6082),B=i(1601),O=i(9904);let I=t=>"string"==typeof t&&!isNaN(Number(t))&&!isNaN(parseFloat(t));var R=i(7623),P=i(9231),L=i(3885),D=i(5208),Z=i(5173);let F=[10,20],j=Z._f.Linear,H="circle",z=Z._f.Ordinal,N=["circle","square","triangle","diamond","star"];var V=i(208),U=i(4380);let G=(t,e)=>"fadeIn"===e?{type:"fadeIn"}:{type:"scaleIn"},W=()=>{n.F.registerAnimation("scatter",(t,e)=>Object.assign({appear:G(0,e)},U.tF))};var X=i(3679);let Y=Object.assign(Object.assign({},i(4331).UI),{point:{name:"point",type:"symbol"}});var $=i(9540);class K extends $.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"point")}}var q=i(4498);class J extends T.i{constructor(){super(...arguments),this.type=L.A.scatter,this.transformerConstructor=K,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(t,e,{defaultScaleType:i,defaultRange:s},r){var n,o,l,h;if((0,C.Z)(e))return e;if((0,M.Z)(e)){if((0,E.Z)(t))return null===(n=this._option)||void 0===n||n.onError(`${r}Field is required.`),e;if("ordinal"!==i&&e.length>2)return null===(o=this._option)||void 0===o||o.onError(`${r} length is invalid, specify up to 2 ${r}s.`),e;let s=`${w.Bq}_series_scatter_${this.id}_scale_${r}`;return this._option.globalScale.registerModelScale({id:s,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:e}),{scale:s,field:t}}if((0,a.Z)(e)){if((0,E.Z)(t))return null===(l=this._option)||void 0===l||l.onError(`${r}Field is required.`),e;let n=Object.assign({id:`${w.Bq}_series_scatter_${this.id}_scale_${r}`,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:s},e);return this._option.globalScale.registerModelScale(n),{scale:n.id,field:t}}return null===(h=this._option)||void 0===h||h.onError(`${r} attribute is invalid.`),e}getSizeAttribute(t,e){return(0,E.Z)(e)?10:(0,B.Z)(e)?e:(0,O.Z)(e)&&I(e)?parseFloat(e):this._getSeriesAttribute(t,e,{defaultScaleType:j,defaultRange:F},"size")}getShapeAttribute(t,e){return(0,E.Z)(e)?H:(0,O.Z)(e)?e:this._getSeriesAttribute(t,e,{defaultScaleType:z,defaultRange:N},"shape")}initMark(){var t,e;this._symbolMark=this._createMark(J.mark.point,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:null===(t=this._spec.point)||void 0===t?void 0:t.stateSort},{progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold,morph:(0,V.yx)(this._spec,J.mark.point.name),morphElementKey:this.getDimensionField()[0],setCustomizedShape:null===(e=this._spec.point)||void 0===e?void 0:e.customShape})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var t,e,i;let s=(0,q.mh)(this),r=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;this._symbolMark.setAnimationConfig((0,V._8)(null===(i=n.F.getAnimationInKey("scatter"))||void 0===i?void 0:i({},r),(0,V.hT)("point",this._spec,this._markAttributeContext),s))}initSymbolMarkStyle(){let t=this._symbolMark;t&&("zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:(0,B.Z)(this._size)||(0,C.Z)(this._size)?this._size:10,symbolType:(0,O.Z)(this._shape)||(0,C.Z)(this._shape)?this._shape:H},D.q.STATE_NORMAL,P.W.Series),((0,R.Z)(this._sizeField)||(0,R.Z)(this._size))&&this.setMarkStyle(t,{size:this.getSizeAttribute(this._sizeField,this._size)},D.q.STATE_NORMAL,P.W.User_Mark),((0,R.Z)(this._shapeField)||(0,R.Z)(this._shape))&&this.setMarkStyle(t,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},D.q.STATE_NORMAL,P.W.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t);let e=[this.getDimensionField()[0],this.getStackValueField()].every(t=>{var e,i,s;return t&&(null===(s=null===(i=null===(e=this.getViewDataStatistics())||void 0===e?void 0:e.latestData)||void 0===i?void 0:i[t])||void 0===s?void 0:s.allValid)});"zero"===this._invalidType||e?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",P.W.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",P.W.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},D.q.STATE_NORMAL,P.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},D.q.STATE_NORMAL,P.W.Series))}handleZoom(t){var e,i;this.getMarksWithoutRoot().forEach(t=>{let e=t.getProduct();e&&e.elements&&e.elements.length&&e.elements.forEach((t,e)=>{let i=t.getGraphicItem(),s=t.getDatum(),r=this.dataToPosition(s);r&&i&&i.translateTo(r.x,r.y)})});let s=null===(i=null===(e=this._labelMark)||void 0===e?void 0:e.getComponent())||void 0===i?void 0:i.getProduct();s&&s.evaluate(null,null)}handlePan(t){this.handleZoom(t)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}J.type=L.A.scatter,J.mark=Y,J.transformerConstructor=K;var Q=i(168);let tt=(0,i(9006).C)("CommonChart",{type:"common",vchartConstrouctor:s.H},[()=>{n.F.registerChart(g.type,g)},m.E,f.N,v.w,_.K,y.i,b.U,x.v$,S.w,A.QD,k.i,()=>{(0,X.Ou)(),W(),(0,f.N)(),(0,m.E)(),n.F.registerSeries(J.type,J)},Q.iA])},8940:function(t,e,i){i.d(e,{w:()=>v});var s=i(4258),r=i(3885),n=i(9208),a=i(8469),o=i(666),l=i(6979);class h extends o.I{_getDefaultSeriesSpec(t){var e;let i=super._getDefaultSeriesSpec(t,["point","line","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","lineLabel"]);return i.seriesMark=null!==(e=t.seriesMark)&&void 0!==e?e:"line",i}transformSpec(t){super.transformSpec(t),(0,l.R2)(t)}}var d=i(5839),u=i(4224),c=i(7773);class p extends d.P{constructor(){super(...arguments),this.transformerConstructor=h,this.type="line",this.seriesType=r.A.line}}p.type="line",p.seriesType=r.A.line,p.transformerConstructor=h,(0,c.jB)(p,u.T);var g=i(1637),m=i(9006),f=i(1497);let v=(0,m.C)("LineChart",{type:"line",vchartConstrouctor:s.H},[()=>{(0,n.i)(),a.F.registerChart(p.type,p)},g.U,...f.l])},7168:function(t,e,i){i.d(e,{u:()=>te});var s=i(4258),r=i(168),n=i(3885),a=i(5839),o=i(4546),l=i(7623),h=i(6082),d=i(7636),u=i(5507);class c extends u.w{_isValidSeries(t){return!this.seriesType||t===this.seriesType}getIndicatorSpec(t){var e,i,s;let r=(0,o.IX)(t.indicator),n=null!==(e=t.innerRadius)&&void 0!==e?e:null===(s=null===(i=t.series)||void 0===i?void 0:i[0])||void 0===s?void 0:s.innerRadius;return(0,l.Z)(n)&&r.forEach(t=>{(0,h.Z)(t.limitRatio)&&(t.limitRatio=n)}),r}_getDefaultSeriesSpec(t,e){return super._getDefaultSeriesSpec(t,["radius","outerRadius","innerRadius","startAngle","endAngle","sortDataByAxis"],e)}transformSpec(t){super.transformSpec(t),(0,d.Z)(t.dataZoom)&&t.dataZoom.length>0&&t.dataZoom.forEach(t=>{"axis"===t.filterMode&&(t.filterMode="filter")}),this.transformSeriesSpec(t),(0,l.Z)(t.indicator)&&(t.indicator=this.getIndicatorSpec(t))}}class p extends c{needAxes(){return!1}_getDefaultSeriesSpec(t){var e;let i=super._getDefaultSeriesSpec(t,["center","centerOffset","cornerRadius","padAngle","minAngle","emptyPlaceholder","showAllZero","supportNegative","layoutRadius"]);return i.categoryField=t.categoryField||t.seriesField,i.valueField=t.valueField||t.angleField,i.emptyCircle=null===(e=t.emptyPlaceholder)||void 0===e?void 0:e.emptyCircle,i}}class g extends a.P{constructor(){super(...arguments),this.transformerConstructor=p}}g.transformerConstructor=p;var m=i(8469);class f extends g{constructor(){super(...arguments),this.transformerConstructor=p,this.type="pie",this.seriesType=n.A.pie}}f.type="pie",f.seriesType=n.A.pie,f.transformerConstructor=p;var v=i(1637),_=i(6338),y=i(6542),b=i(7602),x=i(8746),S=i(4218),A=i(123),k=i(1960),w=i(9198),T=i(9730),C=i(9038);let M=(t,e)=>{let{datum:i,title:s,content:r}=e,n=[],a=i.call(null);return s.visible&&n.push({type:"title",index:0,datum:a,spec:s}),(0,o.IX)(r).forEach((t,e)=>{t.visible&&n.push({type:"content",index:e,datum:a,spec:t})}),n};var E=i(6358),B=i(3558),O=i(325),I=i(1130),R=i(8378),P=i(3e3),L=i(8144);let D={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};var Z=i(9367),F=i(5757),j=i(4683);(0,Z.M)(),(0,F.g)(),(0,j.v)();class H extends P.k{constructor(){super(...arguments),this.name="indicator"}_renderText(t,e,i,s,r,n){if(!1!==e.visible){let a=(0,O.Z)({},(0,I.Z)(D,r),e.style,{visible:e.visible});a.lineHeight=(0,l.Z)(a.lineHeight)?a.lineHeight:a.fontSize,e.formatMethod&&(a._originText=a.text,a.text=e.formatMethod(a.text,a));let o=(0,L.vS)(a);return o.name=n,t.appendChild(o),e.autoFit&&(0,R.Z)(i)&&this._setLocalAutoFit(i,o,e),e.autoLimit&&(0,R.Z)(s)&&o.setAttribute("maxLineWidth",i),o}}render(){var t,e;if(this.removeAllChild(!0),!0!==this.attribute.visible)return;let{title:i={},content:s,size:r,limitRatio:n=1/0}=this.attribute,a=Math.min(r.width,r.height)*n,h=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1,pickable:null===(t=this.attribute.pickable)||void 0===t||t},"group");if((0,l.Z)(i)&&(this._title=this._renderText(h,i,a,n,"title.style","indicator-title")),(0,l.Z)(s)){let t=(0,o.IX)(s),e=[];t.forEach((t,i)=>{!1!==t.visible&&e.push(this._renderText(h,t,a,n,"content.style","indicator-content-"+i))}),this._content=e}this._setGlobalAutoFit(a),this._setYPosition();let d=null!==(e=null==h?void 0:h.AABBBounds.height())&&void 0!==e?e:0;h.setAttribute("y",r.height/2-d/2),h.setAttribute("x",r.width/2)}_setLocalAutoFit(t,e,i){var s,r,n,a,o,h,d,u,c;if("default"!==(null!==(s=i.fitStrategy)&&void 0!==s?s:"default"))return;let p=(0,L.fe)(null!==(n=null===(r=i.style)||void 0===r?void 0:r.text)&&void 0!==n?n:"",null!==(a=i.style)&&void 0!==a?a:{},null===(h=null===(o=this.stage)||void 0===o?void 0:o.getTheme())||void 0===h?void 0:h.text).width;if(p>0){let s=t*(null!==(d=i.fitPercent)&&void 0!==d?d:.5)/p,r=Math.floor((null!==(c=null===(u=i.style)||void 0===u?void 0:u.fontSize)&&void 0!==c?c:20)*s);e.setAttribute("fontSize",r),e.setAttribute("lineHeight",(0,l.Z)(i.style.lineHeight)?i.style.lineHeight:r)}}_setGlobalAutoFit(t){var e,i,s,r,n,a,h;let d=[],u=0,c=null!==(e=this.attribute.title)&&void 0!==e?e:{};c.autoFit&&"inscribed"===c.fitStrategy?(this._title.setAttribute("fontSize",12),d.push({text:this._title,spec:null!==(i=this.attribute.title)&&void 0!==i?i:{}})):u+=null!==(a=null===(n=null===(r=null===(s=this._title)||void 0===s?void 0:s.AABBBounds)||void 0===r?void 0:r.height)||void 0===n?void 0:n.call(r))&&void 0!==a?a:0;let p=null!==(h=c.space)&&void 0!==h?h:0;if(u+=p,(0,o.IX)(this.attribute.content).filter(t=>!1!==t.visible).forEach((t,e)=>{var i,s,r,n;let a=this._content[e];t.autoFit&&"inscribed"===t.fitStrategy?(a.setAttribute("fontSize",12),d.push({text:a,spec:t})):u+=null!==(r=null===(s=null===(i=null==a?void 0:a.AABBBounds)||void 0===i?void 0:i.height)||void 0===s?void 0:s.call(i))&&void 0!==r?r:0;let o=null!==(n=t.space)&&void 0!==n?n:0;u+=o}),d.length<=0)return;let g=12/d.reduce((t,e)=>Math.max(t,e.text.AABBBounds.width()),0)*d.length,m=u/2,f=g**2+1,v=2*m*g,_=2*((-v+Math.sqrt(v**2-4*f*(m**2-(t/2)**2)))/(2*f)*g+m),y=(_-u)/d.length;(0,R.Z)(_)&&d.forEach(t=>{var e;let i=null===(e=t.spec.style)||void 0===e?void 0:e.lineHeight;t.text.setAttribute("fontSize",y),t.text.setAttribute("lineHeight",(0,l.Z)(i)?i:y)})}_setYPosition(){var t,e,i,s,r,n;let a=0,l=null!==(s=null===(i=null===(e=null===(t=this._title)||void 0===t?void 0:t.AABBBounds)||void 0===e?void 0:e.height)||void 0===i?void 0:i.call(e))&&void 0!==s?s:0,h=null!==(n=null===(r=this.attribute.title)||void 0===r?void 0:r.space)&&void 0!==n?n:0;(0,o.IX)(this.attribute.content).filter(t=>!1!==t.visible).forEach((t,e)=>{var i;let s=this._content[e];s.setAttribute("y",l+h+a);let r=null!==(i=t.space)&&void 0!==i?i:0;a+=s.AABBBounds.height()+r})}}var z=i(2096),N=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class V extends x.H{constructor(){super(...arguments),this.type=b.L.indicator,this.name=b.L.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=y.Ai.Indicator,this.layoutLevel=y.pM.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(t){return(0,z.ts)(t,this.specKey,this.type,t=>t&&!1!==t.visible)}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=(0,o.IX)(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex((0,o.IX)(this._spec.regionId),(0,o.IX)(this._spec.regionIndex))}onRender(t){}changeRegions(t){}initEvent(){var t;if(this._option.disableTriggerEvent||"none"===this._spec.trigger)return;let e=null===(t=this.getCompiler())||void 0===t?void 0:t.getVGrammarView();e&&("hover"===this._spec.trigger?(e.addEventListener("element-highlight:start",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(t.elements[0].getDatum())}),e.addEventListener("element-highlight:reset",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(null)})):(e.addEventListener("element-select:start",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(t.elements[0].getDatum())}),e.addEventListener("element-select:reset",t=>{this.isRelativeModel(t.options.regionId)&&this.updateDatum(null)})))}updateDatum(t){this._activeDatum=t,this._displayData.updateData();let e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e)}initData(){(0,E.U)(this._option.dataSet,"indicatorFilter",M);let t=new _.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});t.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),t.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new B.O(this._option,t)}updateLayoutAttribute(){let t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t),super.updateLayoutAttribute()}_getIndicatorAttrs(){if(!1===this._spec.visible||!1===this._spec.fixed&&null===this._activeDatum)return{visible:!1};let t=this._regions[0],{width:e,height:i}=t.getLayoutRect(),{x:s,y:r}=t.getLayoutStartPoint(),n=this._spec,{content:a,offsetX:h,offsetY:d,limitRatio:u,title:c}=n,p=N(n,["content","offsetX","offsetY","limitRatio","title"]),g=[];return(0,o.IX)(a).forEach(t=>{let e=(0,S.H)({},this._theme.content,t);g.push({visible:!1!==e.visible&&(!e.field||null!==this._activeDatum),space:e.space||this._gap,autoLimit:e.autoLimit,autoFit:e.autoFit,fitPercent:e.fitPercent,fitStrategy:e.fitStrategy,style:Object.assign(Object.assign({},(0,A.ko)((0,w.Z)(e.style,["text"]),this._activeDatum)),{text:this._createText(e.field,e.style.text)})})}),Object.assign({visible:!0,size:{width:e,height:i},zIndex:this.layoutZIndex,x:s,y:r,dx:h?(0,k.uj)(h,this._computeLayoutRadius()):0,dy:d?(0,k.uj)(d,this._computeLayoutRadius()):0,limitRatio:u||1/0,title:{visible:!1!==c.visible&&(!(0,l.Z)(c.field)||null!==this._activeDatum),space:c.space||this._gap,autoLimit:c.autoLimit,autoFit:c.autoFit,fitPercent:c.fitPercent,fitStrategy:c.fitStrategy,style:Object.assign(Object.assign({},(0,A.ko)((0,w.Z)(c.style,["text"]),this._activeDatum)),{text:this._createText(c.field,c.style.text)})},content:g},p)}_createOrUpdateIndicatorComponent(t){if(!1===t.visible)return this._indicatorComponent&&this._indicatorComponent.parent&&this._indicatorComponent.parent.removeChild(this._indicatorComponent),void(this._indicatorComponent=null);if(this._indicatorComponent)(0,T.X)(t,this._cacheAttrs)||this._indicatorComponent.setAttributes(t);else{let e=this.getContainer(),i=new H(t);i.name="indicator",e.add(i),this._indicatorComponent=i,this._indicatorComponent.on("*",(t,e)=>this._delegateEvent(this._indicatorComponent,t,e))}this._cacheAttrs=t}_createText(t,e){var i;return t?this._activeDatum?this._activeDatum[t]:"":(0,C.Z)(e)?null!==(i=e(this._activeDatum,void 0))&&void 0!==i?i:"":null!=e?e:""}_computeLayoutRadius(){let{width:t,height:e}=this._regions[0].getLayoutRect();return Math.min(t/2,e/2)}isRelativeModel(t){return this._regions.some(e=>e.id===t)}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}}V.type=b.L.indicator,V.specKey="indicator";var U=i(9006),G=i(7484),W=i(4159),X=i(7694),Y=i(5014),$=i(7378),K=i(5022),q=i(3127),J=i(1646),Q=i(7645);let tt=[G.dz,W.B,X.M,Y.v,$.T,K.A,q.U,J.BF,Q._],te=(0,U.C)("PieChart",{type:"pie",vchartConstrouctor:s.H},[()=>{(0,r.iA)(),m.F.registerChart(f.type,f)},v.U,()=>{m.F.registerComponent(V.type,V)},...tt])},8306:function(t,e,i){i.d(e,{Q:()=>P});var s=i(4258),r=i(3885),n=i(8469),a=i(3418),o=i(6264),l=i(5595),h=i(9231),d=i(208),u=i(1889);class c extends u.O{constructor(){super(...arguments),this._getMeasureData=t=>"horizontal"===this.series.getSpec().direction?t[this.series.getSpec().xField[0]]+"-"+t[this.series.getSpec().xField[1]]:t[this.series.getSpec().yField[0]]+"-"+t[this.series.getSpec().yField[1]]}}var p=i(4380);let g=t=>({type:"growCenterIn",options:{direction:"horizontal"===t.direction?"x":"y"}}),m={type:"fadeIn"},f=t=>({type:"growCenterOut",options:{direction:"horizontal"===t.direction?"x":"y"}}),v=()=>{n.F.registerAnimation("rangeColumn",(t,e)=>({appear:"fadeIn"===e?m:g(t),enter:g(t),exit:f(t),disappear:f(t)}))};var _=i(6843);let y=Object.assign(Object.assign({},_.w),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});Object.assign(Object.assign({},_.S),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});var b=i(4498),x=i(3610);class S extends x.w{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){var e;"bothEnd"!==(null===(e=t.label)||void 0===e?void 0:e.position)&&this._addMarkLabelSpec(t,"bar")}}var A=i(1532),k=i(7501);class w extends a.QG{constructor(){super(...arguments),this.type=r.A.rangeColumn,this._barMarkType="rect",this._barName=r.A.bar,this.transformerConstructor=S}initMark(){var t,e,i,s,r,n,a,o,l,h;this._initBarBackgroundMark();let u=null===(t=this._spec.label)||void 0===t?void 0:t.position;this._barMark=this._createMark(w.mark.bar,{groupKey:this._seriesField,isSeriesMark:!0,stateSort:null===(e=this._spec.bar)||void 0===e?void 0:e.stateSort},{setCustomizedShape:null===(i=this._spec.bar)||void 0===i?void 0:i.customShape,morph:(0,d.yx)(this._spec,w.mark.bar.name),morphElementKey:this.getDimensionField()[0]}),!1!==(null===(s=this._spec.label)||void 0===s?void 0:s.visible)&&"bothEnd"===u&&(!1!==(null===(n=null===(r=this._spec.label)||void 0===r?void 0:r.minLabel)||void 0===n?void 0:n.visible)&&(this._minLabelMark=this._createMark(w.mark.minLabel,{markSpec:null===(a=this._spec.label)||void 0===a?void 0:a.minLabel})),!1!==(null===(l=null===(o=this._spec.label)||void 0===o?void 0:o.maxLabel)||void 0===l?void 0:l.visible)&&(this._maxLabelMark=this._createMark(w.mark.maxLabel,{markSpec:null===(h=this._spec.label)||void 0===h?void 0:h.maxLabel})))}initMarkStyle(){var t,e;super.initMarkStyle(),this._initLabelMarkPos(this._minLabelMark,null===(t=this._spec.label)||void 0===t?void 0:t.minLabel,0,"end"),this._initLabelMarkPos(this._maxLabelMark,null===(e=this._spec.label)||void 0===e?void 0:e.maxLabel,1,"start")}_initLabelMarkPos(t,e,i,s){var r,n,a,o,l,d,u,c,p;if(t){this.setMarkStyle(t,{fill:null!==(n=null===(r=null==e?void 0:e.style)||void 0===r?void 0:r.fill)&&void 0!==n?n:this.getColorAttribute(),text:t=>{let s="horizontal"===this._spec.direction?t[this._spec.xField[i]]:t[this._spec.yField[i]];return(null==e?void 0:e.formatMethod)?e.formatMethod(s,t):s}});let g=null!==(a=null==e?void 0:e.position)&&void 0!==a?a:s,m=null!==(o=null==e?void 0:e.offset)&&void 0!==o?o:"vertical"===this._direction?-20:-25;l=t=>this._barMark.getAttribute("x",t),d=t=>"vertical"===this._direction?this._barMark.getAttribute("x",t)+this._barMark.getAttribute("width",t):this._barMark.getAttribute("x1",t),u=t=>this._barMark.getAttribute("y",t),c=t=>"vertical"===this._direction?this._barMark.getAttribute("y1",t):this._barMark.getAttribute("y",t)+this._barMark.getAttribute("height",t),p=()=>this._direction,this.setMarkStyle(t,{textAlign:t=>{if("vertical"===p())return"center";let e=l(t),i=d(t);if("middle"===g)return"center";if(e>=i){if("start"===g)return"left";if("end"===g)return"right";if("outside"===g)return"left"}else{if("start"===g)return"right";if("end"===g)return"left";if("outside"===g)return"right"}return"center"},textBaseline:t=>{if("horizontal"===p())return"middle";let e=u(t),i=c(t);if("middle"===g)return"middle";if(i>=e){if("start"===g)return"bottom";if("end"===g)return"top";if("outside"===g)return"bottom"}else{if("start"===g)return"top";if("end"===g)return"bottom";if("outside"===g)return"top"}return"middle"}}),this.setMarkStyle(t,{x:t=>{let e=p(),i=l(t),s=d(t);if("vertical"===e||"middle"===g)return(i+s)/2;if(i>=s){if("start"===g)return s+m;if("end"===g)return i-m;if("outside"===g)return i+m}else{if("start"===g)return s-m;if("end"===g)return i+m;if("outside"===g)return i-m}return(i+s)/2},y:t=>{let e=p(),i=u(t),s=c(t);if("horizontal"===e||"middle"===g)return(i+s)/2;if(i>=s){if("start"===g)return s+m;if("end"===g)return i-m;if("outside"===g)return i+m}else{if("start"===g)return s-m;if("end"===g)return i+m;if("outside"===g)return i-m}return(i+s)/2}},"normal",h.W.Series)}}initLabelMarkStyle(t){t&&(this.setMarkStyle(t,{text:t=>{let e,i;return"horizontal"===this._spec.direction?(e=t[this._spec.xField[0]],i=t[this._spec.xField[1]]):(e=t[this._spec.yField[0]],i=t[this._spec.yField[1]]),e+"-"+i},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=t)}_dataToPosX(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var t,e,i,s,r;let a=(0,b.mh)(this),o=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;this._barMark.setAnimationConfig((0,d._8)(null===(i=n.F.getAnimationInKey("rangeColumn"))||void 0===i?void 0:i({direction:this.direction},o),(0,d.hT)("bar",this._spec,this._markAttributeContext),a)),this._minLabelMark&&this._minLabelMark.setAnimationConfig((0,d._8)(null===(s=n.F.getAnimationInKey("fadeInOut"))||void 0===s?void 0:s(),(0,d.hT)("label",this._spec,this._markAttributeContext),a)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig((0,d._8)(null===(r=n.F.getAnimationInKey("fadeInOut"))||void 0===r?void 0:r(),(0,d.hT)("label",this._spec,this._markAttributeContext),a))}initTooltip(){this._tooltipHelper=new c(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}w.type=r.A.rangeColumn,w.mark=y,w.transformerConstructor=S;let T=()=>{(0,o.Y)(),(0,l.k)(),v(),(0,p.wy)(),(0,A.N)(),(0,k.E)(),n.F.registerSeries(w.type,w)};var C=i(666),M=i(6979);class E extends C.I{_getDefaultSeriesSpec(t){var e,i;let s=super._getDefaultSeriesSpec(t,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar"]);return"horizontal"===t.direction?s.xField=null!==(e=t.xField)&&void 0!==e?e:[t.minField,t.maxField]:s.yField=null!==(i=t.yField)&&void 0!==i?i:[t.minField,t.maxField],s}transformSpec(t){super.transformSpec(t),(0,M.R2)(t)}}var B=i(5839);class O extends B.P{constructor(){super(...arguments),this.transformerConstructor=E,this.type="rangeColumn",this.seriesType=r.A.rangeColumn}}O.type="rangeColumn",O.seriesType=r.A.rangeColumn,O.transformerConstructor=E;var I=i(1637),R=i(1497);let P=(0,i(9006).C)("RangeColumnChart",{type:"rangeColumn",vchartConstrouctor:s.H},[()=>{T(),n.F.registerChart(O.type,O)},I.U,...R.l])},1497:function(t,e,i){i.d(e,{l:()=>ia});var s,r,n,a,o,l,h,d,u,c,p,g,m=i(7484),f=i(4159),v=i(7694),_=i(5014),y=i(7501),b=i(1532),x=i(5103),S=i(6818),A=i(9026),k=i(3722),w=i(9231),T=i(6542),C=i(8746),M=i(7602),E=i(8612),B=i(7578),O=i(2937),I=i(6689),R=i(325),P=i(4546),L=i(8654);function D(t,e,i){let s=0,r=t[0];if(!r)return!1;for(let n=1;n<t.length;n++){let a=t[n];s+=Z(r.x,r.y,a.x,a.y,e,i),r=a}let n=t[0];return F(r.x,n.x)&&F(r.y,n.y)||(s+=Z(r.x,r.y,n.x,n.y,e,i)),0!==s}function Z(t,e,i,s,r,n){if(n>e&&n>s||n<e&&n<s||s===e)return 0;let a=(n-e)/(s-e),o=s<e?1:-1;1!==a&&0!==a||(o=s<e?.5:-.5);let l=a*(i-t)+t;return l===r?1/0:l>r?o:0}function F(t,e){return 1e-8>Math.abs(t-e)}function j(t,e){for(let i=0;i<e.length;i++)if(D(t,e[i].x,e[i].y)||i>0&&function(t,e,i,s,r){for(let n=0,a=r[r.length-1];n<r.length;n++){let o=r[n];if((0,L.Kj)([t,e],[i,s],[o.x,o.y],[a.x,a.y]))return!0;a=o}return!1}(e[i-1].x,e[i-1].y,e[i].x,e[i].y,t))return!0;return!1}var H=i(645),z=i(3e3);(s=h||(h={})).drawStart="drawStart",s.drawEnd="drawEnd",s.drawing="drawing",s.moving="moving",s.moveStart="moveStart",s.moveEnd="moveEnd",s.brushClear="brushClear";let N={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:"pointerup",resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{y1:-1/0,y2:1/0,x1:-1/0,x2:1/0}};var V=i(9367),U=i(4914);let G={debounce:O.Z,throttle:I.Z};(0,V.M)(),(0,U.M)();class W extends z.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,R.Z)({},W.defaultAttributes,t)),this.name="brush",this._activeDrawState=!1,this._cacheDrawPoints=[],this._isDrawedBeforeEnd=!1,this._isDownBeforeUpOutside=!1,this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._onBrushStart=t=>{var e;if(this._outOfInteractiveRange(t))return void(this._isDownBeforeUpOutside=!0);t.stopPropagation();let i=null===(e=this.attribute.brushMoved)||void 0===e||e;this._activeMoveState=i&&this._isPosInBrushMask(t),this._activeDrawState=!this._activeMoveState,this._activeDrawState&&this._initDraw(t),this._activeMoveState&&this._initMove(t)},this._onBrushing=t=>{this._outOfInteractiveRange(t)||((this._activeDrawState||this._activeMoveState)&&t.stopPropagation(),this._activeDrawState&&this._drawing(t),this._activeMoveState&&this._moving(t))},this._onBrushingWithDelay=0===this.attribute.delayTime?this._onBrushing:G[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=t=>{var e;if(!this._activeDrawState&&!this._activeMoveState)return;t.preventDefault();let{removeOnClick:i=!0}=this.attribute;this._activeDrawState&&!this._isDrawedBeforeEnd&&i?((null===(e=this._operatingMask)||void 0===e?void 0:e._AABBBounds.empty())&&this._dispatchEvent(h.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}):(this._activeDrawState&&this._dispatchEvent(h.drawEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}),this._activeMoveState&&this._dispatchEvent(h.moveEnd,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)},this._onBrushClear=t=>{t.preventDefault();let{removeOnClick:e=!0}=this.attribute;this._isDownBeforeUpOutside&&e&&(this._dispatchEvent(h.brushClear,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}),this._container.incrementalClearChild(),this._brushMaskAABBBoundsDict={}),this._activeDrawState=!1,this._activeMoveState=!1,this._isDrawedBeforeEnd=!1,this._isDownBeforeUpOutside=!1,this._operatingMask&&this._operatingMask.setAttribute("pickable",!1)}}_bindBrushEvents(){if(this.attribute.disableTriggerEvent)return;let{trigger:t=N.trigger,updateTrigger:e=N.updateTrigger,endTrigger:i=N.endTrigger,resetTrigger:s=N.resetTrigger}=this.attribute;(0,P.IX)(t).forEach(t=>E.rF.addEventListener(t,this._onBrushStart)),(0,P.IX)(e).forEach(t=>this.stage.addEventListener(t,this._onBrushingWithDelay)),(0,P.IX)(i).forEach(t=>this.stage.addEventListener(t,this._onBrushEnd)),(0,P.IX)(s).forEach(t=>this.stage.addEventListener(t,this._onBrushClear))}_isPosInBrushMask(t){let e=this.eventPosToStagePos(t),i=this._container.getChildren();for(let t=0;t<i.length;t++){let{points:s=[],dx:r=0,dy:n=0}=i[t].attribute;if(D(s.map(t=>({x:t.x+r,y:t.y+n})),e.x,e.y))return this._operatingMask=i[t],!0}return!1}_initDraw(t){let{brushMode:e}=this.attribute,i=this.eventPosToStagePos(t);this._cacheDrawPoints=[i],this._isDrawedBeforeEnd=!1,"single"===e&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(h.drawStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_initMove(t){var e,i;this._cacheMovePoint=this.eventPosToStagePos(t),this._operatingMaskMoveDx=null!==(e=this._operatingMask.attribute.dx)&&void 0!==e?e:0,this._operatingMaskMoveDy=null!==(i=this._operatingMask.attribute.dy)&&void 0!==i?i:0;let{interactiveRange:s}=this.attribute,{minY:r=-1/0,maxY:n=1/0,minX:a=-1/0,maxX:o=1/0}=s,{x1:l,x2:d,y1:u,y2:c}=this._operatingMask.globalAABBBounds;this._operatingMaskMoveRangeX=[a-l,o-d],this._operatingMaskMoveRangeY=[r-u,n-c],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(h.moveStart,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_drawing(t){var e,i;let s=this.eventPosToStagePos(t),{sizeThreshold:r=5,brushType:n}=this.attribute,a=this._cacheDrawPoints.length;if(a>0){let t=null!==(e=this._cacheDrawPoints[this._cacheDrawPoints.length-1])&&void 0!==e?e:{};if(s.x===t.x&&s.y===t.y)return}"polygon"===n||a<=1?this._cacheDrawPoints.push(s):this._cacheDrawPoints[a-1]=s;let o=this._computeMaskPoints();this._operatingMask.setAttribute("points",o);let{x1:l=0,x2:d=0,y1:u=0,y2:c=0}=null===(i=this._operatingMask)||void 0===i?void 0:i._AABBBounds;this._isDrawedBeforeEnd=!this._operatingMask._AABBBounds.empty()&&!!(Math.abs(d-l)>r||Math.abs(u-c)>r),this._isDrawedBeforeEnd&&(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(h.drawing,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t}))}_moving(t){let e=this._cacheMovePoint,i=this.eventPosToStagePos(t);if(i.x===(null==e?void 0:e.x)&&i.y===(null==e?void 0:e.y))return;let s=i.x-e.x,r=i.y-e.y,n=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],s))+this._operatingMaskMoveDx,a=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],r))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:n,dy:a}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(h.moving,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_computeMaskPoints(){let{brushType:t,xRange:e=[0,0],yRange:i=[0,0]}=this.attribute,s=this._cacheDrawPoints[0],r=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return"rect"===t?[s,{x:r.x,y:s.y},r,{x:s.x,y:r.y}]:"x"===t?[{x:s.x,y:i[0]},{x:r.x,y:i[0]},{x:r.x,y:i[1]},{x:s.x,y:i[1]}]:"y"===t?[{x:e[0],y:s.y},{x:e[0],y:r.y},{x:e[1],y:r.y},{x:e[1],y:s.y}]:(0,H.Z)(this._cacheDrawPoints)}_addBrushMask(){var t;let{brushStyle:e,hasMask:i}=this.attribute,s=B.i.polygon(Object.assign(Object.assign({points:(0,H.Z)(this._cacheDrawPoints),cursor:"move",pickable:!1},e),{opacity:i?null!==(t=e.opacity)&&void 0!==t?t:1:0}));s.name=`brush-${Date.now()}`,this._operatingMask=s,this._container.add(s),this._brushMaskAABBBoundsDict[s.name]=s.AABBBounds}_outOfInteractiveRange(t){let{interactiveRange:e}=this.attribute,{minY:i=-1/0,maxY:s=1/0,minX:r=-1/0,maxX:n=1/0}=e,a=this.eventPosToStagePos(t);return a.x>n||a.x<r||a.y>s||a.y<i}eventPosToStagePos(t){return this.stage.eventPointTransform(t)}render(){this._bindBrushEvents();let t=this.createOrUpdateChild("brush-container",{},"group");this._container=t}releaseBrushEvents(){let{delayType:t="throttle",delayTime:e=0,trigger:i=N.trigger,updateTrigger:s=N.updateTrigger,endTrigger:r=N.endTrigger,resetTrigger:n=N.resetTrigger}=this.attribute;(0,P.IX)(i).forEach(t=>E.rF.removeEventListener(t,this._onBrushStart)),(0,P.IX)(s).forEach(t=>this.stage.removeEventListener(t,this._onBrushingWithDelay)),(0,P.IX)(r).forEach(t=>this.stage.removeEventListener(t,this._onBrushEnd)),(0,P.IX)(n).forEach(t=>this.stage.removeEventListener(t,this._onBrushClear))}}W.defaultAttributes=N;var X=i(7623),Y=i(123),$=i(9730),K=i(8469),q=i(2096);class J extends C.H{constructor(){super(...arguments),this.layoutType="none",this.type=M.L.brush,this.name=M.L.brush,this.specKey="brush",this.layoutZIndex=T.Ai.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._needInitOutState=!0,this._cacheInteractiveRangeAttrs=[],this._needDisablePickable=!1,this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}init(){let t=this._transformBrushedMarkAttr(this._spec.inBrush),e=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(i=>{i.getActiveMarks().forEach(s=>{s&&(i.setMarkStyle(s,Object.assign({},t),"inBrush",w.W.Series),i.setMarkStyle(s,Object.assign({},e),"outOfBrush",w.W.Series))})})}static getSpecInfo(t){return(0,q.ts)(t,this.specKey,this.type,t=>!1!==t.visible)}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_extendDataInBrush(t){var e,i;let s=[];for(let r in t)for(let n in t[r])s.push(Object.assign({},null===(i=null===(e=t[r][n])||void 0===e?void 0:e.data)||void 0===i?void 0:i[0]));return s}_extendDatumOutOfBrush(t){var e;let i=[];for(let s in t)i.push(null===(e=t[s].data)||void 0===e?void 0:e[0]);return i}_getBrushInteractiveAttr(t){let e=t.getLayoutStartPoint(),i=t.getLayoutRect(),s=e.x,r=s+i.width,n=e.y,a=n+i.height;return{interactiveRange:{minY:n,maxY:a,minX:s,maxX:r},xRange:[s,r],yRange:[n,a]}}_updateBrushComponent(t,e){let i=this._getBrushInteractiveAttr(t),s=this._brushComponents[e];s.setAttributes(i),this._initMarkBrushState(e,""),s.children[0].removeAllChild(),this._needInitOutState=!0}_createBrushComponent(t,e){var i,s;let r=this._getBrushInteractiveAttr(t),n=new W(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:(0,Y.h_)(null===(i=this._spec)||void 0===i?void 0:i.style)},r),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));n.id=null!==(s=this._spec.id)&&void 0!==s?s:`brush-${this.id}`,this.getContainer().add(n);let{brushMode:a="single"}=this._spec;this._brushComponents.push(n),this._cacheInteractiveRangeAttrs.push(r),n.addEventListener(h.drawStart,e=>{this._emitEvent(k.$7.brushStart,t)}),n.addEventListener(h.moveStart,e=>{this._emitEvent(k.$7.brushStart,t)}),n.addEventListener(h.drawing,i=>{this._needInitOutState&&"single"===a&&this._initMarkBrushState(e,"outOfBrush"),this._needInitOutState=!1,this._needDisablePickable=!0,this._handleBrushChange(k.$7.brushChange,t,i),this._emitEvent(k.$7.brushChange,t)}),n.addEventListener(h.moving,e=>{this._handleBrushChange(k.$7.brushChange,t,e),this._emitEvent(k.$7.brushChange,t)}),n.addEventListener(h.brushClear,i=>{this._initMarkBrushState(e,""),this._needInitOutState=!0,this._needDisablePickable=!1,this._handleBrushChange(k.$7.brushChange,t,i),this._handleBrushChange(k.$7.brushClear,t,i),this._emitEvent(k.$7.brushChange,t),this._emitEvent(k.$7.brushClear,t)}),n.addEventListener(h.drawEnd,e=>{this._needInitOutState=!0,this._needDisablePickable=!1;let{operateMask:i}=e.detail;this._handleBrushChange(k.$7.brushEnd,t,e);let s=this._extendDataInBrush(this._inBrushElementsMap);!this._spec.zoomWhenEmpty&&s.length>0&&this._setAxisAndDataZoom(i,t),this._emitEvent(k.$7.brushEnd,t)}),n.addEventListener(h.moveEnd,e=>{let{operateMask:i}=e.detail;this._handleBrushChange(k.$7.brushEnd,t,e);let s=this._extendDataInBrush(this._inBrushElementsMap);!this._spec.zoomWhenEmpty&&s.length>0&&this._setAxisAndDataZoom(i,t),this._emitEvent(k.$7.brushEnd,t)})}_handleBrushChange(t,e,i){let{operateMask:s}=i.detail;this._reconfigItem(s,e),this._reconfigLinkedItem(s,e)}_emitEvent(t,e){this.event.emit(t,{model:this,value:{operateType:t,operateRegion:e,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord}})}_transformBrushedMarkAttr(t){let e={};return(null==t?void 0:t.symbol)&&(e.symbolType=t.symbol),(null==t?void 0:t.symbolSize)&&(e.size=t.symbolSize),(null==t?void 0:t.color)&&(e.fill=t.color),(null==t?void 0:t.colorAlpha)&&(e.fillOpacity=t.colorAlpha),Object.assign(Object.assign({},(0,Y.h_)(t)),e)}_reconfigItem(t,e){this._itemMap[e.id].forEach(e=>{let i=e.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach(i=>{var s,r,n;let a=i.getGraphicItem(),o=e.id+"_"+i.key;(null===(s=this._outOfBrushElementsMap)||void 0===s?void 0:s[o])&&this._isBrushContainItem(t,a)?(i.addState("inBrush"),this._inBrushElementsMap[null==t?void 0:t.name]||(this._inBrushElementsMap[null==t?void 0:t.name]={}),this._inBrushElementsMap[null==t?void 0:t.name][o]=i,delete this._outOfBrushElementsMap[o]):(null===(n=null===(r=this._inBrushElementsMap)||void 0===r?void 0:r[null==t?void 0:t.name])||void 0===n?void 0:n[o])&&!this._isBrushContainItem(t,a)&&(i.removeState("inBrush"),i.addState("outOfBrush"),this._outOfBrushElementsMap[o]=i,delete this._inBrushElementsMap[t.name][o]),a.setAttribute("pickable",!this._needDisablePickable)})})}_reconfigLinkedItem(t,e){let i=e.getLayoutStartPoint(),s=e.getSeries().map(t=>t.id);this._linkedSeries.forEach(e=>{if(!s.includes(e.id)){let s=e.getRegion().getLayoutStartPoint(),r=s.x-i.x,n=s.y-i.y;this._linkedItemMap[e.id].forEach(e=>{let i=e.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach(i=>{var s,a,o;let l=i.getGraphicItem(),h=e.id+"_"+i.key;(null===(s=this._linkedOutOfBrushElementsMap)||void 0===s?void 0:s[h])&&this._isBrushContainItem(t,l,{dx:r,dy:n})?(i.addState("inBrush"),this._linkedInBrushElementsMap[null==t?void 0:t.name]||(this._linkedInBrushElementsMap[null==t?void 0:t.name]={}),this._linkedInBrushElementsMap[null==t?void 0:t.name][h]=i,delete this._linkedOutOfBrushElementsMap[h]):(null===(o=null===(a=this._linkedInBrushElementsMap)||void 0===a?void 0:a[null==t?void 0:t.name])||void 0===o?void 0:o[h])&&!this._isBrushContainItem(t,l,{dx:r,dy:n})&&(i.removeState("inBrush"),i.addState("outOfBrush"),this._linkedOutOfBrushElementsMap[h]=i),l.setAttribute("pickable",!this._needDisablePickable)})})}})}_isBrushContainItem(t,e,i){var s,r,n;if(!(null==t?void 0:t.globalTransMatrix)||!(null===(s=null==t?void 0:t.attribute)||void 0===s?void 0:s.points))return!1;let a=null!==(n=null===(r=null==t?void 0:t.attribute)||void 0===r?void 0:r.points)&&void 0!==n?n:[],{a:o,b:l,c:h,d:d,e:u,f:c}=t.globalTransMatrix,p=(null==i?void 0:i.dx)||0,g=(null==i?void 0:i.dy)||0,m=a.map(t=>({x:o*t.x+h*t.y+u+p,y:l*t.x+d*t.y+c+g}));t.globalAABBBounds.clone().set(t.globalAABBBounds.x1+p,t.globalAABBBounds.y1+g,t.globalAABBBounds.x2+p,t.globalAABBBounds.y2+g);let f=e.globalTransMatrix.e,v=e.globalTransMatrix.f,_=[];if("symbol"===e.type){let{size:t=0}=null==e?void 0:e.attribute,i=(0,P.IX)(t)[0]/2;return j(m,[{x:f-i,y:v-i},{x:f+i,y:v-i},{x:f+i,y:v+i},{x:f-i,y:v+i}])}if("rect"===e.type){let{x1:t,x2:i,y1:s,y2:r}=null==e?void 0:e.AABBBounds,n=Math.abs(t-i),a=Math.abs(s-r);return j(m,[{x:f,y:v},{x:f+n,y:v},{x:f+n,y:v+a},{x:f,y:v+a}])}return t.globalAABBBounds.intersects(e.globalAABBBounds)}_stateClamp(t){return Math.min(Math.max(0,t),1)}_setAxisAndDataZoom(t,e){var i;if(this._zoomRecord=[],this._spec.zoomAfterBrush){let s=t.AABBBounds;null===(i=this._regionAxisMap["region_"+e.id])||void 0===i||i.forEach(t=>{var i,r;let n="bottom"===t.layoutOrient||"top"===t.layoutOrient,a=null!==(i=this._spec.axisRangeExpand)&&void 0!==i?i:0,{x1:o,x2:l,y1:h,y2:d}=s,u=n?"x":"y",c=n?o:h,p=n?l:d;if(this._axisDataZoomMap[t.id]){let i=this._axisDataZoomMap[t.id],s=i.relatedAxisComponent,r=s.getScale().invert(c-e.getLayoutStartPoint()[u]),n=s.getScale().invert(p-e.getLayoutStartPoint()[u]),o=i.dataToStatePoint(r),l=i.dataToStatePoint(n),h=this._stateClamp(o-a),d=this._stateClamp(l+a);i.setStartAndEnd(Math.min(h,d),Math.max(h,d),["percent","percent"]),this._zoomRecord.push({operateComponent:i,start:h,end:d,startValue:i.statePointToData(h),endValue:i.statePointToData(d)})}else{let i=t.getScale().range(),s=null!==(r=t.getScale().rangeFactor())&&void 0!==r?r:[0,1],n=(0,P.Z$)(i)<i[0],o=c-e.getLayoutStartPoint()[u],l=p-e.getLayoutStartPoint()[u],h=n?Math.min(o,l):Math.max(o,l),d=n?Math.max(o,l):Math.min(o,l),g=(d-i[0])/((0,P.Z$)(i)-i[0])*(s[1]-s[0])+s[0],m=(h-i[0])/((0,P.Z$)(i)-i[0])*(s[1]-s[0])+s[0],f=this._stateClamp(g-a),v=this._stateClamp(m+a);t.getScale().rangeFactor([f,v]),t.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:t,start:f,end:v,startValue:t.getScale().invert(d),endValue:t.getScale().invert(h)})}})}}_bindRegions(){(0,X.Z)(this._spec.regionId)&&(0,X.Z)(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex((0,P.IX)(this._spec.regionId),(0,P.IX)(this._spec.regionIndex))}_bindLinkedSeries(){(0,X.Z)(this._spec.brushLinkSeriesId)&&(0,X.Z)(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex((0,P.IX)(this._spec.brushLinkSeriesId),(0,P.IX)(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){(0,X.Z)(this._spec.axisId)?(0,P.IX)(this._spec.axisId).forEach(t=>{this._releatedAxes.push(this._option.getComponentByUserId(t))}):(0,X.Z)(this._spec.axisIndex)?(0,P.IX)(this._spec.axisIndex).forEach(t=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",t))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(t=>{null==t||t.getRegions().forEach(e=>{this._regionAxisMap["region_"+e.id]?this._regionAxisMap["region_"+e.id].push(t):this._regionAxisMap["region_"+e.id]=[t]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(t=>{t.relatedAxisComponent&&(this._axisDataZoomMap[t.relatedAxisComponent.id]=t)})}_initNeedOperatedItem(){let t=this._spec.seriesId,e=this._spec.seriesIndex;this._relativeRegions.forEach(i=>{let s=[];i.getSeries().forEach(r=>{(t&&(0,P.IX)(t).includes(r.userId.toString())||e&&(0,P.IX)(e).includes(r.getSpecIndex())||!e&&!t)&&s.push(...r.getMarksWithoutRoot()),this._itemMap[i.id]=s})}),this._linkedSeries.forEach(t=>{this._linkedItemMap[t.id]=t.getMarksWithoutRoot()})}_initMarkBrushState(t,e){this._brushComponents.forEach((e,i)=>{i!==t&&e.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach(t=>{t.getMarksWithoutRoot().forEach(t=>{let i=t.getProduct();i&&i.elements&&i.elements.length&&i.elements.forEach(i=>{let s=t.id+"_"+i.key;i.removeState("inBrush"),i.removeState("outOfBrush"),i.addState(e),this._outOfBrushElementsMap[s]=i,this._linkedOutOfBrushElementsMap[s]=i})})})}initEvent(){}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return this._brushComponents}_compareSpec(t,e){this._brushComponents&&this._relativeRegions.forEach((t,e)=>{this._updateBrushComponent(t,e)});let i=super._compareSpec(t,e);return(0,$.X)(e,t)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(t){var e;super.onLayoutEnd(t),!this._option.disableTriggerEvent&&(null===(e=this._spec.visible)||void 0===e||e)&&(this._brushComponents?this._relativeRegions.forEach((t,e)=>{this._updateBrushComponent(t,e)}):(this._brushComponents=[],this._relativeRegions.forEach((t,e)=>{this._createBrushComponent(t,e)})))}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(t=>{t._container.incrementalClearChild()})}clear(){if(this._brushComponents){let t=this.getContainer();this._brushComponents.forEach(e=>{e.removeAllChild(),e.releaseBrushEvents(),t&&t.removeChild(e)}),this._brushComponents=null}}}J.type=M.L.brush,J.specKey="brush";var Q=i(5022),tt=i(1036),te=i(6082),ti=i(1601),ts=i(9038),tr=i(4218),tn=i(9114),ta=i(7636);let to=(t,e)=>{let{getNewDomain:i,isContinuous:s,field:r,originalFields:n}=e,a=r(),o=i();if((0,te.Z)(o)||(0,te.Z)(a))return t;let l=n(),h=(0,ta.Z)(a)?a[0]:a;return t[h]&&l&&l[h]&&l[h].lockStatisticsByDomain&&!s()&&(t[h].values=o),t},tl=(t,e)=>{let{getNewDomain:i,isContinuous:s,field:r}=e,n=r(),a=i();if((0,te.Z)(a)||(0,te.Z)(n))return t;if(0===a.length)return[];let o={};a.forEach(t=>{o[t]||(o[t]=1)});let l=null;return l=s()?t=>{let e=!1;return(0,P.IX)(n).every(i=>{t[i]>=a[0]&&t[i]<=(0,P.Z$)(a)&&(e=!0)}),e}:t=>{let e=!1;return(0,P.IX)(n).every(i=>{(o[t[i]+""]||o[t[i]])&&(e=!0)}),e},t.filter(l)},th=(t,e)=>{let{stateFields:i,valueFields:s,dataCollection:r}=e.input,{stateField:n,valueField:a}=e.output,o={},l=[];return r.forEach((t,e)=>{var r;if((0,te.Z)(i[e]))return;let n=null===(r=t.getFields())||void 0===r?void 0:r[i[e]];n&&n.lockStatisticsByDomain&&n.domain.forEach(t=>{o[t]=0}),t.latestData.forEach(t=>{(0,P.IX)(i[e]).forEach(i=>{(0,te.Z)(t[i])||((0,te.Z)(o[t[i]])&&(o[t[i]]=0),(0,te.Z)(s[e])||(o[t[i]]+=isNaN(parseFloat(t[s[e]]))?1:parseFloat(t[s[e]])))})})}),Object.keys(o).forEach((t,e)=>{let i={[n]:t};a&&(i[a]=o[t]),l.push(i)}),l};var td=i(6358),tu=i(5173),tc=i(1287),tp=i(3881),tg=i(3604),tm=i(8103),tf=i(7773),tv=i(5795),t_=i(6338),ty=i(3558),tb=i(6962),tx=i(7631);class tS{parserScrollEvent(t){return t?!(t.ctrlKey||0===t.deltaY&&0===t.deltaX)&&(t.scrollX=t.deltaX,t.scrollY=t.deltaY,t):t}parserZoomEvent(t){if(!t)return t;let e=Math.pow(1.0005,-t.deltaY*Math.pow(16,t.deltaMode));return t.zoomDelta=e,t.zoomX=t.canvasX,t.zoomY=t.canvasY,t}clearZoom(){}clearScroll(){}clearDrag(){}parserDragEvent(){return!0}}class tA{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0,this.pointerId=null}parserDragEvent(t){return!0}parserZoomEvent(t){let e=t.scale;if(0===this._lastScale)return this._lastScale=e,t;t.zoomDelta=e/this._lastScale;let i=t.center;return t.zoomX=i.x,t.zoomY=i.y,this._lastScale=e,t}parserScrollEvent(t){return t}clearScroll(){}clearDrag(){}}function tk(t){return t===tb.i["desktop-browser"]||t===tb.i["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:tS}:(0,tx.wx)(t)||(0,tx.Oy)(t)?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:tA}:null}let tw={debounce:O.Z,throttle:I.Z};var tT=i(2990);class tC extends C.H{get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(t,e,i=["percent","percent"]){let[s="percent",r="percent"]=i,n="percent"===s?t:this.dataToStatePoint(t),a="percent"===r?e:this.dataToStatePoint(e);this._handleChange(n,a,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(t){this._handleChartZoom({zoomDelta:1.2,zoomX:null==t?void 0:t.x,zoomY:null==t?void 0:t.y})}zoomOut(t){this._handleChartZoom({zoomDelta:.8,zoomX:null==t?void 0:t.x,zoomY:null==t?void 0:t.y})}_handleChange(t,e,i){var s,r;null!==(r=null===(s=this._spec)||void 0===s?void 0:s.zoomLock)&&void 0!==r&&r||e-t!==this._spanCache&&(e-t<this._minSpan||e-t>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=e-t)}_isReverse(){let t=this._relatedAxisComponent;if(!t)return!1;let e=t.getScale();return e.range()[0]>e.range()[1]&&(!t.getInverse()||this._isHorizontal)}_updateRangeFactor(t){let e=this._relatedAxisComponent.getScale(),i=this._isReverse(),s=i?[1-this._end,1-this._start]:[this._start,this._end];if(i)switch(t){case"startHandler":e.rangeFactorEnd(s[1]);break;case"endHandler":e.rangeFactorStart(s[0]);break;default:e.rangeFactorStart(s[0],!0),e.rangeFactorEnd(s[1])}else switch(t){case"startHandler":e.rangeFactorStart(s[0]);break;case"endHandler":e.rangeFactorEnd(s[1]);break;default:e.rangeFactorEnd(s[1],!0),e.rangeFactorStart(s[0])}let r=e.rangeFactor();r?(this._start=i?1-r[1]:r[0],this._end=i?1-r[0]:r[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(t,e){super(t,e),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._shouldChange=!0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:t=>{var e,i;let s=this._relatedAxisComponent;if(s&&"axis"===this._filterMode){let r=s.getScale(),n=s.getSpec();this._auto&&this._getAxisBandSize(n)&&this._spec.ignoreBandSize&&(r.bandwidth("auto"),r.maxBandwidth("auto"),r.minBandwidth("auto")),this._updateRangeFactor(t),this._auto&&(null===(i=null===(e=this._component)||void 0===e?void 0:e.setStartAndEnd)||void 0===i||i.call(e,this._start,this._end)),s.effect.scaleUpdate({value:"force"})}else(0,tn.xV)(this._regions,t=>{var e;null===(e=t.getViewData())||void 0===e||e.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),(0,tn.xV)(this._regions,t=>{t.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(t,e,i)=>{var s,r;return this._startValue=t,this._endValue=e,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),null===(r=(s=this.effect).onZoomChange)||void 0===r||r.call(s,i),!0},this._handleChartZoom=(t,e)=>{var i,s;if(!this._activeRoam||this._zoomAttr.filter&&!this._zoomAttr.filter(t,e))return;let{zoomDelta:r,zoomX:n,zoomY:a}=t,{x:o,y:l}=this._regions[0].getLayoutStartPoint(),{width:h,height:d}=this._regions[0].getLayoutRect(),u=Math.abs(this._start-this._end),c=null!==(s=null===(i=this._spec.roamZoom)||void 0===i?void 0:i.rate)&&void 0!==s?s:1;if(u>=1&&r<1||u<=.01&&r>1)return;let p=this._isHorizontal?n:a,g=u*(r-1)*c,m=g/2,f=g/2;if(p){let t=this._isHorizontal?o:l,e=this._isHorizontal?h:d;m=Math.abs(t-p)/Math.abs(e-t)*g,f=Math.abs(e-p)/Math.abs(e-t)*g}let v=(0,tg.Z)(this._start+m,0,1),_=(0,tg.Z)(this._end-f,0,1);this._handleChange(Math.min(v,_),Math.max(v,_),!0)},this._handleChartScroll=(t,e)=>{var i;if(!this._activeRoam||this._scrollAttr.filter&&!this._scrollAttr.filter(t,e))return!1;let{scrollX:s,scrollY:r}=t,n=this._isHorizontal?s:r,a=this._isHorizontal?(0,tm.Wn)(s/r)>=.5:(0,tm.Wn)(r/s)>=.5;this._scrollAttr.reverse||(n=-n),a&&this._handleChartMove(n,null!==(i=this._scrollAttr.rate)&&void 0!==i?i:1);let o=0!==this._start&&1!==this._end;return a&&o},this._handleChartDrag=(t,e)=>{var i;if(!this._activeRoam||this._dragAttr.filter&&!this._dragAttr.filter(t,e))return;let[s,r]=t,n=this._isHorizontal?s:r;this._dragAttr.reverse&&(n=-n),this._handleChartMove(n,null!==(i=this._dragAttr.rate)&&void 0!==i?i:1)},this._handleChartMove=(t,e)=>{let i=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(t)>=1e-6){if(t>0&&this._end<1){let s=Math.min(1-this._end,t/i)*e;this._handleChange(this._start+s,this._end+s,!0)}else if(t<0&&this._start>0){let s=Math.max(-this._start,t/i)*e;this._handleChange(this._start+s,this._end+s,!0)}}return!1},this._orient=(0,tp.x)(t),this._isHorizontal="horizontal"===(0,tp._Q)(this._orient)}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if((0,X.Z)(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):(0,X.Z)(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),(0,te.Z)(this._spec.field)&&!this._relatedAxisComponent){let t=this._option.getComponentsByKey("axes"),e=t.find(t=>t._orient===this._orient);if(e)this._relatedAxisComponent=e;else{let e=t.find(t=>!(0,tu.z2)(t.getScale().type));this._relatedAxisComponent=e}}this._relatedAxisComponent&&"axis"===this._filterMode&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var t,e;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();let i=this._relatedAxisComponent?null===(e=(t=this._relatedAxisComponent).getBindSeriesFilter)||void 0===e?void 0:e.call(t):null;if((0,X.Z)(i)&&((0,X.Z)(i.userId)&&(this._seriesUserId=(0,P.IX)(i.userId)),(0,X.Z)(i.specIndex)&&(this._seriesIndex=(0,P.IX)(i.specIndex))),(0,X.Z)(this._spec.seriesId)){let t=(0,P.IX)(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(e=>t.includes(e)):this._seriesUserId=t}if((0,X.Z)(this._spec.seriesIndex)){let t=(0,P.IX)(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(e=>t.includes(e)):this._seriesIndex=t}if((0,X.Z)(this._spec.regionIndex)){let t=this._option.getRegionsInIndex((0,P.IX)(this._spec.regionIndex));this._regions=this._regions.filter(e=>t.includes(e))}else if((0,X.Z)(this._spec.regionId)){let t=(0,P.IX)(this._spec.regionId);this._regions=t.length?this._regions.filter(e=>t.includes(e.id)):[]}}onDataUpdate(){var t;let e=this._computeDomainOfStateScale((0,tu.z2)(this._stateScale.type));this._stateScale.domain(e,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&!(0,$.X)(this._domainCache,e)&&(this._domainCache=e,this._dataUpdating=!0,null===(t=this.getChart())||void 0===t||t.setLayoutTag(!0,null,!1))}_computeDomainOfStateScale(t){if(this._spec.customDomain)return this._spec.customDomain;let e=this._data.getLatestData().map(t=>t[this._stateField]);if(t){let t=e.map(t=>1*t);return e.length?[(0,P.iH)(t),(0,P.CE)(t)]:[-1/0,1/0]}return e}_initEvent(){this._initCommonEvent()}_initData(){let t=[],e=[],i=[];if(this._relatedAxisComponent){let s={};(0,tn.xV)(this._regions,r=>{var n,a;let o="cartesian"===r.coordinate?r.getXAxisHelper():"polar"===r.coordinate?r.angleAxisHelper:null,l="cartesian"===r.coordinate?r.getYAxisHelper():"polar"===r.coordinate?r.radiusAxisHelper:null;if(!o||!l)return;let h=o.getAxisId()===this._relatedAxisComponent.id?o:l.getAxisId()===this._relatedAxisComponent.id?l:this._isHorizontal?o:l,d=h===o?l:o,u=(0,tu.z2)(d.getScale(0).type),c=(0,tu.z2)(h.getScale(0).type);t.push(r.getRawData());let p=r.getSpec(),g="cartesian"===r.coordinate?(0,P.IX)(p.xField):(0,P.IX)(null!==(n=p.angleField)&&void 0!==n?n:p.categoryField),m="cartesian"===r.coordinate?(0,P.IX)(p.yField):(0,P.IX)(null!==(a=p.radiusField)&&void 0!==a?a:p.valueField);if(s[r.id]="link"===r.type?["from_xField"]:h===o?g:m,c?e.push(s[r.id]):e.push(s[r.id][0]),this._valueField){let t="link"===r.type?["from_yField"]:d===o?g:m;u&&i.push(...t)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=s}else(0,tn.xV)(this._regions,s=>{t.push(s.getRawData()),e.push(this._field),this._valueField&&i.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});let{dataSet:s}=this._option;(0,td.I)(s,"dataview",tv.i),(0,td.U)(s,"dataFilterComputeDomain",th);let r=new t_.VO(s,{name:`${this.type}_${this.id}_data`});r.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,stateFields:e,valueFields:i},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new ty.O(this._option,r),r.reRunAllTransform(),s.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var t;super.setAttrFromSpec(),!0===this._spec.roamZoom||this._spec.roamZoom?this._zoomAttr=(0,R.Z)({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,!0===this._spec.roamDrag||this._spec.roamDrag?this._dragAttr=(0,R.Z)({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,!0===this._spec.roamScroll||this._spec.roamScroll?this._scrollAttr=(0,R.Z)({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=null===(t=this._spec.visible)||void 0===t||t}statePointToData(t){let e=this._stateScale,i=e.domain();if((0,tu.z2)(e.type))return this._isReverse()?i[0]+((0,P.Z$)(i)-i[0])*(1-t):i[0]+((0,P.Z$)(i)-i[0])*t;let s=e.range();this._isReverse()&&(s=s.slice().reverse());let r=s[0]+((0,P.Z$)(s)-s[0])*t;return e.invert(r)}dataToStatePoint(t){let e=this._stateScale,i=e.scale(t),s=e.range();return!this._isHorizontal&&(0,tu.z2)(e.type)&&(s=s.slice().reverse()),(i-s[0])/((0,P.Z$)(s)-s[0])}_modeCheck(t,e){return"start"===t?"percent"===e&&(0,X.Z)(this._spec.start)||"value"===e&&(0,X.Z)(this._spec.startValue):"percent"===e&&(0,X.Z)(this._spec.end)||"value"===e&&(0,X.Z)(this._spec.endValue)}_setStateFromSpec(){var t,e;let i,s;if(this._auto=!!this._spec.auto,this._spec.rangeMode){let[t,e]=this._spec.rangeMode;this._modeCheck("start",t)&&this._modeCheck("end",e)&&(i="percent"===t?this._spec.start:this.dataToStatePoint(this._spec.startValue),s="percent"===e?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else i=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,s=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this.statePointToData(i),this._endValue=this.statePointToData(s),this._start=i,this._end=s,this._minSpan=null!==(t=this._spec.minSpan)&&void 0!==t?t:0,this._maxSpan=null!==(e=this._spec.maxSpan)&&void 0!==e?e:1,(0,tu.z2)(this._stateScale.type)&&this._stateScale.domain()[0]!==(0,P.Z$)(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/((0,P.Z$)(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/((0,P.Z$)(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&"axis"===this._filterMode||0===this._start&&1===this._end||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(t){var e;return null===(e=this._originalStateFields)||void 0===e?void 0:e[t.id]}_initStateScale(){let t=[0,1];if(this._relatedAxisComponent){let e=this._relatedAxisComponent.getScale(),i=(0,tu.z2)(e.type),s=this._computeDomainOfStateScale(i);if(this._stateScale=e.clone(),i){let e=s.map(t=>1*t);this._stateScale.domain(s.length?[(0,P.iH)(e),(0,P.CE)(e)]:[0,1],!0).range(t)}else this._stateScale.domain(s,!0).range(t)}else this._stateScale=new tc.j,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(t)}init(t){super.init(t),this._addTransformToSeries(),0===this._start&&1===this._end||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&"axis"===this._filterMode||((0,td.U)(this._option.dataSet,"dataFilterWithNewDomain",tl),(0,td.U)(this._option.dataSet,"lockStatisticsFilter",to),(0,tn.xV)(this._regions,t=>{t.getViewDataStatistics().transform({type:"lockStatisticsFilter",options:{originalFields:()=>t.getViewDataStatistics().getFields(),getNewDomain:()=>this._newDomain,field:()=>{var e;return null!==(e=this._field)&&void 0!==e?e:this._parseFieldOfSeries(t)},isContinuous:()=>(0,tu.z2)(this._stateScale.type)},level:1},!1),t.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var e;return null!==(e=this._field)&&void 0!==e?e:this._parseFieldOfSeries(t)},isContinuous:()=>(0,tu.z2)(this._stateScale.type)},level:tT.BV.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onRender(t){}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(0,$.X)(e,t)||(i.reRender=!0,i.reMake=!0),i}reInit(t){super.reInit(t),this._marks.forEach(t=>{t.getMarks().forEach(t=>{this.initMarkStyleWithSpec(t,this._spec[t.name])})})}changeRegions(){}update(t){}resize(t){}_parseDomainFromState(t,e){if((0,tu.z2)(this._stateScale.type))return[Math.min(e,t),Math.max(e,t)];let i=this._stateScale.domain(),s=i.indexOf(t),r=i.indexOf(e);return i.slice(Math.min(s,r),Math.max(s,r)+1)}_initCommonEvent(){var t,e,i,s,r,n,a;let o={delayType:null!==(e=null===(t=this._spec)||void 0===t?void 0:t.delayType)&&void 0!==e?e:"throttle",delayTime:(0,X.Z)(null===(i=this._spec)||void 0===i?void 0:i.delayType)?null!==(r=null===(s=this._spec)||void 0===s?void 0:s.delayTime)&&void 0!==r?r:30:0,realTime:null===(a=null===(n=this._spec)||void 0===n?void 0:n.realTime)||void 0===a||a,allowComponentZoom:!0};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,o),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,o),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,o)}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}_autoVisible(t){if(!this._auto)return;t?this.show():this.hide();let e=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[e]:t?this[`_${e}`]:0},{[e]:w.W.Built_In})}onLayoutStart(t,e,i){super.onLayoutStart(t,e,i);let s=this._autoUpdate(t);this._autoVisible(s),this._dataUpdating=!1}onLayoutEnd(t){let e=!(0===this._start&&1===this._end);this._autoVisible(e),super.onLayoutEnd(t)}getBoundsInRect(t){let e={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(e.y2=e.y1+this._height,e.x2=e.x1+t.width):(e.x2=e.x1+this._width,e.y2=e.y1+t.height),e}hide(){var t;null===(t=this._component)||void 0===t||t.hideAll()}show(){var t;null===(t=this._component)||void 0===t||t.showAll()}_getAxisBandSize(t){let e=null==t?void 0:t.bandSize,i=null==t?void 0:t.maxBandSize,s=null==t?void 0:t.minBandSize;if(e||s||i)return{bandSize:e,maxBandSize:i,minBandSize:s}}_autoUpdate(t){var e,i,s,r,n,a;if(!this._auto)return this._cacheVisibility=void 0,!0;let o=this._relatedAxisComponent,l=null==o?void 0:o.getSpec(),h=null==o?void 0:o.getScale(),d=this._getAxisBandSize(l);if(!this._dataUpdating&&(0,tu.lK)(h.type)&&(null==t?void 0:t.height)===(null===(e=this._cacheRect)||void 0===e?void 0:e.height)&&(null==t?void 0:t.width)===(null===(i=this._cacheRect)||void 0===i?void 0:i.width)&&this._fixedBandSize===(null==d?void 0:d.bandSize))return this._cacheVisibility;let u=!0;if(this._isHorizontal&&(null==t?void 0:t.width)!==(null===(s=this._cacheRect)||void 0===s?void 0:s.width)?h.range(o.getInverse()?[t.width,0]:[0,t.width]):(null==t?void 0:t.height)!==(null===(r=this._cacheRect)||void 0===r?void 0:r.height)&&h.range(o.getInverse()?[0,t.height]:[t.height,0]),this._cacheRect={width:null==t?void 0:t.width,height:null==t?void 0:t.height},this._fixedBandSize=null==d?void 0:d.bandSize,(0,tu.lK)(h.type)){d&&(this._start||this._end)&&(this.type===M.L.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());let[t,e]=null!==(n=h.rangeFactor())&&void 0!==n?n:[];u=(!(0,te.Z)(t)||!(0,te.Z)(e))&&!(0===t&&1===e)}else{let[t,e]=null!==(a=h.rangeFactor())&&void 0!==a?a:[this._start,this._end];u=!(0===t&&1===e)}return this.setStartAndEnd(this._start,this._end),this._cacheVisibility=u,u}_getNeedClearVRenderComponents(){return[this._component]}}(0,tf.jB)(tC,class{constructor(){this._isGestureListener=!1}initZoomable(t,e=tb.i["desktop-browser"]){this._eventObj=t,this._renderMode=e,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=(0,tx.wx)(this._renderMode)||(0,tx.Oy)(this._renderMode),tk(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(t){return tk(this._renderMode)[t]}_zoomEventDispatch(t,e,i,s){if(!this._isGestureListener&&!t.event)return;let r=this._isGestureListener?t:t.event.clone();this._zoomableTrigger.parserZoomEvent(r);let{zoomDelta:n,zoomX:a,zoomY:o,path:l}=r;if(!s&&!l.some(t=>t.name&&t.name.includes("region"))||(0,te.Z)(n)||!(0,L.qr)({x:a,y:o},this._getRegionOrSeriesLayout(e),!1))return;let h={};i&&(h=i({zoomDelta:n,zoomX:a,zoomY:o},r)),this._eventObj.emit("zoom",Object.assign(Object.assign({scale:r.zoomDelta,scaleCenter:{x:r.zoomX,y:r.zoomY}},h),{model:this}))}_getRegionOrSeriesLayout(t){"region"!==t.type&&(t=t.getRegion());let{x:e,y:i,width:s,height:r}=t.layout.getLayout();return{x1:e,y1:i,x2:e+s,y2:i+r}}_bindZoomEventAsRegion(t,e,i,s){var r,n;let a=null!==(r=null==s?void 0:s.delayType)&&void 0!==r?r:"throttle",o=null!==(n=null==s?void 0:s.delayTime)&&void 0!==n?n:0,l=this._isGestureListener?this._gestureController:t,h=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:k.l.chart,consume:!0}],d=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:k.l.chart,consume:!1}];l.on(...d,tw[a](t=>{this._zoomableTrigger.clearZoom()},o)),l.on(...h,tw[a](t=>{var r;this._zoomEventDispatch(t,e,i,null!==(r=null==s?void 0:s.allowComponentZoom)&&void 0!==r&&r)},o))}initZoomEventOfSeries(t,e,i){this._option.disableTriggerEvent||tk(this._renderMode)&&this._bindZoomEventAsRegion(t.event,t,e,i)}initZoomEventOfRegions(t,e,i,s){this._option.disableTriggerEvent||tk(this._renderMode)&&t.forEach(t=>{e?t.getSeries().forEach(t=>{e(t)&&this._bindZoomEventAsRegion(t.event,t,i,s)}):this._bindZoomEventAsRegion(this._eventObj,t,i,s)})}_scrollEventDispatch(t,e,i){let s=!1;if(!this._isGestureListener&&(!t.event||this._option.disableTriggerEvent))return s;let r=this._isGestureListener?t:t.event;this._zoomableTrigger.parserScrollEvent(r);let{scrollX:n,scrollY:a,canvasX:o,canvasY:l}=r;return(0,te.Z)(n)&&(0,te.Z)(a)||(0,L.qr)({x:o,y:l},this._getRegionOrSeriesLayout(e),!1)&&(i&&(s=i({scrollX:n,scrollY:a},r)),this._eventObj.emit("scroll",{scrollX:n,scrollY:a,model:this})),s}_bindScrollEventAsRegion(t,e,i,s){var r,n;let a=null!==(r=null==s?void 0:s.delayType)&&void 0!==r?r:"throttle",o=null!==(n=null==s?void 0:s.delayTime)&&void 0!==n?n:0,l=this._isGestureListener?this._gestureController:t,h=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:k.l.chart,consume:!0}],d=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:k.l.chart,consume:!1}];l.on(...d,tw[a](t=>{this._zoomableTrigger.clearScroll()},o)),l.on(...h,tw[a](t=>this._scrollEventDispatch(t,e,i),o))}initScrollEventOfSeries(t,e,i){tk(this._renderMode)&&this._bindScrollEventAsRegion(t.event,t,e,i)}initScrollEventOfRegions(t,e,i,s){this._option.disableTriggerEvent||tk(this._renderMode)&&t.forEach(t=>{e?t.getSeries().forEach(t=>{e(t)&&this._bindScrollEventAsRegion(t.event,t,i,s)}):this._bindScrollEventAsRegion(this._eventObj,t,i,s)})}_bindDragEventAsRegion(t,e,i,s){t.on(this._getZoomTriggerEvent("start"),{level:k.l.chart},t=>{if(!t.event)return;let{event:r}=t;(0,L.qr)({x:r.canvasX,y:r.canvasY},this._getRegionOrSeriesLayout(e),!1)&&this._handleDrag(t,i,s)}),t.on("click",{level:k.l.chart},()=>!this._clickEnable)}initDragEventOfSeries(t,e,i){this._option.disableTriggerEvent||tk(this._renderMode)&&t.event.on(this._getZoomTriggerEvent("start"),{level:k.l.model,filter:({model:e})=>(null==e?void 0:e.id)===t.id},t=>{this._handleDrag(t,e,i)})}initDragEventOfRegions(t,e,i,s){this._option.disableTriggerEvent||tk(this._renderMode)&&t.forEach(t=>{e?t.getSeries().forEach(t=>{e(t)&&(t.event.on(this._getZoomTriggerEvent("start"),{level:k.l.model,filter:({model:e})=>(null==e?void 0:e.id)===t.id},t=>{this._handleDrag(t,i)}),t.event.on("click",{level:k.l.model,filter:({model:e})=>(null==e?void 0:e.id)===t.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,t,i,s)})}_handleDrag(t,e,i){var s,r,n;if(this._option.disableTriggerEvent||(this._clickEnable=!1,!this._zoomableTrigger.parserDragEvent(t.event)))return;let a=null!==(s=null==i?void 0:i.delayType)&&void 0!==s?s:"throttle",o=null!==(r=null==i?void 0:i.delayTime)&&void 0!==r?r:0,l=null===(n=null==i?void 0:i.realTime)||void 0===n||n,h=this._getZoomTriggerEvent("move"),d=this._getZoomTriggerEvent("end"),u=t.event,c=u.canvasX,p=u.canvasY,g=u.canvasX,m=u.canvasY,f=tw[a](t=>{this._clickEnable=!0;let i=t.event,s=[i.canvasX-g,i.canvasY-m];g=i.canvasX,m=i.canvasY,!l&&e&&e(s,t.event),this._eventObj.emit("panend",{delta:s,model:this}),this._zoomableTrigger.pointerId=null,this._eventObj.off(h,{level:k.l.chart,source:k.AY.chart},v),d.forEach(t=>{this._eventObj.off(t,{level:k.l.chart,source:k.AY.chart},f),this._eventObj.allow(t)})},o),v=tw[a](t=>{if(!this._zoomableTrigger.parserDragEvent(t.event))return;this._clickEnable=!1,d.forEach(t=>this._eventObj.prevent(t,f));let i=t.event,s=[i.canvasX-c,i.canvasY-p];c=i.canvasX,p=i.canvasY,l&&e&&e(s,t.event),this._eventObj.emit("panmove",{delta:s,model:this})},o);this._eventObj.on(h,{level:k.l.chart,source:k.AY.chart},v),d.forEach(t=>{this._eventObj.on(t,{level:k.l.chart,source:k.AY.chart},f)})}});var tM=i(7393),tE=i(7078);let tB="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",tO={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}};(r=d||(d={})).startHandler="startHandler",r.endHandler="endHandler",r.middleHandler="middleHandler",r.background="background";var tI=i(7307),tR=i(489),tP=i(3483),tL=i(9536),tD=i(5049),tZ=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let tF={debounce:O.Z,throttle:I.Z};(0,tD.b)(),(0,tI.k)(),(0,tR.k)(),(0,tP.d)(),(0,tL.N)();class tj extends z.k{setPropsFromAttrs(){let{start:t,end:e,orient:i,previewData:s,previewPointsX:r,previewPointsY:n,previewPointsX1:a,previewPointsY1:o}=this.attribute;t&&(this.state.start=t),e&&(this.state.end=e);let{width:l,height:h}=this.getLayoutAttrFromConfig();this._spanCache=this.state.end-this.state.start,this._isHorizontal="top"===i||"bottom"===i,this._layoutCache.max=this._isHorizontal?l:h,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",s&&(this._previewData=s),(0,ts.Z)(r)&&(this._previewPointsX=r),(0,ts.Z)(n)&&(this._previewPointsY=n),(0,ts.Z)(a)&&(this._previewPointsX1=a),(0,ts.Z)(o)&&(this._previewPointsY1=o)}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,R.Z)({},tj.defaultAttributes,t)),this.name="dataZoom",this._previewData=[],this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",max:0},this.state={start:0,end:1},this._statePointToData=t=>t,this._onHandlerPointerDown=(t,e)=>{t.stopPropagation(),"start"===e?(this._activeTag=d.startHandler,this._activeItem=this._startHandlerMask):"end"===e?(this._activeTag=d.endHandler,this._activeItem=this._endHandlerMask):"middleRect"===e?(this._activeTag=d.middleHandler,this._activeItem=this._middleHandlerRect):"middleSymbol"===e?(this._activeTag=d.middleHandler,this._activeItem=this._middleHandlerSymbol):"background"===e&&(this._activeTag=d.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this.eventPosToStagePos(t),this._activeCache.lastPos=this.eventPosToStagePos(t),"browser"===E.rF.env&&(E.rF.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),E.rF.addEventListener("pointerup",this._onHandlerPointerUp)),this.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0})},this._pointerMove=t=>{t.stopPropagation();let{start:e,end:i,brushSelect:s,realTime:r=!0}=this.attribute,n=this.eventPosToStagePos(t),{attPos:a,max:o}=this._layoutCache,l=(n[a]-this._activeCache.lastPos[a])/o,{start:h,end:u}=this.state;this._activeState&&(this._activeTag===d.middleHandler?this.moveZoomWithMiddle((this.state.start+this.state.end)/2+l):this._activeTag===d.startHandler?h+l>u?(u=(h=u)+l,this._activeTag=d.endHandler):h+=l:this._activeTag===d.endHandler&&(u+l<h?(h=(u=h)+l,this._activeTag=d.startHandler):u+=l),this._activeCache.lastPos=n,s&&this.renderDragMask()),h=Math.min(Math.max(h,0),1),u=Math.min(Math.max(u,0),1),e===h&&i===u||(this.setStateAttr(h,u,!0),r&&this._dispatchEvent("change",{start:h,end:u,tag:this._activeTag}))},this._onHandlerPointerMove=0===this.attribute.delayTime?this._pointerMove:tF[this.attribute.delayType](this._pointerMove,this.attribute.delayTime),this._onHandlerPointerUp=t=>{t.preventDefault();let{start:e,end:i,brushSelect:s,realTime:r=!0}=this.attribute;if(this._activeState&&this._activeTag===d.background){let e=this.eventPosToStagePos(t);this.backgroundDragZoom(this._activeCache.startPos,e)}this._activeState=!1,s&&this.renderDragMask(),this._dispatchEvent("change",{start:this.state.start,end:this.state.end,tag:this._activeTag}),"browser"===E.rF.env&&(E.rF.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),E.rF.removeEventListener("pointerup",this._onHandlerPointerUp)),this.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.removeEventListener("pointerup",this._onHandlerPointerUp)};let{position:i,showDetail:s}=t;this._activeCache.startPos=i,this._activeCache.lastPos=i,this._showText="auto"!==s&&s,this.setPropsFromAttrs()}setAttributes(t,e){super.setAttributes(t,e),this.setPropsFromAttrs()}bindEvents(){if(this.attribute.disableTriggerEvent)return void this.setAttribute("childrenPickable",!1);let{showDetail:t,brushSelect:e}=this.attribute;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"start")),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"end")),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"middleSymbol")),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"middleRect"));let i=e?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,i)),e&&this._background&&this._background.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"background")),e&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,"background")),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",t=>this._onHandlerPointerDown(t,i)),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),"auto"===t&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}dragMaskSize(){let{position:t}=this.attribute,{attPos:e,max:i}=this._layoutCache;return this._activeCache.lastPos[e]-t[e]>i?i+t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-t[e]<0?t[e]-this._activeCache.startPos[e]:this._activeCache.lastPos[e]-this._activeCache.startPos[e]}setStateAttr(t,e,i){let{zoomLock:s=!1,minSpan:r=0,maxSpan:n=1}=this.attribute,a=e-t;a!==this._spanCache&&(s||a<r||a>n)||(this._spanCache=a,this.state.start=t,this.state.end=e,i&&this.setAttributes({start:t,end:e}))}eventPosToStagePos(t){var e,i;return null!==(i=null===(e=this.stage)||void 0===e?void 0:e.eventPointTransform(t))&&void 0!==i?i:{x:0,y:0}}_onHandlerPointerEnter(t){t.stopPropagation(),this._showText=!0,this.renderText()}_onHandlerPointerLeave(t){t.stopPropagation(),this._showText=!1,this.renderText()}backgroundDragZoom(t,e){let{attPos:i,max:s}=this._layoutCache,{position:r}=this.attribute,n=t[i]-r[i],a=e[i]-r[i],o=Math.min(Math.max(Math.min(n,a)/s,0),1),l=Math.min(Math.max(Math.max(n,a)/s,0),1);.01>Math.abs(o-l)?this.moveZoomWithMiddle(o):this.setStateAttr(o,l,!1)}moveZoomWithMiddle(t){let e=t-(this.state.start+this.state.end)/2;0!==e&&(e>0?this.state.end+e>1&&(e=1-this.state.end):e<0&&this.state.start+e<0&&(e=-this.state.start),this.setStateAttr(this.state.start+e,this.state.end+e,!1))}renderDragMask(){let{dragMaskStyle:t}=this.attribute,{position:e,width:i,height:s}=this.getLayoutAttrFromConfig();this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:(0,tg.Z)(0>this.dragMaskSize()?this._activeCache.lastPos.x:this._activeCache.startPos.x,e.x,e.x+i),y:e.y,width:this._activeState&&this._activeTag===d.background&&Math.abs(this.dragMaskSize())||0,height:s},t),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({x:e.x,y:(0,tg.Z)(0>this.dragMaskSize()?this._activeCache.lastPos.y:this._activeCache.startPos.y,e.y,e.y+s),width:i,height:this._activeState&&this._activeTag===d.background&&Math.abs(this.dragMaskSize())||0},t),"rect")}isTextOverflow(t,e,i){if(!e)return!1;if(this._isHorizontal){if("start"===i){if(e.x1<t.x1)return!0}else if(e.x2>t.x2)return!0}else if("start"===i){if(e.y1<t.y1)return!0}else if(e.y2>t.y2)return!0;return!1}setTextAttr(t,e){var i,s,r,n,a,o,l,h;let d,u,c,p;let{startTextStyle:g,endTextStyle:m}=this.attribute,{formatMethod:f}=g,v=tZ(g,["formatMethod"]),{formatMethod:_}=m,y=tZ(m,["formatMethod"]),{start:b,end:x}=this.state;this._startValue=this._statePointToData(b),this._endValue=this._statePointToData(x);let{position:S,width:A,height:k}=this.getLayoutAttrFromConfig(),w=f?f(this._startValue):this._startValue,T=_?_(this._endValue):this._endValue,C={x1:S.x,y1:S.y,x2:S.x+A,y2:S.y+k};this._isHorizontal?(d={x:S.x+b*A,y:S.y+k/2},u={x:S.x+x*A,y:S.y+k/2},c={textAlign:this.isTextOverflow(C,t,"start")?"left":"right",textBaseline:null!==(s=null===(i=null==v?void 0:v.textStyle)||void 0===i?void 0:i.textBaseline)&&void 0!==s?s:"middle"},p={textAlign:this.isTextOverflow(C,e,"end")?"right":"left",textBaseline:null!==(n=null===(r=null==y?void 0:y.textStyle)||void 0===r?void 0:r.textBaseline)&&void 0!==n?n:"middle"}):(d={x:S.x+A/2,y:S.y+b*k},u={x:S.x+A/2,y:S.y+x*k},c={textAlign:null!==(o=null===(a=null==v?void 0:v.textStyle)||void 0===a?void 0:a.textAlign)&&void 0!==o?o:"center",textBaseline:this.isTextOverflow(C,t,"start")?"top":"bottom"},p={textAlign:null!==(h=null===(l=null==y?void 0:y.textStyle)||void 0===l?void 0:l.textAlign)&&void 0!==h?h:"center",textBaseline:this.isTextOverflow(C,e,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,(0,R.Z)({},v,{text:w,x:d.x,y:d.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:c}),`data-zoom-start-text-${S}`),this._endText=this.maybeAddLabel(this._container,(0,R.Z)({},y,{text:T,x:u.x,y:u.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:p}),`data-zoom-end-text-${S}`)}renderText(){let t=null,e=null;this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds,this.setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds;let{x1:i,x2:s,y1:r,y2:n}=t,{dx:a=0,dy:o=0}=this.attribute.startTextStyle;if((new tM.YZ).set(i,r,s,n).intersects(e)){let t="bottom"===this.attribute.orient||"right"===this.attribute.orient?-1:1;this._isHorizontal?this._startText.setAttribute("dy",o+t*Math.abs(e.y1-e.y2)):this._startText.setAttribute("dx",a+t*Math.abs(e.x1-e.x2))}else this._isHorizontal?this._startText.setAttribute("dy",o):this._startText.setAttribute("dx",a)}getLayoutAttrFromConfig(){var t,e,i,s,r,n;let a,o,l;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;let{position:h,size:d,orient:u,middleHandlerStyle:c={},startHandlerStyle:p={},endHandlerStyle:g={},backgroundStyle:m={}}=this.attribute,{width:f,height:v}=d,_=null!==(e=null===(t=c.background)||void 0===t?void 0:t.size)&&void 0!==e?e:10;c.visible?this._isHorizontal?(a=f,o=v-_,l={x:h.x,y:h.y+_}):(a=f-_,o=v,l={x:h.x+("left"===u?_:0),y:h.y}):(a=f,o=v,l=h);let y=null!==(i=p.size)&&void 0!==i?i:this._isHorizontal?o:a,b=null!==(s=g.size)&&void 0!==s?s:this._isHorizontal?o:a;return p.visible&&(this._isHorizontal?(a-=(y+b)/2,l={x:l.x+y/2,y:l.y}):(o-=(y+b)/2,l={x:l.x,y:l.y+y/2})),o+=r=m.lineWidth/2,a+=n=m.lineWidth/2,this._layoutAttrFromConfig={position:l,width:a,height:o},this._layoutAttrFromConfig}render(){var t,e,i,s,r,n,a,o,l,h,d,u,c,p,g,m,f,v,_,y,b,x,S,A,k,w,T,C,M,E,B,O,I,R;this._layoutAttrFromConfig=null;let{orient:P,backgroundStyle:L,backgroundChartStyle:D={},selectedBackgroundStyle:Z={},selectedBackgroundChartStyle:F={},middleHandlerStyle:j={},startHandlerStyle:H={},endHandlerStyle:z={},brushSelect:N,zoomLock:V}=this.attribute,{start:U,end:G}=this.state,{position:W,width:X,height:Y}=this.getLayoutAttrFromConfig(),$=null!==(t=H.triggerMinSize)&&void 0!==t?t:40,K=null!==(e=z.triggerMinSize)&&void 0!==e?e:40,q=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=q,this._background=q.createOrUpdateChild("background",Object.assign(Object.assign({x:W.x,y:W.y,width:X,height:Y,cursor:N?"crosshair":"auto"},L),{pickable:!V&&(null===(i=L.pickable)||void 0===i||i)}),"rect"),(null===(s=D.line)||void 0===s?void 0:s.visible)&&this.setPreviewAttributes("line",q),(null===(r=D.area)||void 0===r?void 0:r.visible)&&this.setPreviewAttributes("area",q),N&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=q.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:W.x+U*X,y:W.y,width:(G-U)*X,height:Y,cursor:N?"crosshair":"move"},Z),{pickable:!V&&(null===(n=F.pickable)||void 0===n||n)}),"rect"):this._selectedBackground=q.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:W.x,y:W.y+U*Y,width:X,height:(G-U)*Y,cursor:N?"crosshair":"move"},Z),{pickable:!V&&(null===(a=Z.pickable)||void 0===a||a)}),"rect"),(null===(o=F.line)||void 0===o?void 0:o.visible)&&this.setSelectedPreviewAttributes("line",q),(null===(l=F.area)||void 0===l?void 0:l.visible)&&this.setSelectedPreviewAttributes("area",q),this._isHorizontal){if(j.visible){let t=(null===(h=j.background)||void 0===h?void 0:h.size)||10;this._middleHandlerRect=q.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:W.x+U*X,y:W.y-t,width:(G-U)*X,height:t},null===(d=j.background)||void 0===d?void 0:d.style),{pickable:!V&&(null===(p=null===(c=null===(u=j.background)||void 0===u?void 0:u.style)||void 0===c?void 0:c.pickable)||void 0===p||p)}),"rect"),this._middleHandlerSymbol=q.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:W.x+(U+G)/2*X,y:W.y-t/2,strokeBoundsBuffer:0,angle:0,symbolType:null!==(m=null===(g=j.icon)||void 0===g?void 0:g.symbolType)&&void 0!==m?m:"square"},j.icon),{pickable:!V&&(null===(f=j.icon.pickable)||void 0===f||f)}),"symbol")}this._startHandler=q.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:W.x+U*X,y:W.y+Y/2,size:Y,symbolType:null!==(v=H.symbolType)&&void 0!==v?v:"square"},tO.horizontal),H),{pickable:!V&&(null===(_=H.pickable)||void 0===_||_)}),"symbol"),this._endHandler=q.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:W.x+G*X,y:W.y+Y/2,size:Y,symbolType:null!==(y=z.symbolType)&&void 0!==y?y:"square"},tO.horizontal),z),{pickable:!V&&(null===(b=z.pickable)||void 0===b||b)}),"symbol");let t=Math.max(this._startHandler.AABBBounds.width(),$),e=Math.max(this._startHandler.AABBBounds.height(),$),i=Math.max(this._endHandler.AABBBounds.width(),K),s=Math.max(this._endHandler.AABBBounds.height(),K);this._startHandlerMask=q.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:W.x+U*X-t/2,y:W.y+Y/2-e/2,width:t,height:e,fill:"white",fillOpacity:0,zIndex:999},tO.horizontal),{pickable:!V}),"rect"),this._endHandlerMask=q.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:W.x+G*X-i/2,y:W.y+Y/2-s/2,width:i,height:s,fill:"white",fillOpacity:0,zIndex:999},tO.horizontal),{pickable:!V}),"rect")}else{if(j.visible){let t=(null===(x=j.background)||void 0===x?void 0:x.size)||10;this._middleHandlerRect=q.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:"left"===P?W.x-t:W.x+X,y:W.y+U*Y,width:t,height:(G-U)*Y},null===(S=j.background)||void 0===S?void 0:S.style),{pickable:!V&&(null===(w=null===(k=null===(A=j.background)||void 0===A?void 0:A.style)||void 0===k?void 0:k.pickable)||void 0===w||w)}),"rect"),this._middleHandlerSymbol=q.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:"left"===P?W.x-t/2:W.x+X+t/2,y:W.y+(U+G)/2*Y,angle:Math.PI/180*90,symbolType:null!==(C=null===(T=j.icon)||void 0===T?void 0:T.symbolType)&&void 0!==C?C:"square",strokeBoundsBuffer:0},j.icon),{pickable:!V&&(null===(E=null===(M=j.icon)||void 0===M?void 0:M.pickable)||void 0===E||E)}),"symbol")}this._startHandler=q.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:W.x+X/2,y:W.y+U*Y,size:X,symbolType:null!==(B=H.symbolType)&&void 0!==B?B:"square"},tO.vertical),H),{pickable:!V&&(null===(O=H.pickable)||void 0===O||O)}),"symbol"),this._endHandler=q.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:W.x+X/2,y:W.y+G*Y,size:X,symbolType:null!==(I=z.symbolType)&&void 0!==I?I:"square"},tO.vertical),z),{pickable:!V&&(null===(R=z.pickable)||void 0===R||R)}),"symbol");let t=Math.max(this._startHandler.AABBBounds.width(),$),e=Math.max(this._startHandler.AABBBounds.height(),$),i=Math.max(this._endHandler.AABBBounds.width(),K),s=Math.max(this._endHandler.AABBBounds.height(),K);this._startHandlerMask=q.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:W.x+X/2+t/2,y:W.y+U*Y-e/2,width:s,height:i,fill:"white",fillOpacity:0,zIndex:999},tO.vertical),{pickable:!V}),"rect"),this._endHandlerMask=q.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:W.x+X/2+i/2,y:W.y+G*Y-s/2,width:s,height:i,fill:"white",fillOpacity:0,zIndex:999},tO.vertical),{pickable:!V}),"rect")}this._showText&&this.renderText()}computeBasePoints(){let t,e;let{orient:i}=this.attribute,{position:s,width:r,height:n}=this.getLayoutAttrFromConfig();return this._isHorizontal?(t=[{x:s.x,y:s.y+n}],e=[{x:s.x+r,y:s.y+n}]):"left"===i?(t=[{x:s.x+r,y:s.y}],e=[{x:s.x+r,y:s.y+n}]):(t=[{x:s.x,y:s.y+n}],e=[{x:s.x,y:s.y}]),{basePointStart:t,basePointEnd:e}}simplifyPoints(t){var e,i;if(t.length>1e4){let s=null!==(e=this.attribute.tolerance)&&void 0!==e?e:this._previewData.length/1e4;return(i=t).length<=10?i:i=function(t,e){let i,s,r=t[0].x,n=t[0].y,a=[t[0]];for(let o=1,l=t.length;o<l;o++)(i=t[o].x-r)*i+(s=t[o].y-n)*s>e&&(r=t[o].x,n=t[o].y,a.push(t[o]));return t[t.length-1].x===r&&t[t.length-1].y===n||a.push(t[t.length-1]),a}(i,void 0!==s?s*s:1)}return t}getPreviewLinePoints(){let t=this._previewData.map(t=>({x:this._previewPointsX&&this._previewPointsX(t),y:this._previewPointsY&&this._previewPointsY(t)}));if(0===t.length)return t;t=this.simplifyPoints(t);let{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}getPreviewAreaPoints(){let t=this._previewData.map(t=>({x:this._previewPointsX&&this._previewPointsX(t),y:this._previewPointsY&&this._previewPointsY(t),x1:this._previewPointsX1&&this._previewPointsX1(t),y1:this._previewPointsY1&&this._previewPointsY1(t)}));if(0===t.length)return t;t=this.simplifyPoints(t);let{basePointStart:e,basePointEnd:i}=this.computeBasePoints();return e.concat(t).concat(i)}setPreviewAttributes(t,e){this._previewGroup||(this._previewGroup=e.createOrUpdateChild("previewGroup",{pickable:!1},"group")),"line"===t?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");let{backgroundChartStyle:i={}}=this.attribute;"line"===t&&this._previewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===t&&this._previewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}setSelectedPreviewAttributes(t,e){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=e.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),"line"===t?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area");let{selectedBackgroundChartStyle:i={}}=this.attribute,{start:s,end:r}=this.state,{position:n,width:a,height:o}=this.getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?n.x+s*a:n.x,y:this._isHorizontal?n.y:n.y+s*o,width:this._isHorizontal?(r-s)*a:a,height:this._isHorizontal?o:(r-s)*o,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?n.x+s*a:n.x),y:-(this._isHorizontal?n.y:n.y+s*o),width:this._isHorizontal?(r-s)*a:a,height:this._isHorizontal?o:(r-s)*o,pickable:!1}),"line"===t&&this._selectedPreviewLine.setAttributes(Object.assign({points:this.getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===t&&this._selectedPreviewArea.setAttributes(Object.assign({points:this.getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}maybeAddLabel(t,e,i){let s=this.find(t=>t.name===i,!0);return s?s.setAttributes(e):(s=new tE.V(e)).name=i,t.add(s),s}setStartAndEnd(t,e){let{start:i,end:s}=this.attribute;(0,X.Z)(t)&&(0,X.Z)(e)&&(t!==this.state.start||e!==this.state.end)&&(this.state.start=t,this.state.end=e,i===this.state.start&&s===this.state.end||(this.setStateAttr(t,e,!0),this._dispatchEvent("change",{start:t,end:e,tag:this._activeTag})))}setPreviewData(t){this._previewData=t}setText(t,e){"start"===e?this._startText.setAttribute("text",t):this._endText.setAttribute("text",t)}getStartValue(){return this._startValue}getEndTextValue(){return this._endValue}getMiddleHandlerSize(){var t,e,i,s;let{middleHandlerStyle:r={}}=this.attribute,n=null!==(e=null===(t=r.background)||void 0===t?void 0:t.size)&&void 0!==e?e:10,a=null!==(s=null===(i=r.icon)||void 0===i?void 0:i.size)&&void 0!==s?s:10;return Math.max(n,...(0,P.IX)(a))}setPreviewPointsX(t){(0,ts.Z)(t)&&(this._previewPointsX=t)}setPreviewPointsY(t){(0,ts.Z)(t)&&(this._previewPointsY=t)}setPreviewPointsX1(t){(0,ts.Z)(t)&&(this._previewPointsX1=t)}setPreviewPointsY1(t){(0,ts.Z)(t)&&(this._previewPointsY1=t)}setStatePointToData(t){(0,ts.Z)(t)&&(this._statePointToData=t)}}tj.defaultAttributes={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:tB,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:tB,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}};var tH=i(6132),tz=i(2930);class tN extends tz.r{_mergeThemeToSpec(t,e){let i=this._theme,s=t;if(this._shouldMergeThemeToSpec()){let e=t=>{let e=(0,tr.H)({selectedBackgroundChart:{line:{},area:{}}},this._theme,t),{selectedBackgroundChart:i={}}=t,{line:s,area:r}=i;return s&&!1!==s.visible&&(e.selectedBackgroundChart.line.style=Object.assign(Object.assign({},e.selectedBackgroundChart.line.style),{visible:!0})),r&&!1!==r.visible&&(e.selectedBackgroundChart.area.style=Object.assign(Object.assign({},e.selectedBackgroundChart.area.style),{visible:!0})),e};s=(0,ta.Z)(t)?t.map(t=>e(t)):e(t)}return this._adjustPadding(s),{spec:s,theme:i}}}class tV extends tC{constructor(t,e){var i;super(t,e),this.type=M.L.dataZoom,this.name=M.L.dataZoom,this.transformerConstructor=tN,this.specKey="dataZoom",this.layoutZIndex=T.Ai.DataZoom,this.layoutLevel=T.pM.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=t=>{let e="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,s=this._isHorizontal?this._stateScale:this._valueScale,r=this._isHorizontal?this._stateField:this._valueField;return s.scale(t[r])+this.getLayoutStartPoint().x+e+i},this._dataToPositionX2=t=>{let e="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,s=this._isHorizontal?this._stateScale:this._valueScale,r=s.domain()[0];return s.scale(r)+this.getLayoutStartPoint().x+e+i},this._dataToPositionY=t=>{let e=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,s=this._isHorizontal?this._valueScale:this._stateScale,r=this._isHorizontal?this._valueField:this._stateField;return s.scale(t[r])+this.getLayoutStartPoint().y+e+i},this._dataToPositionY2=t=>{let e=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,s=this._isHorizontal?this._valueScale:this._stateScale,r=s.domain()[0];return s.scale(r)+this.getLayoutStartPoint().y+e+i},this._valueField="y",this._filterMode=null!==(i=t.filterMode)&&void 0!==i?i:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var t,e,i,s,r,n,a,o,l,h;super.setAttrFromSpec(),(0,tt.Z)(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=null!==(e=null===(t=this._spec.background)||void 0===t?void 0:t.size)&&void 0!==e?e:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),(0,te.Z)(null===(r=null===(s=null===(i=this._spec)||void 0===i?void 0:i.startHandler)||void 0===s?void 0:s.style)||void 0===r?void 0:r.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),(0,te.Z)(null===(o=null===(a=null===(n=this._spec)||void 0===n?void 0:n.endHandler)||void 0===a?void 0:a.style)||void 0===o?void 0:o.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);let d=null===(l=this._spec.startHandler.style.visible)||void 0===l||l,u=null===(h=this._spec.endHandler.style.visible)||void 0===h||h;this._startHandlerSize=d?this._spec.startHandler.style.size:0,this._endHandlerSize=u?this._spec.endHandler.style.size:0}onLayoutEnd(t){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),!1!==this._cacheVisibility&&super.onLayoutEnd(t)}_initValueScale(){let t=this._computeDomainOfValueScale();if(t){let e=new tH.f;e.domain(t),this._valueScale=e}}_updateScaleRange(){var t,e;let i;let s=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale||!this._valueScale)return;let r=this._isHorizontal?this.getLayoutRect().width-s:this.getLayoutRect().height-s,n=null!==(e=null===(t=this._relatedAxisComponent)||void 0===t?void 0:t.getScale().range())&&void 0!==e?e:[this._startHandlerSize/2,r+this._startHandlerSize/2],a=this._computeWidth(),o=this._computeHeight();this._isHorizontal?(i=this._visible?[this._startHandlerSize/2,a-s+this._startHandlerSize/2]:n,this._stateScale.range(i),this._valueScale.range([o-this._middleHandlerSize,0])):(i=this._visible?[this._startHandlerSize/2,o-s+this._startHandlerSize/2]:n,this._stateScale.range(i),"left"===this.layoutOrient?this._valueScale.range([a-this._middleHandlerSize,0]):this._valueScale.range([0,a-this._middleHandlerSize])),this._component&&!1!==this._cacheVisibility&&this._component.setAttributes({size:{width:a,height:o},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){let t=this._data.getLatestData().map(t=>t[this._valueField]),e=t.map(t=>1*t);return t.length?[(0,P.iH)(e),(0,P.CE)(e)]:null}_computeMiddleHandlerSize(){var t,e,i,s;let r=0;return(null===(e=null===(t=this._spec)||void 0===t?void 0:t.middleHandler)||void 0===e?void 0:e.visible)&&(r+=Math.max(null!==(i=this._spec.middleHandler.icon.style.size)&&void 0!==i?i:8,null!==(s=this._spec.middleHandler.background.size)&&void 0!==s?s:40)),r}_computeWidth(){return!1===this._visible?0:(0,ti.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return!1===this._visible?0:(0,ti.Z)(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height}_isScaleValid(t){if(!t||!t.domain())return!1;let e=t.domain();return(!(0,tu.z2)(t.type)||e[0]!==(0,P.Z$)(e))&&(!(0,tu.lK)(t.type)||1!==(0,P.V4)(e).length)}_getAttrs(t){var e,i,s,r,n;let a=null!==(e=this._spec)&&void 0!==e?e:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this._computeWidth(),height:this._computeHeight()},showDetail:a.showDetail,brushSelect:null!==(i=a.brushSelect)&&void 0!==i&&i,zoomLock:null!==(s=a.zoomLock)&&void 0!==s&&s,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:a.delayType,delayTime:(0,X.Z)(a.delayType)?null!==(r=a.delayTime)&&void 0!==r?r:30:0,realTime:null===(n=a.realTime)||void 0===n||n,previewData:t&&this._data.getLatestData(),previewPointsX:t&&this._dataToPositionX,previewPointsY:t&&this._dataToPositionY,tolerance:this._spec.tolerance},this._getComponentAttrs(t))}_createOrUpdateComponent(){if(this._visible){let t=this._isHorizontal?this._stateScale:this._valueScale,e=this._isHorizontal?this._valueScale:this._stateScale,i=this._isScaleValid(t)&&this._isScaleValid(e)&&!1!==this._spec.showBackgroundChart,s=this._getAttrs(i);if(this._component)this._component.setAttributes(s);else{let t=this.getContainer();this._component=new tj(s),this._isHorizontal?i&&this._component.setPreviewPointsY1(this._dataToPositionY2):i&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(t=>this.statePointToData(t)),this._component.addEventListener("change",t=>{let{start:e,end:i,tag:s}=t.detail;this._handleChange(e,i,void 0,s)}),t.add(this._component),this._updateScaleRange()}}}_handleChange(t,e,i,s){if(super._handleChange(t,e,i),this._shouldChange){i&&this._component&&this._component.setStartAndEnd(t,e),this._start=t,this._end=e;let r=this.statePointToData(t),n=this.statePointToData(e);((0,ts.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,r,n):this._handleStateChange(r,n,s))&&this.event.emit(k.$7.dataZoomChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:t,end:e,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){var t;let e=this._data.getDataView();if(e.reRunAllTransform(),null===(t=this._component)||void 0===t||t.setPreviewData(e.latestData),this._valueScale){let t=this._computeDomainOfValueScale();t&&this._valueScale.domain(t)}}_getComponentAttrs(t){var e,i,s,r,n,a,o,l,h,d,u;let{middleHandler:c={},startText:p={},endText:g={},backgroundChart:m={},selectedBackgroundChart:f={}}=this._spec;return{backgroundStyle:(0,Y.h_)(null===(e=this._spec.background)||void 0===e?void 0:e.style),startHandlerStyle:(0,Y.h_)(null===(i=this._spec.startHandler)||void 0===i?void 0:i.style),middleHandlerStyle:c.visible?{visible:!0,icon:(0,Y.h_)(null===(s=c.icon)||void 0===s?void 0:s.style),background:{size:null===(r=c.background)||void 0===r?void 0:r.size,style:(0,Y.h_)(null===(n=c.background)||void 0===n?void 0:n.style)}}:{visible:!1},endHandlerStyle:(0,Y.h_)(null===(a=this._spec.endHandler)||void 0===a?void 0:a.style),startTextStyle:{padding:p.padding,formatMethod:this._getHandlerTextFormatMethod(p),textStyle:(0,Y.h_)(p.style)},endTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:(0,Y.h_)(g.style)},selectedBackgroundStyle:(0,Y.h_)(this._spec.selectedBackground.style),dragMaskStyle:(0,Y.h_)(null===(o=this._spec.dragMask)||void 0===o?void 0:o.style),backgroundChartStyle:t?{line:(0,tr.H)((0,Y.h_)(null===(l=m.line)||void 0===l?void 0:l.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},(0,Y.h_)(null===(h=m.area)||void 0===h?void 0:h.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:t?{line:(0,tr.H)((0,Y.h_)(null===(d=f.line)||void 0===d?void 0:d.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},(0,Y.h_)(null===(u=f.area)||void 0===u?void 0:u.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(t){let{formatMethod:e,formatter:i}=t,{formatFunc:s}=(0,q.HJ)(e,i);return s?t=>s(t,{label:t},i):void 0}_getNeedClearVRenderComponents(){return[this._component]}clear(){if(this._component){let t=this.getContainer();this._component.removeAllChild(),t&&t.removeChild(this._component),this._component=null}super.clear()}}tV.type=M.L.dataZoom,tV.transformerConstructor=tN,tV.specKey="dataZoom";var tU=i(7378),tG=i(3127),tW=i(1646),tX=i(3215),tY=i(1960);let t$=["sum","average","min","max","variance","standardDeviation","median"];var tK=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};function tq(t,e,i){if(!i)return!1;let s=t.map(t=>1*t),r=(0,P.iH)(s),n=(0,P.CE)(s);return e<r||e>n}function tJ(t,e,i,s,r,n){var a,o;let l;let{relativeSeries:h}=s;return(0,ti.Z)(t.x)&&tq(e,t.x,i)&&(null===(o=null==h?void 0:(a=h.getXAxisHelper()).setExtendDomain)||void 0===o||o.call(a,"marker_xAxis_extend",t.x)),(0,tY.hU)(t.x)?t0(t.x,r)+n.x:h.getXAxisHelper().dataToPosition([t.x])+n.x}function tQ(t,e,i,s,r,n){var a,o;let l;let{relativeSeries:h}=s;return(0,ti.Z)(t.y)&&tq(e,t.y,i)&&(null===(o=null===(a=h.getYAxisHelper())||void 0===a?void 0:a.setExtendDomain)||void 0===o||o.call(a,"marker_yAxis_extend",t.y)),(0,tY.hU)(t.y)?t0(t.y,r)+n.y:h.getYAxisHelper().dataToPosition([t.y])+n.y}function t0(t,e){return Number(t.substring(0,t.length-1))*e/100}function t1(t){return t$.includes(t)}function t2(t,e,i,s,r){let n=e.getRegion(),a=n.getLayoutStartPoint(),o=i.getRegion(),l=o.getLayoutStartPoint(),h=Math.abs(Math.min(a.x,l.x)-Math.max(a.x+n.getLayoutRect().width,l.x+o.getLayoutRect().width)),d=Math.abs(Math.min(a.y,l.y)-Math.max(a.y+n.getLayoutRect().height,l.y+o.getLayoutRect().height)),u={relativeSeries:s,startRelativeSeries:e,endRelativeSeries:i},c=[],p=t.latestData[0]&&t.latestData[0].latestData?t.latestData[0].latestData:t.latestData,g=s.getXAxisHelper().getScale(0).domain(),m=s.getYAxisHelper().getScale(0).domain();return p.forEach(t=>{let e=(0,X.Z)(t.x),i=(0,X.Z)(t.y);if(e&&i){let e=tJ(t,g,r,u,h,a),i=tQ(t,m,r,u,d,a);c.push([{x:e,y:i}])}else if(e){let e=tJ(t,g,r,u,h,a),i=Math.max(a.y+n.getLayoutRect().height,l.y+o.getLayoutRect().height),s=Math.min(a.y,l.y);c.push([{x:e,y:i},{x:e,y:s}])}else if(i){let e=Math.min(a.x,l.x),i=tQ(t,m,r,u,d,a),s=Math.max(a.x+n.getLayoutRect().width,l.x+o.getLayoutRect().width);c.push([{x:e,y:i},{x:s,y:i}])}}),c}function t3(t,e,i,s){let r=[],n=t.latestData[0]&&t.latestData[0].latestData?t.latestData[0].latestData:t.latestData,a=(0,ta.Z)(s);return n.forEach((t,n)=>{var o,l,h,d;let u=(null==t?void 0:t.getRefRelativeSeries)?t.getRefRelativeSeries():e,c=u.getRegion(),p=c.getLayoutStartPoint(),{width:g,height:m}=c.getLayoutRect(),f=0,v=0;if(s){let t=a?s[n]:s,e=t.x,i=t.y;e&&(f=(0,tY.hU)(e)?Number(e.substring(0,e.length-1))*g/100:e),i&&(v=(0,tY.hU)(i)?Number(i.substring(0,i.length-1))*m/100:i)}let _=u.getXAxisHelper().getScale(0).domain(),y=u.getYAxisHelper().getScale(0).domain(),b=(0,P.IX)(t.x),x=(0,P.IX)(t.y);1===b.length&&(0,ti.Z)(b[0])&&tq(_,b[0],i)&&(null===(l=null===(o=u.getXAxisHelper())||void 0===o?void 0:o.setExtendDomain)||void 0===l||l.call(o,"marker_xAxis_extend",b[0])),1===x.length&&(0,ti.Z)(x[0])&&tq(y,x[0],i)&&(null===(d=null===(h=u.getYAxisHelper())||void 0===h?void 0:h.setExtendDomain)||void 0===d||d.call(h,"marker_yAxis_extend",x[0])),r.push({x:u.getXAxisHelper().dataToPosition(b)+p.x+f,y:u.getYAxisHelper().dataToPosition(x)+p.y+v})}),r}function t5(t,e,i){let{x:s,y:r}=t;return(0,tY.hU)(s)&&(s=t0(s,e)),(0,tY.hU)(r)&&(r=t0(r,i)),{x:s,y:r}}function t8(t,e,i){let s;if(s=(0,ts.Z)(t)?(0,P.IX)(t(e.getData().getLatestData(),e)):(0,P.IX)(t),i){let t=e.getRegion(),{x:i,y:r}=t.getLayoutStartPoint(),{width:n,height:a}=t.getLayoutRect();return s.map(t=>{let{x:e,y:s}=t5(t,n,a);return{x:e+=i,y:s+=r}})}let{width:r,height:n}=e.getOption().getChart().getViewRect();return s.map(t=>t5(t,r,n))}function t6(t){let e=1/0,i=-1/0,s=1/0,r=-1/0;return t.forEach(t=>{let n=t.getLayoutStartPoint(),a=t.getLayoutRect();n.x<e&&(e=n.x),n.x+a.width>i&&(i=n.x+a.width),n.y<s&&(s=n.y),n.y+a.height>r&&(r=n.y+a.height)}),{minX:e,maxX:i,minY:s,maxY:r}}function t4(t,e,i){let{labelBackground:s={},style:r,shape:n}=t,a=tK(t,["labelBackground","style","shape"]);return!1!==t.visible?((null==n?void 0:n.visible)?a.shape=Object.assign({visible:!0},(0,Y.h_)(n.style)):a.shape={visible:!1},!1!==s.visible?(a.panel=Object.assign({visible:!0,customShape:s.customShape},t9((0,Y.h_)(s.style),e,i)),(0,X.Z)(s.padding)&&(a.padding=(0,tX.o)(s.padding))):(a.panel={visible:!1},a.padding=0),r&&(a.textStyle=t9((0,Y.h_)(r),e,i)),a):{visible:!1}}function t7(t,e,i){for(let s in t)(0,ts.Z)(t[s])&&(t[s]=t[s](e,i));return t}function t9(t,e,i){return(0,ts.Z)(t)?t(e,i):t}function et(t,e){return(0,ts.Z)(t)?t(e):t}function ee(t,e,i){return(0,X.Z)(t)?"regionLeft"===e?i.getLayoutStartPoint().x-t.x:"regionRight"===e?i.getLayoutStartPoint().x+i.getLayoutRect().width-t.x:"regionTop"===e?i.getLayoutStartPoint().y-t.y:"regionBottom"===e?i.getLayoutStartPoint().y+i.getLayoutRect().height-t.y:e:e}function ei(t){let e="x"in t,i="y"in t,s="x1"in t,r="y1"in t,n="angle"in t,a="radius"in t,o="angle1"in t,l="radius1"in t;return{doXProcess:e&&!i&&!r,doXYY1Process:e&&i&&r,doYProcess:i&&!e&&!s,doYXX1Process:i&&e&&s,doXYProcess:e&&i&&s&&r,doAngleProcess:n&&!o&&!a&&!l,doRadiusProcess:a&&!l&&!n&&!o,doAngRadRad1Process:n&&!o&&a&&l,doRadAngAng1Process:a&&n&&o&&!l,doRadAngProcess:n&&a&&o&&l,doCoordinatesProcess:"coordinates"in t&&(!("process"in t)||"process"in t&&"xy"in t.process)}}function es(t){let e="x"in t,i="x1"in t,s="y"in t,r="y1"in t,n="angle"in t,a="radius"in t,o="angle1"in t,l="radius1"in t;return{doXProcess:e&&i&&!s&&!r,doYProcess:s&&r&&!e&&!i,doXYProcess:e&&i&&s&&r,doAngleProcess:n&&o&&!a&&!l,doRadiusProcess:a&&l&&!n&&!o,doRadAngProcess:n&&a&&o&&l,doCoordinatesProcess:"coordinates"in t}}function er(t){return{doXYProcess:(0,X.Z)(t.x)&&(0,X.Z)(t.y),doPolarProcess:(0,X.Z)(t.angle)&&(0,X.Z)(t.radius),doGeoProcess:(0,X.Z)(t.areaName)}}var en=i(8378),ea=i(3151),eo=i(4154);class el extends z.k{constructor(){super(...arguments),this.name="marker",this._onHover=t=>{this._lastHover=(0,ea.fM)(t,this._container,this._lastHover)},this._onUnHover=t=>{this._lastHover=(0,ea.lO)(t,this._container,this._lastHover)},this._onClick=t=>{this._lastSelect=(0,ea.Q6)(t,this._container,this._lastSelect)}}transAnimationConfig(){var t,e,i;if(!1!==this.attribute.animation){let s=(0,eo.Z)(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:(0,R.Z)({},this.defaultUpdateAnimation,s,null!==(t=this.attribute.animationEnter)&&void 0!==t?t:{}),exit:(0,R.Z)({},this.defaultExitAnimation,s,null!==(e=this.attribute.animationExit)&&void 0!==e?e:{}),update:(0,R.Z)({},this.defaultUpdateAnimation,s,null!==(i=this.attribute.animationUpdate)&&void 0!==i?i:{})}}}setAttribute(t,e,i){super.setAttribute(t,e,i),"visible"===t&&this.render()}_bindEvent(){var t,e,i;if(!this.attribute.interactive)return;let{hover:s,select:r}=this.attribute;s&&(null===(t=this._container)||void 0===t||t.addEventListener("pointermove",this._onHover),null===(e=this._container)||void 0===e||e.addEventListener("pointerout",this._onUnHover)),r&&(null===(i=this._container)||void 0===i||i.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var t,e,i;null===(t=this._container)||void 0===t||t.removeEventListener("pointermove",this._onHover),null===(e=this._container)||void 0===e||e.removeEventListener("pointerout",this._onUnHover),null===(i=this._container)||void 0===i||i.removeEventListener("pointerdown",this._onClick)}_initContainer(){var t,e;let i;let{limitRect:s={},clipInRange:r}=this.attribute;if(r){let r=B.i.group(Object.assign(Object.assign({},s),{clip:!0,pickable:!1}));i=B.i.group({x:-(null!==(t=s.x)&&void 0!==t?t:0),y:-(null!==(e=s.y)&&void 0!==e?e:0),pickable:!1}),r.add(i),this._containerClip=r,this.add(r)}else i=B.i.group({x:0,y:0,pickable:!1}),this.add(i);i.name="marker-container",this._container=i}_updateContainer(){var t,e;let{limitRect:i={},clipInRange:s}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},i)),this._container.setAttributes({x:s?-(null!==(t=i.x)&&void 0!==t?t:0):0,y:s?-(null!==(e=i.y)&&void 0!==e?e:0):0})}render(){var t;this.transAnimationConfig(),this.setAttribute("pickable",!1);let e=null===(t=this.attribute.visible)||void 0===t||t;!1===this.attribute.interactive&&this.setAttribute("childrenPickable",!1),e&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}(n=u||(u={})).start="start",n.startTop="startTop",n.startBottom="startBottom",n.insideStart="insideStart",n.insideStartTop="insideStartTop",n.insideStartBottom="insideStartBottom",n.middle="middle",n.insideMiddleTop="insideMiddleTop",n.insideMiddleBottom="insideMiddleBottom",n.end="end",n.endTop="endTop",n.endBottom="endBottom",n.insideEnd="insideEnd",n.insideEndTop="insideEndTop",n.insideEndBottom="insideEndBottom",(a=c||(c={})).left="left",a.right="right",a.top="top",a.bottom="bottom",a.topLeft="topLeft",a.topRight="topRight",a.bottomLeft="bottomLeft",a.bottomRight="bottomRight",a.middle="middle",a.insideLeft="insideLeft",a.insideRight="insideRight",a.insideTop="insideTop",a.insideBottom="insideBottom",a.insideTopLeft="insideTopLeft",a.insideTopRight="insideTopRight",a.insideBottomLeft="insideBottomLeft",a.insideBottomRight="insideBottomRight",(o=p||(p={})).arcInnerStart="arcInnerStart",o.arcInnerEnd="arcInnerEnd",o.arcInnerMiddle="arcInnerMiddle",o.arcOuterStart="arcOuterStart",o.arcOuterEnd="arcOuterEnd",o.arcOuterMiddle="arcOuterMiddle",o.center="center",(l=g||(g={})).top="top",l.bottom="bottom",l.middle="middle",l.insideTop="insideTop",l.insideBottom="insideBottom",l.insideMiddle="insideMiddle";let eh={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:u.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},ed={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}};p.arcOuterMiddle;let eu={interactive:!0,label:{position:c.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}};p.arcOuterMiddle;let ec={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"},topLeft:{textAlign:"right",textBaseline:"top"},insideTopLeft:{textAlign:"left",textBaseline:"top"},topRight:{textAlign:"left",textBaseline:"top"},insideTopRight:{textAlign:"right",textBaseline:"top"},bottomLeft:{textAlign:"right",textBaseline:"bottom"},insideBottomLeft:{textAlign:"left",textBaseline:"bottom"},bottomRight:{textAlign:"left",textBaseline:"bottom"},insideBottomRight:{textAlign:"right",textBaseline:"bottom"}},ep={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};function eg(t,e){let{x1:i,y1:s,x2:r,y2:n}=e,{x1:a,y1:o,x2:l,y2:h}=t.AABBBounds,d=0,u=0;return a<i&&(d=i-a),o<s&&(u=s-o),l>r&&(d=r-l),h>n&&(u=n-h),{dx:d,dy:u}}function em(t,e){let{dx:i,dy:s}=eg(t,e),{dx:r=0,dy:n=0}=t.attribute;i&&t.setAttribute("dx",i+r),s&&t.setAttribute("dy",s+n)}var ef=i(4437),ev=i(1679);function e_(){(0,V.M)(),(0,tD.b)()}var ey=i(9167);function eb(t,e,i,s){var r,n,a,o,l;if(!t)return;null===(r=null==t?void 0:t.animates)||void 0===r||r.forEach(t=>t.stop("end"));let h=null!==(a=null===(n=t.attribute)||void 0===n?void 0:n.fillOpacity)&&void 0!==a?a:1,d=null!==(l=null===(o=t.attribute)||void 0===o?void 0:o.strokeOpacity)&&void 0!==l?l:1;t.setAttributes({fillOpacity:0,strokeOpacity:0}),t.animate().wait(e).to({fillOpacity:h,strokeOpacity:d},i,s)}function ex(t,e,i,s){t&&(eb(t.startSymbol,e,i,s),t.lines.forEach(t=>eb(t,e,i,s)),eb(t.line,e,i,s),eb(t.endSymbol,e,i,s))}function eS(t,e,i,s){t&&(eb(t.getTextShape(),e,i,s),eb(t.getBgRect(),e,i,s))}function eA(t,e,i,s){var r,n,a,o;t&&(t.setAttributes({fillOpacity:null!==(n=null===(r=t.attribute)||void 0===r?void 0:r.fillOpacity)&&void 0!==n?n:1,strokeOpacity:null!==(o=null===(a=t.attribute)||void 0===a?void 0:a.strokeOpacity)&&void 0!==o?o:1}),t.animate().wait(e).to({fillOpacity:0,strokeOpacity:0},i,s))}function ek(t,e,i,s){t&&(eA(t.startSymbol,e,i,s),t.lines.forEach(t=>eA(t,e,i,s)),eA(t.line,e,i,s),eA(t.endSymbol,e,i,s))}function ew(t,e,i,s){t&&(eA(t.getTextShape(),e,i,s),eA(t.getBgRect(),e,i,s))}function eT(t,e,i,s,r){let n=.1*i,a=.7*i,o=.1*i,l=.1*i;eb(t.startSymbol,s,n,r),t.lines.forEach(t=>t.setAttribute("clipRange",0)),t.lines.forEach((e,i)=>{let o=a/t.lines.length;e.animate().wait(s+n+i*o).to({clipRange:1},o,r)}),eb(t.endSymbol,s+n+a,o,r),eb(e.getTextShape(),s+n+a+o,l,r),eb(e.getBgRect(),s+n+a+o,l,r)}function eC(t,e,i,s,r){ex(t,s,i,r),eS(e,s,i,r)}function eM(t,e,i,s,r){eb(t,s,i,r),eS(e,s,i,r)}function eE(t,e,i,s,r,n){var a;ex(t,r,s,n),eb(e,r,s,n),(null===(a=i.getTextShape)||void 0===a?void 0:a.call(i))?eS(i,r,s,n):eb(i,r,s,n)}function eB(t,e,i,s,r,n){var a;let o=.1*s,l=.65*s,h=.05*s,d=.1*s,u=.1*s;eb(t.startSymbol,r,o,n),t.lines.forEach(t=>t.setAttribute("clipRange",0)),t.lines.forEach((e,i)=>{let s=l/t.lines.length;e.animate().wait(r+o+i*s).to({clipRange:1},s,n)}),eb(e,r+o+l,h,n),eb(t.endSymbol,r+o+l+h,d,n),(null===(a=i.getTextShape)||void 0===a?void 0:a.call(i))?(eb(i.getTextShape(),r+o+l+h+d,u,n),eb(i.getBgRect(),r+o+l+d,u,n)):eb(i,r+o+l+d,u,n)}function eO(t,e,i,s){let{enter:r,update:n,exit:a}=i;if("enter"===s){let{type:i,duration:s,delay:n,easing:a}=r;"clipIn"===i?eT(t,e,s,n,a):"fadeIn"===i&&eC(t,e,s,n,a)}else if("update"===s){let{type:i,duration:s,delay:r,easing:a}=n;"clipIn"===i?eT(t,e,s,r,a):"fadeIn"===i&&eC(t,e,s,r,a)}else if("exit"===s){let{duration:i,delay:s,easing:r}=a;ek(t,s,i,r),ew(e,s,i,r)}}function eI(t,e,i,s){let{enter:r,update:n,exit:a}=i;if("enter"===s){let{type:i,duration:s,delay:n,easing:a}=r;"fadeIn"===i&&eM(t,e,s,n,a)}else if("update"===s){let{type:i,duration:s,delay:r,easing:a}=n;"fadeIn"===i&&eM(t,e,s,r,a)}else if("exit"===s){let{duration:i,delay:s,easing:r}=a;eA(t,s,i,r),ew(e,s,i,r)}}function eR(t,e,i,s){let[r,n]=t,{enter:a,update:o,exit:l}=i;if("enter"===s){let{type:t,duration:i,delay:s,easing:o}=a;"fadeIn"===t?eE(r,n,e,i,s,o):"callIn"===t&&eB(r,n,e,i,s,o)}else if("update"===s){let{type:t,duration:i,delay:s,easing:a}=o;"fadeIn"===t?eE(r,n,e,i,s,a):"callIn"===t&&eB(r,n,e,i,s,a)}else if("exit"===s){var h;let{duration:t,delay:i,easing:s}=l;ek(r,i,t,s),eA(n,i,t,s),(null===(h=e.getTextShape)||void 0===h?void 0:h.call(e))?ew(e,i,t,s):eA(e,i,t,s)}}let eP={type:"clipIn",duration:500,easing:"linear",delay:0},eL={type:"fadeIn",duration:500,easing:"linear",delay:0},eD={type:"callIn",duration:500,easing:"linear",delay:0},eZ={type:"fadeOut",duration:500,easing:"linear",delay:0};e_(),(0,U.M)();class eF extends el{markerAnimate(t){eF._animate&&this._animationConfig&&eF._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}getLabel(){return this._label}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,R.Z)({},eF.defaultAttributes,t)),this.name="markArea",this.defaultUpdateAnimation=eL,this.defaultExitAnimation=eZ}getPointAttrByPosition(t){let{x1:e,x2:i,y1:s,y2:r}=this._area.AABBBounds,n={x:(e+i)/2,y:(s+r)/2};return(t.includes("left")||t.includes("Left"))&&(n.x=e),(t.includes("right")||t.includes("Right"))&&(n.x=i),(t.includes("top")||t.includes("Top"))&&(n.y=s),(t.includes("bottom")||t.includes("Bottom"))&&(n.y=r),n}setLabelPos(){var t;if(this._label&&this._area){let{label:e={}}=this.attribute,i=null!==(t=e.position)&&void 0!==t?t:"middle",s=this.getPointAttrByPosition(i);if(this._label.setAttributes(Object.assign(Object.assign({},s),{textStyle:Object.assign(Object.assign({},ec[i]),e.textStyle)})),this.attribute.limitRect&&e.confine){let{x:t,y:e,width:i,height:s}=this.attribute.limitRect;em(this._label,{x1:t,y1:e,x2:t+i,y2:e+s})}}}initMarker(t){let{points:e,label:i,areaStyle:s,state:r}=this.attribute,n=B.i.polygon(Object.assign({points:e},s));n.states=(0,R.Z)({},ey.n0,null==r?void 0:r.area),n.name="mark-area-polygon",this._area=n,t.add(n);let a=new tE.V(Object.assign(Object.assign({},i),{state:{panel:(0,R.Z)({},ey.n0,null==r?void 0:r.labelBackground),text:(0,R.Z)({},ey.n0,null==r?void 0:r.label)}}));a.name="mark-area-label",this._label=a,t.add(a),this.setLabelPos()}updateMarker(){let{points:t,label:e,areaStyle:i,state:s}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:t},i)),this._area.states=(0,R.Z)({},ey.n0,null==s?void 0:s.area)),this._label&&this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},e),{state:{panel:(0,R.Z)({},ey.n0,null==s?void 0:s.labelBackground),text:(0,R.Z)({},ey.n0,null==s?void 0:s.label)}})),this.setLabelPos()}isValidPoints(){let{points:t}=this.attribute;if(!t||t.length<3)return!1;let e=!0;return t.forEach(t=>{(0,en.Z)(t.x)&&(0,en.Z)(t.y)||(e=!1)}),e}}eF.defaultAttributes=eu;var ej=i(2449),eH=i(9904),ez=i(1697),eN=i(5890),eV=i(2732),eU=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};function eG(t,e){let i;if(e.coordinates){let t,s;let{coordinates:r,coordinateType:n,getSeriesByIdOrIndex:a}=e,o=eU(e,["coordinates","coordinateType","getSeriesByIdOrIndex"]);if((0,ts.Z)(r)){let i=e.getRelativeSeries();t=r(i.getData().getLatestData(),i)}else t=r;i=(t=(0,P.IX)(t)).map(t=>{let e=a(t.refRelativeSeriesId,t.refRelativeSeriesIndex);if("cartesian"===n){let{xField:i,yField:r}=e.getSpec(),{xFieldDim:n,xFieldIndex:a,yFieldDim:l,yFieldIndex:h}=t,d=i;(0,X.Z)(a)&&(d=(0,P.IX)(i)[a]),n&&(0,P.IX)(i).includes(n)&&(d=n);let u=r;(0,X.Z)(h)&&(u=(0,P.IX)(r)[h]),l&&(0,P.IX)(r).includes(l)&&(u=l),s=Object.assign({x:void 0,y:void 0},o),(0,eH.Z)(t[d])&&t1(t[d])?s.x={field:d,aggrType:t[d]}:s.x=(0,P.IX)(d).map(e=>t[e]),(0,eH.Z)(t[u])&&t1(t[u])?s.y={field:u,aggrType:t[u]}:s.y=(0,P.IX)(u).map(e=>t[e])}else if("polar"===n){let{valueField:i,categoryField:r}=e.getSpec(),{angleFieldDim:n,angleFieldIndex:a}=t,l=r;(0,X.Z)(a)&&(l=(0,P.IX)(r)[a]),n&&(0,P.IX)(r).includes(n)&&(l=n),s=Object.assign({angle:void 0,radius:void 0},o),(0,eH.Z)(t[l])&&t1(t[l])?s.angle={field:l,aggrType:t[l]}:s.angle=(0,P.IX)(l).map(e=>t[e]),(0,eH.Z)(t[i])&&t1(t[i])?s.radius={field:i,aggrType:t[i]}:s.radius=(0,P.IX)(i).map(e=>t[e])}return s.getRefRelativeSeries=()=>e,s})}else i=e;let s=[];return i.forEach(e=>{let i={x:null,y:null,angle:null,radius:null,areaName:null};if((0,X.Z)(e.x)){let s=e.x;(0,ta.Z)(s)?i.x=s.map(i=>eX(i,t,e)):i.x=eX(s,t,e)}if((0,X.Z)(e.y)){let s=e.y;(0,ta.Z)(s)?i.y=s.map(i=>eX(i,t,e)):i.y=eX(s,t,e)}if((0,X.Z)(e.angle)){let s=e.angle;(0,ta.Z)(s)?i.angle=s.map(i=>eX(i,t,e)):i.angle=eX(s,t,e)}if((0,X.Z)(e.radius)){let s=e.radius;(0,ta.Z)(s)?i.radius=s.map(i=>eX(i,t,e)):i.radius=eX(s,t,e)}if((0,X.Z)(e.areaName)){let s=e.areaName;i.areaName=eX(s,t,e)}e.getRefRelativeSeries&&(i.getRefRelativeSeries=e.getRefRelativeSeries),s.push(i)}),s}let eW={min:(t,e)=>{let i=t[0].latestData;return(0,eV.VV)(i,e.field)},max:(t,e)=>{let i=t[0].latestData;return(0,eV.Fp)(i,e.field)},sum:function(t,e){let i=t[0].latestData;return(0,eV.Sm)(i,e.field)},average:function(t,e){let i=t[0].latestData;return(0,eV.Y8)(i,e.field)},variance:function(t,e){let i=t[0].latestData;return(0,eV.CA)(i,e.field)},standardDeviation:function(t,e){let i=t[0].latestData;return(0,eV.IN)(i,e.field)},median:function(t,e){let i=t[0].latestData;return(0,eV.C2)(i,e.field)}};function eX(t,e,i){let s=i.getRelativeSeries(),r=i.getStartRelativeSeries(),n=i.getEndRelativeSeries(),a=s.getData().getLatestData(),o=r.getData().getLatestData(),l=n.getData().getLatestData();if((0,ts.Z)(t))return t(a,o,l,s,r,n);if((0,eN.Z)(t)){let{aggrType:i,field:s}=t;return eW[i](e,{field:s})}return t}function eY(t,e){if(e&&e.getRelativeSeries){let i=e.getRelativeSeries();if(i){let e=i.getViewData();return e&&e.latestData&&e.latestData.length?t:[]}}return t}class e$ extends C.H{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(t){return"cartesian"}static getSpecInfo(t){return(0,q.ts)(t,this.specKey,this.type,t=>!1!==t.visible&&this._getMarkerCoordinateType(t)===this.coordinateType)}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkerAttributeContext(){this._markAttributeContext={relativeSeries:this._relativeSeries,startRelativeSeries:this._startRelativeSeries,endRelativeSeries:this._endRelativeSeries,vchart:this._option.globalInstance}}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent(),this._buildMarkerAttributeContext()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(t,e,i){return(0,eH.Z)(e)&&t1(e)?{field:i.getSpec()[({x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"})[t]],aggrType:e}:e}_processSpecByDims(t){let e=this._relativeSeries,i={};return t.forEach(t=>i[t.dim]=this._getFieldInfoFromSpec(t.dim,t.specValue,e)),Object.assign(Object.assign({},i),this._getAllRelativeSeries())}_processSpecCoo(t){return Object.assign(Object.assign({coordinates:t.coordinates||t.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(t,e)=>this._getSeriesByIdOrIndex(t,e),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let t=[];(0,P.IX)(this._specifiedDataSeries).forEach(e=>{t=t.concat(e.getViewData().latestData)});let e=new ej.q;return e.registerParser("array",ez.Q),new t_.VO(e).parse(t,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var t,e,i;if(null===(t=this._spec.visible)||void 0===t||t){if(!this._markerComponent){let t=this._createMarkerComponent();t.name=null!==(e=this._spec.name)&&void 0!==e?e:this.type,t.id=null!==(i=this._spec.id)&&void 0!==i?i:`${this.type}-${this.id}`,this._markerComponent=t,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(t,e)=>{this._delegateEvent(this._markerComponent,t,e,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(t,e){var i,s;let r;return(r=null===(i=this._option.getSeriesInUserIdOrIndex((0,X.Z)(t)?[t]:[],[e]))||void 0===i?void 0:i[0])||(r=null!==(s=this._relativeSeries)&&void 0!==s?s:this._getFirstSeries()),r}_bindSeries(){let t=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(t.relativeSeriesId,t.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(t.startRelativeSeriesId,t.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(t.endRelativeSeriesId,t.endRelativeSeriesIndex),t.specifiedDataSeriesIndex&&"all"===t.specifiedDataSeriesIndex||t.specifiedDataSeriesId&&"all"===t.specifiedDataSeriesId?this._specifiedDataSeries=this._option.getAllSeries():(t.specifiedDataSeriesIndex||t.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(t.specifiedDataSeriesId,t.specifiedDataSeriesIndex))}initEvent(){"cartesian"!==this._relativeSeries.coordinate&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}onRender(t){}changeRegions(t){}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var t;if(this._firstSeries)return this._firstSeries;let e=(0,tn.Sr)(this._regions);return e?(this._firstSeries=e,e):(null===(t=this._option)||void 0===t||t.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(t,e,i){(0,te.Z)(this._spec.offsetX)||(this._layoutOffsetX=(0,tY.Mv)(this._spec.offsetX,e.width,e)),(0,te.Z)(this._spec.offsetY)||(this._layoutOffsetY=(0,tY.Mv)(this._spec.offsetY,e.height,e)),super.onLayoutStart(t,e,i)}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,$.X)(e,t)||(i.reRender=!0,i.reMake=!0,i.change=!0),i}_initCommonDataView(){let{options:t}=this._computeOptions(),e=this._getRelativeDataView();(0,td.U)(this._option.dataSet,"markerAggregation",eG),(0,td.U)(this._option.dataSet,"markerFilter",eY);let i=new t_.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});i.parse([e],{type:"dataview"}),i.transform({type:"markerAggregation",options:t}),i.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),i.target.on("change",()=>{this._markerLayout()}),this._markerData=i}}class eK extends e${constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=T.Ai.MarkArea}static _getMarkerCoordinateType(t){let{doAngleProcess:e,doRadiusProcess:i,doRadAngProcess:s}=es(t);return"polar"===t.coordinateType||e||i||s?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,s,r,n,a,o,l,h,d,u;let c=null!==(t=this._spec.label)&&void 0!==t?t:{},p={zIndex:this.layoutZIndex,interactive:null===(e=this._spec.interactive)||void 0===e||e,hover:null===(i=this._spec.interactive)||void 0===i||i,select:null===(s=this._spec.interactive)||void 0===s||s,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:t9((0,Y.h_)(null===(r=this._spec.area)||void 0===r?void 0:r.style),this._markerData,this._markAttributeContext),clipInRange:null!==(n=this._spec.clip)&&void 0!==n&&n,label:t4(c,this._markerData,this._markAttributeContext),state:{area:t7(null===(a=this._spec.area)||void 0===a?void 0:a.state,this._markerData,this._markAttributeContext),label:t7(null===(o=this._spec.label)||void 0===o?void 0:o.state,this._markerData,this._markAttributeContext),labelBackground:t7(null===(d=null===(h=null===(l=this._spec)||void 0===l?void 0:l.label)||void 0===h?void 0:h.labelBackground)||void 0===d?void 0:d.state,this._markerData,this._markAttributeContext)},animation:null!==(u=this._spec.animation)&&void 0!==u&&u,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(p)}_markerLayout(){var t,e,i,s;let r;let n=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,h=this._relativeSeries,d=this._computePointsAttr(),u=this._getRelativeDataView().latestData,c=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:u;if(n.clip||(null===(t=n.label)||void 0===t?void 0:t.confine)){let{minX:t,maxX:e,minY:i,maxY:s}=t6([o.getRegion(),l.getRegion(),h.getRegion()]);r={x:t,y:i,width:e-t,height:s-i}}this._markerComponent&&this._markerComponent.setAttributes(Object.assign(Object.assign({},d),{label:Object.assign(Object.assign({},null===(e=this._markerComponent.attribute)||void 0===e?void 0:e.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(c,u):null===(s=null===(i=this._markerComponent.attribute)||void 0===i?void 0:i.label)||void 0===s?void 0:s.text}),limitRect:r,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}_initDataView(){let{doXProcess:t,doYProcess:e,doXYProcess:i,doAngleProcess:s,doRadiusProcess:r,doRadAngProcess:n,doCoordinatesProcess:a}=es(this._spec);if(!(t||e||i||s||r||n||a))return null;this._initCommonDataView()}}eK.specKey="markArea";class eq extends eK{constructor(){super(...arguments),this.type=M.L.markArea,this.name=M.L.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(t){return new eF(t)}_computePointsAttr(){var t;let e=this._spec,i=this._markerData,s=this._startRelativeSeries,r=this._endRelativeSeries,n=this._relativeSeries,{doXProcess:a,doYProcess:o,doXYProcess:l,doCoordinatesProcess:h}=es(e),d=(0,X.Z)(e.positions),u=null!==(t=e.autoRange)&&void 0!==t&&t,c=[],p=[];if(l){let[t,e]=t2(i,s,r,n,u);t&&t.length&&e&&e.length&&(c=[{x:t[0].x,y:e[0].y},t[0],{x:e[0].x,y:t[0].y},e[0]])}else if(a||o){let[t,e]=t2(i,s,r,n,u);t&&t.length&&e&&e.length&&(c=[...t,e[1],e[0]])}else h?c=t3(i,n,u,e.coordinatesOffset):d&&(c=t8(e.positions,n,e.regionRelative));return{points:c}}_computeOptions(){let t;let e=this._spec,{doXProcess:i,doYProcess:s,doXYProcess:r,doCoordinatesProcess:n}=es(e);return r?t=[this._processSpecByDims([{dim:"x",specValue:e.x},{dim:"y",specValue:e.y}]),this._processSpecByDims([{dim:"x",specValue:e.x1},{dim:"y",specValue:e.y1}])]:i?t=[this._processSpecByDims([{dim:"x",specValue:e.x}]),this._processSpecByDims([{dim:"x",specValue:e.x1}])]:s?t=[this._processSpecByDims([{dim:"y",specValue:e.y}]),this._processSpecByDims([{dim:"y",specValue:e.y1}])]:n&&(t=this._processSpecCoo(e)),{options:t}}}eq.type=M.L.markArea,eq.coordinateType="cartesian";class eJ extends el{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=eP,this.defaultExitAnimation=eZ}getLine(){return this._line}getLabel(){return this._label}setLabelPos(){let{label:t={},limitRect:e}=this.attribute,{position:i,confine:s,autoRotate:r}=t,n=this.getPointAttrByPosition(i),a=i.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(this._label.setAttributes(Object.assign(Object.assign({},n.position),{angle:r?this.getRotateByAngle(n.angle):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(i,a,r)),t.textStyle)})),e&&s){let{x:t,y:i,width:s,height:r}=e;em(this._label,{x1:t,y1:i,x2:t+s,y2:i+r})}}initMarker(t){let{label:e,state:i}=this.attribute,s=this.createSegment();s.name="mark-common-line-line",this._line=s,t.add(s);let r=new tE.V(Object.assign(Object.assign({},e),{state:{panel:(0,R.Z)({},ey.n0,null==i?void 0:i.labelBackground),text:(0,R.Z)({},ey.n0,null==i?void 0:i.label)}}));r.name="mark-common-line-label",this._label=r,t.add(r),this.setLabelPos()}updateMarker(){let{label:t,state:e}=this.attribute;this.setLineAttributes(),this._label&&(this._label.setAttributes(Object.assign(Object.assign({dx:0,dy:0},t),{state:{panel:(0,R.Z)({},ey.n0,null==e?void 0:e.labelBackground),text:(0,R.Z)({},ey.n0,null==e?void 0:e.label)}})),this.setLabelPos())}}var eQ=i(114),e0=i(3745);e_(),(0,ev.j)();class e1 extends eJ{markerAnimate(t){e1._animate&&this._animationConfig&&e1._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,R.Z)({},e1.defaultAttributes,t)),this.name="markLine"}getPointAttrByPosition(t){var e;let{label:i={}}=this.attribute,{refX:s=0,refY:r=0}=i,n=this._line.getMainSegmentPoints(),a=null!==(e=this._line.getEndAngle())&&void 0!==e?e:0,o=((0,e0.WF)(a),a),l=s*Math.cos(o)+r*Math.cos(o-Math.PI/2),h=s*Math.sin(o)+r*Math.sin(o-Math.PI/2);return t.includes("start")||t.includes("Start")?{position:{x:n[0].x+l,y:n[0].y+h},angle:o}:t.includes("middle")||t.includes("Middle")?{position:{x:(n[0].x+n[n.length-1].x)/2+l,y:(n[0].y+n[n.length-1].y)/2+h},angle:o}:{position:{x:n[n.length-1].x+l,y:n[n.length-1].y+h},angle:o}}getRotateByAngle(t){var e;return((0,e0.WF)(t)?t:t-Math.PI)+(null!==(e=this.attribute.label.refAngle)&&void 0!==e?e:0)}getTextStyle(t,e,i){return(0,e0.U4)(Math.abs(e),Math.PI/2,.001)||(0,e0.U4)(Math.abs(e),3*Math.PI/2,.001)?(0,e0.ic)(i,e,t):(0,e0.WF)(e)?ed.postiveXAxis[t]:ed.negativeXAxis[t]}createSegment(){let{points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:r,multiSegment:n,state:a}=this.attribute;return new eQ.X({points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:r,multiSegment:n,pickable:!1,state:{line:(0,R.Z)({},ey.n0,null==a?void 0:a.line),startSymbol:(0,R.Z)({},ey.n0,null==a?void 0:a.lineStartSymbol),endSymbol:(0,R.Z)({},ey.n0,null==a?void 0:a.lineEndSymbol)}})}setLineAttributes(){let{points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:r,multiSegment:n,state:a}=this.attribute;this._line&&this._line.setAttributes({points:t,startSymbol:e,endSymbol:i,lineStyle:s,mainSegmentIndex:r,multiSegment:n,state:{line:(0,R.Z)({},ey.n0,null==a?void 0:a.line),startSymbol:(0,R.Z)({},ey.n0,null==a?void 0:a.lineStartSymbol),endSymbol:(0,R.Z)({},ey.n0,null==a?void 0:a.lineEndSymbol)}})}isValidPoints(){let{points:t}=this.attribute;if(!t||t.length<2)return!1;let e=!0;return t.forEach(t=>{if(t.length)t.forEach(t=>{(0,en.Z)(t.x)&&(0,en.Z)(t.y)||(e=!1)});else if(!(0,en.Z)(t.x)||!(0,en.Z)(t.y))return void(e=!1)}),e}}function e2(t,e){let i=t[0].latestData;return(0,eV.VC)(i,e.fieldX,e.fieldY)}e1.defaultAttributes=eh;class e3 extends e${constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=T.Ai.MarkLine}static _getMarkerCoordinateType(t){let{doAngleProcess:e,doRadiusProcess:i,doAngRadRad1Process:s,doRadAngAng1Process:r,doRadAngProcess:n}=ei(t);return"polar"===t.coordinateType||e||i||s||r||n?"polar":"cartesian"}_createMarkerComponent(){var t,e,i,s,r,n,a,o,l,h,d,u,c,p,g,m,f,v,_;let{label:y={},startSymbol:b={},endSymbol:x={}}=this._spec,S={zIndex:this.layoutZIndex,interactive:null===(t=this._spec.interactive)||void 0===t||t,hover:null===(e=this._spec.interactive)||void 0===e||e,select:null===(i=this._spec.interactive)||void 0===i||i,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:t9((0,Y.h_)(null===(s=this._spec.line)||void 0===s?void 0:s.style),this._markerData,this._markAttributeContext),clipInRange:null!==(r=this._spec.clip)&&void 0!==r&&r,label:t4(y,this._markerData,this._markAttributeContext),state:{line:t7(null!==(a=null===(n=this._spec.line)||void 0===n?void 0:n.state)&&void 0!==a?a:{},this._markerData,this._markAttributeContext),lineStartSymbol:t7(null!==(l=null===(o=this._spec.startSymbol)||void 0===o?void 0:o.state)&&void 0!==l?l:{},this._markerData,this._markAttributeContext),lineEndSymbol:t7(null!==(d=null===(h=this._spec.endSymbol)||void 0===h?void 0:h.state)&&void 0!==d?d:{},this._markerData,this._markAttributeContext),label:t7(null!==(p=null===(c=null===(u=this._spec)||void 0===u?void 0:u.label)||void 0===c?void 0:c.state)&&void 0!==p?p:{},this._markerData,this._markAttributeContext),labelBackground:t7(null!==(v=null===(f=null===(m=null===(g=this._spec)||void 0===g?void 0:g.label)||void 0===m?void 0:m.labelBackground)||void 0===f?void 0:f.state)&&void 0!==v?v:{},this._markerData,this._markAttributeContext)},animation:null!==(_=this._spec.animation)&&void 0!==_&&_,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return b.visible?S.startSymbol=Object.assign(Object.assign({},b),{visible:!0,style:t9((0,Y.h_)(b.style),this._markerData,this._markAttributeContext)}):S.startSymbol={visible:!1},x.visible?S.endSymbol=Object.assign(Object.assign({},x),{visible:!0,style:t9((0,Y.h_)(x.style),this._markerData,this._markAttributeContext)}):S.endSymbol={visible:!1},this._newMarkLineComponent(S)}_getUpdateMarkerAttrs(){var t,e,i,s;let r;let n=this._spec,a=this._markerData,o=this._startRelativeSeries,l=this._endRelativeSeries,h=this._relativeSeries,d=this._computePointsAttr(),u=h.getViewData().latestData,c=a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData;if(n.clip||(null===(t=n.label)||void 0===t?void 0:t.confine)){let{minX:t,maxX:e,minY:i,maxY:s}=t6([o.getRegion(),l.getRegion(),h.getRegion()]);r={x:t,y:i,width:e-t,height:s-i}}let p=null!==(i=null===(e=this._markerComponent)||void 0===e?void 0:e.attribute)&&void 0!==i?i:{},g=Object.assign(Object.assign({},p.label),{text:this._spec.label.formatMethod?this._spec.label.formatMethod(c,u):null===(s=p.label)||void 0===s?void 0:s.text});return Object.assign(Object.assign({},d),{label:g,limitRect:r,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var t;let e=this._getUpdateMarkerAttrs();null===(t=this._markerComponent)||void 0===t||t.setAttributes(e)}_initDataView(){let t=this._spec,e="coordinates"in t,{doXProcess:i,doYProcess:s,doXYY1Process:r,doYXX1Process:n,doXYProcess:a,doAngleProcess:o,doRadiusProcess:l,doAngRadRad1Process:h,doRadAngAng1Process:d,doRadAngProcess:u}=ei(t);if(this._markerData=this._getRelativeDataView(),!(i||s||r||n||a||o||l||h||d||u||e))return;(0,td.U)(this._option.dataSet,"markerAggregation",eG),(0,td.U)(this._option.dataSet,"markerRegression",e2),(0,td.U)(this._option.dataSet,"markerFilter",eY);let{options:c,needAggr:p,needRegr:g,processData:m}=this._computeOptions(),f=new t_.VO(this._option.dataSet);f.parse([m],{type:"dataview"}),p&&f.transform({type:"markerAggregation",options:c}),g&&f.transform({type:"markerRegression",options:c}),f.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),f.target.on("change",()=>{this._markerLayout()}),this._markerData=f}}e3.specKey="markLine";class e5 extends e3{constructor(){super(...arguments),this.type=M.L.markLine,this.name=M.L.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(t){return new e1(t)}_computePointsAttr(){var t;let e=this._spec,i=this._markerData,s=this._startRelativeSeries,r=this._endRelativeSeries,n=this._relativeSeries,a=(0,X.Z)(e.coordinates),o=(0,X.Z)(e.process),l=o&&(0,X.Z)(e.process.x),h=o&&(0,X.Z)(e.process.y),d=(0,X.Z)(e.positions),u=null!==(t=e.autoRange)&&void 0!==t&&t,{doXProcess:c,doYProcess:p,doXYY1Process:g,doYXX1Process:m,doXYProcess:f,doCoordinatesProcess:v}=ei(e),_=[];if(c||g||p||m||f||a&&l||a&&h){let t=t2(i,s,r,n,u);_=1===t.length?t[0]:t.map(t=>t[0])}else v?_=t3(i,n,u,e.coordinatesOffset):d&&(_=t8(e.positions,n,e.regionRelative));return{points:_}}_markerLayout(){var t,e,i,s,r,n,a,o;let l=this._getUpdateMarkerAttrs();if("type-step"===this._spec.type){let o,h;let d=this._startRelativeSeries,u=this._endRelativeSeries,{multiSegment:c,mainSegmentIndex:p}=this._spec.line||{},{connectDirection:g,expandDistance:m=0}=this._spec;if((0,tY.hU)(m)){let t=d.getRegion(),e=t.getLayoutStartPoint(),i=u.getRegion(),s=i.getLayoutStartPoint();if("bottom"===g||"top"===g){let r=Math.abs(Math.min(e.y,s.y)-Math.max(e.y+t.getLayoutRect().height,s.y+i.getLayoutRect().height));o=Number(m.substring(0,m.length-1))*r/100}else{let r=Math.abs(Math.min(e.x,s.x)-Math.max(e.x+t.getLayoutRect().width,s.x+i.getLayoutRect().width));o=Number(m.substring(0,m.length-1))*r/100}}else o=m;let{points:f,label:v,limitRect:_}=l,y=function(t,e,i,s=0){let r=[],n=t.y-e.y,a=t.x-e.x;switch(i){case"top":r.push(t),r.push({x:t.x,y:n>0?t.y-s-Math.abs(n):t.y-s}),r.push({x:e.x,y:n>0?e.y-s:e.y-s-Math.abs(n)}),r.push(e);break;case"bottom":r.push(t),r.push({x:t.x,y:n<0?t.y+s+Math.abs(n):t.y+s}),r.push({x:e.x,y:n<0?e.y+s:e.y+s+Math.abs(n)}),r.push(e);break;case"left":r.push(t),r.push({x:a>0?t.x-s-Math.abs(a):t.x-s,y:t.y}),r.push({x:a>0?e.x-s:e.x-s-Math.abs(a),y:e.y}),r.push(e);break;case"right":r.push(t),r.push({x:a>0?t.x+s:t.x+s+Math.abs(a),y:t.y}),r.push({x:a>0?e.x+s+Math.abs(a):e.x+s,y:e.y}),r.push(e)}return r}(f[0],f[1],g,o);h=c&&(0,X.Z)(p)?{position:"middle",autoRotate:!1,refX:0,refY:0}:Object.assign(Object.assign({position:"start",autoRotate:!1},function(t,e,i,s=0){let r=t.y-e.y,n=t.x-e.x;return"bottom"===i?{dx:n>0?-n/2:Math.abs(n/2),dy:r>0?s:Math.abs(r)+s}:"top"===i?{dx:n>0?-Math.abs(n/2):+Math.abs(n/2),dy:r>0?-(Math.abs(r)+s):-s}:"left"===i?{dx:n>0?-n-s:-s,dy:r>0?-r/2:Math.abs(r/2)}:"right"===i?{dx:n>0?s:Math.abs(n)+s,dy:r>0?-r/2:Math.abs(r/2)}:{}}(f[0],f[1],g,o)),{refX:0,refY:0}),(0,en.Z)(null===(t=this._spec.label)||void 0===t?void 0:t.refX)&&(h.refX+=this._spec.label.refX),(0,en.Z)(null===(e=this._spec.label)||void 0===e?void 0:e.refY)&&(h.refY+=this._spec.label.refY),(0,en.Z)(null===(i=this._spec.label)||void 0===i?void 0:i.dx)&&(h.dx=(h.dx||0)+this._spec.label.dx),(0,en.Z)(null===(s=this._spec.label)||void 0===s?void 0:s.dy)&&(h.dy=(h.dy||0)+this._spec.label.dy);let b=null!==(n=null===(r=this._markerComponent)||void 0===r?void 0:r.attribute)&&void 0!==n?n:{};null===(a=this._markerComponent)||void 0===a||a.setAttributes({points:c?[[y[0],y[1]],[y[1],y[2]],[y[2],y[3]]]:y,label:Object.assign(Object.assign(Object.assign({},v),h),{textStyle:Object.assign(Object.assign({},b.label.textStyle),{textAlign:"center",textBaseline:"middle"})}),limitRect:_,multiSegment:c,mainSegmentIndex:p,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else null===(o=this._markerComponent)||void 0===o||o.setAttributes(l)}_computeOptions(){let t,e=this._getRelativeDataView(),i=!0,s=!1,r=this._spec,n=this._relativeSeries,{doXProcess:a,doYProcess:o,doXYY1Process:l,doYXX1Process:h,doXYProcess:d,doCoordinatesProcess:u}=ei(r);if(d)t=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x1},{dim:"y",specValue:r.y1}])];else if(a)t=[this._processSpecByDims([{dim:"x",specValue:r.x}])];else if(o)t=[this._processSpecByDims([{dim:"y",specValue:r.y}])];else if(l)t=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y1}])];else if(h)t=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x1},{dim:"y",specValue:r.y}])];else if(u){if(t=this._processSpecCoo(r),i=!1,e=new t_.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([n.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:t}),r.process&&"x"in r.process&&(t=[this._processSpecByDims([{dim:"x",specValue:r.process.x}])],i=!0),r.process&&"y"in r.process&&(t=t=[this._processSpecByDims([{dim:"y",specValue:r.process.y}])],i=!0),r.process&&"xy"in r.process){let{xField:e,yField:i}=n.getSpec();t={fieldX:e,fieldY:i},s=!0}}else i=!1;return{options:t,needAggr:i,needRegr:s,processData:e}}}e5.type=M.L.markLine,e5.coordinateType="cartesian";var e8=i(1121);(0,ev.O)();class e6 extends eQ.X{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,R.Z)({},eQ.X.defaultAttributes,t)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){let t=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getEndAngle(){let t=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(t){return this.isReverseArc?t+Math.PI:t}_computeEndRotate(t){return this.isReverseArc?t:t+Math.PI}render(){this.removeAllChild(!0),this._reset();let{startSymbol:t,endSymbol:e,lineStyle:i,state:s,visible:r=!0,radius:n,startAngle:a,endAngle:o,center:l}=this.attribute;if(!r)return;this._startAngle=a,this._endAngle=o,this.isReverseArc=a>o;let h={x:l.x+n*Math.cos(this._startAngle),y:l.y+n*Math.sin(this._startAngle)},d={x:l.x+n*Math.cos(this._endAngle),y:l.y+n*Math.sin(this._endAngle)};this._mainSegmentPoints=[h,d];let u=this._renderSymbol(t,this._mainSegmentPoints,"start"),c=this._renderSymbol(e,this._mainSegmentPoints,"end");this.startSymbol=u,this.endSymbol=c;let p=B.i.arc(Object.assign({x:l.x,y:l.y,startAngle:a,endAngle:o,innerRadius:n,outerRadius:n},i));p.name=`${this.name}-line`,p.id=this._getNodeId("arc"),(0,e8.Z)(null==s?void 0:s.line)||(p.states=[].concat(s.line)[0]),this.add(p),this.line=p}}let e4=(t,e)=>{let i=Math.atan2(t,e);return i<0?i+2*Math.PI:i};e_(),(0,ev.j)(),(0,ev.O)(),(0,tR.k)(),(0,ef.i)(),(0,tL.N)();class e7 extends el{markerAnimate(t){e7._animate&&this._animationConfig&&e7._animate([this._line,this._decorativeLine],this._item,this._animationConfig,t)}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,R.Z)({},e7.defaultAttributes,t)),this.name="markPoint",this.defaultUpdateAnimation=eD,this.defaultExitAnimation=eZ,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(t,e,i,s,r){return(0,e0.U4)(Math.abs(s),Math.PI/2,.001)||(0,e0.U4)(Math.abs(s),3*Math.PI/2,.001)?(0,e0.ic)(t,s,r):(0,e0.WF)(s)?ep.postiveXAxis[r]:ep.negativeXAxis[r]}setItemAttributes(t,e,i,s,r){var n,a;if(!t)return;let{autoRotate:o=!0,refX:l=0,refY:h=0,refAngle:d=0,textStyle:u={},richTextStyle:c={},imageStyle:p={},position:m=g.middle}=e,{state:f}=this.attribute,v=(null===(n=this._line)||void 0===n?void 0:n.getEndAngle())||0,_=l*Math.cos(v)+h*Math.cos(v-Math.PI/2),y=l*Math.sin(v)+h*Math.sin(v-Math.PI/2);if("text"===r){let r=s.x-i.x,n=s.y-i.y;t.setAttributes(Object.assign(Object.assign({},u),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(o,r,n,v,null!==(a=e.position)&&void 0!==a?a:"end")),u.textStyle),state:{panel:(0,R.Z)({},ey.n0,null==f?void 0:f.textBackground),text:(0,R.Z)({},ey.n0,null==f?void 0:f.text)}}))}else"richText"===r?(t.setAttributes({dx:this.getItemDx(t,m,c)+(c.dx||0),dy:this.getItemDy(t,m,c)+(c.dy||0)}),t.states=(0,R.Z)({},ey.n0,null==f?void 0:f.richText)):"image"===r&&(t.setAttributes({dx:this.getItemDx(t,m,p)+(p.dx||0),dy:this.getItemDy(t,m,p)+(p.dy||0)}),t.states=(0,R.Z)({},ey.n0,null==f?void 0:f.image));let b=(0,e0.WF)(v)?v:v-Math.PI;t.setAttributes({x:s.x+(_||0),y:s.y+(y||0),angle:o&&b+d})}getItemDx(t,e,i){var s,r;let n=null!==(r=null===(s=null==t?void 0:t.AABBBounds)||void 0===s?void 0:s.width())&&void 0!==r?r:(null==i?void 0:i.width)||0;return e.includes("inside")?-n:0}getItemDy(t,e,i){var s,r;let n=null!==(r=null===(s=null==t?void 0:t.AABBBounds)||void 0===s?void 0:s.height())&&void 0!==r?r:(null==i?void 0:i.height)||0;return e.includes("top")||e.includes("Top")?-n:e.includes("middle")||e.includes("Middle")?-n/2:0}initItem(t,e,i){let s;let{state:r}=this.attribute,{type:n="text",symbolStyle:a,richTextStyle:o,imageStyle:l,renderCustomCallback:h}=t;return"symbol"===n?(s=B.i.symbol(Object.assign(Object.assign({},i),a))).states=(0,R.Z)({},ey.n0,null==r?void 0:r.symbol):"text"===n?s=new tE.V(Object.assign(Object.assign({},i),{state:{panel:(0,R.Z)({},ey.n0,null==r?void 0:r.textBackground),text:(0,R.Z)({},ey.n0,null==r?void 0:r.text)}})):"richText"===n?(s=B.i.richtext(Object.assign(Object.assign({},i),o))).states=(0,R.Z)({},ey.n0,null==r?void 0:r.richText):"image"===n?(s=B.i.image(Object.assign(Object.assign({},i),l))).states=(0,R.Z)({},ey.n0,null==r?void 0:r.image):"custom"===n&&h&&((s=h()).states=(0,R.Z)({},ey.n0,null==r?void 0:r.customMark)),s.name=`mark-point-${n}`,this.setItemAttributes(s,t,e,i,n),s}getItemLineAttr(t,e,i){let s=[],r={x:0,y:0},n=0,a=0,o=0,{type:l="type-s",arcRatio:h=.8}=t,d=i.x-e.x,u=i.y-e.y;if(this._isStraightLine=(0,e0.U4)(d,0,.001)||(0,e0.U4)(u,0,.001),this._isArcLine){let{x:t,y:e}=this.attribute.position,{x:s,y:l}=i,d=(t+s)/2,u=d+h*(l>e?-1:1)*d,c=(e===l?0:-(t-s)/(e-l))*(u-d)+(e+l)/2;a=e4(e-c,t-u),o=e4(l-c,s-u),r={x:u,y:c};let p=Math.sqrt((u-t)*(u-t)+(c-e)*(c-e)),g=this.attribute.targetSymbol.style.size/2;a+=2*Math.acos(Math.sqrt(1-g*g/(4*p*p))),h>0?o<a&&(o+=2*Math.PI):a<o&&(a+=2*Math.PI),n=Math.sqrt((u-t)*(u-t)+(c-e)*(c-e))}else s="type-do"!==l||this._isStraightLine?"type-po"!==l||this._isStraightLine?"type-op"!==l||this._isStraightLine?[e,i]:[e,{x:e.x,y:i.y},i]:[e,{x:i.x,y:e.y},i]:[e,{x:(e.x+i.x)/2,y:i.y},i];return{points:s=(0,e0.Bh)(s),center:r,radius:n,startAngle:a,endAngle:o}}reDrawLine(t,e){this._line.release();let{startSymbol:i,endSymbol:s,lineStyle:r,type:n="type-s"}=t,{state:a}=this.attribute,o=this._isArcLine?e6:eQ.X;this._container.removeChild(this._line),this._line=new o(Object.assign(Object.assign({},e),{pickable:!1,startSymbol:i,endSymbol:s,lineStyle:r,visible:t.visible,state:{line:(0,R.Z)({},ey.n0,null==a?void 0:a.line),startSymbol:(0,R.Z)({},ey.n0,null==a?void 0:a.lineStartSymbol),endSymbol:(0,R.Z)({},ey.n0,null==a?void 0:a.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(t,e,i){if(this._line){let{startSymbol:s,endSymbol:r,lineStyle:n,type:a="type-s"}=t,{state:o}=this.attribute,l=this.getItemLineAttr(t,e,i);this._isArcLine&&"arc-segment"===this._line.key||!this._isArcLine&&"segment"===this._line.key?this._line.setAttributes(Object.assign(Object.assign({},l),{startSymbol:s,endSymbol:r,lineStyle:n,visible:t.visible,state:{line:(0,R.Z)({},ey.n0,null==o?void 0:o.line),startSymbol:(0,R.Z)({},ey.n0,null==o?void 0:o.lineStartSymbol),endSymbol:(0,R.Z)({},ey.n0,null==o?void 0:o.lineEndSymbol)}})):this.reDrawLine(t,l)}}getDecorativeLineAttr(t){var e;let i=(null===(e=null==t?void 0:t.decorativeLine)||void 0===e?void 0:e.length)||10,s=this._line.getEndAngle()||0;return{startPointOffsetX:i/2*Math.cos(s-Math.PI/2),startPointOffsetY:i/2*Math.sin(s-Math.PI/2),endPointOffsetX:-i/2*Math.cos(s-Math.PI/2),endPointOffsetY:-i/2*Math.sin(s-Math.PI/2)}}setDecorativeLineAttr(t,e,i){var s;if(this._decorativeLine){let{lineStyle:r}=t,{startPointOffsetX:n,startPointOffsetY:a,endPointOffsetX:o,endPointOffsetY:l}=this.getDecorativeLineAttr(t);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:e.x+n,y:e.y+a},{x:e.x+o,y:e.y+l}]},r),{visible:i})),this._decorativeLine.states=(0,R.Z)({},ey.n0,null===(s=this.attribute.state)||void 0===s?void 0:s.line)}}setTargetItemAttributes(t,e){var i,s;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:e.x,y:e.y,visible:null!==(i=t.visible)&&void 0!==i&&i,size:t.size},t.style)),this._targetItem.states=(0,R.Z)({},ey.n0,null===(s=this.attribute.state)||void 0===s?void 0:s.targetItem))}setAllOfItemsAttr(t,e){var i;let{position:s,itemLine:r={},itemContent:n={},limitRect:a,targetSymbol:o}=this.attribute,{type:l="text",confine:h}=n;if(a&&h){let{x:t,y:i,width:s,height:r}=a,{dx:n,dy:o}=eg(this._item,{x1:t,y1:i,x2:t+s,y2:i+r});e.x=e.x+n,e.y=e.y+o}this.setTargetItemAttributes(o,s),this.setItemLineAttr(r,t,e),this.setItemAttributes(this._item,n,t,e,l),this.setDecorativeLineAttr(r,e,null===(i=r.decorativeLine)||void 0===i?void 0:i.visible)}computeNewPositionAfterTargetItem(t){var e,i;let s;let{itemContent:r={},targetSymbol:n,itemLine:a}=this.attribute,{offsetX:o=0,offsetY:l=0}=r,{offset:h=0,style:d,visible:u=!1,size:c}=n,p=u?null!==(i=null!==(e=d.size)&&void 0!==e?e:c)&&void 0!==i?i:20:0;return s="type-do"===a.type?e4(l,o/2):"type-po"===a.type?e4(0,o):"type-op"===a.type?e4(l,0):e4(l,o),{newPosition:{x:t.x+(p/2+h)*Math.cos(s),y:t.y+(p/2+h)*Math.sin(s)},newItemPosition:{x:t.x+(p/2+h)*Math.cos(s)+o,y:t.y+(p/2+h)*Math.sin(s)+l}}}initMarker(t){let{position:e,itemContent:i={},itemLine:s}=this.attribute,{type:r="type-s",arcRatio:n=.8}=s,{offsetX:a=0,offsetY:o=0}=i;this._isStraightLine=(0,e0.U4)(a,0,.001)||(0,e0.U4)(o,0,.001),this._isArcLine="type-arc"===r&&0!==n&&!this._isStraightLine;let{newPosition:l,newItemPosition:h}=this.computeNewPositionAfterTargetItem(e),d=new(this._isArcLine?e6:eQ.X)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});d.name="mark-point-line",this._line=d,t.add(d);let u=B.i.line({points:[]});u.name="mark-point-decorativeLine",this._decorativeLine=u,t.add(u);let c=B.i.symbol({});c.name="mark-point-targetItem",this._targetItem=c,t.add(this._targetItem);let p=this.initItem(i,l,h);this._item=p,t.add(p),this.setAllOfItemsAttr(l,h)}updateMarker(){let{position:t,itemContent:e={},itemLine:i}=this.attribute,{type:s="text"}=e,{type:r="type-s",arcRatio:n=.8}=i,{offsetX:a=0,offsetY:o=0}=e;this._isStraightLine=(0,e0.U4)(a,0,.001)||(0,e0.U4)(o,0,.001);let l="type-arc"===r&&0!==n&&!this._isStraightLine,{newPosition:h,newItemPosition:d}=this.computeNewPositionAfterTargetItem(t);l!==this._isArcLine?(this._isArcLine=l,this.reDrawLine(i,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=l,this.setItemAttributes(this._item,e,h,d,s),this.setAllOfItemsAttr(h,d)}isValidPoints(){let{position:t}=this.attribute;return!(!(0,en.Z)(t.x)||!(0,en.Z)(t.y))}}e7.defaultAttributes={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10,symbolStyle:{symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},textStyle:{dx:0,dy:0},imageStyle:{width:80,height:80},richTextStyle:{width:100,height:100}}};var e9=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class it extends e${constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=T.Ai.MarkPoint}static _getMarkerCoordinateType(t){let{doPolarProcess:e,doGeoProcess:i}=er(t);return"polar"===t.coordinateType||e?"polar":"geo"===t.coordinateType||i?"geo":"cartesian"}_createMarkerComponent(){var t,e,i,s,r,n,a,o,l,h,d,u,c,p,g,m,f,v,_,y,b,x,S,A,k,w,T,C;let{itemContent:M={},itemLine:E={},targetSymbol:B={}}=this._spec,{text:O={},symbol:I,image:R,richText:P}=M,L=e9(M,["text","symbol","image","richText"]),D={zIndex:this.layoutZIndex,interactive:null===(t=this._spec.interactive)||void 0===t||t,hover:null===(e=this._spec.interactive)||void 0===e||e,select:null===(i=this._spec.interactive)||void 0===i||i,position:{x:0,y:0},clipInRange:null!==(s=this._spec.clip)&&void 0!==s&&s,itemContent:Object.assign({offsetX:et(M.offsetX,this._relativeSeries.getRegion()),offsetY:et(M.offsetX,this._relativeSeries.getRegion())},L),targetSymbol:{offset:null!==(r=B.offset)&&void 0!==r?r:0,visible:null!==(n=B.visible)&&void 0!==n&&n,size:null!==(a=B.size)&&void 0!==a?a:20,style:t9(B.style,this._markerData,this._markAttributeContext)},state:{line:t7(null!==(l=null===(o=this._spec.itemLine.line)||void 0===o?void 0:o.state)&&void 0!==l?l:{},this._markerData,this._markAttributeContext),lineStartSymbol:t7(null!==(d=null===(h=this._spec.itemLine.startSymbol)||void 0===h?void 0:h.state)&&void 0!==d?d:{},this._markerData,this._markAttributeContext),lineEndSymbol:t7(null!==(c=null===(u=this._spec.itemLine.endSymbol)||void 0===u?void 0:u.state)&&void 0!==c?c:{},this._markerData,this._markAttributeContext),symbol:t7(null!==(g=null===(p=this._spec.itemContent.symbol)||void 0===p?void 0:p.state)&&void 0!==g?g:{},this._markerData,this._markAttributeContext),image:t7(null!==(f=null===(m=this._spec.itemContent.image)||void 0===m?void 0:m.state)&&void 0!==f?f:{},this._markerData,this._markAttributeContext),text:t7(null!==(_=null===(v=this._spec.itemContent.text)||void 0===v?void 0:v.state)&&void 0!==_?_:{},this._markerData,this._markAttributeContext),textBackground:t7(null===(b=null===(y=this._spec.itemContent.text)||void 0===y?void 0:y.labelBackground)||void 0===b?void 0:b.state,this._markerData,this._markAttributeContext),richText:t7(null!==(S=null===(x=this._spec.itemContent.richText)||void 0===x?void 0:x.state)&&void 0!==S?S:{},this._markerData,this._markAttributeContext),customMark:t7(null!==(k=null===(A=this._spec.itemContent.customMark)||void 0===A?void 0:A.state)&&void 0!==k?k:{},this._markerData,this._markAttributeContext),targetItem:t7(null!==(T=null===(w=this._spec.targetSymbol)||void 0===w?void 0:w.state)&&void 0!==T?T:{},this._markerData,this._markAttributeContext)},animation:null!==(C=this._spec.animation)&&void 0!==C&&C,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};(null==I?void 0:I.style)&&(D.itemContent.symbolStyle=(0,Y.h_)(t9(I.style,this._markerData,this._markAttributeContext))),(null==R?void 0:R.style)&&(D.itemContent.imageStyle=t9(R.style,this._markerData,this._markAttributeContext)),O&&(D.itemContent.textStyle=t4(O,this._markerData,this._markAttributeContext)),(null==P?void 0:P.style)&&(D.itemContent.richTextStyle=t9(P.style,this._markerData,this._markAttributeContext));let{visible:Z,line:F={}}=E,j=e9(E,["visible","line"]);return D.itemLine=!1!==Z?Object.assign(Object.assign({},j),{visible:!0,lineStyle:(0,Y.h_)(F.style)}):{visible:!1},new e7(D)}_markerLayout(){var t,e,i,s,r;let n;let a=this._spec,o=this._markerData,l=this._relativeSeries,{point:h}=this._computePointsAttr(),d=this._getRelativeDataView().latestData,u=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:d;if(a.clip||(null===(t=a.itemContent)||void 0===t?void 0:t.confine)){let{minX:t,maxX:e,minY:i,maxY:s}=t6([l.getRegion()]);n={x:t,y:i,width:e-t,height:s-i}}if(this._markerComponent){let t=null!==(e=this._markerComponent.attribute)&&void 0!==e?e:{},a=null!==(s=null===(i=t.itemContent)||void 0===i?void 0:i.textStyle)&&void 0!==s?s:{};this._markerComponent.setAttributes({position:void 0===h?{x:null,y:null}:h,itemContent:Object.assign(Object.assign({},t.itemContent),{textStyle:Object.assign(Object.assign({},a),{text:(null===(r=this._spec.itemContent.text)||void 0===r?void 0:r.formatMethod)?this._spec.itemContent.text.formatMethod(u,d):a.text}),offsetX:ee(h,t.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:ee(h,t.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:n,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){let t=this._spec,{doXYProcess:e,doPolarProcess:i,doGeoProcess:s}=er(t);((0,X.Z)(t.coordinate)||e||i||s)&&this._initCommonDataView()}}it.specKey="markPoint";class ie extends it{constructor(){super(...arguments),this.type=M.L.markPoint,this.name=M.L.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var t;let e;let i=this._spec,s=this._markerData,r=this._relativeSeries,n="x"in i&&"y"in i,a="coordinate"in i,o="position"in i,l=null!==(t=null==i?void 0:i.autoRange)&&void 0!==t&&t;return n?e=t2(s,r,r,r,l)[0][0]:a?e=t3(s,r,l,i.coordinatesOffset)[0]:o&&(e=t8(i.position,r,i.regionRelative)[0]),{point:e}}_computeOptions(){let t;let e=this._spec,{doXYProcess:i}=er(e),s=(0,X.Z)(e.coordinate);return i?t=[this._processSpecByDims([{dim:"x",specValue:e.x},{dim:"y",specValue:e.y}])]:s&&(t=this._processSpecCoo(e)),{options:t}}}ie.type=M.L.markPoint,ie.coordinateType="cartesian";var ii=i(5767);class is extends tC{constructor(t,e){var i;super(t,e),this.type=M.L.scrollBar,this.name=M.L.scrollBar,this.specKey="scrollBar",this.layoutZIndex=T.Ai.DataZoom,this.layoutLevel=T.pM.DataZoom,this.layoutType="region-relative",this._filterMode=null!==(i=t.filterMode)&&void 0!==i?i:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),(0,tt.Z)(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(t){var e,i;this._updateScaleRange(),null===(i=(e=this.effect).onZoomChange)||void 0===i||i.call(e),super.onLayoutEnd(t)}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return(0,ti.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:12}_computeHeight(){return(0,ti.Z)(this._spec.height)?this._spec.height:this._isHorizontal?12:this.getLayoutRect().height}_getAttrs(){var t,e,i,s,r,n;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:null===(t=this._spec)||void 0===t?void 0:t.delayType,delayTime:(0,X.Z)(null===(e=this._spec)||void 0===e?void 0:e.delayType)?null!==(s=null===(i=this._spec)||void 0===i?void 0:i.delayTime)&&void 0!==s?s:30:0,realTime:null===(n=null===(r=this._spec)||void 0===r?void 0:r.realTime)||void 0===n||n},this._getComponentAttrs())}_createOrUpdateComponent(){let t=this._getAttrs();if(this._component)this._component.setAttributes(t);else{let e=this.getContainer();this._component=new ii.B(t),this._component.addEventListener("scrollDrag",t=>{let e=t.detail.value;this._handleChange(e[0],e[1])}),this._component.addEventListener("scrollUp",t=>{let e=t.detail.value;this._handleChange(e[0],e[1])}),e.add(this._component)}}_handleChange(t,e,i){super._handleChange(t,e,i);let s=(0,eV.hA)(this._start,t)&&(0,eV.hA)(this._end,e);if(this._shouldChange&&(!s||!1===this._spec.realTime)){i&&this._component&&this._component.setAttribute("range",[t,e]),this._start=t,this._end=e;let s=this.statePointToData(t),r=this.statePointToData(e);((0,ts.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,s,r):this._handleStateChange(this.statePointToData(t),this.statePointToData(e)))&&this.event.emit(k.$7.scrollBarChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._spec.auto&&this._data.getDataView().reRunAllTransform()}_getComponentAttrs(){let{rail:t,slider:e,innerPadding:i}=this._spec,s={};return(0,te.Z)(i)||(s.padding=i),(0,e8.Z)(null==t?void 0:t.style)||(s.railStyle=(0,Y.h_)(t.style)),(0,e8.Z)(null==e?void 0:e.style)||(s.sliderStyle=(0,Y.h_)(e.style)),s.disableTriggerEvent=this._option.disableTriggerEvent,s}_getNeedClearVRenderComponents(){return[this._component]}}is.type=M.L.scrollBar,is.specKey="scrollBar";var ir=i(7645);let ia=[m.dz,f.B,v.M,_.v,y.E,b.N,x.w,S.K,A.i,()=>{K.F.registerComponent(J.type,J)},Q.A,()=>{K.F.registerComponent(tV.type,tV)},tU.T,tG.U,tW.BF,()=>{K.F.registerComponent(eq.type,eq),eF._animate=eI},()=>{K.F.registerComponent(e5.type,e5),e1._animate=eO},()=>{K.F.registerComponent(ie.type,ie),e7._animate=eR},()=>{K.F.registerComponent(is.type,is)},ir._]},1125:function(t,e,i){i.d(e,{W:()=>o});var s=i(0),r=i(3685),n=i(9013),a=i(5719);class o extends s.O{constructor(){super(...arguments),this.id=(0,n.a)(),this.stateKeyToSignalName=t=>`${r.Bq}_animate_${this.id}_${t}`}getAnimationStateSignalName(){return this.stateKeyToSignalName("animationState")}updateAnimateState(t,e){t===a.h.update?this.updateState({animationState:{callback:(t,e)=>e.diffState}},e):t===a.h.appear?this.updateState({animationState:{callback:(t,e)=>"exit"===e.diffState?a.h.none:a.h.appear}},e):this.updateState({animationState:{callback:(e,i)=>t}},e)}_getDefaultStateMap(){return{animationState:{callback:(t,e)=>"exit"===e.diffState?a.h.exit:"update"===e.diffState?a.h.update:a.h.appear}}}}},4380:function(t,e,i){i.d(e,{zJ:()=>tN,Eo:()=>tH,rt:()=>tD,Zm:()=>tj,zC:()=>tZ,tF:()=>tO,wy:()=>tP,BV:()=>tR,cU:()=>tz,cE:()=>tB,sG:()=>tF});var s=i(3337);let r=t=>({type:"clipIn",options:{clipDimension:"horizontal"===t.direction?"y":"x"}}),n={type:"fadeIn"},a=t=>({type:"horizontal"===t.direction?"growPointsXIn":"growPointsYIn",options:{orient:"horizontal"===t.direction?"positive":"negative"}});var o=i(8469),l=i(670);let h=(t,e,i)=>{var s;let r=t.getGraphicAttribute("clipRangeByDimension",!1),n=null!==(s=t.getGraphicAttribute("clipRange",!1))&&void 0!==s?s:1;return e&&e.clipDimension?{from:{clipRange:0,clipRangeByDimension:e.clipDimension},to:{clipRange:n,clipRangeByDimension:r}}:{from:{clipRange:0},to:{clipRange:n}}},d=(t,e,i)=>{var s;let r=t.getGraphicAttribute("clipRangeByDimension",!0),n=null!==(s=t.getGraphicAttribute("clipRange",!0))&&void 0!==s?s:1;return e&&e.clipDimension?{from:{clipRange:n,clipRangeByDimension:e.clipDimension},to:{clipRange:0,clipRangeByDimension:r}}:{from:{clipRange:n},to:{clipRange:0}}},u=(t,e,i)=>{var s,r,n,a;let o=null!==(s=t.getFinalAnimationAttributes())&&void 0!==s?s:{};return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:null!==(r=o.opacity)&&void 0!==r?r:1,fillOpacity:null!==(n=o.fillOpacity)&&void 0!==n?n:1,strokeOpacity:null!==(a=o.strokeOpacity)&&void 0!==a?a:1}}},c=(t,e,i)=>{var s,r,n;return{from:{opacity:null!==(s=t.getGraphicAttribute("opacity",!0))&&void 0!==s?s:1,fillOpacity:null!==(r=t.getGraphicAttribute("fillOpacity",!0))&&void 0!==r?r:1,strokeOpacity:null!==(n=t.getGraphicAttribute("strokeOpacity",!0))&&void 0!==n?n:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}};var p=i(7623),g=i(6082),m=i(1601);let f=(t,e,i)=>{switch(null==e?void 0:e.direction){case"x":{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("x1"),s=t.getFinalAnimationAttribute("width");return{from:(0,p.Z)(s)?{x:e+s/2,x1:void 0,width:0}:{x:(e+i)/2,x1:(e+i)/2,width:void 0},to:{x:e,x1:i,width:s}}}case"y":{let e=t.getFinalAnimationAttribute("y"),i=t.getFinalAnimationAttribute("y1"),s=t.getFinalAnimationAttribute("height");return{from:(0,p.Z)(s)?{y:e+s/2,y1:void 0,height:0}:{y:(e+i)/2,y1:(e+i)/2,height:void 0},to:{y:e,y1:i,height:s}}}default:{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("x1"),s=t.getFinalAnimationAttribute("width"),r=t.getFinalAnimationAttribute("y"),n=t.getFinalAnimationAttribute("y1"),a=t.getFinalAnimationAttribute("height"),o={};return(0,p.Z)(s)?(o.x=e+s/2,o.width=0,o.x1=void 0):(o.x=(e+i)/2,o.x1=(e+i)/2,o.width=void 0),(0,p.Z)(a)?(o.y=r+a/2,o.height=0,o.y1=void 0):(o.y=(r+n)/2,o.y1=(r+n)/2,o.height=void 0),{from:o,to:{x:e,y:r,x1:i,y1:n,width:s,height:a}}}}},v=(t,e,i)=>{switch(null==e?void 0:e.direction){case"x":{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("x1"),s=t.getFinalAnimationAttribute("width");return{to:(0,p.Z)(s)?{x:e+s/2,x1:void 0,width:0}:{x:(e+i)/2,x1:(e+i)/2,width:void 0}}}case"y":{let e=t.getFinalAnimationAttribute("y"),i=t.getFinalAnimationAttribute("y1"),s=t.getFinalAnimationAttribute("height");return{to:(0,p.Z)(s)?{y:e+s/2,y1:void 0,height:0}:{y:(e+i)/2,y1:(e+i)/2,height:void 0}}}default:{let e=t.getFinalAnimationAttribute("x"),i=t.getFinalAnimationAttribute("y"),s=t.getFinalAnimationAttribute("x1"),r=t.getFinalAnimationAttribute("y1"),n=t.getFinalAnimationAttribute("width"),a=t.getFinalAnimationAttribute("height"),o={};return(0,p.Z)(n)?(o.x=e+n/2,o.width=0,o.x1=void 0):(o.x=(e+s)/2,o.x1=(e+s)/2,o.width=void 0),(0,p.Z)(a)?(o.y=i+a/2,o.height=0,o.y1=void 0):(o.y=(i+r)/2,o.y1=(i+r)/2,o.height=void 0),{to:o}}}},_=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?function(t,e,i){var s;let r;let n=t.getFinalAnimationAttribute("x"),a=t.getFinalAnimationAttribute("x1"),o=t.getFinalAnimationAttribute("width");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?r=e.overall:i.group?(r=null!==(s=i.groupWidth)&&void 0!==s?s:i.group.getBounds().width(),i.groupWidth=r):r=i.width:r=(0,m.Z)(null==e?void 0:e.overall)?null==e?void 0:e.overall:0,{from:{x:r,x1:(0,g.Z)(a)?void 0:r,width:(0,g.Z)(o)?void 0:0},to:{x:n,x1:a,width:o}}}(t,e,i):function(t,e,i){let s=t.getFinalAnimationAttribute("x"),r=t.getFinalAnimationAttribute("x1"),n=t.getFinalAnimationAttribute("width");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(s,s+n):Math.max(s,r);return{from:{x:t,x1:(0,g.Z)(r)?void 0:t,width:(0,g.Z)(n)?void 0:0},to:{x:s,x1:r,width:n}}}let a=(0,p.Z)(n)?Math.min(s,s+n):Math.min(s,r);return{from:{x:a,x1:(0,g.Z)(r)?void 0:a,width:(0,g.Z)(n)?void 0:0},to:{x:s,x1:r,width:n}}}(t,e,0)},y=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?function(t,e,i){var s;let r;let n=t.getFinalAnimationAttribute("x1"),a=t.getFinalAnimationAttribute("width");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?r=e.overall:i.group?(r=null!==(s=i.groupWidth)&&void 0!==s?s:i.group.getBounds().width(),i.groupWidth=r):r=i.width:r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{x:r,x1:(0,g.Z)(n)?void 0:r,width:(0,g.Z)(a)?void 0:0}}}(t,e,i):function(t,e,i){let s=t.getFinalAnimationAttribute("x"),r=t.getFinalAnimationAttribute("x1"),n=t.getFinalAnimationAttribute("width");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(s,s+n):Math.max(s,r);return{to:{x:t,x1:(0,g.Z)(r)?void 0:t,width:(0,g.Z)(n)?void 0:0}}}let a=(0,p.Z)(n)?Math.min(s,s+n):Math.min(s,r);return{to:{x:a,x1:(0,g.Z)(r)?void 0:a,width:(0,g.Z)(n)?void 0:0}}}(t,e,0)},b=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?function(t,e,i){var s;let r;let n=t.getFinalAnimationAttribute("y"),a=t.getFinalAnimationAttribute("y1"),o=t.getFinalAnimationAttribute("height");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?r=e.overall:i.group?(r=null!==(s=i.groupHeight)&&void 0!==s?s:i.group.getBounds().height(),i.groupHeight=r):r=i.height:r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0,{from:{y:r,y1:(0,g.Z)(a)?void 0:r,height:(0,g.Z)(o)?void 0:0},to:{y:n,y1:a,height:o}}}(t,e,i):function(t,e,i){let s=t.getFinalAnimationAttribute("y"),r=t.getFinalAnimationAttribute("y1"),n=t.getFinalAnimationAttribute("height");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(s,s+n):Math.max(s,r);return{from:{y:t,y1:(0,g.Z)(r)?void 0:t,height:(0,g.Z)(n)?void 0:0},to:{y:s,y1:r,height:n}}}let a=(0,p.Z)(n)?Math.min(s,s+n):Math.min(s,r);return{from:{y:a,y1:(0,g.Z)(r)?void 0:a,height:(0,g.Z)(n)?void 0:0},to:{y:s,y1:r,height:n}}}(t,e,0)},x=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?function(t,e,i){var s;let r;let n=t.getFinalAnimationAttribute("y1"),a=t.getFinalAnimationAttribute("height");return e&&"negative"===e.orient?(0,m.Z)(e.overall)?r=e.overall:i.group?(r=null!==(s=i.groupHeight)&&void 0!==s?s:i.group.getBounds().height(),i.groupHeight=r):r=i.height:r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{y:r,y1:(0,g.Z)(n)?void 0:r,height:(0,g.Z)(a)?void 0:0}}}(t,e,i):function(t,e,i){let s=t.getFinalAnimationAttribute("y"),r=t.getFinalAnimationAttribute("y1"),n=t.getFinalAnimationAttribute("height");if(e&&"negative"===e.orient){let t=(0,p.Z)(n)?Math.max(s,s+n):Math.max(s,r);return{to:{y:t,y1:(0,g.Z)(r)?void 0:t,height:(0,g.Z)(n)?void 0:0}}}let a=(0,p.Z)(n)?Math.min(s,s+n):Math.min(s,r);return{to:{y:a,y1:(0,g.Z)(r)?void 0:a,height:(0,g.Z)(n)?void 0:0}}}(t,e,0)},S=(t,e,i)=>{let s=t.getFinalAnimationAttributes();return e&&"anticlockwise"===e.orient?{from:{startAngle:null==s?void 0:s.endAngle},to:{startAngle:null==s?void 0:s.startAngle}}:{from:{endAngle:null==s?void 0:s.startAngle},to:{endAngle:null==s?void 0:s.endAngle}}},A=(t,e,i)=>{let s=t.getFinalAnimationAttributes();if(e&&"anticlockwise"===e.orient){let t=(0,m.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t,endAngle:t},to:{startAngle:null==s?void 0:s.startAngle,endAngle:null==s?void 0:s.endAngle}}}let r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:r,endAngle:r},to:{startAngle:null==s?void 0:s.startAngle,endAngle:null==s?void 0:s.endAngle}}},k=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?A(t,e):S(t,e)},w=(t,e,i)=>{let s=t.getFinalAnimationAttributes();return e&&"anticlockwise"===e.orient?{from:{startAngle:t.getGraphicAttribute("startAngle",!0)},to:{startAngle:null==s?void 0:s.endAngle}}:{from:{endAngle:t.getGraphicAttribute("endAngle",!0)},to:{endAngle:null==s?void 0:s.startAngle}}},T=(t,e,i)=>{if(e&&"anticlockwise"===e.orient){let i=(0,m.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t.getGraphicAttribute("startAngle",!0),endAngle:t.getGraphicAttribute("endAngle",!0)},to:{startAngle:i,endAngle:i}}}let s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:t.getGraphicAttribute("startAngle",!0),endAngle:t.getGraphicAttribute("endAngle",!0)},to:{startAngle:s,endAngle:s}}},C=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?T(t,e):w(t,e)},M=(t,e,i)=>{let s=t.getFinalAnimationAttributes();return e&&"inside"===e.orient?{from:{innerRadius:null==s?void 0:s.outerRadius},to:{innerRadius:null==s?void 0:s.innerRadius}}:{from:{outerRadius:null==s?void 0:s.innerRadius},to:{outerRadius:null==s?void 0:s.outerRadius}}},E=(t,e,i)=>{let s=t.getFinalAnimationAttributes(),r=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:r,outerRadius:r},to:{innerRadius:null==s?void 0:s.innerRadius,outerRadius:null==s?void 0:s.outerRadius}}},B=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?E(t,e):M(t,e)},O=(t,e,i)=>{let s=t.getFinalAnimationAttributes();return e&&"inside"===e.orient?{from:{innerRadius:t.getGraphicAttribute("innerRadius",!0)},to:{innerRadius:null==s?void 0:s.outerRadius}}:{from:{outerRadius:t.getGraphicAttribute("outerRadius",!0)},to:{outerRadius:null==s?void 0:s.innerRadius}}},I=(t,e,i)=>{let s=(0,m.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:t.getGraphicAttribute("innerRadius",!0),outerRadius:t.getGraphicAttribute("outerRadius",!0)},to:{innerRadius:s,outerRadius:s}}},R=(t,e,i)=>{var s;return!1!==(null!==(s=null==e?void 0:e.overall)&&void 0!==s&&s)?I(t,e):O(t,e)};var P=i(8378);let L=(t,e,i)=>{let s=t.getGraphicAttribute("points",!1),r={x:0,y:0};return s.forEach(t=>{r.x+=t.x,r.y+=t.y}),r.x/=s.length,r.y/=s.length,e&&e.center&&((0,P.Z)(e.center.x)&&(r.x=e.center.x),(0,P.Z)(e.center.y)&&(r.y=e.center.y)),"area"===t.mark.markType&&(r.x1=r.x,r.y1=r.y),s.map(t=>Object.assign({},t,r))},D=(t,e,i)=>({from:{points:L(t,e)},to:{points:t.getGraphicAttribute("points",!1)}}),Z=(t,e,i)=>({from:{points:t.getGraphicAttribute("points",!0)},to:{points:L(t,e)}}),F=(t,e,i)=>t.getGraphicAttribute("points",!1).map(t=>{var s;if(e&&"negative"===e.orient){let e=i.width;return i.group&&(e=null!==(s=i.groupWidth)&&void 0!==s?s:i.group.getBounds().width(),i.groupWidth=e),Object.assign(Object.assign({},t),{x:e,y:t.y,x1:e,y1:t.y1,defined:!1!==t.defined})}return Object.assign(Object.assign({},t),{x:0,y:t.y,x1:0,y1:t.y1,defined:!1!==t.defined})}),j=(t,e,i)=>({from:{points:F(t,e,i)},to:{points:t.getGraphicAttribute("points",!1)}}),H=(t,e,i)=>({from:{points:t.getGraphicAttribute("points",!0)},to:{points:F(t,e,i)}}),z=(t,e,i)=>t.getGraphicAttribute("points",!1).map(t=>{var s;if(e&&"negative"===e.orient){let e=i.height;return i.group&&(e=null!==(s=i.groupHeight)&&void 0!==s?s:i.group.getBounds().height(),i.groupHeight=e),Object.assign(Object.assign({},t),{x:t.x,y:e,x1:t.x1,y1:e,defined:!1!==t.defined})}return Object.assign(Object.assign({},t),{x:t.x,y:0,x1:t.x1,y1:0,defined:!1!==t.defined})}),N=(t,e,i)=>({from:{points:z(t,e,i)},to:{points:t.getGraphicAttribute("points",!1)}}),V=(t,e,i)=>({from:{points:t.getGraphicAttribute("points",!0)},to:{points:z(t,e,i)}});var U=i(9038);let G=(t,e,i)=>{var s,r;let{offset:n=0,orient:a,direction:o,point:l,excludeChannels:h=[]}=null!=e?e:{},d=0,u=0;"negative"===a&&(i.group?(d=null!==(s=i.groupWidth)&&void 0!==s?s:i.group.getBounds().width(),u=null!==(r=i.groupHeight)&&void 0!==r?r:i.group.getBounds().height(),i.groupWidth=d,i.groupHeight=u):(d=i.width,u=i.height)),d+=n,u+=n;let c=(0,U.Z)(l)?l.call(null,t.getDatum(),t,i):l,p=c&&(0,P.Z)(c.x)?c.x:d,g=c&&(0,P.Z)(c.y)?c.y:u,m=h.includes("x")?t.getGraphicAttribute("x"):t.getFinalAnimationAttribute("x"),f=h.includes("y")?t.getGraphicAttribute("y"):t.getFinalAnimationAttribute("y");switch(o){case"x":return{from:{x:p},to:{x:m}};case"y":return{from:{y:g},to:{y:f}};default:return{from:{x:p,y:g},to:{x:m,y:f}}}},W=(t,e,i)=>{var s,r;let{offset:n=0,orient:a,direction:o,point:l}=null!=e?e:{},h=i.group?i.group.getBounds():null,d=null!==(s=null==h?void 0:h.width())&&void 0!==s?s:i.width,u=null!==(r=null==h?void 0:h.height())&&void 0!==r?r:i.height,c=(0,U.Z)(l)?l.call(null,t.getDatum(),t,i):l,p=c&&(0,P.Z)(c.x)?c.x:("negative"===a?d:0)+n,g=c&&(0,P.Z)(c.y)?c.y:("negative"===a?u:0)+n;switch(o){case"x":return{from:{x:t.getGraphicAttribute("x",!0)},to:{x:p}};case"y":return{from:{y:t.getGraphicAttribute("y",!0)},to:{y:g}};default:return{from:{x:t.getGraphicAttribute("x",!0),y:t.getGraphicAttribute("y",!0)},to:{x:p,y:g}}}},X=(t,e,i)=>{var s,r,n,a;let o=t.getFinalAnimationAttributes();switch(null==e?void 0:e.direction){case"x":return{from:{scaleX:0},to:{scaleX:null!==(s=null==o?void 0:o.scaleX)&&void 0!==s?s:1}};case"y":return{from:{scaleY:0},to:{scaleY:null!==(r=null==o?void 0:o.scaleY)&&void 0!==r?r:1}};default:return{from:{scaleX:0,scaleY:0},to:{scaleX:null!==(n=null==o?void 0:o.scaleX)&&void 0!==n?n:1,scaleY:null!==(a=null==o?void 0:o.scaleY)&&void 0!==a?a:1}}}},Y=(t,e,i)=>{var s,r,n,a;switch(null==e?void 0:e.direction){case"x":return{from:{scaleX:null!==(s=t.getGraphicAttribute("scaleX",!0))&&void 0!==s?s:1},to:{scaleX:0}};case"y":return{from:{scaleY:null!==(r=t.getGraphicAttribute("scaleY",!0))&&void 0!==r?r:1},to:{scaleY:0}};default:return{from:{scaleX:null!==(n=t.getGraphicAttribute("scaleX",!0))&&void 0!==n?n:1,scaleY:null!==(a=t.getGraphicAttribute("scaleY",!0))&&void 0!==a?a:1},to:{scaleX:0,scaleY:0}}}};var $=i(4546),K=i(9730);let q={symbol:["_mo_hide_","visible"]},J=(t,e,i)=>{let s;let r=Object.assign({},t.getPrevGraphicAttributes()),n=Object.assign({},t.getNextGraphicAttributes());e&&(0,$.IX)(e.excludeChannels).forEach(t=>{delete r[t],delete n[t]}),t.mark&&t.mark.markType&&(s=q[t.mark.markType])&&s.forEach(t=>{delete r[t],delete n[t]}),Object.keys(n).forEach(t=>{(0,K.X)(r[t],n[t])&&(delete r[t],delete n[t])});let a=t.getFinalGraphicAttributes();return Object.keys(r).forEach(t=>{(0,g.Z)(n[t])&&((0,g.Z)(a[t])||(0,K.X)(r[t],a[t])?delete r[t]:n[t]=a[t])}),{from:r,to:n}};var Q=i(5859);let tt=(t,e,i)=>{var s;let r=null!==(s=t.getFinalAnimationAttribute("angle"))&&void 0!==s?s:0,n=0;return{from:{angle:(0,Q.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,P.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2},to:{angle:r}}},te=(t,e,i)=>{var s;let r=null!==(s=t.getGraphicAttribute("angle",!0))&&void 0!==s?s:0,n=0;return n=(0,Q.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,P.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:n}}};var ti=i(4761);let ts=()=>{ti.F.registerAnimationType("clipIn",h)},tr=()=>{ti.F.registerAnimationType("clipOut",d)},tn=()=>{ti.F.registerAnimationType("fadeIn",u)},ta=()=>{ti.F.registerAnimationType("fadeOut",c)},to=()=>{ti.F.registerAnimationType("growCenterIn",f)},tl=()=>{ti.F.registerAnimationType("growCenterOut",v)},th=()=>{ti.F.registerAnimationType("growHeightIn",b)},td=()=>{ti.F.registerAnimationType("growHeightOut",x)},tu=()=>{ti.F.registerAnimationType("growWidthIn",_)},tc=()=>{ti.F.registerAnimationType("growWidthOut",y)},tp=()=>{ti.F.registerAnimationType("growPointsIn",D)},tg=()=>{ti.F.registerAnimationType("growPointsOut",Z)},tm=()=>{ti.F.registerAnimationType("growPointsXIn",j)},tf=()=>{ti.F.registerAnimationType("growPointsXOut",H)},tv=()=>{ti.F.registerAnimationType("growPointsYIn",N)},t_=()=>{ti.F.registerAnimationType("growPointsYOut",V)},ty=()=>{ti.F.registerAnimationType("growAngleIn",k)},tb=()=>{ti.F.registerAnimationType("growAngleOut",C)},tx=()=>{ti.F.registerAnimationType("growRadiusIn",B)},tS=()=>{ti.F.registerAnimationType("growRadiusOut",R)},tA=()=>{ti.F.registerAnimationType("moveIn",G)},tk=()=>{ti.F.registerAnimationType("moveOut",W)},tw=()=>{ti.F.registerAnimationType("scaleIn",X)},tT=()=>{ti.F.registerAnimationType("scaleOut",Y)},tC=()=>{ti.F.registerAnimationType("rotateIn",tt)},tM=()=>{ti.F.registerAnimationType("rotateOut",te)},tE=()=>{ti.F.registerAnimationType("update",J)},tB={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"},state:{duration:300,easing:"linear"}},tO={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:{type:"scaleOut"}},tI={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}},tR=()=>{o.F.registerAnimation("scaleInOut",()=>tO)},tP=()=>{o.F.registerAnimation("fadeInOut",()=>tI)},tL=(t,e)=>({appear:function(t,e){switch(e){case"grow":return a(t);case"fadeIn":return n;default:return r(t)}}(t,e),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined","segments"]}},{channel:["points","segments"],custom:s.fN,duration:tB.update.duration,easing:tB.update.easing,customParameters:{clipRangeByDimension:"horizontal"===t.direction?"y":"x"}}],disappear:{type:"clipOut"}}),tD=()=>{o.F.registerAnimation("line",tL)},tZ=()=>{o.F.registerAnimation("area",tL)},tF=()=>{l.Z.useRegisters([tw,tT,tn,ta,tA,tk,tC,tM,tE])},tj=()=>{l.Z.useRegisters([th,td,tu,tc,to,tl])},tH=()=>{l.Z.useRegisters([tx,tS,ty,tb])},tz=()=>{l.Z.useRegisters([tp,tg,tm,tf,tv,t_,ts,tr])},tN=()=>{l.Z.useRegisters([tp,tg])}},5719:function(t,e,i){var s,r;i.d(e,{h:()=>s}),(r=s||(s={})).appear="appear",r.disappear="disappear",r.enter="enter",r.update="update",r.state="state",r.exit="exit",r.normal="normal",r.none="none"},208:function(t,e,i){i.d(e,{_8:()=>p,hT:()=>g,sB:()=>y,yx:()=>v});var s=i(9038),r=i(8378),n=i(5669),a=i(4380),o=i(7636),l=i(7623),h=i(645),d=i(4154),u=i(4218);let c=[...Object.keys(a.cE),"normal"];function p(t={},e,i){let s={};for(let r=0;r<c.length;r++){let n,l;let h=c[r],d=e?e[h]:void 0;if(!1!==d){if("normal"===h){d&&(s.normal=d);continue}if("state"===h){!1!==d&&(s.state=null!=d?d:a.cE.state);continue}("update"===h||d||t[h])&&((n=(0,o.Z)(t[h])?t[h]:[Object.assign(Object.assign({},a.cE[h]),t[h])],"exit"===h&&n.forEach(t=>{t.controlOptions={stopWhenStateChange:!0}}),d)?(l=(0,o.Z)(d)?d.map((t,e)=>{var s;let r=t;return _(r)&&delete r.type,r.oneByOne&&(r=m(r,null!==(s=null==i?void 0:i.dataIndex)&&void 0!==s?s:f,null==i?void 0:i.dataCount)),r}):n.map((t,e)=>{var s;let r=(0,u.H)({},n[e],d);return _(r)&&delete r.type,r.oneByOne&&(r=m(r,null!==(s=null==i?void 0:i.dataIndex)&&void 0!==s?s:f,null==i?void 0:i.dataCount)),r}),s[h]=l):s[h]=n)}}return s}function g(t,e,i){var r,n,a,u,c,p;let g={};return(0,l.Z)(e.animationAppear)&&(g.appear=null!==(r=e.animationAppear[t])&&void 0!==r?r:e.animationAppear),(0,l.Z)(e.animationDisappear)&&(g.disappear=null!==(n=e.animationDisappear[t])&&void 0!==n?n:e.animationDisappear),(0,l.Z)(e.animationEnter)&&(g.enter=null!==(a=e.animationEnter[t])&&void 0!==a?a:e.animationEnter),(0,l.Z)(e.animationExit)&&(g.exit=null!==(u=e.animationExit[t])&&void 0!==u?u:e.animationExit),(0,l.Z)(e.animationUpdate)&&(g.update=null!==(c=e.animationUpdate[t])&&void 0!==c?c:e.animationUpdate),(0,l.Z)(e.animationState)&&(g.state=null!==(p=e.animationState[t])&&void 0!==p?p:e.animationState),e.animationNormal&&e.animationNormal[t]&&(g.normal=e.animationNormal[t]),function(t,e){if(!t)return t;let i=["custom","customParameters"];return function t(e,i,s=[]){if((0,o.Z)(e))e.forEach((r,n)=>{e[n]=i(e[n],n),t(e[n],i,s)});else if((0,d.Z)(e))for(let r in e)s.includes(r)||(e[r]=i(e[r],r),t(e[r],i,s))}(t=(0,h.Z)(t,null,i),t=>{var i;return(0,s.Z)(t)&&(null===(i=t.prototype)||void 0===i?void 0:i.constructor)!==t?(...i)=>t(...i,e):t},i),t}(g,i)}function m(t,e,i){let{oneByOne:n,duration:a,delay:o,delayAfter:l}=t;return t.delay=(t,i,l)=>{let h=e(t,l),d=(0,s.Z)(a)?a(t,i,l):(0,r.Z)(a)?a:0,u=(0,s.Z)(o)?o(t,i,l):(0,r.Z)(o)?o:0,c=(0,s.Z)(n)?n(t,i,l):n;return!1===c?u:u+h*(d+(c=!0===c?0:c))},t.delayAfter=(t,o,h)=>{let d=e(t,h),u=(0,s.Z)(a)?a(t,o,h):(0,r.Z)(a)?a:0,c=(0,s.Z)(l)?l(t,o,h):(0,r.Z)(l)?l:0,p=(0,s.Z)(n)?n(t,o,h):n;return!1===p?c:(p=!0===p?0:p,c+((i?i():o.mark.elements.length)-d)*(u+p))},delete t.oneByOne,t}function f(t,e){var i,s;return null!==(i=null==t?void 0:t[n.vM])&&void 0!==i?i:null===(s=null==e?void 0:e.VGRAMMAR_ANIMATION_PARAMETERS)||void 0===s?void 0:s.elementIndex}function v(t,e){var i,s,r,n,a;if(!1===t.animation||!1===(null===(i=t.morph)||void 0===i?void 0:i.enable))return!1;let o=!1!==(null!==(r=null===(s=t.animationAppear)||void 0===s?void 0:s[e])&&void 0!==r?r:t.animationAppear),l=!1!==(null!==(a=null===(n=t.animationUpdate)||void 0===n?void 0:n[e])&&void 0!==a?a:t.animationUpdate);return!(!o||!l)}function _(t){return!(0,l.Z)(t.timeSlices)&&(0,l.Z)(t.channel)}function y(t){var e,i,s,r;let n=t.getSpec();if(!1===n.animation||!(0,l.Z)(t.getRegion().animate))return!1;let a=null!==(e=n.animationThreshold)&&void 0!==e?e:Number.MAX_SAFE_INTEGER;return null===(i=t.getMarks())||void 0===i||i.forEach(t=>{let e=t.getMarkConfig();e&&(e.large&&e.largeThreshold&&(a=Math.min(a,e.largeThreshold)),e.progressiveThreshold&&(a=Math.min(a,e.progressiveThreshold)))}),!((null===(r=null===(s=t.getRawData())||void 0===s?void 0:s.latestData)||void 0===r?void 0:r.length)>=a)}},5507:function(t,e,i){i.d(e,{w:()=>p});var s=i(7623),r=i(1601),n=i(7636),a=i(8469),o=i(7602),l=i(1071),h=i(4546);let d=(t,e)=>{var i;let{regionId:r,regionIndex:n}=t.spec;if((0,s.Z)(r)){let t=(0,h.IX)(r);return null===(i=e.region)||void 0===i?void 0:i.filter(({spec:e})=>t.includes(e.id))}if((0,s.Z)(n))return(0,h.IX)(n).map(t=>{var i;return null===(i=e.region)||void 0===i?void 0:i[t]}).filter(s.Z)},u=(t,e)=>{var i;let{seriesId:r,seriesIndex:n}=t.spec;if((0,s.Z)(r)){let t=(0,h.IX)(r);return null===(i=e.series)||void 0===i?void 0:i.filter(({spec:e})=>t.includes(e.id))}if((0,s.Z)(n))return(0,h.IX)(n).map(t=>{var i;return null===(i=e.series)||void 0===i?void 0:i[t]}).filter(s.Z)};var c=i(2096);class p{constructor(t){this._option=t,this.type=t.type,this.seriesType=t.seriesType}initChartSpec(t){return this.transformSpec(t),this.transformModelSpec(t)}transformSpec(t){t.region&&0!==t.region.length||(t.region=[{}]),void 0===t.tooltip&&(t.tooltip={}),(0,s.Z)(t.stackInverse)&&t.region.forEach(e=>{(0,s.Z)(e.stackInverse)||(e.stackInverse=t.stackInverse)}),(0,s.Z)(t.stackSort)&&t.region.forEach(e=>{(0,s.Z)(e.stackSort)||(e.stackSort=t.stackSort)})}generateTransform(t,e){return(i,s,r)=>{let{spec:n,specPath:a,specInfoPath:o,type:h}=s,d=new i.transformerConstructor(Object.assign(Object.assign({},this._option),{type:h})),u=d.transformSpec(n,t,r),c=Object.assign(Object.assign({},s),u);e?c.theme=d.getTheme(n,t):(0,l.Hn)(t,a,u.spec),(0,l.Hn)(r,null!=o?o:a,c)}}transformModelSpec(t){return this.createSpecInfo(t,this.generateTransform(t,!1))}createSpecInfo(t,e){var i,s;e||(e=this.generateTransform(t,!0));let r={};return this.forEachRegionInSpec(t,e,r),this.forEachSeriesInSpec(t,e,r),null===(i=r.series)||void 0===i||i.forEach((t,e)=>{var i,s;let n=(null!==(s=null!==(i=d(t,r))&&void 0!==i?i:r.region)&&void 0!==s?s:[])[0];n&&(n.seriesIndexes||(n.seriesIndexes=[]),n.seriesIndexes.push(e),t.regionIndexes=n.regionIndexes.slice())}),this.forEachComponentInSpec(t,e,r),Object.values(null!==(s=r.component)&&void 0!==s?s:{}).forEach(t=>t.forEach((t,e)=>{var i,s,n;if(t){if(!t.regionIndexes){let e=null!==(s=null!==(i=d(t,r))&&void 0!==i?i:r.region)&&void 0!==s?s:[];t.regionIndexes=e.map(t=>t.regionIndexes[0])}if(!t.seriesIndexes){let e=u(t,r);if(e)t.seriesIndexes=e.map(({seriesIndexes:t})=>t[0]);else{let e=new Set;(null!==(n=t.regionIndexes)&&void 0!==n?n:[]).forEach(t=>{var i,s;let n=null===(i=r.region)||void 0===i?void 0:i[t];null===(s=null==n?void 0:n.seriesIndexes)||void 0===s||s.forEach(t=>e.add(t))}),t.seriesIndexes=Array.from(e)}}}})),r}_isValidSeries(t){return!0}_getDefaultSeriesSpec(t,e,i){var s,r,n,a;let o={dataKey:t.dataKey,hover:t.hover,select:t.select,label:t.label,seriesStyle:t.seriesStyle,animation:null!==(s=t.animation)&&void 0!==s?s:this._option.animation,animationThreshold:null!==(r=t.animationThreshold)&&void 0!==r?r:null===(a=(n=this._option).getTheme)||void 0===a?void 0:a.call(n).animationThreshold,animationAppear:t.animationAppear,animationDisappear:t.animationDisappear,animationEnter:t.animationEnter,animationUpdate:t.animationUpdate,animationExit:t.animationExit,animationNormal:t.animationNormal,animationState:t.animationState,extensionMark:t.extensionMark,large:t.large,largeThreshold:t.largeThreshold,progressiveStep:t.progressiveStep,progressiveThreshold:t.progressiveThreshold,background:t.seriesBackground,invalidType:t.invalidType,seriesField:t.seriesField,morph:t.morph,interactions:t.interactions},l=this.seriesType;return l&&(o.type=l,o[l]=t[l]),e&&e.length&&e.forEach(e=>{o[e]=t[e]}),i&&i.length&&i.forEach(e=>{o[e]=t[e]}),o}forEachRegionInSpec(t,e,i){var s;return(null!==(s=t.region)&&void 0!==s?s:[]).map((t,s)=>e(a.F.getRegionInType("region"),{spec:t,specPath:["region",s],type:"region",regionIndexes:[s]},i))}forEachSeriesInSpec(t,e,i){var s;return(null!==(s=t.series)&&void 0!==s?s:[]).map((t,s)=>e(a.F.getSeriesInType(t.type),{spec:t,specPath:["series",s],type:t.type,seriesIndexes:[s]},i))}forEachComponentInSpec(t,e,i){var s,r,n;let l,h,d,u;let p=[],g=a.F.getComponents(),m=[];for(let e=0;e<g.length;e++){let{cmp:i,alwaysCheck:r}=g[e];i.type.startsWith(o.L.cartesianAxis)?l=i:i.type.startsWith(o.L.polarAxis)?h=i:i.type===o.L.geoCoordinate?d=i:(r||t[null!==(s=i.specKey)&&void 0!==s?s:i.type])&&(i.type===o.L.tooltip?u=i:m.push(i))}let f=!1;if(l){let s=l.getSpecInfo(t,i);(null==s?void 0:s.length)>0&&(f=!0,s.forEach(t=>{let s=a.F.getComponentInKey(t.type);p.push(e(s,t,i))}))}if(h&&!f){let s=h.getSpecInfo(t,i);(null==s?void 0:s.length)>0&&(f=!0,s.forEach(t=>{let s=a.F.getComponentInKey(t.type);p.push(e(s,t,i))}))}return d&&!f&&(null===(r=d.getSpecInfo(t,i))||void 0===r||r.forEach(t=>{p.push(e(d,t,i))})),m.forEach(s=>{var r;null===(r=s.getSpecInfo?s.getSpecInfo(t,i):(0,c.ts)(t,s.specKey,s.type))||void 0===r||r.forEach(t=>{p.push(e(s,t,i))})}),u&&(null===(n=(0,c.ts)(t,u.specKey,u.type))||void 0===n||n.forEach(t=>{p.push(e(u,t,i))})),p}transformSeriesSpec(t){let e=this._getDefaultSeriesSpec(t);t.series&&0!==t.series.length?t.series.forEach(t=>{this._isValidSeries(t.type)&&Object.keys(e).forEach(i=>{i in t||(t[i]=e[i])})}):t.series=[e]}_findBandAxisBySeries(t,e,i){let r="horizontal"===(null==t?void 0:t.direction)?["left","right"]:["top","bottom"];return i.find(i=>!!r.includes(i.orient)&&((0,s.Z)(i.seriesId)?(0,h.IX)(i.seriesId).includes(null==t?void 0:t.id):(0,s.Z)(i.seriesIndex)?(0,h.IX)(i.seriesIndex).includes(e):i.type,!0))}_applyAxisBandSize(t,e,i){let{barMaxWidth:s,barMinWidth:a,barWidth:o,barGapInGroup:l}=i,h=!1;(0,r.Z)(a)?(t.minBandSize=a,h=!0):(0,r.Z)(o)?(t.minBandSize=o,h=!0):(0,r.Z)(s)&&(t.minBandSize=s,h=!0),h&&(t.bandSizeLevel=Number.MAX_VALUE,t.bandSizeExtend={extend:e,gap:(0,n.Z)(l)?l[l.length-1]:l})}}},5839:function(t,e,i){i.d(e,{P:()=>F});var s=i(4546),r=i(6338),n=i(2990),a=i(5205);class o{get dataList(){return this._dataArr}constructor(t){this._dataArr=[],this._dataSet=t}parseData(t){this._dataArr=[];let e=(0,s.IX)(t);for(let t=0;t<e.length;t++)this._dataArr.push((0,n.J3)(e[t],this._dataSet,this._dataArr))}updateData(t,e=!1,i=!0){let r=(0,s.IX)(t);return(!e||r.length===this._dataArr.length)&&(this._dataValueForEach(r,(t,e)=>{e.markRunning()}),this._dataValueForEach(r,(t,e)=>{(0,n.kk)(e,t,i)}),!0)}_dataValueForEach(t,e){t.forEach((t,i)=>{if(t instanceof r.VO)return;let s=this.getSeriesData(t.id,i);s&&e(t,s,i)})}getSeriesData(t,e){if(!this._dataArr.length)return null;if("string"==typeof t){let e=this._dataArr.filter(e=>e.name===t);if(e[0])return e[0];(0,a.ZK)(`no data matches dataId ${t}!`)}if("number"==typeof e){if(this._dataArr[e])return this._dataArr[e];(0,a.ZK)(`no data matches dataIndex ${e}!`)}return this._dataArr[0]}}var l=i(7636),h=i(9730),d=i(6082),u=i(1121),c=i(5173),p=i(8118),g=i(6948),m=i(9478);class f{constructor(t,e){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=t=>{let e=[];return this._scaleSpecMap.forEach((i,s)=>{(0,g.S5)(i.domain)&&i.domain.forEach(s=>{s.dataId===t&&s.fields.forEach(t=>{(0,m.kL)(e,[{key:t,operations:(0,c.z2)(i.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((i,s)=>{let r=this.getScale(s);i.forEach(i=>{this._getSeriesBySeriesId(i.seriesId).getRawData().name===t&&i.field&&(0,m.kL)(e,[{key:i.field,operations:(0,c.z2)(r.type)?["max","min"]:["values"]}])})}),e},this._spec=t,this._chart=e,this._setAttrFromSpec()}_createFromSpec(t){if(!t.id)return null;let e=this._scaleMap.get(t.id);return e||(e="ordinal"===t.type&&"color"===t.id?(0,p.Mo)("colorOrdinal"):(0,p.Mo)(t.type)),e?((0,l.Z)(t.range)&&e.range(t.range),(0,l.Z)(t.domain)&&((0,g.S5)(t.domain)||e.domain(t.domain)),t.specified&&e.specified&&e.specified(t.specified),t.clamp&&e.clamp&&e.clamp(t.clamp),e):null}_setAttrFromSpec(){var t;if(!(null===(t=this._spec)||void 0===t?void 0:t.length))return;let e=new Map,i=new Map;this._spec.forEach(t=>{let s=this._createFromSpec(t);s&&(e.set(t.id,s),i.set(t.id,t))}),this._modelScaleSpecMap.forEach(t=>{let s=this._createFromSpec(t);s&&(e.set(t.id,s),i.set(t.id,t))}),this._scaleSpecMap=i,this._scaleMap=e}updateSpec(t){let e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if((0,h.X)(t,this._spec))return e;e.change=!0;for(let i=0;i<t.length;i++){let s=t[i],r=this._scaleMap.get(s.id);if(!r)return e.reMake=!0,e;let n=this._spec.find(t=>t.id===s.id);if(!n.id||n.type!==s.type||!(0,h.X)(n.specified,s.specified))return e.reMake=!0,e;s.range&&!(0,h.X)(s.range,r.range())&&(r.range(s.range),e.reRender=!0),(0,g.S5)(s.domain)?e.reRender=!0:(0,h.X)(s.domain,r.domain())||(r.domain(s.domain),e.reRender=!0),this._scaleSpecMap.set(s.id,s)}return this._spec=t,e}registerModelScale(t){let e=this._createFromSpec(t);e&&(this._modelScaleSpecMap.set(t.id,t),this._scaleSpecMap.set(t.id,t),this._scaleMap.set(t.id,e))}removeModelScale(t){this._modelScaleSpecMap.forEach(e=>{t(e)&&(this._modelScaleSpecMap.delete(e.id),this._scaleSpecMap.delete(e.id),this._scaleMap.delete(e.id))})}getScale(t){return this._scaleMap.get(t)}getScaleSpec(t){return this._scaleSpecMap.get(t)}_getSeriesByRawDataId(t){let e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){let s=e[i];if(s.getRawData().name===t)return s}return null}_getSeriesBySeriesId(t){let e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){let s=e[i];if(s.id===t)return s}return null}updateScaleDomain(t){this._scaleSpecMap.forEach((e,i)=>{let s;let r=this._scaleMap.get(i);if(!r)return;if(!(0,g.S5)(e.domain))return e.domain&&0!==e.domain.length||r.domain(t),void this._updateMarkScale(i,r,r.domain().slice());s=(0,c.z2)(e.type)?[null,null]:new Set,e.domain.forEach(t=>{let i=this._getSeriesByRawDataId(t.dataId);if(!i)return;let r=(0,c.z2)(e.type);t.fields.forEach(t=>{let e=i.getRawDataStatisticsByField(t,r);e&&(r?((0,d.Z)(s[0])?s[0]=e.min:s[0]=Math.min(e.min,s[0]),(0,d.Z)(s[1])?s[1]=e.max:s[1]=Math.max(e.max,s[1])):e.values.forEach(t=>{s.add(t)}))})});let n=s;(0,c.z2)(e.type)||(s=Array.from(s)),r.domain(s),this._updateMarkScale(i,r,n)})}_updateMarkScale(t,e,i){let s=this._markAttributeScaleMap.get(t);s&&0!==s.length&&s.forEach(t=>{if(!t.field||!t.markScale||t.markScale===e)return;if((0,d.Z)(t.changeDomain)||"none"===t.changeDomain||(0,d.Z)(t.seriesId))return void((0,c.z2)(e.type)?t.markScale.domain(i):e.domain(Array.from(i)));let s=this._getSeriesBySeriesId(t.seriesId),r=(0,c.z2)(e.type),n=s.getRawDataStatisticsByField(t.field,r);if(!(0,u.Z)(n))return"expand"===t.changeDomain?(r?(i[0]=Math.min(i[0],n.min),i[1]=Math.max(i[1],n.max)):(n.values.forEach(t=>{i.add(t)}),i=Array.from(i)),void t.markScale.domain(i)):void("replace"!==t.changeDomain||(r?t.markScale.domain([n.min,n.max]):t.markScale.domain(n.values)));(0,c.z2)(e.type)?t.markScale.domain(i):e.domain(Array.from(i))})}registerMarkAttributeScale(t,e){let i=this._scaleMap.get(t.scale),s=this._markAttributeScaleMap.get(t.scale);s||(s=[],this._markAttributeScaleMap.set(t.scale,s));let r=i;return!(0,d.Z)(t.field)&&((0,d.Z)(t.changeDomain)||"none"===t.changeDomain||(0,d.Z)(e))||(r=i.clone()),s.push(Object.assign(Object.assign({},t),{seriesId:e,markScale:r})),r}}var v=i(7602),_=i(8469),y=i(4277),b=i(9013),x=i(7623),S=i(1960),A=i(4798),k=i(2550),w=i(3685),T=i(9198),C=i(9904),M=i(9038),E=i(4370),B=i(8321),O=i(5208),I=i(3722),R=i(2698),P=i(2687),L=i(6979),D=i(6542),Z=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class F extends B.H{getSpec(){return this._spec}setSpec(t){this._spec=t}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(t,e,i=!0){this._layoutTag=t;let s=this.getCompiler();return(null==s?void 0:s.getVGrammarView())&&(s.getVGrammarView().updateLayoutTag(),t&&i&&s.renderNextTick(e)),this._layoutTag}getGlobalScale(){return this._globalScale}getEvent(){return this._event}get chartData(){return this._chartData}constructor(t,e){var i,r,n;super(e),this.type="chart",this.id=(0,b.a)(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:w.rV,height:w.b},this._viewRect={width:w.rV,height:w.b},this._viewBox={x1:0,y1:0,x2:w.rV,y2:w.b},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var t;return null!==(t=this._series)&&void 0!==t?t:[]},this.getRegionsInIndex=t=>t&&0!==t.length?this._regions.filter((e,i)=>t.includes(i)):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=t=>t?this._regions.filter(e=>t.includes(e.id)):[],this.getRegionsInQuerier=t=>t?this._regions.filter((e,i)=>(0,s.IX)(t).some(t=>(0,x.Z)(t.regionId)&&t.regionId===e.userId||t.regionIndex===i)):this._regions,this.getRegionsInUserId=t=>{if(t)return this._regions.find(e=>e.userId===t)},this.getRegionsInUserIdOrIndex=(t,e)=>this.getAllRegions().filter(i=>(null==t?void 0:t.length)?i.userId&&t.includes(i.userId):!(null==e?void 0:e.length)||e.includes(i.getSpecIndex())),this.getComponents=()=>this._components,this.getSeriesInIndex=t=>t&&0!==t.length?this._series.filter((e,i)=>t.includes(i)):[this._series[0]],this.getSeriesInIds=t=>t?this._series.filter(e=>t.includes(e.id)):[],this.getSeriesInUserId=t=>{if(t)return this._series.find(e=>e.userId===t)},this.getSeriesInUserIdOrIndex=(t,e)=>this.getAllSeries().filter(i=>(null==t?void 0:t.length)?i.userId&&t.includes(i.userId):!(null==e?void 0:e.length)||e.includes(i.getSpecIndex())),this.getComponentByIndex=(t,e)=>{let i=this._components.filter(e=>(e.specKey||e.type)===t);if(i&&0!==i.length)return i[e]},this.getComponentsByKey=t=>this._components.filter(e=>(e.specKey||e.type)===t),this.getComponentByUserId=t=>{let e=this._components.find(e=>e.userId===t);if(e)return e},this.getComponentsByType=t=>this._components.filter(e=>e.type===t),this._paddingSpec=(0,S.Ek)(null!==(i=t.padding)&&void 0!==i?i:e.getTheme().padding),this._event=new y.j(e.eventDispatcher,e.mode),this._dataSet=e.dataSet,this._chartData=new o(this._dataSet),this._modelOption=Object.assign(Object.assign({},e),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:null===(r=this._option)||void 0===r?void 0:r.onError,disableTriggerEvent:!0===(null===(n=this._option)||void 0===n?void 0:n.disableTriggerEvent),getSeriesData:this._chartData.getSeriesData.bind(this._chartData)}),this._spec=t}created(t){this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),t.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),t.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),t.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}init(){var t,e;null===(t=this._beforeInit)||void 0===t||t.call(this),this._regions.forEach(t=>t.init({})),this._series.forEach(t=>t.init({})),this._components.forEach(t=>t.init({dataSet:this._dataSet})),this._initEvent(),null===(e=this._initStack)||void 0===e||e.call(this),this.reDataFlow()}reDataFlow(){this._series.forEach(t=>{var e;return null===(e=t.getRawData())||void 0===e?void 0:e.markRunning()}),this._series.forEach(t=>t.fillData()),this.updateGlobalScaleDomain()}onResize(t,e,i=!0){this._canvasRect={width:t,height:e},this._updateLayoutRect(this._option.viewBox),this.setLayoutTag(!0,null,i)}updateViewBox(t,e){this._option.viewBox=t,this._updateLayoutRect(t),this.setLayoutTag(!0,null,e)}_createBackground(){let t=this._spec.background;if(!t||"object"!=typeof t||(0,x.Z)(t.gradient))return;let e=(0,T.Z)(t,["x","y","width","height","x1","y1","image"]);e.background=t.image,this._backgroundMark=_.F.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},e),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1})),this._backgroundMark.setMarkConfig({zIndex:D.Ai.SeriesGroup-2})}_createRegion(t,e){if(!t)return;let{spec:i}=e,s=Z(e,["spec"]),r=new t(i,Object.assign(Object.assign({},this._modelOption),s));r&&(r.created(),this._regions.push(r))}_createSeries(t,e){let i;if(!t)return;let{spec:s}=e,r=Z(e,["spec"]);if((0,x.Z)(s.regionId)?i=this.getRegionsInUserId(s.regionId):(0,x.Z)(s.regionIndex)&&(i=this.getRegionsInIndex([s.regionIndex])[0]),!i&&!(i=this._regions[0]))return;let n=new t(s,Object.assign(Object.assign(Object.assign({},this._modelOption),r),{type:s.type,region:i,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));n&&(n.created(),this._series.push(n),i.addSeries(n))}getSeriesById(t){return this._series.find(e=>e.id===t)}_createComponent(t,e){let i=t.createComponent(e,Object.assign(Object.assign({},this._modelOption),{type:t.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey,getComponentsByType:this.getComponentsByType}));i&&(i.created(),this._components.push(i))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(t){if((0,C.Z)(t))return this.getAllModels().find(e=>e.userId===t);if((0,M.Z)(t))return this.getAllModels().find(e=>t(e));let e=0;return this.getAllModels().find(i=>{var s;if((null!==(s=i.specKey)&&void 0!==s?s:i.type)===t.type){if(e===t.index)return!0;e++}return!1})}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(t){this._option.layout=t,this._initLayoutFunc()}_initLayoutFunc(){var t,e,i;if(this._layoutFunc=this._option.layout,!this._layoutFunc){let s=!1;(this._spec.zField||this._spec.series&&this._spec.series.some(t=>t.zField))&&(s=!0);let r=_.F.getLayoutInKey(null!==(e=null===(t=this._spec.layout)||void 0===t?void 0:t.type)&&void 0!==e?e:s?"layout3d":"base");if(r){let t=new r(this._spec.layout,{onError:null===(i=this._option)||void 0===i?void 0:i.onError});this._layoutFunc=t.layoutItems.bind(t)}}}layout(t){var e,i,s,r;if(null===(i=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeLayoutWithSceneGraph)||void 0===i||i.call(e),this.getLayoutTag()){this._event.emit(I.$7.layoutStart,{chart:this,vchart:this._option.globalInstance}),this.onLayoutStart(t);let e=this.getLayoutElements();this._layoutFunc(this,e,this._layoutRect,this._viewBox),this._event.emit(I.$7.afterLayout,{elements:e,chart:this}),this.setLayoutTag(!1),this.onLayoutEnd(t),this._event.emit(I.$7.layoutEnd,{chart:this,vchart:this._option.globalInstance})}null===(r=null===(s=this._option.performanceHook)||void 0===s?void 0:s.afterLayoutWithSceneGraph)||void 0===r||r.call(s)}onLayoutStart(t){this.getAllModels().forEach(e=>e.onLayoutStart(this._layoutRect,this._viewRect,t))}onLayoutEnd(t){this.getAllModels().forEach(e=>{"series"!==e.modelType&&e.onLayoutEnd(t)})}onEvaluateEnd(t){[...this._components,...this._regions,...this._series].forEach(e=>e.onEvaluateEnd(t))}getLayoutElements(){return this.getAllModels().map(t=>t.layout).filter(t=>!!t)}getModelById(t){let e=this._idMap.get(t);if(e&&e instanceof A.g)return e}getModelByUserId(t){let e=this.getSeriesInUserId(t);if(e)return e;let i=this.getRegionsInUserId(t);return i||this.getComponentByUserId(t)||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter(t=>t&&t instanceof k.c)}getMarkById(t){let e=this._idMap.get(t);if(e&&e instanceof k.c)return e}getMarkByUserName(t){return this.getAllMarks().filter(e=>e.name&&e.name===t)}updateData(t,e,i=!0,s){let r=this._dataSet.getDataView(t);r&&(r.markRunning(),r.parseNewData(e,s)),i&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(t=>t.onDataUpdate())}updateFullData(t,e=!0){(0,s.IX)(t).forEach(t=>{let e=this._dataSet.getDataView(t.id);e&&e.markRunning()}),(0,s.IX)(t).forEach(t=>{let e=this._dataSet.getDataView(t.id);e&&(0,n.kk)(e,t,!0)}),e&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(t=>t.onDataUpdate())}onRender(t){}setCanvasRect(t,e){this._canvasRect={width:t,height:e}}getCanvasRect(){return this._canvasRect||(this._canvasRect=(0,L.hK)(this._spec,this._option,{width:w.rV,height:w.b})),this._canvasRect}getSeriesData(t,e){return this._chartData.getSeriesData(t,e)}_transformSpecScale(){var t;let e=this._spec.scales?[...this._spec.scales]:[],i=e.find(t=>"color"===t.id),s=this.getColorScheme();if(!i&&(i={type:"ordinal",id:"color",domain:null,range:null},e.push(i),this._spec.color)){let t=this._spec.color;(0,l.Z)(t)?i.range=t:(Object.prototype.hasOwnProperty.call(t,"type")&&(i.type=t.type),Object.prototype.hasOwnProperty.call(t,"domain")&&(i.domain=t.domain),Object.prototype.hasOwnProperty.call(t,"range")&&(i.range=t.range),Object.prototype.hasOwnProperty.call(t,"specified")&&(i.specified=t.specified),Object.prototype.hasOwnProperty.call(t,"clamp")&&(i.clamp=t.clamp))}return(null===(t=i.range)||void 0===t?void 0:t.length)||(i.range=(0,E.wW)(s),i.rangeTheme=!0),e}_createGlobalScale(){this._globalScale=new f(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){let t=new Set;this._series.forEach(e=>{let i=e.getSeriesKeys();i&&i.forEach(e=>t.add(e))});let e=Array.from(t);this._globalScale.updateScaleDomain(e)}updateGlobalScale(t){(0,L.eo)(t,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){let t=this._globalScale.getScaleSpec("color"),e=this.getColorScheme();t.rangeTheme&&(t.range=(0,E.wW)(e),this._globalScale.getScale("color").range(t.range))}_getSpecKeys(t){let e={width:!0,height:!0};return Object.keys(t).filter(t=>!e[t]).sort()}updateSpec(t){let e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),t.type!==this.type)return e.reMake=!0,e;let i=this._getSpecKeys(this._spec),r=this._getSpecKeys(t);if(!(0,h.X)(i,r))return e.reMake=!0,e;for(let r=0;r<i.length;r++){let n=i[r];if((0,l.Z)(this._spec[n])&&this._spec[n].length!==(0,s.IX)(t[n]).length)return e.reMake=!0,e}let n=this._spec;return this._spec=t,this.updateChartConfig(e,n),e.reMake||(this.updateGlobalScale(e),e.reMake||(this.updateRegionSpec(e),e.reMake||(this.updateComponentSpec(e),e.reMake||(this.updateSeriesSpec(e),e.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain()))))),e}updateChartConfig(t,e){var i,s;this._paddingSpec=(0,S.Ek)(null!==(i=this._spec.padding)&&void 0!==i?i:null===(s=this._option)||void 0===s?void 0:s.getTheme().padding),this._updateLayoutRect(this._viewBox)}updateDataSpec(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(t){var e;(null===(e=this._spec)||void 0===e?void 0:e.region)&&(this._spec.region.length===this._regions.length?this._regions.forEach(e=>{(0,L.eo)(t,e.updateSpec(this._spec.region[e.getSpecIndex()]))}):t.reMake=!0)}updateComponentSpec(t){let e={},i={[v.L.title]:!0,[v.L.brush]:!0,[v.L.mapLabel]:!0,[v.L.indicator]:!0};for(let s in this._components.forEach(s=>{var r,n;if(s.type===v.L.label||s.type===v.L.totalLabel)return;i[s.type]&&(i[s.type]=!1);let a=s.specKey||s.type,o=null!==(r=this._spec[a])&&void 0!==r?r:{};(0,l.Z)(o)?(e[a]=e[a]||{specCount:o.length,componentCount:0},e[a].componentCount++,(0,L.eo)(t,s.updateSpec(null!==(n=o[s.getSpecIndex()])&&void 0!==n?n:{},o))):(0,L.eo)(t,s.updateSpec(o))}),e)if(Object.prototype.hasOwnProperty.call(e,s)){let i=e[s];i.componentCount!==i.specCount&&(t.reMake=!0)}let s=t=>t&&!1!==t.visible;Object.keys(i).forEach(e=>{if(i[e]){let i=this._spec[e];((0,l.Z)(i)?i.some(s):s(i))&&(t.reMake=!0)}})}updateSeriesSpec(t){this._spec.series.length===this._series.length?this._series.forEach(e=>{let i=this._spec.series[e.getSpecIndex()];(0,L.eo)(t,e.updateSpec(i))}):t.reMake=!0}getCanvas(){var t,e;return null!==(e=null===(t=this.getCompiler())||void 0===t?void 0:t.getCanvas())&&void 0!==e?e:null}_updateLayoutRect(t){let e=this.getCanvasRect();if(t){this._viewBox=t;let{x1:i=0,y1:s=0,x2:r,y2:n}=t;e={width:r-i,height:n-s}}else this._viewBox={x1:0,y1:0,x2:e.width,y2:e.height};this._viewRect=e,this.padding=(0,S.qY)(this._paddingSpec,e,e),this._layoutRect.width=e.width-this.padding.left-this.padding.right,this._layoutRect.height=e.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(I.$7.layoutRectUpdate,{chart:this})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()}reInit(){[...this._regions,...this._series,...this._components].forEach(t=>{let e=t.getSpecInfo();e&&e.spec&&t.reInit(e.spec)})}clear(){this.getAllModels().forEach(t=>{var e;return null===(e=t.clear)||void 0===e?void 0:e.call(t)})}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach(t=>{var e;null===(e=t.afterCompile)||void 0===e||e.call(t)}),this.getAllSeries().forEach(t=>{var e;null===(e=t.afterCompile)||void 0===e||e.call(t)}),this.getAllComponents().forEach(t=>{var e;null===(e=t.afterCompile)||void 0===e||e.call(t)})}compileLayout(){let{width:t,height:e}=this.getCanvasRect();this.getCompiler().setSize(t,e)}compileBackground(){var t;this._backgroundMark&&(this._backgroundMark.compile({context:{model:this}}),null===(t=this._backgroundMark.getProduct())||void 0===t||t.layout(()=>{}))}compileRegions(){var t,e,i,s;null===(e=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeRegionCompile)||void 0===e||e.call(t),this.getAllRegions().forEach(t=>{t.compile()}),null===(s=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterRegionCompile)||void 0===s||s.call(i)}compileSeries(){var t,e,i,s;null===(e=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeSeriesCompile)||void 0===e||e.call(t),this.getAllSeries().forEach(t=>{t.compile()}),null===(s=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterSeriesCompile)||void 0===s||s.call(i)}compileComponents(){var t,e,i,s;null===(e=null===(t=this._option.performanceHook)||void 0===t?void 0:t.beforeComponentCompile)||void 0===e||e.call(t),this.getAllComponents().forEach(t=>{t.compile()}),null===(s=null===(i=this._option.performanceHook)||void 0===i?void 0:i.afterComponentCompile)||void 0===s||s.call(i)}release(){[...this._components,...this._regions,...this._series].forEach(t=>{t.beforeRelease()}),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach(t=>{t.release()}),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(t){let e=t.rootMark;this.layout({group:e,srView:t})}updateState(t,e){let i=this.getAllSeries();for(let s in t){if((0,u.Z)(t[s]))continue;let r=t[s],n={stateValue:s};n=(0,M.Z)(r.filter)?Object.assign({filter:r.filter},n):Object.assign(Object.assign({},r.filter),n),r.level&&(n.level=r.level),i.forEach(t=>{t.getMarks().forEach(i=>{i.stateStyle[s]&&(e&&!e(t,i,s)||(i.state.changeStateInfo(n),i.updateMarkState(s)))})})}}setSelected(t,e,i){this._setStateInDatum(O.q.STATE_SELECTED,!0,t,e,i)}setHovered(t,e,i){this._setStateInDatum(O.q.STATE_HOVER,!0,t,e,i)}clearState(t){this.getAllRegions().forEach(e=>{e.interaction.clearEventElement(t,!0),e.interaction.resetInteraction(t,null)})}clearAllStates(){this.getAllRegions().forEach(t=>{t.interaction.clearAllEventElement(),t.interaction.resetAllInteraction()})}clearSelected(){this.clearState(O.q.STATE_SELECTED)}clearHovered(){this.clearState(O.q.STATE_HOVER)}_initEvent(){[I.$7.dataZoomChange,I.$7.scrollBarChange].forEach(t=>{this._event.on(t,({value:t})=>{this._disableMarkAnimation(["exit","update"]);let e=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off(R.ZK.AFTER_MARK_RENDER_END,e)};this._event.on(R.ZK.AFTER_MARK_RENDER_END,e)})})}_enableMarkAnimation(t){this.getAllMarks().forEach(e=>{let i=e.getProduct();i&&i.animate&&i.animate.enableAnimationState(t)})}_disableMarkAnimation(t){this.getAllMarks().forEach(e=>{let i=e.getProduct();i&&i.animate&&i.animate.disableAnimationState(t)})}_setStateInDatum(t,e,i,r,n){let a=(i=i?(0,s.IX)(i):null)?Object.keys(i[0]):null;this.getRegionsInQuerier(n).forEach(s=>{i?(s.getSeries().forEach(e=>{e.getMarks().forEach(n=>{if(n.getProduct()&&(!r||(0,M.Z)(r)&&r(e,n))){let e=n.getProduct().isCollectionMark(),r=n.getProduct().elements,o=[];if(e)o=r.filter(t=>{let e=t.getDatum();i.every((t,i)=>a.every(s=>t[s]==e[i][s]))});else if(i.length>1){let t=i.slice();o=r.filter(e=>{if(0===t.length)return!1;let i=e.getDatum(),s=t.findIndex(t=>a.every(e=>t[e]==i[e]));return s>=0&&(t.splice(s,1),!0)})}else{let t=r.find(t=>a.every(e=>i[0][e]==t.getDatum()[e]));t&&(o=[t])}o.forEach(e=>{s.interaction.startInteraction(t,e)})}})}),e&&s.interaction.reverseEventElement(t)):s.interaction.clearEventElement(t,!0)})}setDimensionIndex(t,e){var i;let s=null;Array.from(this._event.getComposedEventMap().values()).forEach(i=>{let{eventType:r,event:n}=i;if(r===P.C.dimensionHover||r===P.C.dimensionClick){let i=n.dispatch(t,e);(null==i?void 0:i.length)&&(s=i)}});let r=(0,d.Z)(t)||!s||s.every(t=>(0,c.lK)(t.axis.getScale().type)&&(0,d.Z)(t.index));if(!1!==e.tooltip){let t=this.getComponentsByType(v.L.tooltip)[0];if(null==t?void 0:t.getVisible()){if(r)null===(i=t.hideTooltip)||void 0===i||i.call(t);else{let i={};s.forEach(t=>{let{axis:e,value:s,data:r}=t,n="left"===e.getOrient()||"right"===e.getOrient();r.forEach(t=>{var e,r,a;let o=n?t.series.fieldY[0]:t.series.fieldX[0];i[o]=null!==(a=null===(r=null===(e=t.datum)||void 0===e?void 0:e[0])||void 0===r?void 0:r[o])&&void 0!==a?a:s})}),t.showTooltip(i,e.showTooltipOption)}}}if(!1!==e.crosshair){let t=this.getComponentsByType(v.L.cartesianCrosshair)[0];t&&t.clearAxisValue&&t.setAxisValue&&(r?t.hideCrosshair():t.showCrosshair(s))}}getColorScheme(){var t,e;return null===(e=(t=this._option).getTheme)||void 0===e?void 0:e.call(t).colorScheme}}},666:function(t,e,i){i.d(e,{I:()=>l});var s=i(6082),r=i(1130),n=i(5507),a=i(6979),o=i(4218);class l extends n.w{needAxes(){return!0}_isValidSeries(t){return!this.seriesType||t===this.seriesType}_getDefaultSeriesSpec(t,e){return super._getDefaultSeriesSpec(t,["xField","yField","zField","direction","stack","percent","stackOffsetSilhouette","totalLabel","sortDataByAxis"],e)}transformSpec(t){super.transformSpec(t),super.transformSeriesSpec(t),this._transformAxisSpec(t)}_setDefaultXAxisSpec(t){return{orient:"bottom"}}_setDefaultYAxisSpec(t){return{orient:"left"}}_setDefaultZAxisSpec(t){return{orient:"z"}}_transformAxisSpec(t){if(this.needAxes()){t.axes||(t.axes=[]);let e={x:!1,y:!1,z:!1};t.axes.forEach(i=>{let{orient:n}=i,l=null;"top"!==n&&"bottom"!==n||(e.x=!0,l=this._setDefaultXAxisSpec(t)),"left"!==n&&"right"!==n||(e.y=!0,l=this._setDefaultYAxisSpec(t)),"z"===n&&(e.z=!0,l=this._setDefaultZAxisSpec(t)),l&&Object.keys(l).forEach(t=>{(0,s.Z)(i[t])&&(i[t]=l[t])}),(0,r.Z)(i,"trimPadding")&&(0,o.H)(i,(0,a.Sh)(this.type,t))}),e.x||t.axes.push(this._setDefaultXAxisSpec(t)),e.y||t.axes.push(this._setDefaultYAxisSpec(t)),t.zField&&!e.z&&t.axes.push(this._setDefaultZAxisSpec(t))}}}},4224:function(t,e,i){i.d(e,{T:()=>h});var s=i(3722),r=i(9478),n=i(6358),a=i(6082);let o=(t,e)=>{let i={nodes:{}},{fields:s}=e;if(!(null==s?void 0:s.length))return i;let r=s.length-1,n,o=i;return t.forEach(t=>{t.latestData&&t.latestData.forEach(t=>{o=i;for(let e=0;e<s.length;e++){let i=s[e],l=t[i];if((0,a.Z)(l))break;o.groupField=i,o.nodes[l]||(e===r?o.nodes[l]={values:[]}:(n={nodes:{}},o.nodes[l]=n)),e===r?o.nodes[l].values.push(t):o=o.nodes[l]}})}),i};class l{constructor(t,e){this.stackRegion=({model:t})=>{var e;let i=t.getSeries();if(!i.some(t=>t.getStack()))return;let s=i.some(t=>{var e,i;return null===(i=null===(e=t.getSpec())||void 0===e?void 0:e.totalLabel)||void 0===i?void 0:i.visible}),n=s||i.some(t=>t.getPercent()),a=i.some(t=>t.getStackOffsetSilhouette()),o=(0,r.oW)(t,!0);for(let e in o)for(let i in o[e].nodes)(0,r.kn)(o[e].nodes[i],t.getStackInverse(),n,s);if(a)for(let t in o)for(let e in o[t].nodes)(0,r.Ku)(o[t].nodes[e]);s&&t.getSeries().forEach(t=>{let e=t.getStackData(),i=t.getStackValue(),s=t.getStackValueField();e&&s&&(0,r.Q3)(o[i],s)}),(null===(e=this._options)||void 0===e?void 0:e.afterStackRegion)&&this._options.afterStackRegion(t,o)},this._chart=t,this._options=e}init(){this._chart.getAllRegions().forEach(t=>{t.event.on(s.$7.regionSeriesDataFilterOver,{filter:({model:e})=>(null==e?void 0:e.id)===t.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(t=>{this.stackRegion({model:t})})}}class h{_beforeInit(){this._dataSet&&(0,n.U)(this._dataSet,"stackSplit",o)}_initStack(){this._stack=new l(this),this._stack.init()}}},6979:function(t,e,i){i.d(e,{R2:()=>d,Sh:()=>p,eo:()=>c,hK:()=>u});var s=i(1725),r=i(9904),n=i(4546),a=i(7623),o=i(7631),l=i(4218),h=i(8612);function d(t){t.crosshair=(0,n.IX)(t.crosshair||{}).map(e=>(0,l.H)({["horizontal"===t.direction?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},e))}function u(t,e,i){var n;let{width:l,height:d}=t;if((0,a.Z)(l)&&(0,a.Z)(d))return{width:l,height:d};let u=i.width,c=i.height,p=e.container,g=e.canvas;if(p){let{width:t,height:e}=(0,s.Op)(p,i.width,i.height);u=t,c=e}else if(g&&(0,o.qe)(e.mode)){let t;t=(0,r.Z)(g)?h.rF.getElementById(g):g;let{width:e,height:n}=(0,s.Op)(t,i.width,i.height);u=e,c=n}else if((0,o.Oy)(e.mode)&&(null===(n=e.modeParams)||void 0===n?void 0:n.domref)){let t=e.modeParams.domref;u=t.width,c=t.height}return{width:u=null!=l?l:u,height:c=null!=d?d:c}}function c(t,...e){let i=i=>e.reduce((t,e)=>t||(null==e?void 0:e[i]),t[i]);return Object.assign(t,{change:i("change"),reCompile:i("reCompile"),reMake:i("reMake"),reRender:i("reRender"),reSize:i("reSize"),reTransformSpec:i("reTransformSpec"),changeTheme:i("changeTheme"),changeBackground:i("changeBackground")}),t}function p(t,e){return"line"===t||"area"===t||"common"===t&&e.series.every(t=>"area"===t.type||"line"===t.type)?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}},8321:function(t,e,i){i.d(e,{H:()=>s});class s{getOption(){return this._option}constructor(t){this._option=t,this.getCompiler=this._option.getCompiler}getVGrammarView(){var t;return null===(t=this.getCompiler())||void 0===t?void 0:t.getVGrammarView()}release(){this._option=null,this.getCompiler=null}}},3558:function(t,e,i){i.d(e,{O:()=>a});var s=i(9801),r=i(6082),n=i(6031);class a extends s.F{getDataView(){return this._data}setDataView(t){this._data=t}getLatestData(){var t;return null===(t=this._data)||void 0===t?void 0:t.latestData}constructor(t,e){super(t),this.grammarType=n._.data,this._data=null,this._data=e}release(){super.release(),this._data=null}updateData(t){let e=this.getProduct(),i=this.getLatestData();if(e&&i&&(e.values(i),!t))return this.getCompiler().renderNextTick()}_compileProduct(){let t=this.getLatestData();(0,r.Z)(t)||((0,r.Z)(this.getProduct())?this._initProduct(t):this._product.values(t))}_initProduct(t){var e,i;let s=this.getVGrammarView();if(!s||!t)return;let r=this.getProductId();this._product=null===(i=null===(e=null==s?void 0:s.data)||void 0===e?void 0:e.call(s,t))||void 0===i?void 0:i.id(r),this._compiledProductId=r}generateProductId(){var t;return`${null===(t=this.getDataView())||void 0===t?void 0:t.name}`}_lookupGrammar(t){var e,i;return null===(i=null===(e=this.getCompiler().getVGrammarView())||void 0===e?void 0:e.getDataById)||void 0===i?void 0:i.call(e,t)}}},9801:function(t,e,i){i.d(e,{F:()=>a});var s=i(7623),r=i(9013),n=i(8321);class a extends n.H{constructor(){super(...arguments),this.id=(0,r.a)(),this._compiledProductId=null,this._depend=[]}getProduct(){if((0,s.Z)(this._product))return this._product;let t=this.getVGrammarView(),e=this.getProductId();return(0,s.Z)(e)&&(0,s.Z)(t)&&(this._product=this._lookupGrammar(e)),this._product}getProductId(){var t;return null!==(t=this._compiledProductId)&&void 0!==t?t:this.generateProductId()}getDepend(){return this._depend}setDepend(...t){this._depend=t}compile(t){this._compileProduct(t),this._afterCompile(t)}_afterCompile(t){var e;(0,s.Z)(this._product)&&(null===(e=this.getCompiler())||void 0===e||e.addGrammarItem(this))}updateDepend(){if((0,s.Z)(this._product)){let t=this.getDepend().map(t=>t.getProduct()).filter(s.Z);return this._product.depend(t),t.length===this.getDepend().length}return!1}release(){this.removeProduct(),super.release(),this._depend=[]}removeProduct(t){this.getCompiler().removeGrammarItem(this,t),this._product=null,this._compiledProductId=null}}},6031:function(t,e,i){var s,r;i.d(e,{_:()=>s}),(r=s||(s={})).data="data",r.signal="signal",r.mark="mark"},5208:function(t,e,i){var s,r,n,a;i.d(e,{p:()=>r,q:()=>s}),(n=s||(s={})).STATE_NORMAL="normal",n.STATE_HOVER="hover",n.STATE_HOVER_REVERSE="hover_reverse",n.STATE_DIMENSION_HOVER="dimension_hover",n.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",n.STATE_SELECTED="selected",n.STATE_SELECTED_REVERSE="selected_reverse",n.STATE_SANKEY_EMPHASIS="selected",n.STATE_SANKEY_EMPHASIS_REVERSE="blur",(a=r||(r={})).STATE_HOVER_REVERSE="hover_reverse",a.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",a.STATE_SELECTED_REVERSE="selected_reverse"},1966:function(t,e,i){i.d(e,{Aw:()=>h,hx:()=>n,wC:()=>o});var s=i(9038),r=i(5208);function n(t,e,i){var r,n,a;let o=null===(r=e[t])||void 0===r?void 0:r.style;return n=t,a=o,!!(("fill"===n||"stroke"===n)&&(null==a?void 0:a.gradient)&&(null==a?void 0:a.stops)||(0,s.Z)(o))||!(!(null==o?void 0:o.scale)||o.field===i)}let a={};function o(t){return!!a[t]}Object.values(r.q).forEach(t=>{a[t]=!0});let l={[r.q.STATE_HOVER]:r.q.STATE_HOVER_REVERSE,[r.q.STATE_SELECTED]:r.q.STATE_SELECTED_REVERSE,[r.q.STATE_DIMENSION_HOVER]:r.q.STATE_DIMENSION_HOVER_REVERSE};function h(t){return l[t]}},0:function(t,e,i){i.d(e,{O:()=>d});var s=i(325),r=i(9801),n=i(7623),a=i(6031);class o extends r.F{getValue(){return this._value}getUpdateFunc(){return this._updateFunc}constructor(t,e,i,s){super(t),this.grammarType=a._.signal,this.name=e,this._value=i,this._updateFunc=s}updateSignal(t,e){this._value=t,this._updateFunc=e,this.compile()}_compileProduct(){let t=this.getVGrammarView();if(t){if(!this.getProduct()){let e=this.getProductId();this._product=t.signal().id(e),this._compiledProductId=e}(0,n.Z)(this._value)&&this._product.value(this._value),(0,n.Z)(this._updateFunc)&&this._product.update(this._updateFunc)}}generateProductId(){return this.name}_lookupGrammar(t){var e;return null===(e=this.getCompiler().getVGrammarView())||void 0===e?void 0:e.getSignalById(t)}}var l=i(8321);class h extends l.H{constructor(){super(...arguments),this._signalMap={}}getSignalMap(){return this._signalMap}getSignal(t){return this._signalMap[t]}updateSignal(t,e,i){this._signalMap[t]?this._signalMap[t].updateSignal(e,i):(this._signalMap[t]=new o(this._option,t,e,i),this._signalMap[t].compile())}compile(){Object.values(this._signalMap).forEach(t=>{t.compile()})}release(){super.release(),Object.values(this._signalMap).forEach(t=>{t.release()}),this._signalMap={}}}class d extends h{getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(t){super(t),t.stateKeyToSignalName?this.stateKeyToSignalName=t.stateKeyToSignalName:this.stateKeyToSignalName=()=>"state_signal",this.initStateMap()}initStateMap(t){this._stateMap=null!=t?t:this._getDefaultStateMap()}compile(t){let e=null!=t?t:this._stateMap;Object.keys(e).forEach(t=>{let i=this.stateKeyToSignalName(t),s=e[t];this.updateSignal(i,s)})}updateState(t,e){if(t&&((0,s.Z)(this._stateMap,t),this.compile(t),!e))return this.getCompiler().renderNextTick()}}},9286:function(t,e,i){i.d(e,{k:()=>z,R:()=>N});var s=i(5173),r=i(8746),n=i(3558),a=i(7602),o=i(9114),l=i(4218),h=i(3722),d=i(6542),u=i(208),c=i(7623),p=i(1130),g=i(7636),m=i(4546),f=i(9730),v=i(9198),_=i(9038),y=i(6082),b=i(1805),x=i(4267),S=i(123),A=i(6338),k=i(2698),w=i(8120),T=i(8469),C=i(1670),M=i(3118),E=i(3872),B=i(645),O=i(8378),I=i(5660),R=i(3745);class P extends M.rd{constructor(){super(...arguments),this.mode=E.uq.NORMAL}onBind(){let t=this.target.getInnerView(),e=this.target.getPrevInnerView();e&&(this._newElementAttrMap={},(0,R.Ck)(t,t=>{var i,s,r,n,a,o;if("group"!==t.type&&t.id){let l=e[t.id];if(l){if(!(0,f.X)(t.attribute,l.attribute)){let e=(0,B.Z)(t.attribute);this._newElementAttrMap[t.id]={state:"update",node:t,attrs:Object.assign(Object.assign({},e),{opacity:null!==(i=e.opacity)&&void 0!==i?i:1,fillOpacity:null!==(s=e.fillOpacity)&&void 0!==s?s:1,strokeOpacity:null!==(r=e.strokeOpacity)&&void 0!==r?r:1})},t.setAttributes(l.attribute)}}else{let e={opacity:null!==(n=t.attribute.opacity)&&void 0!==n?n:1,fillOpacity:null!==(a=t.attribute.fillOpacity)&&void 0!==a?a:1,strokeOpacity:null!==(o=t.attribute.strokeOpacity)&&void 0!==o?o:1};this._newElementAttrMap[t.id]={state:"enter",node:t,attrs:e},t.setAttributes({opacity:0,fillOpacity:0,strokeOpacity:0})}}}))}onStart(){let t=this.duration,e=this.easing;this._newElementAttrMap&&Object.keys(this._newElementAttrMap).forEach(i=>{var s;let{node:r,attrs:n,state:a}=this._newElementAttrMap[i];if("enter"===a){let{enter:i={}}=null!==(s=this.params)&&void 0!==s?s:{};t=(0,O.Z)(i.duration)?i.duration:t,e=i.easing?i.easing:e}"path"===r.type?r.animate({interpolate:(t,e,i,s,r)=>"path"===t&&(r.path=(0,I.IT)(i,s)(e),!0)}).to(n,t,e):r.animate().to(n,t,e)})}onUpdate(t,e,i){}}class L extends M.rd{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:0}})}onEnd(){this.target.setTheme({common:{opacity:1}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:e}})}}class D extends M.rd{getEndProps(){return{}}onBind(){this.target.setTheme({common:{opacity:1}})}onEnd(){this.target.setTheme({common:{opacity:0}})}onUpdate(t,e,i){this.target.setTheme({common:{opacity:1-e}})}}let Z=t=>t;var F=i(6358),j=i(2096),H=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class z extends r.H{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(t=0){return this._tickData[t]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(t,e){var i;super(t,e),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._visible=null===(i=t.visible)||void 0===i||i,this._coordinateType="none"}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){var t,e,i,s;return[null===(e=null===(t=this._axisMark)||void 0===t?void 0:t.getProduct())||void 0===e?void 0:e.getGroupGraphicItem(),null===(s=null===(i=this._gridMark)||void 0===i?void 0:i.getProduct())||void 0===s?void 0:s.getGroupGraphicItem()].filter(c.Z)}created(){var t,e,i,s,r,n,a,o,l,h,g,m,f,v,_,y,b,x;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){let S=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:"angle"===this.getOrient()?"circleAxis":"axis",mode:this._spec.mode,noSeparateStyle:!0},{skipTheme:!0});if(this._axisMark=S,S.setMarkConfig({zIndex:this.layoutZIndex}),(0,c.Z)(this._spec.id)&&S.setUserId(this._spec.id),S.setMarkConfig({interactive:null!==(t=this._spec.interactive)&&void 0!==t?t:this.getDefaultInteractive()}),this._marks.addMark(S),null===(e=this._spec.grid)||void 0===e?void 0:e.visible){let t=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:"angle"===this.getOrient()?k.Fp.circleAxisGrid:k.Fp.lineAxisGrid,mode:this._spec.mode,noSeparateStyle:!0},{skipTheme:!0});t.setMarkConfig({zIndex:null!==(a=null!==(r=null===(s=null===(i=this._spec.grid)||void 0===i?void 0:i.style)||void 0===s?void 0:s.zIndex)&&void 0!==r?r:null===(n=this._spec.grid)||void 0===n?void 0:n.zIndex)&&void 0!==a?a:d.Ai.Axis_Grid,interactive:!1}),this._marks.addMark(t),this._gridMark=t}if(!1!==this._option.animation&&!1!==(0,p.Z)(this._option.getChart().getSpec(),"animation")&&!0===this._spec.animation){let t=(0,u._8)(null===(o=T.F.getAnimationInKey("axis"))||void 0===o?void 0:o(),{appear:null!==(h=null!==(l=this._spec.animationAppear)&&void 0!==l?l:(0,p.Z)(this._option.getChart().getSpec(),"animationAppear.axis"))&&void 0!==h?h:(0,p.Z)(this._option.getChart().getSpec(),"animationAppear"),disappear:null!==(m=null!==(g=this._spec.animationDisappear)&&void 0!==g?g:(0,p.Z)(this._option.getChart().getSpec(),"animationDisappear.axis"))&&void 0!==m?m:(0,p.Z)(this._option.getChart().getSpec(),"animationDisappear"),enter:null!==(v=null!==(f=this._spec.animationEnter)&&void 0!==f?f:(0,p.Z)(this._option.getChart().getSpec(),"animationEnter.axis"))&&void 0!==v?v:(0,p.Z)(this._option.getChart().getSpec(),"animationEnter"),exit:null!==(y=null!==(_=this._spec.animationExit)&&void 0!==_?_:(0,p.Z)(this._option.getChart().getSpec(),"animationExit.axis"))&&void 0!==y?y:(0,p.Z)(this._option.getChart().getSpec(),"animationExit"),update:null!==(x=null!==(b=this._spec.animationUpdate)&&void 0!==b?b:(0,p.Z)(this._option.getChart().getSpec(),"animationUpdate.axis"))&&void 0!==x?x:(0,p.Z)(this._option.getChart().getSpec(),"animationUpdate")});t.enter&&(t.update[0].customParameters={enter:t.enter[0]}),this._marks.forEach(e=>e.setAnimationConfig(t))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){let t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this)),this._tickData=[new n.O(this._option,t)]}collectData(t,e){let i=[];return(0,o.xV)(this._regions,r=>{var n;let o=this.collectSeriesField(t,r);if(o=(0,g.Z)(o)?(0,s.z2)(this._scale.type)?o:[o[0]]:[o],t||(this._dataFieldText=r.getFieldAlias(o[0])),o){let t=r.getViewData();if(e)o.forEach(t=>{i.push(r.getRawDataStatisticsByField(t,!1))});else if(t&&t.latestData&&t.latestData.length){let e=null===(n=r.getViewDataStatistics)||void 0===n?void 0:n.call(r),s=this.type===a.L.cartesianLinearAxis&&this._spec.breaks&&this._spec.breaks.length;o.forEach(r=>{var n;(null===(n=null==e?void 0:e.latestData)||void 0===n?void 0:n[r])&&(s?i.push(Object.assign(Object.assign({},e.latestData[r]),{values:t.latestData.map(t=>t[r])})):i.push(e.latestData[r]))})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}isSeriesDataEnable(){let t=!0;return(0,o.xV)(this._regions,e=>{var i;(0,g.Z)(null===(i=e.getViewDataStatistics())||void 0===i?void 0:i.latestData)&&(t=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}setSeriesAndRegionsFromSpec(){let{seriesId:t,seriesIndex:e,regionId:i,regionIndex:s}=this._spec;(0,c.Z)(t)&&(this._seriesUserId=(0,m.IX)(t)),(0,c.Z)(i)&&(this._regionUserId=(0,m.IX)(i)),(0,c.Z)(e)&&(this._seriesIndex=(0,m.IX)(e)),(0,c.Z)(s)&&(this._regionIndex=(0,m.IX)(s)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(t=>t.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(h.$7.scaleUpdate,{filter:({model:t})=>(null==t?void 0:t.id)===this.id},this.effect.scaleUpdate.bind(this));let t=(0,o.gU)(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(t=>t.getViewDataStatistics()).filter(t=>!!t);t.length>1?this._option.dataSet.multipleDataViewAddListener(t,"change",()=>{this.updateScaleDomain()}):1===t.length&&t[0].target.addListener("change",()=>{this.updateScaleDomain()}),(0,o.xV)(this._regions,t=>{t.event.on(h.$7.rawDataUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===t.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(t){this.updateScaleRange(),this.event.emit(h.$7.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd(t)}computeData(t){"force"!==t||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||"force"!==t&&(0,f.X)(this._scale.range(),[0,1])||this._tickData.forEach(t=>{t.getDataView().reRunAllTransform(),t.updateData()}):(0,o.xV)(this._regions,t=>{var e;null===(e=t.getViewData())||void 0===e||e.reRunAllTransform()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}initScales(){this._scales=[this._scale];let t=[];if((0,o.xV)(this._regions,e=>{let i=e.getGroups();i&&t.push(i)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),0!==t.length){let e=(0,m.CE)(t.map(t=>t.fields.length));for(let t=1;t<e;t++){let t=this._scale.clone();this._scales.push(t)}}}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(i.reRender=!0,(null==e?void 0:e.type)!==(null==t?void 0:t.type)||(null==e?void 0:e.visible)!==(null==t?void 0:t.visible)?i.reMake=!0:i.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(i=>{var s,r;return(null===(s=null==e?void 0:e[i])||void 0===s?void 0:s.visible)!==(null===(r=null==t?void 0:t[i])||void 0===r?void 0:r.visible)})),i}_getAxisAttributes(){let t=this._spec,e={orient:this.getOrient(),select:!0!==this._option.disableTriggerEvent&&t.select,hover:!0!==this._option.disableTriggerEvent&&t.hover};if(t.domainLine&&t.domainLine.visible?e.line=(0,x.lc)(t.domainLine):e.line={visible:!1},t.label&&t.label.visible){let i=(0,v.Z)(t.label,["style","formatMethod","state"]);e.label=i,t.label.style&&(e.label.style=(0,_.Z)(t.label.style)?(e,i,s,r)=>{var n;let a=t.label.style(e.rawValue,i,e,s,r);return(0,S.h_)((0,l.H)({},null===(n=this._theme.label)||void 0===n?void 0:n.style,a))}:(0,S.h_)(t.label.style)),(t.label.formatMethod||t.label.formatter)&&(e.label.formatMethod=this._getLabelFormatMethod()),t.label.state&&(e.label.state=(0,S.Wi)(t.label.state))}else e.label={visible:!1};if(t.tick&&t.tick.visible?(e.tick={visible:t.tick.visible,length:t.tick.tickSize,inside:t.tick.inside,alignWithLabel:t.tick.alignWithLabel,dataFilter:t.tick.dataFilter},t.tick.style&&(e.tick.style=(0,_.Z)(t.tick.style)?(e,i,s,r)=>{var n;let a=t.tick.style(e,i,s,r);return(0,S.h_)((0,l.H)({},null===(n=this._theme.tick)||void 0===n?void 0:n.style,a))}:(0,S.h_)(t.tick.style)),t.tick.state&&(e.tick.state=(0,S.Zv)(t.tick.state))):e.tick={visible:!1},t.subTick&&t.subTick.visible?(e.subTick={visible:t.subTick.visible,length:t.subTick.tickSize,inside:t.subTick.inside,count:t.subTick.tickCount},t.subTick.style&&(e.subTick.style=(0,_.Z)(t.subTick.style)?(e,i,s,r)=>{var n;let a=t.subTick.style(e,i,s,r);return(0,S.h_)((0,l.H)({},null===(n=this._theme.subTick)||void 0===n?void 0:n.style,a))}:(0,S.h_)(t.subTick.style)),t.subTick.state&&(e.subTick.state=(0,S.Zv)(t.subTick.state))):e.subTick={visible:!1},t.title&&t.title.visible){let i=t.title,{autoRotate:s,angle:r,style:n={},background:a,state:o,shape:h}=i,d=H(i,["autoRotate","angle","style","background","state","shape"]),u,c=r;"left"!==t.orient&&"right"!==t.orient||s&&(0,y.Z)(c)&&(c="left"===t.orient?-90:90,u=x.Rb[t.orient]),e.title=Object.assign(Object.assign({},d),{autoRotate:!1,angle:c?(0,b.M4)(c):null,textStyle:(0,l.H)({},u,(0,S.h_)(n)),pickable:!1!==n.pickable,childrenPickable:!1!==n.pickable,state:{}}),h&&h.visible?(e.title.shape=Object.assign(Object.assign({},h),{style:(0,S.h_)(h.style)}),h.state&&(e.title.state.shape=(0,S.Zv)(h.state))):e.title.shape={visible:!1},a&&a.visible?(e.title.background=Object.assign(Object.assign({},a),{style:(0,S.h_)(a.style)}),a.state&&(e.title.state.background=(0,S.Zv)(a.state))):e.title.background={visible:!1},o&&(e.title.state.text=(0,S.Zv)(o))}else e.title={visible:!1};return t.background&&t.background.visible?(e.panel={visible:!0},t.background.style&&(e.panel.style=(0,S.h_)(t.background.style)),t.background.state&&(e.panel.state=(0,S.Zv)(t.background.state))):e.panel={visible:!1},e}_getGridAttributes(){let t=this._spec;return{alternateColor:t.grid.alternateColor,alignWithLabel:t.grid.alignWithLabel,style:(0,_.Z)(t.grid.style)?()=>(e,i)=>{var s,r;let n=t.grid.style(null===(s=e.datum)||void 0===s?void 0:s.rawValue,i,e.datum);return(0,S.h_)((0,l.H)({},null===(r=this._theme.grid)||void 0===r?void 0:r.style,n))}:(0,S.h_)(t.grid.style),subGrid:!1===t.subGrid.visible?{visible:!1}:{type:"line",visible:t.subGrid.visible,alternateColor:t.subGrid.alternateColor,style:(0,S.h_)(t.subGrid.style)}}}_getLabelFormatMethod(){let{formatMethod:t,formatter:e}=this._spec.label,{formatFunc:i}=(0,j.HJ)(t,e);return i?(t,s,r)=>i(s.rawValue,s,e):null}_initTickDataSet(t,e=0){(0,F.I)(this._option.dataSet,"scale",Z);let i=this.registerTicksTransform();return new A.VO(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${e}`}).parse(this._scales[e],{type:"scale"}).transform({type:i,options:t},!1)}_tickTransformOption(){let t=this._tick||{},e=this._spec.label||{},{tickCount:i,forceTickCount:s,tickStep:r,tickMode:n}=t,{style:a,formatMethod:o,minGap:l}=e;return{sampling:!1!==this._spec.sampling,tickCount:i,forceTickCount:s,tickStep:r,tickMode:n,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:a,labelFormatter:o,labelGap:l}}addTransformToTickData(t,e){this._tickData.forEach(i=>{var s;null===(s=null==i?void 0:i.getDataView())||void 0===s||s.transform(t,e)})}dataToPosition(t){return this._scale.scale(t)}getDatum(t){var e,i;return t&&t.name===C.X9.label?t.data:this._axisMark?null===(i=null===(e=this._axisMark.getProduct())||void 0===e?void 0:e.getGroupGraphicItem())||void 0===i?void 0:i.attribute.items:void 0}}z.specKey="axes";let N=()=>{(0,w.k)(),T.F.registerAnimation("axis",()=>({appear:{custom:L},update:{custom:P},exit:{custom:D}}))}},8871:function(t,e,i){i.d(e,{O:()=>j});var s=i(4546),r=i(7393),n=i(4218),a=i(9114),o=i(7623),l=i(8378),h=i(7636),d=i(7846),u=i(1960),c=i(3604),p=i(6082),g=i(5173),m=i(8469),f=i(3881),v=i(3722),_=i(6542);function y(t){return t.length>=2&&(0,l.Z)(t[0])&&(0,l.Z)((0,s.Z$)(t))&&(0,s.Z$)(t)>=t[0]}function b(t,e){var i;let r=(0,s.Z$)(e)-e[0],n=(0,s.Z$)(e)*e[0]<0,a=e[0]<=0?0-e[0]:0,o=(0,s.Z$)(e)>0?(0,s.Z$)(e)-0:0;0===r?e[0]<0?(a=1,o=0):e[0]>0&&(a=0,o=1):(a/=r,o/=r);let h=t.getDomainSpec(),d={total:r,negative:a,positive:o,includeZero:n,domain:e,extendable_min:!(0,l.Z)(h.min),extendable_max:!(0,l.Z)(h.max)};if(null===(i=t._break)||void 0===i?void 0:i.scope){let i,r;let n=e.findIndex(t=>t>=0);0===n?(i=t._break.scope[n],r=[e[0],e[1]],d.positive=1,d.negative=0):0>=(0,s.Z$)(e)?(d.positive=0,d.negative=1,r=[e[e.length-2],e[e.length-1]]):(i=t._break.scope[n-1],r=[e[n-1],e[n]],d.negative=i[0]+(0-r[0])/(r[1]-r[0])*(i[1]-i[0]),d.positive=1-d.negative),d.break=!0,d.extendable_max=!1,d.extendable_min=!1,d.domain=r}return d}function x(t,e){let{positive:i,negative:s,extendable_min:r,extendable_max:n,domain:a}=t,{positive:o,negative:l,extendable_min:h,extendable_max:d,domain:u}=e;if(o>0){if(!h)return!1;let t=s/i;n&&(t=s/Math.max(i,o),a[1]=-a[0]/t),u[0]=-u[1]*t}else if(l>0){if(!d)return!1;let t=i/s;r&&(t=i/Math.max(s,s),a[0]=-a[1]/t),u[1]=-u[0]*t}return!0}function S(t,e){let{extendable_min:i,extendable_max:s,domain:r}=t,{positive:n,negative:a,domain:o}=e;return(0!==n||0!==a)&&!(n>0&&!s)&&!(a>0&&!i)&&(r[0]=o[0],r[1]=o[1],!0)}function A(t,e){let{positive:i,negative:s,extendable_max:r,domain:n}=t,{positive:a,negative:o,extendable_min:l,domain:h}=e;if(r&&l){let t=Math.max(s,o)/Math.max(i,a);n[1]=-n[0]/t,h[0]=-h[1]*t}else if(l)h[0]=-h[1]*(s/i);else{if(!r)return!1;n[1]=-n[0]/(o/a)}return!0}function k(t,e){let{extendable_min:i,domain:s}=t,{extendable_max:r,domain:n}=e;return!(!i||!r)&&(s[0]=-s[1],n[1]=-n[0],!0)}let w=(t,e)=>{var i,s,r,n;let a=t.getScale(),o=e.getScale();if(!a||!o)return;let l=null!==(s=null===(i=t.getDomainAfterSpec)||void 0===i?void 0:i.call(t))&&void 0!==s?s:[0,1],h=null!==(n=null===(r=e.getDomainAfterSpec)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[0,1];if(!(l&&h&&y(l)&&y(h)))return;let d=b(t,l),u=b(e,h);if(!0===d.break&&!0===u.break)return;let{positive:c,negative:p,extendable_min:g,extendable_max:m,includeZero:f}=d,{positive:v,negative:_,extendable_min:w,extendable_max:T,includeZero:C}=u;if(0===c&&0===p){if(!S(d,u))return}else if(0===v&&0===_){if(!S(u,d))return}else if(f||C){if(f&&!C){if(!x(d,u))return}else if(C&&!f){if(!x(u,d))return}else{if(p===_)return;if(p>_){if(!A(d,u))return}else if(!A(u,d))return}}else{if(0===p&&0===v){if(!k(d,u))return}else if(0===_&&0===c&&!k(u,d))return;if(0===p&&0===_){if(0===l[0]&&h[0]>0){if(!w)return;h[0]=0}else{if(!(0===h[0]&&l[0]>0)||!g)return;l[0]=0}}if(0===c&&0===v){if(0===l[1]&&h[1]>0){if(!T)return;h[1]=0}else{if(!(0===h[1]&&l[1]>0)||!m)return;l[1]=0}}}a.domain(l),o.domain(h)};var T=i(6358),C=i(59),M=i(8103);let E=(t,e)=>{var i,r,n,a,o;if(!t)return t;let l=null===(i=null==e?void 0:e.targetAxis)||void 0===i?void 0:i.call(e);if(!l)return t;let h=null===(r=null==e?void 0:e.currentAxis)||void 0===r?void 0:r.call(e);if(!h)return t;let d=null===(n=h.getTickData())||void 0===n?void 0:n.getDataView();if(!d||!d.transformsArr.find(t=>t.type.includes("ticks")))return t;let u=h.getScale();if(!u)return t;let c=null===(o=null===(a=l.getTickData())||void 0===a?void 0:a.getDataView())||void 0===o?void 0:o.latestData;if(!(null==c?void 0:c.length))return t;let p=l.getScale();if(!p)return t;let g=p.domain(),m=(0,s.Z$)(g)-g[0];if(0===m)return t;let f=u.domain(),v=(0,s.Z$)(f)-f[0];if(0===m)return t;let _=c.map(t=>(function(t,e,i,s,r){let n=(0,M.f2)(t,e),a=Math.max((0,M.i4)(i),(0,M.i4)(n));return Math.round(n*10**a)/Math.round(i*10**a)*r+s})(t.value,g[0],m,f[0],v));return(0,C.KV)(_)};var B=i(3073);class O extends B.v{constructor(){super(O.type),this.type="AxisSyncPlugin"}_checkEnableSync(t){if(!(0,g.z2)(t.getScale().type))return!1;let e=t.getSpec().sync;return!!(null==e?void 0:e.axisId)&&e}_getTargetAxis(t,e){let i=t.getOption().getChart().getComponentByUserId(e.axisId);return(null==i?void 0:i.type.startsWith("cartesianAxis"))?i:null}onInit(t,e){let i=this._checkEnableSync(e);if(!i||!i.zeroAlign)return;let s=this._getTargetAxis(e,i);s&&e.event.on(v.$7.scaleDomainUpdate,{filter:({model:t})=>t.id===e.id||t.id===s.id},()=>{w(s,e)})}onDidCompile(t,e){let i=this._checkEnableSync(e);if(!i)return;let s=this._getTargetAxis(e,i);s&&i.tickAlign&&((0,T.U)(e.getOption().dataSet,"tickAlign",E),e.addTransformToTickData({type:"tickAlign",options:{targetAxis:()=>s,currentAxis:()=>e},level:Number.MAX_SAFE_INTEGER},!1))}}O.pluginType="component",O.type="AxisSyncPlugin";var I=i(7602),R=i(2698),P=i(4267),L=i(9286),D=i(2875),Z=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let F=[O];class j extends L.k{getOrient(){return this._orient}getDefaultInteractive(){return!0}set autoIndentOnce(t){this._autoIndentOnce=t}getScales(){return this._scales}constructor(t,e){super(t,e),this.type=I.L.cartesianAxis,this.name=I.L.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=_.Ai.Axis,this.layoutLevel=_.pM.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:t=>{this.computeData(null==t?void 0:t.value),(0,a.xV)(this._regions,t=>{let e=this.getOrient();(0,f.yL)(e)?(0,P.zf)(t.getXAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&t.setXAxisHelper(this.axisHelper()):(0,f.Vz)(e)?(0,P.zf)(t.getYAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&t.setYAxisHelper(this.axisHelper()):(0,f.IF)(e)&&(0,P.zf)(t.getZAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&t.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=t=>{let{x:e,y:i}=t;return(0,l.Z)(e)&&(e+=Number("left"===this._orient)*this.getLayoutRect().width),(0,l.Z)(i)&&(i+=Number("top"===this._orient)*this.getLayoutRect().height),{x:e,y:i}},this._transformLayoutRect=t=>{if(!this._visible)return t;let e=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===_.sd&&(t.width=e.x1<0?-e.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===_.sd&&(t.width=e.x2>0?e.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===_.sd&&(t.height=e.y1<0?-e.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===_.sd&&(t.height=e.y2>0?e.y2:0)}return t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),this._layout.setRectInSpec(this._layoutCacheProcessing(t))},this._updateAxisLayout=()=>{let t=this.getLayoutStartPoint(),e=this._getUpdateAttribute(!1),{grid:i}=e,s=Z(e,["grid"]),r=this._axisMark.getProduct(),a=(0,n.H)({x:t.x,y:t.y},this._axisStyle,s);r.encode(a),this._gridMark&&this._gridMark.getProduct().encode((0,n.H)({x:t.x,y:t.y},this._getGridAttributes(),i))},this._fixAxisOnZero=()=>{let{onZero:t,visible:e}=this._spec.domainLine;if(this.visible&&t&&!1!==e){let{onZeroAxisId:t,onZeroAxisIndex:e}=this._spec.domainLine,i=this._option.getComponentsByKey("axes"),r=(0,f.yL)(this.getOrient()),n=t=>{var e;return(r?!(0,f.yL)(t.getOrient()):(0,f.yL)(t.getOrient()))&&(0,g.z2)(t.getScale().type)&&(t.getTickData()?null===(e=t.getTickData().getLatestData())||void 0===e?void 0:e.find(t=>0===t.value):t.getScale().domain()[0]<=0&&(0,s.Z$)(t.getScale().domain())>=0)},a=i.filter(t=>n(t));if(a.length){let s;if((0,o.Z)(t))s=a.find(e=>e.id===t);else if((0,o.Z)(e)){let t=i[e];n(t)&&(s=t)}else s=a[0];if(s){let t=this._axisMark.getProduct(),e=s.valueToPosition(0);r?t.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dy:"bottom"===this._orient?-((s.getInverse()?s.getScale().range()[1]:s.getScale().range()[0])-e):e})}):t.encode({line:Object.assign(Object.assign({},this._axisStyle.line),{dx:"left"===this._orient?e:-((s.getInverse()?s.getScale().range()[0]:s.getScale().range()[1])-e)})})}}}},this._orient=(0,f.x)(t,["z"]),(0,f.IF)(this._orient)&&(this.layoutType="absolute"),this._dataSet=e.dataSet,this._coordinateType="cartesian"}static getSpecInfo(t){let e=t[this.specKey];if(!e)return null;let i="horizontal"===t.direction;if(!(0,h.Z)(e)){if(!(0,P.Vn)(e))return null;let{axisType:t,componentName:s}=(0,f.mC)(e,i);return e.type=t,[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:s}]}let s=!0;if(e.filter(t=>"z"===t.orient)[0]){let t=e.filter(t=>"bottom"===t.orient)[0],i=e.filter(t=>(0,f.Vz)(t.orient))[0];s=3===e.length&&t&&i}let r=e.map((t,e)=>({spec:t,index:e}));s||(r=r.filter(({spec:t})=>"z"!==t.orient));let n=[];return r.forEach(({spec:t,index:e})=>{if(!(0,P.Vn)(t))return;let{axisType:s,componentName:r}=(0,f.mC)(t,i);t.type=s,n.push({spec:t,specPath:[this.specKey,e],specInfoPath:["component",this.specKey,e],type:r})}),n}static createComponent(t,e){let{spec:i}=t,s=Z(t,["spec"]),r=m.F.getComponentInKey(s.type);return r?new r(i,Object.assign(Object.assign({},e),s)):(e.onError(`Component ${s.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=!1!==this._spec.autoIndent,this._layout.layoutOrient=this._orient}setLayout3dBox(t){this.layout3dBox=t}getNewScaleRange(){let{width:t,height:e}=this.getLayoutRect(),{left:i,right:s,top:r,bottom:n}=this._innerOffset,a=[];return(0,f.yL)(this.getOrient())?(0,l.Z)(t)&&(a=this._inverse?[t-s,i]:[i,t-s]):(0,f.IF)(this.getOrient())?(0,l.Z)(t)&&(a=this._inverse?[t-s,i]:[i,t-s],this._scale.range(a)):(0,l.Z)(e)&&(a=this._inverse?[r,e-n]:[e-n,r]),a}updateScaleRange(){let t=!1,e=this.getNewScaleRange(),i=this._scale.range();return e.length===i.length&&e.every((t,e)=>t===i[e])?t=!1:(t=!0,this._scale.range(e)),t}init(t){var e;super.init(t),null===(e=this.pluginService)||void 0===e||e.load(F.map(t=>new t)),this.callPlugin(t=>{this.pluginService&&t.onInit&&t.onInit(this.pluginService,this)})}setAttrFromSpec(){var t;if(super.setAttrFromSpec(),this.visible){(0,f.yL)(this.getOrient())?(0,d.Z)(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):(0,d.Z)(this._spec.maxWidth)&&(this._spec.maxWidth="30%");let t=this._getAxisAttributes();t.label.formatMethod=this._getLabelFormatMethod(),t.verticalFactor="top"===this.getOrient()||"right"===this.getOrient()?-1:1,this._axisStyle=t}this._tick=this._spec.tick;let e=null===(t=this._option.getChart())||void 0===t?void 0:t.getSpec();this._inverse=(0,f.Dr)(this._spec,"horizontal"===(null==e?void 0:e.direction))}onLayoutStart(t,e,i){if(super.onLayoutStart(t,e,i),!(0,f.IF)(this.getOrient())&&this._spec.innerOffset){let t=this._spec;(0,f.Vz)(this.getOrient())?["top","bottom"].forEach(i=>{this._innerOffset[i]=(0,u.Mv)(t.innerOffset[i],e.height,e)}):["left","right"].forEach(i=>{this._innerOffset[i]=(0,u.Mv)(t.innerOffset[i],e.width,e)})}}getSeriesStatisticsField(t){let e;return e=(0,f.yL)(this.getOrient())?t.fieldX:(0,f.IF)(this.getOrient())?t.fieldZ:t.fieldY,(0,g.z2)(this._scale.type)?e:[e[0]]}_tickTransformOption(){var t,e,i,s;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:null===(t=this._tick)||void 0===t?void 0:t.noDecimals,labelLastVisible:null===(e=this._spec.label)||void 0===e?void 0:e.lastVisible,labelFirstVisible:null===(i=this._spec.label)||void 0===i?void 0:i.firstVisible,labelFlush:null===(s=this._spec.label)||void 0===s?void 0:s.flush})}axisHelper(){return{isContinuous:(0,g.z2)(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(t=0)=>this._scales[t],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!0===this._inverse,getSpec:()=>this._spec}}afterCompile(){var t;let e=null===(t=this._axisMark)||void 0===t?void 0:t.getProduct();e&&e.addEventListener(R.ZK.AFTER_ELEMENT_ENCODE,()=>{if(!1===this._isLayout&&((0,f.yL)(this.getOrient())?this.callPlugin(t=>{this.pluginService&&t.onDidLayoutHorizontal&&t.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(t=>{this.pluginService&&t.onDidLayoutVertical&&t.onDidLayoutVertical(this.pluginService,this)}),this._unitText)){let{x:t,y:e}=this.getLayoutStartPoint(),i=(0,f.yL)(this._orient)?{x:(0,s.CE)(this._scale.range())+t,y:e}:{x:t,y:(0,s.iH)(this._scale.range())+e};this._unitText.setAttributes(i)}}),this.callPlugin(t=>{this.pluginService&&t.onDidCompile&&t.onDidCompile(this.pluginService,this)})}onRender(t){}changeRegions(t){}update(t){}resize(t){}collectScale(){let t=[];return(0,a.xV)(this._regions,e=>{t.push("left"===this.getOrient()||"right"===this.getOrient()?e.scaleY:e.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}collectSeriesField(t,e){var i,s;return t>0?null===(s=null===(i=e.getGroups())||void 0===i?void 0:i.fields)||void 0===s?void 0:s[t]:(0,f.yL)(this.getOrient())?e.getSpec().x2Field?[...e.fieldX,e.fieldX2]:e.fieldX:(0,f.IF)(this.getOrient())?e.fieldZ:e.getSpec().y2Field?[...e.fieldY,e.fieldY2]:e.fieldY}updateSeriesScale(){let t=this.getOrient();(0,a.xV)(this._regions,e=>{(0,f.yL)(t)?(0,P.zf)(e.getXAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&(e.setScaleX(this._scale),e.setXAxisHelper(this.axisHelper())):(0,f.Vz)(t)?(0,P.zf)(e.getYAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&(e.setScaleY(this._scale),e.setYAxisHelper(this.axisHelper())):(0,f.IF)(t)&&(0,P.zf)(e.getZAxisHelper(),this.axisHelper(),(0,o.Z)(this._seriesUserId)||(0,o.Z)(this._seriesIndex))&&(e.setScaleZ(this._scale),e.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(t){var e;let i={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return i;this._verticalLimitSize=(0,f.yL)(this.getOrient())?t.height:t.width,this.setLayoutRect(t),!this.updateScaleRange()&&(0,h.Z)(null===(e=this.getTickData())||void 0===e?void 0:e.getLatestData())||this.computeData("range");let s={skipLayout:!1},a=(0,f.yL)(this.getOrient());this.pluginService&&(a?this.callPlugin(t=>{t.onWillLayoutHorizontal&&t.onWillLayoutHorizontal(this.pluginService,s,this)}):this.callPlugin(t=>{t.onWillLayoutVertical&&t.onWillLayoutVertical(this.pluginService,s,this)}));let o=this._axisMark.getProduct(),l=!1;if(!s.skipLayout){let t=this._getUpdateAttribute(!0),e=o.getGroupGraphicItem(),s=(0,n.H)(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,t,{line:{visible:!1}}),h=e.getBoundsWithoutRender(s);h.empty()&&(h=(new r.YZ).set(s.x,s.y,s.x,s.y)),l=!0,this._latestBounds=h,i=this._appendAxisUnit(h,a)}return l||(this._latestBounds=o.getBounds()),i}positionToData(t,e){let i=(0,f.yL)(this.getOrient());e&&(t-=i?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(t=i?(0,c.Z)(t,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):(0,c.Z)(t,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));let r=this._scale.range();return(t-r[0])*(t-(0,s.Z$)(r))>0?null:this._scale.invert(t)}_getTitleLimit(t){var e,i,s,r,n;let a=this._spec.title;if(a.visible&&(0,p.Z)(null===(e=a.style)||void 0===e?void 0:e.maxLineWidth)){let e=null!==(n=null!==(s=null===(i=this._axisStyle.title)||void 0===i?void 0:i.angle)&&void 0!==s?s:null===(r=a.style)||void 0===r?void 0:r.angle)&&void 0!==n?n:0;if(t){let t=this.getLayoutRect().width,i=Math.abs(Math.cos(e));return i<1e-6?1/0:t/i}let o=this.getLayoutRect().height,l=Math.abs(Math.sin(e));return l<1e-6?1/0:o/l}return null}_getUpdateAttribute(t){var e;let i=0,s=0;if(!t){let t=this.getRegions(),{x:e,y:r}=t[0].getLayoutStartPoint(),n=e+t[0].getLayoutRect().width,a=r+t[0].getLayoutRect().height;for(let i=1;i<t.length;i++){let s=t[i],{x:o,y:l}=s.getLayoutStartPoint(),{width:h,height:d}=s.getLayoutRect();e=Math.min(e,o),n=Math.max(n,h+o),r=Math.min(r,l),a=Math.max(a,d+l)}i=Math.abs(a-r),s=Math.abs(n-e)}let{width:r,height:n}=this.getLayoutRect(),a=(0,f.yL)(this._orient),o=(0,f.Vz)(this._orient),l=(0,f.IF)(this._orient),h=this.layout3dBox?this.layout3dBox.length:0,d={x:0,y:0},u=i,c=r;a?d={x:r,y:0}:o?(d={x:0,y:n},u=s,c=n):l&&(d={x:h,y:0});let p=this.getLabelItems(c),g={start:{x:0,y:0},end:d,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(a)},items:p};if(t||(g.grid={type:"line",start:{x:0,y:0},end:d,items:p[0],verticalFactor:this._axisStyle.verticalFactor,depth:h,length:u}),l){let i=null!==(e=this.directionStr)&&void 0!==e?e:"r2l",s=this.layout3dBox?this.layout3dBox.width:0,r=[0,0],n=-Math.PI/2,a=0;"l2r"===i&&(a=this.layout3dBox.length,r=[0,0,0],n=Math.PI/2),g.z=a,g.alpha=n,g.anchor3d=r,t||(g.grid.depth=s)}else{let t=a?this.layout.minHeight:this.layout.minWidth;(a&&this._layout.layoutRectLevelMap.height===_.wK||o&&this._layout.layoutRectLevelMap.width===_.wK)&&(t=this._verticalLimitSize),g.verticalLimitSize=this._verticalLimitSize,g.verticalMinSize=t,g.label={overflowLimitLength:this._getLabelOverflowLimit(a)}}return g}getLabelItems(t){var e;let i=null===(e=this.getTickData())||void 0===e?void 0:e.getLatestData();return i&&i.length?[i.map(e=>{let i=this._getNormalizedValue([e.value],t);return(0,P.cf)(e.value,i)}).filter(t=>{let{value:e,rawValue:i}=t,r=this._scale.domain();return"log"===this.getSpec().type?e>=0&&e<=1:(0,g.z2)(this._scale.type)?i>=r[0]&&i<=(0,s.Z$)(r):r.includes(i)})]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(v.$7.layoutEnd,this._updateAxisLayout),this.event.on(v.$7.layoutEnd,this._fixAxisOnZero),this.event.on(v.$7.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(t,e){return 0===e?0:this.dataToPosition(t)/e}_layoutCacheProcessing(t){return["width","height"].forEach(e=>{t[e]<this._layoutCache[e]?t[e]=this._layoutCache[e]:this._layoutCache[e]=t[e]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(t=>{this.layout.getLastComputeOutBounds()[t]=this._layoutCache._lastComputeOutBounds[t]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(t=>{this.layout.getLastComputeOutBounds()[t]<this._layoutCache._lastComputeOutBounds[t]?this.layout.getLastComputeOutBounds()[t]=this._layoutCache._lastComputeOutBounds[t]:this._layoutCache._lastComputeOutBounds[t]=this.layout.getLastComputeOutBounds()[t]})),t}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(t,e){var i;if(this._spec.unit&&this._spec.unit.visible){let r,n;let{text:a,style:o}=this._spec.unit,{x:l,y:h}=this.getLayoutStartPoint();e?(r={x:(0,s.CE)(this._scale.range())+l,y:h},n={textAlign:"left",textBaseline:"middle"}):(r={x:l,y:(0,s.iH)(this._scale.range())+h},n={textAlign:"left"===this._orient?"left":"right",textBaseline:"bottom"}),n=Object.assign(Object.assign(Object.assign({},n),o),{x:r.x,y:r.y,text:a}),this._unitText?this._unitText.setAttributes(n):(this._unitText=(0,D.r)(n),this._unitText.name="axis-unit",null===(i=this.getContainer())||void 0===i||i.add(this._unitText));let d=this._unitText.AABBBounds;e?(t.x2+=d.x2>t.x2?d.x2-t.x2:0,t.y2+=d.y2>t.y2?d.y2-t.y2:0):(t.x1+=d.x1<t.x1?d.x1-t.x1:0,t.y1+=d.y1<t.y1?d.y1-t.y1:0)}return t}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}_getLabelOverflowLimit(t){var e,i;if(t&&!1!==(null===(e=this._spec.label)||void 0===e?void 0:e.visible)&&!0===(null===(i=this._spec.label)||void 0===i?void 0:i.autoLimit)){let t=this._option.getComponentsByKey("axes"),e=this.getRegions(),i=t.filter(t=>{let i=t.getOrient();return("left"===i||"right"===i)&&t.getRegions().some(t=>e.includes(t))}),s=0,r=0,n=this.getLayoutStartPoint().x,a=n+this.getLayoutRect().width;return i.forEach(t=>{let e=t.getLayoutStartPoint().x;if("left"===t.getOrient()&&e===n){let e=t.getLayoutRect().width;s=Math.max(s,e)}else if(e===a){let e=t.getLayoutRect().width;r=Math.max(r,e)}}),{left:s,right:r}}}}j.type=I.L.cartesianAxis,j.specKey="axes"},1532:function(t,e,i){i.d(e,{N:()=>B});var s=i(1287),r=i(8919),n=i(8871),a=i(7602),o=i(6082),l=i(9904),h=i(7623),d=i(7773),u=i(7636),c=i(4546),p=i(3722),g=i(3558),m=i(4267),f=i(8469),v=i(9286),_=i(1996),y=i(7092),b=i(9038),x=i(8986),S=i(59);let A=(t,e,i,s)=>(0,S.SZ)(t,e,i).map(t=>s?[t.x1,t.x2,t.width()]:[t.y1,t.y2,t.height()]),k=(t,e,i=0)=>Math.max(t[0],e[0])-i/2<=Math.min(t[1],e[1])+i/2,w=(t,e)=>t[1]<e[0]?e[0]-t[1]:e[1]<t[0]?t[0]-e[1]:0,T=(t,e)=>{var i;let s;let r=t.domain();if(!r.length)return[];let{tickCount:n,forceTickCount:a,tickStep:o,labelGap:l=4,axisOrientType:d,labelStyle:u}=e,p=(0,S.tz)(d),g=t.range(),m=t.calculateWholeRangeSize();if(m<2)return e.labelLastVisible?(0,S.KV)([r[r.length-1]]):(0,S.KV)([r[0]]);if((0,h.Z)(o))s=t.stepTicks(o);else if((0,h.Z)(a))s=t.forceTicks(a);else if((0,h.Z)(n)){let e=(0,b.Z)(n)?n({axisLength:m,labelStyle:u}):n;s=t.ticks(e)}else if(e.sampling){let n=(null!==(i=e.labelStyle.fontSize)&&void 0!==i?i:12)+2,a=(0,c.iH)(g),o=(0,c.CE)(g);if(r.length<=m/n){let i=(o-a)/r.length,n=A(t,r,e,p),h=Math.min(...n.map(t=>t[2])),d=C(r,n,l,e.labelLastVisible,Math.floor(h/i),!1);s=t.stepTicks(d.step),e.labelLastVisible&&(d.delCount&&(s=s.slice(0,s.length-d.delCount)),s.push(r[r.length-1]))}else{let i=A(t,[r[0],r[Math.floor(r.length/2)],r[r.length-1]],e,p),n=null;i.forEach(t=>{n?n[2]<t[2]&&(n=t):n=t});let h=o-a-l>0?Math.ceil(r.length*(l+n[2])/(o-a-l)):r.length-1;s=t.stepTicks(h),!e.labelLastVisible||s.length&&s[s.length-1]===r[r.length-1]||(s.length&&Math.abs(t.scale(s[s.length-1])-t.scale(r[r.length-1]))<n[2]&&(s=s.slice(0,-1)),s.push(r[r.length-1]))}}else s=t.domain();return(0,S.KV)(s)},C=(t,e,i,s,r,n)=>{let a=0,o=0,l=-1,h=Number.MAX_VALUE,d=s=>{let r=!0,n=0;do n+s<t.length&&k(e[n],e[n+s],i)&&(r=!1),n+=s;while(r&&n<t.length);return r},u=(0,x.o0)(r,t.length,t=>d(t)?1:-1),c=u;do if(!(c>u)||n||d(c)){if(!s){o=c;break}{let s=t.length-1,r,n=0;r=t.length%c>0?t.length-t.length%c+c:t.length;do{if((r-=c)!==s&&!k(e[r],e[s],i))break;n++}while(r>0);if(r===s){o=c,a=n;break}{let i=Math.floor(t.length/c)-n+1;if(i<l)break;{l=i;let t=w(e[r],e[s]),d=r-c>=0?w(e[r-c],e[r]):t,u=Math.abs(t-d);if(u<h&&(h=u,o=c,a=n),t<=d)break}}}c++}else c++;while(c<=t.length);return{step:o,delCount:a}};var M=i(6358);class E extends n.O{constructor(){super(...arguments),this.type=a.L.cartesianBandAxis,this._scale=new s.j}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){let t=super.updateScaleRange();return this.updateGroupScaleRange(),t}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){let t=(t=0)=>this._scales[t];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:t,getBandwidth:(e=0)=>t(e).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,M.U)(this._option.dataSet,t,T),t}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){let{bandSize:t,maxBandSize:e,minBandSize:i}=this._getOuterBandSizeFromSpec();if(t&&this._scale.bandwidth(t),e&&this._scale.maxBandwidth(e),i&&this._scale.minBandwidth(i),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(t||e)){let i=(0,r.$l)(this._scale.domain().length,null!=t?t:e,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(t=>t.setMaxWidth(i)):["left","right"].includes(this._orient)&&this._regions.forEach(t=>t.setMaxHeight(i))}}}_getOuterBandSizeFromSpec(){var t;let{bandSize:e,maxBandSize:i,minBandSize:s,bandSizeLevel:n=0}=this._spec,{gap:a,extend:d=0}=null!==(t=this._spec.bandSizeExtend)&&void 0!==t?t:{};n=Math.min(n,this._scales.length-1);for(let t=n;t>0;t--){let u=this._scales[t],c=u.domain(),p=u.paddingInner(),g=u.paddingOuter(),m=e=>{let i=t===n?d:0;return(0,o.Z)(a)||t<n?(0,r.$l)(c.length,e,p,g)+i:(e+((0,l.Z)(a)?e*(Number(a.substring(0,a.length-1))/100):a))*c.length/(this._scales[t-1].paddingInner()+1)+i};(0,h.Z)(e)&&(e=m(e)),(0,h.Z)(i)&&(i=m(i)),(0,h.Z)(s)&&(s=m(s))}return{bandSize:e,maxBandSize:i,minBandSize:s}}}E.type=a.L.cartesianBandAxis,E.specKey="axes",(0,d.jB)(E,class{constructor(){this._rawDomainIndex=[]}_initData(){var t;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let e=0;e<this._scales.length;e++){let i=(null!==(t=this._spec.layers)&&void 0!==t?t:[])[this._scales.length-1-e]||{};if(!1!==i.visible&&0!==i.tickCount&&0!==i.forceTickCount){let t=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),i),e);t.target.addListener("change",this._forceLayout.bind(this));let s=new g.O(this._option,t);this._tickData.push(s),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[e]=s}}else{let t=this._initTickDataSet(this._tickTransformOption());t.target.addListener("change",this._forceLayout.bind(this));let e=new g.O(this._option,t);this._tickData=[e],this._tickDataMap={0:e}}}dataToPosition(t,e={}){var i,s;if(0===t.length||0===this._scales.length)return 0;let{position:r,bandScale:n}=this.getPosition(t);return r+n.bandwidth()*(null!==(s=null!==(i=e.bandPosition)&&void 0!==i?i:this._spec.bandPosition)&&void 0!==s?s:this._defaultBandPosition)}valueToPosition(t){return this._scale.scale(t)}updateGroupScaleRange(){let t=this._scale;this._scales.forEach((e,i)=>{i>0&&(e.range([0,t.bandwidth()]),t=e)})}getPosition(t){let e=0,i=this._scale;if(1===this._scales.length||1===t.length)e=this.valueToPosition(t[0]);else{let s=Math.min(t.length,this._scales.length);for(let i=0;i<s;i++)e+=this._scales[i].scale(t[i]);i=this._scales[s-1]}return{position:e,bandScale:i}}calcScales(t,e){var i,s;let{bandPadding:r,paddingInner:n,paddingOuter:a}=this._spec,o=(0,u.Z)(r),l=(0,u.Z)(n),h=(0,u.Z)(a);for(let d=0;d<this._scales.length;d++){let u=o?r[d]:r,c=l?n[d]:n,p=h?a[d]:a;this._scales[d].paddingInner(null!==(i=null!=c?c:u)&&void 0!==i?i:t,!0).paddingOuter(null!==(s=null!=p?p:u)&&void 0!==s?s:e,!0)}}computeBandDomain(t){if(!t.length)return[];if(1===t.length)return t[0].values;let e=new Set;for(let i=0;i<t.length;i++)for(let s=0;s<t[i].values.length;s++)e.add(t[i].values[s]);return Array.from(e)}updateScaleDomain(){var t;if(!this.isSeriesDataEnable())return;(null===(t=this._rawDomainIndex)||void 0===t?void 0:t.length)||!this._scales.length||this._updateRawDomain();let e=this._spec.domain;for(let t=0;t<this._scales.length;t++)if(e&&e.length&&0===t)this._scales[t].domain(e);else{let e=this.collectData(t),i=this.computeBandDomain(e);this._scales[t].domain(i.sort((e,i)=>this._rawDomainIndex[t][e]-this._rawDomainIndex[t][i]))}this.transformScaleDomain(),this.event.emit(p.$7.scaleDomainUpdate,{model:this}),this.event.emit(p.$7.scaleUpdate,{model:this,value:"domain"})}getLabelItems(t){let e=[],i=[];return this._scales.forEach((s,r)=>{var n;let a=this._tickDataMap[r],o=null===(n=null==a?void 0:a.getLatestData())||void 0===n?void 0:n.length,l=o?a.getLatestData().map(t=>t.value):s.domain();if(l&&l.length){if(i&&i.length){let s=[],r=[];i.forEach(e=>{l.forEach(i=>{let n=(0,c.IX)(e).concat(i);if(r.push(n),o){let e=(0,m.cf)(i,this._getNormalizedValue(n,t));s.push(e)}})}),o&&e.push(s.filter(t=>t.value>=0&&t.value<=1)),i=r}else l.forEach(t=>{i.push(t)}),o&&e.push(a.getLatestData().map(e=>(0,m.cf)(e.value,this._getNormalizedValue([e.value],t))).filter(t=>t.value>=0&&t.value<=1))}}),e.reverse()}_updateRawDomain(){this._rawDomainIndex=[];let t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&0===e)this._scales[e].domain(t);else{let t=this.collectData(e,!0),i=this.computeBandDomain(t);this._rawDomainIndex[e]={},i.forEach((t,i)=>this._rawDomainIndex[e][t]=i)}}_clearRawDomain(){this._rawDomainIndex=[]}});let B=()=>{(0,_.uy)(),(0,y.pU)(),(0,v.R)(),f.F.registerComponent(E.type,E)}},7501:function(t,e,i){i.d(e,{E:()=>x,G:()=>b});var s=i(6132),r=i(8871),n=i(7623),a=i(8378),o=i(4546),l=i(7773),h=i(7602),d=i(7872),u=i(8469),c=i(9286),p=i(1996),g=i(7092),m=i(6358),f=i(5236),v=i(3881),_=i(1960),y=i(6555);class b extends r.O{constructor(){super(...arguments),this.type=h.L.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new s.f}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setExtraAttrFromSpec();let i=null===(e=null===(t=this._tickData)||void 0===t?void 0:t[0])||void 0===e?void 0:e.getDataView().transformsArr.find(t=>t.type===this.registerTicksTransform());i&&(i.options=this._tickTransformOption())}initScales(){var t,e;super.initScales();let i=[0,1];(0,n.Z)(null===(t=this._domain)||void 0===t?void 0:t.min)&&(i[0]=this._domain.min),(0,n.Z)(null===(e=this._domain)||void 0===e?void 0:e.max)&&(i[1]=this._domain.max),this._scale.domain(i)}_tickTransformOption(){var t;return Object.assign(Object.assign({},super._tickTransformOption()),{breakData:(null===(t=this._spec.breaks)||void 0===t?void 0:t.length)?()=>this._break:null})}_getUpdateAttribute(t){var e,i;let s=super._getUpdateAttribute(t);if(!(0,v.IF)(this._orient)&&(null===(i=null===(e=this._break)||void 0===e?void 0:e.breaks)||void 0===i?void 0:i.length)){let{width:t,height:e}=this.getLayoutRect(),i=(0,v.yL)(this._orient),r=i?t:e;s.breaks=this._break.breaks.map(t=>{let e;let{range:s,breakSymbol:n,gap:o=6}=t,l=this.valueToPosition((s[0]+s[1])/2)/r;e=(0,_.hU)(o)?Number(o.substring(0,o.length-1))/100:o/r;let h=(0,a.Z)(null==n?void 0:n.angle)?n.angle:i?60:15;return{range:[l-e/2,l+e/2],breakSymbol:Object.assign(Object.assign({visible:!0},n),{angle:h*Math.PI/180}),rawRange:s}})}return s}getNewScaleRange(){var t,e;let i=super.getNewScaleRange();return(null===(t=this._spec.breaks)||void 0===t?void 0:t.length)&&(null===(e=this._break)||void 0===e?void 0:e.scope)&&(i=(0,y.zb)(this._break.scope).map(t=>i[0]+((0,o.Z$)(i)-i[0])*t)),i}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){let t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t.valueToPosition=this.valueToPosition.bind(this),t}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,m.U)(this._option.dataSet,t,f.m),t}}b.type=h.L.cartesianLinearAxis,b.specKey="axes",(0,l.jB)(b,d.E);let x=()=>{(0,p.uy)(),(0,g.pU)(),(0,c.R)(),u.F.registerComponent(b.type,b)}},6818:function(t,e,i){i.d(e,{K:()=>b});var s=i(7501),r=i(7602),n=i(7872),a=i(855),o=i(4878),l=i(5173),h=i(8919),d=i(7773);function u(t=Number.EPSILON){return e=>Math.max(e,t)}class c extends o.y{constructor(){super((0,h.J7)(10),(0,h.ye)(10)),this.type=l._f.Log,this._limit=u(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return(new c).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();let i=(0,h.J7)(this._base),s=(0,h.ye)(this._base);return(null!==(e=this._niceDomain)&&void 0!==e?e:this._domain)[0]<0?(this._logs=t=>-i(-t),this._pows=t=>-s(-t),this._limit=function(t=Number.EPSILON){return e=>Math.min(e,-t)}(),this.transformer=h.op,this.untransformer=h.ge):(this._logs=i,this._pows=s,this._limit=u(),this.transformer=this._logs,this.untransformer=s),this}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return h.yR}d3Ticks(t=10,e){let i=this.domain(),s=this._limit(i[0]),r=this._limit(i[i.length-1]);return(0,a.e3)(s,r,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,a.jb)(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,a.RX)(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,a.RX)(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}(0,d.jB)(c,class{nice(t=10,e){var i,s,r,n;let o=this._domain,l=[],d=null;if(e){let t=(0,a.OQ)(o,e);if(l=t.niceMinMax,this._domainValidator=t.domainValidator,d=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else d="all";if(d){let t=(0,h.kx)(o.slice(),null!==(s=null===(i=this.getNiceConfig)||void 0===i?void 0:i.call(this))&&void 0!==s?s:{floor:t=>Math.floor(t),ceil:t=>Math.ceil(t)});return"min"===d?t[t.length-1]=null!==(r=l[1])&&void 0!==r?r:t[t.length-1]:"max"===d&&(t[0]=null!==(n=l[0])&&void 0!==n?n:t[0]),this._niceDomain=t,this.rescale(),this}return this}niceMin(){let t=this._domain[this._domain.length-1];this.nice();let e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){let t=this._domain[0];this.nice();let e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}});var p=i(8469),g=i(9286),m=i(1996),f=i(7092),v=i(5236),_=i(6358);class y extends s.G{constructor(){super(...arguments),this.type=r.L.cartesianLogAxis,this._zero=!1,this._scale=new c}initScales(){var t;super.initScales(),this._scale.base(null!==(t=this._spec.base)&&void 0!==t?t:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,_.U)(this._option.dataSet,t,v.m),t}transformScaleDomain(){}}y.type=r.L.cartesianLogAxis,y.specKey="axes",(0,d.jB)(y,n.E);let b=()=>{(0,m.uy)(),(0,f.pU)(),(0,g.R)(),p.F.registerComponent(y.type,y)}},5103:function(t,e,i){i.d(e,{w:()=>b});var s=i(6338),r=i(3881),n=i(7623),a=i(9711),o=i(9114),l=i(7501),h=i(7602),d=i(3558),u=i(8469),c=i(9286),p=i(4267),g=i(4218),m=i(1996),f=i(7092),v=i(5236),_=i(6358);class y extends l.G{constructor(){super(...arguments),this.type=h.L.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:t=>{this.computeData(null==t?void 0:t.value),(0,o.xV)(this._regions,t=>{(0,r.yL)(this.getOrient())?(0,p.zf)(t.getXAxisHelper(),this.axisHelper(),(0,n.Z)(this._seriesUserId)||(0,n.Z)(this._seriesIndex))&&t.setXAxisHelper(this.axisHelper()):(0,p.zf)(t.getYAxisHelper(),this.axisHelper(),(0,n.Z)(this._seriesUserId)||(0,n.Z)(this._seriesIndex))&&t.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._tick=(0,g.H)({},this._spec.tick,null===(t=this._spec.layers)||void 0===t?void 0:t[0])}_initData(){var t;if(super._initData(),null===(t=this._spec.layers)||void 0===t?void 0:t[1]){let t=new s.VO(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new d.O(this._option,t)}}computeData(t){super.computeData(t),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}_getLabelFormatMethod(){var t,e,i,s,r,n,o,l;let h=a.k.getInstance(),d=(null===(e=null===(t=this._spec.layers)||void 0===t?void 0:t[1])||void 0===e?void 0:e.timeFormat)||"%Y%m%d",u="local"===((null===(s=null===(i=this._spec.layers)||void 0===i?void 0:i[1])||void 0===s?void 0:s.timeFormatMode)||"local")?h.timeFormat:h.timeUTCFormat,c=(null===(n=null===(r=this._spec.layers)||void 0===r?void 0:r[0])||void 0===n?void 0:n.timeFormat)||"%Y%m%d",p="local"===((null===(l=null===(o=this._spec.layers)||void 0===o?void 0:o[0])||void 0===l?void 0:l.timeFormatMode)||"local")?h.timeFormat:h.timeUTCFormat;return(t,e,i,s,r)=>{var n;let a;return a=0===r?p(c,t):u(d,t),(null===(n=this._spec.label)||void 0===n?void 0:n.formatMethod)?this._spec.label.formatMethod(a,e):a}}getLabelItems(t){var e,i;let s=[],r=null===(e=this.getTickData())||void 0===e?void 0:e.getLatestData();r&&r.length&&s.push(r.map(e=>(0,p.cf)(e.value,this._getNormalizedValue([e.value],t))));let n=null===(i=this._layerTickData)||void 0===i?void 0:i.getLatestData();return n&&n.length&&s.push(n.map(e=>(0,p.cf)(e.value,this._getNormalizedValue([e.value],t)))),s}registerTicksTransform(){let t=`${this.type}-ticks`;return(0,_.U)(this._option.dataSet,t,v.m),t}transformScaleDomain(){}}y.type=h.L.cartesianTimeAxis,y.specKey="axes";let b=()=>{(0,m.uy)(),(0,f.pU)(),(0,c.R)(),u.F.registerComponent(y.type,y)}},3881:function(t,e,i){i.d(e,{Dr:()=>u,IF:()=>l,Vz:()=>o,_Q:()=>d,mC:()=>c,x:()=>h,yL:()=>a});var s=i(7623),r=i(1960),n=i(7602);function a(t){return"bottom"===t||"top"===t}function o(t){return"left"===t||"right"===t}function l(t){return"z"===t}function h(t,e){return(0,r.vk)(t.orient)||e&&e.includes(t.orient)?t.orient:"left"}function d(t){return"top"===t||"bottom"===t?"horizontal":"vertical"}function u(t,e){let i=t.inverse;return e&&!a(t.orient)&&(i=!(0,s.Z)(t.inverse)||!t.inverse),i}function c(t,e){var i,s;let r=null!==(i=t.type)&&void 0!==i?i:(s=t.orient,e?a(s)?"linear":"band":a(s)?"band":"linear");return{axisType:r,componentName:`${n.L.cartesianAxis}-${r}`}}},7872:function(t,e,i){i.d(e,{E:()=>_});var s=i(7623),r=i(8378),n=i(9038),a=i(4546),o=i(6082),l=i(6555),h=i(4267),d=i(3722),u=i(3881);let c=(t,e,i)=>i.reduce((t,s,r)=>(t.push([s,i.length===r+1?e:i[r+1]]),t),[[t,i[0]]]),p=(t,e)=>t-e,g=(t,e)=>{let i=[{count:0,sub:[],max:e[0],min:e[0]}],s=0,r=0;for(;s<e.length;)t[r]<=e[s]?(i[s].count+=1,i[s].sub.push(t[r]),r+=1):i[s+=1]={count:0,sub:[],max:e[s],min:e[s]};i.forEach(t=>{t.count&&(t.min=Math.min.apply(null,t.sub))});let n=t.slice(r);return i[s]={count:n.length,sub:n,min:e[e.length-1],max:Math.max.apply(null,n)},i},m=Math.sqrt(50),f=Math.sqrt(10),v=Math.sqrt(2);class _{constructor(){this._extend={},this.niceLabelFormatter=null}setExtraAttrFromSpec(){(0,s.Z)(this._spec.nice)&&(this._nice=this._spec.nice),(0,s.Z)(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=(0,h.NG)(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var t;if(!this._nice)return!1;let e=5,i=this._spec.tick||{};if((0,r.Z)(i.forceTickCount))e=i.forceTickCount;else if((0,n.Z)(i.tickCount)){let t=this._scale.range(),s=Math.abs((0,a.Z$)(t)-t[0]);1===s&&this._option&&(s=(0,u.yL)(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),e=i.tickCount({axisLength:s,labelStyle:this._spec.label&&this._spec.label.style})}else e=(0,r.Z)(i.tickCount)?i.tickCount:5;"accurateFirst"===this._spec.niceType&&(e=Math.max(5,e));let{min:l,max:h}=null!==(t=this._domain)&&void 0!==t?t:{};return(0,o.Z)(l)&&(0,o.Z)(h)&&(0,o.Z)(this._softMaxValue)&&(0,o.Z)(this._softMinValue)?this._scale.nice(e):((0,s.Z)(l)||(0,s.Z)(this._softMinValue))&&(0,o.Z)(h)&&(0,o.Z)(this._softMaxValue)?this._scale.niceMax(e):!(!(0,o.Z)(l)||!(0,o.Z)(this._softMinValue)||!(0,s.Z)(h)&&!(0,s.Z)(this._softMaxValue))&&this._scale.niceMin(e)}setLogScaleNice(){var t;if(!this._nice)return!1;let{min:e,max:i}=null!==(t=this._domain)&&void 0!==t?t:{};return(0,o.Z)(e)&&(0,o.Z)(i)&&(0,o.Z)(this._softMaxValue)&&(0,o.Z)(this._softMinValue)?this._scale.nice():((0,s.Z)(e)||(0,s.Z)(this._softMinValue))&&(0,o.Z)(i)&&(0,o.Z)(this._softMaxValue)?this._scale.niceMax():!(!(0,o.Z)(e)||!(0,o.Z)(this._softMinValue)||!(0,s.Z)(i)&&!(0,s.Z)(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return"log"===this._spec.type?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(t,e){return this.valueToPosition(t[0])}valueToPosition(t){return this._scale.scale(t)}computeLinearDomain(t){let e=[];if(t.length){let n=this._spec.breaks&&this._spec.breaks.length,a,h,d=[];if(t.forEach(t=>{let{min:e,max:i}=t;a=void 0===a?e:Math.min(a,e),h=void 0===h?i:Math.max(h,i),n&&(d=d.concat(t.values))}),n){let t=[],n=[],u=(0,o.Z)(this._domain.max)?h:this._domain.max;for(let e=0;e<this._spec.breaks.length;e++){let{range:i}=this._spec.breaks[e];i[0]<=i[1]&&i[1]<=u&&(t.push(i),n.push(this._spec.breaks[e]))}if(t.sort((t,e)=>t[0]-e[0]),t.length){var i,s,r;let{domain:a,scope:o}=(i=d,s=(0,l.zb)(t),r=this._spec.breaks[0].scopeType,i.sort(p),s.sort(p),{domain:function(t,e){let i=t[0],s=t[t.length-1],r=e.filter(t=>t>i&&t<s);return 0===r.length?[[i,s]]:c(i,s,r)}(i,s),scope:function(t,e,i="count"){let s=g(t,e),r="count"===i?t.length:s.reduce((t,e,i)=>e.count>0?t+e.max-e.min:t,0),n=[],a=0,o=0;return s.forEach((t,e)=>{if(0===r)n.push([0,e/s.length-1]);else{let l="count"===i?t.count:t.max-t.min,h=n[o-1]?n[o-1][1]:0,d=e===s.length-1?1:Math.min((a+l)/r,1);(h!==d||0!==h&&1!==h)&&(o+=1,n.push([h,d]),a+=l)}}),n}(i,s,r)});e=(0,l.zb)(a),this._break={domain:a,scope:o,breakDomains:t,breaks:n}}else e=[a,h]}else e=[a,h]}else e[0]=0,e[1]=0;return this.setSoftDomainMinMax(e),this.expandDomain(e),this.includeZero(e),this.setDomainMinMax(e),e}expandDomain(t){if(!this._expand)return;let e=t[0],i=(0,a.Z$)(t);e===i&&(0===i?i=1:i>0?e=0:i<0&&(i=0)),(0,s.Z)(this._expand.min)&&(t[0]=e-(i-e)*this._expand.min),(0,s.Z)(this._expand.max)&&(t[t.length-1]=i+(i-e)*this._expand.max)}niceDomain(t){let{min:e,max:i}=(0,h.NG)(this._spec);if((0,s.Z)(e)||(0,s.Z)(i)||"linear"!==this._spec.type)return t;if(1e-12>=Math.abs((0,a.iH)(t)-(0,a.CE)(t))){let e=t[0],i=e>=0?1:-1;if((e=Math.abs(e))<1)t[0]=0,t[t.length-1]=1;else{let i=e/5,s=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,s);i=(r>=m?10:r>=f?5:r>=v?2:1)*Math.pow(10,s),t[0]=0,t[t.length-1]=10*i}i<0&&(t.reverse(),t[0]*=-1,t[t.length-1]*=-1)}return t}includeZero(t){this._zero&&(t[0]=Math.min(t[0],0),t[t.length-1]=Math.max((0,a.Z$)(t),0))}setExtendDomain(t,e){if(void 0===e)return void delete this._extend[t];this._extend[t]=e;let i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this.event.emit(d.$7.scaleUpdate,{model:this,value:"domain"})}extendDomain(t){let e;let i=t.length-1,s=t[0]-t[i]>0,r=s?i:0,n=s?0:i;for(let i in this._extend)(e=this._extend[i])>t[n]&&(t[n]=e),e<t[r]&&(t[r]=e)}getDomainSpec(){return this._domain}setDomainMinMax(t){if(!this._domain)return;let{min:e,max:i}=this._domain;(0,s.Z)(e)&&(t[0]=e),(0,s.Z)(i)&&(t[t.length-1]=i)}setSoftDomainMinMax(t){let{softMin:e,softMax:i}=this._spec;if((0,s.Z)(e)){let i=(0,n.Z)(e)?e(t):e;(0,o.Z)(i)&&(i=t[0]),i<=t[0]&&(t[0]=i,this._softMinValue=i)}if((0,s.Z)(i)){let e=(0,n.Z)(i)?i(t):i;(0,o.Z)(e)&&(e=(0,a.Z$)(t)),e>=(0,a.Z$)(t)&&(t[t.length-1]=e),this._softMaxValue=e}}setZero(t){this._zero!==t&&(this._zero=t,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;let t=this.collectData(),e=this.computeLinearDomain(t);this.updateScaleDomainByModel(e)}updateScaleDomainByModel(t){t=null!=t?t:this._scale.domain(),this.extendDomain(t),this.includeZero(t),this.setDomainMinMax(t),this.niceDomain(t),this._scale.domain(t,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this._updateNiceLabelFormatter(t),this._domainAfterSpec=this._scale.domain(),this.event.emit(d.$7.scaleDomainUpdate,{model:this}),this.event.emit(d.$7.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(t){let e=Math.pow(10,Math.max(-Math.floor(Math.log10(Math.abs((0,a.Z$)(t)-t[0]))),0)+2);this.niceLabelFormatter=t=>(0,r.Z)(+t)?Math.round(+t*e)/e:t}}},4267:function(t,e,i){i.d(e,{$P:()=>g,IM:()=>m,NG:()=>u,Rb:()=>l,Vn:()=>c,bi:()=>d,cf:()=>f,lc:()=>h,xy:()=>p,zf:()=>v});var s=i(1130),r=i(4218),n=i(123),a=i(3881),o=i(2096);let l={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function h(t){return(t=(0,n.ro)(t)).startSymbol=(0,n.ro)(t.startSymbol),t.endSymbol=(0,n.ro)(t.endSymbol),t}function d(t){let e=0;return(0,s.Z)(t,"tick.visible")&&(e+=(0,s.Z)(t,"tick.tickSize")),(0,s.Z)(t,"label.visible")&&(e+=(0,s.Z)(t,"label.space")),e}function u(t,e){var i,s,r,n,a,o;return{min:null!==(r=null!==(i=t.min)&&void 0!==i?i:null===(s=t.range)||void 0===s?void 0:s.min)&&void 0!==r?r:null==e?void 0:e.min,max:null!==(o=null!==(n=t.max)&&void 0!==n?n:null===(a=t.range)||void 0===a?void 0:a.max)&&void 0!==o?o:null==e?void 0:e.max}}function c(t){let e=null==t?void 0:t.orient;return"top"===e||"bottom"===e||"left"===e||"right"===e||"z"===e}let p=(t,e,i)=>{var s;let n=null!==(s="band"===e?(0,o.DE)("axisBand",i):["linear","log","symlog"].includes(e)?(0,o.DE)("axisLinear",i):{})&&void 0!==s?s:{},l=(0,a.yL)(t)?(0,o.DE)("axisX",i):(0,a.Vz)(t)?(0,o.DE)("axisY",i):(0,o.DE)("axisZ",i);return(0,r.H)({},(0,o.DE)("axis",i),n,l)},g=(t,e,i)=>{var s;let n=null!==(s="band"===e?(0,o.DE)("axisBand",i):"linear"===e?(0,o.DE)("axisLinear",i):{})&&void 0!==s?s:{},a=(0,o.DE)("angle"===t?"axisAngle":"axisRadius",i);return(0,r.H)({},(0,o.DE)("axis",i),n,a)},m=t=>"band"===t||"ordinal"===t||"point"===t;function f(t,e){return{id:t,label:t,value:e,rawValue:t}}function v(t,e,i){return i||!t||t.getAxisId()===e.getAxisId()}},2930:function(t,e,i){i.d(e,{r:()=>c});var s=i(397),r=i(1960),n=i(3881),a=i(4267),o=i(3231),l=i(7602),h=i(2096),d=i(4218);let u=(t,e)=>{var i;let s=null!==(i=t.orient)&&void 0!==i?i:e.orient,r=e[(0,n._Q)(s)],a=(0,d.H)({},e,r);return delete a.horizontal,delete a.vertical,a};class c extends s.T{getTheme(t,e){return function(t,e,i,s){switch(t){case l.L.cartesianBandAxis:return(0,a.xy)((0,n.x)(i,["z"]),"band",e);case l.L.cartesianLinearAxis:return(0,a.xy)((0,n.x)(i,["z"]),"linear",e);case l.L.cartesianLogAxis:return(0,a.xy)((0,n.x)(i,["z"]),"log",e);case l.L.cartesianSymlogAxis:return(0,a.xy)((0,n.x)(i,["z"]),"symlog",e);case l.L.cartesianAxis:case l.L.cartesianTimeAxis:return(0,a.xy)((0,n.x)(i),void 0,e);case l.L.polarBandAxis:return(0,a.$P)(i.orient,"band",e);case l.L.polarLinearAxis:return(0,a.$P)(i.orient,"linear",e);case l.L.polarAxis:return(0,a.$P)(i.orient,void 0,e);case l.L.cartesianCrosshair:return(0,o.U_)(e,s);case l.L.polarCrosshair:return(0,o.bB)(e,s);case l.L.colorLegend:case l.L.sizeLegend:case l.L.discreteLegend:case l.L.dataZoom:case l.L.scrollBar:return u(i,(0,h.DE)(t,e));default:return(0,h.DE)(t,e)}}(this.type,this._option.getTheme(),t,e)}_mergeThemeToSpec(t,e){let{spec:i,theme:s}=super._mergeThemeToSpec(t,e);return this._adjustPadding(i),{spec:i,theme:s}}_adjustPadding(t){let{padding:e,noOuterPadding:i=!0,orient:s}=t;i&&e&&s&&(t.padding=Object.assign(Object.assign({},(0,r.Ek)(e)),{[s]:0}))}}},8746:function(t,e,i){i.d(e,{H:()=>c});var s=i(3),r=i(6883);class n extends r.I{constructor(t){super(),this.component=t}releaseAll(){super.releaseAll(),this.component=null}}var a=i(9730),o=i(3722),l=i(1125),h=i(881),d=i(2930),u=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class c extends h.r{static createComponent(t,e){let{spec:i}=t,s=u(t,["spec"]);return new this(i,Object.assign(Object.assign({},e),s))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new n(this)}constructor(t,e){super(t,e),this.name="component",this.modelType="component",this.transformerConstructor=d.r,this._delegateEvent=(t,e,i,r=null,n=null)=>{var a,l;e instanceof s.A||this.event.emit(i,{model:this,node:t,event:e,item:r,datum:n,source:o.AY.chart,chart:null===(l=null===(a=this._option)||void 0===a?void 0:a.globalInstance)||void 0===l?void 0:l.getChart()},"model")},this._option.animation&&(this.animate=new l.W({getCompiler:e.getCompiler}))}initLayout(){var t;super.initLayout(),this._regions=null!==(t=this._regions)&&void 0!==t?t:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(t=>null==t?void 0:t.id))}changeRegions(t){throw Error("Method not implemented.")}_getNeedClearVRenderComponents(){throw Error("Method not implemented.")}onRender(t){throw Error("Method not implemented.")}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(t){this.pluginService&&this.pluginService.getAll().forEach(e=>t(e))}getContainer(){var t;return this._container||(this._container=null===(t=this._option)||void 0===t?void 0:t.globalInstance.getStage().find(t=>"root"===t.name,!0)),this._container}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(i.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(i=>!(0,a.X)(null==e?void 0:e[i],t[i]))),(null==e?void 0:e.visible)!==t.visible&&(i.reCompile=!0),i}release(){var t;super.release(),this.clear(),null===(t=this.pluginService)||void 0===t||t.releaseAll(),this.pluginService=null}clear(){var t;let e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(t=>{var e;t&&(null===(e=this.getContainer())||void 0===e||e.removeChild(t),t=null)}),this._container=null,null===(t=this.pluginService)||void 0===t||t.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t,context:{model:this}})})}reAppendComponents(){let t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(t=>{var e;t&&!t.stage&&(null===(e=this.getContainer())||void 0===e||e.appendChild(t))})}getBoundsInRect(t,e){return{x1:0,x2:0,y1:0,y2:0}}getDatum(t){}}c.transformerConstructor=d.r},9026:function(t,e,i){i.d(e,{i:()=>N});var s,r,n=i(7623),a=i(7602),o=i(325),l=i(3e3);class h extends l.k{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}var d=i(9367),u=i(9536),c=i(7307);(0,d.M)(),(0,u.N)();class p extends h{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,o.Z)({},p.defaultAttributes,t))}renderCrosshair(t){let{start:e,end:i,lineStyle:s}=this.attribute;return t.createOrUpdateChild("crosshair-line",Object.assign({points:[e,i]},s),"line")}setLocation(t){let{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}p.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},(0,d.M)(),(0,c.k)();class g extends h{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,o.Z)({},g.defaultAttributes,t))}renderCrosshair(t){let{start:e,end:i,rectStyle:s}=this.attribute;return t.createOrUpdateChild("crosshair-rect",Object.assign({x:e.x,y:e.y,width:i.x-e.x,height:i.y-e.y},s),"rect")}setLocation(t){let{start:e,end:i}=t;this.setAttributes({start:e,end:i})}}g.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}};var m=i(7078),f=i(1601),v=i(6689),_=i(4154),y=i(9730),b=i(7636),x=i(4546),S=i(1130),A=i(1036),k=i(2683),w=i(6962),T=i(8746),C=i(2732),M=i(3722),E=i(6542),B=i(7631);(s=r||(r={}))[s.ALL=3]="ALL",s[s.HORIZONTAL=2]="HORIZONTAL",s[s.VERTICAL=1]="VERTICAL";var O=i(3231),I=i(5173),R=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let P={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class L extends T.H{get enableRemain(){return"none"===this.triggerOff}constructor(t,e){super(t,e),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=E.Ai.CrossHair_Grid,this.labelZIndex=E.Ai.CrossHair,this.trigger="hover",this._handleIn=t=>{if(!this._option)return;let{x:e,y:i}=this.calculateTriggerPoint(t);this.showDefault=!1,this._layoutCrosshair(e,i);let s=this._getNeedClearVRenderComponents();this._hasActive=s.some(t=>t&&!1!==t.attribute.visible)},this._handleClickInEvent=t=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(t),(0,f.Z)(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=(0,v.Z)(t=>{this._clickLock||this._handleIn(t)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hide())},this._handleTooltipShow=t=>{let e=t.tooltipData;if(t.isEmptyTooltip||!e||!e.length||(0,_.Z)(this._spec.followTooltip)&&!1===this._spec.followTooltip[t.activeType])return void this._handleTooltipHideOrRelease();let{x:i,y:s}=this.calculateTriggerPoint(t);this.showDefault=!1,this._layoutCrosshair(i,s,e,t.activeType);let r=this._getNeedClearVRenderComponents();this._hasActive=r.some(t=>t&&!1!==t.attribute.visible)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hide()},this.enable=!0,this.showDefault=!0}_setAllAxisValues(t,e,i){let s=!1;if(t.forEach(t=>{(0,I.lK)(t.axis.getScale().type)&&(s?this.enable=!1:s=!0)}),!this.enable)return!1;let{currentValue:r}=this._stateByField[i];return t.forEach((t,i)=>{let s=t.axis;r.set(i,{datum:this._getDatumAtPoint(s,e),axis:s})}),!0}clearAxisValue(){Object.keys(this._stateByField).forEach(t=>{this._stateByField[t].currentValue.clear()})}hideCrosshair(){this.clearAxisValue(),this.hide()}showCrosshair(t){t&&t.length&&(this.showDefault=!1,this.clearAxisValue(),t.forEach(t=>{let{axis:e,value:i}=t;this.setAxisValue(i,e)}),this.layoutByValue())}_getLimitBounds(){var t,e;if(!this._limitBounds){let{width:i,height:s}=null!==(e=null===(t=this._option.globalInstance.getChart())||void 0===t?void 0:t.getViewRect())&&void 0!==e?e:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:s}}return this._limitBounds}_showDefaultCrosshairBySpec(){Object.keys(this._stateByField).forEach(t=>{let e=this._spec[t];if(e&&e.visible&&e.defaultSelect){let{axisIndex:i,datum:s}=e.defaultSelect,r=this._option.getComponentsByKey("axes").find(t=>t.getSpecIndex()===i);r&&(this._stateByField[t].currentValue.clear(),this._stateByField[t].currentValue.set(i,{axis:r,datum:s}))}})}_updateVisibleCrosshair(){let t=!1;Object.keys(this._stateByField).forEach(e=>{let i=this._spec[e];i&&i.visible&&this._stateByField[e].currentValue.size?t=!0:this._hideByField(e)}),t&&this.layoutByValue()}_showDefaultCrosshair(){this.showDefault?(this._showDefaultCrosshairBySpec(),this.layoutByValue()):this._updateVisibleCrosshair()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reMake||(0,y.X)(e,t)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(!this._option.disableTriggerEvent){if(this._spec.followTooltip)this._registerTooltipEvent();else{let t=this._getTriggerEvent();t&&t.forEach(t=>{this._registerEvent(t.in,!1,t.click),t.out&&this._registerEvent(t.out,!0)})}}}_registerEvent(t,e,i){let s=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent,r=e?{level:M.l.chart}:{source:M.AY.chart};(0,b.Z)(t)?t.forEach(t=>{this.event.on(t,r,s)}):this.event.on(t,r,s)}_eventOff(t,e,i){let s=e?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent;(0,b.Z)(t)?t.forEach(t=>{this.event.off(t,s)}):this.event.off(t,s)}updateLayoutAttribute(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(t){let{event:e}=t,i=this._option.getCompiler().getStage().getLayer(void 0),s={x:e.viewX,y:e.viewY};return i.globalTransMatrix.transformPoint({x:e.viewX,y:e.viewY},s),{x:s.x-this.getLayoutStartPoint().x,y:s.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){let{mode:t=w.i["desktop-browser"]}=this._option,e=t===w.i["desktop-browser"]||t===w.i["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:(0,B.wx)(t)||(0,B.Oy)(t)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null;if(e){let t=(0,x.IX)(this.trigger||"hover"),i=t=>"click"===t?"none"===this.triggerOff?null:e.clickOut:e.hoverOut;this._spec.lockAfterClick&&!t.includes("click")?(t.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;let s=[];return t.forEach(t=>{s.push({click:"click"===t,in:e[t],out:i(t)})}),s}return null}_registerTooltipEvent(){this.event.on(M.$7.tooltipHide,{source:M.AY.chart},this._handleTooltipHideOrRelease),this.event.on(M.$7.tooltipShow,{source:M.AY.chart},this._handleTooltipShow),this.event.on(M.$7.tooltipRelease,{source:M.AY.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(t){var e,i;let s=null===(i=(e=this._option).getComponentsByKey)||void 0===i?void 0:i.call(e,"axes");if(!(null==s?void 0:s.length))return null;let r=(0,S.Z)(this._spec,`${t}Field.bindingAxesIndex`);if(r||(r=[],s.forEach((e,i)=>{P[t].includes(e.getOrient())&&r.push(i)})),!r.length)return null;let n=new Map,a=1/0,o=1/0,l=-1/0,h=-1/0,{x:d,y:u}=this.getLayoutStartPoint();return r.forEach(t=>{a=1/0,o=1/0,l=-1/0,h=-1/0;let e=s.find(e=>e.getSpecIndex()===t);e&&(e.getRegions().forEach(t=>{let{x:e,y:i}=t.getLayoutStartPoint();a=Math.min(a,e-d),o=Math.min(o,i-u),l=Math.max(l,e+t.getLayoutRect().width-d),h=Math.max(h,i+t.getLayoutRect().height-u)}),n.set(t,{x1:a,y1:o,x2:l,y2:h,axis:e}))}),n}changeRegions(t){}onLayoutEnd(t){let e=this._regions[0];this.setLayoutRect(e.getLayoutRect()),this.setLayoutStartPosition(e.getLayoutStartPoint()),super.onLayoutEnd(t)}onRender(t){}_releaseEvent(){this.clearOutEvent();let t=this._getTriggerEvent();t&&t.forEach(t=>{this._eventOff(t.in,!1,t.click),t.out&&this._eventOff(t.out,!0)})}_parseFieldInfo(){Object.keys(this._stateByField).forEach(t=>{let e=this._spec[t],{crosshairComp:i}=this._stateByField[t];if(e&&e.visible){if(this._stateByField[t].attributes=this._parseField(e,t),i){let{style:e,type:s}=this._stateByField[t].attributes;i.setAttributes({["rect"===s?"rectStyle":"lineStyle"]:e})}}else i&&i.parent&&i.parent.removeChild(i)})}_parseCrosshairSpec(){this._parseFieldInfo();let{trigger:t,triggerOff:e,labelZIndex:i,gridZIndex:s}=this._spec;t&&(this.trigger=t),("none"===e||(0,f.Z)(e)&&e>0)&&(this.triggerOff=e),void 0!==i&&(this.labelZIndex=i),void 0!==s&&(this.gridZIndex=s)}_parseField(t,e){var i,s;let r={},{line:n={},label:a={},visible:o}=t;if(r.visible=o,r.type=n.type||"line",!1===n.visible)r.style={visible:!1};else{let e=n.style||{},{stroke:a,fill:o,lineWidth:l}=e,{strokeOpacity:h,fillOpacity:d,opacity:u}=e,c=R(e,["strokeOpacity","fillOpacity","opacity"]),p="line"===r.type,g=p?h:d;if((0,f.Z)(u)&&(g=(null!=g?g:1)*u),r.style=Object.assign({opacity:g,pickable:!1,visible:!0},c),p)r.style.stroke=a||o,r.style.lineWidth=(0,S.Z)(n,"width",l||2);else{r.style.fill=o||a,(null===(s=null===(i=null==t?void 0:t.line)||void 0===i?void 0:i.style)||void 0===s?void 0:s.stroke)&&(r.style.stroke=t.line.style.stroke);let e=(0,S.Z)(n,"width");if("string"==typeof e){let t=parseInt(e.substring(0,e.length-1),10)/100;r.style.sizePercent=t}else"number"!=typeof e&&"function"!=typeof e||(r.style.size=e)}}if(a.visible){let t=a.labelBackground||{},e=a.style||{},i=t.style||{},{fill:s="rgba(47, 59, 82, 0.9)",stroke:n,outerBorder:o}=i,l=R(i,["fill","stroke","outerBorder"]);r.label={visible:!0,formatMethod:a.formatMethod,formatter:a.formatter,minWidth:t.minWidth,maxWidth:t.maxWidth,padding:t.padding,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},e),{fill:e.fill||"#fff",stroke:(0,S.Z)(e,"stroke")}),panel:((0,A.Z)(t.visible)?t.visible:t)?Object.assign({visible:!0,pickable:!1,fill:s,stroke:n,outerBorder:Object.assign({stroke:s,distance:0,lineWidth:3},o)},l):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else r.label={visible:!1};return r}_filterAxisByPoint(t,e,i){return t&&t.forEach(s=>{let r=s.axis;if((0,C.Nl)(s,e,i)&&t.delete(r.getSpecIndex()),r.type.startsWith("polarAxis")){let s=r.getCenter(),n=r.getInnerRadius(),a=r.getOuterRadius(),o=k.HL.distancePP({x:e,y:i},s);(o>a||o<n)&&t.delete(r.getSpecIndex())}}),t}_updateCrosshairLabel(t,e,i){let s=this.getContainer();t?t.setAttributes(e):(t=new m.V(e),null==s||s.add(t),i(t)),(0,O.Xu)(t,this._getLimitBounds())}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}_hideByField(t){let{crosshairComp:e,labelsComp:i}=this._stateByField[t];e&&e.hideAll(),i&&Object.keys(i).forEach(t=>{i[t]&&i[t].hideAll()})}hide(){Object.keys(this._stateByField).forEach(t=>{this._hideByField(t)})}_getNeedClearVRenderComponents(){return Object.keys(this._stateByField).reduce((t,e)=>{let{crosshairComp:i,labelsComp:s}=this._stateByField[e];return i&&t.push(i),s&&Object.keys(s).forEach(e=>{s[e]&&t.push(s[e])}),t},[])}}L.specKey="crosshair";var D=i(3881),Z=i(8469),F=i(6549),j=i(9114),H=i(2096);class z extends L{static getSpecInfo(t){return(0,H.ts)(t,this.specKey,this.type,t=>t.xField&&!1!==t.xField.visible||t.yField&&!1!==t.yField.visible)}constructor(t,e){super(t,e),this.type=a.L.cartesianCrosshair,this.name=a.L.cartesianCrosshair,this._stateByField={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:new Map,labelsComp:{top:null,bottom:null}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:new Map,labelsComp:{left:null,right:null}}}}_findAllAxisContains(t,e){let i=this._getAxisInfoByField("x"),s=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,t,e),yAxisMap:this._filterAxisByPoint(s,t,e)}}_getDatumAtPoint(t,e){let i=(0,D.yL)(t.getOrient())?"x":"y",s=e[i]-(t.getLayoutStartPoint()[i]-this.getLayoutStartPoint()[i]);return t.getScale().invert(s)}setAxisValue(t,e){(0,D.yL)(e.getOrient())?this._stateByField.xField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e}):this._stateByField.yField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e})}_layoutCrosshair(t,e,i,s){var r;let a=t,o=e;if(i&&i.length){if("dimension"===s){let t;let e=i[0],s=e.data.findIndex(t=>t.datum.length>0);if(s>-1){let i=e.data[s];t=i.series.dataToPosition(i.datum[0])}((0,n.Z)(e.dimType)?"y"===e.dimType:(0,D.Vz)(null===(r=null==e?void 0:e.axis)||void 0===r?void 0:r.getOrient()))?o=null==t?void 0:t.y:a=null==t?void 0:t.x}else if("mark"===s){let t=i[0],e=t.series.dataToPosition(t.datum[0]);a=null==e?void 0:e.x,o=null==e?void 0:e.y}}this.clearAxisValue();let{xAxisMap:l,yAxisMap:h}=this._findAllAxisContains(a,o);if(l&&0===l.size||h&&0===h.size){if(this.enableRemain)return;this.hide()}else l&&l.size&&this._setAllAxisValues(l,{x:a,y:o},"xField"),h&&h.size&&this._setAllAxisValues(h,{x:a,y:o},"yField"),this.layoutByValue(3)}layoutByValue(t=3){if(!this.enable)return;let e=(0,j.Sr)(this._regions,"cartesian");e&&((0,F.w)(this._stateByField,e,this.getLayoutStartPoint(),this.enableRemain),Object.keys(this._stateByField).forEach(t=>{this._layoutByField(t)}))}_layoutByField(t){let{cacheInfo:e,attributes:i,labelsComp:s,bandSize:r,coordKey:n}=this._stateByField[t];if(!i||!e||e._isCache&&this.enableRemain)return;let{coord:a,labels:o,visible:l,labelsTextStyle:h}=e;if(l){let e=(0,F.p)(this._stateByField[t]);this._updateCrosshairByField(t,e),Object.keys(o).forEach(e=>{var l;if(o[e].visible){let d=Object.assign(Object.assign(Object.assign({[n]:a+r/2},o[e]),i.label),{textStyle:Object.assign(Object.assign({},null===(l=i.label)||void 0===l?void 0:l.textStyle),h[e]),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(s[e],d,i=>{i.name=`crosshair-${t.replace("Field","")}-${e}-label`,s[e]=i})}else s[e]&&s[e].hideAll()})}else this._hideByField(t)}_updateCrosshairByField(t,e){let i=this.getContainer(),{attributes:s}=this._stateByField[t],{crosshairComp:r}=this._stateByField[t];if(r)r.setAttributes(e);else{let n=s.style;"line"===s.type?r=new p(Object.assign(Object.assign({},e),{lineStyle:n,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):"rect"===s.type&&(r=new g(Object.assign(Object.assign({},e),{rectStyle:n,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),null==i||i.add(r),this._stateByField[t].crosshairComp=r}}}z.specKey="crosshair",z.type=a.L.cartesianCrosshair;let N=()=>{Z.F.registerComponent(z.type,z)}},6549:function(t,e,i){i.d(e,{p:()=>u,w:()=>l});var s=i(5173),r=i(3231),n=i(4267),a=i(7623),o=i(2096);let l=(t,e,i,o=!1)=>(i||(i={x:0,y:0}),Object.keys(t).forEach(l=>{let u;let{currentValue:c,cacheInfo:p,labelsComp:g,attributes:m,coordKey:f}=t[l],v=null,_=0;if(c.size){let t=Array.from(c.values())[0];_=t.axis.getScale().scale(t.datum)+t.axis.getLayoutStartPoint()[f]-i[f],v=t.axis}let y=!!c.size&&Number.isFinite(_),b=o&&!y&&(0,a.Z)(p),x=b?p:{coordRange:[0,0],sizeRange:[0,0],coord:_,labelsTextStyle:{},labels:g?Object.keys(g).reduce((t,e)=>(t[e]={visible:!1,text:"",dx:0,dy:0},t),{}):null,visible:y,axis:v};x&&(x._isCache=b);let S=0;if(m&&c.forEach(({axis:t,datum:i=""})=>{var a;let o=null,h=t.getScale();if((0,s.lK)(h.type))0===(u=h.bandwidth())&&h.step&&(S=h.step());else if((0,s.z2)(h.type)){let s="xField"===l?e.fieldX[0]:e.fieldY[0],n="xField"===l?e.fieldX2:e.fieldY2,a=(0,r.Op)(e.getViewData().latestData,+i,s,n);if(a){let t="xField"===l?e.dataToPositionX(a):e.dataToPositionY(a);n?(u=Math.abs(t-("xField"===l?e.dataToPositionX1(a):e.dataToPositionY1(a))),i=`${a[s]} ~ ${a[n]}`):u=1,_=t}o=t.niceLabelFormatter}if(x&&(null===(a=m.label)||void 0===a?void 0:a.visible)&&!b){let e=(0,n.bi)(t.getSpec()),s=t.getOrient();x.labels[s]&&(x.labels[s].visible=!0,x.labels[s].text=i,"left"===s?(x.labels[s].dx=-e,x.labelsTextStyle[s]={textAlign:"right",textBaseline:"middle"}):"right"===s?(x.labels[s].dx=e,x.labelsTextStyle[s]={textAlign:"left",textBaseline:"middle"}):"top"===s?(x.labels[s].y=0,x.labels[s].dy=-e,x.labelsTextStyle[s]={textAlign:"center",textBaseline:"bottom"}):"bottom"===s&&(x.labels[s].dy=e,x.labelsTextStyle[s]={textAlign:"center",textBaseline:"top"}),x.labels[s].defaultFormatter=o)}}),x&&!b){let t={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};d(t,c),"xField"===l?(x.coordRange=[t.x1,t.x2],x.sizeRange=[t.y1,t.y2],x.coord=_+i.x,x.labels&&(x.labels.top.y=t.y1,x.labels.bottom.y=t.y2)):(x.coordRange=[t.y1,t.y2],x.sizeRange=[t.x1,t.x2],x.coord=_+i.y,x.labels&&(x.labels.left.x=t.x1,x.labels.right.x=t.x2)),(x.coord<x.coordRange[0]||x.coord>x.coordRange[1])&&(x.visible=!1),m&&m.label&&Object.keys(x.labels).forEach(t=>{x.labels[t].visible&&h(x.labels[t],t,m.label)})}t[l].bandSize=null!=u?u:0,t[l].offsetSize=S,t[l].cacheInfo=x}),t),h=(t,e,i)=>{let{formatMethod:s,formatter:r}=i,{formatFunc:n,args:a}=(0,o.HJ)(s,r,t.text,{label:t.text,position:e});n?t.text=n(...a):t.defaultFormatter&&(t.text=t.defaultFormatter(t.text))},d=(t,e)=>{e.forEach(({axis:e})=>{e.getRegions().forEach(e=>{let{x:i,y:s}=e.getLayoutStartPoint(),{width:r,height:n}=e.getLayoutRect();t.x1=Math.min(t.x1,i),t.y1=Math.min(t.y1,s),t.x2=Math.max(t.x2,i+r),t.y2=Math.max(t.y2,s+n)})})},u=t=>{let e;let{cacheInfo:i,attributes:s,bandSize:r,offsetSize:n,coordKey:a,anotherAxisKey:o}=t,{coord:l,sizeRange:h}=i,d=s.type;if("line"===d){let t=l+r/2;e={visible:!0,start:{[a]:t,[o]:h[0]},end:{[a]:t,[o]:h[1]}}}else if("rect"===d){let t=c(s,r,i.axis),{coordRange:d}=i;e={visible:!0,start:{[a]:Math.max(l-t/2-n/2,d[0]),[o]:h[0]},end:{[a]:Math.min(l+r+t/2+n/2,d[1]),[o]:h[1]}}}return e},c=(t,e,i)=>{var s,r,n;let a=0;if(null===(s=t.style)||void 0===s?void 0:s.sizePercent)a=(t.style.sizePercent-1)*e;else if("number"==typeof(null===(r=t.style)||void 0===r?void 0:r.size))a=t.style.size-e;else if("function"==typeof(null===(n=t.style)||void 0===n?void 0:n.size)){let s=i.getLayoutRect();a=t.style.size(s,i)-e}return a}},3231:function(t,e,i){i.d(e,{Op:()=>c,U_:()=>p,Xu:()=>u,bB:()=>g});var s=i(4546),r=i(7623),n=i(3881),a=i(5173),o=i(2096),l=i(7602),h=i(4267),d=i(4218);function u(t,e){let{x1:i,y1:s,x2:r,y2:n}=e,{x1:a,y1:o,x2:l,y2:h}=t.AABBBounds,{dx:d=0,dy:u=0}=t.attribute,c=0,p=0;a<i&&(c=i-a),o<s&&(p=s-o),l>r&&(c=r-l),h>n&&(p=n-h),c&&t.setAttribute("dx",c+d),p&&t.setAttribute("dy",p+u)}function c(t,e,i,s){for(let r=0,n=t.length;r<n;r++){let n=t[r];if(n){let t=n[i],r=n[s||i];if(t<=e&&r>=e)return n}}return null}let p=(t,e)=>{var i,u;let c;let p=(0,s.IX)(null!==(i=e.axes)&&void 0!==i?i:[]),{bandField:g,linearField:m,xField:f,yField:v}=null!==(u=(0,o.DE)(l.L.crosshair,t))&&void 0!==u?u:{},_=p.find(t=>(0,n.yL)(t.orient));c=(0,r.Z)(_)?(0,d.H)({},(0,h.IM)(_.type)?g:m,f):f;let y=p.find(t=>(0,n.Vz)(t.orient));return{xField:c,yField:(0,r.Z)(y)?(0,d.H)({},(0,a.lK)(y.type)?g:m,v):v}},g=(t,e)=>{var i,n;let u;let c=(0,s.IX)(null!==(i=e.axes)&&void 0!==i?i:[]),{bandField:p,linearField:g,categoryField:m,valueField:f}=null!==(n=(0,o.DE)(l.L.crosshair,t))&&void 0!==n?n:{},v=c.find(t=>"angle"===t.orient);u=(0,r.Z)(v)?(0,d.H)({},(0,h.IM)(v.type)?p:g,m):m;let _=c.find(t=>"radius"===t.orient);return{categoryField:u,valueField:(0,r.Z)(_)?(0,d.H)({},(0,a.lK)(_.type)?p:g,f):f}}},3127:function(t,e,i){i.d(e,{U:()=>m});var s=i(8746),r=i(7602),n=i(6542),a=i(3685),o=i(7623),l=i(6082),h=i(8378),d=i(9730),u=i(7393),c=i(8469),p=i(208);class g extends s.H{constructor(){super(...arguments),this.type=r.L.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=n.Ai.CustomMark,this.layoutLevel=n.pM.CustomMark}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return null===(i=this._option.globalScale.getScale(t))||void 0===i?void 0:i.scale(e)}}}initMarks(){if(!this._spec)return;let t=this._option&&this._option.getAllSeries(),e=!1!==this._option.animation,i=[];t&&t.length&&t.forEach(t=>{let e=t&&t.getMarksWithoutRoot();e&&e.length&&e.forEach(t=>{i.push(t)})});let s=null;if(this._spec.parent){let t=this.getChart().getAllMarks().find(t=>t.getUserId()===this._spec.parent);"group"===t.type&&(s=t)}this._createExtensionMark(this._spec,s,`${a.Bq}_series_${this.id}_extensionMark`,0,{depend:i,hasAnimation:e})}_createExtensionMark(t,e,i,s=0,r){var n;let a=this._createMark({type:t.type,name:(0,o.Z)(t.name)?`${t.name}`:`${i}_${s}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:t.componentType,key:t.dataKey});if(a){if((0,o.Z)(t.id)&&a.setUserId(t.id),r.hasAnimation&&t.animation){let e=(0,p._8)({},(0,p.hT)(t.type,t,this._markAttributeContext));a.setAnimationConfig(e)}if(r.depend&&r.depend.length&&a.setDepend(...r.depend),(0,l.Z)(e)?this._marks.addMark(a):e&&e.addMark(a),this.initMarkStyleWithSpec(a,t),"group"===t.type&&(i=`${i}_${s}`,null===(n=t.children)||void 0===n||n.forEach((t,e)=>{this._createExtensionMark(t,a,i,e,r)})),(0,o.Z)(t.dataId)||(0,h.Z)(t.dataIndex)){let e=this.getChart().getSeriesData(t.dataId,t.dataIndex);e&&(e.target.addListener("change",()=>{a.getData().updateData()}),a.setDataView(e))}}}initEvent(){}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,d.X)(e,t)||(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}onRender(t){}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(t,e)=>{var i;return null===(i=this._option.globalScale.getScale(t))||void 0===i?void 0:i.scale(e)},getLayoutBounds:()=>{let{x:t,y:e}=this.getLayoutStartPoint(),{width:i,height:s}=this.getLayoutRect();return(new u.YZ).set(t,e,t+i,e+s)}}}_getLayoutRect(){let t=new u.YZ;return this.getMarks().forEach(e=>{let i=e.getProduct();i&&t.union(i.getBounds())}),t.empty()?{width:0,height:0}:{width:t.width(),height:t.height()}}getBoundsInRect(t){this.setLayoutRect(t);let e=this._getLayoutRect(),{x:i,y:s}=this.getLayoutStartPoint();return{x1:i,y1:s,x2:i+e.width,y2:s+e.height}}getVRenderComponents(){let t=[],e=i=>{var s;if(i&&"group"===i.type)i.getMarks().forEach(t=>{e(t)});else if("component"===i.type){let e=null===(s=null==i?void 0:i.getProduct())||void 0===s?void 0:s.getGroupGraphicItem();e&&t.push(e)}};return this.getMarks().forEach(t=>{e(t)}),t}}g.type=r.L.customMark,g.specKey="customMark";let m=()=>{c.F.registerComponent(g.type,g)}},7602:function(t,e,i){var s,r;i.d(e,{L:()=>s}),(r=s||(s={})).cartesianAxis="cartesianAxis",r.cartesianBandAxis="cartesianAxis-band",r.cartesianLinearAxis="cartesianAxis-linear",r.cartesianTimeAxis="cartesianAxis-time",r.cartesianLogAxis="cartesianAxis-log",r.cartesianSymlogAxis="cartesianAxis-symlog",r.polarAxis="polarAxis",r.polarBandAxis="polarAxis-band",r.polarLinearAxis="polarAxis-linear",r.crosshair="crosshair",r.cartesianCrosshair="cartesianCrosshair",r.polarCrosshair="polarCrosshair",r.dataZoom="dataZoom",r.geoCoordinate="geoCoordinate",r.indicator="indicator",r.discreteLegend="discreteLegend",r.continuousLegend="continuousLegend",r.colorLegend="colorLegend",r.sizeLegend="sizeLegend",r.mapLabel="mapLabel",r.markLine="markLine",r.markArea="markArea",r.markPoint="markPoint",r.polarMarkLine="polarMarkLine",r.polarMarkArea="polarMarkArea",r.polarMarkPoint="polarMarkPoint",r.geoMarkPoint="geoMarkPoint",r.tooltip="tooltip",r.title="title",r.player="player",r.scrollBar="scrollBar",r.label="label",r.totalLabel="totalLabel",r.brush="brush",r.poptip="poptip",r.customMark="customMark"},1820:function(t,e,i){i.d(e,{d:()=>o});var s=i(8746),r=i(7602),n=i(6542),a=i(9730);class o extends s.H{constructor(t,e){super(t,e),this.type=r.L.label,this.name=r.L.label,this.layoutType="none",this.layoutZIndex=n.Ai.Label,this._regions=e.getRegionsInIndex(e.regionIndexes)}_interactiveConfig(t){let{interactive:e}=t,i={hover:!1,select:!1,state:t.state};if(!0!==e)return i;let{hover:s,select:r}=this._option.getChart().getSpec();return!1===s&&!1===s.enable||(i.hover=!0),!1===r&&!1===r.enable||(i.select=!0),i}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reRender=!0,(0,a.X)(e,t)||(i.reMake=!0),i}onRender(t){}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}}o.type=r.L.label},1637:function(t,e,i){i.d(e,{U:()=>w});var s=i(7602),r=i(5669),n=i(3722),a=i(2698),o=i(9231),l=i(6542),h=i(4218),d=i(9114),u=i(5341),c=i(85),p=i(8120),g=i(1820),m=i(7623),f=i(4546),v=i(9038),_=i(7636),y=i(9198),b=i(8469),x=i(2965),S=i(2930);class A extends S.r{_initTheme(t,e){return{spec:t,theme:this._theme}}}class k extends g.d{constructor(t,e){super(t,e),this.type=s.L.label,this.name=s.L.label,this.specKey="label",this.transformerConstructor=A,this.layoutZIndex=l.Ai.Label,this._layoutRule=t.labelLayout||"series"}static getSpecInfo(t,e){let i=[];return((null==e?void 0:e.region)||[]).forEach((r,n)=>{(r.seriesIndexes||[]).some(t=>{let{markLabelSpec:i={}}=e.series[t];return Object.values(i).some(t=>Array.isArray(t)&&t.some(t=>t.visible))})&&i.push({spec:t,type:s.L.label,specInfoPath:["component",this.specKey,n],regionIndexes:[n]})}),i}init(t){super.init(t),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(t){super.reInit(t),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()}initEvent(){this.event.on(n.$7.dataZoomChange,()=>{this._labelComponentMap.forEach((t,e)=>{let i=e.getProduct().getGroupGraphicItem();i&&i.disableAnimation()}),this.event.on(a.ZK.AFTER_MARK_RENDER_END,t)});let t=()=>{this._labelComponentMap.forEach((t,e)=>{let i=e.getProduct().getGroupGraphicItem();i&&i.enableAnimation()}),this.event.off(a.ZK.AFTER_MARK_RENDER_END,t)}}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),(0,d.xV)(this._regions,t=>{let{markLabelSpec:e={}}=t.getSpecInfo(),i=Object.keys(e),s=t.getRegion();this._labelInfoMap.get(s)||this._labelInfoMap.set(s,[]);for(let r=0;r<i.length;r++){let n=i[r],a=t.getMarkInName(n);a&&e[n].forEach((e,i)=>{var r,o;if(e.visible){let l=this._labelInfoMap.get(s),h=this._createMark({type:"label",name:`${n}-label-${i}`},{noSeparateStyle:!0,attributeContext:t.getMarkAttributeContext()});e.showRelatedMarkTooltip&&(null===(o=null===(r=t.tooltipHelper)||void 0===r?void 0:r.activeTriggerSet.mark)||void 0===o||o.add(h)),h.setTarget(a),l.push({labelMark:h,baseMark:a,series:t,labelSpec:e})}})}})}_initLabelComponent(){this._labelInfoMap.forEach((t,e)=>{if("region"===this._layoutRule){let i=this._createMark({type:"component",name:`${e.getGroupMark().name}-label-component`},{componentType:"label",noSeparateStyle:!0},{support3d:this._spec.support3d});i&&(i.setSkipBeforeLayouted(!0),t[0]&&(0,m.Z)(t[0].labelSpec.zIndex)&&i.setMarkConfig({zIndex:t[0].labelSpec.zIndex}),this._marks.addMark(i),this._labelComponentMap.set(i,()=>this._labelInfoMap.get(e)))}else t.forEach((t,i)=>{let s=this._createMark({type:"component",name:`${t.labelMark.name}-component`},{componentType:"label",noSeparateStyle:!0},{support3d:t.baseMark.getMarkConfig().support3d});s&&((0,m.Z)(t.labelSpec.zIndex)&&s.setMarkConfig({zIndex:t.labelSpec.zIndex}),s.setSkipBeforeLayouted(!0),this._marks.addMark(s),this._labelComponentMap.set(s,()=>this._labelInfoMap.get(e)[i]))})})}_initTextMarkStyle(){this._labelComponentMap.forEach((t,e)=>{(0,f.IX)(t()).forEach(({labelMark:t})=>{t.setComponent(e)})}),this._labelInfoMap.forEach(t=>{t.forEach(t=>{var e,i;let{labelMark:s,labelSpec:r,series:n}=t;if(this.initMarkStyleWithSpec(s,r,void 0),(0,v.Z)(null==r?void 0:r.getStyleHandler)){let t=r.getStyleHandler(n);null==t||t.call(n,s,r)}(null===(i=null===(e=s.stateStyle)||void 0===e?void 0:e.normal)||void 0===i?void 0:i.lineWidth)&&s.setAttribute("stroke",n.getColorAttribute(),"normal",o.W.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((t,e)=>{let i=t();(0,_.Z)(i)?this._updateMultiLabelAttribute(i,e):this._updateSingleLabelAttribute(i,e)})}_updateMultiLabelAttribute(t,e){this._updateLabelComponentAttribute(e.getProduct(),t.map(({baseMark:t})=>t.getProduct()),t)}_updateSingleLabelAttribute(t,e){let{baseMark:i}=t;this._updateLabelComponentAttribute(e.getProduct(),i.getProduct(),[t])}_updateLabelComponentAttribute(t,e,i){let s=this._option.getComponentsByType("totalLabel");t.target(e).configure({interactive:!1}).depend(s.map(t=>t.getMarks()[0].getProduct())).labelStyle((t,e)=>{var n,a;let o=i[e.labelIndex];if(o){let{labelSpec:t,labelMark:e,series:i}=o,l=e.getRule(),d=this._interactiveConfig(t),u=null!==(a=null===(n=this._spec)||void 0===n?void 0:n.centerOffset)&&void 0!==a?a:0,p=(0,h.H)({textStyle:Object.assign({pickable:!0===t.interactive},t.style),overlap:{avoidMarks:s.map(t=>t.getMarks()[0].getProductId())}},(0,c.vz)(l,o),Object.assign(Object.assign(Object.assign({},(0,y.Z)(t,["position","style","state","type","stackDataFilterType","getStyleHandler"])),d),{centerOffset:u}),t.stackDataFilterType?{dataFilter:"min"===t.stackDataFilterType?t=>t.filter(t=>t.data[r.cL]):t=>t.filter(t=>t.data[r.wo])}:{});return i&&i.parseLabelStyle&&(p=i.parseLabelStyle(p,t,e)),"line"!==l&&"area"!==l||(p.type=l),p}}).encode((t,e,s)=>{if(i[s.labelIndex]){let{labelSpec:e,labelMark:r}=i[s.labelIndex];return r.skipEncode?{data:t}:(0,c.Sv)(i[s.labelIndex],t,e.formatMethod,e.formatter)}}).size(()=>i[0].series.getRegion().getLayoutRect())}compileMarks(){this.getMarks().forEach(t=>{let e;let i=this._labelComponentMap.get(t)();e=(0,_.Z)(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),t.compile({group:e,context:{model:this,labelInfo:i}})})}getVRenderComponents(){let t=[];return this._labelComponentMap.forEach((e,i)=>{let s=i.getProduct().getGroupGraphicItem();s&&t.push(s)}),t}getLabelInfoByTextGraphic(t){let e;let i=null==t?void 0:t.parent,s=null==i?void 0:i.parent;if(s){let t=s.getChildren().indexOf(i);this._labelComponentMap.forEach((i,r)=>{r.getProduct().getGroupGraphicItem()===s&&(e=(0,f.IX)(i())[t])})}return e}}k.type=s.L.label,k.specKey="label",k.transformerConstructor=A;let w=()=>{(0,u.Uq)(),(0,x.a)(),(0,p.k)(),b.F.registerComponent(k.type,k,!0)}},4871:function(t,e,i){i.d(e,{v$:()=>m});var s=i(2965),r=i(7602),n=i(5669),a=i(6542),o=i(9231),l=i(4218),h=i(5341),d=i(85),u=i(1820),c=i(8469),p=i(8120);class g extends u.d{constructor(){super(...arguments),this.type=r.L.totalLabel,this.name=r.L.totalLabel,this.specKey="totalLabel",this.layoutZIndex=a.Ai.Label}static getSpecInfo(t,e){var i;let s=[];return null===(i=null==e?void 0:e.region)||void 0===i||i.forEach((t,i)=>{var n;null===(n=t.seriesIndexes)||void 0===n||n.forEach(t=>{let{spec:n}=e.series[t],a=n[this.specKey];(null==a?void 0:a.visible)&&s.push({spec:a,type:r.L.totalLabel,specPath:["series",t,this.specKey],specInfoPath:["component",this.specKey,t],regionIndexes:[i],seriesIndexes:[t]})})}),s}init(t){super.init(t),this._initTextMark(),this._initLabelComponent()}reInit(t){super.reInit(t),this._initTextMark()}_initTextMark(){var t;let e=this._getSeries();if(null===(t=e.getSpec().totalLabel)||void 0===t?void 0:t.visible){let t=e.getSeriesMark();if(t){let e=this._createMark({type:"label",name:`${t.name}-total-label`});this._baseMark=t,this._textMark=e,this._initTextMarkStyle()}}}_initTextMarkStyle(){var t;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:t=>t[n.Gq]},"normal",o.W.Default);let e=this._getSeries();null===(t=e.initTotalLabelMarkStyle)||void 0===t||t.call(e,this._textMark)}_initLabelComponent(){let t=this._getSeries(),e=this._createMark({type:"component",name:`${t.name}-total-label-component`},{componentType:"label",noSeparateStyle:!0},{support3d:this._spec.support3d});e&&this._marks.addMark(e)}updateLayoutAttribute(){super.updateLayoutAttribute();let t=this._getSeries();this._marks.forEach((e,i)=>{e.getProduct().target(this._baseMark.getProduct()).configure({interactive:!1}).labelStyle(()=>{var e,i;if(this._baseMark){let{offset:s,animation:r,overlap:a}=this._spec,o=this._interactiveConfig(this._spec);return(0,l.H)({textStyle:{pickable:!0===this._spec.interactive},position:function(t,e){var i,s;let r;let{direction:n}=t,a=("horizontal"===n?null===(i=t.getXAxisHelper())||void 0===i?void 0:i.isInverse():null===(s=t.getYAxisHelper())||void 0===s?void 0:s.isInverse())?1:0;switch(e){case"rect":case"symbol":r=({vertical:["top","bottom"],horizontal:["right","left"]})[n][a];break;default:r="top"}return r}(t,this._baseMark.type),x:0,y:0},null!==(i=null===(e=t.getTotalLabelComponentStyle)||void 0===e?void 0:e.call(t,{baseMark:this._baseMark,labelMark:this._textMark}))&&void 0!==i?i:{},Object.assign({offset:s,animation:r,overlap:a,dataFilter:t=>t.filter(t=>t.data[n.wo])},o))}}).encode(e=>(0,d.Sv)({baseMark:this._baseMark,labelMark:this._textMark,series:t,labelSpec:t.getSpec().totalLabel},e,this._spec.formatMethod)).size(()=>this._regions[0].getLayoutRect())})}compileMarks(){this.getMarks().forEach(t=>{let e=this._regions[0].getGroupMark().getProduct();t.compile({group:e,context:{model:this}})})}getVRenderComponents(){let t=[];return this.getMarks().forEach(e=>{let i=e.getProduct().getGroupGraphicItem();i&&t.push(i)}),t}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}g.type=r.L.totalLabel,g.specKey="totalLabel";let m=()=>{(0,h.Uq)(),(0,s.a)(),(0,p.k)(),c.F.registerComponent(g.type,g,!0)}},85:function(t,e,i){i.d(e,{Sv:()=>p,vz:()=>c});var s=i(3885),r=i(4154),n=i(9038),a=i(1036),o=i(9904),l=i(2875),h=i(2096),d=i(5669);let u={rect:f,symbol:m,arc:v,point:function(t){let{labelSpec:e}=t;return{position:"center",overlap:!1!==e.overlap&&{avoidBaseMark:!1}}},"line-data":function(t){let e=m(t);return(0,a.Z)(e.overlap)||(e.overlap.avoidBaseMark=!1),e},stackLabel:function(t,e,i){let s=t.series,r=t.labelSpec||{},n=s.getTotalData();return{customLayoutFunc:n=>n.map(n=>{let a=r.position||"withChange",o=r.offset||0,h=e?e(n.data):n.data,d=p(t,h,r.formatMethod);return d.x="horizontal"===s.direction?"middle"===a?.5*(s.totalPositionX(h,"end")+s.totalPositionY(h,"start")):"max"===a?s.totalPositionX(h,h.end>=h.start?"end":"start")+o:"min"===a?s.totalPositionX(h,h.end>=h.start?"start":"end")-o:s.totalPositionX(h,"end")+(h.end>=h.start?o:-o):s.totalPositionX(h,"index",.5),d.y="horizontal"===s.direction?s.totalPositionY(h,"index",.5):"middle"===a?.5*(s.totalPositionY(h,"end")+s.totalPositionY(h,"start")):"max"===a?s.totalPositionY(h,h.end>=h.start?"end":"start")-o:"min"===a?s.totalPositionY(h,h.end>=h.start?"start":"end")+o:s.totalPositionY(h,"end")+(h.end>=h.start?-o:o),"horizontal"===s.direction?d.textAlign="middle"===a?"center":"withChange"===a&&h.end-h.start>=0||"max"===a?"left":"right":d.textBaseline="middle"===a?a:"withChange"===a&&h.end-h.start>=0||"max"===a?"bottom":"top",null==i||i(n,h,d),(0,l.r)(Object.assign(Object.assign({},d),{id:n.id}))}),dataFilter:t=>{let e=[];return n.forEach(i=>{let r=t.find(t=>{var e;return i.index===(null===(e=t.data)||void 0===e?void 0:e[s.getDimensionField()[0]])});r&&(r.data=i,e.push(r))}),e},overlap:{strategy:[]}}},line:_,area:_,rect3d:f,arc3d:v,treemap:function(t){return{customLayoutFunc:(t,e)=>e,overlap:!1}},venn:function(t){return{customLayoutFunc:(t,e)=>e,smartInvert:!0}}};function c(t,e){var i;let{labelSpec:n}=e;n.overlap&&!(0,r.Z)(n.overlap)&&(n.overlap={});let a=null!==(i=u[t])&&void 0!==i?i:u.point;return e.series.type===s.A.sankey?function(t){var e,i,s,r;let{series:n,labelSpec:a={}}=t,l=null!==(e=g(a.position))&&void 0!==e?e:"outside",h=n.direction,d=l;return(0,o.Z)(l)&&("vertical"===h?d="inside-start"===l?t=>"inside-left":"inside-middle"===l?t=>"center":"inside-end"===l?t=>"inside-right":t=>"bottom":"inside-start"===l?d=t=>"inside-left":"inside-middle"===l?d=t=>"center":"inside-end"===l?d=t=>"inside-right":"outside"===l&&(d=t=>"right")),{position:d,overlap:!1!==a.overlap&&(!(0,o.Z)(l)||!l.includes("inside"))&&{strategy:null!==(s=null===(i=a.overlap)||void 0===i?void 0:i.strategy)&&void 0!==s?s:(r=n,[{type:"position",position:t=>"horizontal"===r.direction?["right","left"]:["bottom","top"]}])},smartInvert:!1,offset:0,syncState:!0}}(e):a(e)}function p(t,e,i,r){var n;let{labelMark:a,series:o}=t,l={text:e[o.getMeasureField()[0]],data:e,textType:null!==(n=t.labelSpec.textType)&&void 0!==n?n:"text"};for(let t of Object.keys(a.stateStyle.normal)){let i=a.getAttribute(t,e);l[t]=i}if(o.type!==s.A.sankey){let{formatFunc:t,args:s}=(0,h.HJ)(i,r,l.text,e);t&&(l._originText=l.text,l.text=t(...s,{series:o}))}return l}function g(t){return(0,n.Z)(t)?e=>t(e.data):t}function m(t){var e,i,s;let r;let{series:n,labelSpec:a}=t,o="horizontal"===n.direction?"right":"top",l=null!==(e=g(a.position))&&void 0!==e?e:o;return r=!1!==a.overlap&&{strategy:null!==(s=null===(i=a.overlap)||void 0===i?void 0:i.strategy)&&void 0!==s?s:[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}],avoidBaseMark:"center"!==l},{position:l,overlap:r}}function f(t){var e,i,s,r,n,a,l;let{series:h,labelSpec:d={}}=t,u=null!==(e=g(d.position))&&void 0!==e?e:"outside",c=null!==(i=h.direction)&&void 0!==i?i:"vertical",p="horizontal"===h.direction?null===(s=h.getXAxisHelper())||void 0===s?void 0:s.isInverse():null===(r=h.getYAxisHelper())||void 0===r?void 0:r.isInverse(),m,f=u;f=t=>{var e;let{data:i}=t,s=null!==(e="function"==typeof d.position?d.position(i):d.position)&&void 0!==e?e:"outside";if("outside"===s){let t=h.getMeasureField()[0];return({vertical:["top","bottom"],horizontal:["right","left"]})[c][(null==i?void 0:i[t])>=0&&p||(null==i?void 0:i[t])<0&&!p?1:0]}return s},m=!1!==d.overlap&&{strategy:null!==(a=null===(n=d.overlap)||void 0===n?void 0:n.strategy)&&void 0!==a?a:(l=h,[{type:"position",position:t=>{var e,i;let{data:s}=t,r=l.getMeasureField()[0];return("horizontal"===l.direction?null===(e=l.getXAxisHelper())||void 0===e?void 0:e.isInverse():null===(i=l.getYAxisHelper())||void 0===i?void 0:i.isInverse())?(null==s?void 0:s[r])>=0?"horizontal"===l.direction?["left","inside-left"]:["bottom","inside-bottom"]:"horizontal"===l.direction?["right","inside-right"]:["top","inside-top"]:(null==s?void 0:s[r])>=0?"horizontal"===l.direction?["right","inside-right"]:["top","inside-top"]:"horizontal"===l.direction?["left","inside-left"]:["bottom","inside-bottom"]}}])};let v=!1;return(0,o.Z)(u)&&u.includes("inside")&&(v=!0),{position:f,overlap:m,smartInvert:v}}function v(t){var e;let i;let{labelSpec:s}=t,r=null!==(e=g(s.position))&&void 0!==e?e:"outside";return i=s.smartInvert?s.smartInvert:(0,o.Z)(r)&&r.includes("inside"),{position:r,smartInvert:i}}function _(t){var e,i,s,r;let{labelSpec:n,series:a}=t,o=null===(s=null===(i=null===(e=a.getViewDataStatistics)||void 0===e?void 0:e.call(a).latestData)||void 0===i?void 0:i[a.getSeriesField()])||void 0===s?void 0:s.values,l=o?o.map((t,e)=>({[a.getSeriesField()]:t,index:e})):[{index:0,[d.lb]:a.getSeriesKeys()[0]}];return{position:null!==(r=n.position)&&void 0!==r?r:"end",data:l}}},2754:function(t,e,i){i.d(e,{q:()=>m});var s=i(7623),r=i(4546),n=i(9730),a=i(6082),o=i(8378),l=i(8746),h=i(6542),d=i(3722),u=i(9114),c=i(1960),p=i(4218),g=i(3558);class m extends l.H{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=h.Ai.Legend,this.layoutLevel=h.pM.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{(0,u.xV)(this._regions,t=>{var e;null===(e=t.getViewData())||void 0===e||e.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),(0,u.xV)(this._regions,t=>{t.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._orient=(0,c.vk)(this._spec.orient)?this._spec.orient:"left",this._position=null!==(t=this._spec.position)&&void 0!==t?t:"middle",this._visible=!1!==this._spec.visible;let{regionId:e,regionIndex:i,seriesId:n,seriesIndex:a}=this._spec;(0,s.Z)(n)&&(this._seriesUserId=(0,r.IX)(n)),(0,s.Z)(e)&&(this._regionUserId=(0,r.IX)(e)),(0,s.Z)(a)&&(this._seriesIndex=(0,r.IX)(a)),(0,s.Z)(i)&&(this._regionUserIndex=(0,r.IX)(i)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}onRender(t){}_compareSpec(t,e){let i=super._compareSpec(t,e);return i.reRender=!0,(null==t?void 0:t.orient)!==(null==e?void 0:e.orient)?i.reMake=!0:(0,n.X)(e,t)||(i.reCompile=!0),i}changeRegions(t){}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData()}initData(){let t=this._initLegendData();t.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new g.O(this._option,t),this._initSelectedData(),(0,u.xV)(this._regions,t=>{t.event.on(d.$7.rawDataUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===t.id},()=>{this._legendData.getDataView().reRunAllTransform()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(t){var e,i,s;let r=this._selectedData;(0,a.Z)(t)||JSON.stringify(r)===JSON.stringify(t)||((0,u.xV)(this._regions,e=>{e.legendSelectedFilter&&(t=e.legendSelectedFilter(this,t))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...t],null===(i=(e=this.effect).onSelectedDataChange)||void 0===i||i.call(e),this.event.emit(d.$7.legendSelectedDataChange,{model:this}),null===(s=this._legendComponent)||void 0===s||s.setSelected(this._selectedData))}afterSetLayoutStartPoint(t){if(super.afterSetLayoutStartPoint(t),this._legendComponent){let{x:e,y:i}=t;(0,o.Z)(e*i)&&this._legendComponent.setAttributes({x:e,y:i})}}getBoundsInRect(t,e){if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{x1:0,y1:0,x2:0,y2:0};let i={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},s=this._getLegendAttributes(t);if(s.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)(0,n.X)(s,this._cacheAttrs)||this._legendComponent.setAttributes((0,p.H)({},s,{defaultSelected:this._selectedData}));else{let t=new(this._getLegendConstructor())((0,p.H)({},s,{defaultSelected:this._selectedData}));t.name="legend",this._legendComponent=t,this.getContainer().add(t),this._option.disableTriggerEvent||this._initEvent(),t.on("*",(t,e)=>this._delegateEvent(this._legendComponent,t,e))}this._cacheAttrs=s;let r=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,a=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if("normal-inline"!==this.layoutType){let t="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",i=this._position,{width:s,height:n}=e,o=0,l=0;"horizontal"===t?"middle"===i?o=(s-r)/2:"end"===i&&(o=s-r):"middle"===i?l=(n-a)/2:"end"===i&&(l=n-a),this._legendComponent.setAttributes({dx:o,dy:l})}return i.x2=i.x1+r,i.y2=i.y1+a,i}onDataUpdate(){var t,e,i;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){let t=this._getLegendAttributes(this.getLayoutRect());(0,n.X)(t,this._cacheAttrs)||this._legendComponent.setAttributes((0,p.H)({},t,{defaultSelected:this._selectedData}))}null===(e=(t=this.effect).onSelectedDataChange)||void 0===e||e.call(t),null===(i=this.getChart())||void 0===i||i.setLayoutTag(!0,null,!1),this.event.emit(d.$7.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}m.specKey="legends"},5022:function(t,e,i){i.d(e,{A:()=>K});var s,r,n=i(6082),a=i(1121),o=i(2937),l=i(1130),h=i(6338),d=i(7602),u=i(6358),c=i(9114),p=i(9478),g=i(6948),m=i(8378),f=i(4154);let v=(t,e)=>{let{series:i,field:s,scale:r}=e,n=s();if(s&&n){let t=1/0,e=-1/0;return i().forEach(i=>{let s=i.getRawDataStatisticsByField(n,!0),r=null==s?void 0:s.min,a=null==s?void 0:s.max;(0,m.Z)(r)&&(t=Math.min(r,t)),(0,m.Z)(a)&&(e=Math.max(a,e))}),[t,e]}if(r){let t=r();return t?t.domain():[]}return[]},_=(t,e)=>{let{selected:i,field:s,data:r,isHierarchyData:n,customFilter:o}=e,l=i(),h=s(),d=n||(t=>t&&t.some(t=>t&&function(t,e="value",i="children"){return!!(0,f.Z)(t)&&!!t.hasOwnProperty(i)&&Array.isArray(t[i])}(t)));if(l===r())return t;if(h&&!(0,a.Z)(l)){let[e,i]=l;return o?o(t,l,h):d(t)?function t(e,i,s,r="value",n="children"){return Array.isArray(e)?e.map(e=>{let a=Object.assign({},e);return Array.isArray(a[n])&&(a[n]=t(a[n],i,s,r,n)),a}).filter(t=>+t[r]>=i&&+t[r]<=s||t[n]&&t[n].length>0):e}(t,+e,+i,h):t.filter(t=>t[h]>=e&&t[h]<=i)}return t};var y=i(325),b=i(6132),x=i(3038),S=i(7636),A=i(3604),k=i(7623),w=i(4546),T=i(3531),C=i(8612),M=i(7578),E=i(3e3);function B(t){return(0,S.Z)(t)?t:[t,t]}function O(t){return t?"ew-resize":"ns-resize"}(s=r||(r={})).innerView="innerView",s.railContainer="sliderRailContainer",s.rail="sliderRail",s.startText="sliderStartText",s.endText="sliderEndText",s.startHandler="sliderStartHandler",s.startHandlerText="startHandlerText",s.endHandler="sliderEndHandler",s.endHandlerText="sliderEndHandlerText",s.track="sliderTrack",s.trackContainer="sliderTrackContainer",(0,i(9895).d)();class I extends E.k{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,y.Z)({},I.defaultAttributes,t)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=t=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(t),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=t=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;let e=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),i=(0,A.Z)(this._isHorizontal?(t.viewX-this._rail.globalAABBBounds.x1)/e:(t.viewY-this._rail.globalAABBBounds.y1)/e,0,1);i!==this._tooltipState.pos&&(this._tooltipState.pos=i,this._tooltipState.value=this.calculateValueByPos(i*e),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{let{tooltip:t}=this.attribute;t&&t.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=t=>{t.stopPropagation(),this._isChanging=!0;let{x:e,y:i}=this.stage.eventPointTransform(t);this._currentHandler=t.target,this._prePos=this._isHorizontal?e:i,"browser"===C.rF.env?(C.rF.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),C.rF.addEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onHandlerPointerUp),this.stage.addEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onHandlerPointerMove=t=>{var e,i;t.stopPropagation(),this._isChanging=!0;let{railWidth:s,railHeight:r,min:n,max:a}=this.attribute;if(a===n)return;let{x:o,y:l}=this.stage.eventPointTransform(t),h,d,u,c=0;this._isHorizontal?(c=(h=o)-this._prePos,d=null===(i=this._currentHandler)||void 0===i?void 0:i.attribute.x,u=s):(c=(h=l)-this._prePos,d=null===(e=this._currentHandler)||void 0===e?void 0:e.attribute.y,u=r);let p=(0,A.Z)(d+c,0,u),g=this.calculateValueByPos(p);"text"===this._currentHandler.type?this._updateHandlerText(this._currentHandler,p,g):this._updateHandler(this._currentHandler,p,g),this._updateTrack(),this._prePos=h,this._dispatchChangeEvent()},this._onHandlerPointerUp=t=>{t.preventDefault(),this._isChanging=!1,this._currentHandler=null,"browser"===C.rF.env?(C.rF.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),C.rF.removeEventListener("pointerup",this._onHandlerPointerUp)):(this.stage.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onHandlerPointerUp),this.stage.removeEventListener("pointerupoutside",this._onHandlerPointerUp))},this._onTrackPointerdown=t=>{t.stopPropagation(),this._isChanging=!0;let{x:e,y:i}=this.stage.eventPointTransform(t);this._prePos=this._isHorizontal?e:i,"browser"===C.rF.env?(C.rF.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),C.rF.addEventListener("pointerup",this._onTrackPointerUp)):(this.stage.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.addEventListener("pointerup",this._onTrackPointerUp),this.stage.addEventListener("pointerupoutside",this._onTrackPointerUp))},this._onTrackPointerMove=t=>{let e,i,s;t.stopPropagation(),this._isChanging=!0;let{railWidth:r,railHeight:n,min:a,max:o,inverse:l}=this.attribute;if(o===a)return;let{startHandler:h,endHandler:d}=this._getHandlers(),{x:u,y:c}=this.stage.eventPointTransform(t);this._isHorizontal?(e=u,i=this._track.attribute.width,s=r):(e=c,i=this._track.attribute.height,s=n);let p=e-this._prePos;if(h){let t=this._isHorizontal?h.attribute.x:h.attribute.y,e=l?(0,A.Z)(t+p,i,s):(0,A.Z)(t+p,0,s-i),r=this.calculateValueByPos(e);this._updateHandler(h,e,r)}if(d){let t=this._isHorizontal?d.attribute.x:d.attribute.y,e=l?(0,A.Z)(t+p,0,s-i):(0,A.Z)(t+p,i,s),r=this.calculateValueByPos(e),n=null==h?void 0:h.attribute;this._updateHandler(d,e,r),this._track.setAttributes(this._isHorizontal?{x:Math.min(n.x,d.attribute.x),width:Math.abs(n.x-d.attribute.x)}:{y:Math.min(n.y,d.attribute.y),height:Math.abs(n.y-d.attribute.y)})}this._prePos=e,this._dispatchChangeEvent()},this._onTrackPointerUp=t=>{t.preventDefault(),this._isChanging=!1,"browser"===C.rF.env?(C.rF.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),C.rF.removeEventListener("pointerup",this._onTrackPointerUp)):(this.stage.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),this.stage.removeEventListener("pointerup",this._onTrackPointerUp),this.stage.removeEventListener("pointerupoutside",this._onTrackPointerUp))},this._onRailPointerDown=t=>{let e,i,s;t.stopPropagation(),this._isChanging=!0;let{railWidth:r,railHeight:n,min:a,max:o}=this.attribute;if(o===a)return;let l=this._startHandler,h=this._endHandler;this._isHorizontal?(e=t.viewX-this._rail.globalAABBBounds.x1,i=null==l?void 0:l.attribute.x,s=null==h?void 0:h.attribute.x):(e=t.viewY-this._rail.globalAABBBounds.y1,i=null==l?void 0:l.attribute.y,s=null==h?void 0:h.attribute.y);let d=this.calculateValueByPos(e);if((0,k.Z)(s)){let t=Math.abs(e-i)>Math.abs(e-s)?h:l;this._updateHandler(t,e,d)}else this._updateHandler(l,e,d);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(t,e){let{layout:i,railWidth:s,railHeight:r,min:n,max:a,inverse:o}=this.attribute,l=0;return l=n===a?"start"===e?0:"end"===e?1:0:(t-n)/(a-n),(o?1-l:l)*("vertical"===i?r:s)}calculateValueByPos(t){let{layout:e,railWidth:i,railHeight:s,min:r,max:n,inverse:a}=this.attribute,o="vertical"===e?s:i;return r+(n-r)*(a?1-t/o:t/o)}setValue(t){let{min:e,max:i}=this.attribute;if(i===e)return;let[s,r]=(0,w.IX)(t),{startHandler:n,endHandler:a}=this._getHandlers();n&&this._updateHandler(n,this.calculatePosByValue(s),s),a&&this._updateHandler(a,this.calculatePosByValue(r),r),this._updateTrack()}render(){var t,e;let i;this.removeAllChild(!0);let{layout:s="horizontal",railWidth:a,railHeight:o,startText:l,endText:h,min:d,max:u,showHandler:c=!0,showTooltip:p}=this.attribute,{value:g}=this.attribute;(0,n.Z)(g)&&(g=[d,u]),this._currentValue={startValue:B(g)[0],endValue:B(g)[1]};let m="horizontal"===s;this._isHorizontal=m;let f=M.i.group({x:0,y:0});f.name=r.innerView,this.add(f),this._innerView=f;let v,_=0;if(l&&l.visible){(v=M.i.text(Object.assign({x:m?0:a/2,y:m?o/2:0,textAlign:m?"start":"center",textBaseline:m?"middle":"top",text:l.text,lineHeight:null===(t=l.style)||void 0===t?void 0:t.fontSize},l.style))).name=r.startText,f.add(v);let e=(0,k.Z)(l.space)?l.space:0;_+=(m?v.AABBBounds.width():v.AABBBounds.height())+e}let y=M.i.group({x:m?_:0,y:m?0:_});f.add(y);let b=M.i.group({x:0,y:0});if(b.name=r.railContainer,this._railContainer=b,y.add(b),this._mainContainer=y,this._renderRail(b),_+=m?a:o,h&&h.visible){let t=(0,k.Z)(h.space)?h.space:0;(i=M.i.text(Object.assign({x:m?_+t:a/2,y:m?o/2:_+t,textAlign:m?"start":"center",textBaseline:m?"middle":"top",text:h.text,lineHeight:null===(e=h.style)||void 0===e?void 0:e.fontSize},h.style))).name=r.endText,f.add(i)}this._renderTrack(b),c&&(this._renderHandlers(y),this._bindEvents()),p&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(t){let{railWidth:e,railHeight:i,railStyle:s,slidable:n}=this.attribute,a="default";!1!==n&&(a="pointer");let o=M.i.rect(Object.assign({x:0,y:0,width:e,height:i,cursor:a},s));return o.name=r.rail,t.add(o),this._rail=o,o}_renderHandlers(t){let{range:e,min:i,max:s,handlerSize:a=14,handlerStyle:o,handlerText:l,railHeight:h,railWidth:d,slidable:u}=this.attribute,{value:c}=this.attribute;(0,n.Z)(c)&&(c=[i,s]);let p=l&&l.visible,g=this._isHorizontal,[m,f]=B(c),v=this.calculatePosByValue(m,e?"start":"end"),_=this._renderHandler(Object.assign({x:g?v:d/2,y:g?h/2:v,size:a,strokeBoundsBuffer:0,cursor:!1===u?"default":O(g)},o));if(_.name=r.startHandler,this._startHandler=_,t.add(_),this._currentValue.startPos=v,p){let i=this._renderHandlerText(m,e?"start":"end");i.name=r.startHandlerText,t.add(i),this._startHandlerText=i}if(e){let e=this.calculatePosByValue(f,"end"),i=this._renderHandler(Object.assign({x:g?e:d/2,y:g?h/2:e,size:a,strokeBoundsBuffer:0,cursor:!1===u?"default":O(g)},o));if(i.name=r.endHandler,this._endHandler=i,t.add(i),this._currentValue.endPos=e,p){let e=this._renderHandlerText(f,"end");e.name=r.endHandlerText,t.add(e),this._endHandlerText=e}}}_renderTrack(t){let e,i,s;let{range:a,min:o,max:l,railHeight:h,railWidth:d,trackStyle:u,railStyle:c,slidable:p,value:g}=this.attribute;if((0,n.Z)(g))a?(e=o,i=l):e=i=o;else if(a){let t=(0,T.Z)(g,o,l);e=t[0],i=t[1]}else e=o,i=(0,A.Z)(g,o,l);let m=this._isHorizontal;a||(e=o);let v=M.i.group({x:0,y:0,width:d,height:h,cornerRadius:null==c?void 0:c.cornerRadius,clip:!0,pickable:!1});v.name=r.trackContainer;let _=(0,f.Z)(a)&&!0===a.draggableTrack;s=!1===p?"default":!1===a||!1===_?"pointer":O(m);let y=this.calculatePosByValue(e,"start"),b=this.calculatePosByValue(i,a?"end":"start"),x=M.i.rect(Object.assign({x:m?Math.min(y,b):0,y:m?0:Math.min(y,b),width:m?Math.abs(b-y):d,height:m?h:Math.abs(b-y),cursor:s},u));x.name=r.track,this._track=x,v.add(x),t.add(v)}_renderHandler(t){return M.i.symbol(t)}_renderHandlerText(t,e){var i,s,r;let{align:n,handlerSize:a=14,handlerText:o={},railHeight:l,railWidth:h,slidable:d}=this.attribute,u=this._isHorizontal,c=this.calculatePosByValue(t,e),p=null!==(i=o.space)&&void 0!==i?i:4,g={text:o.formatter?o.formatter(t):t.toFixed(null!==(s=o.precision)&&void 0!==s?s:0),lineHeight:null===(r=o.style)||void 0===r?void 0:r.lineHeight,cursor:!1===d?"default":O(u)};return u?"top"===n?(g.textBaseline="bottom",g.textAlign="center",g.x=c,g.y=(l-a)/2-p):(g.textBaseline="top",g.textAlign="center",g.x=c,g.y=(l+a)/2+p):("left"===n?(g.textBaseline="middle",g.textAlign="end",g.x=(h-a)/2-p):(g.textBaseline="middle",g.textAlign="start",g.x=(h+a)/2+p),g.y=c),M.i.text(Object.assign(Object.assign({},g),o.style))}_renderTooltip(){var t;let{tooltip:e,railHeight:i,railWidth:s,align:r}=this.attribute;e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;let n=this._isHorizontal?0:s/2,a=this._isHorizontal?i/2:0;if(e&&e.shape){let t=M.i.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:n,y:a,symbolType:"circle"},e.shapeStyle));this._tooltipShape=t,this._mainContainer.add(t)}let o=e&&e.text||{},l=null!==(t=o.space)&&void 0!==t?t:6,h={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(h.x=n,h.y="top"===r?a-i/2-l:a+i/2+l,h.textAlign="center",h.textBaseline="top"===r?"bottom":"top"):(h.y=a,h.x="left"===r?n-s/2-l:a+s/2+l,h.textAlign="left"===r?"end":"start",h.textBaseline="middle");let d=M.i.text(Object.assign(Object.assign({},h),o.style));this._mainContainer.add(d),this._tooltipText=d,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var t,e;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;let{railWidth:i,railHeight:s}=this.attribute,r=this._isHorizontal?i:s,n=this._tooltipState.pos*r,a=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[a]:n});let{align:o}=this.attribute;if(this._tooltipText){let i=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[a]:n,text:i.formatter?i.formatter(this._tooltipState.value):this._isHorizontal||"left"!==o?`≈ ${this._tooltipState.value.toFixed(null!==(e=i.precision)&&void 0!==e?e:0)}`:`${this._tooltipState.value.toFixed(null!==(t=i.precision)&&void 0!==t?t:0)} ≈`})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;let{slidable:t,range:e}=this.attribute;t&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),(0,f.Z)(e)&&e.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_updateTrack(){let{inverse:t,railWidth:e,railHeight:i}=this.attribute,s=this._startHandler,r=this._endHandler;if(this._isHorizontal){let i=null==s?void 0:s.attribute.x;if(r){let t=null==r?void 0:r.attribute.x;this._track.setAttributes({x:Math.min(i,t),width:Math.abs(i-t)})}else t?this._track.setAttributes({x:i,width:e-i}):this._track.setAttributes({width:i})}else{let e=null==s?void 0:s.attribute.y;if(r){let t=null==r?void 0:r.attribute.y;this._track.setAttributes({y:Math.min(e,t),height:Math.abs(e-t)})}else t?this._track.setAttributes({y:e,height:i-e}):this._track.setAttributes({height:e})}}_updateHandler(t,e,i){var s;let n=this._isHorizontal;t.setAttribute(n?"x":"y",e);let a=t.name===r.startHandler?this._startHandlerText:this._endHandlerText;if(a){let{handlerText:t={}}=this.attribute;a.setAttributes({text:t.formatter?t.formatter(i):i.toFixed(null!==(s=t.precision)&&void 0!==s?s:0),[n?"x":"y"]:e})}t.name===r.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_updateHandlerText(t,e,i){var s;let n=this._isHorizontal,{handlerText:a={}}=this.attribute;t.setAttributes({[n?"x":"y"]:e,text:a.formatter?a.formatter(i):i.toFixed(null!==(s=a.precision)&&void 0!==s?s:0)});let o=t.name===r.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[n?"x":"y"]:e}),t.name===r.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_dispatchChangeEvent(){let t=!!this.attribute.range,e=this._currentValue;this._dispatchEvent("change",{value:t?[Math.min(e.endValue,e.startValue),Math.max(e.endValue,e.startValue)]:e.startValue,position:t?[Math.min(e.endPos,e.startPos),Math.max(e.endPos,e.startPos)]:e.startPos})}_dispatchTooltipEvent(t){this._dispatchEvent("sliderTooltip",{type:t,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){let{inverse:t}=this.attribute,e=this._startHandler,i=this._endHandler;return i&&(this._isHorizontal?(!t&&i.attribute.x<(null==e?void 0:e.attribute.x)||t&&i.attribute.x>(null==e?void 0:e.attribute.x))&&([e,i]=[i,e]):(!t&&i.attribute.y<(null==e?void 0:e.attribute.y)||t&&i.attribute.y>(null==e?void 0:e.attribute.y))&&([e,i]=[i,e])),{startHandler:e,endHandler:i}}}I.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}};var R=i(9414),P=i(4725);(0,P.Fw)();class L extends x.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,y.Z)({},L.defaultAttributes,t)),this.name="colorLegend",this._onSliderToolipChange=t=>{let e=this._slider.tooltipShape;if(e&&t.detail&&!(0,n.Z)(t.detail.value)){let i=this._colorScale.scale(t.detail.value);e.setAttribute("fill",i)}this.dispatchEvent(t)},this._onSliderChange=t=>{this._updateColor(),this.dispatchEvent(t)}}setSelected(t){this._slider&&(this._slider.setValue(t),this._updateColor())}_renderContent(){let{colors:t,slidable:e,layout:i,align:s,min:r,max:n,value:a,railWidth:o,railHeight:h,showHandler:d=!0,handlerSize:u,handlerStyle:c,railStyle:p,trackStyle:g,startText:m,endText:f,handlerText:v,showTooltip:_,tooltip:y,inverse:x,disableTriggerEvent:S}=this.attribute,A=[],k=(n-r)/(t.length-1);for(let e=0;e<t.length;e++)A.push(r+k*e);this._colorScale=(new b.f).domain(A,!0).range(t),this._color=this._getTrackColor();let w=new I({x:0,y:0,range:{draggableTrack:!0},slidable:e,layout:i,align:s,min:r,max:n,value:a,railWidth:o,railHeight:h,showHandler:d,handlerSize:u,handlerStyle:c,railStyle:p,trackStyle:Object.assign({fill:this._color},g),startText:m,endText:f,handlerText:v,showTooltip:_,tooltip:y,disableTriggerEvent:S,inverse:x});this._innerView.add(w),this._slider=w,w.translateTo(0-w.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",R.$5):0)-w.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){let{colors:t,layout:e,inverse:i}=this.attribute;if((0,a.Z)(t))return;let s=t.length;if(1===s)return t[0];let r=[];for(let e=0;e<s;e++){let i=e/(s-1);r.push({offset:i,color:t[e]})}let n="horizontal"===e,o={gradient:"linear",stops:r,x0:0,y0:0,x1:n?1:0,y1:n?0:1};return i&&(n?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var t;let{layout:e="horizontal",colors:i,railWidth:s,railHeight:r}=this.attribute,{startHandler:n,endHandler:a,track:o,attribute:l}=this._slider,{startValue:h,endValue:d,startPos:u,endPos:c}=this._slider.currentValue,p=null===(t=l.handlerStyle)||void 0===t?void 0:t.fill;if(n&&!p){let t=this._colorScale.scale(h);n.setAttribute("fill",t)}if(a&&!p){let t=this._colorScale.scale(d);a.setAttribute("fill",t)}let g="horizontal"===e?s:r;if(Math.abs(u-c)!==g&&i&&i.length>1){let t=this._color.stops,e=Math.min(u,c)/g,i=Math.max(u,c)/g,s=i-e,r=t.filter(t=>t.offset>e&&t.offset<i),n=Math.min(h,d),a=Math.max(h,d),l=this._colorScale.scale(n),p=this._colorScale.scale(a),m=[{offset:0,color:l}];r.forEach(t=>{m.push({offset:(t.offset-e)/s,color:t.color})}),m.push({offset:1,color:p}),o.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:m}))}}}L.defaultAttributes={layout:"horizontal",title:{align:"start",space:R.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}},(0,P.Vo)();class D extends x.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,y.Z)({},D.defaultAttributes,t)),this.name="sizeLegend",this._onSliderChange=t=>{this.dispatchEvent(t)},this._onSliderToolipChange=t=>{this.dispatchEvent(t)}}setSelected(t){this._slider&&this._slider.setValue(t)}_renderContent(){let{slidable:t,layout:e,align:i,min:s,max:r,value:n,railWidth:a,railHeight:o,showHandler:h=!0,handlerSize:d,handlerStyle:u,railStyle:c,trackStyle:p,startText:g,endText:m,handlerText:f,showTooltip:v,tooltip:_,sizeBackground:y,disableTriggerEvent:b,inverse:x}=this.attribute,S=M.i.group({x:0,y:0});this._innerView.add(S);let A=new I({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:t,layout:e,align:i,min:s,max:r,value:n,railWidth:a,railHeight:o,showHandler:h,handlerSize:d,handlerStyle:Object.assign({symbolType:function(t="bottom"){let e=0;return"top"===t?`
    M${e},-6L${e-3.5},-2.5
    v5
    h7
    v-5
    Z
`:"left"===t?(e=1,`
    M${e-6},0L${e-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):"right"===t?(e=-1,`
    M${e+6},0L${e+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${e},6L${e-3.5},2.5
    v-5
    h7
    v5
    Z
`}(i)},u),railStyle:c,trackStyle:p,startText:g,endText:m,handlerText:f,showTooltip:v,tooltip:_,disableTriggerEvent:b,inverse:x});S.add(A);let k,w=0;"horizontal"===e?"top"===i?(k=`M0,0L${a},0L${x?0:a},12Z`,w=o):(k=`M0,12L${a},12L${x?0:a},0Z`,A.setAttribute("y",12)):"left"===i?k=`M${a},0L${a+12},${x?0:o}L${a},${o}Z`:(k=`M0,${x?0:o}L12,${o}L12,0Z`,A.setAttribute("x",12));let T=M.i.path(Object.assign(Object.assign({x:0,y:w,path:k},y),{zIndex:0}));S.add(T);let C=this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",R.$5):0;S.translate(0-S.AABBBounds.x1,C-S.AABBBounds.y1),this._slider=A}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}D.defaultAttributes={layout:"horizontal",title:{align:"start",space:R.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};var Z=i(4218),F=i(123),j=i(1106),H=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let z={color:L,size:D};var N=i(2754),V=i(3722),U=i(8469),G=i(2990),W=i(2096);let X=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],Y=[2,10];class $ extends N.q{static getSpecInfo(t){let e=(0,W.ts)(t,this.specKey,this.type,t=>{var e;return"color"===(e=t.type)||"size"===e});return e&&e.forEach(t=>{t.type="color"===t.spec.type?d.L.colorLegend:d.L.sizeLegend}),e}constructor(t,e){super(t,e),this.type=d.L.colorLegend,this.name=d.L.colorLegend;let i="color"===this._spec.type?d.L.colorLegend:d.L.sizeLegend;this.type=i,this.name=i}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(t){super.init(t),(0,c.xV)(this._regions,t=>{t.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:t.isHierarchyData,customFilter:this._spec.customFilter},level:G.BV.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){let t=this._option.globalScale,e=this._spec.scale;return e||(e=this._legendType),t.getScale(e)}_initLegendData(){(0,u.U)(this._option.dataSet,"continuousLegendFilter",_),(0,u.U)(this._option.dataSet,"continuousLegendDataMake",v);let t=new h.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"continuousLegendDataMake",options:{series:()=>(0,c.gU)(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),t}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(t){var e,i,s,r;if((null===(e=t.title)||void 0===e?void 0:e.visible)&&(0,n.Z)(t.title.text)&&(0,n.Z)(null===(i=t.title.style)||void 0===i?void 0:i.text)){let e=this._field;if(e){let i=null===(r=null===(s=this._regions)||void 0===s?void 0:s[0])||void 0===r?void 0:r.getSeries()[0];if(!i)return;return void(t.title.text=(0,p.tW)(i.getRawData(),e))}let i=this._spec.scale;i||(i=this._legendType);let n=this._option.globalScale.getScaleSpec(i);if(!(0,g.S5)(null==n?void 0:n.domain))return;let a=n.domain[0];if(0===a.fields.length)return;t.title.text=(0,p.tW)(this._option.dataSet.getDataView(a.dataId),a.fields[0])}}_getLegendAttributes(t){var e,i;let s="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",r="horizontal"===s?"bottom":this.layoutOrient,n=[],o=this._getScaleInGlobal();o&&"linear"===o.type&&(n=o.range()),(0,a.Z)(n)&&(n="color"===this._legendType?X:Y);let l=null!==(e=this._legendData.getLatestData()[0])&&void 0!==e?e:0,h=null!==(i=this._legendData.getLatestData()[1])&&void 0!==i?i:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(l=Math.min(0,this._legendData.getLatestData()[0]),h=0===this._legendData.getLatestData()[0]?1:Math.max(0,this._legendData.getLatestData()[0]));let d=Object.assign({layout:s,align:r,zIndex:this.layoutZIndex,min:l,max:h,value:this._spec.defaultSelected,["color"===this._legendType?"colors":"sizeRange"]:n},function(t){let e=(0,Z.H)({},t),{title:i={},handler:s={},rail:r={},track:n={},startText:o,endText:l,handlerText:h,sizeBackground:d,background:u={},type:c,id:p,visible:g,orient:m,position:f,data:v,defaultSelected:_,field:y,filter:b,regionId:x,regionIndex:S,seriesIndex:A,seriesId:w,padding:T}=e,C=H(e,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(C.title=(0,j.q)(i)),C.showHandler=!1!==s.visible,(0,a.Z)(s.style)||(C.handlerStyle=(0,F.h_)(s.style)),(0,k.Z)(r.width)&&(C.railWidth=r.width),(0,k.Z)(r.height)&&(C.railHeight=r.height),(0,a.Z)(r.style)||(C.railStyle=(0,F.h_)(r.style)),(0,a.Z)(n.style)||(C.trackStyle=(0,F.h_)(n.style)),C.startText=(0,F.ro)(o),C.endText=(0,F.ro)(l),C.handlerText=(0,F.ro)(h),(0,a.Z)(d)||(C.sizeBackground=(0,F.h_)(d)),u.visible&&!(0,a.Z)(u.style)&&((0,Z.H)(C,u.style),(0,k.Z)(u.padding)&&(C.padding=u.padding)),C}(this._spec));return this._addDefaultTitleText(d),d}_getLegendConstructor(){return z[this._legendType]}_initEvent(){if(this._legendComponent){let t=!1!==this._spec.filter;this._legendComponent.addEventListener("change",(0,o.Z)(e=>{let i=(0,l.Z)(e,"detail.value");t&&this.setSelectedData(i),this.event.emit(V.$7.legendFilter,{model:this,value:i,event:e})},30))}}}$.specKey="legends",$.type=d.L.continuousLegend;let K=()=>{U.F.registerComponent($.type,$)}},7378:function(t,e,i){i.d(e,{T:()=>q});var s=i(6082),r=i(9038),n=i(1130),a=i(8378),o=i(6338),l=i(7602),h=i(1121),d=i(7623),u=i(1960),c=i(4218),p=i(123),g=i(1106),m=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i},f=i(6358),v=i(9114),_=i(9478),y=i(6948),b=i(9414),x=i(325),S=i(7636),A=i(4546),k=i(4154),w=i(3215),T=i(6689),C=i(5859),M=i(3604),E=i(7578),B=i(3038),O=i(1601),I=i(3e3),R=i(8144),P=i(6462);let L={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};(0,P.s)();class D extends I.k{getCurrent(){return this._current}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,x.Z)({},D.defaultAttributes,t)),this.name="pager",this._current=1,this._onHover=t=>{let e=t.target;e.hasState("disable")||e.addState("hover")},this._onUnHover=t=>{t.target.removeState("hover")},this._onClick=t=>{let e=t.target;if("preHandler"===e.name){if(1===this._current)return;this._current-=1,1===this._current?e.addState("disable"):e.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:t})}if("nextHandler"===e.name){if(this._current===this._total)return;this._current+=1,this._current===this._total?e.addState("disable"):e.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:t})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var t,e,i;this._reset();let{layout:s="horizontal",handler:r=L,total:n,defaultCurrent:a=1,textStyle:o,padding:l=0}=this.attribute;this._current=a;let h=(0,w.o)(l),d="horizontal"===s,u=E.i.group({x:0,y:0}),c=r.style||{},p=c.size||15,g=null!==(t=r.space)&&void 0!==t?t:8,m=r.state||{},{preShape:f,nextShape:v}=r;f||(f=d?"triangleLeft":"triangleUp"),v||(v=d?"triangleRight":"triangleDown");let _=E.i.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},c),{x:0,y:0,symbolType:f,size:p}));_.states=m,_.name="preHandler",this.preHandler=_,u.add(_);let{width:y,height:b}=(0,R.fe)(this._getPageText(n),Object.assign({textAlign:"center",textBaseline:"middle"},o),null===(i=null===(e=this.stage)||void 0===e?void 0:e.getTheme())||void 0===i?void 0:i.text),x=(0,O.Z)(p)?p:p[0],S=(0,O.Z)(p)?p:p[1],A=E.i.text(Object.assign({x:d?x/2+g+y/2:0,y:d?0:S/2+g+b/2,text:this._getPageText(a),textAlign:"center",textBaseline:"middle",lineHeight:null==o?void 0:o.fontSize},o));this.text=A,u.add(A);let k=E.i.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},c),{x:d?x+2*g+y:0,y:d?0:S+2*g+b,symbolType:v,size:p}));k.name="nextHandler",k.states=m,this.nextHandler=k,u.add(k),1===this._total?(_.addState("disable"),k.addState("disable")):1===this._current?_.addState("disable"):this._current===n&&k.addState("disable");let T=u.AABBBounds,C=T.width(),M=T.height();u.translateTo(0-T.x1+h[3],0-T.y1+h[0]),this.add(u),this.attribute.width=C+h[1]+h[3],this.attribute.height=M+h[0]+h[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(t){let{pageFormatter:e}=this.attribute;return e?(0,r.Z)(e)?e(t,this._total):`${e}`.replace("{current}",`${t}`).replace("{total}",`${this._total}`):`${t}/${this._total}`}setTotal(t){t!==this.attribute.total&&(this._total=t,1!==this._current&&this._current<=t?this.setAttributes({total:t,defaultCurrent:this._current}):this.setAttribute("total",t))}}D.defaultAttributes={handler:L,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};var Z=i(4725),F=i(5767),j=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let H={[b.uu.focus]:{},[b.uu.selected]:{},[b.uu.selectedHover]:{},[b.uu.unSelected]:{},[b.uu.unSelectedHover]:{}};(0,Z.cV)();class z extends B.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,x.Z)({},z.defaultAttributes,t)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._contentMaxHeight=0,this._onHover=t=>{let e=t.target;if(e&&e.name&&e.name.startsWith(b.GN.item)){let i=e.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===i.id)return;this._unHover(this._lastActiveItem,t)}this._hover(i,t)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,t),this._lastActiveItem=null)},this._onUnHover=t=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,t),this._lastActiveItem=null)},this._onClick=t=>{var e,i,s,r;let n=t.target;if(n&&n.name&&n.name.startsWith(b.GN.item)){let a=n.delegate,{selectMode:o="multiple"}=this.attribute;if(n.name===b.GN.focus||"focus"===o){let s=a.hasState(b.uu.focus);a.toggleState(b.uu.focus),s?null===(e=this._itemsContainer)||void 0===e||e.getChildren().forEach(e=>{this._removeLegendItemState(e,[b.uu.unSelected,b.uu.unSelectedHover,b.uu.focus],t),this._setLegendItemState(e,b.uu.selected,t)}):(this._setLegendItemState(a,b.uu.selected,t),this._removeLegendItemState(a,[b.uu.unSelected,b.uu.unSelectedHover],t),null===(i=this._itemsContainer)||void 0===i||i.getChildren().forEach(e=>{a!==e&&(this._removeLegendItemState(e,[b.uu.selected,b.uu.selectedHover,b.uu.focus],t),this._setLegendItemState(e,b.uu.unSelected,t))}))}else{null===(s=this._itemsContainer)||void 0===s||s.getChildren().forEach(t=>{t.removeState(b.uu.focus)});let{allowAllCanceled:e=!0}=this.attribute,i=a.hasState(b.uu.selected),n=this._getSelectedLegends();if("multiple"===o){if(!1===e&&i&&1===n.length)return void this._dispatchLegendEvent(b.dk.legendItemClick,a,t);i?(this._removeLegendItemState(a,[b.uu.selected,b.uu.selectedHover],t),this._setLegendItemState(a,b.uu.unSelected,t)):(this._setLegendItemState(a,b.uu.selected,t),this._removeLegendItemState(a,[b.uu.unSelected,b.uu.unSelectedHover],t))}else this._setLegendItemState(a,b.uu.selected,t),this._removeLegendItemState(a,[b.uu.unSelected,b.uu.unSelectedHover],t),null===(r=this._itemsContainer)||void 0===r||r.getChildren().forEach(e=>{a!==e&&(this._removeLegendItemState(e,[b.uu.selected,b.uu.selectedHover],t),this._setLegendItemState(e,b.uu.unSelected,t))})}this._dispatchLegendEvent(b.dk.legendItemClick,a,t)}}}render(){super.render(),this._lastActiveItem=null}setSelected(t){var e;(null===(e=this._itemsContainer)||void 0===e?void 0:e.getChildren()).forEach(e=>{let i=e.data;t.includes(i.label)?(this._setLegendItemState(e,b.uu.selected),this._removeLegendItemState(e,[b.uu.unSelected,b.uu.unSelectedHover])):(this._removeLegendItemState(e,[b.uu.selected,b.uu.selectedHover]),this._setLegendItemState(e,b.uu.unSelected))})}_renderItems(){let{item:t={},maxCol:e=1,maxRow:i=2,maxWidth:s,defaultSelected:r,lazyload:n,autoPage:a}=this.attribute,{spaceCol:o=b.Nu,spaceRow:l=b.so,verticalAlign:h="middle"}=t,u=this._itemsContainer,{items:c,isHorizontal:p,startIndex:g,isScrollbar:m}=this._itemContext,f=m?1:p?i:e,v=this._contentMaxHeight,_,{doWrap:y,maxWidthInCol:x,startX:A,startY:k,pages:w}=this._itemContext,T=0,C=0,M=[];for(let t=g,e=c.length;t<e&&!(n&&w>this._itemContext.currentPage*f);t++){n&&(this._itemContext.startIndex=t+1),(_=c[t]).id||(_.id=_.label),_.index=t;let e=!0;(0,S.Z)(r)&&(e=r.includes(_.label));let i=this._renderEachItem(_,e,t,c),g=i.attribute.width,f=i.attribute.height;this._itemHeight=Math.max(this._itemHeight,f),x=Math.max(g,x),this._itemMaxWidth=Math.max(g,this._itemMaxWidth),p?((0,d.Z)(s)&&(m&&a?y=(w=Math.ceil((A+g)/s))>1:A+g>s&&(y=!0,A>0&&("middle"!==h&&"bottom"!==h||M.forEach(t=>{t.setAttributes({y:t.attribute.y+(C-t.attribute.height)/("middle"===h?2:1)})}),w+=1,A=0,k+=C+l,C=0,M.length=0))),0===A&&0===k||i.setAttributes({x:A,y:k}),A+=o+g,C=Math.max(C,f),M.push(i)):((0,d.Z)(v)&&(m&&a?y=(w=Math.ceil((k+f)/v))>1:v<=f?(w+=1,y=!0,k=0,t>0&&(A+=T+o)):v<k+f&&(w+=1,y=!0,k=0,A+=x+o,x=0)),0===A&&0===k||i.setAttributes({x:A,y:k}),k+=l+f),u.add(i),T=g}return p&&("middle"===h||"bottom"===h)&&M.forEach(t=>{t.setAttributes({y:t.attribute.y+(C-t.attribute.height)/("middle"===h?2:1)})}),this._itemContext.doWrap=y,this._itemContext.startX=A,this._itemContext.startY=k,this._itemContext.maxWidthInCol=x,this._itemContext.pages=w,this._itemContext.maxPages=f,m&&(this._itemContext.totalPage=w),n||(this._itemContext.startIndex=c.length),this._itemContext}_renderContent(){let{item:t={},items:e,reversed:i,maxWidth:s,maxHeight:r}=this.attribute;if(!1===t.visible||(0,h.Z)(e))return;let a=e;i&&(a=null==e?void 0:e.reverse()),this._contentMaxHeight=Math.max(0,r-this._parsedPadding[0]-this._parsedPadding[2]);let o=E.i.group({x:0,y:0});this._itemsContainer=o;let{layout:l,autoPage:u}=this.attribute,{maxWidth:c,width:p,height:g}=t,m=[];(0,d.Z)(c)&&m.push(c),(0,d.Z)(p)&&m.push(p),m.length&&((0,d.Z)(s)&&m.push(s),this._itemWidthByUser=(0,A.iH)(m)),(0,d.Z)(g)&&(this._itemHeightByUser=g);let f=this.attribute.pager;this._itemContext={currentPage:f&&f.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:a,isHorizontal:"horizontal"===l,totalPage:1/0,isScrollbar:f&&"scrollbar"===f.type,clipContainer:void 0},this._itemContext=this._renderItems();let v=!1;this._itemContext.doWrap&&u&&this._itemContext.pages>this._itemContext.maxPages&&(v=this._renderPagerComponent()),v||(o.setAttribute("y",this._title?this._title.AABBBounds.height()+(0,n.Z)(this.attribute,"title.space",8):0),this._innerView.add(o))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;let{hover:t=!0,select:e=!0}=this.attribute;if(t){let e="pointermove",i="pointerleave";(0,k.Z)(t)&&(t.trigger&&(e=t.trigger),t.triggerOff&&(i=t.triggerOff)),this._itemsContainer.addEventListener(e,this._onHover),this._itemsContainer.addEventListener(i,this._onUnHover)}if(e){let t="pointerdown";(0,k.Z)(e)&&e.trigger&&(t=e.trigger),this._itemsContainer.addEventListener(t,this._onClick)}}_autoEllipsis(t,e,i,s){var r,n;let{label:a,value:o}=this.attribute.item,l=s.AABBBounds,h=i.AABBBounds,d=l.width(),u=h.width(),c=!1;"labelFirst"===t?u>e?c=!0:s.setAttribute("maxLineWidth",e-u):"valueFirst"===t?d>e?c=!0:i.setAttribute("maxLineWidth",e-d):d+u>e&&(c=!0),c&&(s.setAttribute("maxLineWidth",Math.max(e*(null!==(r=a.widthRatio)&&void 0!==r?r:.5),e-u)),i.setAttribute("maxLineWidth",Math.max(e*(null!==(n=o.widthRatio)&&void 0!==n?n:.5),e-d)))}_renderEachItem(t,e,i,r){var a,o;let l;let{id:h,label:u,value:c,shape:p}=t,{padding:g=0,focus:m,focusIconStyle:f,align:v,autoEllipsisStrategy:_}=this.attribute.item,{shape:y,label:x,value:A,background:k}=this.attribute.item,T=this._handleStyle(y,t,e,i,r),C=this._handleStyle(x,t,e,i,r),M=this._handleStyle(A,t,e,i,r),B=this._handleStyle(k,t,e,i,r),O=(0,w.o)(g);!1===k.visible?(l=E.i.group({x:0,y:0,cursor:null===(a=B.style)||void 0===a?void 0:a.cursor}),this._appendDataToShape(l,b.GN.item,t,l)):(l=E.i.group(Object.assign({x:0,y:0},B.style)),this._appendDataToShape(l,b.GN.item,t,l,B.state)),l.id=`${null!=h?h:u}-${i}`,l.addState(e?b.uu.selected:b.uu.unSelected);let I=E.i.group({x:0,y:0,pickable:!1});l.add(I);let P,L=0,D=0,Z=0;if(y&&!1!==y.visible){let i=(0,n.Z)(T,"style.size",b.SX);D=(0,S.Z)(i)?i[0]||0:i,Z=(0,n.Z)(y,"space",b.g);let r=E.i.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},p),T.style));Object.keys(T.state||{}).forEach(t=>{let e=T.state[t].fill||T.state[t].stroke;p.fill&&(0,s.Z)(T.state[t].fill)&&e&&(T.state[t].fill=e),p.stroke&&(0,s.Z)(T.state[t].stroke)&&e&&(T.state[t].stroke=e)}),this._appendDataToShape(r,b.GN.itemShape,t,l,T.state),r.addState(e?b.uu.selected:b.uu.unSelected),I.add(r)}let F=0;if(m){let e=(0,n.Z)(f,"size",b.SX);P=E.i.symbol(Object.assign(Object.assign({x:0,y:-e/2-1,strokeBoundsBuffer:0,boundsPadding:O},f),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(P,b.GN.focus,t,l),F=e}let j=x.formatMethod?x.formatMethod(u,t,i):u,H=Object.assign(Object.assign({x:D/2+Z,y:0,textAlign:"start",textBaseline:"middle",lineHeight:null===(o=C.style)||void 0===o?void 0:o.fontSize},C.style),{text:j,_originText:x.formatMethod?u:void 0}),z=(0,R.vS)(H);this._appendDataToShape(z,b.GN.itemLabel,t,l,C.state),z.addState(e?b.uu.selected:b.uu.unSelected),I.add(z);let N=(0,n.Z)(x,"space",b.DN);if((0,d.Z)(c)){let s=(0,n.Z)(A,"space",m?b.qL:0),r=A.formatMethod?A.formatMethod(c,t,i):c,a=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:M.style.fontSize},M.style),{text:r,_originText:A.formatMethod?c:void 0}),o=(0,R.vS)(a);if(this._appendDataToShape(o,b.GN.itemValue,t,l,M.state),o.addState(e?b.uu.selected:b.uu.unSelected),this._itemWidthByUser){let t=this._itemWidthByUser-O[1]-O[3]-D-Z-N-F-s;this._autoEllipsis(_,t,z,o),A.alignRight?o.setAttributes({textAlign:"right",x:this._itemWidthByUser-D/2-O[1]-O[3]-F-s}):o.setAttribute("x",N+(z.AABBBounds.empty()?0:z.AABBBounds.x2))}else o.setAttribute("x",N+(z.AABBBounds.empty()?0:z.AABBBounds.x2));L=s+(o.AABBBounds.empty()?0:o.AABBBounds.x2),I.add(o)}else this._itemWidthByUser&&z.setAttribute("maxLineWidth",this._itemWidthByUser-O[1]-O[3]-D-Z-F),L=N+(z.AABBBounds.empty()?0:z.AABBBounds.x2);P&&(P.setAttribute("x",L),I.add(P));let V=I.AABBBounds,U=V.width();if("right"===v){let t=V.x2,e=V.x1;I.forEachChildren((i,s)=>{"symbol"!==i.type&&"right"!==i.attribute.textAlign||i===P?i.setAttribute("x",e+t-i.attribute.x-i.AABBBounds.width()):"symbol"!==i.type?i.setAttributes({x:e+t-i.attribute.x,textAlign:"left"}):i.setAttribute("x",e+t-i.attribute.x)})}let G=V.height(),W=(0,d.Z)(this.attribute.item.width)?this.attribute.item.width:U+O[1]+O[3],X=this._itemHeightByUser||G+O[0]+O[2];return l.attribute.width=W,l.attribute.height=X,P&&P.setAttribute("visible",!1),I.translateTo(-V.x1+O[3],-V.y1+O[0]),l}_createPager(t){var e,i;let{disableTriggerEvent:s,maxRow:r}=this.attribute,n=t=>t<=99?99:t<=999?999:9999;return new D(this._itemContext.isHorizontal?Object.assign(Object.assign({layout:1===r?"horizontal":"vertical",total:n(this._itemContext.pages)},(0,x.Z)({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},t)),{defaultCurrent:null===(e=this.attribute.pager)||void 0===e?void 0:e.defaultCurrent,disableTriggerEvent:s}):Object.assign({layout:"horizontal",total:n(this._itemContext.pages),disableTriggerEvent:s,defaultCurrent:null===(i=this.attribute.pager)||void 0===i?void 0:i.defaultCurrent},t))}_createScrollbar(t,e){let{disableTriggerEvent:i}=this.attribute;return new F.B(this._itemContext.isHorizontal?Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:i,range:[0,.5],height:!1===t.visible?0:12},t),{width:e}):Object.assign(Object.assign({direction:"vertical",width:!1===t.visible?0:12,range:[0,.5]},t),{height:e,disableTriggerEvent:i}))}_updatePositionOfPager(t,e,i){let{pager:s}=this.attribute,{totalPage:r,isHorizontal:n}=this._itemContext,a=s&&s.position||"middle";if(this._pagerComponent.setTotal(r),n){let s;s="start"===a?t:"end"===a?t+i-this._pagerComponent.AABBBounds.height()/2:t+i/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:e-this._pagerComponent.AABBBounds.width(),y:s})}else{let t;t="start"===a?0:"end"===a?e-this._pagerComponent.AABBBounds.width():(e-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:t,y:i-this._pagerComponent.AABBBounds.height()})}}_computeScrollbarDelta(){let t;let{isHorizontal:e,clipContainer:i}=this._itemContext,s=this._itemsContainer.AABBBounds,r=i.AABBBounds;return e?r.width()/s.width():r.height()/s.height()}_updatePositionOfScrollbar(t,e,i){let{isHorizontal:s,currentPage:r,totalPage:n}=this._itemContext,a=(r-1)/n;this._pagerComponent.setScrollRange([a,a+this._computeScrollbarDelta()]),s?this._pagerComponent.setAttributes({x:0,y:i+e}):this._pagerComponent.setAttributes({x:t,y:i})}_bindEventsOfPager(t,e){let{animation:i=!0,animationDuration:s=450,animationEasing:r="quadIn"}=this.attribute.pager||{},n=this._itemContext.isScrollbar?t=>{let{value:e}=t.detail;return 0===e[0]?1:1===e[1]?this._itemContext.totalPage:e[0]*this._itemContext.totalPage+1}:t=>t.detail.current,a=a=>{let o=n(a);if(o!==this._itemContext.currentPage){if(this._itemContext.currentPage=o,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();let t=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);if(this._itemContext.totalPage=t,this._itemContext.isScrollbar&&this._pagerComponent){let t=this._computeScrollbarDelta(),[e]=this._pagerComponent.getScrollRange();this._pagerComponent.setScrollRange([e,e+t])}}if(this._itemContext.isScrollbar){let[t]=this._pagerComponent.getScrollRange(),n=(this._itemContext.isHorizontal?this._itemsContainer.AABBBounds.width():this._itemsContainer.AABBBounds.height())*t;this.updateScrollMask(),i?this._itemsContainer.animate().to({[e]:-n},s,r):this._itemsContainer.setAttribute(e,-n)}else i?this._itemsContainer.animate().to({[e]:-(o-1)*t},s,r):this._itemsContainer.setAttribute(e,-(o-1)*t)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",a),this._pagerComponent.addEventListener("scrollUp",a),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",t=>t.nativeEvent.preventDefault()),this.addEventListener("wheel",(0,T.Z)(t=>{let e=this._pagerComponent,i=e.getScrollRange(),{direction:s}=e.attribute,{width:r,height:n}=e.getSliderRenderBounds(),a="vertical"===s?t.deltaY/n:t.deltaX/r;e.setScrollRange([i[0]+a,i[1]+a],!0),this.updateScrollMask()},50)))):(this._pagerComponent.addEventListener("toPrev",a),this._pagerComponent.addEventListener("toNext",a))}_renderPager(){let t=this._title?this._title.AABBBounds.height()+(0,n.Z)(this.attribute,"title.space",8):0,{maxWidth:e,maxCol:i=1,maxRow:s=2,item:r={},pager:a={}}=this.attribute,{spaceCol:o=b.Nu,spaceRow:l=b.so}=r,h=this._itemsContainer,{space:d=b.Th,defaultCurrent:u=1}=a,c=j(a,["space","defaultCurrent"]),{isHorizontal:p}=this._itemContext,g=this._contentMaxHeight,m,f=0,v=0,_=0,y=0,x=0,S=0,A=1;if(p){if(v=(s-1)*l+this._itemHeight*s,f=e,m=this._createPager(c),this._pagerComponent=m,this._innerView.add(m),(_=e-m.AABBBounds.width()-d)<=0)return this._innerView.removeChild(m),!1;h.getChildren().forEach((t,e)=>{let{width:i,height:s}=t.attribute;_<x+i&&(x=0,S+=s+l,A+=1),e>0&&t.setAttributes({x:x,y:S}),x+=o+i}),this._itemContext.startX=x,this._itemContext.startY=S,this._itemContext.pages=A;let i=Math.ceil(A/s);this._itemContext.totalPage=i,this._updatePositionOfPager(t,f,v)}else{if(f=this._itemMaxWidth*i+(i-1)*o,v=g,_=f,m=this._createPager(c),this._pagerComponent=m,this._innerView.add(m),(y=g-m.AABBBounds.height()-d-t)<=0)return this._innerView.removeChild(m),!1;h.getChildren().forEach((t,e)=>{let{height:i}=t.attribute;y<S+i&&(S=0,x+=this._itemMaxWidth+o,A+=1),e>0&&t.setAttributes({x:x,y:S}),S+=l+i});let e=Math.ceil(A/i);this._itemContext.totalPage=e,this._updatePositionOfPager(t,f,v)}u>1&&(p?h.setAttribute("y",-(u-1)*(v+l)):h.setAttribute("x",-(u-1)*(f+o)));let k=E.i.group({x:0,y:t,width:p?_:f,height:p?v:y,clip:!0,pickable:!1});return k.add(h),this._innerView.add(k),this._itemContext.clipContainer=k,this._bindEventsOfPager(p?v+l:f+o,p?"y":"x"),!0}_renderScrollbar(){var t;let e=this._title?this._title.AABBBounds.height()+(0,n.Z)(this.attribute,"title.space",8):0,{maxWidth:i,item:s={},pager:r={}}=this.attribute,{spaceCol:a=b.Nu,spaceRow:o=b.so}=s,l=this._itemsContainer,{space:h=b.Th,defaultCurrent:d=1}=r,u=j(r,["space","defaultCurrent"]),{isHorizontal:c}=this._itemContext,p=this._contentMaxHeight,g,m=0,f=0,v=0,_=1;if(c)m=i,f=this._itemHeight,g=this._createScrollbar(u,m),this._pagerComponent=g,this._innerView.add(g);else{if(f=p-e,m=this._itemMaxWidth,g=this._createScrollbar(u,f),this._pagerComponent=g,this._innerView.add(g),f<=0)return this._innerView.removeChild(g),!1;let t=l.getChildren(),i=t.map(t=>t.attribute.height);if(1===i.length||i.every(t=>t===i[0])){let e=i[0],s=Math.floor(f/(o+e));f=s*(o+e),_=Math.ceil(t.length/s)}else t.forEach((t,e)=>{let{height:i}=t.attribute,s=_,r=v;_=Math.floor((v+i)/f)+1,v+=o+i,s!==_&&e===l.getChildren().length-1&&v-f>=1/3*i&&(f=r+i,_-=1)});this._itemContext.totalPage=_,this._itemContext.pages=_}if(d>1){if(c){let t=this._itemsContainer.AABBBounds.width()-m;l.setAttribute("x",-Math.min((d-1)*(m+a),t))}else{let t=this._itemsContainer.AABBBounds.height()-f;l.setAttribute("y",-Math.min((d-1)*(f+o),t))}}let y=E.i.group({x:0,y:e,width:m,height:f,clip:!0,pickable:!1});return y.add(l),this._innerView.add(y),this._itemContext.clipContainer=y,this._updatePositionOfScrollbar(m,f,e),(null===(t=r.scrollMask)||void 0===t?void 0:t.visible)&&this.renderScrollMask(y),this._bindEventsOfPager(c?m:f,c?"x":"y"),!0}renderScrollMask(t){let{scrollMask:e={}}=this.attribute.pager,{visible:i=!0,gradientLength:s=16,gradientStops:r}=e;if(!i||!r)return;let n=t.AABBBounds.width(),a=t.AABBBounds.height(),o=this._itemContext.isHorizontal?n:a,l=r.map(t=>({offset:s*t.offset/o,color:t.color})),h=r.map(t=>({offset:(o-s*t.offset)/o,color:t.color})),d=E.i.rect({x:0,y:0,width:n,height:a});this._scrollMask=d,this._scrollMaskContext={startStops:l,endStops:h},this.updateScrollMask(),t.add(d)}updateScrollMask(){if(!this._scrollMask||!this._pagerComponent||!this._itemContext.isScrollbar)return;let[t,e]=this._pagerComponent.getScrollRange(),i=[];(0,C.Yt)((0,M.Z)(e,0,1),1)||i.push(...this._scrollMaskContext.endStops),(0,C.Yt)((0,M.Z)(t,0,1),0)||i.push(...this._scrollMaskContext.startStops),i.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:i}}):this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:0,y1:1,stops:i}}))}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(t,e){this._lastActiveItem=t,t.hasState(b.uu.selected)?this._setLegendItemState(t,b.uu.selectedHover,e):this._setLegendItemState(t,b.uu.unSelectedHover,e);let i=t.getChildren()[0].find(t=>t.name===b.GN.focus,!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(b.dk.legendItemHover,t,e)}_unHover(t,e){let i=!1;(t.hasState(b.uu.unSelectedHover)||t.hasState(b.uu.selectedHover))&&(i=!0),t.removeState(b.uu.unSelectedHover),t.removeState(b.uu.selectedHover),t.getChildren()[0].getChildren().forEach(t=>{!i&&(t.hasState(b.uu.unSelectedHover)||t.hasState(b.uu.selectedHover))&&(i=!0),t.removeState(b.uu.unSelectedHover),t.removeState(b.uu.selectedHover)});let s=t.getChildren()[0].find(t=>t.name===b.GN.focus,!1);s&&s.setAttribute("visible",!1),i&&this._dispatchLegendEvent(b.dk.legendItemAttributeUpdate,t,e),this._dispatchLegendEvent(b.dk.legendItemUnHover,t,e)}_setLegendItemState(t,e,i){let s=!1;t.hasState(e)||(s=!0),t.addState(e,!0),t.getChildren()[0].getChildren().forEach(t=>{t.name!==b.GN.focus&&(s||t.hasState(e)||(s=!0),t.addState(e,!0))}),s&&this._dispatchLegendEvent(b.dk.legendItemAttributeUpdate,t,i)}_removeLegendItemState(t,e,i){let s=!1;e.forEach(e=>{!s&&t.hasState(e)&&(s=!0),t.removeState(e)}),t.getChildren()[0].getChildren().forEach(t=>{t.name!==b.GN.focus&&e.forEach(e=>{!s&&t.hasState(e)&&(s=!0),t.removeState(e)})}),s&&this._dispatchLegendEvent(b.dk.legendItemAttributeUpdate,t,i)}_getSelectedLegends(){var t;let e=[];return null===(t=this._itemsContainer)||void 0===t||t.getChildren().forEach(t=>{t.hasState(b.uu.selected)&&e.push(t.data)}),e}_appendDataToShape(t,e,i,s,r={}){t.name=e,t.data=i,t.delegate=s,t.states=(0,x.Z)({},H,r)}_dispatchLegendEvent(t,e,i){let s=this._getSelectedLegends();s.sort((t,e)=>t.index-e.index);let r=s.map(t=>t.label);this._dispatchEvent(t,{item:e,data:e.data,selected:e.hasState(b.uu.selected),currentSelectedItems:s,currentSelected:r,event:i})}_handleStyle(t,e,i,s,n){let a={};return t.style&&((0,r.Z)(t.style)?a.style=t.style(e,i,s,n):a.style=t.style),t.state&&(a.state={},Object.keys(t.state).forEach(o=>{t.state[o]&&((0,r.Z)(t.state[o])?a.state[o]=t.state[o](e,i,s,n):a.state[o]=t.state[o])})),a}release(){super.release(),this.removeAllEventListeners()}}z.defaultAttributes={layout:"horizontal",title:{align:"start",space:b.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:b.Nu,spaceRow:b.so,shape:{space:b.g,style:{size:b.SX,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:b.DN,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:b.SX,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:b.Th,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};var N=i(5669);let V=(t,e)=>{let i=[],s={},{series:r,seriesField:n}=e;return r().forEach(t=>{let e=n(t);(e===t.getSeriesField()?t.getSeriesInfoList():t.getSeriesInfoInField(e)).forEach(t=>{s[t.key]||(s[t.key]=!0,i.push(t))})}),i},U=(t,e)=>{var i,s,r;let{series:n,selected:a,field:o,data:l,customFilter:h}=e,u=a(),c=l();if(0===u.length&&c.length)return[];if(u.length===c.length)return t;let p={};u.forEach(t=>{p[t]=!0});let g=null!==(i=o())&&void 0!==i?i:N.lb;return h?h(t,u,g):((0,S.Z)(t)&&(null===(s=t[0])||void 0===s?void 0:s.nodes)?(t[0].nodes=t[0].nodes.filter(t=>!0===p[t.key]),(null===(r=t[0])||void 0===r?void 0:r.links)&&(t[0].links=t[0].links.filter(t=>!0===p[t.source]&&!0===p[t.target]))):(0,d.Z)(g)&&(t=t.filter(t=>!0===p[n.getSeriesFieldValue(t,g)])),t)};var G=i(2754),W=i(3722),X=i(8469),Y=i(2990),$=i(2096);class K extends G.q{constructor(){super(...arguments),this.type=l.L.discreteLegend,this.name=l.L.discreteLegend}static getSpecInfo(t){return(0,$.ts)(t,this.specKey,this.type,t=>!t.type||"discrete"===t.type)}init(t){super.init(t),(0,v.xV)(this._regions,t=>{t.addViewDataFilter({type:"discreteLegendFilter",options:{series:t,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(t),data:()=>this.getLegendDefaultData(),customFilter:this._spec.customFilter},level:Y.BV.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){(0,f.U)(this._option.dataSet,"discreteLegendFilter",U),(0,f.U)(this._option.dataSet,"discreteLegendDataMake",V);let t=new o.VO(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"discreteLegendDataMake",options:{series:()=>{let t=[];return(0,v.xV)(this._regions,e=>{t.push(e)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),t},seriesField:t=>this._getSeriesLegendField(t)}}),t}_getSeriesLegendField(t){var e,i,r;let n=t.getSeriesField(),a=null!==(e=this._spec.scaleName)&&void 0!==e?e:this._spec.scale;if((0,s.Z)(a)||!t.getRawData())return n;let o=this._option.globalScale.getScaleSpec(a);if(!o)return n;if(this._spec.field)return this._spec.field;if(!(0,y.S5)(o.domain))return n;let l=o.domain.find(e=>e.dataId===t.getRawData().name);return l&&null!==(r=null===(i=l.fields)||void 0===i?void 0:i[0])&&void 0!==r?r:n}_initSelectedData(){let t=this.getLegendDefaultData();if(this._unselectedData){let e=[],i=[];t.forEach(t=>{this._unselectedData.includes(t)?i.push(t):e.push(t)}),this._selectedData=e,this._unselectedData=i}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=t}getLegendDefaultData(t){return(0,r.Z)(this._spec.data)?this._getLegendItems().map(t=>t.label):this._legendData.getLatestData().map(t?t=>t.originalKey:t=>t.key)}_addDefaultTitleText(t){var e,i,r,n;if((null===(e=t.title)||void 0===e?void 0:e.visible)&&(0,s.Z)(t.title.text)&&(0,s.Z)(null===(i=t.title.style)||void 0===i?void 0:i.text)){let e=null===(n=null===(r=this._regions)||void 0===r?void 0:r[0])||void 0===n?void 0:n.getSeries()[0];if(!e)return;t.title.text=(0,_.tW)(e.getRawData(),e.getSeriesField())}}_getLegendAttributes(t){let e=Object.assign(Object.assign({layout:"bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",items:this._getLegendItems(),zIndex:this.layoutZIndex},function(t,e){let{title:i={},item:s={},pager:r={},background:n={},type:a,id:o,visible:l,orient:f,position:v,data:_,filter:y,regionId:b,regionIndex:x,seriesIndex:S,seriesId:A,padding:k}=t,w=m(t,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible&&(w.title=(0,g.q)(i)),(0,h.Z)(s.focusIconStyle)||(0,p.h_)(s.focusIconStyle),s.shape&&(s.shape=(0,p.ro)(s.shape)),s.label&&(s.label=(0,p.ro)(s.label)),s.value&&(s.value=(0,p.ro)(s.value)),s.background&&(s.background=(0,p.ro)(s.background)),(0,u.hU)(s.maxWidth)&&(s.maxWidth=Number(s.maxWidth.substring(0,s.maxWidth.length-1))*e.width/100),(0,u.hU)(s.width)&&(s.width=Number(s.width.substring(0,s.width.length-1))*e.width/100),(0,u.hU)(s.height)&&(s.height=Number(s.height.substring(0,s.height.length-1))*e.width/100),w.item=s,"scrollbar"===r.type?((0,h.Z)(r.railStyle)||(0,p.h_)(r.railStyle),(0,h.Z)(r.sliderStyle)||(0,p.h_)(r.sliderStyle)):((0,h.Z)(r.textStyle)||(0,p.h_)(r.textStyle),r.handler&&(0,p.ro)(r.handler)),w.pager=r,n.visible&&!(0,h.Z)(n.style)&&((0,c.H)(w,n.style),(0,d.Z)(n.padding)&&(w.padding=n.padding)),w}(this._spec,t)),{maxWidth:t.width,maxHeight:t.height});return this._addDefaultTitleText(e),this._addLegendItemFormatMethods(e),e}_getLegendConstructor(){return z}setSelectedData(t){t&&(this._unselectedData=this.getLegendDefaultData().filter(e=>!t.includes(e))),super.setSelectedData(t)}_initEvent(){if(this._legendComponent){let t=!1!==this._spec.filter;this._legendComponent.addEventListener(b.dk.legendItemClick,e=>{let i=(0,n.Z)(e,"detail.currentSelected");t&&this.setSelectedData(i),this.event.emit(W.$7.legendItemClick,{model:this,value:i,event:e})}),this._legendComponent.addEventListener(b.dk.legendItemHover,t=>{let e=(0,n.Z)(t,"detail");this.event.emit(W.$7.legendItemHover,{model:this,value:e,event:t})}),this._legendComponent.addEventListener(b.dk.legendItemUnHover,t=>{let e=(0,n.Z)(t,"detail");this.event.emit(W.$7.legendItemUnHover,{model:this,value:e,event:t})})}}_getLegendItems(){let t=(this._legendData.getLatestData()||[]).map(t=>{var e,i;let s=t.style("fillOpacity"),r=t.style("strokeOpacity"),n=t.style("opacity"),o=t.style("texture");return{label:t.key,shape:{symbolType:null!==(i=null!==(e=t.style("symbolType"))&&void 0!==e?e:t.shapeType)&&void 0!==i?i:"circle",fillOpacity:(0,a.Z)(s)?s:1,strokeOpacity:(0,a.Z)(r)?r:1,opacity:(0,a.Z)(n)?n:1,texturePadding:o?1:null,textureSize:o?4:null,texture:o,fill:t.style("fill"),stroke:t.style("stroke"),textureColor:t.style("textureColor"),innerBorder:t.style("innerBorder"),outerBorder:t.style("outerBorder"),lineDash:t.style("lineDash"),lineDashOffset:t.style("lineDashOffset"),lineWidth:t.style("lineWidth")}}});return(0,r.Z)(this._spec.data)?this._spec.data(t,this._option.globalScale.getScale("color"),this._option.globalScale):t}_addLegendItemFormatMethods(t){var e,i,s,r;let{formatMethod:n,formatter:a}=null!==(i=null===(e=this._spec.item)||void 0===e?void 0:e.label)&&void 0!==i?i:{},{formatMethod:o,formatter:l}=null!==(r=null===(s=this._spec.item)||void 0===s?void 0:s.value)&&void 0!==r?r:{},{formatFunc:h}=(0,$.HJ)(n,a);a&&!n&&h&&(t.item.label.formatMethod=(t,e)=>h(t,e,a));let{formatFunc:d}=(0,$.HJ)(o,l);l&&!o&&d&&(t.item.value.formatMethod=(t,e)=>d(l,t,e,a))}}K.specKey="legends",K.type=l.L.discreteLegend;let q=()=>{X.F.registerComponent(K.type,K)}},1106:function(t,e,i){i.d(e,{q:()=>a});var s=i(1121),r=i(4218),n=i(123);function a(t){var e,i;let a=Object.assign({},t);return(0,s.Z)(t.style)||(a.textStyle=(0,n.h_)(t.style)),(0,s.Z)(t.textStyle)||(0,r.H)(a.textStyle,(0,n.h_)(t.textStyle)),(null===(e=t.shape)||void 0===e?void 0:e.style)&&(0,n.h_)(a.shape.style),(null===(i=t.background)||void 0===i?void 0:i.style)&&(0,n.h_)(a.background.style),a}},7645:function(t,e,i){i.d(e,{_:()=>A});var s=i(6542),r=i(8469),n=i(1960),a=i(8746),o=i(7602),l=i(325),h=i(3215),d=i(7623),u=i(7636),c=i(3e3),p=i(9167),g=i(9367),m=i(5757),f=i(4683);(0,g.M)(),(0,m.g)(),(0,f.v)();class v extends c.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,l.Z)({},v.defaultAttributes,t)),this.name="title"}render(){var t,e,i,s,r,n,a,o,l,c,g,m,f,v,_,y,b,x,S,A;let{textType:k,text:w,subtextType:T,textStyle:C={},subtext:M,subtextStyle:E={},width:B,height:O,minWidth:I,maxWidth:R,minHeight:P,maxHeight:L,align:D,verticalAlign:Z,padding:F=0}=this.attribute,j=(0,h.o)(F),H=this.createOrUpdateChild("title-container",{x:j[3],y:j[0],zIndex:1},"group"),z=null!==(t=C.height)&&void 0!==t?t:O;if(!1!==this.attribute.visible&&!1!==C.visible){let{width:t,maxHeight:o,maxWidth:l,x:h=0,y:c=0,ellipsis:g=!0,wordBreak:m="break-word",maxWidth:f,lineClamp:v}=C;if("rich"===k||(0,d.Z)(C.character)){let s=Object.assign({x:h,y:c,width:null!==(e=null!=t?t:B)&&void 0!==e?e:0,height:null!=z?z:0,ellipsis:null==g||g,wordBreak:null!=m?m:"break-word",maxHeight:null!=o?o:L,maxWidth:null!=l?l:f,textConfig:null!==(i=C.character)&&void 0!==i?i:w},C);this._mainTitle=H.createOrUpdateChild("mainTitle",s,"richtext")}else if("html"===k){let e=Object.assign({html:Object.assign(Object.assign({dom:w},p.Ze),C),x:h,y:c,width:null!==(s=null!=t?t:B)&&void 0!==s?s:0,height:null!=z?z:0,ellipsis:g,wordBreak:m,maxHeight:null!=o?o:L,maxWidth:null!=l?l:f,textConfig:[]},C);this._mainTitle=H.createOrUpdateChild("mainTitle",e,"richtext")}else(0,d.Z)(w)&&(this._mainTitle=H.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:(0,u.Z)(w)?w:[w],whiteSpace:"normal"},C),{maxLineWidth:null!==(n=null!==(r=C.maxLineWidth)&&void 0!==r?r:t)&&void 0!==n?n:B,heightLimit:null!==(a=C.height)&&void 0!==a?a:L,lineClamp:v,ellipsis:g,x:h,y:c}),"text"))}let N=this._mainTitle?this._mainTitle.AABBBounds.height():0,V=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(!1!==this.attribute.visible&&!1!==E.visible){let{width:t,height:e,maxWidth:i,maxHeight:s,x:r=0,y:n=0,ellipsis:a=!0,wordBreak:h="break-word",lineClamp:_}=E,y=Math.max(Number.MIN_VALUE,L-N);if("rich"===T||(0,d.Z)(E.character)){let d=Object.assign({x:r,y:n,width:null!==(o=null!=t?t:B)&&void 0!==o?o:0,height:null!==(l=null!=e?e:O)&&void 0!==l?l:0,ellipsis:a,wordBreak:h,maxHeight:null!=s?s:y,maxWidth:null!=i?i:R,textConfig:null!==(c=E.character)&&void 0!==c?c:M},E);this._subTitle=H.createOrUpdateChild("subTitle",d,"richtext")}else if("html"===T){let o=Object.assign({html:Object.assign(Object.assign({dom:M},p.Ze),E),x:r,y:n,width:null!==(g=null!=t?t:B)&&void 0!==g?g:0,height:null!==(m=null!=e?e:O)&&void 0!==m?m:0,ellipsis:a,wordBreak:h,maxHeight:null!=s?s:y,maxWidth:null!=i?i:R,textConfig:[]},E);this._subTitle=H.createOrUpdateChild("subTitle",o,"richtext")}else(0,d.Z)(M)&&(this._subTitle=H.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:(0,u.Z)(M)?M:[M],whiteSpace:"normal"},E),{maxLineWidth:null!==(f=E.maxLineWidth)&&void 0!==f?f:B,heightLimit:null!==(v=E.heightLimit)&&void 0!==v?v:y,lineClamp:_,ellipsis:a,x:0,y:N}),"text"))}let U=this._subTitle?this._subTitle.AABBBounds.height():0,G=Math.max(V,this._subTitle?this._subTitle.AABBBounds.width():0),W=N+(null!==(_=E.height)&&void 0!==_?_:U);if((0,d.Z)(B)&&(G=B),(0,d.Z)(O)&&(W=O),(0,d.Z)(I)&&G<I&&(G=I),(0,d.Z)(R)&&G>R&&(G=R),(0,d.Z)(P)&&W<P&&(W=P),(0,d.Z)(L)&&W>L&&(W=L),H.attribute.width=G,H.attribute.height=W,H.attribute.boundsPadding=j,this._mainTitle){if((0,d.Z)(D)||(0,d.Z)(C.align)){let t=C.align?C.align:D,e=null!==(y=C.width)&&void 0!==y?y:G;"center"===t?(this._mainTitle.setAttribute("x",e/2),this._mainTitle.setAttribute("textAlign","center")):"right"===t?(this._mainTitle.setAttribute("x",e),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}let t=C.verticalAlign?C.verticalAlign:Z,e=null!=z?z:this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height();"middle"===t?(this._mainTitle.setAttribute("y",e/2),this._mainTitle.setAttribute("textBaseline","middle")):"bottom"===t?(this._mainTitle.setAttribute("y",e),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if((0,d.Z)(D)||(0,d.Z)(E.align)){let t=E.align?E.align:D,e=null!==(x=null!==(b=E.width)&&void 0!==b?b:C.width)&&void 0!==x?x:G;"center"===t?(this._subTitle.setAttribute("x",e/2),this._subTitle.setAttribute("textAlign","center")):"right"===t?(this._subTitle.setAttribute("x",e),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}let t=E.verticalAlign?E.verticalAlign:Z,e=this._mainTitle?(0,d.Z)(z)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),z):this._mainTitle.AABBBounds.y2:0,i=null!==(A=null!==(S=E.height)&&void 0!==S?S:O)&&void 0!==A?A:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();"middle"===t?(this._subTitle.setAttribute("y",e+i/2),this._subTitle.setAttribute("textBaseline","middle")):"bottom"===t?(this._subTitle.setAttribute("y",e+i),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",e),this._subTitle.setAttribute("textBaseline","top"))}}}v.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};var _=i(8378),y=i(9198),b=i(9730),x=i(2096);class S extends a.H{get orient(){return this._orient}constructor(t,e){super(t,e),this.type=o.L.title,this.specKey=o.L.title,this.layoutType="normal",this.layoutZIndex=s.Ai.Title,this.layoutLevel=s.pM.Title,this._orient="top",this._orient=(0,n.vk)(t.orient)?t.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(t){return(0,x.ts)(t,this.specKey,o.L.title,t=>!1!==t.visible)}onRender(t){}_compareSpec(t,e){let i=super._compareSpec(t,e);return(null==e?void 0:e.orient)===(null==t?void 0:t.orient)&&(null==e?void 0:e.visible)===t.visible||(i.reMake=!0),i.change=!0,i.reRender=!0,i}changeRegions(t){}update(t){}resize(t){}afterSetLayoutStartPoint(t){(0,_.Z)(t.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",t.x),(0,_.Z)(t.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",t.y),super.afterSetLayoutStartPoint(t)}getBoundsInRect(t){let e={};this.setLayoutRect(t);let i=this._getTitleAttrs();this._createOrUpdateTitleComponent(i),e=this._getTitleLayoutRect();let{x:s,y:r}=this.getLayoutStartPoint();return{x1:s,y1:r,x2:s+e.width,y2:r+e.height}}_getTitleLayoutRect(){let t=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:(0,_.Z)(t.width())?t.width():0,height:this._spec.height?this._spec.height:(0,_.Z)(t.height())?t.height():0}}_getTitleAttrs(){var t,e,i,s,r,a,o,l;if(!1===this._spec.visible)return{visible:!1};let h=this.getLayoutRect(),u=(0,n.Mv)(this._spec.width,h.width,null,h.width),c=Math.max(Math.min(u,(0,n.Mv)(this._spec.maxWidth,h.width,null,h.width),h.width),0),p=Object.assign(Object.assign({},(0,y.Z)(this._spec,["padding"])),{textType:null!==(t=this._spec.textType)&&void 0!==t?t:"text",text:null!==(e=this._spec.text)&&void 0!==e?e:"",subtextType:null!==(i=this._spec.subtextType)&&void 0!==i?i:"text",subtext:null!==(s=this._spec.subtext)&&void 0!==s?s:"",x:null!==(r=this._spec.x)&&void 0!==r?r:0,y:null!==(a=this._spec.y)&&void 0!==a?a:0,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:c,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:null!==(o=this._spec.align)&&void 0!==o?o:"left",verticalAlign:null!==(l=this._spec.verticalAlign)&&void 0!==l?l:"top",textStyle:Object.assign({width:c,maxLineWidth:c},this._spec.textStyle),subtextStyle:Object.assign({maxLineWidth:c},this._spec.subtextStyle)});return(0,d.Z)(this._spec.width)&&(p.textStyle.width=Math.max(u,h.width),p.subtextStyle.width=p.textStyle.width),p}_createOrUpdateTitleComponent(t){if(this._titleComponent)(0,b.X)(t,this._cacheAttrs)||this._titleComponent.setAttributes(t);else{let e=this.getContainer(),i=new v(t);i.name="title",e.add(i),this._titleComponent=i,i.on("*",(t,e)=>this._delegateEvent(i,t,e))}return this._cacheAttrs=t,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}S.type=o.L.title,S.specKey=o.L.title;let A=()=>{r.F.registerComponent(S.type,S)}},4774:function(t,e,i){i.d(e,{IK:()=>h,UH:()=>a,a:()=>r,vP:()=>n,z5:()=>l,zM:()=>o});var s=i(3685);let r={dom:`${s.Bq}_TOOLTIP_HANDLER_DOM`,canvas:`${s.Bq}_TOOLTIP_HANDLER_CANVAS`},n="vchart-tooltip-element",a=20,o={key:"其他",value:"..."},l=["group","mark","dimension"],h=50},7694:function(t,e,i){i.d(e,{M:()=>G});var s=i(7602),r=i(8746),n=i(7631),a=i(3885),o=i(3722),l=i(7623),h=i(6082),d=i(7636),u=i(1725),c=i(4258),p=i(5173);let g=(t,e)=>(0,l.Z)(e)?t.map(t=>e[t]):void 0,m=(t,e)=>i=>t.every((t,s)=>i[t]===(null==e?void 0:e[s])),f=t=>!(0,h.Z)(t)&&((0,d.Z)(t)?t.length>0&&t.every(l.Z):Object.keys(t).length>0),v=(t,e)=>{let i=e.getSeries(),s=[];return i.forEach(e=>{var i,r,n,o,d,u,c;let v=e.getDimensionField(),_=e.getMeasureField(),y=e.getSeriesField(),b=(0,l.Z)(y)?t[y]:void 0,x=(0,l.Z)(y)&&null!==(o=null===(n=null===(r=null===(i=e.getViewDataStatistics)||void 0===i?void 0:i.call(e))||void 0===r?void 0:r.latestData[y])||void 0===n?void 0:n.values)&&void 0!==o?o:[],S=g(v,t),A=g(_,t),k=f(A),w=!k&&(0,l.Z)(y)&&(0,h.Z)(b)&&x.length>0,T=()=>{var t;let i=null===(t=e.getViewData())||void 0===t?void 0:t.latestData.find(m(v,S));if(!k&&!f(A=g(_,i)))return;let r=e.type===a.A.pie?e.dataToCentralPosition(i):e.dataToPosition(i);(0,h.Z)(r)||isNaN(r.x)||isNaN(r.y)||s.push({pos:r,data:{dimensionFields:v,dimensionData:S,measureFields:_,measureData:A,hasMeasureData:k,groupField:y,groupData:b},series:e})};if("cartesian"===e.coordinate){let t=(0,p.lK)(null===(u=null===(d=e.getYAxisHelper())||void 0===d?void 0:d.getScale(0))||void 0===u?void 0:u.type)?"y":"x",i=v.map((t,e)=>[t,e]).filter(([,t])=>(0,h.Z)(null==S?void 0:S[t])),r=[null!=S?S:[]];i.length>0&&i.forEach(([t,i])=>{var s,n,a,o;let l=null!==(o=null===(a=null===(n=null===(s=e.getViewDataStatistics)||void 0===s?void 0:s.call(e))||void 0===n?void 0:n.latestData[t])||void 0===a?void 0:a.values)&&void 0!==o?o:[],h=[];r.forEach(t=>{l.forEach(e=>{var s;let r=null!==(s=null==t?void 0:t.slice())&&void 0!==s?s:[];r[i]=e,h.push(r)})}),r=h}),r.forEach(i=>{var r,n;if(w){let n=null===(r=e.getViewData())||void 0===r?void 0:r.latestData.filter(m(v,i));x.forEach(r=>{let a=n.find(t=>t[y]===r);if(!f(A=g(_,a)))return;let o=e.dataToPosition(a);(0,h.Z)(o)||isNaN(o.x)||isNaN(o.y)||s.push({pos:o,data:{dimensionFields:v,dimensionData:i,measureFields:_,measureData:A,hasMeasureData:k,groupField:y,groupData:r},series:e,dimType:t})})}else{let r=null===(n=e.getViewData())||void 0===n?void 0:n.latestData.find(m(v,i));if(!k&&!f(A=g(_,r)))return;let a=e.dataToPosition(r);if((0,h.Z)(a)||isNaN(a.x)||isNaN(a.y))return;s.push({pos:a,data:{dimensionFields:v,dimensionData:i,measureFields:_,measureData:A,hasMeasureData:k,groupField:y,groupData:b},dimType:t,series:e})}})}else if("polar"===e.coordinate){if(e.type===a.A.pie)T();else if(w){let t=(null===(c=e.getViewData())||void 0===c?void 0:c.latestData.filter(m(v,S))).find(t=>t[y]===b);x.forEach(i=>{if(!f(A=g(_,t)))return;let r=e.dataToPosition(t);(0,h.Z)(r)||isNaN(r.x)||isNaN(r.y)||s.push({pos:r,data:{dimensionFields:v,dimensionData:S,measureFields:_,measureData:A,hasMeasureData:k,groupField:y,groupData:i},series:e})})}else T()}else"geo"===e.coordinate&&T()}),s};var _=i(897),y=i(9673);let b=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"],x=(t,e,i,s,r)=>{var n,a,o;let h={activeType:t};switch(t){case"mark":case"group":if(i){let o=null===(n=i.getSpec())||void 0===n?void 0:n.tooltip;return h.visible=!0,(null==o?void 0:o.handler)&&(h.handler=o.handler),(null===(a=h.handler)||void 0===a?void 0:a.showTooltip)?h:((null==o?void 0:o[t])&&b.forEach(e=>{(0,l.Z)(o[t][e])&&(h[e]=o[t][e])}),Object.assign(Object.assign({},h),i.tooltipHelper.getTooltipData(t,e,s,s[0].datum,r)))}break;case"dimension":if(null==s?void 0:s.length){if(S(s).every(t=>{var e;return!(0,_.Lw)("dimension",null===(e=t.tooltipHelper)||void 0===e?void 0:e.spec)})?h.visible=!1:h.visible=!0,h.handler=e.handler,null===(o=h.handler)||void 0===o?void 0:o.showTooltip)return h;let i=[];return s.forEach(n=>n.data.forEach(n=>{let{series:a}=n,o=a.tooltipHelper.getTooltipData(t,e,s,n.datum,r);o&&i.push(o)})),(0,_.Uy)(i)}}return null},S=t=>{let e=[];return t.forEach(t=>{t.data.forEach(t=>{(0,l.Z)(t.series)&&e.push(t.series)})}),e};var A=i(4774);class k{constructor(t){this._showTooltipByHandler=(t,e)=>{var i,s,r;let n;if((0,h.Z)(t))return 1;e.changePositionOnly||this.clearCache(),this._updateViewSpec(t,e);let a=this._cacheActiveSpec;if((0,h.Z)(a)||!1===a.visible)return 1;e.tooltipSpec=this.component.getSpec(),e.activeTooltipSpec=a;let{title:l,content:d}=a,u=(0,h.Z)(null==l?void 0:l.key)&&(0,h.Z)(null==l?void 0:l.value)&&!(null==d?void 0:d.length);return(this.component.event.emit(o.$7.tooltipShow,Object.assign(Object.assign({},e),{isEmptyTooltip:u,tooltipData:t,activeType:this.activeType,tooltip:this.component})),u)?1:((null===(i=a.handler)||void 0===i?void 0:i.showTooltip)?n=a.handler.showTooltip.bind(a.handler):(null===(s=this.component.tooltipHandler)||void 0===s?void 0:s.showTooltip)&&(n=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),n?null!==(r=n(this.activeType,t,e))&&void 0!==r?r:0:1)},this.component=t}_preprocessDimensionInfo(t){let e=[];if(null==t||t.forEach(t=>{let i=Object.assign(Object.assign({},t),{data:t.data.filter(({series:t})=>{var e,i;return!1!==(null===(i=null===(e=t.getSpec())||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.visible)})});i.data.length>0&&e.push(i)}),e.length>0)return e}_updateViewSpec(t,e){var i,s,r,n,a,o,d,u,c;let{changePositionOnly:p,model:g}=e;if(!p||!this._cacheActiveSpec){let p=this.component.getSpec();if(this._cacheActiveSpec=x(this.activeType,this.component.getSpec(),g,t,e),this._cacheActiveSpec){(0,h.Z)(this._cacheActiveSpec.handler)&&(0,l.Z)(p.handler)&&(this._cacheActiveSpec.handler=p.handler);let g=null!==(i=p[this.activeType])&&void 0!==i?i:{},m=null!==(s=this._cacheActiveSpec.updateTitle)&&void 0!==s?s:g.updateTitle,f=null!==(r=this._cacheActiveSpec.updateContent)&&void 0!==r?r:g.updateContent,v=null!==(a=null!==(n=this._cacheActiveSpec.maxLineCount)&&void 0!==n?n:g.maxLineCount)&&void 0!==a?a:A.UH;if(m&&(this._cacheActiveSpec.title=null!==(o=m(this._cacheActiveSpec.title,t,e))&&void 0!==o?o:this._cacheActiveSpec.title),f)this._cacheActiveSpec.content=null!==(d=f(this._cacheActiveSpec.content,t,e))&&void 0!==d?d:this._cacheActiveSpec.content;else if(v>=1&&(null===(u=this._cacheActiveSpec.content)||void 0===u?void 0:u.length)>v){let t=null!==(c=this._cacheActiveSpec.othersLine)&&void 0!==c?c:g.othersLine,e=t?Object.assign(Object.assign({},A.zM),t):A.zM;this._cacheActiveSpec.content=[...this._cacheActiveSpec.content.slice(0,v-1),Object.assign(Object.assign({},this._cacheActiveSpec.content[v-1]),e)]}}}}shouldHandleTooltip(t,e){var i,s;return!(0,h.Z)(e)&&(0,_.Lw)(this.activeType,null===(s=null===(i=t.model)||void 0===i?void 0:i.tooltipHelper)||void 0===s?void 0:s.spec)}clearCache(){this._cacheActiveSpec=void 0}}var w=i(3233),T=i(7665);class C extends k{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(t,e,i){let s=Object.assign(Object.assign({},e),{dimensionInfo:this._preprocessDimensionInfo(t),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(t,s)}_getDimensionInfo(t){var e,i;let s;let r=this.component.getChart(),n=r.getCompiler().getStage().getLayer(void 0),a={x:t.event.viewX,y:t.event.viewY};if(n.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},a),0===(s=[...null!==(e=(0,w.p5)(r,a,!0))&&void 0!==e?e:[],...null!==(i=(0,T.e)(r,a))&&void 0!==i?i:[]]).length)s=void 0;else if(s.length>1){let t=s.filter(t=>{var e;let i;let s=t.axis;if(s.getSpec().hasDimensionTooltip)return!0;if(!(0,p.lK)(s.getScale().type))return!1;for(let t of null!==(e=null==s?void 0:s.getRegions())&&void 0!==e?e:[]){for(let e of t.getSeries())if("cartesian"===e.coordinate){i=e;break}if((0,l.Z)(i))break}return(0,l.Z)(i)&&i.getDimensionField()[0]===i.fieldY[0]?"left"===s.getOrient()||"right"===s.getOrient():"bottom"===s.getOrient()||"top"===s.getOrient()});if((s=t.length?t:s.slice(0,1)).length>1){let t=new Set;s.forEach(e=>{e.data=e.data.filter(({key:e})=>!t.has(e)&&(t.add(e),!0))})}}return s}getMouseEventData(t){return{tooltipInfo:this._getDimensionInfo(t),ignore:!1}}}var M=i(4546);class E extends k{constructor(){super(...arguments),this.activeType="group"}showTooltip(t,e,i){let{datum:s,series:r}=t,n=[{datum:(0,M.IX)(s),series:r}],a=Object.assign(Object.assign({},e),{groupDatum:this._getGroupDatum(e),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(n,a)}getMouseEventData(t){var e,i;let s;if("series"===(null===(e=t.model)||void 0===e?void 0:e.modelType)){let e=t.model,r=e.tooltipHelper,n=null==r?void 0:r.activeTriggerSet.group;if(null==n?void 0:n.has(t.mark)){let r=this.component.getSpec()[this.activeType];((null==r?void 0:r.triggerMark)?(0,M.IX)(r.triggerMark):[]).includes(null===(i=t.mark)||void 0===i?void 0:i.name)&&(s={mark:t.mark,datum:t.datum,series:e})}}return{tooltipInfo:s,ignore:!1}}_getGroupDatum(t){let{model:e,mark:i,datum:s}=t;if(["line","area"].includes(i.type))return(0,M.IX)(s);let r=e.getViewData().latestData,n=e.getSeriesField();if(!n)return r;let a=(0,M.IX)(s)[0][n];return r.filter(t=>t[n]===a)}}var B=i(3872);class O extends k{constructor(){super(...arguments),this.activeType="mark"}showTooltip(t,e,i){var s,r,n;let{datum:a,series:o}=t,l=this.component.getSpec(),h=[{datum:[a],series:o}],d=o.tooltipHelper,u=null===(s=o.getSpec())||void 0===s?void 0:s.tooltip,c=null===(r=null==u?void 0:u.mark)||void 0===r?void 0:r.checkOverlap,p=!1;if(!0===c||!0===(null===(n=l.mark)||void 0===n?void 0:n.checkOverlap)&&!1!==c){let t=null==d?void 0:d.activeTriggerSet.mark;if(t){p=!0;let i=this.component.getChart().getCompiler().getStage().getLayer(void 0),s={x:e.event.viewX,y:e.event.viewY};i.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},s),t.forEach(t=>{t.getProductElements().forEach(t=>{let i=t.getGraphicItem();t!==e.item&&i&&i.containsPoint(s.x,s.y,B.LZ.GLOBAL,i.stage.getPickerService())&&h[0].datum.push(t.getDatum())})})}}let g=Object.assign(Object.assign({},e),{model:o,changePositionOnly:i,tooltip:this.component});if(i&&p){let t=this._cacheActiveSpec&&this._cacheActiveSpec.data;t&&t[0].series===h[0].series&&t[0].datum.length===h[0].datum.length&&!t[0].datum.some((t,e)=>t!==h[0].datum[e])||(g.changePositionOnly=!1)}return this._showTooltipByHandler(h,g)}getMouseEventData(t){var e;let i,s;let r=null===(e=t.model)||void 0===e?void 0:e.modelType;if("series"===r){let e=t.model,r=e.tooltipHelper,n=null==r?void 0:r.activeTriggerSet.mark,a=null==r?void 0:r.ignoreTriggerSet.mark;(null==n?void 0:n.has(t.mark))?i={mark:t.mark,datum:t.datum,series:e}:(null==a?void 0:a.has(t.mark))&&(s=!0)}else if("component"===r){let e=t.model,r=t.node;if("label"===e.name&&r){let t=e.getLabelInfoByTextGraphic(r),{baseMark:n,series:a,labelMark:o}=null!=t?t:{},l=a.tooltipHelper,h=null==l?void 0:l.activeTriggerSet.mark,d=null==l?void 0:l.ignoreTriggerSet.mark;(null==h?void 0:h.has(o))?i={mark:n,datum:r.attribute.data,series:a}:(null==d?void 0:d.has(o))&&(s=!0)}}return{tooltipInfo:i,ignore:s}}}let I=t=>(0,l.Z)(t)&&!(0,d.Z)(t),R=t=>(0,l.Z)(t)&&(0,d.Z)(t);var P=i(4154),L=i(1601),D=i(6689),Z=i(8469),F=i(8612),j=i(9904),H=i(2930),z=i(4218);class N extends H.r{_shouldMergeThemeToSpec(){return!1}_initTheme(t,e){var i;let{spec:s,theme:r}=super._initTheme(t,e);return s.style=(0,z.H)({},this._theme,s.style),s.offset=(0,z.H)({},r.offset,t.offset),s.transitionDuration=null!==(i=t.transitionDuration)&&void 0!==i?i:r.transitionDuration,{spec:s,theme:r}}_transformSpecAfterMergingTheme(t,e,i){var s,r,a,o,h,d,u;super._transformSpecAfterMergingTheme(t,e,i),t.visible=null===(s=t.visible)||void 0===s||s,t.activeType=(0,_.Zn)(t),t.renderMode=null!==(r=t.renderMode)&&void 0!==r?r:(0,n.Oy)(this._option.mode)||!(0,n.qe)(this._option.mode)?"canvas":"html",t.trigger=null!==(a=t.trigger)&&void 0!==a?a:"hover",t.className=null!==(o=t.className)&&void 0!==o?o:A.vP,t.enterable=null!==(h=t.enterable)&&void 0!==h&&h,t.transitionDuration=null!==(d=t.transitionDuration)&&void 0!==d?d:150,t.confine=null!==(u=t.confine)&&void 0!==u?u:"canvas"===t.renderMode,(0,l.Z)(t.parentElement)?(0,j.Z)(t.parentElement)&&(t.parentElement=F.rF.getElementById(t.parentElement)):(0,n.qe)(this._option.mode)&&(t.parentElement=null==n.Eh?void 0:n.Eh.body)}}var V=i(5205);class U extends r.H{constructor(){super(...arguments),this.layoutZIndex=1,this.type=s.L.tooltip,this.name=s.L.tooltip,this.transformerConstructor=N,this.specKey="tooltip",this.layoutType="none",this._isReleased=!1,this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(t,e,i)=>{this.event.on(t,e,i),this._eventList.push({eventType:t,handler:i})},this._handleClickToLock=t=>{this._clickLock?(this._handleChartMouseOut(t),this._clickLock=!1):this._clickLock=!0},this._getMouseOutHandler=t=>e=>{var i,s,r,a,o;if(this._isReleased||this._alwaysShow||this._clickLock||!this._isTooltipShown&&!(null===(s=null===(i=this.tooltipHandler)||void 0===i?void 0:i.isTooltipShown)||void 0===s?void 0:s.call(i)))return;let l=(0,n.qe)(null===(r=this._option)||void 0===r?void 0:r.mode),{clientX:h,clientY:d}=e.event;l&&t&&this._isPointerInChart({x:h,y:d})||(this._enterable?this._outTimer=setTimeout(()=>{this._handleChartMouseOut(e)},null!==(o=null===(a=this._spec)||void 0===a?void 0:a.showDelay)&&void 0!==o?o:A.IK):this._handleChartMouseOut(e))},this._handleChartMouseOut=t=>{this._alwaysShow||this._isReleased||this._isEnterTooltip||"none"!==this._spec.triggerOff&&(this._hideTooltipByHandler(Object.assign(Object.assign({},t),{tooltip:this})),this._handleMouseMove&&this._handleMouseMove.cancel&&this._handleMouseMove.cancel(),this._cacheEnterableRect=null,this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=t=>e=>{var i,s,r,n;this._isReleased||this._isEnterTooltip||(this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||(this._clickLock?t&&(this._handleChartMouseOut(e),this._clickLock=!1):!t&&this._enterable&&(null===(s=null===(i=this.tooltipHandler)||void 0===i?void 0:i.isTooltipShown)||void 0===s?void 0:s.call(i))?(this._showTimer&&clearTimeout(this._showTimer),this._showTimer=setTimeout(()=>{this._handleChartMouseMove(e,t)},null!==(n=null===(r=this._spec)||void 0===r?void 0:r.showDelay)&&void 0!==n?n:A.IK)):this._handleChartMouseMove(e,t)))},this._handleChartMouseMove=(t,e)=>{if(this._isReleased)return;let i=this._getMouseEventData(t),{tooltipInfo:{dimension:s},ignore:{mark:r}}=i,n={mark:!1,dimension:!1,group:!1};for(let s=0,r=A.z5.length;s<r;s++){let r=A.z5[s];if(this.processor[r]&&this._showTooltipByMouseEvent(r,i,t,e)){n[r]=!0;break}}Object.values(n).every(t=>!t)&&!(0,_.hx)(t)&&(r&&I(this._cacheInfo)?n.mark=this._showTooltipByMouseEvent("mark",i,t,e,!0):(0,l.Z)(s)&&(n.dimension=this._showTooltipByMouseEvent("dimension",i,t,e))),n.mark||n.group||n.dimension&&!(0,h.Z)(s)?this._initEventOfTooltipContent():this._handleChartMouseOut(t)},this._showTooltipByMouseEvent=(t,e,i,s,r)=>{var n;let a;let o=this.processor[t];if(!o.shouldHandleTooltip(i,e.tooltipInfo[t]))return!1;if(this._hideTimer&&clearTimeout(this._hideTimer),r)a=!o.showTooltip(this._cacheInfo,i,!0);else{let s=e.tooltipInfo[t],r=this._isSameAsCache(s,i,t);(a=!o.showTooltip(s,i,r))&&(this._cacheInfo=s,this._cacheParams=i,this._cacheActiveType=t)}a&&(this._isTooltipShown=!0,s&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._hideTimer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));let l=null===(n=this._option)||void 0===n?void 0:n.globalInstance;return a&&c.H.globalConfig.uniqueTooltip&&l&&c.H.hideTooltip(l.id),a},this._getMouseEventData=t=>{let e={tooltipInfo:{},ignore:{}};return Object.keys(this.processor).forEach(i=>{let{tooltipInfo:s,ignore:r}=this.processor[i].getMouseEventData(t);e.tooltipInfo[i]=s,e.ignore[i]=r}),e},this._hideTooltipByHandler=t=>{var e,i,s;if(!this._isTooltipShown&&!(null===(i=null===(e=this.tooltipHandler)||void 0===e?void 0:e.isTooltipShown)||void 0===i?void 0:i.call(e)))return 0;this.event.emit(o.$7.tooltipHide,Object.assign(Object.assign({},t),{source:o.AY.chart,tooltip:this})),Object.values(this.processor).forEach(t=>{t.clearCache()});let r=null!==(s=this._spec.handler)&&void 0!==s?s:this.tooltipHandler;if(r.hideTooltip){let e=r.hideTooltip.call(r,t);return e||(this._isTooltipShown=!1),e}return 1},this.hideTooltip=()=>{if(this._isReleased)return!1;let t={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:o.AY.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(t)}}isTooltipShown(){return this._isTooltipShown}changeRegions(t){}_getNeedClearVRenderComponents(){return[]}_registerEvent(){}_releaseEvent(){}onLayout(t){}onLayoutEnd(t){}onRender(t){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var t,e;super.release(),this._isReleased=!0,this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach(({eventType:t,handler:e})=>{this.event.off(t,e)}),this._eventList=[],null===(e=null===(t=this.tooltipHandler)||void 0===t?void 0:t.release)||void 0===e||e.call(t),this._isTooltipShown=!1}beforeRelease(){this.event.emit(o.$7.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(o.$7.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var t,e,i;let s=null!==(t=this._spec.renderMode)&&void 0!==t?t:"html",r=this._option.globalInstance.getTooltipHandlerByUser();if(r)this.tooltipHandler=r,this._enterable=!1;else{let t="canvas"===s?A.a.canvas:A.a.dom,r=Z.F.getComponentPluginInType(t);r||(0,V.vU)("Can not find tooltip handler: "+t);let n=new r;n.name=`${this._spec.className}-${null!==(e=this._option.globalInstance.id)&&void 0!==e?e:0}-${this.getSpecIndex()}`,null===(i=this.pluginService)||void 0===i||i.load([n]),this.tooltipHandler=n,this._spec.enterable&&"html"===s&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}}_initEventOfTooltipContent(){var t,e;if(!this._needInitEventOfTooltip)return;let i=null===(e=(t=this.tooltipHandler).getTooltipContainer)||void 0===e?void 0:e.call(t),s=null==i?void 0:i.firstChild;s&&(s.addEventListener("pointerenter",()=>{var t;if(!this._enterable)return;this._isEnterTooltip=!0;let e=null===(t=s.getBoundingClientRect)||void 0===t?void 0:t.call(s);e&&(this._cacheEnterableRect={x:e.x,y:e.y,width:e.width,height:e.height}),this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}),s.addEventListener("pointerleave",()=>{var t,e,i;if(this._enterable&&(this._isEnterTooltip=!1,this._cacheEnterableRect)){let r=null===(t=s.getBoundingClientRect)||void 0===t?void 0:t.call(s);r&&Object.keys(this._cacheEnterableRect).every(t=>this._cacheEnterableRect[t]===r[t])&&(this._cacheEnterableRect=null,this._outTimer=setTimeout(this.hideTooltip,null!==(i=null===(e=this._spec)||void 0===e?void 0:e.showDelay)&&void 0!==i?i:A.IK))}}),this._needInitEventOfTooltip=!1)}_initProcessor(){let t=this._spec.activeType;this.processor={},t.includes("dimension")&&(this.processor.dimension=new C(this)),t.includes("group")&&(this.processor.group=new E(this)),t.includes("mark")&&(this.processor.mark=new O(this))}_initEvent(){var t;if(this._option.disableTriggerEvent)return;let e=(0,M.IX)(null!==(t=this._spec.trigger)&&void 0!==t?t:"hover"),i=(0,M.IX)(this._spec.triggerOff),s=this._option.mode;e.forEach(t=>{var e;"hover"===t?(this._handleMouseMove=this._throttle(this._getMouseMoveHandler(!1)),this._mountEvent("pointermove",{source:"chart"},this._handleMouseMove),((0,n.wx)(s)||(0,n.Oy)(s))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerleave",{source:"chart"},this._getMouseOutHandler(!1))):"click"===t?(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))):(0,P.Z)(t)&&this._mountEvent(t.eventType,{source:null!==(e=t.source)&&void 0!==e?e:"chart",consume:t.consume},this._getMouseMoveHandler(!0))}),i.filter(t=>(0,P.Z)(t)).forEach(t=>{var e,i;this._mountEvent(t.eventType,{source:null!==(e=t.source)&&void 0!==e?e:"chart",consume:t.consume},this._getMouseOutHandler(null!==(i=t.checkOutside)&&void 0!==i&&i))}),!e.includes("click")&&this._spec.lockAfterClick&&this._mountEvent("pointertap",{source:"chart"},this._handleClickToLock)}_throttle(t){let e;return e=(0,L.Z)(this._spec.throttleInterval)?this._spec.throttleInterval:"html"===this._spec.renderMode&&this._spec.transitionDuration?50:10,(0,D.Z)(t,e)}reInit(t){var e,i,s;if(super.reInit(t),this.tooltipHandler){let t=null!==(e=this._spec.renderMode)&&void 0!==e?e:"html",r=this._spec.enterable&&"html"===t;r&&!this._enterable&&(this._needInitEventOfTooltip=!0),this._enterable=r,null===(s=(i=this.tooltipHandler).reInit)||void 0===s||s.call(i)}else this._initHandler()}showTooltip(t,e){var i;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(null===(i=this.tooltipHandler)||void 0===i?void 0:i.showTooltip))return!1;let s=function(t,e,i){var s,r,n;let a=Object.assign({regionIndex:0},e),d=i.getOption(),p=d.getRegionsInUserIdOrIndex((0,l.Z)(a.regionId)?[a.regionId]:void 0,(0,l.Z)(a.regionIndex)?[a.regionIndex]:void 0)[0];if(!p)return"none";let g=v(t,p),f=null!==(s=a.activeType)&&void 0!==s?s:g.length>1?"dimension":"mark",_=p.getLayoutStartPoint(),y=p.getLayoutRect(),b=d.globalInstance.getContainer(),x=Object.assign({x:0,y:0},b?(0,u.to)(b):{}),S=t=>{var e;let{dimensionFields:i,dimensionData:s,measureFields:r,measureData:n,groupField:a,groupData:o}=t.data;return null===(e=t.series.getViewData())||void 0===e?void 0:e.latestData.find(t=>m(i,s)(t)&&m(r,n)(t)&&((0,h.Z)(a)||m([a],[o])(t)))},A=t=>{var e,i;let s={x:Math.min(Math.max(t.x,0),y.width),y:Math.min(Math.max(t.y,0),y.height)},r=null!==(e=a.x)&&void 0!==e?e:_.x+s.x,n=null!==(i=a.y)&&void 0!==i?i:_.y+s.y;return{canvasX:r,canvasY:n,clientX:x.x+r,clientY:x.y+n}};if("dimension"===f){let e=g[0];if(!e)return"none";let s=new Map;g.forEach(t=>{var e;s.has(t.series)||s.set(t.series,[]),null===(e=s.get(t.series))||void 0===e||e.push(t)});let n=[{value:t[e.data.dimensionFields[0]],data:[...s.keys()].map(t=>{var e,i;return{series:t,datum:null!==(i=null===(e=s.get(t))||void 0===e?void 0:e.map(t=>S(t)))&&void 0!==i?i:[]}})}];(0,l.Z)(e.dimType)&&(n[0].position=e.pos[e.dimType],n[0].dimType=e.dimType);let a={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:n,chart:null!==(r=d.globalInstance.getChart())&&void 0!==r?r:void 0,datum:void 0,model:void 0,source:o.AY.chart,event:A({x:g.reduce((t,e)=>t+e.pos.x,0)/g.length,y:g.reduce((t,e)=>t+e.pos.y,0)/g.length}),item:void 0,itemMap:new Map};i.processor.dimension.showTooltip(n,a,!1);let h=d.globalInstance;return c.H.globalConfig.uniqueTooltip&&c.H.hideTooltip(h.id),f}if("mark"===f){let e=g[0];if(!e)return"none";let s=Object.assign(Object.assign({},S(e)),t),r=[{datum:[s],series:e.series}],a={changePositionOnly:!1,tooltip:null,dimensionInfo:[{value:s[e.data.dimensionFields[0]],data:r}],chart:null!==(n=d.globalInstance.getChart())&&void 0!==n?n:void 0,datum:s,model:e.series,source:o.AY.chart,event:A(e.pos),item:void 0,itemMap:new Map};i.processor.mark.showTooltip({datum:s,mark:null,series:e.series},a,!1);let l=d.globalInstance;return c.H.globalConfig.uniqueTooltip&&c.H.hideTooltip(l.id),f}return"none"}(t,e,this);return"none"!==s&&(this._alwaysShow=!!(null==e?void 0:e.alwaysShow)),s}_isSameAsCache(t,e,i){if(i!==this._cacheActiveType)return!1;if(t===this._cacheInfo)return!0;if((0,h.Z)(this._cacheInfo)||(0,h.Z)(t))return!1;if(R(t)){if(I(this._cacheInfo))return!1;let e=this._cacheInfo;return e.length===t.length&&t.every((t,i)=>(0,y.eH)(t,e[i]))}if(R(this._cacheInfo))return!1;let s=this._cacheInfo;if(!((null==t?void 0:t.datum)===s.datum&&(null==t?void 0:t.mark)===s.mark&&(null==t?void 0:t.series)===s.series))return!1;let r=this._cacheParams;return!(0,h.Z)(r)&&!(0,h.Z)(e)&&r.mark===e.mark&&r.model===e.model&&r.datum===e.datum}_isPointerInChart(t){var e;let i=null===(e=this._option)||void 0===e?void 0:e.globalInstance;if(!i||!i.getChart())return!1;let{x:s,y:r}=t,{x:n,y:a,width:o,height:l}=i.getCanvas().getBoundingClientRect();return s>=n&&s<=n+o&&r>=a&&r<=a+l}getVisible(){return!1!==this._spec.visible}}U.type=s.L.tooltip,U.transformerConstructor=N,U.specKey="tooltip";let G=()=>{Z.F.registerComponent(U.type,U)}},897:function(t,e,i){i.d(e,{Lw:()=>c,Uy:()=>v,Zn:()=>u,hx:()=>p,nK:()=>f,u6:()=>_});var s=i(7623),r=i(7636),n=i(6082),a=i(1121),o=i(9038),l=i(9711),h=i(6281),d=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let u=t=>{var e,i,r;if(!1===(null==t?void 0:t.visible))return[];let n={mark:!1!==(null===(e=null==t?void 0:t.mark)||void 0===e?void 0:e.visible),dimension:!1!==(null===(i=null==t?void 0:t.dimension)||void 0===i?void 0:i.visible),group:!1!==(null===(r=null==t?void 0:t.group)||void 0===r?void 0:r.visible)};return(0,s.Z)(null==t?void 0:t.activeType)&&Object.keys(n).forEach(e=>{var i;n[e]=null===(i=null==t?void 0:t.activeType)||void 0===i?void 0:i.includes(e)}),Object.keys(n).filter(t=>n[t])},c=(t,e)=>!e||!1!==e.visible&&(!e[t]||!1!==e[t].visible)&&!(e.activeType&&!((0,r.Z)(e.activeType)?e.activeType.includes(t):e.activeType===t));function p(t){return(0,n.Z)(t.mark)&&(0,n.Z)(t.model)&&(0,n.Z)(t.datum)}function g(t,e,i,o,l,u){let c=e=>{if(e){let r={datum:l},c=(0,n.Z)(e.key)&&(0,n.Z)(e.value)&&!(0,a.Z)(e)?Object.assign(Object.assign(Object.assign({},o),i),e):Object.assign(Object.assign({},o),e),{key:p,keyFormatter:g,keyTimeFormat:m,keyTimeFormatMode:f,value:v,valueFormatter:y,valueTimeFormat:b,valueTimeFormatMode:x}=c,S=d(c,["key","keyFormatter","keyTimeFormat","keyTimeFormatMode","value","valueFormatter","valueTimeFormat","valueTimeFormatMode"]);r.key=_((0,h.Xb)(p,l,u,g),m,f),r.value=_((0,h.Xb)(v,l,u,y),b,x),Object.keys(S).forEach(t=>{r[t]=(0,h.Xb)(c[t],l,u)}),!1!==r.visible&&((0,s.Z)(r.key)||(0,s.Z)(r.value))&&t.push(r)}};(0,r.Z)(e)?e.forEach(t=>{c(t)}):c(e)}function m(t,e,i,s,r,n,a){(0,o.Z)(e)?g(t,e(r,a),i,s,n,a):e&&g(t,e,i,s,n,a)}function f(t,e,i,s,n,a){if(n&&n.length){let l=[];return n.forEach(n=>{(0,r.Z)(t)?t.forEach(t=>{m(l,t,e,i,s,n,a)}):(0,o.Z)(t)?m(l,t,e,i,s,n,a):t&&g(l,t,e,i,n,a)}),l}return null}function v(t){if(!t||!t.length)return null;let e=[];return t.forEach(({content:t})=>{t&&t.forEach(t=>{e.push(t)})}),e.length?Object.assign(Object.assign({},t[0]),{content:e}):t[0]}let _=(t,e,i)=>{if(!e&&!i)return"object"!=typeof t?null==t?void 0:t.toString():t;let s=l.k.getInstance();return e=e||"%Y%m%d",("local"===(i=i||"local")?s.timeFormat:s.timeUTCFormat)(e,t)}},6281:function(t,e,i){i.d(e,{Xb:()=>h,lg:()=>u,sE:()=>d});var s=i(9038),r=i(5890),n=i(7623),a=i(1130),o=i(6082),l=i(2096);let h=(t,e,i,o)=>{let h;if(h=(0,s.Z)(t)?t(e,i):(0,r.Z)(t)&&(0,n.Z)(t.field)?(0,a.Z)(e,t.field):t,o){let{formatFunc:i,args:s}=(0,l.HJ)(void 0,o,t,e);i&&s&&(h=i(...s))}return h},d=(t,e,i)=>(0,o.Z)(t)?t:(0,s.Z)(t)?t(e,i):t;function u(t){var e;for(let{data:i}of(null===(e=t[0])||void 0===e?void 0:e.series)?[{data:t,value:""}]:t)for(let{datum:t}of i)for(let e of null!=t?t:[])if(e)return e}},2096:function(t,e,i){i.d(e,{DE:()=>o,HJ:()=>l,ts:()=>h});var s=i(1130),r=i(6082),n=i(7636),a=i(8469);function o(t,e){return(0,s.Z)(e,`component.${t}`)}function l(t,e,i,s){if(t)return{formatFunc:t,args:[i,s]};let r=a.F.getFormatter();return e&&r?{formatFunc:r,args:[i,s,e]}:{}}let h=(t,e,i,s)=>{if((0,r.Z)(t[e]))return;let a=(0,n.Z)(t[e]),o=a?t[e]:[t[e]],l=[];return o.forEach((t,r)=>{t&&(!s||s(t))&&l.push({spec:t,specPath:a?[e,r]:[e],specInfoPath:["component",e,r],type:i})}),l}},9231:function(t,e,i){var s,r;i.d(e,{W:()=>s}),(r=s||(s={}))[r.Default=0]="Default",r[r.Theme=1]="Theme",r[r.Chart=2]="Chart",r[r.Base_Series=3]="Base_Series",r[r.Series=4]="Series",r[r.Mark=5]="Mark",r[r.User_Chart=6]="User_Chart",r[r.User_Series=7]="User_Series",r[r.User_Mark=8]="User_Mark",r[r.User_SeriesStyle=9]="User_SeriesStyle",r[r.Built_In=99]="Built_In"},5669:function(t,e,i){i.d(e,{AF:()=>g,Gq:()=>m,Iz:()=>f,Jl:()=>p,Ti:()=>o,Uq:()=>d,XW:()=>n,cL:()=>_,cQ:()=>h,eh:()=>l,fB:()=>c,lb:()=>a,vM:()=>r,wo:()=>v,x0:()=>u});var s=i(3685);s.Bq;let r=`${s.Bq}_DEFAULT_DATA_INDEX`,n=`${s.Bq}_DEFAULT_DATA_KEY`,a=`${s.Bq}_DEFAULT_DATA_SERIES_FIELD`,o=`${s.Bq}_DEFAULT_SERIES_STYLE_NAME`,l=`${s.Bq}_STACK_KEY`,h=`${s.Bq}_STACK_START`,d=`${s.Bq}_STACK_END`,u=`${s.Bq}_STACK_START_PERCENT`,c=`${s.Bq}_STACK_END_PERCENT`,p=`${s.Bq}_STACK_START_OffsetSilhouette`,g=`${s.Bq}_STACK_END_OffsetSilhouette`,m=`${s.Bq}_STACK_TOTAL`,f=`${s.Bq}_STACK_TOTAL_PERCENT`,v=`${s.Bq}_STACK_TOTAL_TOP`,_=`${s.Bq}_STACK_TOTAL_BOTTOM`;s.Bq,s.Bq,s.Bq,s.Bq,s.Bq,s.Bq},3722:function(t,e,i){var s,r,n,a,o,l;i.d(e,{$7:()=>s,AY:()=>r,Ve:()=>h,l:()=>n});let h=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];(a=s||(s={})).initialized="initialized",a.rendered="rendered",a.renderFinished="renderFinished",a.animationFinished="animationFinished",a.regionSeriesDataFilterOver="regionSeriesDataFilterOver",a.afterInitData="afterInitData",a.afterInitEvent="afterInitEvent",a.afterInitMark="afterInitMark",a.rawDataUpdate="rawDataUpdate",a.viewDataFilterOver="viewDataFilterOver",a.viewDataUpdate="viewDataUpdate",a.viewDataStatisticsUpdate="viewDataStatisticsUpdate",a.markDeltaYUpdate="markDeltaYUpdate",a.viewDataLabelUpdate="viewDataLabelUpdate",a.scaleDomainUpdate="scaleDomainUpdate",a.scaleUpdate="scaleUpdate",a.dataZoomChange="dataZoomChange",a.drill="drill",a.layoutStart="layoutStart",a.layoutEnd="layoutEnd",a.layoutRectUpdate="layoutRectUpdate",a.playerPlay="playerPlay",a.playerPause="playerPause",a.playerEnd="playerEnd",a.playerChange="playerChange",a.playerForward="playerForward",a.playerBackward="playerBackward",a.scrollBarChange="scrollBarChange",a.brushStart="brushStart",a.brushChange="brushChange",a.brushEnd="brushEnd",a.brushClear="brushClear",a.legendSelectedDataChange="legendSelectedDataChange",a.legendFilter="legendFilter",a.legendItemClick="legendItemClick",a.legendItemHover="legendItemHover",a.legendItemUnHover="legendItemUnHover",a.tooltipShow="tooltipShow",a.tooltipHide="tooltipHide",a.tooltipRelease="tooltipRelease",a.afterResize="afterResize",a.afterRender="afterRender",a.afterLayout="afterLayout",(o=r||(r={})).chart="chart",o.window="window",o.canvas="canvas",(l=n||(n={})).vchart="vchart",l.chart="chart",l.model="model",l.mark="mark"},6542:function(t,e,i){var s,r,n,a;i.d(e,{Ai:()=>s,pM:()=>r,sd:()=>l,wK:()=>o});let o=9,l=0;(n=s||(s={}))[n.SeriesGroup=0]="SeriesGroup",n[n.Axis_Grid=50]="Axis_Grid",n[n.CrossHair_Grid=100]="CrossHair_Grid",n[n.Region=450]="Region",n[n.Mark=300]="Mark",n[n.Node=400]="Node",n[n.Axis=100]="Axis",n[n.MarkLine=500]="MarkLine",n[n.MarkArea=100]="MarkArea",n[n.MarkPoint=500]="MarkPoint",n[n.DataZoom=500]="DataZoom",n[n.ScrollBar=500]="ScrollBar",n[n.Player=500]="Player",n[n.Legend=500]="Legend",n[n.CrossHair=500]="CrossHair",n[n.Indicator=500]="Indicator",n[n.Title=500]="Title",n[n.Label=500]="Label",n[n.Brush=500]="Brush",n[n.CustomMark=500]="CustomMark",n[n.Interaction=700]="Interaction",(a=r||(r={}))[a.Indicator=10]="Indicator",a[a.Region=20]="Region",a[a.Axis=30]="Axis",a[a.DataZoom=40]="DataZoom",a[a.Player=40]="Player",a[a.ScrollBar=40]="ScrollBar",a[a.Legend=50]="Legend",a[a.Title=70]="Title",a[a.CustomMark=70]="CustomMark"},4258:function(t,e,i){i.d(e,{H:()=>eW});var s,r,n=i(1697),a=i(6962),o=i(7602),l=i(2449),h=i(5795),d=i(6338),u=i(8612),c=i(9904),p=i(7636),g=i(5890),m=i(4546),f=i(6082),v=i(7623),_=i(9013),y=i(1960),b=i(7631),x=i(5205),S=i(7877),A=i(4154);function k(t,e){return(0,c.Z)(t)?S.V.themeExist(t)?S.V.getTheme(t,e):{}:(0,A.Z)(t)?t:{}}var w=i(4218),T=i(8469),C=i(4277),M=i(3722);class E{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(M.l.vchart,[]),this._levelNodes.set(M.l.chart,[]),this._levelNodes.set(M.l.model,[]),this._levelNodes.set(M.l.mark,[])}addHandler(t,e){var i;let s={level:e,handler:t};return null===(i=this._levelNodes.get(e))||void 0===i||i.push(s),this._map.set(t.callback,s),this}removeHandler(t){let e=this._map.get(t.callback);if(!e)return this;this._map.delete(t.callback);let i=this._levelNodes.get(e.level),s=null==i?void 0:i.findIndex(e=>e.handler.callback===t.callback);return void 0!==s&&s>=0&&(null==i||i.splice(s,1)),this}preventHandler(t){return t&&(t.prevented=!0),this}allowHandler(t){return t&&(t.prevented=!1),this}getHandlers(t){var e;return(null===(e=this._levelNodes.get(t))||void 0===e?void 0:e.map(t=>t.handler))||[]}getAllHandlers(){return Array.from(this._map.values()).map(t=>t.handler)||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}var B=i(1130),O=i(9038),I=i(6689),R=i(2937),P=i(2698),L=i(4761);let D={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend"};class Z{constructor(t,e){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=t=>{var e,i;let s=this.globalInstance.getChart(),r=(0,v.Z)(t.modelId)&&(null==s?void 0:s.getModelById(t.modelId))||void 0,n=(0,v.Z)(t.markId)&&(null==s?void 0:s.getMarkById(t.markId))||null,a=new Map,o=null===(e=t.item)||void 0===e?void 0:e.mark;for(o&&(0,v.Z)(o.id())&&a.set(o.id(),t.item);null==o?void 0:o.elements;){let t=o.id();(0,v.Z)(t)&&!a.has(t)&&a.set(t,o.elements[0]),o=o.group}let l=(0,B.Z)(t.event,"target"),h=t.datum;r&&"component"===r.modelType&&(h=null!==(i=r.getDatum(l))&&void 0!==i?i:h);let d={event:t.event,item:t.item,source:t.source,datum:h,itemMap:a,chart:s,model:r,mark:null!=n?n:void 0,node:(0,B.Z)(t.event,"target")};this.dispatch(t.type,d)},this._onDelegateInteractionEvent=t=>{let e=this.globalInstance.getChart(),i=t.event,s=null;i.elements&&(s=i.elements);let r={event:t.event,chart:e,items:s,datums:s&&s.map(t=>t.getDatum())};this.dispatch(t.type,r)},this.globalInstance=t,this._compiler=e}register(t,e){var i,s,r,n,a;this._parseQuery(e);let o=this.getEventBubble((null===(i=e.filter)||void 0===i?void 0:i.source)||M.AY.chart),l=this.getEventListeners((null===(s=e.filter)||void 0===s?void 0:s.source)||M.AY.chart);if(o.get(t)||o.set(t,new E),o.get(t).addHandler(e,null===(r=e.filter)||void 0===r?void 0:r.level),this._isValidEvent(t)&&!l.has(t)){let i=this._onDelegate.bind(this);this._compiler.addEventListener(null===(n=e.filter)||void 0===n?void 0:n.source,t,i),l.set(t,i)}else if(this._isInteractionEvent(t)&&!l.has(t)){let i=this._onDelegateInteractionEvent.bind(this);this._compiler.addEventListener(null===(a=e.filter)||void 0===a?void 0:a.source,t,i),l.set(t,i)}return this}unregister(t,e){var i,s,r,n;let a=!1,o=this.getEventBubble((null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.source)||M.AY.chart),l=this.getEventListeners((null===(s=null==e?void 0:e.filter)||void 0===s?void 0:s.source)||M.AY.chart);if(e){let i=o.get(t);null==i||i.removeHandler(e),0===(null==i?void 0:i.getCount())&&(null==i||i.release(),o.delete(t),a=!0),(null===(r=null==e?void 0:e.wrappedCallback)||void 0===r?void 0:r.cancel)&&e.wrappedCallback.cancel()}else{let e=o.get(t);null==e||e.release(),o.delete(t),a=!0}if(a&&this._isValidEvent(t)){let i=l.get(t);this._compiler.removeEventListener((null===(n=null==e?void 0:e.filter)||void 0===n?void 0:n.source)||M.AY.chart,t,i),l.delete(t)}return this}dispatch(t,e,i){let s=this.getEventBubble(e.source||M.AY.chart).get(t);if(!s)return this;let r=!1;if(i){let n=s.getHandlers(i);r=this._invoke(n,t,e)}else{let i=[M.l.mark,M.l.model,M.l.chart,M.l.vchart],n=0;for(;!r&&n<i.length;)r=this._invoke(s.getHandlers(i[n]),t,e),n++}return this}prevent(t,e){return["canvas","chart","window"].forEach(i=>{let s=this.getEventBubble(i).get(t);s&&s.getAllHandlers().forEach(t=>{e&&t.callback===e||s.preventHandler(t)})}),this}allow(t){return["canvas","chart","window"].forEach(e=>{let i=this.getEventBubble(e).get(t);i&&i.getAllHandlers().forEach(t=>i.allowHandler(t))}),this}clear(){[M.AY.chart,M.AY.window,M.AY.canvas].forEach(t=>{let e=this.getEventListeners(t);for(let i of e.entries())this._compiler.removeEventListener(t,i[0],i[1]);e.clear()}),[this._viewBubbles,this._windowBubbles,this._canvasBubbles].forEach(t=>{for(let e of t.values())e.release();t.clear()})}release(){this.clear(),this.globalInstance=null,this._compiler=null}_filter(t,e,i){var s,r,n;if((0,O.Z)(t.filter)&&!t.filter(i)||t.nodeName&&(0,B.Z)(i,"node.name")!==t.nodeName||t.markName&&(null===(s=null==i?void 0:i.mark)||void 0===s?void 0:s.name)!==t.markName)return!1;let a=null===(r=i.model)||void 0===r?void 0:r.type;return D[a]&&(a=D[a]),(!t.type||a===t.type)&&!("mark"===t.level&&!t.type&&!(null==i?void 0:i.mark))&&!("model"===t.level&&!t.type&&!(null==i?void 0:i.model))&&(!(0,v.Z)(t.userId)||(null===(n=i.model)||void 0===n?void 0:n.userId)===t.userId)}_prepareParams(t,e){if(t.markName&&e.mark&&e.itemMap){let t=e.mark.getProductId(),i=e.itemMap.get(t),s=null==i?void 0:i.getDatum();return Object.assign(Object.assign({},e),{item:i,datum:s})}return Object.assign({},e)}_invoke(t,e,i){return t.map(t=>{var s,r,n;let a=t.filter;if(!t.prevented&&(!t.query||this._filter(a,e,i))){let e=(t.wrappedCallback||t.callback).call(null,this._prepareParams(a,i)),o=null!=e?e:null===(s=t.query)||void 0===s?void 0:s.consume;return o&&(null===(r=i.event)||void 0===r||r.stopPropagation(),null===(n=i.event)||void 0===n||n.preventDefault()),!!o}}).some(t=>!0===t)}_getQueryLevel(t){return t?t.level?t.level:(0,v.Z)(t.id)?M.l.model:M.l.vchart:M.l.vchart}_parseQuery(t){var e;let i=t.query;(null==i?void 0:i.throttle)?t.wrappedCallback=(0,I.Z)(t.callback,i.throttle):(null==i?void 0:i.debounce)&&(t.wrappedCallback=(0,R.Z)(t.callback,i.debounce));let s=this._getQueryLevel(i),r=null,n=M.AY.chart,a=null,o=null,l=null;return(null==i?void 0:i.nodeName)&&(a=i.nodeName),(null==i?void 0:i.markName)&&(o=i.markName),(null==i?void 0:i.type)&&(s===M.l.model||s===M.l.mark)&&(r=i.type),(null==i?void 0:i.source)&&(n=i.source),(0,v.Z)(null==i?void 0:i.id)&&(l=null==i?void 0:i.id,s=M.l.model),t.filter={level:s,markName:o,type:r,source:n,nodeName:a,userId:l,filter:null!==(e=null==i?void 0:i.filter)&&void 0!==e?e:null},t}getEventBubble(t){switch(t){case M.AY.chart:return this._viewBubbles;case M.AY.window:return this._windowBubbles;case M.AY.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(t){switch(t){case M.AY.chart:return this._viewListeners;case M.AY.window:return this._windowListeners;case M.AY.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(t){return M.Ve.includes(t)||Object.values(P.ZK).includes(t)}_isInteractionEvent(t){let e;return t&&(e=t.split(":")[0])&&L.F.hasInteraction(e)}}let F=new Map;var j=i(6358),H=i(2990),z=i(1393),N=i(5719),V=i(670),U=i(6031),G=i(4659),W=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class X{getVGrammarView(){return this._view}getModel(){return this._model}constructor(t,e){this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._model={[U._.signal]:{},[U._.data]:{},[U._.mark]:{}},this._compileChart=null,this.handleStageRender=()=>{var t,e;null===(e=null===(t=this._compileChart)||void 0===t?void 0:t.getEvent())||void 0===e||e.emit(M.$7.afterRender,{chart:this._compileChart})},this._container=t,this._option=e}getRenderer(){var t;return null===(t=this._view)||void 0===t?void 0:t.renderer}getCanvas(){var t;return null===(t=this._view)||void 0===t?void 0:t.renderer.canvas()}getStage(){var t;return null===(t=this._view)||void 0===t?void 0:t.renderer.stage()}initView(){var t,e,i,s;if(this._released||(this.isInited=!0,this._view))return;let r=new G.Y(null!==(t=this._option.logLevel)&&void 0!==t?t:G.h.Error);(null===(e=this._option)||void 0===e?void 0:e.onError)&&r.addErrorHandler((...t)=>{var e,i;null===(i=null===(e=this._option)||void 0===e?void 0:e.onError)||void 0===i||i.call(e,...t)});let n=this._option,{performanceHook:o,autoRefreshDpr:l,dpr:h,mode:d,gestureConfig:u,interactive:c,clickInterval:p,autoPreventDefault:g}=n,m=W(n,["performanceHook","autoRefreshDpr","dpr","mode","gestureConfig","interactive","clickInterval","autoPreventDefault"]);this._view=new V.Z(Object.assign(Object.assign({width:this._width,height:this._height,container:null!==(i=this._container.dom)&&void 0!==i?i:null,renderCanvas:null!==(s=this._container.canvas)&&void 0!==s?s:null,hooks:o},m),{dpr:h,autoRefresh:(0,v.Z)(l)?l:!(0,v.Z)(h),mode:function(t){switch(t){case a.i["desktop-browser"]:case a.i["mobile-browser"]:break;case a.i.node:case a.i.worker:return"node";case a.i.miniApp:case a.i["desktop-miniApp"]:return"feishu";case a.i.lynx:return"lynx";case a.i.wx:return"wx";case a.i.tt:return"tt";case a.i.harmony:return"harmony"}return"browser"}(d),autoFit:!1,eventConfig:{gesture:(0,v.Z)(u)?u:(0,b.wx)(d),disable:!1===c,clickInterval:p,autoPreventDefault:g},doLayout:()=>{var t;null===(t=this._compileChart)||void 0===t||t.onLayout(this._view)},logger:r,logLevel:r.level()})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),!1!==c&&this._viewListeners.forEach(t=>{var e;null===(e=this._view)||void 0===e||e.addEventListener(t.type,t.callback)})}_setCanvasStyle(){if(this._view&&this._container.dom&&!(0,c.Z)(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";let t=this.getCanvas();t&&(t.style.display="block")}}compileInteractions(){var t;if(this._view.removeAllInteractions(),null===(t=this._interactions)||void 0===t?void 0:t.length){let t={};this._interactions.forEach(e=>{var i;if(e.regionId){let s=`${e.regionId}-${e.type}-${null!==(i=e.id)&&void 0!==i?i:""}`,r=t[s];t[s]=r?Object.assign(Object.assign(Object.assign({},r),e),{selector:[...r.selector,...e.selector]}):e}else this._view.interaction(e.type,e)}),Object.keys(t).forEach(e=>{let i=this._view.interaction(t[e].type,t[e]);if(this._compileChart){let s=this._compileChart.getRegionsInIds([t[e].regionId])[0];s&&s.interaction.addVgrammarInteraction(i.getStartState(),i)}})}}compile(t,e){if(this._released)return;let{chart:i}=t;this._compileChart=i,this.initView(),this._view&&(i.compile(),i.afterCompile(),this.updateDepend(),this.compileInteractions())}clearNextRender(){return!!this._nextRafId&&(u.rF.getCancelAnimationFrame()(this._nextRafId),this._nextRafId=null,!0)}clear(t,e=!1){let{chart:i}=t;this.clearNextRender(),i.clear(),this.releaseGrammar(e)}renderNextTick(t){this._released||this._nextRafId||(this._nextRafId=u.rF.getRequestAnimationFrame()(()=>{this._nextRafId=null,this.render(t)}))}render(t){var e,i;this._released||(this.initView(),this._view&&(null===(e=this._view)||void 0===e||e.run(t),this.clearNextRender()&&(null===(i=this._view)||void 0===i||i.run(t))))}updateViewBox(t,e=!0){this._view&&this._view.renderer.setViewBox(t,e)}resize(t,e,i=!0){this._view&&(this._width=t,this._height=e,this._view.resize(t,e),i&&this.render({morph:!1}))}setBackground(t){var e;null===(e=this._view)||void 0===e||e.background(t)}setSize(t,e){this._width=t,this._height=e,this._view&&(this._view.width(t),this._view.height(e))}setViewBox(t,e=!0){this._view&&this._view.renderer.setViewBox(t,e)}addEventListener(t,e,i){var s,r;if(!1!==this._option.interactive){if(t===M.AY.chart){let r=(function(s,r){var n,a,o;let l=null!==(a=null===(n=null==r?void 0:r.mark)||void 0===n?void 0:n.getContext())&&void 0!==a?a:{},h=(0,v.Z)(l.modelId)?l.modelId:null,d=(0,v.Z)(l.markId)?l.markId:null,u=(0,v.Z)(l.modelUserId)?l.modelUserId:null,c=(0,v.Z)(l.markUserId)?l.markUserId:null,p={event:s,type:e,source:t,item:r,datum:(null===(o=null==r?void 0:r.getDatum)||void 0===o?void 0:o.call(r))||null,markId:d,modelId:h,markUserId:c,modelUserId:u};i.call(null,p)}).bind(this);this._viewListeners.set(i,{type:e,callback:r}),null===(s=this._view)||void 0===s||s.addEventListener(e,r)}else if(t===M.AY.window){let s=(function(s){i.call(null,{event:s,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._windowListeners.set(i,{type:e,callback:s});let r=this._getGlobalThis();null==r||r.addEventListener(e,s)}else if(t===M.AY.canvas){let s=(function(s){i.call(null,{event:s,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._canvasListeners.set(i,{type:e,callback:s});let n=null===(r=this.getStage())||void 0===r?void 0:r.window;null==n||n.addEventListener(e,s)}}}removeEventListener(t,e,i){var s,r,n,a,o;if(!1!==this._option.interactive){if(t===M.AY.chart){let t=null===(s=this._viewListeners.get(i))||void 0===s?void 0:s.callback;t&&(null===(r=this._view)||void 0===r||r.removeEventListener(e,t)),this._viewListeners.delete(i)}else if(t===M.AY.window){let t=this._getGlobalThis(),s=null===(n=this._windowListeners.get(i))||void 0===n?void 0:n.callback;s&&(null==t||t.removeEventListener(e,s)),this._windowListeners.delete(i)}else if(t===M.AY.canvas){let t=null===(a=this.getStage())||void 0===a?void 0:a.window,s=null===(o=this._canvasListeners.get(i))||void 0===o?void 0:o.callback;t&&s&&(null==t||t.removeEventListener(e,s)),this._canvasListeners.delete(i)}}}releaseEvent(){let t=this.getStage();t&&t.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var t;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this._releaseModel(),null===(t=this._view)||void 0===t||t.release(),this._view=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(t=!1){var e,i;this._releaseModel(),t&&(null===(e=this._view)||void 0===e||e.removeAllGraphicItems()),null===(i=this._view)||void 0===i||i.removeAllGrammars()}_releaseModel(){Object.keys(this._model).forEach(t=>{Object.values(this._model[t]).forEach(t=>{Object.values(t).forEach(t=>{t.removeProduct(!0)})}),this._model[t]={}})}addGrammarItem(t){let e=t.getProduct();if((0,f.Z)(e))return;let i=e.id(),s=t.grammarType;(0,f.Z)(this._model[s][i])&&(this._model[s][i]={}),this._model[s][i][t.id]=t}removeGrammarItem(t,e){var i;let s=t.getProduct();if((0,f.Z)(s))return;let r=s.id(),n=t.grammarType,a=this._model[n][r];(0,v.Z)(a)&&(delete a[t.id],0===Object.keys(a).length&&delete this._model[n][r]),e||null===(i=this._view)||void 0===i||i.removeGrammar(s)}addInteraction(t){this._interactions||(this._interactions=[]),this._interactions.push(t)}removeInteraction(t){this._interactions&&(this._interactions=this._interactions.filter(e=>e.seriesId!==t))}updateDepend(t){return(0,v.Z)(t)&&t.length>0?t.every(t=>t.updateDepend()):(Object.values(this._model).forEach(t=>{Object.values(t).forEach(t=>{let e=Object.values(t),i=e[0].getProduct(),s=e.reduce((t,e)=>e.getDepend().length>0?t.concat(e.getDepend()):t,[]).filter(t=>!!t).map(t=>t.getProduct());i.depend(s)})}),!0)}_getGlobalThis(){var t;return(0,b.qe)(this._option.mode)?globalThis:null===(t=this.getStage())||void 0===t?void 0:t.window}}var Y=i(3685),$=i(9730),K=i(325),q=i(645),J=i(1121),Q=i(1395);let tt={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},te={poptip:(0,K.Z)({},tt)};var ti=i(6979),ts=i(5208),tr=i(2687),tn=i(564);class ta{get hover(){return this._hover}get select(){return this._select}constructor(t){this._marks=new tn.D,this._markReverse=new tn.D,this.onHover=t=>{switch(t.action){case"enter":this.interaction.getEventElement(ts.q.STATE_DIMENSION_HOVER).forEach(t=>this.interaction.addEventElement(ts.q.STATE_DIMENSION_HOVER_REVERSE,t)),this.interaction.clearEventElement(ts.q.STATE_DIMENSION_HOVER,!1),this.getEventElement(t).forEach(t=>this.interaction.addEventElement(ts.q.STATE_DIMENSION_HOVER,t)),this.interaction.reverseEventElement(ts.q.STATE_DIMENSION_HOVER);break;case"leave":this.interaction.clearEventElement(ts.q.STATE_DIMENSION_HOVER,!0),t=null}},this._option=t,this.event=this._option.model.getOption().getChart().getEvent(),this.interaction=t.interaction,this.initConfig(t.mode)}setStateKeys(t){}registerMark(t){(0,J.Z)(t.stateStyle[ts.q.STATE_DIMENSION_HOVER])||this._marks.addMark(t),(0,J.Z)(t.stateStyle[ts.q.STATE_DIMENSION_HOVER_REVERSE])||this._markReverse.addMark(t)}init(){this.initEvent()}release(){this.releaseEvent()}initEvent(){this.event.on(tr.C.dimensionHover,this.onHover)}releaseEvent(){this.event.release()}initConfig(t){}getEventElement(t,e=!1){let i=[];return t.dimensionInfo.forEach(t=>{t.data.forEach(t=>{(e?this._markReverse:this._marks).getMarks().filter(e=>e.model===t.series&&e.getVisible()).forEach(s=>{let r=s.getProduct();if(!r||!r.elements)return;let n=r.elements.filter(i=>{let s;let r=i.getDatum();return s=(0,p.Z)(r)?r.every((e,i)=>e===t.datum[i]):t.datum.some(t=>t===r),e?!s:s});i.push(...n)})})}),i}}var to=i(1966);class tl{constructor(){this._stateMarks=new Map,this._stateElements=new Map,this._vgrammarInteractions=new Map,this._disableTriggerEvent=!1}addVgrammarInteraction(t,e){t&&(this._vgrammarInteractions.get(t)?this._vgrammarInteractions.get(t).push(e):this._vgrammarInteractions.set(t,[e]))}static markStateEnable(t,e){return!(0,J.Z)(t.stateStyle[e])}setDisableActiveEffect(t){this._disableTriggerEvent=t}registerMark(t,e){var i;this._stateMarks.has(t)||this._stateMarks.set(t,[]),null===(i=this._stateMarks.get(t))||void 0===i||i.push(e)}getStateMark(t){return this._stateMarks.get(t)}filterEventMark(t,e){var i;return!(!t.mark||!(null===(i=this._stateMarks.get(e))||void 0===i?void 0:i.includes(t.mark)))}getEventElement(t){var e;return null!==(e=this._stateElements.get(t))&&void 0!==e?e:[]}getEventElementData(t){return this.getEventElement(t).map(t=>t.getDatum())}exchangeEventElement(t,e){var i;if(this._disableTriggerEvent)return;let s=(0,to.Aw)(t);null===(i=this._stateElements.get(t))||void 0===i||i.forEach(e=>{e.removeState(t),s&&this.addEventElement(s,e)}),e.getStates().includes(t)||(e.addState(t),s&&e.removeState(s)),this._stateElements.set(t,[e])}removeEventElement(t,e){var i,s;if(this._disableTriggerEvent)return;e.removeState(t);let r=null!==(s=null===(i=this._stateElements.get(t))||void 0===i?void 0:i.filter(t=>t!==e))&&void 0!==s?s:[];this._stateElements.set(t,r);let n=(0,to.Aw)(t);n&&(0===r.length?this.clearEventElement(n,!1):this.addEventElement(n,e))}addEventElement(t,e){var i;if(this._disableTriggerEvent)return;e.getStates().includes(t)||e.addState(t);let s=null!==(i=this._stateElements.get(t))&&void 0!==i?i:[];s.push(e),this._stateElements.set(t,s)}clearEventElement(t,e){var i;if(!this._disableTriggerEvent&&(null===(i=this._stateElements.get(t))||void 0===i||i.forEach(e=>{e.removeState(t)}),this._stateElements.set(t,[]),e)){let e=(0,to.Aw)(t);e&&this.clearEventElement(e,!1)}}clearAllEventElement(){if(!this._disableTriggerEvent)for(let[t,e]of this._stateElements)e.forEach(t=>{t.clearStates()}),this._stateElements.set(t,[])}reverseEventElement(t){if(this._disableTriggerEvent)return;let e=(0,to.Aw)(t);if(!e)return;let i=this.getStateMark(e);if(!i)return;let s=this.getEventElement(t);s.length&&(this.getEventElement(e).length||(1===s.length?i.forEach(t=>{t.getProduct().elements.filter(t=>t!==s[0]).forEach(t=>{this.addEventElement(e,t)})}):i.forEach(t=>{t.getProduct().elements.filter(t=>!s.includes(t)).forEach(t=>{this.addEventElement(e,t)})})))}startInteraction(t,e){let i=this._vgrammarInteractions.get(t);i&&i.forEach(t=>{t.start(e)})}resetInteraction(t,e){let i=this._vgrammarInteractions.get(t);i&&i.forEach(t=>{t.reset(e)})}resetAllInteraction(){for(let[t,e]of this._vgrammarInteractions)e&&e.forEach(t=>{t.reset(null)})}}var th=i(6542),td=i(9231),tu=i(1125),tc=i(881),tp=i(397);class tg extends tp.T{_initTheme(t,e){return{spec:t,theme:this._theme}}}class tm extends tc.r{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(t){this._layout.maxWidth=t}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(t){this._layout.maxHeight=t}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return!0===this._spec.stackInverse}getStackSort(){return!0===this._spec.stackSort}constructor(t,e){var i;super(t,e),this.transformerConstructor=tg,this.modelType="region",this.specKey="region",this.type=tm.type,this._series=[],this.layoutType="region",this.layoutZIndex=th.Ai.Region,this.interaction=new tl,this.seriesDataFilterOver=()=>{this.event.emit(M.$7.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(t=>{t.getViewDataFilter()&&t.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=t.id,this.coordinate=null!==(i=t.coordinate)&&void 0!==i?i:"cartesian",this._option.animation&&(this.animate=new tu.W({getCompiler:e.getCompiler})),this.interaction.setDisableActiveEffect(this._option.disableTriggerEvent)}_getClipDefaultValue(){var t,e,i,s;let r=this._option.getChart().getSpec(),n=null===(e=null===(t=r.dataZoom)||void 0===t?void 0:t.some)||void 0===e?void 0:e.call(t,t=>{var e;return"axis"===(null!==(e=t.filterMode)&&void 0!==e?e:"filter")}),a=null===(s=null===(i=r.scrollBar)||void 0===i?void 0:i.some)||void 0===s?void 0:s.call(i,t=>{var e;return"axis"===(null!==(e=t.filterMode)&&void 0!==e?e:"axis")});return!(!n&&!a)||this._layout.layoutClip}created(){var t,e;this.initLayout(),super.created();let i=null!==(t=this._spec.clip)&&void 0!==t?t:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._spec.roam&&this._groupMark.setMarkConfig({interactive:!0}),this._interactionMark=this._createGroupMark("regionInteractionGroup",(null!==(e=this.userId)&&void 0!==e?e:this.type)+"_interaction",th.Ai.Interaction),(0,J.Z)(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"}),i&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"})),[this._backgroundMark,this._foregroundMark].forEach(t=>{t&&(t.created(),this.setMarkStyle(t,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",td.W.Built_In),this._groupMark.addMark(t))}),this._backgroundMark&&this._backgroundMark.setMarkConfig({zIndex:th.Ai.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({zIndex:th.Ai.Mark+1})),this.createTrigger()}_createGroupMark(t,e,i){var s,r;let n=this._createMark({type:"group",name:t});n.setUserId(e),n.setMarkConfig({zIndex:i});let a=null!==(s=this._spec.clip)&&void 0!==s?s:this._getClipDefaultValue();return this.setMarkStyle(n,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:a},"normal",td.W.Built_In),this.setMarkStyle(n,{cornerRadius:null===(r=this._spec.style)||void 0===r?void 0:r.cornerRadius},"normal",td.W.User_Mark),this._marks.addMark(n),n}init(t){super.init(t),this.initMark(),this.initSeriesDataflow(),this.initInteraction(),this.initTrigger()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var t,e;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:(null===(t=this._spec.style)||void 0===t?void 0:t.fill)?1:0},this._spec.style),"normal",td.W.User_Mark),(null!==(e=this._spec.clip)&&void 0!==e?e:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",td.W.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0,pickable:!1}),"normal",td.W.User_Mark)}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,$.X)(null==e?void 0:e.style,null==t?void 0:t.style)||(i.reMake=!0),i}reInit(t){super.reInit(t),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(t){t&&(this._series.includes(t)||this._series.push(t))}removeSeries(t){if(!t)return;let e=this._series.findIndex(e=>e===t);e>=0&&this._series.splice(e,1)}getSeries(t={}){return this._series.filter(e=>{var i,s;return(!t.name||(null==e?void 0:e.name)===t.name)&&(!t.userId||(0,m.IX)(t.userId).includes(e.userId))&&(!(0,v.Z)(t.specIndex)||(0,m.IX)(t.specIndex).includes(e.getSpecIndex()))&&(!t.id||e.id===t.id)&&(!t.type||e.type===t.type)&&(!t.coordinateType||e.coordinate===t.coordinateType)&&(!t.dataName||(null===(s=null===(i=e.getRawData)||void 0===i?void 0:i.call(e))||void 0===s?void 0:s.name)===t.dataName)})}getSeriesInName(t){return this.getSeries({name:t})[0]}getSeriesInUserId(t){return this.getSeries({userId:t})[0]}getSeriesInId(t){return this.getSeries({id:t})[0]}getSeriesInType(t){return this.getSeries({type:t})}getSeriesInCoordinateType(t){return this.getSeries({coordinateType:t})}getSeriesInDataName(t){return this.getSeries({dataName:t})}onRender(t){}initSeriesDataflow(){let t=this._series.map(t=>{var e;return null!==(e=t.getViewDataFilter())&&void 0!==e?e:t.getViewData()}).filter(t=>!!t);this._option.dataSet.multipleDataViewAddListener(t,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}createTrigger(){let t=Object.assign(Object.assign({},this._option),{model:this,interaction:this.interaction});this._trigger=new ta(t)}initTrigger(){this._series.forEach(t=>{t.getMarksWithoutRoot().forEach(t=>{this._trigger.registerMark(t)})}),this._trigger.init()}initInteraction(){this._option.disableTriggerEvent||this._series.forEach(t=>{t.getMarksWithoutRoot().forEach(t=>{for(let e in ts.p)(0,J.Z)(t.stateStyle[ts.p[e]])||this.interaction.registerMark(ts.p[e],t)})})}compileMarks(t){this.getMarks().forEach(e=>{var i;e.compile({group:t,context:{model:this}}),null===(i=e.getProduct())||void 0===i||i.layout((t,e,i,s)=>{})})}compile(){var t;null===(t=this.animate)||void 0===t||t.compile(),this.compileMarks()}onLayoutEnd(t){this._series.forEach(e=>e.onLayoutEnd(t)),super.onLayoutEnd(t)}}function tf(t){let e=[],i=[],s=[];return t.forEach(t=>{(0,f.Z)(t.getSpec().position)||"start"===t.getSpec().position?e.push(t):"middle"===t.getSpec().position?i.push(t):"end"===t.getSpec().position&&s.push(t)}),{startItems:e,endItems:s,middleItems:i}}function tv(t,e,i){e?t.forEach(t=>{let e=(0,m.Z$)(t),s=(i-(e.getLayoutStartPoint().y+e.getLayoutRect().height-t[0].getLayoutStartPoint().y))/2;t.forEach(t=>{t.setLayoutStartPosition({x:t.getLayoutStartPoint().x,y:t.getLayoutStartPoint().y+s})})}):t.forEach(t=>{let e=(0,m.Z$)(t),s=(i-(e.getLayoutStartPoint().x+e.getLayoutRect().width-t[0].getLayoutStartPoint().x))/2;t.forEach(t=>{t.setLayoutStartPosition({x:t.getLayoutStartPoint().x+s,y:t.getLayoutStartPoint().y})})})}function t_(t,e,i,s){let r;t.forEach((t,n)=>{t.length>1&&(r=i[n],t.forEach(t=>{if(!t.alignSelf||"start"===t.alignSelf)return;let i=t.getLayoutStartPoint(),n="middle"===t.alignSelf?.5:1,a=e?r-(t.getLayoutRect().width+t.layoutPaddingLeft+t.layoutPaddingRight):r-(t.getLayoutRect().height+t.layoutPaddingTop+t.layoutPaddingBottom);e?t.setLayoutStartPosition({x:i.x+s*a*n,y:i.y}):t.setLayoutStartPosition({x:i.x,y:i.y+s*a*n})}))})}function ty(t,e,i,s,r){if(t.length){let n=0,a="right"===r,o=a?-1:1,l=a?e.rightCurrent:e.leftCurrent,h=e.topCurrent,d=[],u=[],c=[];t.forEach(t=>{let s=e.getItemComputeLayoutRect(t),r=t.computeBoundsInRect(s);t.setLayoutRect(r);let p=r.height+t.layoutPaddingTop+t.layoutPaddingBottom,g=r.width+t.layoutPaddingLeft+t.layoutPaddingRight,m=a?-r.width-t.layoutPaddingRight:t.layoutPaddingLeft;t.setLayoutStartPosition({x:l+t.layoutOffsetX+m,y:h+t.layoutOffsetY+t.layoutPaddingTop}),(h+=p)>i&&u.length?(c.push(n),l+=o*n,n=g,h=e.topCurrent+p,t.setLayoutStartPosition({x:l+t.layoutOffsetX+m,y:e.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),d.push(u),u=[t]):(n=Math.max(n,g),u.push(t))}),c.push(n),d.push(u),t_(d,!0,c,o),s&&tv(d,!0,i),a?e.rightCurrent=l+o*n:e.leftCurrent=l+o*n}}function tb(t,e,i,s){if(t.length){let i=0,r="right"===s,n=r?-1:1,a=r?e.rightCurrent:e.leftCurrent,o=e.bottomCurrent,l=[],h=[],d=[];t.forEach(t=>{let s=e.getItemComputeLayoutRect(t),u=t.computeBoundsInRect(s);t.setLayoutRect(u);let c=u.height+t.layoutPaddingTop+t.layoutPaddingBottom,p=u.width+t.layoutPaddingLeft+t.layoutPaddingRight,g=r?-u.width-t.layoutPaddingRight:t.layoutPaddingLeft;o<c&&h.length?(d.push(i),a+=n*i,i=p,o=e.bottomCurrent,t.setLayoutStartPosition({x:a+t.layoutOffsetX+g,y:o+t.layoutOffsetY-u.height-t.layoutPaddingBottom}),l.push(h),h=[t]):(t.setLayoutStartPosition({x:a+t.layoutOffsetX+g,y:o+t.layoutOffsetY-u.height-t.layoutPaddingBottom}),i=Math.max(i,p),o-=c,h.push(t))}),d.push(i),l.push(h),t_(l,!0,d,n),r?e.rightCurrent=a+n*i:e.leftCurrent=a+n*i}}function tx(t,e,i,s,r){if(t.length){let n="top"===r,a=n?1:-1,o=0,l=e.leftCurrent,h=n?e.topCurrent:e.bottomCurrent,d=[],u=[],c=[];t.forEach(t=>{let s=e.getItemComputeLayoutRect(t),r=t.computeBoundsInRect(s);t.setLayoutRect(r);let p=r.height+t.layoutPaddingTop+t.layoutPaddingBottom,g=r.width+t.layoutPaddingLeft+t.layoutPaddingRight,m=n?t.layoutPaddingTop:-r.height-t.layoutPaddingBottom;t.setLayoutStartPosition({x:l+t.layoutOffsetX+t.layoutPaddingLeft,y:h+t.layoutOffsetY+m}),(l+=g)>i&&u.length?(c.push(o),l=e.leftCurrent+g,h+=a*o,o=p,t.setLayoutStartPosition({x:e.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:h+t.layoutOffsetY+m}),d.push(u),u=[t]):(o=Math.max(o,p),u.push(t))}),c.push(o),d.push(u),t_(d,!1,c,a),s&&tv(d,!1,i),n?e.topCurrent=h+a*o:e.bottomCurrent=h+a*o}}function tS(t,e,i,s){if(t.length){let i="top"===s,r=i?1:-1,n=0,a=e.rightCurrent,o=i?e.topCurrent:e.bottomCurrent,l=[],h=[],d=[];t.forEach(t=>{let s=e.getItemComputeLayoutRect(t),d=t.computeBoundsInRect(s);t.setLayoutRect(d);let u=d.height+t.layoutPaddingTop+t.layoutPaddingBottom,c=d.width+t.layoutPaddingLeft+t.layoutPaddingRight,p=i?t.layoutPaddingTop:-d.height-t.layoutPaddingBottom;a<c&&h.length?(a=e.rightCurrent,o+=r*n,n=u,t.setLayoutStartPosition({x:e.rightCurrent+t.layoutOffsetX-d.width-t.layoutPaddingRight,y:o+t.layoutOffsetY+p}),l.push(h),h=[t]):(h.push(t),t.setLayoutStartPosition({x:a+t.layoutOffsetX-d.width-t.layoutPaddingRight,y:o+t.layoutOffsetY+p}),n=Math.max(n,u),a-=c)}),d.push(n),l.push(h),t_(l,!1,d,r),i?e.topCurrent=o+r*n:e.bottomCurrent=o+r*n}}tm.type="region",tm.transformerConstructor=tg,tm.specKey="region";class tA{constructor(t,e){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this._onError=null==e?void 0:e.onError}_layoutInit(t,e,i,s){this._chartLayoutRect=i,this._chartViewBox=s,this.leftCurrent=i.x,this.topCurrent=i.y,this.rightCurrent=i.x+i.width,this.bottomCurrent=i.height+i.y,e.sort((t,e)=>e.layoutLevel-t.layoutLevel)}_layoutNormalItems(t){this.layoutNormalInlineItems(t.filter(t=>"normal-inline"===t.layoutType)),this.layoutNormalItems(t.filter(t=>"normal"===t.layoutType))}_groupItems(t){let e=t.filter(t=>"region"===t.layoutType),i=t.filter(t=>"region-relative"===t.layoutType),s=t.filter(t=>"region-relative-overlap"===t.layoutType),r=i.concat(s),n={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return s.forEach(t=>{n[t.layoutOrient].items.push(t)}),{regionItems:e,relativeItems:i,relativeOverlapItems:s,allRelatives:r,overlapItems:n}}layoutItems(t,e,i,s){this._layoutInit(t,e,i,s),this._layoutNormalItems(e);let r={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:n,relativeItems:a,relativeOverlapItems:o,allRelatives:l,overlapItems:h}=this._groupItems(e);this.layoutRegionItems(n,a,o,h),this._processAutoIndent(n,a,o,h,l,r),this.layoutAbsoluteItems(e.filter(t=>"absolute"===t.layoutType))}_processAutoIndent(t,e,i,s={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},r,n){if(r.some(t=>t.autoIndent)){let{top:a,bottom:o,left:l,right:h}=this._checkAutoIndent(r,n);(a||o||l||h)&&(this.topCurrent=n.top+a,this.bottomCurrent=n.bottom-o,this.leftCurrent=n.left+l,this.rightCurrent=n.right-h,this.layoutRegionItems(t,e,i,s))}}layoutNormalItems(t){t.forEach(t=>{let e=this.getItemComputeLayoutRect(t),i=t.computeBoundsInRect(e);t.setLayoutRect(i),"left"===t.layoutOrient?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.leftCurrent+=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):"top"===t.layoutOrient?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=i.height+t.layoutPaddingTop+t.layoutPaddingBottom):"right"===t.layoutOrient?(t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX-i.width-t.layoutPaddingRight,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.rightCurrent-=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):"bottom"===t.layoutOrient&&(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingRight,y:this.bottomCurrent+t.layoutOffsetY-i.height-t.layoutPaddingBottom}),this.bottomCurrent-=i.height+t.layoutPaddingTop+t.layoutPaddingBottom)})}layoutNormalInlineItems(t){let e=t.filter(t=>"left"===t.layoutOrient),i=t.filter(t=>"right"===t.layoutOrient),s=t.filter(t=>"top"===t.layoutOrient),r=t.filter(t=>"bottom"===t.layoutOrient),n=this._chartLayoutRect.width+this._chartLayoutRect.x,a=this._chartLayoutRect.height+this._chartLayoutRect.y;e.length&&function(t,e,i){let{startItems:s,middleItems:r,endItems:n}=tf(t);s.length&&ty(s,e,i,!1,"left"),r.length&&ty(r,e,i,!0,"left"),n.length&&tb(n,e,i,"left")}(e,this,a),s.length&&function(t,e,i){let{startItems:s,middleItems:r,endItems:n}=tf(t);s.length&&tx(s,e,i,!1,"top"),r.length&&tx(r,e,i,!0,"top"),n.length&&tS(n,e,i,"top")}(s,this,n),i.length&&function(t,e,i){let{startItems:s,middleItems:r,endItems:n}=tf(t);s.length&&ty(s,e,i,!1,"right"),r.length&&ty(r,e,i,!0,"right"),n.length&&tb(n,e,i,"right")}(i,this,a),r.length&&function(t,e,i){let{startItems:s,middleItems:r,endItems:n}=tf(t);s.length&&tx(s,e,i,!1,"bottom"),r.length&&tx(r,e,i,!0,"bottom"),n.length&&tS(n,e,i,"bottom")}(r,this,n)}_layoutRelativeOverlap(t,e){e.items.forEach(t=>{let i=this.getItemComputeLayoutRect(t),s=t.computeBoundsInRect(i);e.rect.width=Math.max(s.width+t.layoutPaddingLeft+t.layoutPaddingRight,e.rect.width),e.rect.height=Math.max(s.height+t.layoutPaddingTop+t.layoutPaddingBottom,e.rect.height)}),e.items.forEach(i=>{i.setLayoutRect(e.rect),"left"===t?i.setLayoutStartPosition({x:this.leftCurrent+i.layoutOffsetX}):"right"===t?i.setLayoutStartPosition({x:this.rightCurrent-e.rect.width+i.layoutOffsetX}):"top"===t?i.setLayoutStartPosition({x:this.topCurrent+i.layoutOffsetY}):i.setLayoutStartPosition({x:this.bottomCurrent-e.rect.height+i.layoutOffsetY})}),"left"===t?this.leftCurrent+=e.rect.width:"right"===t?this.rightCurrent-=e.rect.width:"top"===t?this.topCurrent+=e.rect.height:this.bottomCurrent-=e.rect.height}_layoutRelativeItem(t,e){let i=t.computeBoundsInRect(e);"left"===t.layoutOrient||"right"===t.layoutOrient?t.setLayoutRect({width:i.width}):t.setLayoutRect({height:i.height}),"left"===t.layoutOrient?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft}),this.leftCurrent+=i.width+t.layoutPaddingLeft+t.layoutPaddingRight):"right"===t.layoutOrient?(this.rightCurrent-=i.width+t.layoutPaddingLeft+t.layoutPaddingRight,t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX+t.layoutPaddingLeft})):"top"===t.layoutOrient?(t.setLayoutStartPosition({y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=i.height+t.layoutPaddingTop+t.layoutPaddingBottom):"bottom"===t.layoutOrient&&(this.bottomCurrent-=i.height+t.layoutPaddingTop+t.layoutPaddingBottom,t.setLayoutStartPosition({y:this.bottomCurrent+t.layoutOffsetY+t.layoutPaddingTop}))}_layoutRegionItem(t,e,i){let s=Math.max(Math.min(e,...t.map(t=>{var e;return null!==(e=t.maxWidth)&&void 0!==e?e:Number.MAX_VALUE})),0),r=Math.max(Math.min(i,...t.map(t=>{var e;return null!==(e=t.maxHeight)&&void 0!==e?e:Number.MAX_VALUE})),0);return t.forEach(t=>{let e=s-t.layoutPaddingLeft-t.layoutPaddingRight,i=r-t.layoutPaddingTop-t.layoutPaddingBottom;t.setLayoutRect({width:e,height:i}),t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft,y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop})}),{regionHeight:r,regionWidth:s}}layoutRegionItems(t,e,i,s={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}}){let r=this.rightCurrent-this.leftCurrent,n=this.bottomCurrent-this.topCurrent;e.filter(t=>"left"===t.layoutOrient||"right"===t.layoutOrient).forEach(t=>{this._layoutRelativeItem(t,this.getItemComputeLayoutRect(t))}),this._layoutRelativeOverlap("left",s.left),this._layoutRelativeOverlap("right",s.right),r=this.rightCurrent-this.leftCurrent,e.filter(t=>"top"===t.layoutOrient||"bottom"===t.layoutOrient).forEach(t=>{this._layoutRelativeItem(t,this.getItemComputeLayoutRect(t))}),this._layoutRelativeOverlap("top",s.top),this._layoutRelativeOverlap("bottom",s.bottom),n=this.bottomCurrent-this.topCurrent;let{regionWidth:a,regionHeight:o}=this._layoutRegionItem(t,r,n);e.concat(i).forEach(e=>{if(["left","right"].includes(e.layoutOrient)){let i=this.filterRegionsWithID(t,e.layoutBindRegionID[0]);e.setLayoutRect({height:i.getLayoutRect().height}),e.setLayoutStartPosition({y:i.getLayoutStartPoint().y+e.layoutOffsetY+e.layoutPaddingTop}),"right"===e.layoutOrient&&e.setLayoutStartPosition({x:e.getLayoutStartPoint().x+a-r})}else if(["top","bottom"].includes(e.layoutOrient)){let i=this.filterRegionsWithID(t,e.layoutBindRegionID[0]);e.setLayoutRect({width:i.getLayoutRect().width}),e.setLayoutStartPosition({x:i.getLayoutStartPoint().x+e.layoutOffsetX+e.layoutPaddingLeft}),"bottom"===e.layoutOrient&&e.setLayoutStartPosition({y:e.getLayoutStartPoint().y+o-n})}})}layoutAbsoluteItems(t){t.forEach(t=>{t.absoluteLayoutInRect(this._chartLayoutRect)})}filterRegionsWithID(t,e){var i;let s=t.find(t=>t.getModelId()===e);return s||(null!==(i=this._onError)&&void 0!==i?i:x.vU)("can not find target region item, invalid id"),s}getItemComputeLayoutRect(t){return{width:this.rightCurrent-this.leftCurrent-t.layoutPaddingLeft-t.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-t.layoutPaddingTop-t.layoutPaddingBottom}}_checkAutoIndent(t,e){let i={top:0,left:0,bottom:0,right:0};return t.forEach(t=>{if(!t.getModelVisible()||!t.autoIndent)return;let s="left"===t.layoutOrient||"right"===t.layoutOrient,r=t.getLastComputeOutBounds(),n=this._getOutInLayout(r,t,e);s?(i.top=Math.max(i.top,n.top),i.bottom=Math.max(i.bottom,n.bottom)):(i.left=Math.max(i.left,n.left),i.right=Math.max(i.right,n.right))}),i}_getOutInLayout(t,e,i){let{x:s,y:r}=e.getLayoutStartPoint(),{width:n,height:a}=e.getLayoutRect();return{left:i.left-(s-t.x1),right:s+n+t.x2-i.right,top:i.top-(r-t.y1),bottom:r+a+t.y2-i.bottom}}}tA.type="base";var tk=i(903),tw=i(5042),tT=i(8144),tC=i(5165);let tM=(t,e,i)=>(0,tT.gM)(t,e,i,{fontFamily:tC.r.fontFamily,fontSize:tC.r.fontSize});class tE{static instance(){return tE.instance_||(tE.instance_=new tE),tE.instance_}constructor(){this.functions={}}registerFunction(t,e){t&&e&&(this.functions[t]=e)}unregisterFunction(t){t&&delete this.functions[t]}getFunction(t){return this.functions[t]||null}getFunctionNameList(){return Object.keys(this.functions)}}var tB=i(8429),tO=i(3239);class tI{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(t){this._nativeCanvas=t}get width(){return this._pixelWidth}set width(t){this._pixelWidth=t,this._displayWidth=t/(this._dpr||1)}get height(){return this._pixelHeight}set height(t){this._pixelHeight=t,this._displayHeight=t/(this._dpr||1)}getContext(t){return this._context}get visiable(){return this._visiable}set visiable(t){this._visiable=t,t?this.show():this.hide()}get dpr(){return this._dpr}set dpr(t){this._dpr=t,this.resize(this._displayWidth,this._displayHeight)}constructor(t){var e;let{nativeCanvas:i,width:s=500,height:r=500,dpr:n=1,x:a,y:o,id:l,canvasControled:h=!0}=t;this._x=null!=a?a:0,this._y=null!=o?o:0,this._pixelWidth=s*n,this._pixelHeight=r*n,this._visiable=!1!==t.visiable,this.controled=h,this._displayWidth=s,this._displayHeight=r,this._dpr=n,this._nativeCanvas=i,this._id=null!==(e=i.id)&&void 0!==e?e:l,l&&(i.id=l),this.init(t)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(t){}resize(t,e){}toDataURL(t,e){return""}readPixels(t,e,i,s){return this._context.getImageData(t,e,i,s)}convertToBlob(t){throw Error("暂未实现")}transferToImageBitmap(){throw Error("暂未实现")}release(...t){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}tI.env="browser";var tR=i(534),tP=i(7428),tL=i(8103),tD=i(9935),tZ=i(7183),tF=i(9607),tj=i(8113),tH=i(7317),tz=i(3140),tN=i(3116);let tV=[0,0,0],tU=(t,e,i,s,r,n,a,o)=>{if(o)for(;i>e;)i-=tL.f7;else for(;i<e;)i+=tL.f7;let l=tL.pi/3*(i>e?1:-1),h=e,d=h;for(;d!==i;){let e=4*Math.tan(Math.abs((d=l>0?Math.min(d+l,i):Math.max(d+l,i))-h)/4)/3,o=d<h?-1:1,u=Math.cos(h),c=Math.sin(h),p=Math.cos(d),g=Math.sin(d),m=u*n+s,f=c*a+r,v=p*n+s,_=g*a+r,y=n*e*o,b=a*e*o;t.push([m-y*c,f+b*u,v+y*g,_-b*p,v,_]),h=d}},tG=class{set fillStyle(t){this.nativeContext.fillStyle=t}get fillStyle(){return this.nativeContext.fillStyle}set font(t){this.nativeContext.font=t}get font(){return this.nativeContext.font}set globalAlpha(t){this.nativeContext.globalAlpha=t*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(t){this.nativeContext.lineCap=t}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(t){this.nativeContext.lineDashOffset=t}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(t){this.nativeContext.lineJoin=t}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(t){this.nativeContext.lineWidth=t}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(t){this.nativeContext.miterLimit=t}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(t){this.nativeContext.shadowBlur=t}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(t){this.nativeContext.shadowColor=t}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(t){this.nativeContext.shadowOffsetX=t}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(t){this.nativeContext.shadowOffsetY=t}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(t){this.nativeContext.strokeStyle=t}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(t){this.nativeContext.textAlign=t}get textAlign(){return this.nativeContext.textAlign}set textBaseline(t){this.nativeContext.textBaseline=t}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(t){!!this._inuse!==t&&(this._inuse=t,t?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(t,e){this.fillAttributes=Object.assign(Object.assign({},tF.pp),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},tF.WC),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},tF.q9),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;let i=t.nativeCanvas.getContext("2d");if(!i)throw Error("发生错误，获取2d上下文失败");this.nativeContext=i,this.canvas=t,this.matrix=new tD.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new tD.y(1,0,0,1,0,0),this._clearMatrix=new tD.y(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(){this.stack.length&&G.Y.getInstance().warn("可能存在bug，matrix没有清空"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new tD.y(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(t){return tj.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(tj.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}highPerformanceRestore(){this.stack.length>0&&(tj.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t),this.nativeContext.save()}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,i=!0){this.matrix.scale(t,e),i&&this.setTransformForCurrent()}setScale(t,e,i=!0){this.matrix.setScale(t,e),i&&this.setTransformForCurrent()}scalePoint(t,e,i,s,r=!0){this.translate(i,s,!1),this.scale(t,e,!1),this.translate(-i,-s,!1),r&&this.setTransformForCurrent()}setTransform(t,e,i,s,r,n,a=!0,o=this.dpr){this.matrix.setValue(o*t,o*e,o*i,o*s,o*r,o*n),a&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,i=this.dpr){this.matrix.setValue(t.a*i,t.b*i,t.c*i,t.d*i,t.e*i,t.f*i),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,i,s,r,n,a=!0){this.matrix.multiply(t,e,i,s,r,n),a&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,i=!0){this.matrix.translate(t,e),i&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let i=t*Math.PI/180;this.rotate(i,e)}rotateAbout(t,e,i,s=!0){this.translate(e,i,!1),this.rotate(t,!1),this.translate(-e,-i,!1),s&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,i,s=!0){this.translate(e,i,!1),this.rotateDegrees(t,!1),this.translate(-e,-i,!1),s&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(t,e){t?"string"==typeof t?this.nativeContext.clip(t):this.nativeContext.clip(t,e):this.nativeContext.clip()}arc(t,e,i,s,r,n,a){if(a=a||0,this.camera){let o=[];tU(o,s,r,t,e,i,i,n);for(let t=0;t<o.length;++t){let e=o[t];this.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5],a)}}else this.nativeContext.arc(t,e,Math.max(0,i),s,r,n)}arcTo(t,e,i,s,r){this.nativeContext.arcTo(t,e,i,s,r)}bezierCurveTo(t,e,i,s,r,n,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&((0,tH.fF)(tV,[t,e,a],this.modelMatrix),t=tV[0],e=tV[1],o=tV[2],(0,tH.fF)(tV,[i,s,a],this.modelMatrix),i=tV[0],s=tV[1],l=tV[2],(0,tH.fF)(tV,[r,n,a],this.modelMatrix),r=tV[0],n=tV[1],a=tV[2]);let h=this.camera.vp(r,n,a);r=h.x,n=h.y,t=(h=this.camera.vp(t,e,o)).x,e=h.y,i=(h=this.camera.vp(i,s,l)).x,s=h.y}this.nativeContext.bezierCurveTo(t,e,i,s,r,n)}closePath(){this.nativeContext.closePath()}ellipse(t,e,i,s,r,n,a,o){null==o?this.nativeContext.ellipse(t,e,i,s,r,n,a):this.nativeContext.ellipse(t,e,i,s,r,n,a,o)}lineTo(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,tH.fF)(tV,[t,e,i],this.modelMatrix),t=tV[0],e=tV[1],i=tV[2]);let s=this.camera.vp(t,e,i);t=s.x,e=s.y}this.nativeContext.lineTo(t,e)}moveTo(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,tH.fF)(tV,[t,e,i],this.modelMatrix),t=tV[0],e=tV[1],i=tV[2]);let s=this.camera.vp(t,e,i);t=s.x,e=s.y}this.nativeContext.moveTo(t,e)}quadraticCurveTo(t,e,i,s,r){if(r=r||0,this.camera){let n=r;this.modelMatrix&&((0,tH.fF)(tV,[t,e,r],this.modelMatrix),t=tV[0],e=tV[1],n=tV[2],(0,tH.fF)(tV,[i,s,r],this.modelMatrix),i=tV[0],s=tV[1],r=tV[2]);let a=this.camera.vp(i,s,r);i=a.x,s=a.y,t=(a=this.camera.vp(t,e,n)).x,e=a.y}this.nativeContext.quadraticCurveTo(t,e,i,s)}rect(t,e,i,s,r){r=r||0,this.camera?(this.moveTo(t,e,r),this.lineTo(t+i,e,r),this.lineTo(t+i,e+s,r),this.lineTo(t,e+s,r),this.closePath()):this.nativeContext.rect(t,e,i,s)}createImageData(){let t=arguments;return 2===t.length?this.nativeContext.createImageData(t[0],t[1]):1===t.length?this.nativeContext.createImageData(t[0]):null}createLinearGradient(t,e,i,s){return isFinite(t+e+i+s)||(t=0,e=0,i=0,s=0),this.nativeContext.createLinearGradient(t,e,i,s)}createPattern(t,e){return 0===t.width||0===t.height?null:this.nativeContext.createPattern(t,e)}createRadialGradient(t,e,i,s,r,n){return this.nativeContext.createRadialGradient(t,e,i,s,r,n)}createConicGradient(t,e,i,s){let r,n=!1,a=this;return{stops:[],addColorStop(t,e){this.stops.push([t,e]),n=!0},GetPattern(o,l,h){return n&&(h||(h=s-i),r=(0,tz.Of)(a,this.stops,t,e,h,i,s,o,l),n=!1),r}}}fill(t,e){this.disableFill||(t?this.nativeContext.fill(t):this.nativeContext.fill())}fillRect(t,e,i,s){this.nativeContext.fillRect(t,e,i,s)}clearRect(t,e,i,s){this.nativeContext.clearRect(t,e,i,s)}project(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,tH.fF)(tV,[t,e,i],this.modelMatrix),t=tV[0],e=tV[1],i=tV[2]);let s=this.camera.vp(t,e,i);t=s.x,e=s.y}return{x:t,y:e}}view(t,e,i){return i=i||0,this.camera?(this.modelMatrix&&((0,tH.fF)(tV,[t,e,i],this.modelMatrix),t=tV[0],e=tV[1],i=tV[2]),this.camera.view(t,e,i)):[t,e,i]}fillText(t,e,i,s){if(s=s||0,this.camera){this.modelMatrix&&((0,tH.fF)(tV,[e,i,s],this.modelMatrix),e=tV[0],i=tV[1],s=tV[2]);let t=this.camera.vp(e,i,s);e=t.x,i=t.y}this.nativeContext.fillText(t,e,i)}getImageData(t,e,i,s){return this.nativeContext.getImageData(t,e,i,s)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(t,e){return this.nativeContext.isPointInPath(t,e)}isPointInStroke(t,e){return this.nativeContext.isPointInStroke(t,e)}measureText(t,e=tR.w.global.measureTextMethod){var i,s;if(!e||"native"===e)return this.nativeContext.measureText(t);this.mathTextMeasure||(this.mathTextMeasure=tR.w.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));let r=null!==(i=this.fontFamily)&&void 0!==i?i:tF.q9.fontFamily,n=null!==(s=this.fontSize)&&void 0!==s?s:tF.q9.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===n||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=n,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(t,e)}putImageData(t,e,i){this.nativeContext.putImageData(t,e,i)}setLineDash(t){let e=arguments,i=this.nativeContext;this.nativeContext.setLineDash?e[0]&&i.setLineDash(e[0]):"mozDash"in i?i.mozDash=e[0]:"webkitLineDash"in i&&(i.webkitLineDash=e[0])}stroke(t){this.disableStroke||(t?this.nativeContext.stroke(t):this.nativeContext.stroke())}strokeRect(t,e,i,s){this.nativeContext.strokeRect(t,e,i,s)}strokeText(t,e,i,s){if(s=s||0,this.camera){this.modelMatrix&&((0,tH.fF)(tV,[e,i,s],this.modelMatrix),e=tV[0],i=tV[1],s=tV[2]);let t=this.camera.vp(e,i,s);e=t.x,i=t.y}this.nativeContext.strokeText(t,e,i)}drawImage(){let t=this.nativeContext,e=arguments;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}setCommonStyle(t,e,i,s,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(t,e,i,s,r[0]);let n=Object.create(r[0]);return r.forEach((t,e)=>{0!==e&&Object.assign(n,t)}),this._setCommonStyle(t,e,i,s,n)}return this._setCommonStyle(t,e,i,s,r)}_setCommonStyle(t,e,i,s,r){let n=this.nativeContext;r||(r=this.fillAttributes);let{fillOpacity:a=r.fillOpacity,opacity:o=r.opacity,fill:l=r.fill}=e;n.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12&&(n.fillStyle=(0,tN.L)(this,l,t,i,s))}setShadowBlendStyle(t,e,i){if(Array.isArray(i)){if(i.length<=1)return this._setShadowBlendStyle(t,i[0]);let s=Object.create(i[0]);return i.forEach((t,e)=>{0!==e&&Object.assign(s,t)}),this._setShadowBlendStyle(t,e,s)}return this._setShadowBlendStyle(t,e,i)}_setShadowBlendStyle(t,e,i){let s=this.nativeContext;i||(i=this.fillAttributes);let{opacity:r=i.opacity,shadowBlur:n=i.shadowBlur,shadowColor:a=i.shadowColor,shadowOffsetX:o=i.shadowOffsetX,shadowOffsetY:l=i.shadowOffsetY,blur:h=i.blur,filter:d=i.filter,globalCompositeOperation:u=i.globalCompositeOperation}=e;r<=1e-12||(n||o||l?(s.shadowBlur=n*this.dpr,s.shadowColor=a,s.shadowOffsetX=o*this.dpr,s.shadowOffsetY=l*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0),h?(s.filter=`blur(${h}px)`,this._clearFilterStyle=!0):d?(s.filter=d,this._clearFilterStyle=!0):this._clearFilterStyle&&(s.filter="blur(0px)",this._clearFilterStyle=!1),u?(s.globalCompositeOperation=u,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(s.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1))}setStrokeStyle(t,e,i,s,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(t,e,i,s,r[0]);let n=Object.create(r[0]);return r.forEach((t,e)=>{0!==e&&Object.assign(n,t)}),this._setStrokeStyle(t,e,i,s,n)}return this._setStrokeStyle(t,e,i,s,r)}_setStrokeStyle(t,e,i,s,r){let n=this.nativeContext;r||(r=this.strokeAttributes);let{strokeOpacity:a=r.strokeOpacity,opacity:o=r.opacity}=e;if(n.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12){let{lineWidth:a=r.lineWidth,stroke:o=r.stroke,lineJoin:l=r.lineJoin,lineDash:h=r.lineDash,lineDashOffset:d=r.lineDashOffset,lineCap:u=r.lineCap,miterLimit:c=r.miterLimit,keepStrokeScale:p=r.keepStrokeScale}=e;n.lineWidth=p?a:(0,tN.D)(this,a,this.dpr),n.strokeStyle=(0,tN.L)(this,o,t,i,s),n.lineJoin=l,h&&(n.setLineDash(h),n.lineDashOffset=d),n.lineCap=u,n.miterLimit=c}}setTextStyleWithoutAlignBaseline(t,e,i){let s=this.nativeContext;e||(e=this.textAttributes);let{scaleIn3d:r=e.scaleIn3d}=t;t.font?s.font=t.font:s.font=(0,tZ.U)(t,e,r&&this.camera&&this.camera.getProjectionScale(i));let{fontFamily:n=e.fontFamily,fontSize:a=e.fontSize}=t;this.fontFamily=n,this.fontSize=a,s.textAlign="left",s.textBaseline="alphabetic"}setTextStyle(t,e,i){var s,r;let n=this.nativeContext;e||(e=this.textAttributes),t.font?n.font=t.font:n.font=(0,tZ.U)(t,e,this.camera&&this.camera.getProjectionScale(i));let{fontFamily:a=e.fontFamily,fontSize:o=e.fontSize}=t;this.fontFamily=a,this.fontSize=o,n.textAlign=null!==(s=t.textAlign)&&void 0!==s?s:e.textAlign,n.textBaseline=null!==(r=t.textBaseline)&&void 0!==r?r:e.textBaseline}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(this._clearMatrix,t,e)}setClearMatrix(t,e,i,s,r,n){this._clearMatrix.setValue(t,e,i,s,r,n)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>tj.QE.free(t)),this.stack.length=0}};tG.env="browser",tG=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],tG);let tW=class extends tI{constructor(t){super(t)}init(t){let{container:e}=t;if("string"==typeof e){let t=tR.w.global.getElementById(e);t&&(this._container=t)}else this._container=e;this._context=new tG(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;let{nativeCanvas:t}=this;t.width=this._pixelWidth,t.height=this._pixelHeight,t.style&&this.setCanvasStyle(t,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(t),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){let t=this._nativeCanvas;t.style.position="absolute",t.style.top=`${this._y}px`,t.style.left=`${this._x}px`}resetStyle(t){if(!this.controled)return;let{width:e=this._displayWidth,height:i=this._displayHeight,dpr:s=this._dpr,x:r=this._x,y:n=this._y}=t,{nativeCanvas:a}=this;a.width=e*s,a.height=i*s,a.style&&this.setCanvasStyle(a,r,n,e,i),t.id&&(a.id=t.id),this.visiable||this.hide()}setCanvasStyle(t,e,i,s,r){this.controled&&(t.style.width=`${s}px`,t.style.height=`${r}px`)}toDataURL(t,e){return"image/jpeg"===t?this._nativeCanvas.toDataURL(t,e):"image/png"===t?this._nativeCanvas.toDataURL(t):this._nativeCanvas.toDataURL(t,e)}resize(t,e){this.controled&&(this._pixelWidth=t*this._dpr,this._pixelHeight=e*this._dpr,this._displayWidth=t,this._displayHeight=e,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${t}px`,this._nativeCanvas.style.height=`${e}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};tW.env="browser",tW=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tW);var tX=i(4193);function tY(t,e){return new tB.n(i=>{i(tX.r).toDynamicValue(()=>e=>new t(e)).whenTargetNamed(t.env),i(tX.A).toDynamicValue(()=>(t,i)=>new e(t,i)).whenTargetNamed(e.env)})}let t$=tY(tW,tG);var tK=i(7141),tq=i(7393),tJ=i(2683),tQ=i(1600),t0=i(7089),t1=i(6562),t2=i(8906),t3=i(8535),t5=function(t,e){return function(i,s){e(i,s,t)}};let t8=class{constructor(t,e){this.pickItemInterceptorContributions=t,this.pickServiceInterceptorContributions=e,this.type="default",this.global=tR.w.global}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order)}pick(t,e,i){let s,r={graphic:null,group:null};i.pickerService=this;let n=i.bounds.width(),a=i.bounds.height();if(!(new tq.FB).setValue(0,0,n,a).containsPoint(e))return r;this.pickContext&&(this.pickContext.inuse=!0),i.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);let o=new tD.y(1,0,0,1,0,0);for(let n=t.length-1;n>=0&&!(r=t[n].isContainer?this.pickGroup(t[n],e,o,i):this.pickItem(t[n],e,o,i)).graphic;n--)s||(s=r.group);if(r.graphic||(r.group=s),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(let t=0;t<this.pickerServiceInterceptorContributions.length;t++){let s=this.pickerServiceInterceptorContributions[t];s.afterPickItem&&(r=s.afterPickItem(r,this,e,i,{parentMatrix:o}))}return r}containsPoint(t,e,i){var s;return!!(null===(s=this.pickItem(t,e,null,null!=i?i:{pickContext:this.pickContext,pickerService:this}))||void 0===s?void 0:s.graphic)}pickGroup(t,e,i,s){let r={group:null,graphic:null};if(!1===t.attribute.visibleAll)return r;let n=s.pickContext,a=n.modelMatrix;if(n.camera){let e=t.transMatrix,i=tj.yp.allocate();if((0,tH.B$)(i,e),a){if(i){let t=tj.yp.allocate();n.modelMatrix=(0,tH.G9)(t,a,i),tj.yp.free(i)}}else(0,tH.B$)(i,t.globalTransMatrix),n.modelMatrix=i}if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let o=this.InterceptorContributions[r];if(o.beforePickItem){let r=o.beforePickItem(t,this,e,s,{parentMatrix:i});if(r)return n.modelMatrix!==a&&tj.yp.free(n.modelMatrix),n.modelMatrix=a,r}}let o=t.transMatrix,l=tj.QE.allocateByObj(i),h=new tJ.E9(e.x,e.y);l.transformPoint(h,h);let d=t.AABBBounds.containsPoint(h);if(!d&&!t.stage.camera)return r;let u=this.pickItem(t,h.clone(),i,s);u&&u.graphic&&(r.graphic=u.graphic,r.params=u.params);let c=!1!==t.attribute.pickable&&d;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),!1===t.attribute.childrenPickable||u&&u.graphic||(0,t1.kD)(t,tF.xF.zIndex,n=>{if(n.isContainer){let i=new tJ.E9(e.x,e.y),a=(0,t3.gh)(t).group,{scrollX:o=a.scrollX,scrollY:h=a.scrollY}=t.attribute;i.x-=o,i.y-=h,r=this.pickGroup(n,i,l,s)}else{let a=new tJ.E9(e.x,e.y);l.transformPoint(a,a);let o=(0,t3.gh)(t).group,{scrollX:h=o.scrollX,scrollY:d=o.scrollY}=t.attribute;a.x-=h,a.y-=d;let u=this.pickItem(n,a,i,s);u&&u.graphic&&(r.graphic=u.graphic,r.params=u.params)}return!!r.graphic||!!r.group},!0,!!n.camera),n.modelMatrix!==a&&tj.yp.free(n.modelMatrix),n.modelMatrix=a,r.graphic||r.group||!c||t.stage.camera||(r.group=t),tj.QE.free(l),r}selectPicker(t){return this.pickerMap.get(t.numberType)||null}};t8=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),t5(0,(0,tQ.f)(t2.Qc)),t5(0,(0,t0.t)(tK.uH)),t5(1,(0,tQ.f)(t2.Qc)),t5(1,(0,t0.t)(tK.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object])],t8);var t6=i(1164),t4=i(4481),t7=i(479),t9=function(t,e){return function(i,s){e(i,s,t)}};let et=class extends t8{constructor(t,e,i,s){super(i,s),this.contributions=t,this.drawContribution=e,this.pickItemInterceptorContributions=i,this.pickServiceInterceptorContributions=s,this.global.hooks.onSetEnv.tap("canvas-picker-service",(t,e,i)=>{this.configure(i,e)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(t=>{this.pickerMap.set(t.numberType,t)}),super._init()}configure(t,e){this.pickCanvas=t6.A.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(t,e,i,s){if(!1===t.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let n=this.InterceptorContributions[r];if(n.beforePickItem){let r=n.beforePickItem(t,this,e,s,{parentMatrix:i});if(r)return r}}let r=this.pickerMap.get(t.numberType);if(!r)return null;let n=r.contains(t,e,s),a=n?t:null,o={graphic:a,params:n};if(a)return o;if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let n=this.InterceptorContributions[r];if(n.afterPickItem){let r=n.afterPickItem(t,this,e,s,{parentMatrix:i});if(r)return r}}return o}};et=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),t9(0,(0,tQ.f)(t2.Qc)),t9(0,(0,t0.t)(t7.EL)),t9(1,(0,tQ.f)(t4.Iv)),t9(2,(0,tQ.f)(t2.Qc)),t9(2,(0,t0.t)(tK.uH)),t9(3,(0,tQ.f)(t2.Qc)),t9(3,(0,t0.t)(tK.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object,Object,Object])],et);var ee=i(1749);let ei=class{constructor(){this.type="group",this.numberType=ee.I_}contains(t,e,i){return!1}};ei=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)()],ei);let es=new tB.n((t,e,i,s)=>{es.__vloaded||(es.__vloaded=!0,t(t7.pE).to(ei).inSingletonScope(),t(t7.EL).toService(t7.pE),(0,t2.yb)(t,t7.EL))});es.__vloaded=!1;let er=new tB.n((t,e,i,s)=>{i(et)||t(et).toSelf().inSingletonScope(),i(tK.hH)?s(tK.hH).toService(et):t(tK.hH).toService(et)});var en=i(86);let ea=class{constructor(){this._uid=en.R.GenAutoIncrementId(),this.viewBox=new tq.FB,this.modelMatrix=new tD.y(1,0,0,1,0,0)}onChange(t){this._onChangeCb=t}configure(t,e){e.env===this.type&&t.setWindowHandler(this)}release(...t){this.releaseWindow()}isVisible(t){return!0}onVisibleChange(t){}getTopLeft(t){return{top:0,left:0}}setViewBox(t){this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(t,e,i,s,r,n){this.modelMatrix.setValue(t,e,i,s,r,n)}getViewBoxTransform(){return this.modelMatrix}};ea=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],ea);var eo=i(2575);let el=s=class extends ea{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${s.idprefix}_${s.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=tR.w.global,this.viewBox=new tq.FB,this.modelMatrix=new tD.y(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(t){console.error("发生错误，该环境不存在IntersectionObserver")}}isElementVisible(t){let e=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>i||e.top>s)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);let t=new IntersectionObserver((t,e)=>{t.forEach(t=>{this._canvasIsIntersecting!==t.isIntersecting?(this._canvasIsIntersecting=t.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(t.isIntersecting)):this._canvasIsIntersecting=t.isIntersecting})});t&&t.observe(this.canvas.nativeCanvas)}createWindowByConfig(t){let e;let i=this.global.createCanvas({width:t.width,height:t.height});if(!(e="string"==typeof t.container?this.global.getElementById(t.container):t.container?t.container:this.global.getRootElement()))throw Error("发生错误，containerId可能传入有误");t.offscreen?e=null:e.appendChild(i);let r={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:i,container:e,id:s.GenerateCanvasId(),canvasControled:!0};this.canvas=new tW(r)}createWindowByCanvas(t){var e;let i;if("string"==typeof t.canvas){if(!(i=this.global.getElementById(t.canvas)))throw Error("canvasId 参数不正确，请确认canvas存在并插入dom")}else i=t.canvas;if(!i)throw Error("发生错误，传入的canvas不正确");let s=t.width,r=t.height;if(null==s||null==r||!t.canvasControled){let t=i.getBoundingClientRect();s=t.width,r=t.height}let n=t.dpr;null==n&&(n=null!==(e=i.getContext("2d").pixelRatio)&&void 0!==e?e:i.width/s),this.canvas=new tW({width:s,height:r,dpr:n,nativeCanvas:i,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(t,e,i){return this.canvas.nativeCanvas.addEventListener(t,e,i)}removeEventListener(t,e,i){return this.canvas.nativeCanvas.removeEventListener(t,e,i)}dispatchEvent(t){return this.canvas.nativeCanvas.dispatchEvent(t)}getStyle(){var t;return null!==(t=this.canvas.nativeCanvas.style)&&void 0!==t?t:{}}setStyle(t){this.canvas.nativeCanvas.style=t}getBoundingClientRect(){let t=this.canvas.nativeCanvas,e=this.getWH();return t.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:e.width,height:e.height,left:0,top:0,right:0,bottom:0}}clearViewBox(t){let e=this.viewBox,i=this.getContext(),s=this.getDpr();i.nativeContext.save(),i.nativeContext.setTransform(s,0,0,s,0,0),i.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),t&&(i.fillStyle=t,i.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),i.nativeContext.restore()}isVisible(t){return this._canvasIsIntersecting}onVisibleChange(t){this._onVisibleChangeCb=t}getTopLeft(t){return this.global.getElementTopLeft(this.canvas.nativeCanvas,t)}};el.env="browser",el.idprefix="visactor_window",el.prefix_count=0,el=s=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],el);let eh=new tB.n(t=>{t(el).toSelf(),t(eo.zd).toDynamicValue(t=>t.container.get(el)).whenTargetNamed(el.env)}),ed=class{configure(t,...e){t.env===this.type&&t.setActiveEnvContribution(this)}getNativeAABBBounds(t){return new tq.FB}removeDom(t){return!1}createDom(t){return null}updateDom(t,e){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(t){return fetch(t).then(t=>t.blob()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(t,e){return 0}getElementLeft(t,e){return 0}getElementTopLeft(t,e){return{top:0,left:0}}loadFont(t,e,i){var s,r,n,a;return s=this,r=void 0,a=function*(){return{loadState:"fail"}},new(n=void 0,n=Promise)(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var s;e.done?t(e.value):((s=e.value)instanceof n?s:new n(function(t){t(s)})).then(i,o)}l((a=a.apply(s,r||[])).next())})}isMacOS(){return!1}copyToClipBoard(t){return Promise.resolve(null)}};ed=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)()],ed);var eu=i(8378);class ec{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function ep(t,e=!1){let i=document.createElement("img");if(tR.w.global.isImageAnonymous&&(i.crossOrigin="anonymous"),e){let e=new Blob([t],{type:"image/svg+xml"});t=window.URL.createObjectURL(e)}return(i.src=t,i.complete)?Promise.resolve(i):new Promise((t,e)=>{i.onload=()=>{t(i)},i.onerror=()=>{e(Error("加载失败"))}})}let eg=class extends ed{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(t){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(t,e){var i,s;let r=0,n=0,a=0,o=0;if(t.changedTouches){let e=null!==(i=t.changedTouches[0])&&void 0!==i?i:{};r=e.clientX||0,n=e.clientY||0,a=r,o=n}else r=t.clientX||0,n=t.clientY||0,a=t.offsetX||0,o=t.offsetY||0;if(e){let t,i;let a=r,o=n,l=e.getBoundingClientRect(),h=null===(s=e.getNativeHandler)||void 0===s?void 0:s.call(e).nativeCanvas;return h&&(t=l.width/h.offsetWidth,i=l.height/h.offsetHeight),{x:(a-l.left)/((0,eu.Z)(t)?t:1),y:(o-l.top)/((0,eu.Z)(i)?i:1)}}return{x:a,y:o}}getNativeAABBBounds(t){let e=t;return("string"==typeof t&&(e=(new DOMParser).parseFromString(t,"text/html").firstChild).lastChild&&(e=e.lastChild.firstChild),e.getBoundingClientRect)?new ec(e.getBoundingClientRect()):new tq.FB}removeDom(t){return t.parentElement.removeChild(t),!0}updateDom(t,e){let{width:i,height:s,style:r}=e;return r&&((0,c.Z)(r)?t.setAttribute("style",r):Object.keys(r).forEach(e=>{t.style[e]=r[e]})),null!=i&&(t.style.width=`${i}px`),null!=s&&(t.style.height=`${s}px`),!0}createDom(t){let{tagName:e="div",parent:i}=t,s=document.createElement(e);if(this.updateDom(s,t),i){let t=(0,c.Z)(i)?this.getElementById(i):i;t&&t.appendChild&&t.appendChild(s)}return s}loadImage(t){return ep(t,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(t){return ep(t,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(t){var e,i;let s=document.createElement("canvas");t.id&&(s.id=null!==(e=t.id)&&void 0!==e?e:en.R.GenAutoIncrementId().toString());let r=null!==(i=t.dpr)&&void 0!==i?i:window.devicePixelRatio;return t.width&&t.height&&(s.style.width=`${t.width}px`,s.style.height=`${t.height}px`,s.width=t.width*r,s.height=t.height*r),s}createOffscreenCanvas(t){var e;let i=null!==(e=t.dpr)&&void 0!==e?e:window.devicePixelRatio;return new OffscreenCanvas(t.width*i,t.height*i)}releaseCanvas(t){let e;(e="string"==typeof t?document.getElementById(t):t)&&e.parentElement&&e.parentElement.removeChild(e)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(t,e,i){return document.addEventListener(t,e,i)}removeEventListener(t,e,i){return document.removeEventListener(t,e,i)}dispatchEvent(t){return document.dispatchEvent(t)}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}getDocument(){return document}release(...t){}getElementTop(t,e){let i=t.offsetTop,s=t.offsetParent;for(;null!==s;)i+=s.offsetTop,s=s.offsetParent;return i}getElementLeft(t,e){let i=t.offsetLeft,s=t.offsetParent;for(;null!==s;)i+=s.offsetLeft,s=s.offsetParent;return i}getElementTopLeft(t,e){let i=t.offsetTop,s=t.offsetLeft,r=t.offsetParent;for(;null!==r;)i+=r.offsetTop,s+=r.offsetLeft,r=r.offsetParent;return{top:i,left:s}}loadFont(t,e,i){var s,r,n,a;return s=this,r=void 0,n=void 0,a=function*(){return new FontFace(t,(0,c.Z)(e)?`url(${e})`:e,i).load().then(function(t){return document.fonts.add(t),{loadState:"success"}}).catch(function(t){return console.error("Failed to load font:",t),{loadState:"fail"}})},new(n||(n=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var s;e.done?t(e.value):((s=e.value)instanceof n?s:new n(function(t){t(s)})).then(i,o)}l((a=a.apply(s,r||[])).next())})}isMacOS(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(t){this._isMacOS=!1}return this._isMacOS}copyToClipBoard(t){return navigator.clipboard.writeText(t).then(()=>{}).catch(t=>{})}};eg=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],eg);let em=new tB.n(t=>{em.isBrowserBound||(em.isBrowserBound=!0,t(eg).toSelf().inSingletonScope(),t(tO.D0).toService(eg))});function ef(t,e=!0){ef.__loaded||(ef.__loaded=!0,t.load(em),t.load(t$),t.load(eh),e&&(t.load(es),t.load(er)))}em.isBrowserBound=!1,ef.__loaded=!1;let ev=class extends tG{constructor(t,e){super(t,e);let i=t.nativeCanvas.getContext("2d");if(!i)throw Error("发生错误，获取2d上下文失败");this.nativeContext=i,this.canvas=t,this.matrix=new tD.y(1,0,0,1,0,0),this.stack=[],this.dpr=null!=e?e:1}release(...t){}};ev.env="node",ev=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],ev);let e_=class extends tI{constructor(t){super(t)}init(){this._context=new ev(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...t){this._nativeCanvas.release&&(0,O.Z)(this._nativeCanvas.release)&&this._nativeCanvas.release()}};e_.env="node";let ey=tY(e_=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],e_),ev),eb=class extends ea{get container(){return null}constructor(t){super(),this.global=t,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t)}createWindowByConfig(t){let e=this.global.createCanvas({width:t.width,height:t.height}),i={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:e,id:en.R.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new e_(i)}createWindowByCanvas(t){var e;let i=t.canvas,s=null!==(e=t.dpr)&&void 0!==e?e:1,r=t.width,n=t.height;null!=r&&null!=n&&t.canvasControled||(r=i.width/s,n=i.height/s),this.canvas=new e_({width:r,height:n,dpr:s,nativeCanvas:i,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(t="image/png"){return this.canvas.nativeCanvas.toBuffer(t)}addEventListener(t,e,i){}dispatchEvent(t){return!0}removeEventListener(t,e,i){}getStyle(){}setStyle(t){}getBoundingClientRect(){return null}clearViewBox(t){}};eb.env="node",eb=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)(),(r=(0,tQ.f)(tO.y2),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],eb);let ex=new tB.n(t=>{t(eb).toSelf(),t(eo.zd).toDynamicValue(t=>t.container.get(eb)).whenTargetNamed(eb.env)});var eS=i(3386);let eA=class extends ed{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(t,e){t.env===this.type&&(t.setActiveEnvContribution(this),this.pkg=e)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(t){let{loadImage:e}=this.pkg;return e?e(t).then(t=>({loadState:t?"success":"fail",data:t})).catch(()=>({loadState:"fail",data:null})):Promise.reject(Error("node-canvas loadImage could not be found!"))}loadSvg(t){let e=this.pkg.Resvg;if(!e)return Promise.reject(Error("@resvg/resvg-js svgParser could not be found!"));let i=new e(t).render().asPng();return this.loadImage(i)}createCanvas(t){return this.pkg.createCanvas(t.width,t.height)}releaseCanvas(t){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(t){return eS.dZ.call(t)}}getCancelAnimationFrame(){return t=>{eS.dZ.clear(t)}}addEventListener(t,e,i){}removeEventListener(t,e,i){}getElementById(t){return null}getRootElement(){return null}dispatchEvent(t){}release(...t){}createOffscreenCanvas(t){}};eA=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,tP.b)()],eA);let ek=new tB.n(t=>{ek.isNodeBound||(ek.isNodeBound=!0,t(eA).toSelf().inSingletonScope(),t(tO.D0).toService(eA))});function ew(t,e=!0){ew.__loaded||(ew.__loaded=!0,t.load(ek),t.load(ey),t.load(ex))}ek.isNodeBound=!1,ew.__loaded=!1;var eT=i(6480);let eC=()=>{ef(eT.n)},eM=()=>{ew(eT.n)};var eE=i(3066),eB=i(6699),eO=i(122);let eI={name:"dark",colorScheme:{default:{dataScheme:i(4111).D,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F",emptyCircleColor:"#bbbdc3",linearProgressTrackColor:"#404349"}}},component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}};var eR=i(6883);class eP extends eR.I{constructor(t){super(),this.globalInstance=t}onInit(t){this._plugins.forEach(e=>{e.onInit&&e.onInit(this,t)})}onBeforeResize(t,e){this._plugins.forEach(i=>{i.onBeforeResize&&i.onBeforeResize(this,t,e)})}onAfterChartSpecTransform(t,e){this._plugins.forEach(i=>{i.onAfterChartSpecTransform&&i.onAfterChartSpecTransform(this,t,e)})}onAfterModelSpecTransform(t,e,i){this._plugins.forEach(s=>{s.onAfterModelSpecTransform&&s.onAfterModelSpecTransform(this,t,e,i)})}onBeforeInitChart(t,e){this._plugins.forEach(i=>{i.onBeforeInitChart&&i.onBeforeInitChart(this,t,e)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var eL=i(1601);let eD=(t,e)=>{if(!e||!t)return null;let i={};return t.forEach(t=>{let s=t&&t.getSpec(),r=s&&s.encode;r&&e.forEach(e=>{e&&r[e]&&(i[e]||(i[e]=[]),i[e].push(t))})}),i},eZ=t=>{let e=(0,m.IX)(t),i=[],s=[];return e.forEach(t=>{"empty"===t?i.push("view"):(0,c.Z)(t)&&"none"!==t?t.includes("view:")?(s.push(t.replace("view:","")),i.push("view")):(s.push(t),i.push("self")):(0,eL.Z)(t)&&i.push("timeout")}),{eventNames:s,resetType:i}};class eF{constructor(t,e){this.references=new Map,this.view=t,this.depend(null==e?void 0:e.dependency)}getStartState(){return null}depend(t){this.references.clear(),(0,m.IX)(t).map(t=>(0,c.Z)(t)?this.view.getGrammarById(t):t).filter(t=>!(0,f.Z)(t)).forEach(t=>{var e;this.references.set(t,(null!==(e=this.references.get(t))&&void 0!==e?e:0)+1)})}parameters(){let t={};return this.references.forEach((e,i)=>{(0,v.Z)(i.id())&&(t[i.id()]=i.output())}),t}bind(){let t=this.getEvents();(null!=t?t:[]).forEach(t=>{t.type&&t.handler&&((0,p.Z)(t.type)?t.type.forEach(e=>{e&&"none"!==e&&this.view.addEventListener(e,t.handler)}):"none"!==t.type&&this.view.addEventListener(t.type,t.handler))})}unbind(){let t=this.getEvents();(null!=t?t:[]).forEach(t=>{t.type&&t.handler&&((0,p.Z)(t.type)?t.type.forEach(e=>{e&&"none"!==e&&this.view.removeEventListener(e,t.handler)}):"none"!==t.type&&this.view.removeEventListener(t.type,t.handler))})}start(t){}reset(t){}dispatchEvent(t,e){this.view.emit(`${this.type}:${t}`,e),"start"===t&&this.options.onStart?this.options.onStart(e):"reset"===t&&this.options.onReset?this.options.onReset(e):"update"===t&&this.options.onUpdate?this.options.onUpdate(e):"end"===t&&this.options.onEnd&&this.options.onEnd(e)}}class ej extends eF{constructor(t,e){super(t,e),this.type=ej.type,this._resetType=[],this.resetAll=()=>{let{state:t,reverseState:e}=this.options;this._statedElements&&this._statedElements.length&&(this.clearAllStates(t,e),this.dispatchEvent("reset",{elements:this._statedElements,options:this.options}),this._statedElements=[])},this.handleStart=t=>{this.start(t.element)},this.handleReset=t=>{if(!this._statedElements||!this._statedElements.length)return;let e=t.element,i=e&&this._marks&&this._marks.includes(e.mark);(this._resetType.includes("view")&&!i||this._resetType.includes("self")&&i)&&this.resetAll()},this.options=Object.assign({},ej.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector),this._stateMarks=eD(this._marks,[this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getEvents(){let t=this.options.triggerOff,e=this.options.trigger,i=[{type:e,handler:this.handleStart}],{eventNames:s,resetType:r}=eZ(t);return s.forEach(t=>{t&&((0,p.Z)(e)?!e.includes(t):t!==e)&&i.push({type:t,handler:this.handleReset})}),this._resetType=r,i}start(t){let{state:e,reverseState:i,isMultiple:s}=this.options;if(t&&this._marks&&this._marks.includes(t.mark)){if(t.hasState(e)){if(this._resetType.includes("self")){let s=this._statedElements&&this._statedElements.filter(e=>e!==t);s&&s.length?this._statedElements=this.updateStates(s,this._statedElements,e,i):this.resetAll()}}else this._timer&&clearTimeout(this._timer),t.addState(e),this._statedElements=this.updateStates(s&&this._statedElements?[...this._statedElements,t]:[t],this._statedElements,e,i),this.dispatchEvent("start",{elements:this._statedElements,options:this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout(()=>{this.resetAll()},this.options.triggerOff))}else this._resetType.includes("view")&&this._statedElements&&this._statedElements.length&&this.resetAll()}reset(t){t?this._marks&&this._marks.includes(t.mark)&&t.removeState([this.options.state,this.options.reverseState]):this.resetAll()}}ej.type="element-select",ej.defaultOptions={state:P.YI.selected,trigger:"click"};class eH extends eF{constructor(t,e){super(t,e),this.type=eH.type,this.handleStart=t=>{this.start(t.element)},this.handleReset=t=>{if(!this._statedElements||!this._statedElements.length)return;let e=t.element;if(e){let t=this._marks&&this._marks.includes(e.mark);"view"!==this._resetType||t?"self"===this._resetType&&t&&this.resetAll():this.resetAll()}},this.options=Object.assign({},eH.defaultOptions,e),this._marks=t.getMarksBySelector(this.options.selector),this._stateMarks=eD(this._marks,[this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getEvents(){let t=this.options.triggerOff,e=[{type:this.options.trigger,handler:this.handleStart}],i=t;return(0,c.Z)(t)&&t.includes("view:")?(i=t.replace("view:",""),this._resetType="view"):this._resetType="self",e.push({type:i,handler:this.handleReset}),e}resetAll(){let{highlightState:t,blurState:e}=this.options;this._lastElement&&(this.clearAllStates(t,e),this.dispatchEvent("reset",{elements:[this._lastElement],options:this.options}),this._lastElement=null,this._statedElements=null)}start(t){if(t&&this._marks&&this._marks.includes(t.mark)){let{highlightState:e,blurState:i}=this.options;this._lastElement!==t&&(this._statedElements=this.updateStates([t],this._statedElements,e,i),this._lastElement=t,this.dispatchEvent("start",{elements:[t],options:this.options}))}else this._lastElement&&"view"===this._resetType&&this.resetAll()}reset(t){t?this._marks&&this._marks.includes(t.mark)&&t.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}eH.type="element-highlight",eH.defaultOptions={highlightState:P.YI.highlight,blurState:P.YI.blur,trigger:"pointerover",triggerOff:"pointerout"};var ez=i(7773);class eN{updateStates(t,e,i,s){return t&&t.length?(i&&s?e&&e.length?(this.toggleReverseStateOfElements(t,e,s),this.toggleStateOfElements(t,e,i)):this.addBothStateOfElements(t,i,s):i&&(e&&e.length?this.toggleStateOfElements(t,e,i):this.addStateOfElements(t,i)),t):null}toggleReverseStateOfElements(t,e,i){e.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.addState(i)}),t.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.removeState(i)})}toggleStateOfElements(t,e,i){e.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.removeState(i)}),t.forEach(t=>{i&&this._stateMarks[i]&&this._stateMarks[i].includes(t.mark)&&t.addState(i)})}addBothStateOfElements(t,e,i){this._marks.forEach(s=>{var r;let n=i&&this._stateMarks[i]&&this._stateMarks[i].includes(s),a=e&&this._stateMarks[e]&&this._stateMarks[e].includes(s);(n||a)&&(null===(r=s.elements)||void 0===r||r.forEach(s=>{t&&t.includes(s)?a&&s.addState(e):n&&s.addState(i)}))})}addStateOfElements(t,e){this._marks.forEach(i=>{var s;let r=e&&this._stateMarks[e]&&this._stateMarks[e].includes(i);r&&(null===(s=i.elements)||void 0===s||s.forEach(i=>{t&&t.includes(i)&&r&&i.addState(e)}))})}clearAllStates(t,e){this._statedElements&&this._statedElements.length&&this._marks.forEach(i=>{i&&i.elements&&(e&&this._stateMarks[e]&&this._stateMarks[e].includes(i)&&i.elements.forEach(t=>{t.removeState(e)}),t&&this._stateMarks[t]&&this._stateMarks[t].includes(i)&&i.elements.forEach(e=>{this._statedElements.includes(e)&&e.removeState(t)}))})}}let eV=new Map;var eU=function(t,e,i,s){return new(i||(i=Promise))(function(r,n){function a(t){try{l(s.next(t))}catch(t){n(t)}}function o(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,o)}l((s=s.apply(t,e||[])).next())})},eG=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class eW{static useRegisters(t){t.forEach(t=>{"function"==typeof t?t():console.error("Invalid function:",t)})}static useChart(t){t.forEach(t=>T.F.registerChart(t.type,t))}static useSeries(t){t.forEach(t=>T.F.registerSeries(t.type,t))}static useComponent(t){t.forEach(t=>T.F.registerComponent(t.type,t))}static useMark(t){t.forEach(t=>{var e;return T.F.registerMark(null!==(e=t.constructorType)&&void 0!==e?e:t.type,t)})}static useLayout(t){t.forEach(t=>T.F.registerLayout(t.type,t))}static registerDataSetTransform(t,e){T.F.registerTransform(t,e)}static registerFunction(t,e){t&&e&&tE.instance().registerFunction(t,e)}static unregisterFunction(t){t&&tE.instance().unregisterFunction(t)}static getFunction(t){return t?tE.instance().getFunction(t):null}static getFunctionList(){return tE.instance().getFunctionNameList()}static registerMap(t,e,i){let s=T.F.getImplementInKey("registerMap");s&&s(t,e,i)}static unregisterMap(t){let e=T.F.getImplementInKey("unregisterMap");e&&e(t)}static getMap(t){return F.get(t)}static registerSVG(t,e,i){let s=T.F.getImplementInKey("registerSVG");s&&s(t,e,i)}static unregisterSVG(t){let e=T.F.getImplementInKey("unregisterSVG");e&&e(t)}static getSVG(t){return eV.get(t)}static hideTooltip(t=[]){Q.u.forEach(t=>{var e;return null===(e=null==t?void 0:t.hideTooltip)||void 0===e?void 0:e.call(t)},t)}static getLogger(){return G.Y.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}getDataSet(){return this._dataSet}constructor(t,e){var i,s,r,n,o,l,h,d;this.id=(0,_.a)(),this._userEvents=[],this._autoSize=!0,this._option={mode:a.i["desktop-browser"],onError:t=>{throw Error(t)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._doResize=()=>{let{width:t,height:e}=this.getCurrentSize();this._currentSize.width===t&&this._currentSize.height===e||(this._currentSize={width:t,height:e},this.resizeSync(t,e))},this._renderSync=(t={})=>{var e;return this._beforeRender(t)&&(null===(e=this._compiler)||void 0===e||e.render(t.morphConfig),this._afterRender()),this},this._updateSpec=(t,e=!1,i)=>{var s,r;let n=this._spec,a={changeBackground:!1,reTransformSpec:!1,change:!1,reMake:!1,reCompile:!1,reSize:!1,changeTheme:!1};if(!this._setNewSpec(t,e))return;(0,$.X)(n.theme,this._spec.theme)?(0,$.X)(this._spec.background,n.background)||(a.reMake=!0,a.changeBackground=!0):a.changeTheme=!0;let o=this._shouldChartResize(n);if(a.reSize=o,this._spec.type!==n.type)return null===(r=null===(s=this._compiler)||void 0===s?void 0:s.getVGrammarView())||void 0===r||r.updateLayoutTag(),a.reMake=!0,a.reTransformSpec=!0,a.change=!0,a.changeTheme=!0,a;this._initChartSpec(this._spec,"updateSpec");let l=(0,ti.eo)(this._chart.updateSpec(this._spec),a);return i?Object.assign(Object.assign({},l),i):l},this._option=(0,K.Z)(this._option,{animation:!1!==t.animation},e),this._onError=null===(i=this._option)||void 0===i?void 0:i.onError;let p=this._option,{dom:g,renderCanvas:m,mode:f,stage:v,poptip:y}=p,x=eG(p,["dom","renderCanvas","mode","stage","poptip"]),A=(0,b.qe)(f);if(A?eC():"node"===f&&eM(),A&&g&&(this._container=(0,c.Z)(g)?u.rF.getElementById(g):g),m&&(this._canvas=m),v&&(this._stage=v),"node"!==f&&!this._container&&!this._canvas&&!this._stage)return void(null===(s=this._option)||void 0===s||s.onError("please specify container or renderCanvas!"));this._viewBox=this._option.viewBox,this._currentThemeName=S.V.getCurrentThemeName(),this._setNewSpec(t),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize();let k=[];!1!=!y&&k.push("poptipForText"),"sankey"===t.type&&k.push("scrollbar");let w=Object.assign({},x.performanceHook||{});Object.keys(w).forEach(t=>{x.performanceHook[t]=(...e)=>{w[t](...e,this)}}),this._compiler=new X({dom:null!==(r=this._container)&&void 0!==r?r:"none",canvas:m},Object.assign(Object.assign({mode:this._option.mode,stage:v,pluginList:k},x),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new Z(this,this._compiler),this._event=new C.j(this._eventDispatcher,f),this._compiler.initView(),this._setFontFamilyTheme(null===(n=this._currentTheme)||void 0===n?void 0:n.fontFamily),this._initDataSet(this._option.dataSet),this._autoSize=!!A&&(null===(l=null!==(o=t.autoFit)&&void 0!==o?o:this._option.autoFit)||void 0===l||l),this._bindResizeEvent(),this._bindVGrammarViewEvent(),this._initChartPlugin(),Q.u.registerInstance(this),null===(d=null===(h=this._option.performanceHook)||void 0===h?void 0:h.afterCreateVChart)||void 0===d||d.call(h,this)}_setNewSpec(t,e){return!!t&&((0,c.Z)(t)&&(t=JSON.parse(t)),e&&this._originalSpec&&(t=(0,w.H)({},this._originalSpec,t)),this._originalSpec=t,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var t;let e=function t(e,i={data:t=>t}){if(!e)return e;if(e.constructor===Object){let s={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(i[r]){s[r]=i[r](e[r]);continue}s[r]=t(e[r],i)}return s}return(0,p.Z)(e)?e.map(e=>t(e,i)):e}(this._originalSpec);return e.data=null!==(t=e.data)&&void 0!==t?t:[],e}_initChartSpec(t,e){var i,s;eW.getFunctionList()&&eW.getFunctionList().length&&(t=function t(e,i){if(!e)return e;if((0,g.Z)(e)){let s={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if((0,c.Z)(e[r])&&i.getFunction(e[r])){s[r]=i.getFunction(e[r]);continue}s[r]=t(e[r],i)}return s}return(0,p.Z)(e)?e.map(e=>t(e,i)):e}(t,eW)),this._spec=t,this._chartSpecTransformer||(this._chartSpecTransformer=T.F.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),null===(i=this._chartSpecTransformer)||void 0===i||i.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,e),this._specInfo=null===(s=this._chartSpecTransformer)||void 0===s?void 0:s.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,e)}_updateSpecInfo(){var t;this._chartSpecTransformer||(this._chartSpecTransformer=T.F.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=null===(t=this._chartSpecTransformer)||void 0===t?void 0:t.createSpecInfo(this._spec)}_initChart(t){var e,i,s;if(!this._compiler)return void(null===(e=this._option)||void 0===e||e.onError("compiler is not initialized"));if(this._chart)return void(null===(i=this._option)||void 0===i||i.onError("chart is already initialized"));let r=T.F.createChart(t.type,t,this._getChartOption(t.type));r?(this._chart=r,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(this._chartSpecTransformer),this._chart.init(),this._event.emit(M.$7.initialized,{chart:r,vchart:this})):null===(s=this._option)||void 0===s||s.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindVGrammarViewEvent(){if(!this._compiler)return;let t=this._compiler.getVGrammarView();t.addEventListener(P.ZK.ALL_ANIMATION_END,()=>{this._event.emit(M.$7.animationFinished,{chart:this._chart,vchart:this})}),t.addEventListener(P.ZK.AFTER_VRENDER_NEXT_RENDER,()=>{this._event.emit(M.$7.renderFinished,{chart:this._chart,vchart:this})})}_bindResizeEvent(){var t,e;if(this._autoSize){if(this._onResize=(0,I.Z)(this._doResize,null!==(t=this._option.resizeDelay)&&void 0!==t?t:100),this._container){let t=window.ResizeObserver;t&&(this._observer=new t(this._onResize),null===(e=this._observer)||void 0===e||e.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var t,e,i,s;return(0,ti.hK)(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:null!==(e=null===(t=this._currentSize)||void 0===t?void 0:t.width)&&void 0!==e?e:Y.rV,height:null!==(s=null===(i=this._currentSize)||void 0===i?void 0:i.height)&&void 0!==s?s:Y.b})}_initDataSet(t){for(let e in this._dataSet=t instanceof l.q?t:new l.q,(0,j.I)(this._dataSet,"dataview",h.i),(0,j.I)(this._dataSet,"array",n.Q),(0,j.U)(this._dataSet,"copyDataView",z.Y),T.F.transforms)(0,j.U)(this._dataSet,e,T.F.transforms[e]);for(let t in T.F.dataParser)(0,j.I)(this._dataSet,t,T.F.dataParser[t])}updateCustomConfigAndRerender(t,e,i={}){if(!this._isReleased&&t)return(0,O.Z)(t)&&(t=t()),t.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(t),e?this._renderSync(i):this._renderAsync(i)}_updateCustomConfigAndRecompile(t,e={}){return!!t&&(this._reCompile(t),this._beforeRender(e))}_reCompile(t,e){var i,s,r,n,a,o,l,h,d,u;if(t.reMake&&(this._releaseData(),this._initDataSet(),null===(i=this._chart)||void 0===i||i.release(),this._chart=null),t.reTransformSpec&&(this._chartSpecTransformer=null),t.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme(null===(s=this._currentTheme)||void 0===s?void 0:s.fontFamily)):t.changeBackground&&(null===(r=this._compiler)||void 0===r||r.setBackground(this._getBackground())),t.reMake)null===(n=this._compiler)||void 0===n||n.releaseGrammar(!1===(null===(a=this._option)||void 0===a?void 0:a.animation)||!1===(null===(o=this._spec)||void 0===o?void 0:o.animation)),this._userEvents.forEach(t=>{var e;return null===(e=this._event)||void 0===e?void 0:e.on(t.eType,t.query,t.handler)}),t.reSize&&this._doResize();else if(t.reCompile&&(null===(l=this._compiler)||void 0===l||l.clear({chart:this._chart,vChart:this},!1===(null===(h=this._option)||void 0===h?void 0:h.animation)||!1===(null===(d=this._spec)||void 0===d?void 0:d.animation)),null===(u=this._compiler)||void 0===u||u.compile({chart:this._chart,vChart:this},{})),t.reSize){let{width:t,height:e}=this.getCurrentSize();this._chart.onResize(t,e,!1),this._compiler.resize(t,e,!1)}}_beforeRender(t={}){var e,i,s,r,n,a,o,l;if(this._isReleased)return!1;if(this._chart)return!0;let{transformSpec:h,actionSource:d}=t;return h&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,d),null===(i=null===(e=this._option.performanceHook)||void 0===e?void 0:e.beforeInitializeChart)||void 0===i||i.call(e,this),this._initChart(this._spec),null===(r=null===(s=this._option.performanceHook)||void 0===s?void 0:s.afterInitializeChart)||void 0===r||r.call(s,this),!(!this._chart||!this._compiler)&&(null===(a=null===(n=this._option.performanceHook)||void 0===n?void 0:n.beforeCompileToVGrammar)||void 0===a||a.call(n),this._compiler.compile({chart:this._chart,vChart:this},{performanceHook:this._option.performanceHook}),null===(l=null===(o=this._option.performanceHook)||void 0===o?void 0:o.afterCompileToVGrammar)||void 0===l||l.call(o),!0)}_afterRender(){return!this._isReleased&&(this._updateAnimateState(),this._event.emit(M.$7.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(t){return this._renderSync({morphConfig:t,transformSpec:!0,actionSource:"render"})}renderAsync(t){return eU(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:t,transformSpec:!0,actionSource:"render"})})}_renderAsync(t={}){return eU(this,void 0,void 0,function*(){return this._renderSync(t)})}_updateAnimateState(t){var e,i;if(this._option.animation){let s=t?N.h.appear:N.h.update;null===(e=this._chart)||void 0===e||e.getAllRegions().forEach(t=>{var e;null===(e=t.animate)||void 0===e||e.updateAnimateState(s,!0)}),null===(i=this._chart)||void 0===i||i.getAllComponents().forEach(t=>{var e;null===(e=t.animate)||void 0===e||e.updateAnimateState(s,!0)})}}release(){var t,e,i,s;(null===(t=this._onResize)||void 0===t?void 0:t.cancel)&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,null===(e=this._chart)||void 0===e||e.release(),null===(i=this._eventDispatcher)||void 0===i||i.release(),null===(s=this._compiler)||void 0===s||s.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,Q.u.unregisterInstance(this)}updateData(t,e,i,s){return eU(this,void 0,void 0,function*(){return this.updateDataSync(t,e,i,s)})}_updateDataById(t,e,i){let s=this._spec.data.find(e=>e.name===t||e.id===t);s?s.id===t?s.values=e:s.name===t&&s.parse(e,i):(0,p.Z)(e)?this._spec.data.push({id:t,values:e}):this._spec.data.push(e)}updateDataInBatches(t){return eU(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(t.map(({id:t,data:e,options:i})=>({id:t,values:e,parser:i}))),this._chart.updateGlobalScaleDomain(),this._compiler.render()):(this._spec.data=(0,m.IX)(this._spec.data),t.forEach(({id:t,data:e,options:i})=>{this._updateDataById(t,e,i)})),this})}updateDataSync(t,e,i,s){return(0,f.Z)(this._dataSet)||(this._chart?((null==s?void 0:s.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateData(t,e,!0,i),this._compiler.render()):(this._spec.data=(0,m.IX)(this._spec.data),this._updateDataById(t,e,i))),this}updateFullDataSync(t,e=!0,i){if(this._chart)return(null==i?void 0:i.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateFullData(t),e&&this._compiler.render(),this;let s=(0,m.IX)(this._spec.data);return(0,m.IX)(t).forEach(t=>{let{id:e,values:i,parser:r,fields:n}=t,a=s.find(t=>t.name===e);if(a)a instanceof d.VO?(a.setFields((0,q.Z)(n)),a.parse(i,(0,q.Z)(r))):(a.values=i,(0,v.Z)(r)&&(a.parser=r),(0,v.Z)(n)&&(a.fields=n));else{let e=(0,H.J3)(t,this._dataSet,s);(0,p.Z)(this._spec.data)&&this._spec.data.push(e)}}),this}updateFullData(t,e=!0){return eU(this,void 0,void 0,function*(){return this.updateFullDataSync(t,e)})}updateSpec(t,e=!1,i,s){return eU(this,void 0,void 0,function*(){let r=this._updateSpec(t,e,s);return r&&(yield this.updateCustomConfigAndRerender(r,!1,{morphConfig:i,transformSpec:r.reTransformSpec,actionSource:"updateSpec"})),this})}updateSpecSync(t,e=!1,i,s){let r=this._updateSpec(t,e,s);return r&&this.updateCustomConfigAndRerender(r,!0,{morphConfig:i,transformSpec:r.reTransformSpec,actionSource:"updateSpec"}),this}updateSpecAndRecompile(t,e=!1,i={}){let s=this._updateSpec(t,e);return this._updateCustomConfigAndRecompile(s,Object.assign({actionSource:"updateSpecAndRecompile"},i))}updateModelSpec(t,e,i=!1,s){return eU(this,void 0,void 0,function*(){return this.updateModelSpecSync(t,e,i,s)})}updateModelSpecSync(t,e,i=!1,s){if(!e||!this._spec)return this;if((0,c.Z)(e)&&(e=JSON.parse(e)),(0,O.Z)(t)||(0,w.K)(this._spec,t,e,i),this._chart){let r=this._chart.getModelInFilter(t);if(r)return this._updateModelSpec(r,e,!0,i,s)}return this}_updateModelSpec(t,e,i=!1,s=!1,r){s&&(e=(0,w.H)({},t.getSpec(),e));let n=t.updateSpec(e);return t.reInit(e),(n.change||n.reCompile||n.reMake||n.reSize||n.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(n,i,{morphConfig:r,transformSpec:!1,actionSource:"updateModelSpec"})}resize(t,e){return eU(this,void 0,void 0,function*(){return this.resizeSync(t,e)})}resizeSync(t,e){var i,s;return this._beforeResize(t,e)?(null===(s=(i=this._compiler).resize)||void 0===s||s.call(i,t,e),this._afterResize()):this}_beforeResize(t,e){var i,s,r,n;if(!this._chart||!this._compiler)return!1;let a=this._chart.getCanvasRect();return(!a||a.width!==t||a.height!==e)&&(this._chartPluginApply("onBeforeResize",t,e),null===(s=null===(i=this._option.performanceHook)||void 0===i?void 0:i.beforeResizeWithUpdate)||void 0===s||s.call(i),this._chart.onResize(t,e,!1),null===(n=null===(r=this._option.performanceHook)||void 0===r?void 0:r.afterResizeWithUpdate)||void 0===n||n.call(r),!0)}_afterResize(){return this._isReleased||this._event.emit(M.$7.afterResize,{chart:this._chart}),this}updateViewBox(t,e=!0,i=!0){return this._chart&&this._compiler&&(this._viewBox=t,this._chart.updateViewBox(t,i),i&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(t,e)),this}on(t,e,i){var s;this._userEvents&&(this._userEvents.push({eType:t,query:"function"==typeof e?null:e,handler:"function"==typeof e?e:i}),null===(s=this._event)||void 0===s||s.on(t,e,i))}off(t,e){var i;if(this._userEvents&&0!==this._userEvents.length){if(e){let s=this._userEvents.findIndex(i=>i.eType===t&&i.handler===e);s>=0&&(this._userEvents.splice(s,1),null===(i=this._event)||void 0===i||i.off(t,e))}else this._userEvents.forEach(e=>{var i;e.eType===t&&(null===(i=this._event)||void 0===i||i.off(t,e.handler))}),this._userEvents=this._userEvents.filter(e=>e.eType!==t)}}updateState(t,e){this._chart&&this._chart.updateState(t,e)}setSelected(t,e,i){this._chart&&this._chart.setSelected(t,e,i)}setHovered(t,e,i){this._chart&&this._chart.setHovered(t,e,i)}clearState(t){this._chart&&this._chart.clearState(t)}clearAllStates(){this._chart&&this._chart.clearAllStates()}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(t){var e,i,s,r;let n;let a=this._option.theme,o=null===(e=this._spec)||void 0===e?void 0:e.theme,l=null===(i=this._spec)||void 0===i?void 0:i.type;t&&(this._currentThemeName=t);let h=(t,e)=>{var i;return(null===(i=e.chart)||void 0===i?void 0:i[t])&&(e=(0,eE.hr)({},e,e.chart[t])),e};if((0,J.Z)(a)&&(0,J.Z)(o))n=k(this._currentThemeName,!0),this._currentTheme=h(l,n);else if((0,c.Z)(a)&&(!o||(0,c.Z)(o))||(0,c.Z)(o)&&(!a||(0,c.Z)(a))){let t=(0,eE.hr)({},k(this._currentThemeName,!0),k(a,!0),k(o,!0));this._currentTheme=h(l,t)}else{let t=(0,eE.hr)({},k(this._currentThemeName),k(a),k(o));this._currentTheme=(0,eB.v)(h(l,t))}r=(0,B.Z)(this._currentTheme,"component.poptip"),(0,K.Z)(te.poptip,tt,r),null===(s=this._compiler)||void 0===s||s.setBackground(this._getBackground())}_shouldChartResize(t){var e,i;let s=!1;(0,f.Z)(this._spec.width)?(0,f.Z)(t.width)||(this._spec.width=t.width):this._spec.width!==t.width&&(s=!0),(0,f.Z)(this._spec.height)?(0,f.Z)(t.height)||(this._spec.height=t.height):this._spec.height!==t.height&&(s=!0);let r=this._autoSize;return this._autoSize=!!(0,b.qe)(this._option.mode)&&(null===(i=null!==(e=this._spec.autoFit)&&void 0!==e?e:this._option.autoFit)||void 0===i||i),this._autoSize!==r&&(s=!0),s}_getBackground(){return("string"==typeof this._spec.background||(0,A.Z)(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this._currentTheme.background||this._option.background}getCurrentTheme(){return k(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(t){return eU(this,void 0,void 0,function*(){return this.setCurrentThemeSync(t)})}setCurrentThemeSync(t){var e;if(!S.V.themeExist(t))return this;let i=this._setCurrentTheme(t);return this._setFontFamilyTheme(null===(e=this._currentTheme)||void 0===e?void 0:e.fontFamily),this.updateCustomConfigAndRerender(i,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(t){var e;return this._updateCurrentTheme(t),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),null===(e=this._chart)||void 0===e||e.setCurrentTheme(),{change:!0,reMake:!1}}_setFontFamilyTheme(t){var e;t&&(null===(e=this.getStage())||void 0===e||e.setTheme({text:{fontFamily:t}}))}_getTooltipComponent(){var t;return null===(t=this._chart)||void 0===t?void 0:t.getComponentsByType(o.L.tooltip)[0]}setTooltipHandler(t){var e,i;this._context.tooltipHandler=t;let s=this._getTooltipComponent();s&&(null===(i=null===(e=s.tooltipHandler)||void 0===e?void 0:e.release)||void 0===i||i.call(e),s.tooltipHandler=t)}getTooltipHandlerByUser(){var t;return null===(t=this._context)||void 0===t?void 0:t.tooltipHandler}getTooltipHandler(){let t=this._getTooltipComponent();return t?t.tooltipHandler:this._context.tooltipHandler}showTooltip(t,e){var i;let s=this._getTooltipComponent();return null!==(i=(0,v.Z)(t)&&"none"!==(null==s?void 0:s.showTooltip(t,e)))&&void 0!==i&&i}hideTooltip(){var t;let e=this._getTooltipComponent();return null!==(t=null==e?void 0:e.hideTooltip())&&void 0!==t&&t}getLegendDataById(t){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentByUserId(t);return i?i.getLegendData():[]}getLegendDataByIndex(t=0){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentsByType(o.L.discreteLegend);return i&&i[t]?i[t].getLegendData():[]}getLegendSelectedDataById(t){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentByUserId(t);return i?i.getSelectedData():[]}getLegendSelectedDataByIndex(t=0){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getComponentsByType(o.L.discreteLegend);return i&&i[t]?i[t].getSelectedData():[]}setLegendSelectedDataById(t,e){var i;let s=null===(i=this._chart)||void 0===i?void 0:i.getComponentByUserId(t);s&&s.setSelectedData(e)}setLegendSelectedDataByIndex(t=0,e){var i;let s=null===(i=this._chart)||void 0===i?void 0:i.getComponentsByType(o.L.discreteLegend);s&&s[t]&&s[t].setSelectedData(e)}getDataURL(){var t;return eU(this,void 0,void 0,function*(){let e=this.getStage();if(this._chart&&e){e.render();let t=this._chart.getCanvas();return yield function(t,e){var i,s,r,n,a;return s=this,r=void 0,n=void 0,a=function*(){if(!t)return"";try{if(void 0!==OffscreenCanvas&&t instanceof OffscreenCanvas)return new Promise(e=>{t.convertToBlob().then(t=>{let i=new FileReader;i.readAsDataURL(t),i.onload=()=>{e(i.result)}})})}catch(t){(null!==(i=null==e?void 0:e.onError)&&void 0!==i?i:x.vU)(`getCanvasDataURL error : ${t.toString()}`)}return t.toDataURL()},new(n||(n=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var s;e.done?t(e.value):((s=e.value)instanceof n?s:new n(function(t){t(s)})).then(i,o)}l((a=a.apply(s,r||[])).next())})}(t,{onError:this._onError})}return null===(t=this._option)||void 0===t||t.onError(ReferenceError("render is not defined")),null})}exportImg(t){var e,i;return eU(this,void 0,void 0,function*(){if(!(0,b.qe)(this._option.mode))return void(null===(e=this._option)||void 0===e||e.onError(TypeError("non-browser environment can not export img")));let s=yield this.getDataURL();s?function(t="vchart",e){let i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("target","_blank"),i.setAttribute("download",`${t}.png`),i.dispatchEvent(new MouseEvent("click"))}(t,s):null===(i=this._option)||void 0===i||i.onError(ReferenceError("render is not defined"))})}exportCanvas(){var t;let e=this.getStage();if(this._chart&&e)return e.toCanvas();null===(t=this._option)||void 0===t||t.onError(ReferenceError("render is not defined"))}getImageBuffer(){var t,e;if("node"!==this._option.mode)return void(null===(t=this._option)||void 0===t||t.onError(TypeError("getImageBuffer() now only support node environment.")));let i=this.getStage();return i?(i.render(),i.window.getImageBuffer()):(null===(e=this._option)||void 0===e||e.onError(ReferenceError("render is not defined")),null)}setLayout(t){var e;this._option.layout=t,null===(e=this._chart)||void 0===e||e.setLayout(t)}reLayout(){var t;null===(t=this._chart)||void 0===t||t.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var t;return null===(t=this._compiler)||void 0===t?void 0:t.getCanvas()}getContainer(){var t;let e;return(0,v.Z)(this._container)?this._container:(e=(0,c.Z)(this._canvas)?u.rF.getElementById(this._canvas):this._canvas,(0,v.Z)(e)?e.parentElement:null===(t=this.getCanvas())||void 0===t?void 0:t.parentElement)}getComponents(){return this._chart.getAllComponents()}getScale(t){var e;let i=null===(e=this._chart)||void 0===e?void 0:e.getGlobalScale();return null==i?void 0:i.getScale(t)}setDimensionIndex(t,e={}){var i;return null===(i=this._chart)||void 0===i?void 0:i.setDimensionIndex(t,e)}stopAnimation(){var t,e,i;null===(i=null===(e=null===(t=this._compiler)||void 0===t?void 0:t.getVGrammarView())||void 0===e?void 0:e.animate)||void 0===i||i.stop()}pauseAnimation(){var t,e,i;null===(i=null===(e=null===(t=this._compiler)||void 0===t?void 0:t.getVGrammarView())||void 0===e?void 0:e.animate)||void 0===i||i.pause()}resumeAnimation(){var t,e,i;null===(i=null===(e=null===(t=this._compiler)||void 0===t?void 0:t.getVGrammarView())||void 0===e?void 0:e.animate)||void 0===i||i.resume()}convertDatumToPosition(t,e={},i=!1,s){var r;let n;if(!this._chart||(0,J.Z)(t))return null;let{seriesId:a,seriesIndex:o=0}=e;if((0,v.Z)(a)?n=this._chart.getSeriesInUserId(a):(0,v.Z)(o)&&(n=null===(r=this._chart.getSeriesInIndex([o]))||void 0===r?void 0:r[0]),n){let e;let r=Object.keys(t),a=n.getViewData().latestData.find(e=>r.every(i=>e[i]==t[i])),o=n.getRegion().getLayoutStartPoint();return(e=a?n.dataToPosition(a,s):n.dataToPosition(t,s))?(0,y.G$)(e,o,i):null}return null}convertValueToPosition(t,e,i=!1){var s,r;let n;if(!this._chart||(0,f.Z)(t)||(0,J.Z)(e))return null;if(!(0,p.Z)(t)){let r;let{axisId:n,axisIndex:a}=e;if((0,v.Z)(n)?r=this._chart.getComponentsByKey("axes").find(t=>t.userId===n):(0,v.Z)(a)&&(r=null===(s=this._chart.getComponentsByKey("axes"))||void 0===s?void 0:s[a]),!r)return(0,x.ZK)("Please check whether the `axisId` or `axisIndex` is set!"),null;let o=null==r?void 0:r.valueToPosition(t);if(i){let t=r.getLayoutStartPoint(),e=r.getOrient();return o+("bottom"===e||"top"===e?t.x:t.y)}return o}let{seriesId:a,seriesIndex:o}=e;return(0,v.Z)(a)?n=this._chart.getSeriesInUserId(a):(0,v.Z)(o)&&(n=null===(r=this._chart.getSeriesInIndex([o]))||void 0===r?void 0:r[0]),n?(0,y.G$)(n.valueToPosition(t[0],t[1]),n.getRegion().getLayoutStartPoint(),i):((0,x.ZK)("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(t){return tE.instance().getFunction(t)}registerFunction(t,e){t&&e&&tE.instance().registerFunction(t,e)}unregisterFunction(t){t&&tE.instance().unregisterFunction(t)}getFunctionList(){return tE.instance().getFunctionNameList()}setRuntimeSpec(t){this._spec=t,this._updateSpecInfo()}updateIndicatorDataById(t,e){var i;let s=null===(i=this._chart)||void 0===i?void 0:i.getComponentByUserId(t);s&&s.updateDatum(e)}updateIndicatorDataByIndex(t=0,e){var i;let s=null===(i=this._chart)||void 0===i?void 0:i.getComponentsByType(o.L.indicator);s&&s[t]&&s[t].updateDatum(e)}geoZoomByIndex(t=0,e,i){this._geoZoomByQuery({regionIndex:t},e,i)}geoZoomById(t,e,i){this._geoZoomByQuery({regionId:t},e,i)}_geoZoomByQuery(t,e,i){var s,r;let n=null===(s=this._chart)||void 0===s?void 0:s.getRegionsInQuerier(t)[0],a=null===(r=this._chart)||void 0===r?void 0:r.getComponentsByType(o.L.geoCoordinate),l=null==a?void 0:a.find(t=>{var e;return null===(e=t.getRegions())||void 0===e?void 0:e.includes(n)});l&&l.dispatchZoom(e,i)}_initChartPlugin(){let t=T.F.getChartPlugins();t.length>0&&(this._chartPlugin=new eP(this),this._chartPlugin.load(t.map(t=>new t)),this._chartPluginApply("onInit",this._spec))}_chartPluginApply(t,...e){this._chartPlugin&&this._chartPlugin[t]&&this._chartPlugin[t].apply(this._chartPlugin,e)}_getMode(){return this._option.mode||a.i["desktop-browser"]}_getChartOption(t){return{type:t,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,performanceHook:this._option.performanceHook,viewBox:this._viewBox,animation:this._option.animation,getTheme:()=>{var t;return null!==(t=this._currentTheme)&&void 0!==t?t:{}},getSpecInfo:()=>{var t;return null!==(t=this._specInfo)&&void 0!==t?t:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:!0===this._option.disableTriggerEvent}}}eW.InstanceManager=Q.u,eW.ThemeManager=S.V,eW.globalConfig={uniqueTooltip:!0},eW.Utils={measureText:(t,e,i,s)=>tM(e,i,s).measure(t)},eW.vglobal=u.rF,T.F.registerRegion("region",tm),T.F.registerLayout("base",tA),(0,tk.B)(),V.Z.useRegisters([tw.BQt]),(0,ez.jB)(eH,eN),L.F.registerInteraction(eH.type,eH),(0,ez.jB)(ej,eN),L.F.registerInteraction(ej.type,ej),(0,eO.aW)(eI.name,eI),G.Y.getInstance(G.h.Error)},2990:function(t,e,i){i.d(e,{BV:()=>r,J3:()=>p,kk:()=>g,uj:()=>c});var s,r,n=i(5205),a=i(645),o=i(9904),l=i(2449),h=i(6338),d=i(6358),u=i(1393);function c(t,e,i){e=e instanceof l.q?e:t.dataSet,(0,d.U)(e,"copyDataView",u.Y);let s=new h.VO(e,i);return s.parse([t],{type:"dataview"}),s.transform({type:"copyDataView",level:r.copyDataView}),s}function p(t,e,i=[]){let s;if(t instanceof h.VO)return t;let{id:r,values:l=[],fromDataIndex:d,fromDataId:u,transforms:c=[]}=t,g=t.parser?(0,a.Z)(t.parser):{clone:!0},m=(0,a.Z)(t.fields);g.clone=!1!==g.clone;let f=i.find(t=>t.name===r);if(f)s=f;else{let t={name:r};if(m&&(t.fields=m),s=new h.VO(e,t),"string"==typeof u){let t=i.find(t=>t.name===u);if(!t)return(0,n.ZK)(`no data matches fromDataId ${u}`),null;s.parse([t],{type:"dataview"}),s.transform({type:"copyDataView"})}else if("number"==typeof d){let t=i[d];if(!t)return(0,n.ZK)(`no data matches fromDataIndex ${d}`),null;s.parse([t],{type:"dataview"}),s.transform({type:"copyDataView"})}else Array.isArray(l)?s.parse(l,g):(0,o.Z)(l)&&(!g||["csv","dsv","tsv"].includes(g.type))?s.parse(l,null!=g?g:{type:"csv"}):(s.parse([]),(0,n.ZK)("values should be array"));c&&c.length&&c.forEach(t=>{e.getTransform(t.type)&&s.transform(t)})}return s}function g(t,e,i){t&&(e.fields&&t.setFields(e.fields,i),t.parseNewData(e.values,e.parser))}(s=r||(r={}))[s.copyDataView=-10]="copyDataView",s[s.treemapFilter=-8]="treemapFilter",s[s.treemapFlatten=-7]="treemapFlatten",s[s.dotObjFlat=-7]="dotObjFlat",s[s.linkDotInfo=-7]="linkDotInfo",s[s.sankeyLayout=-7]="sankeyLayout",s[s.dataZoomFilter=-6]="dataZoomFilter",s[s.legendFilter=-5]="legendFilter"},1697:function(t,e,i){i.d(e,{Q:()=>s});let s=t=>t},6358:function(t,e,i){function s(t,e,i){t.getTransform(e)||t.registerTransform(e,i)}function r(t,e,i){t.getParser(e)||t.registerParser(e,i)}i.d(e,{I:()=>r,U:()=>s})},3959:function(t,e,i){i.d(e,{E:()=>s});let s=(t,e)=>{let i=e.beforeCall();return t&&t.forEach((t,s)=>e.call(t,s,i)),i.keyMap&&(i.keyMap.clear(),i.keyMap=null),t}},1393:function(t,e,i){i.d(e,{Y:()=>a});var s=i(645),r=i(6338);function n(t,e=!1){let i=e;return t.latestData instanceof r.VO&&(i=!1),i?(0,s.Z)(t.latestData):t.latestData&&t.latestData.slice()}let a=(t,e)=>0===t.length?[]:1===t.length?n(t[0],null==e?void 0:e.deep):t.map(t=>n(t,null==e?void 0:e.deep))},1766:function(t,e,i){i.d(e,{CL:()=>n,cJ:()=>r});var s=i(5669);function r(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function n(t,e,i){t&&(i.needDefaultSeriesField&&(t[s.lb]=i.defaultSeriesField),t[s.vM]=e,t[s.XW]=i.getKey(t,e,i))}},4277:function(t,e,i){i.d(e,{j:()=>g});var s=i(2687),r=i(7631),n=i(5205),a=i(7665),o=i(3233),l=i(5173),h=i(3881);class d{constructor(t,e){this._eventDispatcher=t,this._mode=e}get chart(){var t,e;return this._chart||(this._chart=null===(e=(t=this._eventDispatcher.globalInstance).getChart)||void 0===e?void 0:e.call(t)),this._chart}register(t,e){var i,s;(null!==(s=null===(i=this.chart)||void 0===i?void 0:i.getOption().onError)&&void 0!==s?s:n.vU)("Method not implemented.")}unregister(){var t,e;(null!==(e=null===(t=this.chart)||void 0===t?void 0:t.getOption().onError)&&void 0!==e?e:n.vU)("Method not implemented.")}getTargetDimensionInfo(t,e){var i,s;let r=[].concat(null!==(i=(0,o.p5)(this.chart,{x:t,y:e}))&&void 0!==i?i:[],null!==(s=(0,a.e)(this.chart,{x:t,y:e}))&&void 0!==s?s:[]);return 0===r.length?null:r}dispatch(t,e){var i;let s=null===(i=this.chart)||void 0===i?void 0:i.getAllComponents().filter(t=>"axes"===t.specKey&&(!(null==e?void 0:e.filter)||e.filter(t))),r=s.filter(t=>{let e=t.getScale();return(0,l.lK)(e.type)}),n=r.length?r:s.filter(t=>{let e=t.getOrient();return(0,h.yL)(e)||"angle"===e}),a=[];return n.forEach(e=>{let i=(0,o.KV)(e,t);i&&a.push(i)}),this._callback.call(null,{action:"enter",dimensionInfo:a}),a}}var u=i(9673),c=i(3722);let p={[s.C.dimensionHover]:class extends d{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=t=>{if(!t)return;let e=t.event.viewX,i=t.event.viewY,s=this.getTargetDimensionInfo(e,i);null===s&&null!==this._cacheDimensionInfo?(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=s):null!==s&&(null===this._cacheDimensionInfo||s.length!==this._cacheDimensionInfo.length||s.some((t,e)=>!(0,u.eH)(t,this._cacheDimensionInfo[e])))?(this._callback.call(null,Object.assign(Object.assign({},t),{action:"enter",dimensionInfo:s.slice()})),this._cacheDimensionInfo=s):null!==s&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"move",dimensionInfo:s.slice()}))},this.onMouseOut=t=>{t&&(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},e.query),{source:c.AY.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},e.query),{source:c.AY.canvas}),callback:this.onMouseOut}),(0,r.wx)(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},e.query),{source:c.AY.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),(0,r.wx)(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}},[s.C.dimensionClick]:class extends d{constructor(){super(...arguments),this.onClick=t=>{if(!t)return;let e=t.event.viewX,i=t.event.viewY,s=this.getTargetDimensionInfo(e,i);s&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"click",dimensionInfo:s.slice()}))}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},e.query),{source:c.AY.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}};class g{getComposedEventMap(){return this._composedEventMap}constructor(t,e){this._composedEventMap=new Map,this._eventDispatcher=t,this._mode=e}on(t,e,i){let s="function"==typeof e?{query:null,callback:e}:{query:e,callback:i};if(p[t]){let e=new p[t](this._eventDispatcher,this._mode);e.register(t,s),this._composedEventMap.set(i,{eventType:t,event:e})}else this._eventDispatcher.register(t,s);return this}off(t,e,i){var s,r;let n=null!=i?i:e;if(p[t]){if(n)null===(s=this._composedEventMap.get(n))||void 0===s||s.event.unregister(),this._composedEventMap.delete(n);else for(let e of this._composedEventMap.entries())e[1].eventType===t&&(null===(r=this._composedEventMap.get(e[0]))||void 0===r||r.event.unregister(),this._composedEventMap.delete(e[0]))}else if(n){let i={callback:n,query:null,filter:{nodeName:null,type:t,level:null,source:e.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(t,i)}else this._eventDispatcher.unregister(t);return this}emit(t,e,i){return this._eventDispatcher.dispatch(t,e,i),this}prevent(t,e){return this._eventDispatcher.prevent(t,e),this}allow(t){return this._eventDispatcher.allow(t),this}release(){this._eventDispatcher.clear(),this._composedEventMap.clear()}}},2687:function(t,e,i){var s,r;i.d(e,{C:()=>s}),(r=s||(s={})).dimensionHover="dimensionHover",r.dimensionClick="dimensionClick"},3233:function(t,e,i){i.d(e,{KV:()=>g,p5:()=>c});var s=i(5173),r=i(9673),n=i(6082),a=i(3881);let o=t=>t.fieldX[0],l=t=>t.fieldY[0],h=t=>{var e;return[t.fieldX[0],null!==(e=t.fieldX2)&&void 0!==e?e:t.fieldX[1]]},d=t=>{var e;return[t.fieldY[0],null!==(e=t.fieldY2)&&void 0!==e?e:t.fieldY[1]]},u=(t,e)=>t?e?o:h:e?l:d,c=(t,e,i)=>{var n,o;if(!t)return null;let{x:l,y:h}=e,d=null!==(n=(0,r.dd)(t,t=>(0,a.yL)(t.getOrient()),e))&&void 0!==n?n:[],c=null!==(o=(0,r.dd)(t,t=>(0,a.Vz)(t.getOrient()),e))&&void 0!==o?o:[];if(!d.length&&!c.length)return null;let g=new Set,m=new Set,f=new Set;[d,c].forEach(t=>t.forEach(t=>{(0,s.lK)(t.getScale().type)?g.add(t):m.add(t),i&&t.getSpec().hasDimensionTooltip&&f.add(t)}));let v=[],_=t=>{let e="x"===t,i=e?l:h;(e?d:c).forEach(t=>{if(f.size>0){if(f.has(t)){let r=p(t,i,u(e,(0,s.lK)(t.getScale().type)));r&&v.push(r)}}else{let s=g.size>0;if((s?g:m).has(t)){let r=p(t,i,u(e,s));r&&v.push(r)}}})};return"horizontal"===t.getSpec().direction?(_("y"),0===v.length&&_("x")):(_("x"),0===v.length&&_("y")),v.length?v:null},p=(t,e,i)=>{let s=t.positionToData(e,!0);return(0,n.Z)(s)?null:g(t,s,i)},g=(t,e,i)=>{let s=t.getScale();if((0,n.Z)(e))return null;let h=s.domain().findIndex(t=>(null==t?void 0:t.toString())===e.toString());h<0&&(h=void 0);let d=(0,r.SH)(e,t,"cartesian",null!=i?i:(0,a.yL)(t.getOrient())?o:l);return{index:h,value:e,position:s.scale(e),axis:t,data:d}}},9673:function(t,e,i){i.d(e,{SH:()=>c,dd:()=>g,eH:()=>d});var s=i(4546),r=i(6082),n=i(8378),a=i(7623),o=i(5173);let l=(t,e,i)=>t.x>=e.x&&t.x<=i.x&&t.y>=e.y&&t.y<=i.y,h=(t,e,i)=>{let r=t.getRegionsInIds((0,s.IX)(e.layout.layoutBindRegionID));return null==r?void 0:r.some(t=>{let e=t.getLayoutRect(),s=t.getLayoutStartPoint();return l(i,{x:s.x,y:s.y},{x:e.width+s.x,y:e.height+s.y})})},d=(t,e)=>{var i,s;return t===e||!(0,r.Z)(t)&&!(0,r.Z)(e)&&t.value===e.value&&(null===(i=t.axis)||void 0===i?void 0:i.id)===(null===(s=e.axis)||void 0===s?void 0:s.id)},u=(t,e)=>{let i=t.tooltipFilterRange,s="function"==typeof i?i({scale:e}):i;return(0,n.Z)(s)?[-s,s]:s},c=(t,e,i,r)=>{var n;let l=e.getScale(),h=(0,o.lK)(l.type),d=[];for(let o of e.getOption().getChart().getSeriesInIndex(e.getSpecInfo().seriesIndexes))if(o.coordinate===i){let i=(0,s.IX)(r(o)),c=null===(n=o.getViewData())||void 0===n?void 0:n.latestData;if(i&&c){if(h){let e=[],s=[];c.forEach((r,n)=>{var a;(null===(a=r[i[0]])||void 0===a?void 0:a.toString())===(null==t?void 0:t.toString())&&(e.push(r),s.push(n))}),d.push({series:o,datum:e,key:p(o,s)})}else if((0,a.Z)(i[1])){let e=[],s=[];c.forEach((r,n)=>{var o;((null===(o=r[i[0]])||void 0===o?void 0:o.toString())===(null==t?void 0:t.toString())||(0,a.Z)(r[i[0]])&&(0,a.Z)(r[i[1]])&&t>=r[i[0]]&&t<r[i[1]])&&(e.push(r),s.push(n))}),d.push({series:o,datum:e,key:p(o,s)})}else{let s=u(e.getSpec(),l),r=[],n=[];if(s)c.forEach((e,o)=>{if((0,a.Z)(e[i[0]])){let a=e[i[0]]-t;a>=s[0]&&a<=s[1]&&(r.push(e),n.push(o))}});else{let e=1/0,s=0;c.forEach((o,l)=>{if((0,a.Z)(o[i[0]])){let a=Math.abs(o[i[0]]-t),h=Math.sign(o[i[0]]-t);a<e?(e=a,r=[o],n=[l],s=h):a===e&&h===s&&(r.push(o),n.push(l))}})}d.push({series:o,datum:r,key:p(o,n)})}}}return d},p=(t,e)=>`${t.id}_${e.join("_")}`,g=(t,e,i)=>{let s=t.getAllComponents().filter(s=>"axes"===s.specKey&&e(s)&&h(t,s,i));return s.length?s:null}},7665:function(t,e,i){i.d(e,{e:()=>h});var s=i(5173),r=i(9673),n=i(4546),a=i(6082),o=i(2732);let l=(t,e)=>{let i=2*Math.PI,s=(0,n.iH)(e),r=(0,n.CE)(e);return t<s?t+=Math.ceil((s-t)/i)*i:t>r&&(t-=Math.ceil((t-r)/i)*i),t},h=(t,e)=>{if(!t)return null;let i=(0,r.dd)(t,t=>"angle"===t.getOrient(),e),n=(0,r.dd)(t,t=>"radius"===t.getOrient(),e);if(!(i&&i.length||n&&n.length))return null;let h=[],d=t=>t.getDimensionField()[0],{x:u,y:c}=e;return i&&i.forEach(t=>{var e;let i=t.getScale();if(i&&(0,s.lK)(i.type)){let s=i.domain(),p=i.range(),g=t.getCenter(),m={x:u-t.getLayoutStartPoint().x-g.x,y:c-t.getLayoutStartPoint().y-g.y},f=(0,o.cX)({x:1,y:0},m);f=l(f,p);let v=(0,o.TE)(m),_=null===(e=n[0])||void 0===e?void 0:e.getScale(),y=null==_?void 0:_.range();if((f-(null==p?void 0:p[0]))*(f-(null==p?void 0:p[1]))>0||(v-(null==y?void 0:y[0]))*(v-(null==y?void 0:y[1]))>0)return;let b=t.invert(f);if((0,a.Z)(b))return;let x=s.findIndex(t=>(null==t?void 0:t.toString())===b.toString());x<0&&(x=void 0);let S=(0,r.SH)(b,t,"polar",d);h.push({index:x,value:b,position:i.scale(b),axis:t,data:S})}}),n&&n.forEach(t=>{var e;let n=t.getScale(),l=null==n?void 0:n.range();if(n&&(0,s.lK)(n.type)){let s=t.getCenter(),p={x:u-t.getLayoutStartPoint().x-s.x,y:c-t.getLayoutStartPoint().y-s.y},g=(0,o.cX)({x:1,y:0},p);g<-Math.PI/2&&(g=2*Math.PI+g);let m=(0,o.TE)(p),f=null===(e=i[0])||void 0===e?void 0:e.getScale(),v=null==f?void 0:f.range();if((g-(null==v?void 0:v[0]))*(g-(null==v?void 0:v[1]))>0||(m-(null==l?void 0:l[0]))*(m-(null==l?void 0:l[1]))>0)return;let _=n.invert(m);if((0,a.Z)(_))return;let y=n.domain().findIndex(t=>(null==t?void 0:t.toString())===_.toString());y<0&&(y=void 0);let b=(0,r.SH)(_,t,"polar",d);h.push({index:y,value:_,position:n.scale(_),axis:t,data:b})}}),h.length?h:null}},4268:function(t,e,i){i.d(e,{sp:()=>u,xA:()=>h});var s=i(8469),r=i(8350),n=i(2550),a=i(21),o=i(4380),l=i(1805);class h extends n.c{constructor(t,e){super(t,e),this.type=d.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=(t,e,i="normal",s,r)=>{var n;return r+(null!==(n=this.getAttribute("radiusOffset",e,i,s))&&void 0!==n?n:0)},this.computeCenter=(t,e,i="normal",s,n)=>(0,l.op)({x:0,y:0},this.getAttribute("centerOffset",e,i,s),e[r.yz])[t]+n,this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0,innerPadding:0,outerPadding:0})}}class d extends h{constructor(){super(...arguments),this.type=d.type}}d.type="arc";let u=()=>{(0,a.lA)(),(0,o.Eo)(),s.F.registerMark(d.type,d)}},3793:function(t,e,i){i.d(e,{k:()=>l});var s=i(8469),r=i(5803),n=i(21),a=i(4380);class o extends r.W{constructor(){super(...arguments),this.type=o.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getIgnoreAttributes(){return[]}}o.type="area";let l=()=>{s.F.registerMark(o.type,o),(0,n.LG)(),(0,a.cU)()}},5803:function(t,e,i){i.d(e,{W:()=>o});var s=i(5173),r=i(6082),n=i(9038),a=i(2550);class o extends a.c{setStyle(t,e="normal",i=0,a=this.stateStyle){if((0,r.Z)(t))return;void 0===a[e]&&(a[e]={});let o=this._getIgnoreAttributes(),l=["strokeWidth","lineWidth","lineDash","strokeDash","lineJoin","stroke","strokeOpacity","opacity","fill","fillOpacity","texture","texturePadding","textureSize","textureColor"],h=this.isUserLevel(i),d=!1;Object.keys(t).forEach(u=>{let c=t[u];if((0,r.Z)(c)||o.includes(u))return;h&&l.includes(u)&&((0,s.dx)(null==c?void 0:c.type)||(null==c?void 0:c.scale)||(0,n.Z)(c))&&(d=!0);let p=this._filterAttribute(u,c,e,i,h,a);this.setAttribute(u,p,e,i,a)}),d&&this.setMarkConfig({enableSegments:!0})}}},2550:function(t,e,i){i.d(e,{c:()=>L});var s=i(4218),r=i(9921),n=i(8118);let a=["linear","radial","conical"],o={linear:{x0:0,y0:0,x1:1,y1:1},radial:{x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},conical:{x:.5,y:.5,startAngle:0,endAngle:2*Math.PI}};var l=i(9231),h=i(5173),d=i(4370),u=i(9801),c=i(7623),p=i(6082),g=i(2698),m=i(3685),f=i(6542),v=i(1966),_=i(1036),y=i(7636),b=i(4154),x=i(3550),S=i(0);class A extends S.O{getStateInfoList(){return this._stateInfoList}constructor(t,e){super(t),this._stateInfoList=[],this._mark=e}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(t){return this._stateInfoList.find(e=>e.stateValue===t)}addStateInfo(t){if(this.getStateInfo(t.stateValue))return;t.level=t.level||0;let e=!0;for(let i=0;i<this._stateInfoList.length;i++){let s=this._stateInfoList[i].level;if(s&&s>t.level){this._stateInfoList.splice(i,0,t),e=!1;break}}e&&this._stateInfoList.push(t)}_clearStateBeforeSet(t){t.datums=null,t.items=null,t.fields=null,t.filter=null}changeStateInfo(t){let e=this.getStateInfo(t.stateValue);if(e){if(void 0!==t.datums&&(this._clearStateBeforeSet(e),e.datums=t.datums,e.datumKeys=t.datumKeys),void 0!==t.items&&(this._clearStateBeforeSet(e),e.items=t.items),void 0!==t.fields){if(this._clearStateBeforeSet(e),null===t.fields)e.fields=t.fields;else for(let i in e.fields=e.fields||{},t.fields){let s=t.fields[i];e.fields[i]=e.fields[i]||{};let r=e.fields[i];(0,c.Z)(s.domain)&&(r.domain=s.domain),(0,c.Z)(s.type)&&(r.type=s.type)}}t.filter&&(this._clearStateBeforeSet(e),e.filter=t.filter)}else this.addStateInfo(t)}clearStateInfo(t){t.forEach(t=>{this.getStateInfo(t)&&this.changeStateInfo({stateValue:t,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}checkOneState(t,e,i,s){var r;s=(0,_.Z)(x.Ir)?s:!t.mark||(0,x.Ir)(t.mark.markType);let n=!1,a=!1;if((0,c.Z)(i.datums)&&i.datums.length>0)n=this.checkDatumState(i,e,s),a=!0;else if(i.items)n=null!==(r=this.checkItemsState(i,t))&&void 0!==r&&r,a=!0;else if(i.fields)n=this.checkFieldsState(i,e,t,s),a=!0;else if(!n&&i.filter){let s={mark:this._mark,renderNode:t,type:t.mark.markType};n=i.filter(e,s),a=!0}return a?n?"in":"out":"skip"}checkState(t,e){let i=t.getStates().filter(t=>(0,v.wC)(t)).map(t=>[t,10]),s=!t.mark||(0,x.Ir)(t.mark.markType);for(let r=0;r<this._stateInfoList.length;r++){let n=this._stateInfoList[r],a=this.checkOneState(t,e,n,s);"skip"!==a&&"in"===a&&i.push([n.stateValue,n.level])}return i.map(t=>t[0])}checkDatumState(t,e,i){let s=!1,r=i?e[0]:e;if((0,y.Z)(t.datums)){let e=t.datumKeys||Object.keys(t.datums[0]).filter(t=>!t.startsWith(m.Bq));s=t.datums.some(t=>i&&(0,y.Z)(null==t?void 0:t.items)?e.every(e=>{var i,s;return(null===(s=null===(i=null==t?void 0:t.items)||void 0===i?void 0:i[0])||void 0===s?void 0:s[e])===(null==r?void 0:r[e])}):e.every(e=>(null==t?void 0:t[e])===(null==r?void 0:r[e])))}else s=(0,b.Z)(t.datums)?(t.datumKeys||Object.keys(t.datums).filter(t=>!t.startsWith(m.Bq))).every(e=>{var s,n;return i?(null===(s=t.datums.items)||void 0===s?void 0:s[0][e])===r[e]:(null===(n=t.datums)||void 0===n?void 0:n[e])===r[e]}):e===t.datums;return s}checkItemsState(t,e){var i;return null===(i=t.items)||void 0===i?void 0:i.includes(e)}checkFieldsState(t,e,i,s){var r;let n=!0;for(let a in t.fields){let o=t.fields[a],l=o.type,d=o.domain,u=s?null===(r=e[0])||void 0===r?void 0:r[a]:e[a];if((0,h.z2)(l)&&d.length>1){if(this.checkLinearFieldState(d,a,e,i,s)){n=!1;break}n=!0}else{if(!d.some(t=>t===u)){n=!1;break}n=!0}}return n}checkLinearFieldState(t,e,i,s,r){var n;let a=r?null===(n=i[0])||void 0===n?void 0:n[e]:i[e];return a<t[0]||a>t[t.length-1]}updateLayoutState(t){return this._stateMap.markUpdateRank++,this.updateState({markUpdateRank:this._stateMap.markUpdateRank},t)}compileState(t,e){t.state({callback:(t,e)=>this.checkState(e,t)},e)}}var k=i(5208),w=i(3558);class T extends w.O{constructor(t){super(t),this._mark=t.mark}setCompiledProductId(t){this._compiledProductId=t}generateProductId(){let t=super.generateProductId();return(0,c.Z)(t)?t:`${m.Bq}_markData_${this._mark.id}`}_compileProduct(){var t;let e=null===(t=this._data)||void 0===t?void 0:t.latestData;(0,p.Z)(e)||(0,c.Z)(this.getProduct())||this._initProduct(e)}}var C=i(6031),M=i(4277),E=i(5719),B=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class O extends u.F{getMarkConfig(){return this._markConfig}setMarkConfig(t){Object.keys(t).forEach(e=>{this._markConfig[e]=t[e]})}getVisible(){return this._visible}setVisible(t){this._visible=t}getUserId(){return this._userId}setUserId(t){(0,c.Z)(t)&&(this._userId=t)}getDataView(){var t;return null===(t=this._data)||void 0===t?void 0:t.getDataView()}setDataView(t,e){(0,p.Z)(this._data)&&this.initMarkData(Object.assign(Object.assign({},this._option),{mark:this})),(0,c.Z)(e)&&this._data.setCompiledProductId(e),this._data.setDataView(t)}getData(){return this._data}setData(t){this._data=t}hasState(t){return t in this.state.getStateMap()}getState(t){return this.state.getStateMap()[t]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(t){this._animationConfig=t}setSkipBeforeLayouted(t){this._skipBeforeLayouted=t}getSkipBeforeLayouted(){return this._skipBeforeLayouted}getGroupKey(){return this._groupKey}setGroupKey(t){this._groupKey=t}setStateSortCallback(t){this._stateSort=t}constructor(t,e,i){super(t),this.grammarType=C._.mark,this.type=void 0,this.name="mark",this._markConfig={zIndex:f.Ai.Mark,morph:!1},this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._skipBeforeLayouted=!1,this.name=e,this.model=i,this.key=t.key,this.state=new A(Object.assign(Object.assign({},t),{stateKeyToSignalName:this.stateKeyToSignalName.bind(this)}),this),this._event=new M.j(i.getOption().eventDispatcher,i.getOption().mode)}setTransform(t){this._transform=t}initMarkData(t){this._data=new T(t)}stateKeyToSignalName(t){return`${m.Bq}_${this.type}_${this.id}_${t}`}getAttribute(t,e,i,s){}_compileProduct(t){let e=this.getProduct();if(!this.getVisible())return void((0,c.Z)(e)&&this.removeProduct());!(0,c.Z)(e)&&this.getCompiler().isInited&&(this._initProduct(null==t?void 0:t.group),(0,p.Z)(this._product)||(this.compileSignal(),this.compileData(),this.compileState(),this.compileEncode(),this.compileAnimation(),this.compileContext(null==t?void 0:t.context),this.compileTransform()))}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId();this._product=e.mark(this.type,null!=t?t:e.rootMark).id(i),this.name&&this._product&&this._product.name(this.name),this._compiledProductId=i}generateProductId(){return this._userId?`${this._userId}`:`${this.name}_${this.id}`}compileData(){if((0,p.Z)(this._data))return;this._data.compile();let t=this._data.getProduct();(0,c.Z)(this._product)&&(0,c.Z)(t)&&this._product.join(t,this.key,void 0,this.getGroupKey())}updateStaticEncode(){if(!this._product)return;let{enterStyles:t,updateStyles:e}=this._separateStyle();this._product.encodeState("group",t,!0),this._product.encode(e,!0)}_separateStyle(){let t=this.stateStyle,e=k.q.STATE_NORMAL,i=t[e],s=(B(t,["symbol"==typeof e?e:e+""]),this._option.noSeparateStyle?null:{}),r={};return Object.keys(i).forEach(t=>{this._unCompileChannel[t]||(this._option.noSeparateStyle||(0,v.hx)(t,i,this.getGroupKey())?r[t]={callback:this.compileCommonAttributeCallback(t,"normal"),dependency:[this.stateKeyToSignalName("markUpdateRank")]}:s[t]=this.compileCommonAttributeCallback(t,"normal"))}),{enterStyles:s,updateStyles:r}}compileEncode(){let t=this.stateStyle,e=k.q.STATE_NORMAL,i=(t[e],B(t,["symbol"==typeof e?e:e+""])),{enterStyles:s,updateStyles:r}=this._separateStyle();this._product.encode(r,!0),this._product.encodeState("group",s,!0),Object.keys(i).forEach(t=>{let e={};Object.keys(i[t]).forEach(i=>{this._unCompileChannel[i]||(e[i]={callback:this.compileCommonAttributeCallback(i,t),dependency:[this.stateKeyToSignalName("markUpdateRank")]})}),this._product.encodeState(t,e,!0)}),this._skipBeforeLayouted&&this._product.layout({skipBeforeLayouted:this._skipBeforeLayouted})}compileState(){this.state.compileState(this._product,this._stateSort)}compileAnimation(){var t,e,i,s;if(this._animationConfig){let r;if("component"===this.type)r=null===(t=this.model.animate)||void 0===t?void 0:t.getAnimationStateSignalName();else{let t=null===(i=(e=this.model).getRegion)||void 0===i?void 0:i.call(e);r=null===(s=null==t?void 0:t.animate)||void 0===s?void 0:s.getAnimationStateSignalName()}this._product.animation(this._animationConfig),this._product.animationState({callback:(t,e,i)=>{var s;return null===(s=i[r])||void 0===s?void 0:s.callback(t,e)},dependency:r}),this._animationConfig.normal&&(this._animationConfig.appear?this._event.on(g.ZK.ANIMATION_END,({event:t})=>{t.mark===this.getProduct()&&t.animationState===E.h.appear&&this.runAnimationByState(E.h.normal)}):this._event.on(g.ZK.AFTER_DO_RENDER,()=>{this.runAnimationByState(E.h.normal)}))}}compileContext(t){let e=Object.assign(Object.assign({},this._markConfig),{context:Object.assign({markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},t)});this._product.configure(e)}compileSignal(){this.state.compile()}_computeAttribute(t,e){return(t,e)=>{}}compileCommonAttributeCallback(t,e){let i=this._computeAttribute(t,e),s={mark:null,parent:null,element:null};return(t,e)=>(s.mark=e.mark,s.parent=e.mark.group,s.element=e,i(t,s))}compileTransform(){var t;(null===(t=this._transform)||void 0===t?void 0:t.length)&&this.getProduct().transform(this._transform)}_lookupGrammar(t){var e;return null===(e=this.getCompiler().getVGrammarView())||void 0===e?void 0:e.getMarkById(t)}updateState(t,e){return this.state.updateState(t,e)}updateLayoutState(t,e){return e&&this.getMarks().length>0&&this.getMarks().forEach(t=>t.state.updateLayoutState(!0)),this.state.updateLayoutState(t)}updateMarkState(t){if(!this._product)return;let e=this.state.getStateInfo(t);this._product.elements.forEach(i=>{"in"===this.state.checkOneState(i,i.getDatum(),e)?i.addState(t):i.removeState(t)})}getMarks(){return[]}runAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.runAnimationByState(t)}stopAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.stopAnimationByState(t)}pauseAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.pauseAnimationByState(t)}resumeAnimationByState(t){var e,i;return null===(i=null===(e=this.getProduct())||void 0===e?void 0:e.animate)||void 0===i?void 0:i.resumeAnimationByState(t)}getProductElements(){let t=this.getProduct();if(t)return t.elements}release(){super.release(),this.state.release()}}var I=i(1805),R=i(9038),P=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class L extends O{constructor(t,e){var i;super(e,t,e.model),this._extensionChannel={},this._computeExChannel={},this._attributeContext=e.attributeContext,null===(i=e.map)||void 0===i||i.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(t,e){t&&((0,c.Z)(t.id)&&(this._userId=t.id),(0,_.Z)(t.interactive)&&(this._markConfig.interactive=t.interactive),(0,c.Z)(t.zIndex)&&(this._markConfig.zIndex=t.zIndex),(0,_.Z)(t.visible)&&this.setVisible(t.visible),this._initSpecStyle(t,this.stateStyle,e))}_transformStyleValue(t,e){if(t.scale){let i=t.scale,s=i.range();return i.range(s.map(e)),t}return"function"==typeof t?(...i)=>e(t(...i)):e(t)}convertAngleToRadian(t){return this._transformStyleValue(t,I.M4)}isUserLevel(t){return[l.W.User_Mark,l.W.User_Series,l.W.User_Chart,l.W.User_SeriesStyle].includes(t)}setStyle(t,e="normal",i=0,s=this.stateStyle){if((0,p.Z)(t))return;void 0===s[e]&&(s[e]={});let r=this.isUserLevel(i);Object.keys(t).forEach(n=>{let a=t[n];(0,p.Z)(a)||(a=this._filterAttribute(n,a,e,i,r,s),this.setAttribute(n,a,e,i,s))})}getStyle(t,e="normal"){var i;return null===(i=this.stateStyle[e][t])||void 0===i?void 0:i.style}_filterAttribute(t,e,i,s,r,n=this.stateStyle){let a=this._styleConvert(e);if(r)switch(t){case"angle":a=this.convertAngleToRadian(a);break;case"innerPadding":case"outerPadding":a=this._transformStyleValue(a,t=>-t);break;case"curveType":a=this._transformStyleValue(a,t=>(0,x.Lk)(t,this._option.model.direction))}return a}setReferer(t,e,i,s=this.stateStyle){var r;if(t){if(e&&i){let n=null!==(r=s[i])&&void 0!==r?r:{[e]:{}};s[i][e]=Object.assign(Object.assign({},n[e]),{referer:t})}else Object.entries(s).forEach(([e,i])=>{Object.entries(i).forEach(([i,r])=>{s[e][i].referer=t})})}}setPostProcess(t,e,i="normal"){var s;(null===(s=this.stateStyle[i])||void 0===s?void 0:s[t])&&(this.stateStyle[i][t].postProcess=e)}getAttribute(t,e,i="normal",s){return this._computeAttribute(t,i)(e,s)}setAttribute(t,e,i="normal",r=0,n=this.stateStyle){var a;void 0===n[i]&&(n[i]={}),void 0===n[i][t]&&(n[i][t]={level:r,style:e,referer:void 0});let o=null===(a=n[i][t])||void 0===a?void 0:a.level;(0,c.Z)(o)&&o<=r&&(0,s.H)(n[i][t],{style:e,level:r}),"normal"!==i&&t in this._extensionChannel&&this._extensionChannel[t].forEach(t=>{void 0===n[i][t]&&(n[i][t]=n.normal[t])})}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(t){if(!t)return t;if((0,h.dx)(t.type)||t.scale){let e=(0,n.lD)(t,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(e)return{scale:e,field:t.field,changeDomain:t.changeDomain}}return t}_computeAttribute(t,e){var i;let s=null===(i=this.stateStyle[e])||void 0===i?void 0:i[t];s||(s=this.stateStyle.normal[t]);let r=this._computeStateAttribute(s,t,e),n=(0,R.Z)(null==s?void 0:s.postProcess),a=t in this._computeExChannel;if(n&&a){let i=this._computeExChannel[t];return(n,a)=>{let o=r(n,a);return o=s.postProcess(o,n,this._attributeContext,a,this.getDataView()),i(t,n,e,a,o)}}if(n)return(t,e)=>s.postProcess(r(t,e),t,this._attributeContext,e,this.getDataView());if(a){let i=this._computeExChannel[t];return(s,n)=>i(t,s,e,n,r(s,n))}return r}_computeStateAttribute(t,e,i){var s;return t?t.referer?t.referer._computeAttribute(e,i):t.style?"function"==typeof t.style?(e,i)=>t.style(e,this._attributeContext,i,this.getDataView()):a.includes(t.style.gradient)?this._computeGradientAttr(t.style):["outerBorder","innerBorder"].includes(e)?this._computeBorderAttr(t.style):(0,h.dx)(null===(s=t.style.scale)||void 0===s?void 0:s.type)?(e,i)=>{let s=e;return"series"===this.model.modelType&&this.model.getMarkData&&(s=this.model.getMarkData(e)),t.style.scale.scale(s[t.style.field])}:(e,i)=>t.style:(e,i)=>t.style:(t,e)=>{}}_initStyle(){let t=this._getDefaultStyle();this.setStyle(t,"normal",0)}_initSpecStyle(t,e,i){t.style&&this.setStyle(t.style,"normal",l.W.User_Mark,e);let s=t.state;s&&Object.keys(s).forEach(t=>{let i=s[t];if("style"in i){let s=i.style,r={stateValue:t};"level"in i&&(r.level=i.level),"filter"in i&&(r=(0,R.Z)(i.filter)?Object.assign({filter:i.filter},r):Object.assign(Object.assign({},i.filter),r)),this.state.addStateInfo(r),this.setStyle(s,t,l.W.User_Mark,e)}else this.setStyle(i,t,l.W.User_Mark,e)})}_computeGradientAttr(t){var e,i;let{gradient:s,scale:n,field:a}=t,l=P(t,["gradient","scale","field"]),h=n,u=a;if(!(n&&a||"series"!==this.model.modelType)){let{scale:t,field:e}=this.model.getColorAttribute();n||(h=t),u||(u=e)}let p=(0,d._t)((0,d.wW)(this.model.getColorScheme(),"series"===this.model.modelType?null===(i=(e=this.model).getSpec)||void 0===i?void 0:i.call(e):void 0),this.model.getDefaultColorDomain()),g=Object.assign(Object.assign({},o[s]),l);return(t,e)=>{let i={},n=this.getDataView();return Object.keys(g).forEach(s=>{let a=g[s];"stops"===s?i.stops=a.map(i=>{let{opacity:s,color:a,offset:o}=i,l=null!=a?a:null==h?void 0:h.scale(t[u]);return(0,R.Z)(a)&&(l=a(t,this._attributeContext,e,n)),(0,c.Z)(s)&&(l=r.Il.SetOpacity(l,s)),{offset:(0,R.Z)(o)?o(t,this._attributeContext,e,n):o,color:l||p[0]}}):(0,R.Z)(a)?i[s]=a(t,this._attributeContext,e,n):i[s]=a}),i.gradient=s,i}}_computeBorderAttr(t){let{scale:e,field:i}=t,s=P(t,["scale","field"]);return(t,r)=>{var n,o,l;let h={};if(Object.keys(s).forEach(e=>{let i=s[e];(0,R.Z)(i)?h[e]=i(t,this._attributeContext,r,this.getDataView()):h[e]=i}),"stroke"in h)a.includes(null===(l=s.stroke)||void 0===l?void 0:l.gradient)&&(h.stroke=this._computeGradientAttr(s.stroke)(t,r));else{let s=(0,d._t)((0,d.wW)(this.model.getColorScheme(),"series"===this.model.modelType?null===(o=(n=this.model).getSpec)||void 0===o?void 0:o.call(n):void 0),this.model.getDefaultColorDomain()),r=e,a=i;if(!(e&&i||"series"!==this.model.modelType)){let{scale:i,field:n}=this.model.getColorAttribute();e||(r=i),a||(a=n),h.stroke=(null==r?void 0:r.scale(t[a]))||s[0]}}return h}}}},8120:function(t,e,i){i.d(e,{k:()=>o});var s=i(8469),r=i(2698),n=i(2550);class a extends n.c{constructor(t,e){super(t,e),this.type="component",this._componentType=e.componentType,this._mode=e.mode}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId();this._product=e.mark(r.Cm.component,null!=t?t:e.rootMark,{componentType:this._componentType,mode:this._mode}).id(i),this._compiledProductId=i}}a.type="component";let o=()=>{s.F.registerMark(a.type,a)}},903:function(t,e,i){i.d(e,{B:()=>l});var s=i(8469),r=i(5205),n=i(2550),a=i(21);class o extends n.c{constructor(){super(...arguments),this.type=o.type,this._marks=[]}getMarks(){return this._marks}_getDefaultStyle(){return Object.assign({},super._getDefaultStyle())}isMarkExist(t){return void 0!==this._marks.find(e=>e.id===t.id)}addMark(t){return this.isMarkExist(t)?((0,r.ZK)("Mark already exists, add mark failed."),!1):(this._marks.push(t),!0)}removeMark(t){let e=this._marks.findIndex(e=>e.id===t.id||e.name===t.name);return -1===e?((0,r.ZK)("Mark does not exists, removeMark failed."),!1):(this._marks.splice(e,1),!0)}getMarkInType(t){return this._marks.filter(e=>e.type===t)}getMarkInId(t){return this._marks.find(e=>e.id===t)}getMarkInUserId(t){let e;if(this._marks.forEach(i=>{i.getUserId()===t&&(e=i)}),!e)for(let i=0;i<this._marks.length;i++){let s=this._marks[i];if("group"===s.type&&(e=s.getMarkInUserId(t)),e)break}return e}getMarkInName(t){return this._marks.filter(e=>e.name===t)}_compileProduct(t){super._compileProduct(t),this._product.configure({zIndex:this._markConfig.zIndex}),(null==t?void 0:t.ignoreChildren)||this.getMarks().forEach(t=>{t.getProduct()&&t.removeProduct(),t.compile({group:this._product})})}}o.type="group";let l=()=>{(0,a.to)(),s.F.registerMark(o.type,o)}},1646:function(t,e,i){i.d(e,{BF:()=>$});var s=i(775),r=i(3679),n=i(903),a=i(8469),o=i(2550),l=i(21);class h extends o.c{constructor(){super(...arguments),this.type=h.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}}h.type="rule";let d=()=>{a.F.registerMark(h.type,h),(0,l.__)()};var u=i(5595),c=i(3793),p=i(6264),g=i(4380);class m extends o.c{constructor(){super(...arguments),this.type=m.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,length:3})}}m.type="rect3d";let f=()=>{a.F.registerMark(m.type,m),(0,l.lo)(),(0,g.Zm)()};class v extends o.c{constructor(){super(...arguments),this.type=v.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}v.type="path";let _=()=>{a.F.registerMark(v.type,v),(0,l.O6)()};var y=i(4268);class b extends y.xA{constructor(){super(...arguments),this.type=b.type,this._support3d=!0}}b.type="arc3d";let x=()=>{(0,g.Eo)(),(0,l.jd)(),a.F.registerMark(b.type,b)};var S=i(8120),A=i(4761),k=i(2698),w=i(4643),T=i(1035),C=i(6082),M=i(9038),E=i(1036),B=i(306),O=i(9730),I=i(8656),R=i(6602),P=i(8807),L=i(4682);class D extends P.W{constructor(t){super(t),this.getStateAttrs=(t,e)=>{var i,s,r,n;let a=!(0,C.Z)(null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[t]),o=a?Object.assign(Object.assign({},null===(s=this.mark.getSpec().encode)||void 0===s?void 0:s[t]),this.runtimeStatesEncoder[t]):null===(r=this.mark.getSpec().encode)||void 0===r?void 0:r[t],l={};if(!o)return l;if((0,M.Z)(o))return l.attributes=o(this.getDatum(),this,t,e),l;if(!a&&(null===(n=this.graphicItem.glyphStates)||void 0===n?void 0:n[t]))return this.graphicItem.glyphStates[t];if(o){let e=[Object.assign({},this.items[0],{nextAttrs:{}})];return(0,L.h)(this,e,o,this.mark.parameters()),this.coordinateTransformEncode(e),l.attributes=e[0].nextAttrs,this.graphicItem.glyphStates?this.graphicItem.glyphStates[t]||(this.graphicItem.glyphStates[t]=l):this.graphicItem.glyphStates={[t]:l},l}return l},this.glyphMeta=this.mark.getGlyphMeta()}getGlyphGraphicItems(){return this.glyphGraphicItems}initGraphicItem(t={}){if(this.graphicItem)return;this.graphicItem=this.mark.addGraphicItem(t,this.groupKey),this.graphicItem[R.dc]=this,this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1);let e=this.glyphMeta.getMarks();this.glyphGraphicItems={},this.graphicItem.getSubGraphic().forEach(t=>{let i=e[t.name];this.glyphGraphicItems[t.name]=t,t.onBeforeAttributeUpdate=e=>this.mark?(0,I.qX)(i,e,this,t.name):e}),this.clearGraphicAttributes()}useStates(t,e){if(!this.graphicItem)return!1;this.mark.emit(k.ZK.BEFORE_ELEMENT_STATE,{states:t},this),this.states=t.slice();let i=(0,E.Z)(e)?e:this.hasStateAnimation();return this.graphicItem.glyphStateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,i),this.mark.emit(k.ZK.AFTER_ELEMENT_STATE,{states:t},this),!0}encodeGraphic(){this.coordinateTransformEncode(this.items);let t=this.transformElementItems(this.items,this.mark.markType),e=!this.graphicItem;this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null):this.initGraphicItem(),this.diffState===k.OJ.enter||e?(this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!0),this.applyGraphicAttributes(t),this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1)):this.applyGraphicAttributes(t),(this.diffState===k.OJ.enter||this.diffState===k.OJ.update)&&this.states.length&&(Object.values(this.glyphGraphicItems).forEach(t=>{t.states={}}),this.useStates(this.states)),this.items.map(t=>{t.nextAttrs={}})}encodeCustom(t){var e;let i={},s=this.glyphMeta.getChannelEncoder(),r=this.glyphMeta.getFunctionEncoder();if(r&&(i=r.call(null,Object.assign({},null===(e=this.graphicItem)||void 0===e?void 0:e.attribute,t),this.getDatum(),this,this.mark.getGlyphConfig())),s){let e;Object.keys(s).forEach(r=>{var n;if(!(0,C.Z)(t[r])){e||(e=Object.assign({},null===(n=this.graphicItem)||void 0===n?void 0:n.attribute,t));let a=s[r].call(null,r,t[r],e,this.getDatum(),this,this.mark.getGlyphConfig());Object.keys(null!=a?a:{}).forEach(t=>{var e;i[t]=Object.assign(null!==(e=i[t])&&void 0!==e?e:{},a[t])})}})}return i}encodeDefault(){let t={};return this.glyphMeta.getDefaultEncoder()&&Object.assign(t,this.glyphMeta.getDefaultEncoder().call(null,this.getDatum(),this,this.mark.getGlyphConfig())),t}_onGlyphAttributeUpdate(t=!1){return e=>{if(!this.mark)return e;let i=this.glyphMeta.getMarks(),s=(0,I.qX)(this.mark.getAttributeTransforms(),e,this),r=t?this.encodeDefault():null,n=this.encodeCustom(e);return Object.keys(i).forEach(s=>{let a=i[s],o=this.glyphGraphicItems[s],l=Object.assign({},null==n?void 0:n[s]);if(t){let t=null==r?void 0:r[s];Object.keys(null!=t?t:{}).forEach(e=>{(0,B.Z)(this.items[0].nextAttrs,e)||(0,B.Z)(l,e)||(l[e]=t[e])})}let h=Object.assign({},(0,I.o$)(a,e),l),d=this._generateGlyphItems(a,this.items,h);this.coordinateTransformEncode(d);let u=this.transformElementItems(d,a);this.applyGlyphGraphicAttributes(u,s,o),a===k.Cm.shape&&(o.datum=d[0].datum)}),s}}_generateGlyphItems(t,e,i){let s=e.map(t=>Object.assign({},t,{nextAttrs:i}));return R.FQ.includes(t)&&this.mark.getSpec().enableSegments&&s.forEach((t,s)=>{t.nextAttrs=Object.assign({},e[s].nextAttrs,i)}),s}getGraphicAttribute(t,e=!1,i){if(!this.graphicItem)return;let s=this.getPrevGraphicAttributes(i);return e&&(0,B.Z)(s,t)?s[t]:(i?this.glyphGraphicItems[i]:this.graphicItem).attribute[t]}setGraphicAttribute(t,e,i=!0,s){if(!this.graphicItem)return;let r=s?this.glyphGraphicItems[s]:this.graphicItem,n=this.getFinalGraphicAttributes(s),a=this.getPrevGraphicAttributes(s);i&&(n[t]=e),(0,B.Z)(a,t)||(a[t]=r.attribute[t]),r.setAttribute(t,e)}setGraphicAttributes(t,e=!0,i){if(!this.graphicItem)return;let s=i?this.glyphGraphicItems[i]:this.graphicItem,r=this.getFinalGraphicAttributes(i),n=this.getPrevGraphicAttributes(i);Object.keys(t).forEach(i=>{e&&(r[i]=t[i]),(0,B.Z)(n,i)||(n[i]=s.attribute[i])}),s.setAttributes(t)}diffAttributes(t,e){let i={},s=this.getFinalGraphicAttributes(e);for(let e in t)(0,B.Z)(s,e)&&(0,O.X)(s[e],t[e])||(i[e]=t[e]);return i}applyGlyphGraphicAttributes(t,e,i){var s,r;if(this.mark.needAnimate()){let n=this.diffAttributes(t,e),a=null!==(s=this.getPrevGraphicAttributes(e))&&void 0!==s?s:{},o=null!==(r=this.getFinalGraphicAttributes(e))&&void 0!==r?r:{};Object.keys(n).forEach(t=>{a[t]=i.attribute[t],o[t]=n[t]}),this.setNextGraphicAttributes(n,e),this.setPrevGraphicAttributes(a,e),this.setFinalGraphicAttributes(o,e),i.setAttributes(n)}else i.setAttributes(t)}getFinalGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).finalAttrs}setFinalGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).finalAttrs=t}getPrevGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).prevAttrs}setPrevGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).prevAttrs=t}getNextGraphicAttributes(t){return(t?this.glyphGraphicItems[t]:this.graphicItem).nextAttrs}setNextGraphicAttributes(t,e){(e?this.glyphGraphicItems[e]:this.graphicItem).nextAttrs=t}clearChangedGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(t=>{this.setPrevGraphicAttributes(null,t),this.setNextGraphicAttributes(null,t)})}clearGraphicAttributes(){this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),this.setFinalGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach(t=>{this.setPrevGraphicAttributes(null,t),this.setNextGraphicAttributes(null,t),this.setFinalGraphicAttributes(null,t)})}remove(){this.glyphGraphicItems=null,super.remove()}release(){this.glyphGraphicItems&&(Object.values(this.glyphGraphicItems).forEach(t=>{t[R.dc]=null}),this.glyphGraphicItems=null),super.release()}}class Z extends T.v{constructor(t,e,i){super(t,k.Cm.glyph,i),this.glyphType=e,this.glyphMeta=A.F.getGlyph(e)}configureGlyph(t){return this.spec.glyphConfig=t,this.commit(),this}getGlyphMeta(){return this.glyphMeta}getGlyphConfig(){return this.spec.glyphConfig}addGraphicItem(t,e){let i=(0,w.ib)(this,this.glyphMeta,t);return super.addGraphicItem(t,e,i)}createElement(){return new D(this)}}Z.markType=k.Cm.glyph;let F=()=>{A.F.registerMark(k.Cm.glyph,Z)},j=()=>{A.F.registerGlyph("ripplePoint",{symbol:"symbol",ripple0:"symbol",ripple1:"symbol",ripple2:"symbol"}).registerFunctionEncoder((t,e,i,s)=>{var r;let n=Math.max(0,Math.min(t.ripple,1)),a=null!==(r=t.size)&&void 0!==r?r:i.getGraphicAttribute("size"),o=.5*a;return{ripple0:{size:a+o*n,fillOpacity:.75-.25*n},ripple1:{size:a+o*(1+n),fillOpacity:.5-.25*n},ripple2:{size:a+o*(2+n),fillOpacity:.25-.25*n}}}).registerDefaultEncoder(()=>({ripple0:{fillOpacity:.75},ripple1:{fillOpacity:.5},ripple2:{fillOpacity:.25}})),F(),(0,l.MM)(),(0,l.n7)()};class H extends o.c{constructor(){super(...arguments),this.type=H.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}_initProduct(t){let e=this.getVGrammarView(),i=this.getProductId();this._product=e.glyph("ripplePoint",null!=t?t:e.rootMark).id(i),this._compiledProductId=i}}H.type="ripple";let z=()=>{a.F.registerMark(H.type,H),j()};class N extends o.c{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class V extends N{constructor(){super(...arguments),this.type=V.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}V.type="polygon";let U=()=>{a.F.registerMark(V.type,V),(0,l.d6)(),(0,g.zJ)()};class G extends N{constructor(){super(...arguments),this.type=G.type}}G.type="pyramid3d";let W=()=>{a.F.registerMark(G.type,G),(0,l.vq)(),(0,g.zJ)()};class X extends o.c{constructor(){super(...arguments),this.type=X.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}X.type="image";let Y=()=>{a.F.registerMark(X.type,X),(0,l.uS)()},$=()=>{(0,n.B)(),(0,s.i)(),(0,r.Ou)(),d(),(0,u.k)(),(0,c.k)(),(0,p.Y)(),_(),(0,y.sp)(),U(),Y(),z(),(0,S.k)(),x(),f(),W()}},2965:function(t,e,i){i.d(e,{a:()=>o});var s=i(21),r=i(8469),n=i(5595);class a extends n.L{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(t){this._rule=t}getTarget(){return this._target}setTarget(t){this._target=t,this._rule||this.setRule(t.type)}getComponent(){return this._component}setComponent(t){this._component=t}}a.type="text",a.constructorType="label";let o=()=>{r.F.registerMark(a.constructorType,a),(0,s.vi)()}},775:function(t,e,i){i.d(e,{i:()=>h});var s=i(8469),r=i(3885),n=i(5803),a=i(21),o=i(4380);class l extends n.W{constructor(){super(...arguments),this.type=l.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var t,e;return(null===(t=this.model)||void 0===t?void 0:t.type)===r.A.radar&&"polar"===(null===(e=this.model)||void 0===e?void 0:e.coordinate)?[]:["fill","fillOpacity"]}}l.type="line";let h=()=>{s.F.registerMark(l.type,l),(0,a.cB)(),(0,o.cU)()}},564:function(t,e,i){i.d(e,{D:()=>a});var s=i(6082),r=i(325),n=i(4546);class a{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(t,e){(0,s.Z)(t)||(this._children.push(t),this._markNameMap[t.name]=t,this._infoMap.set(t,(0,r.Z)({},a.defaultMarkInfo,e)))}removeMark(t){let e=this._children.findIndex(e=>e.name===t);e>=0&&(this._infoMap.delete(this._children[e]),delete this._markNameMap[t],this._children.splice(e,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(t){this._children.forEach(t)}includes(t,e){return this._children.includes(t,e)}get(t){return isNaN(Number(t))?this._markNameMap[t]:this._children[t]}getMarks(){return this._children.slice()}getMarksInType(t){let e=(0,n.IX)(t);return this._children.filter(t=>e.includes(t.type))}getMarkInId(t){return this._children.find(e=>e.id===t)}getMarkWithInfo(t){return this._children.find(e=>Object.keys(t).every(i=>t[i]===this._infoMap.get(e)[i]))}}a.defaultMarkInfo={}},6264:function(t,e,i){i.d(e,{Y:()=>l});var s=i(8469),r=i(2550),n=i(21),a=i(4380);class o extends r.c{constructor(){super(...arguments),this.type=o.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}o.type="rect";let l=()=>{s.F.registerMark(o.type,o),(0,n.ML)(),(0,a.Zm)()}},3679:function(t,e,i){i.d(e,{Ou:()=>l});var s=i(8469),r=i(2550),n=i(21);class a extends r.c{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}}class o extends a{constructor(){super(...arguments),this.type=o.type}}o.type="symbol";let l=()=>{s.F.registerMark(o.type,o),(0,n.n7)()}},5595:function(t,e,i){i.d(e,{L:()=>a,k:()=>o});var s=i(8469),r=i(2550),n=i(21);class a extends r.c{getTextType(){return this._textType}constructor(t,e){super(t,e),this.type=a.type,this._textType="text"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}initStyleWithSpec(t,e){super.initStyleWithSpec(t,e),t.textType&&(this._textType=t.textType)}compileEncode(){super.compileEncode(),"rich"===this._textType&&this._product.encodeState("group",{textType:this._textType})}}a.type="text";let o=()=>{s.F.registerMark(a.type,a),(0,n.vi)(),(0,n.Xo)()}},3550:function(t,e,i){i.d(e,{Ir:()=>r,Lk:()=>n,Xg:()=>a});let s=["line","area","trail"];function r(t){return s.includes(t)}function n(t,e){return"monotone"===t?"horizontal"===e?"monotoneY":"monotoneX":t}function a(t){return["arc3d","rect3d","pyramid3d"].includes(t)}},397:function(t,e,i){i.d(e,{T:()=>n});var s=i(7636),r=i(4218);class n{constructor(t){this._option=t,this.type=t.type}_initTheme(t,e){return this._theme=this.getTheme(t,e),this._mergeThemeToSpec(t,e)}getTheme(t,e){}transformSpec(t,e,i){this._transformSpecBeforeMergingTheme(t,e,i);let s=this._initTheme(t,e);return this._transformSpecAfterMergingTheme(s.spec,e,i),s}_transformSpecBeforeMergingTheme(t,e,i){}_transformSpecAfterMergingTheme(t,e,i){}_mergeThemeToSpec(t,e){let i=this._theme;if(this._shouldMergeThemeToSpec()){let n=this._getDefaultSpecFromChart(e),a=t=>(0,r.H)({},i,n,t);return(0,s.Z)(t)?{spec:t.map(t=>a(t)),theme:i}:{spec:a(t),theme:i}}return{spec:t,theme:i}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(t){}}},4798:function(t,e,i){i.d(e,{g:()=>c});var s=i(9013),r=i(4277),n=i(7623),a=i(8469),o=i(564),l=i(8321),h=i(3685),d=i(397),u=i(1071);class c extends l.H{getSpec(){return this._spec||{}}getSpecPath(){var t;return null===(t=this._option)||void 0===t?void 0:t.specPath}getSpecInfoPath(){var t,e,i;return null!==(e=null===(t=this._option)||void 0===t?void 0:t.specInfoPath)&&void 0!==e?e:null===(i=this._option)||void 0===i?void 0:i.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var t,e;return null!==(e=null===(t=this._marks)||void 0===t?void 0:t.getMarks())&&void 0!==e?e:[]}getMarkNameMap(){var t;return null===(t=this._marks)||void 0===t?void 0:t.getMarkNameMap()}getMarkSet(){return this._marks}getChart(){return this._option.getChart()}get _theme(){var t;return null===(t=this.getSpecInfo())||void 0===t?void 0:t.theme}constructor(t,e){var i;super(e),this.transformerConstructor=d.T,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new o.D,this._lastLayoutRect=null,this.id=(0,s.a)(),this.userId=t.id,this._spec=t,this.effect={},this.event=new r.j(e.eventDispatcher,e.mode),null===(i=e.map)||void 0===i||i.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(t){}afterInit(){}getVisible(){var t;return!1!==(null===(t=this._spec)||void 0===t?void 0:t.visible)}onLayoutStart(t,e,i){var s;null===(s=this._layout)||void 0===s||s.onLayoutStart(t,e,i)}onLayoutEnd(t){var e;null===(e=this._layout)||void 0===e||e.onLayoutEnd(t),this.getMarks().forEach(t=>t.updateLayoutState(!0,!0))}onEvaluateEnd(t){}onDataUpdate(){}beforeRelease(){}release(){var t;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(t=>t.release()),null===(t=this._data)||void 0===t||t.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(t){let e=this._compareSpec(t,this._spec);return this._spec=t,e}_compareSpec(t,e){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(t){t&&(this._spec=t),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var t;null===(t=this._layout)||void 0===t||t.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(t){return Object.assign({},t)}setMarkStyle(t,e,i,s){(0,n.Z)(t)&&(0,n.Z)(e)&&t.setStyle(this._convertMarkStyle(e),i,s)}initMarkStyleWithSpec(t,e,i){if(!(0,n.Z)(t)||!(0,n.Z)(e))return;let{style:s,state:r}=e,a=Object.assign({},e);s&&(a.style=this._convertMarkStyle(s)),r&&(a.state={},Object.keys(r).forEach(t=>{a.state[t]=this._convertMarkStyle(r[t])})),t.initStyleWithSpec(a,i)}stateKeyToSignalName(t,e){let i=`${h.Bq}_${this.modelType}_${this.type}_${this.id}_${t}`;return e&&(i+=`_${e}`),i}compileData(){var t;null===(t=this._data)||void 0===t||t.compile()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t})})}_createMark(t,e={},i){let{type:s,name:r}=t,n=a.F.createMark(s,r,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},e));return n&&(n.created(),i&&n.setMarkConfig(i)),n}_getDataIdKey(){}getColorScheme(){var t,e;return null===(e=(t=this._option).getTheme)||void 0===e?void 0:e.call(t).colorScheme}getSpecInfo(){var t,e,i;let s=null!==(i=null===(e=(t=this._option).getSpecInfo)||void 0===e?void 0:e.call(t))&&void 0!==i?i:{};return(0,u.$s)(s,this.getSpecInfoPath())}getSpecIndex(){let t=this.getSpecPath();if(!(null==t?void 0:t.length))return 0;let e=Number(t[t.length-1]);return isNaN(e)?0:e}}},881:function(t,e,i){i.d(e,{r:()=>u});var s=i(9730),r=i(325),n=i(4798),a=i(6082),o=i(8378),l=i(1960),h=i(6542);class d{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(t){this._minWidth=t}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth=t}get minHeight(){return this._minHeight}set minHeight(t){this._minHeight=t}get maxHeight(){return this._maxHeight}set maxHeight(t){this._maxHeight=t}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(t){this._layoutOrient=t}get model(){return this._model}get type(){return this._model.type}constructor(t,e){var i;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:h.sd,height:h.sd},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=h.pM.Region,this._model=t,this._option=e,this.layoutLevel=e.layoutLevel,this.layoutType=e.layoutType,e.layoutOrient&&(this.layoutOrient=e.layoutOrient),this._spec=null===(i=null==t?void 0:t.getSpec)||void 0===i?void 0:i.call(t)}_setLayoutAttributeFromSpec(t,e){var i,s,r,n;if(this._spec&&!1!==this._spec.visible){let o=(0,l.Ek)(t.padding),d=(0,l.qY)(o,e,e);this.layoutPaddingLeft=d.left,this.layoutPaddingRight=d.right,this.layoutPaddingTop=d.top,this.layoutPaddingBottom=d.bottom,this._minHeight=(0,a.Z)(t.minHeight)?null!==(i=this._minHeight)&&void 0!==i?i:null:(0,l.Mv)(t.minHeight,e.height,e),this._maxHeight=(0,a.Z)(t.maxHeight)?null!==(s=this._maxHeight)&&void 0!==s?s:null:(0,l.Mv)(t.maxHeight,e.height,e),this._minWidth=(0,a.Z)(t.minWidth)?null!==(r=this._minWidth)&&void 0!==r?r:null:(0,l.Mv)(t.minWidth,e.width,e),this._maxWidth=(0,a.Z)(t.maxWidth)?null!==(n=this._maxWidth)&&void 0!==n?n:null:(0,l.Mv)(t.maxWidth,e.width,e),t.width&&this.setLayoutRect({width:(0,l.Mv)(t.width,e.width,e)},{width:h.wK}),t.height&&this.setLayoutRect({height:(0,l.Mv)(t.height,e.height,e)},{height:h.wK}),(0,a.Z)(t.offsetX)||(this.layoutOffsetX=(0,l.Mv)(t.offsetX,e.width,e)),(0,a.Z)(t.offsetY)||(this.layoutOffsetY=(0,l.Mv)(t.offsetY,e.height,e)),t.alignSelf&&(this.alignSelf=t.alignSelf)}}setAttrFromSpec(t,e){var i,s,r,n;this._spec=t,this.layoutType=null!==(i=t.layoutType)&&void 0!==i?i:this.layoutType,this.layoutLevel=null!==(s=t.layoutLevel)&&void 0!==s?s:this.layoutLevel,this.layoutOrient=null!==(r=t.orient)&&void 0!==r?r:this.layoutOrient,this._setLayoutAttributeFromSpec(t,e),this.layoutClip=null!==(n=t.clip)&&void 0!==n?n:this.layoutClip}onLayoutStart(t,e,i){this._setLayoutAttributeFromSpec(this._spec,e)}onLayoutEnd(t){}_getAbsoluteSpecValue(t){let e={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach(i=>{(0,a.Z)(this._spec[i])||(e[i]=(0,l.Mv)(this._spec[i],"top"===i||"bottom"===i?t.height:t.width,t))}),e}absoluteLayoutInRect(t){let{top:e,bottom:i,left:s,right:r}=this._getAbsoluteSpecValue(t),n={width:t.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:t.height-this.layoutPaddingTop-this.layoutPaddingBottom};(0,a.Z)(s)||(n.width-=s),(0,a.Z)(r)||(n.width-=r),(0,a.Z)(e)||(n.height-=e),(0,a.Z)(i)||(n.height-=i),this.setLayoutRect(n);let{width:o,height:l}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:o,height:l});let h={x:t.x,y:t.y};!0===this._spec.center?(h.x=t.x+.5*t.width-.5*o,h.y=t.y+.5*t.height-.5*l):((0,a.Z)(s)?(0,a.Z)(r)||(h.x=t.x+t.width-this.layoutPaddingRight-r-o):h.x=t.x+s+this.layoutPaddingLeft,(0,a.Z)(e)?(0,a.Z)(i)||(h.y=t.y+t.height-this.layoutPaddingBottom-i-l):h.y=t.y+e+this.layoutPaddingTop),this.setLayoutStartPosition(h)}setLayoutStartPosition(t){var e,i;this._option.transformLayoutPosition&&(t=this._option.transformLayoutPosition(t)),(0,o.Z)(t.x)&&(this._layoutStartPoint.x=t.x),(0,o.Z)(t.y)&&(this._layoutStartPoint.y=t.y),null===(i=(e=this._model).afterSetLayoutStartPoint)||void 0===i||i.call(e,this._layoutStartPoint)}setLayoutRect({width:t,height:e},i){var s,r,n,a;(0,o.Z)(t)&&(null!==(s=null==i?void 0:i.width)&&void 0!==s?s:h.sd)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=t,this._layoutRectLevelMap.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:h.sd),(0,o.Z)(e)&&(null!==(n=null==i?void 0:i.height)&&void 0!==n?n:h.sd)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=e,this._layoutRectLevelMap.height=null!==(a=null==i?void 0:i.height)&&void 0!==a?a:h.sd),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect({width:t,height:e}){let i={width:t,height:e};return this._layoutRectLevelMap.width>h.sd&&(i.width=this._layoutRect.width),this._layoutRectLevelMap.height>h.sd&&(i.height=this._layoutRect.height),i}getOrientPosAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"x":"y"}getOrientSizeAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"width":"height"}changeBoundsBySetting(t){return this._layoutRectLevelMap.width>h.sd&&(t.x2=t.x1+this._layoutRect.width),this._layoutRectLevelMap.height>h.sd&&(t.y2=t.y1+this._layoutRect.height),t.x1-=this._layoutStartPoint.x,t.x2-=this._layoutStartPoint.x,t.y1-=this._layoutStartPoint.y,t.y2-=this._layoutStartPoint.y,t}setRectInSpec(t){let e=Object.assign({},t);return this._layoutRectLevelMap.width<h.wK?((0,a.Z)(this._minWidth)||(e.width=Math.max(e.width,this._minWidth)),(0,a.Z)(this._maxWidth)||(e.width=Math.min(e.width,this._maxWidth))):e.width=this._layoutRect.width,this._layoutRectLevelMap.height<h.wK?((0,a.Z)(this._minHeight)||(e.height=Math.max(e.height,this._minHeight)),(0,a.Z)(this._maxHeight)||(e.height=Math.min(e.height,this._maxHeight))):e.height=this._layoutRect.height,e}computeBoundsInRect(t){if(this._lastComputeRect=t,!("region-relative"!==this.layoutType&&"region-relative-overlap"!==this.layoutType||(this._layoutRectLevelMap.width!==h.wK||"left"!==this.layoutOrient&&"right"!==this.layoutOrient)&&(this._layoutRectLevelMap.height!==h.wK||"bottom"!==this.layoutOrient&&"top"!==this.layoutOrient)))return this._layoutRect;let e=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(t),t));this.changeBoundsBySetting(e),this.autoIndent&&e.x2-e.x1>0&&e.y2-e.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-e.x1),this._lastComputeOutBounds.x2=Math.ceil(e.x2-t.width),this._lastComputeOutBounds.y1=Math.ceil(-e.y1),this._lastComputeOutBounds.y2=Math.ceil(e.y2-t.height));let i=this.setRectInSpec((0,l.qt)(e,t));return this._option.transformLayoutRect&&(i=this._option.transformLayoutRect(i)),i}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}}class u extends n.g{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null}get layoutOrient(){return this._orient}set layoutOrient(t){this._orient=t,this._layout&&(this._layout.layoutOrient=t)}initLayout(){"none"!==this.layoutType&&(this._layout=new d(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition}),this._orient&&"radius"!==this._orient&&"angle"!==this._orient&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(t,e,i){this._isLayout=!0,super.onLayoutStart(t,e,i)}onLayoutEnd(t){super.onLayoutEnd(t),this.updateLayoutAttribute();let e=this.getLayoutRect();!this._forceLayoutTag&&(0,s.X)(this._lastLayoutRect,e)||(this._lastLayoutRect=Object.assign({},e)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(t){}_forceLayout(){var t;this._isLayout||(this._forceLayoutTag=!0,null===(t=this._option.globalInstance.getChart())||void 0===t||t.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(t){return this._layout?this._layout.setLayoutStartPosition(t):this._layoutStartPos=(0,r.Z)(this._layoutStartPos,t)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(t,e){return this._layout?this._layout.setLayoutRect(t):this._lastLayoutRect=(0,r.Z)(this._layoutRect,t)}getLastComputeOutBounds(){var t;return null===(t=this._layout)||void 0===t?void 0:t.getLastComputeOutBounds()}setAttrFromSpec(){var t,e,i,s,r;super.setAttrFromSpec(),this.layoutClip=null!==(t=this._spec.clip)&&void 0!==t?t:this.layoutClip,this.layoutZIndex=null!==(e=this._spec.zIndex)&&void 0!==e?e:this.layoutZIndex,this.layoutType=null!==(i=this._spec.layoutType)&&void 0!==i?i:this.layoutType,this._orient=null!==(s=this._spec.orient)&&void 0!==s?s:this._orient,this.layoutLevel=null!==(r=this._spec.layoutLevel)&&void 0!==r?r:this.layoutLevel}}},6883:function(t,e,i){i.d(e,{I:()=>n});var s=i(9013),r=i(5205);class n{constructor(){this.id=(0,s.a)(),this._plugins=[]}add(t){if(!t||0===t.length)return null;let e=[];return t.forEach(t=>{this._plugins.find(e=>e.id===t.id)?(0,r.ZK)("不要重复添加相同的plugin"):(this._plugins.push(t),e.push(t),t.onAdd&&t.onAdd(this))}),e}load(t){let e=this.add(t);e&&e.length&&this.activate(t)}activate(t){t.length&&t.forEach(t=>{t.init&&t.init()})}get(t){return this._plugins.find(e=>e.id===t)}getAll(){return this._plugins.slice()}release(t){let e=this.get(t);e&&(e.release(this),this._plugins=this._plugins.filter(t=>t!==e))}releaseAll(){this._plugins.forEach(t=>{t.release(this)}),this._plugins=[]}clear(t){let e=this.get(t);e&&e.clear(this)}clearAll(){this._plugins.forEach(t=>{var e;null===(e=t.clear)||void 0===e||e.call(t,this)})}}},3073:function(t,e,i){i.d(e,{v:()=>r});var s=i(9013);class r{constructor(t){this.id=(0,s.a)(),this.name=`${t}_${this.id}`}onAdd(t){this.service=t}release(){this.service=null}}},5014:function(t,e,i){i.d(e,{v:()=>W});var s=i(3685);let r="vchart-tooltip",n=`${r}-container`,a=`${r}-title`,o=`${r}-content-box`,l={offsetX:10,offsetY:10},h="99999999999999";var d=i(7631),u=i(9904),c=i(1601);function p(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}let g=(t,e)=>t?(e||(e=t.getBoundingClientRect()),t.offsetWidth>0?e.width/t.offsetWidth:t.offsetHeight>0?e.height/t.offsetHeight:1):1,m=t=>(0,u.Z)(t)&&""!==(null==t?void 0:t.trim())||(0,c.Z)(t)?p(t):"";var f=i(6549),v=i(7623),_=i(9038),y=i(4154);let b=(t,e)=>{let i;if((0,v.Z)(t)){if((0,c.Z)(t))i=t;else if((0,_.Z)(t)){let s=t(e);(0,c.Z)(s)&&(i=s)}}return i},x={left:[-2,0],right:[2,0],top:[0,-2],lt:[-2,-2],tl:[-2,-2],rt:[2,-2],tr:[2,-2],bottom:[0,2],bl:[-2,2],lb:[-2,2],br:[2,2],rb:[2,2],inside:[0,0],center:[0,0],centerBottom:[0,1],centerTop:[0,-1],centerLeft:[-1,0],centerRight:[1,0]},S=(t,e,i=2)=>{var s,r;return null!==(r=null===(s=x[t])||void 0===s?void 0:s["x"===e?0:1])&&void 0!==r?r:i},A=(t,e)=>{var i;let s=new Map,r=new Map,{series:n,datum:a}=t,o="horizontal"===n.direction,l=(o?n.getYAxisHelper():n.getXAxisHelper()).getAxisId(),h=n.getChart().getComponentsByKey("axes").find(t=>t.id===l);if(!h)return;(o?r:s).set(h.getSpecIndex(),{datum:null===(i=n.getDatumPositionValues(a[0],n.getDimensionField()))||void 0===i?void 0:i[0],axis:h});let d={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:s,attributes:{visible:!!s.size,type:"rect"}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:r,attributes:{visible:!!r.size,type:"rect"}}};return(0,f.w)(d,n,e),d.xField.cacheInfo?(0,f.p)(d.xField):d.yField.cacheInfo?(0,f.p)(d.yField):void 0},k=t=>(0,y.Z)(t)&&((0,v.Z)(t.left)||(0,v.Z)(t.right)||(0,v.Z)(t.top)||(0,v.Z)(t.bottom)),w=t=>(0,y.Z)(t)&&((0,v.Z)(t.x)||(0,v.Z)(t.y));var T=i(8378),C=i(3073),M=i(6281);class E extends C.v{constructor(){super(...arguments),this._visible=!0,this._isReleased=!1,this.showTooltip=(t,e,i)=>{let{changePositionOnly:s}=i;return s?this.changeTooltipPosition(i,e):this.changeTooltip(!0,i,e)},this.changeTooltip=(t,e,i)=>this._isReleased?1:t?this.changeTooltipPosition(e,i):(this._updateTooltip(!1,e),0),this.changeTooltipPosition=(t,e)=>{var i,s,r,n,a;if(this._isReleased)return 1;let o=t.event,{tooltipSpec:l,activeTooltipSpec:h,changePositionOnly:d}=t;if(!h)return 1;let u=h.activeType;if(h.handler)return null!==(r=null===(s=(i=h.handler).showTooltip)||void 0===s?void 0:s.call(i,u,e,t))&&void 0!==r?r:0;let c=this._getActualTooltipPosition(h,t,this._getTooltipBoxSize(h,d));h.position=c;let p=null!==(n=h.updatePosition)&&void 0!==n?n:null===(a=l[u])||void 0===a?void 0:a.updatePosition;p&&(h.position=p(h.position,e,t));let g=!1!==(null==h?void 0:h.visible);return e&&"pointerout"!==o.type&&h.visible&&(h.title||h.content)||(g=!1),this._updateTooltip(g,Object.assign(Object.assign({},t),{changePositionOnly:d})),0},this._getActualTooltipPosition=(t,e,i)=>{var r,n,a,o,l,h,u,p,m;let{tooltipSpec:f}=e,x={x:1/0,y:1/0};if(!f)return x;let C=e.event,{activeType:E,data:B}=t,O="dimension"===E?null===(n=null===(r=B[0])||void 0===r?void 0:r.data)||void 0===n?void 0:n[0]:null==B?void 0:B[0],{offsetX:I,offsetY:R}=this._option,P=f[E],L=(0,M.sE)(null==P?void 0:P.position,B,e),D=null!==(a=(0,M.sE)(null==P?void 0:P.positionMode,B,e))&&void 0!==a?a:"mark"===E?"mark":"pointer",{width:Z=0,height:F=0}=null!=i?i:{},j="canvas"===f.renderMode,H=null===(o=null==e?void 0:e.chart)||void 0===o?void 0:o.getCanvasRect(),z=null!==(l=null==H?void 0:H.width)&&void 0!==l?l:s.rV,N=null!==(h=null==H?void 0:H.height)&&void 0!==h?h:s.b,V=!1,U={width:0,height:0},G,W={x:0,y:0},X={x:0,y:0},Y=1,$=1,K=(0,d.qe)(this._env);if(K&&!f.confine?(U.width=window.innerWidth,U.height=window.innerHeight):(U.width=z,U.height=N),K&&!j){let t=this._getParentElement(f);X=null!==(p=null===(u=null==t?void 0:t.getBoundingClientRect)||void 0===u?void 0:u.call(t))&&void 0!==p?p:x;let e=null!==(m=this._compiler.getCanvas())&&void 0!==m?m:this._chartContainer;W={x:(G=null==e?void 0:e.getBoundingClientRect()).x-X.x,y:G.y-X.y},Y=g(e,G),$=g(t,X)}let q=$/Y,J={},Q={x:L,y:L},tt={x:["left","right"],y:["top","bottom"]},te=({orient:t,mode:i,offset:s},r)=>{var n;let a,o;let l=e.model,h=null==l?void 0:l.getLayoutStartPoint(),d=null!=s?s:"x"===r?I:R;if("mark"===i){V=!0;let t=e.item,i=null==t?void 0:t.getBounds();i&&h&&(a=("x"===r?i.x1:i.y1)+h[r],o=("x"===r?i.x2:i.y2)+h[r])}else if("crosshair"===i&&"cartesian"===(null===(n=null==O?void 0:O.series)||void 0===n?void 0:n.coordinate)&&O.datum&&O.datum.length){V=!0;let t=A(O,h);t&&(a=t.start[r],o=t.end[r])}else Q[r]=t;if(V){let e=tt[r][0],i="x"===r?Z:F;switch(S(t,r)){case -2:J[e]=a-i*q-d;break;case 0:J[e]=(a+o)/2-i*q/2;break;case -1:J[e]=(a+o)/2-i*q-d;break;case 1:J[e]=(a+o)/2+d;break;case 2:J[e]=o+d}}},ti=["x","y"];if((0,y.Z)(L)){if(k(L)){let{left:t,right:e,top:i,bottom:s}=L;J.left=b(t,C),J.top=b(i,C),J.right=b(e,C),J.bottom=b(s,C)}else w(L)&&ti.forEach(t=>{let e=L[t];(0,c.Z)(e)||(0,_.Z)(e)?J[tt[t][0]]=b(e,C):te(e,t)})}else(0,v.Z)(L)&&(te({orient:L,mode:D},"x"),te({orient:L,mode:D},"y"));let ts={x:null,y:null};return ti.forEach(t=>{var e;let i="x"===t?Z:F,s="x"===t?z:N,r="x"===t?I:R,n=S(Q[t],t);if((0,T.Z)(J[tt[t][0]]))ts[t]=J[tt[t][0]];else if((0,T.Z)(J[tt[t][1]]))ts[t]=s-i*q-J[tt[t][1]];else{let e="x"===t?C.canvasX:C.canvasY;ts[t]=n>0?e+r:0===n?e-i*q/2:e-i*q-r}ts[t]*=Y,K&&(ts[t]+=W[t]),ts[t]/=$;let a="x"===t?U.width:U.height,o=f.confine?-(X[t]-(null!==(e=null==G?void 0:G[t])&&void 0!==e?e:0)/Y)/$:-X[t]/$,l=a/$+o-i;2!==n&&ts[t]<o?V?ts[t]=o:(ts[t]+=0===n?r+i/2:2*r+i,ts[t]>l&&(ts[t]=l)):-2!==n&&ts[t]>l&&(V?ts[t]=l:(ts[t]-=0===n?r+i/2:2*r+i,ts[t]<o&&(ts[t]=o)))}),ts}}get env(){return this._env}onAdd(t){super.onAdd(t);let e=t.component;this._component=e,this._chartOption=e.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=e.getCompiler(),this._initFromSpec()}hideTooltip(t){return this.changeTooltip(!1,t)}release(){var t,e,i;let s=null!==(t=this._component.getSpec())&&void 0!==t?t:{};s.handler?null===(i=(e=s.handler).release)||void 0===i||i.call(e):(this._removeTooltip(),this._isReleased=!0)}_getDefaultOption(){var t,e;let{offset:i}=this._component.getSpec();return i?{offsetX:null!==(t=i.x)&&void 0!==t?t:l.offsetX,offsetY:null!==(e=i.y)&&void 0!==e?e:l.offsetY}:l}_getParentElement(t){return t.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption()}reInit(){this._initFromSpec()}}E.specKey="tooltip";var B=i(7636),O=i(3215),I=i(1960);let R=(t,e)=>(0,v.Z)(t)?(0,B.Z)(t)?t.map(t=>`${t}px`).join(" "):`${t}px`:null!=e?e:"initial",P=(t={},e={})=>{var i,s;(0,v.Z)(t.fontFamily)&&(e.fontFamily=t.fontFamily);let r=null!==(i=t.fill)&&void 0!==i?i:t.fontColor;return(0,v.Z)(r)&&(e.color=r),(0,v.Z)(t.fontWeight)&&(e.fontWeight=t.fontWeight),(0,v.Z)(t.textAlign)&&(e.textAlign=t.textAlign),(0,v.Z)(t.fontSize)&&(e.fontSize=R(t.fontSize)),(0,v.Z)(t.maxWidth)&&(e.maxWidth=R(t.maxWidth)),t.multiLine||(0,v.Z)(t.maxWidth)&&!1!==t.multiLine?(e.whiteSpace="initial",e.wordBreak=null!==(s=t.wordBreak)&&void 0!==s?s:"break-word"):(e.wordBreak="normal",e.whiteSpace="nowrap"),e},L=(t={})=>{let{lineHeight:e}=t;return t.fontSize?(0,I.Mv)(e,t.fontSize):0},D=(t={})=>{var e,i,s,r;let{style:n={},enterable:a,transitionDuration:o}=t,{panel:l={},titleLabel:h,shape:d,keyLabel:u,valueLabel:c,spaceRow:p,align:g}=n,{panelStyle:m,panelPadding:f}=Z(l),v={marginTop:"0px",marginBottom:"0px"};m.pointerEvents=a?"auto":"none",o&&(m.transitionDuration=o?`${o}ms`:"initial",m.transitionProperty=o?"transform":"initial",m.transitionTimingFunction=o?"ease-out":"initial"),(0,T.Z)(p)&&(v.marginBottom=`${p}px`);let _={width:R(null!==(e=null==d?void 0:d.size)&&void 0!==e?e:8)},y=P(h),b=P(u),x=P(c),S="right"===g?"marginLeft":"marginRight";"right"===g?(m.direction="rtl",y.textAlign="right",b.textAlign="right",x.textAlign="left"):(y.textAlign="left",b.textAlign="left",x.textAlign="right"),_[S]=R(null!==(i=d.spacing)&&void 0!==i?i:8),b[S]=R(null!==(s=u.spacing)&&void 0!==s?s:26),x[S]=R(null!==(r=c.spacing)&&void 0!==r?r:0);let A=Math.max(L(c),L(u));return v.lineHeight=A>0?`${A}px`:"20px",{panelPadding:f,row:v,panel:m,title:y,shape:_,key:b,value:x}},Z=t=>{var e;let{backgroundColor:i,border:s,shadow:r,padding:n}=t,a={borderWidth:`${null!==(e=null==s?void 0:s.width)&&void 0!==e?e:0}px`},o=null;(null==s?void 0:s.color)&&(a.borderColor=s.color),i&&(a.backgroundColor=i),a.boxShadow=r?`${r.x}px ${r.y}px ${r.blur}px ${r.spread}px ${r.color}`:"initial";let{radius:l}=null!=s?s:{};return(0,v.Z)(l)&&(a.borderRadius=(0,T.Z)(l)?`${l}px`:`${l}`),n&&(o=(0,O.o)(n),a.padding=R(o)),{panelStyle:a,panelPadding:o}};function F(t,e){t&&t.style&&e&&Object.keys(e).forEach(i=>{t.style[i]=e[i]})}var j=i(8469);let H=t=>{j.F.registerComponentPlugin(t.type,t)};var z=i(4774),N=i(5196),V=i(7393),U=i(5165);class G extends E{getVisibility(){return!!this._rootDom&&"visible"===this._rootDom.style.visibility}setVisibility(t){t!==this.getVisibility()&&this._rootDom&&(this._rootDom.style.visibility=t?"visible":"hidden")}constructor(){super(G.type),this.type=z.a.dom,this._tooltipContainer=null==d.Eh?void 0:d.Eh.body}onAdd(t){super.onAdd(t),this._initStyle(),this.initEl()}initEl(){let t=this._component.getSpec().parentElement;if(d.Eh&&t&&t.children&&t.children.length){for(let e=0;e<t.children.length;e++)if(t.children[e].classList.contains(n)){this._container=t.children[e];break}this._container||(this._container=d.Eh.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=h,this._container.classList.add(n),t.appendChild(this._container))}}initRootDom(){var t,e,i;let s=this._component.getSpec(),r=document.createElement("div"),n=null!==(e=null===(t=this._chartOption)||void 0===t?void 0:t.getTheme())&&void 0!==e?e:{};F(r,Object.assign({left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:h,fontFamily:null!==(i=null==n?void 0:n.fontFamily)&&void 0!==i?i:U.r.fontFamily,fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh",visibility:"hidden"},this._domStyle.panel)),r.classList.add(s.className),r.setAttribute("vchart-tooltip-id",`${this.id}`),this._container.appendChild(r),this._rootDom=r}_getTooltipBoxSize(t,e){var i;this._rootDom||this.initRootDom(),e||this._updateDomStringByCol(t),this._updateDomStyle("height");let s=null===(i=this._rootDom)||void 0===i?void 0:i.getBoundingClientRect();return{width:null==s?void 0:s.width,height:null==s?void 0:s.height}}_removeTooltip(){this._rootDom&&this._rootDom.parentNode&&(this._rootDom.parentNode.removeChild(this._rootDom),this._rootDom=null),this._container=null}_updateTooltip(t,e){var i,s,r;if(t&&this._rootDom){let{tooltipSpec:n,activeTooltipSpec:a}=e;e.changePositionOnly||(this._tooltipActual=a);let o=this.getVisibility(),l=this._rootDom;if(l){let{x:t=0,y:h=0}=null!==(i=a.position)&&void 0!==i?i:{};if(n.updateElement){this._updatePosition(null!==(s=this._cacheCustomTooltipPosition)&&void 0!==s?s:{x:t,y:h}),n.updateElement(l,a,e);let i=this._getActualTooltipPosition(a,e,{width:l.offsetWidth,height:l.offsetHeight});this._updatePosition(i),this._cacheCustomTooltipPosition=i}else this._rootDom.style.transitionDuration=o?null!==(r=this._domStyle.panel.transitionDuration)&&void 0!==r?r:"initial":"0ms",this._updatePosition({x:t,y:h})}this.setVisibility(t)}else this.setVisibility(t),this._cacheCustomTooltipPosition=void 0}_initStyle(){let t=this._component.getSpec();this._domStyle=D(t)}_updateDomStringByCol(t){var e;let{title:i={},content:s}=t,n=s&&s.length,l=this._domStyle.row,h=[...this._rootDom.children],d=h.find(t=>t.className.includes(a));if(!d&&!1!==i.visible){d=document.createElement("h2");let t=document.createElement("span");d.appendChild(t),d.classList.add(a),this._rootDom.appendChild(d)}d&&!1!==i.visible?(F(d,Object.assign(Object.assign(Object.assign({},this._domStyle.title),n?l:{marginBottom:"0px"}),{marginTop:"0px"})),d.firstChild.innerHTML=`${null!==(e=i.value)&&void 0!==e?e:""}`):d&&!1===i.visible&&d.parentNode.removeChild(d);let c=h.find(t=>t.className.includes(o)),g=["shape","key","value"];if(!c&&n&&(c=document.createElement("div"),g.forEach(t=>{let e=document.createElement("div");e.classList.add(`${r}-column`),e.classList.add(`${r}-${t}-column`),e.setAttribute("data-col",t),c.appendChild(e)}),c.classList.add(o),this._rootDom.appendChild(c)),c&&n){let t=[...c.children];F(c,{whiteSpace:"nowrap"}),t.forEach((t,e)=>{let i=t.getAttribute("data-col");if(i&&g.includes(i)){let e="shape"===i&&s.every(t=>!t.hasShape||!t.shapeType);F(t,Object.assign(Object.assign({},this._domStyle[i]),{display:e?"none":"inline-block",verticalAlign:"top"}));let n=[...t.children];n.slice(s.length).forEach(t=>{t.parentNode.removeChild(t)}),s.forEach((e,a)=>{let o=n[a];o||((o=document.createElement("div")).classList.add(`${r}-${i}`),t.appendChild(o));let h=Object.assign({},l);a===s.length-1&&(h.marginBottom="0px"),h.display=!1===e.visible?"none":"block",h.height="initial","key"===i?(o.innerHTML=m(e.key),e.keyStyle&&P(e.keyStyle,h)):"value"===i?(o.innerHTML=m(e.value),e.valueStyle&&P(e.valueStyle,h)):"shape"===i&&(o.innerHTML=function(t,e){var i,s,r,n,a,o;let l,h;if(!t||!t.hasShape||!t.shapeType)return"";let d='style="display:inline-block;vertical-align:middle;"',{shapeType:c,shapeFill:g,shapeStroke:m,shapeHollow:f=!1}=t,v=null!==(i=t.shapeSize)&&void 0!==i?i:8,_=t.shapeLineWidth?p(t.shapeLineWidth)+"px":"0px",b="currentColor",x=()=>m?p(m):b,S=t=>new N.m({symbolType:t,size:v,fill:!0}),A=S(c),k=A.getParsedPath();if(!k.path&&k.pathStr&&(A=S(k.pathStr)),A.getParsedPath().path){let t=A.getParsedPath().path;h=t.toString(),l=t.bounds}else k.isSvg&&k.svgCache&&(h=k.svgCache.map(t=>t.path.toString()).join(),l=k.svgCache.reduce((t,e)=>t.union(e.path.bounds),new V.YZ));let w=`${l.x1} ${l.y1} ${l.width()} ${l.height()}`;if("0px"!==_){let[t,e,i,s]=w.split(" ").map(t=>Number(t)),r=Number(_.slice(0,-2));w=`${t-r/2} ${e-r/2} ${i+r} ${s+r}`}if(!g||(0,u.Z)(g)||f)return b=f?"none":g?p(g):"currentColor",`
    <svg ${d} width="${v}" height="${v}" viewBox="${w}">
      <path
        d="${h}"
        style="fill: ${b}; stroke: ${x()}; stroke-width: ${_}"
      >
      </path>
    </svg>`;if((0,y.Z)(g)){b="gradientColor"+(null!=e?e:"");let t="",i=(null!==(s=g.stops)&&void 0!==s?s:[]).map(t=>`<stop offset="${p(t.offset.toString())}" stop-color="${p(t.color)}"/>`).join("");return"radial"===g.gradient?t=`<radialGradient id="${b}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${i}
      </radialGradient>`:"linear"===g.gradient&&(t=`<linearGradient id="${b}" x1="${100*(null!==(r=g.x0)&&void 0!==r?r:0)}%" y1="${100*(null!==(n=g.y0)&&void 0!==n?n:0)}%" x2="${100*(null!==(a=g.x1)&&void 0!==a?a:0)}%" y2="${100*(null!==(o=g.y1)&&void 0!==o?o:0)}%">
      ${i}
      </linearGradient>`),`
    <svg ${d} width="${v}" height="${v}" viewBox="-0.5 -0.5 1 1">
      ${t}
      <path
        d="${h}"
        style="fill: url(#${b}); stroke: ${x()}; stroke-width: ${_}"
      >
      </path>
    </svg>`}return""}(e,`${this.id}_${a}`)),F(o,h)})}})}else c&&!n&&c.parentNode.removeChild(c)}_updateDomStyle(t="width"){var e,i,s,r;let n=this._rootDom,l=[...n.children].find(t=>t.className.includes(o));if(l){let o=this._component.getSpec(),h={};if((0,v.Z)(null===(e=null==o?void 0:o.style)||void 0===e?void 0:e.maxContentHeight)){let t=n.children[0],e=t&&t.className.includes(a)?t.getBoundingClientRect().height+(null!==(i=o.style.spaceRow)&&void 0!==i?i:0):0,s=this._chartOption.getChartViewRect(),r=(0,I.Mv)(o.style.maxContentHeight,Math.min(s.height,document.body.clientHeight)-e-(this._domStyle.panelPadding?this._domStyle.panelPadding[0]+this._domStyle.panelPadding[1]:0));r>0&&(h.maxHeight=`${r}px`,h.overflowY="auto",h.width=`calc(100% + ${this._domStyle.panelPadding?this._domStyle.panelPadding[1]+"px":"10px"})`,F(l,h))}let d=l.children,u=[];if(d){for(let e=0;e<d.length;e++){let i=null!==(s=d[e].children)&&void 0!==s?s:[];for(let e=0;e<i.length;e++){let s=i[e].getBoundingClientRect()[t];(void 0===u[e]||u[e]<s)&&(u[e]=s)}}for(let e=0;e<d.length;e++){let i=null!==(r=d[e].children)&&void 0!==r?r:[];for(let e=0;e<i.length;e++)i[e].style[t]=`${u[e]}px`}}}}_getParentElement(t){var e;return null!==(e=this._container)&&void 0!==e?e:super._getParentElement(t)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle(),this._rootDom&&F(this._rootDom,this._domStyle.panel),this.getVisibility()&&(this._updateDomStringByCol(this._tooltipActual),this._updateDomStyle("height"))}_updatePosition({x:t,y:e}){this._rootDom&&(this._rootDom.style.transform=`translate3d(${t}px, ${e}px, 0)`)}}G.type=z.a.dom;let W=()=>{H(G)}},7484:function(t,e,i){i.d(e,{dz:()=>n});var s=i(5042),r=i(4380);let n=()=>{(0,s.dze)(),(0,r.sG)()}},2193:function(t,e,i){i.d(e,{m:()=>n});var s=i(8028),r=i(4370);class n extends s.J{range(t){return t?(this._range=t,this._resetRange(),this):super.range()}domain(t){return t?(super.domain(t),this._resetRange(),this):super.domain()}_resetRange(){if(!(0,r.zE)(this._range))return void super.range(this._range);let t=(0,r._t)(this._range,this._domain);super.range(t)}}},8068:function(t,e,i){i.d(e,{w:()=>P});var s=i(7636),r=i(3505),n=i(5287),a=i(9231),o=i(8118),l=i(3885),h=i(7773),d=i(208),u=i(341),c=i(775),p=i(3793),g=i(3679),m=i(1889),f=i(4546),v=i(7623);class _ extends m.O{constructor(){super(...arguments),this._getSeriesStyle=(t,e,i)=>{var s,r,n,a;for(let i of(0,f.IX)(e)){let e=null===(s=this.series.getSeriesStyle(t))||void 0===s?void 0:s(i);if(!1!==e||"fill"!==i&&"stroke"!==i||(e="fill"===i?null===(n=null===(r=this.series.getSeriesStyle(t))||void 0===r?void 0:r("stroke"))||void 0===n?void 0:n[0]:null===(a=this.series.getSeriesStyle(t))||void 0===a?void 0:a("fill")),(0,v.Z)(e))return e}return i}}}var y=i(4331),b=i(5919);let x=Object.assign(Object.assign(Object.assign({},y.UI),b.j),{area:{name:"area",type:"area"}});var S=i(8469),A=i(4380);let k=()=>{(0,A.zC)(),(0,A.rt)(),(0,A.BV)()};var w=i(717),T=i(4822),C=i(4218);class M extends T.n{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){var e,i,s;let r=!1!==(null===(e=t.point)||void 0===e?void 0:e.visible)&&!1!==(null===(s=null===(i=t.point)||void 0===i?void 0:i.style)||void 0===s?void 0:s.visible);this._addMarkLabelSpec(t,t=>{let e="inside-middle"===t.position;return!r||e?"area":"point"}),this._addMarkLabelSpec(t,"area","areaLabel","initLineLabelMarkStyle",void 0,!0)}_transformSpecAfterMergingTheme(t,e,i){var s,r,n,a,o;super._transformSpecAfterMergingTheme(t,e,i);let{area:l={},line:h={},seriesMark:d}=t,u=!1!==l.visible&&!1!==(null===(s=l.style)||void 0===s?void 0:s.visible),c=!1!==h.visible&&!1!==(null===(r=h.style)||void 0===r?void 0:r.visible);l.support3d=!(!l.support3d&&!h.support3d),l.zIndex=(0,v.Z)(l.zIndex)||(0,v.Z)(h.zIndex)?Math.max(null!==(n=l.zIndex)&&void 0!==n?n:0,null!==(a=h.zIndex)&&void 0!==a?a:0):void 0,l.style&&delete l.style.stroke,l.state&&Object.keys(l.state).forEach(t=>{"style"in l.state[t]?delete l.state[t].style.stroke:delete l.state[t].stroke});let p=l,g=h;("line"===d||c&&!u)&&(p=h,g=l),l.style=(0,C.H)({},g.style,p.style),l.state=(0,C.H)({},g.state,p.state),!1===l.interactive&&(l.style.fillPickable=!1),!1===h.interactive&&(h.style.strokePickable=!1),l.interactive=!(!l.interactive&&null!==(o=h.interactive)&&void 0!==o&&!o),t.area=l,t.line=h}}var E=i(4498),B=i(1532),O=i(7501),I=i(5669);class R extends n.i{constructor(){super(...arguments),this.type=l.A.area,this.transformerConstructor=M,this._sortDataByAxis=!1}initMark(){var t;let e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=this._spec.area||{},s=null!==(t=this._spec.seriesMark)&&void 0!==t?t:"area",r=this._isAreaVisible()||this._isLineVisible();this._areaMark=this._createMark(R.mark.area,{groupKey:this._seriesField,isSeriesMark:r&&"point"!==s,stateSort:i.stateSort},Object.assign(Object.assign({},e),{morphElementKey:this.getDimensionField()[0],setCustomizedShape:i.customShape})),this.initSymbolMark(e,"point"===s)}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var t,e,i,s,r;let n=null!==(i=null===(e=null===(t=this.getSpec().area)||void 0===t?void 0:t.style)||void 0===e?void 0:e.curveType)&&void 0!==i?i:null===(r=null===(s=this.getSpec().line)||void 0===s?void 0:s.style)||void 0===r?void 0:r.curveType,l=n===u.l?"horizontal"===this._direction?"monotoneY":"monotoneX":n,h=this._areaMark;if(h){let t=this._isAreaVisible(),e=this._isLineVisible();t||e?h.setVisible(!0):h.setVisible(!1),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:t=>{var e,i;return(0,o.Ol)(this.dataToPositionX1(t),null===(i=null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale)||void 0===i?void 0:i.call(e,0))},y:this.dataToPositionY.bind(this),y1:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",a.W.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:this.dataToPositionX.bind(this),y1:t=>{var e,i;return(0,o.Ol)(this.dataToPositionY1(t),null===(i=null===(e=this._yAxisHelper)||void 0===e?void 0:e.getScale)||void 0===i?void 0:i.call(e,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",a.W.Series),this.setMarkStyle(h,{fill:!!t&&this.getColorAttribute(),stroke:!!e&&this.getColorAttribute()},"normal",a.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(h,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",a.W.Series),this.getStack()&&this.setMarkStyle(h,{zIndex:t=>-t[I.Uq]},"normal",a.W.Series),this.setMarkStyle(h,{curveType:l},"normal",a.W.Built_In),Object.keys(h.stateStyle).forEach(t=>{h.stateStyle[t].stroke&&h.setPostProcess("stroke",t=>[t,!1,!1,!1],t)})}}initAnimation(){var t,e,i,s;let r={direction:this.direction},n=null===(t=this._spec.animationAppear)||void 0===t?void 0:t.preset;if(this._lineMark&&this._lineMark.setAnimationConfig((0,d._8)(null===(e=S.F.getAnimationInKey("line"))||void 0===e?void 0:e(r,n),(0,d.hT)("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig((0,d._8)(null===(i=S.F.getAnimationInKey("area"))||void 0===i?void 0:i(r,n),(0,d.hT)("area",this._spec,this._markAttributeContext))),this._symbolMark){let t=(0,E.mh)(this);this._symbolMark.setAnimationConfig((0,d._8)(null===(s=S.F.getAnimationInKey("scaleInOut"))||void 0===s?void 0:s(),(0,d.hT)("point",this._spec,this._markAttributeContext),t))}}_isAreaVisible(){var t;let e=this._spec.area||{};return!1!==e.visible&&!1!==(null===(t=e.style)||void 0===t?void 0:t.visible)}_isLineVisible(){var t;let e=this._spec.line||{};return!1!==e.visible&&!1!==(null===(t=e.style)||void 0===t?void 0:t.visible)}initTooltip(){this._tooltipHelper=new _(this);let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._areaMark&&t.add(this._areaMark),this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){return e=>{var i,r,n,a,o;let l=null!==(i=this._spec.seriesMark)&&void 0!==i?i:"area",h=null!==(n=null===(r=this._seriesMark)||void 0===r?void 0:r.getAttribute(e,t))&&void 0!==n?n:void 0;return"fill"!==e||h&&"line"!==l||(e="stroke",h=null!==(o=null===(a=this._seriesMark)||void 0===a?void 0:a.getAttribute(e,t))&&void 0!==o?o:void 0),"stroke"===e&&(0,s.Z)(h)?h[0]:h}}}R.type=l.A.area,R.mark=x,R.transformerConstructor=M,(0,h.jB)(R,r.t);let P=()=>{(0,w.pK)(),(0,w.lK)(),(0,c.i)(),(0,p.k)(),(0,g.Ou)(),k(),(0,B.N)(),(0,O.E)(),S.F.registerSeries(R.type,R)}},3610:function(t,e,i){i.d(e,{w:()=>r});var s=i(9540);class r extends s.G{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar")}}},3418:function(t,e,i){i.d(e,{QG:()=>j,QD:()=>H});var s=i(5173),r=i(5287),n=i(5669),a=i(9231),o=i(8118),l=i(9478),h=i(1960),d=i(8469);function u(t,e=!0){return(i,s,r)=>{let n="vertical"===t.direction?t.yField:t.xField,a=null==i?void 0:i[n];return"vertical"===t.direction?{overall:e?t.growFrom():e,orient:a>0?"negative":"positive"}:{overall:!!e&&t.growFrom(),orient:a>0?"positive":"negative"}}}let c=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthIn":"growHeightIn",options:u(t,e)}),p=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthOut":"growHeightOut",options:u(t,e)}),g={type:"fadeIn"},m={type:"growCenterIn"},f=()=>{d.F.registerAnimation("bar",(t,e)=>({appear:function(t,e){if(!1===e)return{};switch(e){case"fadeIn":return g;case"scaleIn":return m;default:return c(t)}}(t,e),enter:c(t,!1),exit:p(t,!1),disappear:p(t)}))};var v=i(208),_=i(3885),y=i(6264),b=i(6082),x=i(7623),S=i(9038),A=i(4546),k=i(6843);function w(t,e,i,s,r,n){let a=i.getSpec().barMinHeight,l=i[s.axisHelper].isInverse(),h=(0,o.Ol)(i[s.startMethod](t),r),d=(0,o.Ol)(i[s.endMethod](t),r);n&&(e=h);let u=Math.abs(h-d);u<a&&(u=a);let c=1;return d<h?c=-1:d===h&&(c=s.isVertical?l?1:-1:l?-1:1),d=e+c*u,t[s.start]=e,t[s.end]=d,d}var T=i(6358),C=i(7479),M=i(6338),E=i(3959),B=i(1766),O=i(717),I=i(4498),R=i(3610),P=i(7602),L=i(4331),D=i(5385),Z=i(1532),F=i(7501);class j extends r.i{constructor(){super(...arguments),this.type=_.A.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=R.w,this._bandPosition=0,this._getBarXStart=(t,e,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[L.DO]):this._spec.barMinHeight?this._calculateRectPosition(t,!1,i):(0,o.Ol)(this._dataToPosX(t),e,i),this._getBarXEnd=(t,e,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[L.V0]):(0,o.Ol)(this._dataToPosX1(t),e,i),this._getBarYStart=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[L.aS]):this._spec.barMinHeight?this._calculateRectPosition(t,!0):(0,o.Ol)(this._dataToPosY(t),e),this._getBarYEnd=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[L.Aj]):(0,o.Ol)(this._dataToPosY1(t),e),this._getBarBackgroundXStart=t=>{let e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundXEnd=t=>{let e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundYStart=t=>{let e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundYEnd=t=>{let e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var t;return null===(t=this._barBackgroundPositionXEncoder)||void 0===t?void 0:t.bind(this)},this._setBarBackgroundPositionXEncoder=t=>{this._barBackgroundPositionXEncoder=t.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var t;return null===(t=this._barBackgroundPositionYEncoder)||void 0===t?void 0:t.bind(this)},this._setBarBackgroundPositionYEncoder=t=>{this._barBackgroundPositionYEncoder=t.bind(this)}}initMark(){var t,e;this._initBarBackgroundMark(),this._barMark=this._createMark(Object.assign(Object.assign({},j.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{groupKey:this._seriesField,isSeriesMark:!0,stateSort:null===(t=this._spec.bar)||void 0===t?void 0:t.stateSort},{progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold,morphElementKey:this.getDimensionField()[0],morph:(0,v.yx)(this._spec,this._barMarkName),setCustomizedShape:null===(e=this._spec.bar)||void 0===e?void 0:e.customShape})}_initBarBackgroundMark(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(j.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId(),stateSort:this._spec.barBackground.stateSort},{setCustomizedShape:this._spec.barBackground.customShape,progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",a.W.Series)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();let{mark:t,group:e}=this._tooltipHelper.activeTriggerSet;this._barMark&&(t.add(this._barMark),e.add(this._barMark))}_statisticViewData(){var t,e;let i;super._statisticViewData();let s=null!==(t=this._spec.barBackground)&&void 0!==t?t:{};if(!s.visible)return;let r=this._getRelatedComponentSpecInfo("axes").some(t=>t.type===P.L.cartesianBandAxis);if((0,T.U)(this._option.dataSet,"addVChartProperty",E.E),r)(0,T.U)(this._option.dataSet,"dimensionItems",([t],{scaleDepth:e})=>{var i,s;let r=[{}],a=this.getDimensionField(),o=(0,b.Z)(e)?a.length:Math.min(a.length,e);for(let e=0;e<o;e++){let o=a[e],l=null===(i=t.latestData[o])||void 0===i?void 0:i.values;if(!(null==l?void 0:l.length))continue;let h=[],d=null!==(s=this._spec.dataKey)&&void 0!==s?s:n.XW;for(let t=0;t<l.length;t++)for(let e=0;e<r.length;e++)h.push(Object.assign(Object.assign({},r[e]),{[o]:l[t],[d]:l[t]}));r=h}return r}),i=new M.VO(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:(0,b.Z)(s.fieldLevel)?void 0:s.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:B.cJ.bind(this),call:B.CL}},!1),null===(e=this._viewDataStatistics)||void 0===e||e.target.addListener("change",i.reRunAllTransform);else{(0,T.U)(this._option.dataSet,"dimensionItems",([e])=>{let i=[],[s,r]=this.getDimensionContinuousField(),n={};return t.latestData.forEach(t=>{let e=`${t[s]}-${t[r]}`;n[e]||(n[e]={[s]:t[s],[r]:t[r]},i.push(n[e]))}),i});let t=this.getViewData();i=new M.VO(this._option.dataSet).parse([t],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:B.cJ.bind(this),call:B.CL}},!1),null==t||t.target.addListener("change",i.reRunAllTransform)}this._barBackgroundViewData=new C.z(this._option,i)}init(t){var e,i;super.init(t),"vertical"===this.direction?"band"===(null===(e=this._xAxisHelper)||void 0===e?void 0:e.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():"band"===(null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){let t=this.getRegion();return this.getStack()&&t.getSeries().filter(t=>t.type===this.type&&t.getSpec().barMinHeight).length}_calculateStackRectPosition(t){let e,i,s,r,n;let a=this.getRegion();if(a._bar_series_position_calculated)return;a._bar_series_position_calculated=!0,t?(e=L.Aj,i=L.aS,s="_dataToPosY1",r="_dataToPosY",n="_yAxisHelper"):(e=L.V0,i=L.DO,s="_dataToPosX1",r="_dataToPosX",n="_xAxisHelper");let o=(0,l.oW)(a,!1,t=>t.type===this.type);for(let l in o)for(let h in o[l].nodes)!function t(e,i,s){var r,n;if(e.values.length>0){let t;if(e.sortDatums.length){let a=e.sortDatums;i&&(a=e.sortDatums.slice().reverse());for(let e=0;e<a.length;e++)t=w(a[e].datum,t,a[e].series,s,null===(n=(r=a[e].series[s.axisHelper]).getScale)||void 0===n?void 0:n.call(r,0),0===e)}else{let r=e.series;i&&(r=r.slice().reverse()),r.forEach(({s:e,values:r},n)=>{var a,o;let l=null===(o=(a=e[s.axisHelper]).getScale)||void 0===o?void 0:o.call(a,0);for(let a=0;a<r.length;a++)t=w(r[i?r.length-1-a:a],t,e,s,l,0===a&&0===n)})}}for(let r in e.nodes)t(e.nodes[r],i,s)}(o[l].nodes[h],a.getStackInverse(),{isVertical:t,start:e,end:i,startMethod:s,endMethod:r,axisHelper:n})}_calculateRectPosition(t,e,i){var s,r;let n,a,l;e?(n="_dataToPosY1",a="_dataToPosY",l="_yAxisHelper"):(n="_dataToPosX1",a="_dataToPosX",l="_xAxisHelper");let h=null===(r=(s=this[l]).getScale)||void 0===r?void 0:r.call(s,0),d=this[l].isInverse(),u=this._spec.barMinHeight,c=(0,o.Ol)(this[n](t),h,i),p=(0,o.Ol)(this[a](t),h,i),g=Math.abs(c-p);g<u&&(g=u);let m=1;return p<c?m=-1:p===c&&(m=e?d?1:-1:d?-1:1),c+m*g}_dataToPosX(t){return this.dataToPositionX(t)}_dataToPosX1(t){return this.dataToPositionX1(t)}_dataToPosY(t){return this.dataToPositionY(t)}_dataToPosY1(t){return this.dataToPositionY1(t)}initBandRectMarkStyle(){var t,e,i,s;let r=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),n=null===(s=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===s?void 0:s.call(i,0);"horizontal"===this.direction?this.setMarkStyle(this._barMark,{x:t=>this._getBarXStart(t,r),x1:t=>this._getBarXEnd(t,r),y:t=>this._getPosition(this.direction,t),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",a.W.Series):this.setMarkStyle(this._barMark,{y:t=>this._getBarYStart(t,n),y1:t=>this._getBarYEnd(t,n),x:t=>this._getPosition(this.direction,t),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",a.W.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var t,e,i,s;if(!this._spec.stackCornerRadius)return;let r=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),a=null===(s=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===s?void 0:s.call(i,0);this._barMark.setMarkConfig({clip:!0,clipPath:()=>{let t=[];return this._forEachStackGroup(e=>{let i=1/0,s=-1/0,o=!1,l=1/0,h=-1/0;e.values.forEach(t=>{let e=t[n.cQ],r=t[n.Uq],a=t[n.x0],d=t[n.fB];i=Math.min(i,e,r),s=Math.max(s,e,r),(0,x.Z)(a)&&(0,x.Z)(d)&&(o=!0,l=Math.min(l,a,d),h=Math.max(h,a,d))});let d=Object.assign(Object.assign(Object.assign({},e.values[0]),{[n.cQ]:i,[n.Uq]:s}),o?{[n.x0]:l,[n.fB]:h}:void 0),u="horizontal"===this.direction?{x:this._getBarXStart(d,r),x1:this._getBarXEnd(d,r),y:this._getPosition(this.direction,d),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(d,a),y1:this._getBarYEnd(d,a),x:this._getPosition(this.direction,d),width:this._getBarWidth(this._xAxisHelper)};t.push((0,D.f)(Object.assign(Object.assign({},u),{cornerRadius:(0,S.Z)(this._spec.stackCornerRadius)?this._spec.stackCornerRadius(u,d,this._markAttributeContext):this._spec.stackCornerRadius,fill:!0})))}),t}})}initLinearRectMarkStyle(){var t,e,i,s;let r=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),n=null===(s=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===s?void 0:s.call(i,0);if("horizontal"===this.direction){let t=(0,x.Z)(this._fieldY2)?{y:t=>(0,o.Ol)(this._dataToPosY(t),n,!0),y1:t=>(0,o.Ol)(this._dataToPosY1(t),n,!0)}:{y:t=>(0,o.Ol)(this._dataToPosY(t)-this._getBarWidth(this._yAxisHelper)/2,n,!0),height:t=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:t=>this._getBarXStart(t,r,!0),x1:t=>this._getBarXEnd(t,r,!0)},t),"normal",a.W.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(r),x1:()=>this._getBarBackgroundXEnd(r)},t),"normal",a.W.Series)}else{let t=(0,x.Z)(this._fieldX2)?{x:t=>(0,o.Ol)(this._dataToPosX(t),r,!0),x1:t=>(0,o.Ol)(this._dataToPosX1(t),r,!0)}:{x:t=>(0,o.Ol)(this._dataToPosX(t)-this._getBarWidth(this._xAxisHelper)/2,r,!0),width:t=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},t),{y:t=>this._getBarYStart(t,n),y1:t=>this._getBarYEnd(t,n)}),"normal",a.W.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},t),{y:()=>this._getBarBackgroundYStart(n),y1:()=>this._getBarBackgroundYEnd(n)}),"normal",a.W.Series)}}_initBandBarBackgroundMarkStyle(){var t,e,i,s,r;if(!this._barBackgroundMark)return;let n=null===(e=null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale)||void 0===e?void 0:e.call(t,0),o=null===(s=null===(i=this._yAxisHelper)||void 0===i?void 0:i.getScale)||void 0===s?void 0:s.call(i,0),l=null!==(r=this._spec.barBackground)&&void 0!==r?r:{},h=(0,b.Z)(l.fieldLevel)?void 0:l.fieldLevel+1;"horizontal"===this.direction?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(n),x1:()=>this._getBarBackgroundXEnd(n),y:t=>this._getPosition(this.direction,t,h,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,h),width:()=>{},y1:()=>{}},"normal",a.W.Series):this.setMarkStyle(this._barBackgroundMark,{x:t=>this._getPosition(this.direction,t,h,"barBackground"),y:()=>this._getBarBackgroundYStart(o),y1:()=>this._getBarBackgroundYEnd(o),width:()=>this._getBarWidth(this._xAxisHelper,h),x1:()=>{},height:()=>{}},"normal",a.W.Series)}initAnimation(){var t,e;let i={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var t,e;return"horizontal"===this.direction?null===(t=this._xAxisHelper)||void 0===t?void 0:t.getScale(0).scale(0):null===(e=this._yAxisHelper)||void 0===e?void 0:e.getScale(0).scale(0)}},s=null===(t=this._spec.animationAppear)||void 0===t?void 0:t.preset,r=(0,I.mh)(this);this._barMark.setAnimationConfig((0,v._8)(null===(e=d.F.getAnimationInKey("bar"))||void 0===e?void 0:e(i,s),(0,v.hT)(this._barMarkName,this._spec,this._markAttributeContext),r))}_getBarWidth(t,e){var i,s;let r=this._groups?this._groups.fields.length:1,n=(0,b.Z)(e)?r:Math.min(r,e),a=null!==(s=null===(i=t.getBandwidth)||void 0===i?void 0:i.call(t,n-1))&&void 0!==s?s:6,o=(0,x.Z)(this._spec.barWidth)&&n===r,l=(0,x.Z)(this._spec.barMinWidth),d=(0,x.Z)(this._spec.barMaxWidth),u=a;return o&&(u=(0,h.uj)(this._spec.barWidth,a)),l&&(u=Math.max(u,(0,h.uj)(this._spec.barMinWidth,a))),d&&(u=Math.min(u,(0,h.uj)(this._spec.barMaxWidth,a))),u}_getPosition(t,e,i,r){var n,a,o,l,d;let u,c,p;"horizontal"===t?(u=this.getYAxisHelper(),c="height",p="barBackground"===r?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(u=this.getXAxisHelper(),c="width",p="barBackground"===r?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));let g=u.getScale(0),m=this._groups?this._groups.fields.length:1,f=(0,b.Z)(i)?m:Math.min(m,i),v=null!==(a=null===(n=u.getBandwidth)||void 0===n?void 0:n.call(u,f-1))&&void 0!==a?a:6,_=f===m?this._barMark.getAttribute(c,e):v;if(f>1&&(0,x.Z)(this._spec.barGapInGroup)){let t=this._groups.fields,i=(0,A.IX)(this._spec.barGapInGroup),s=0,r=0;for(let n=t.length-1;n>=1;n--){let a=t[n],c=null!==(l=null===(o=u.getScale(n))||void 0===o?void 0:o.domain())&&void 0!==l?l:[],p=c.length,g=(0,h.uj)(null!==(d=i[n-1])&&void 0!==d?d:(0,A.Z$)(i),v),m=c.indexOf(e[a]);n===t.length-1?(s+=p*_+(p-1)*g,r+=m*(_+g)):(r+=m*(s+g),s+=s+(p-1)*g)}return g.scale(e[t[0]])+u.getBandwidth(0)/2-s/2+r}let y=(0,s.z2)(g.type||"band");return p(e,f)+.5*(v-_)+(y?-v/2:0)}dataToBarBackgroundPositionX(t,e){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,e,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(t,e){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,e,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(t){super.onLayoutEnd(t),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}compile(){if(super.compile(),this._spec.sampling){let{width:t,height:e}=this._region.getLayoutRect(),i=[],s=this._fieldY,r=this._fieldX;i.push({type:"sampling",size:"horizontal"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?r[0]:s[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var t;super.compileData(),null===(t=this._barBackgroundViewData)||void 0===t||t.compile()}fillData(){var t,e;super.fillData(),null===(e=null===(t=this._barBackgroundViewData)||void 0===t?void 0:t.getDataView())||void 0===e||e.reRunAllTransform()}viewDataUpdate(t){var e,i,s;super.viewDataUpdate(t),null===(i=null===(e=this._barBackgroundViewData)||void 0===e?void 0:e.getDataView())||void 0===i||i.reRunAllTransform(),null===(s=this._barBackgroundViewData)||void 0===s||s.updateData()}release(){var t;super.release(),null===(t=this._barBackgroundViewData)||void 0===t||t.release(),this._barBackgroundViewData=null}}j.type=_.A.bar,j.mark=k.w,j.transformerConstructor=R.w;let H=()=>{(0,O.pK)(),(0,y.Y)(),f(),(0,Z.N)(),(0,F.E)(),d.F.registerSeries(j.type,j)}},6843:function(t,e,i){i.d(e,{S:()=>n,w:()=>r});var s=i(4331);let r=Object.assign(Object.assign({},s.UI),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}}),n=Object.assign(Object.assign({},s.UI),{bar3d:{name:"bar3d",type:"rect3d"}})},9540:function(t,e,i){i.d(e,{G:()=>f});var s=i(1036),r=i(6082),n=i(9038),a=i(4154),o=i(397),l=i(4546),h=i(3066),d=i(1130),u=i(7623),c=i(7636),p=i(4218),g=i(4281),m=i(8469);class f extends o.T{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(t){return this.markLabelSpec[t]}setLabelSpec(t,e){this.markLabelSpec[t]=(0,l.IX)(e)}addLabelSpec(t,e,i=!1){this.markLabelSpec[t]||(this.markLabelSpec[t]=[]),i?this.markLabelSpec[t].unshift(e):this.markLabelSpec[t].push(e)}getTheme(t,e){var i,s,r;let n=(0,g.V)(t),a=null===(i=this._option)||void 0===i?void 0:i.getTheme(),{markByName:o,mark:l}=a,u=this._option.type,c=m.F.getSeriesMarkMap(u)?(0,h.sj)((0,d.Z)(a,`series.${u}`),u,l,o):{},f=(0,d.Z)(a,`series.${u}_${n}`),v=(null!==(r=null!==(s=this.stack)&&void 0!==s?s:null==f?void 0:f.stack)&&void 0!==r?r:null==c?void 0:c.stack)?(0,d.Z)(a,`series.${u}_stack`):void 0;return(0,p.H)({},c,f,v)}transformSpec(t,e,i){this._transformStack(t);let s=super.transformSpec(t,e,i);return this._transformLabelSpec(s.spec),Object.assign(Object.assign({},s),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(t){}_transformStack(t){(0,s.Z)(t.stack)&&(this.stack=t.stack),(0,s.Z)(t.percent)&&(this.stack=t.percent||this.stack),(0,r.Z)(this.stack)&&this._supportStack&&t.seriesField&&(this.stack=!0)}_addMarkLabelSpec(t,e,i="label",s="initLabelMarkStyle",r=!0,a){t&&(0,l.IX)(t[i]).forEach(i=>{var o,l,h;if(i&&i.visible){let{animation:d=!0,animationUpdate:u=!0,animationEnter:c=!0,animationExit:p=!0}=i,{animationUpdate:g=!0,animationEnter:m=!0,animationExit:f=!0}=t,v=!!(null!==(h=null!==(l=null===(o=this._option)||void 0===o?void 0:o.animation)&&void 0!==l?l:t.animation)&&void 0!==h?h:i.animation)&&!!r;this.addLabelSpec((0,n.Z)(e)?e(i):e,Object.assign(Object.assign({},i),{animation:!!v&&d,animationUpdate:!!(v&&g&&u)&&g,animationEnter:!!(v&&m&&c)&&m,animationExit:!!(v&&m&&p)&&f,getStyleHandler:t=>{var e;return null===(e=t[s])||void 0===e?void 0:e.bind(t)}}),a)}})}_getDefaultSpecFromChart(t){var e;let i=null!==(e=super._getDefaultSpecFromChart(t))&&void 0!==e?e:{},{outerRadius:s,innerRadius:r,direction:n}=t;return(0,u.Z)(s)&&(i.outerRadius=s),(0,u.Z)(r)&&(i.innerRadius=r),(0,u.Z)(n)&&(i.direction=n),Object.keys(i).length>0?i:void 0}_mergeThemeToSpec(t,e){let i=this._theme;if(this._shouldMergeThemeToSpec()){let s=this._getDefaultSpecFromChart(e),r=t=>{let e=(0,p.H)({},i,s,t),r=i.label;return r&&(0,a.Z)(r)&&(0,c.Z)(e.label)&&(e.label=e.label.map(t=>(0,p.H)({},r,t))),e};return(0,c.Z)(t)?{spec:t.map(t=>r(t)),theme:i}:{spec:r(t),theme:i}}return{spec:t,theme:i}}}},1885:function(t,e,i){i.d(e,{y:()=>V});var s=i(3722),r=i(5669),n=i(9231),a=i(3685),o=i(6338),l=i(4798),h=i(2990),d=i(9478),u=i(6948),c=i(4218),p=i(3959),g=i(6358),m=i(1889),f=i(4546),v=i(9038),_=i(6082);let y={min:t=>t.length?(0,f.iH)(t.map(t=>1*t)):0,max:t=>t.length?(0,f.CE)(t.map(t=>1*t)):0,"array-min":t=>t.length?(0,f.iH)(t.map(t=>1*t)):0,"array-max":t=>t.length?(0,f.CE)(t.map(t=>1*t)):0,values:t=>{let e={},i=[];for(let s of t)e[s]||(i.push(s),e[s]=1);return i}},b=(t,e)=>{var i,s;let r=e.fields;if((0,v.Z)(r)&&(r=r()),!(null==r?void 0:r.length)||!(null==t?void 0:t.length))return{};r=(0,d.kL)([],r);let n="parser"===e.target?"parserData":"latestData";return x(t[0][n]?t[0][n]:t||[],r,null===(s=(i=t[0]).getFields)||void 0===s?void 0:s.call(i))},x=(t,e,i)=>{let s={},r=[],n=[];return e.forEach(e=>{let a=e.key;s[a]={};let o=null==i?void 0:i[a],l=e.operations,h=l.some(t=>"min"===t||"max"===t||"allValid"===t),d=!0;r.length=0,t&&t.forEach(t=>{t&&r.push(t[a])});let c=r.length;if(h){n.length=0,r.forEach((t,e)=>{(0,u.hi)(t)&&n.push(t)});let t=r;r=n,n=t,d=r.length===c}else r=l.some(t=>"array-min"===t||"array-max"===t)?r.reduce((t,e)=>(e&&e.forEach(e=>{(0,u.hi)(e)&&t.push(e)}),t),[]):r.filter(t=>void 0!==t);e.filter&&(r=r.filter(e.filter)),l.forEach(t=>{if(e.customize)s[a][t]=e.customize;else{if(o&&o.lockStatisticsByDomain&&!(0,_.Z)(o.domain)){if("values"===t)return void(s[a][t]=o.domain.slice())}else if("allValid"===t)return;s[a][t]=y[t](r),"array-max"===t&&(s[a].max=s[a][t]),"array-min"===t&&(s[a].min=s[a][t])}}),h&&(s[a].allValid=d)}),s},S=(t,e)=>{let{config:i}=e;if(!i)return t;let{invalidType:s,checkField:r}=i();return"zero"!==s||r&&r.length&&t.forEach(t=>{r.forEach(e=>{(0,u.hi)(t[e])||(t[e]=0)})}),t};var A=i(4370),k=i(7479),w=i(1766),T=i(5208),C=i(7623),M=i(325),E=i(9904),B=i(7636),O=i(1036),I=i(4154),R=i(9730),P=i(8378),L=i(2193),D=i(4331),Z=i(208),F=i(9540),j=i(6962),H=i(7631),z=i(6542),N=i(3550);class V extends l.g{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var t;return null===(t=this._data)||void 0===t?void 0:t.getDataView()}getViewDataProductId(){var t;return null===(t=this._data)||void 0===t?void 0:t.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(t){(0,C.Z)(t)&&(this._seriesField=t)}getGroups(){return this._groups}getStack(){var t;return null===(t=this.getSpecInfo())||void 0===t?void 0:t.stack}getStackValue(){var t;return null!==(t=this._spec.stackValue)&&void 0!==t?t:`${a.Bq}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(t){var e;this._invalidType=t,null===(e=this.getViewData())||void 0===e||e.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(t,e){var i;super(t,e),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=F.G,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var t,e;return{width:null!==(t=this._layoutRect.width)&&void 0!==t?t:this._region.getLayoutRect().width,height:null!==(e=this._layoutRect.height)&&void 0!==e?e:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=z.Ai.SeriesGroup,this._invalidType="break",this._region=e.region,this._dataSet=e.dataSet,(null===(i=this._spec)||void 0===i?void 0:i.name)&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(s.$7.afterInitData,{model:this}),this.initRootMark(),this.initMark();let t=(0,Z.sB)(this);this._initExtensionMark({hasAnimation:t}),this.initMarkStyle(),this.initMarkState(),t&&this.initAnimation(),this._option.disableTriggerEvent||this.initInteraction(),this.afterInitMark(),this.initEvent(),this.event.emit(s.$7.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return null===(i=this._option.globalScale.getScale(t))||void 0===i?void 0:i.scale(e)},seriesColor:t=>{var e;return(0,_.Z)(t)&&(t=this.getSeriesKeys()[0]),null===(e=this._option.globalScale.getScale("color"))||void 0===e?void 0:e.scale(t)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),(0,C.Z)(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var t,e;"zero"===this._invalidType&&(null===(t=this._rawData)||void 0===t?void 0:t.dataSet)&&((0,g.U)(this._rawData.dataSet,"invalidTravel",S),null===(e=this._rawData)||void 0===e||e.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var t,e,i;let s=null!==(t=this._spec.data)&&void 0!==t?t:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(s&&(this._rawData=(0,h.J3)(s,this._dataSet,this._option.sourceDataList)),null===(i=null===(e=this._rawData)||void 0===e?void 0:e.target)||void 0===i||i.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=(0,h.uj)(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));let t=(0,h.uj)(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new k.z(this._option,t),this.getStack()&&this._viewDataFilter.target.removeListener("change",t.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){let t=this.getGroupFields();t&&t.length&&(this._groups={fields:t})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(t,e){var i,s,r;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]||e&&((0,_.Z)(this._rawStatisticsCache[t].min)||(0,_.Z)(this._rawStatisticsCache[t].max))||!e&&(0,_.Z)(this._rawStatisticsCache[t].values)){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(null===(i=this._viewDataStatistics.latestData)||void 0===i?void 0:i[t]))this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t];else if(this._rawData){let i=null===(s=this._rawData.getFields())||void 0===s?void 0:s[t];if(i&&i.lockStatisticsByDomain&&i.domain)this._rawStatisticsCache[t]={},e?(this._rawStatisticsCache[t].min=(0,f.iH)(i.domain),this._rawStatisticsCache[t].max=(0,f.CE)(i.domain)):this._rawStatisticsCache[t].values=i.domain;else{let i=x(this._rawData.latestData,[{key:t,operations:e?["min","max"]:["values"]}])[t];this._rawStatisticsCache[t]=(0,M.Z)(null!==(r=this._rawStatisticsCache[t])&&void 0!==r?r:{},i)}}}return this._rawStatisticsCache[t]}_statisticViewData(){(0,g.U)(this._dataSet,"dimensionStatistics",b);let t=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new o.VO(this._dataSet,{name:t}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{let t=this.getStatisticFields();return this._seriesField&&(0,d.kL)(t,[{key:this._seriesField,operations:["values"]}]),t},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(t,e,i){(0,g.U)(this._dataSet,"dimensionStatistics",b);let s=new o.VO(this._dataSet,{name:t});return s.parse([e],{type:"dataview"}),s.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var t;let s=(0,d.kL)(this.getStatisticFields(),null!==(t=null==i?void 0:i(e.name))&&void 0!==t?t:[]);return this._seriesField&&(0,d.kL)(s,[{key:this._seriesField,operations:["values"]}]),s},target:"latest"}},!1),s}createdStackData(){let t=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new o.VO(this._dataSet,{name:t}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(t,e){return e}generateDefaultDataKey(t){var e;return(0,_.Z)(t)?(t,e,i)=>{if(!1===this._spec.animation){let i=this._noAnimationDataKey(t,e);if(void 0!==i)return i}let{keyMap:s}=i,r=this._getSeriesDataKey(t);return void 0===s.get(r)?(s.set(r,0),r):(s.set(r,s.get(r)+1),`${r}_${s.get(r)}`)}:(0,E.Z)(t)?e=>e[t]:(0,B.Z)(t)&&t.every(t=>(0,E.Z)(t))?e=>t.map(t=>e[t]).join("-"):(0,v.Z)(t)?(e,i)=>t(e,i):(null===(e=this._option)||void 0===e||e.onError(`invalid dataKey: ${t}`),(t,e)=>{})}_addDataIndexAndKey(){var t;(null===(t=this._rawData)||void 0===t?void 0:t.dataSet)&&((0,g.U)(this._rawData.dataSet,"addVChartProperty",p.E),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:w.cJ.bind(this),call:w.CL}},!1))}updateRawData(t){this._rawData&&this._rawData.updateRawData(t)}rawDataUpdate(t){var e;null===(e=this._rawDataStatistics)||void 0===e||e.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(s.$7.rawDataUpdate,{model:this})}viewDataFilterOver(t){this.event.emit(s.$7.viewDataFilterOver,{model:this})}viewDataUpdate(t){var e;this.event.emit(s.$7.viewDataUpdate,{model:this}),null===(e=this._data)||void 0===e||e.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(t){this.event.emit(s.$7.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(t,e){return!t||(0,_.Z)(e)?null:t[e]}getDatumPositionValues(t,e){return!t||(0,_.Z)(e)?[]:(0,E.Z)(e)?[t[e]]:e.map(e=>t[e])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var t,e,i;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:null===(e=(t=this._region).getGroupMark)||void 0===e?void 0:e.call(t),dataView:!1}),this._rootMark.setMarkConfig({zIndex:null!==(i=this._spec.zIndex)&&void 0!==i?i:this.layoutZIndex})}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(t){var e;if(!this._spec.extensionMark)return;let i=this.getMarksWithoutRoot();t.depend=i,null===(e=this._spec.extensionMark)||void 0===e||e.forEach((e,i)=>{this._createExtensionMark(e,null,this._getExtensionMarkNamePrefix(),i,t)})}_createExtensionMark(t,e,i,s,r){var n;let a=this._createMark({type:t.type,name:(0,C.Z)(t.name)?`${t.name}`:`${i}_${s}`},{skipBeforeLayouted:!0,markSpec:t,parent:e,dataView:!1,componentType:t.componentType,depend:r.depend,key:t.dataKey},{setCustomizedShape:null==t?void 0:t.customShape});if(a){if((0,C.Z)(t.id)&&a.setUserId(t.id),r.hasAnimation){let e=(0,Z._8)({},(0,Z.hT)(t.type,t,this._markAttributeContext));a.setAnimationConfig(e)}if("group"===t.type)i=`${i}_${s}`,null===(n=t.children)||void 0===n||n.forEach((t,e)=>{this._createExtensionMark(t,a,i,e,r)});else if(!(e||(0,_.Z)(t.dataId)&&(0,_.Z)(t.dataIndex))){let e=this._option.getSeriesData(t.dataId,t.dataIndex);e===this._rawData?a.setDataView(this.getViewData(),this.getViewDataProductId()):(a.setDataView(e),e.target.addListener("change",()=>{a.getData().updateData()}))}}}_updateExtensionMarkSpec(){var t;null===(t=this._spec.extensionMark)||void 0===t||t.forEach((t,e)=>{let i=this._marks.getMarkWithInfo({name:(0,C.Z)(t.name)?`${t.name}`:`${this._getExtensionMarkNamePrefix()}_${e}`});i&&(this.initMarkStyleWithSpec(i,t),i.updateStaticEncode(),i.updateLayoutState())})}getStackData(){var t;return null===(t=this._viewStackData)||void 0===t?void 0:t.latestData}_parseSelectorOfInteraction(t,e){if(!e||!e.length)return[];let i=[];return t.markIds?e.filter(e=>{t.markIds.includes(e.getProductId())&&i.push(`#${e.getProductId()}`)}):t.markNames?e.forEach(e=>{t.markNames.includes(e.name)&&i.push(`#${e.getProductId()}`)}):e.forEach(t=>{i.push(`#${t.getProductId()}`)}),i}_parseDefaultInteractionConfig(t){var e;if(!(null==t?void 0:t.length))return[];let i=(e=this._option.mode)===j.i["desktop-browser"]||e===j.i["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"pointertap"}}:(0,H.wx)(e)||(0,H.Oy)(e)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"tap"}}:null,s=Object.assign({},null==i?void 0:i.hover),r=Object.assign({},null==i?void 0:i.select),n=this._spec.hover;(0,O.Z)(n)?s.enable=n:(0,I.Z)(n)&&(s.enable=!0,s=(0,c.H)(s,n));let a=this._spec.select;(0,O.Z)(a)?r.enable=a:(0,I.Z)(a)&&(r.enable=!0,r=(0,c.H)(r,a));let o=[];if(s.enable){let e=this._parseSelectorOfInteraction(s,t);e.length&&o.push(this._defaultHoverConfig(e,s))}if(r.enable){let e=this._parseSelectorOfInteraction(r,t);e.length&&o.push(this._defaultSelectConfig(e,r))}return o}_defaultHoverConfig(t,e){return{seriesId:this.id,regionId:this._region.id,selector:t,type:"element-highlight",trigger:e.trigger,triggerOff:e.triggerOff,blurState:T.q.STATE_HOVER_REVERSE,highlightState:T.q.STATE_HOVER}}_defaultSelectConfig(t,e){let i="multiple"===e.mode,s=(0,C.Z)(e.triggerOff)?e.triggerOff:i?["empty"]:["empty",e.trigger];return{type:"element-select",seriesId:this.id,regionId:this._region.id,selector:t,trigger:e.trigger,triggerOff:s,reverseState:T.q.STATE_SELECTED_REVERSE,state:T.q.STATE_SELECTED,isMultiple:i}}_parseInteractionConfig(t){let e=this.getCompiler();if(!e)return;let{interactions:i}=this._spec,s=this._parseDefaultInteractionConfig(t);s&&s.length&&s.forEach(t=>{e.addInteraction(t)}),i&&i.length&&i.forEach(t=>{let i=this._parseSelectorOfInteraction(t,this.getMarks());i.length&&e.addInteraction(Object.assign(Object.assign({},t),{selector:i,seriesId:this.id,regionId:this._region.id}))})}initInteraction(){let t=this.getMarksWithoutRoot();this._parseInteractionConfig(t)}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var t;let e=this._spec.seriesStyle;if(!e||!e.length)return;let i=null!==(t=this._seriesField)&&void 0!==t?t:r.lb;this.getMarksWithoutRoot().forEach(t=>{let s={},a={},o={};e.forEach(e=>{var i;let r=null===(i=e[t.name])||void 0===i?void 0:i.style;r&&(s[e.name]=!0,o[e.name]=o[e.name]||{},Object.keys(r).forEach(t=>{a[t]=!0,o[e.name][t]=r[t]}))}),t.state.addStateInfo({stateValue:r.Ti,level:-1,filter:t=>Array.isArray(t)?0!==t.length&&!0===s[t[0][i]]:!0===s[t[i]]});let l={};Object.keys(a).forEach(e=>{l[e]=s=>{var r,n;let a;if(Array.isArray(s)){if(0===s.length)return;a=null===(r=o[s[0][i]])||void 0===r?void 0:r[e]}return a=null===(n=o[s[i]])||void 0===n?void 0:n[e],(0,C.Z)(a)?a:t.getAttribute(e,s)}}),this.setMarkStyle(t,l,r.Ti,n.W.User_SeriesStyle)})}afterInitMark(){this.event.emit(s.$7.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(t=>{var e,i;(null===(i=null===(e=t.stateStyle)||void 0===e?void 0:e.normal)||void 0===i?void 0:i.lineWidth)&&t.setAttribute("stroke",this.getColorAttribute(),"normal",n.W.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(t=>{var e;return!(null===(e=t.name)||void 0===e?void 0:e.includes("seriesGroup"))})}getMarksInType(t){return this._marks.getMarksInType(t)}getMarkInName(t){return this._marks.get(t)}getMarkInId(t){return this.getMarks().find(e=>e.id===t)}initEvent(){var t,e,i;null===(e=null===(t=this._data)||void 0===t?void 0:t.getDataView())||void 0===e||e.target.addListener("change",this.viewDataUpdate.bind(this)),null===(i=this._viewDataStatistics)||void 0===i||i.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent(),this.getCompiler().removeInteraction(this.id)}initTooltip(){this._tooltipHelper=new m.O(this)}_compareExtensionMarksSpec(t,e,i){t.length!==e.length||e.some((e,i)=>e.type!==t[i].type||e.id!==t[i].id||e.name!==t[i].name)?i.reMake=!0:e.some((e,i)=>e.visible!==t[i].visible)&&(i.reCompile=!0)}_compareLabelSpec(t,e,i){t.length!==e.length||e.some((e,i)=>e.labelLayout!==t[i].labelLayout||e.visible!==t[i].visible)?i.reMake=!0:!i.reCompile&&e.some((e,i)=>!(0,R.X)(e,t[i]))&&(i.reCompile=!0)}_compareSpec(t,e,i){let s=super._compareSpec(t,e),r=Object.keys(e||{}).sort(),n=Object.keys(t||{}).sort();if(!(0,R.X)(r,n))return s.reMake=!0,s;let a=Object.assign(Object.assign(Object.assign(Object.assign({},D.V2),D.yF),i),{extensionMark:!0,label:!0,totalLabel:!0});return this._compareExtensionMarksSpec((0,f.IX)(t.extensionMark),(0,f.IX)(e.extensionMark),s),s.reMake||this._compareLabelSpec((0,f.IX)(t.label),(0,f.IX)(e.label),s),s.reMake||this._compareLabelSpec((0,f.IX)(t.totalLabel),(0,f.IX)(e.totalLabel),s),s.reMake||(!s.reCompile&&this._marks.getMarks().some(i=>{var s,r;return a[i.name]=!0,(null===(s=e[i.name])||void 0===s?void 0:s.visible)!==(null===(r=t[i.name])||void 0===r?void 0:r.visible)})&&(s.reCompile=!0),!s.reCompile&&r.some(i=>D.yF[i]&&!(0,R.X)(t[i],e[i]))&&(s.reCompile=!0),r.some(i=>!a[i]&&!(0,R.X)(t[i],e[i]))&&(s.reMake=!0)),s}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof o.VO||(0,h.kk)(this._rawData,this._spec.data,!0)}reInit(t){super.reInit(t);let e=this.getMarksWithoutRoot();e.forEach(t=>{this._spec[t.name]&&this.initMarkStyleWithSpec(t,this._spec[t.name])}),this.initMarkStyle(),e.forEach(t=>{t.updateStaticEncode(),t.updateLayoutState(!0)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),(0,Z.sB)(this)&&this.initAnimation()}onEvaluateEnd(t){this._data.updateData()}onRender(t){}release(){var t,e,i;super.release(),this._viewDataMap.clear();let s=null===(e=null===(t=this._rawData)||void 0===t?void 0:t.transformsArr)||void 0===e?void 0:e.findIndex(t=>"addVChartProperty"===t.type);s>=0&&this._rawData.transformsArr.splice(s,1),null===(i=this._data)||void 0===i||i.release(),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(t){(0,P.Z)(t.x)&&(this._layoutStartPoint.x=t.x),(0,P.Z)(t.y)&&(this._layoutStartPoint.y=t.y)}setLayoutRect({width:t,height:e},i){(0,P.Z)(t)&&(this._layoutRect.width=t),(0,P.Z)(e)&&(this._layoutRect.height=e)}getSeriesKeys(){var t,e;return this._seriesField?null!==(e=null===(t=this.getRawDataStatisticsByField(this._seriesField))||void 0===t?void 0:t.values)&&void 0!==e?e:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(t){return e=>{var i,s;return null!==(s=null===(i=this._seriesMark)||void 0===i?void 0:i.getAttribute(e,t))&&void 0!==s?s:void 0}}_getSeriesInfo(t,e){let i=this.getDefaultShapeType();return e.map(e=>({key:e,originalKey:e,style:this.getSeriesStyle({[t]:e}),shapeType:i}))}getSeriesInfoInField(t){var e,i;return this._getSeriesInfo(t,null!==(i=null===(e=this.getRawDataStatisticsByField(t))||void 0===e?void 0:e.values)&&void 0!==i?i:[])}getSeriesInfoList(){var t;return this._getSeriesInfo(null!==(t=this._seriesField)&&void 0!==t?t:r.lb,this.getSeriesKeys())}_getDefaultColorScale(){var t,e;let i=this.getDefaultColorDomain(),s=this._getDataScheme();return null===(e=(t=(new L.m).domain(i)).range)||void 0===e?void 0:e.call(t,s)}_getDataScheme(){return(0,A.wW)(this.getColorScheme(),this.type)}getDefaultColorDomain(){var t,e;return this._seriesField?null===(e=null===(t=this.getViewDataStatistics())||void 0===t?void 0:t.latestData[this._seriesField])||void 0===e?void 0:e.values:[]}getColorAttribute(){var t,e;return{scale:null!==(t=this._option.globalScale.getScale("color"))&&void 0!==t?t:this._getDefaultColorScale(),field:null!==(e=this._seriesField)&&void 0!==e?e:r.lb}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(t){}_createMark(t,e={},i={}){var s,r,n,a,o,l;let{key:h,groupKey:d,skipBeforeLayouted:u,themeSpec:p={},markSpec:g,dataView:m,dataProductId:v,parent:y,isSeriesMark:b,depend:x,stateSort:S,noSeparateStyle:A=!1}=e,k=super._createMark(t,{key:null!=h?h:this._getDataIdKey(),seriesId:this.id,attributeContext:this._markAttributeContext,componentType:e.componentType,noSeparateStyle:A});if((0,C.Z)(k)){let e=this.getSpec()||{};this._marks.addMark(k,{name:t.name}),b&&(this._seriesMark=k),(0,_.Z)(y)?null===(s=this._rootMark)||void 0===s||s.addMark(k):!1!==y&&y.addMark(k),(0,_.Z)(m)?(k.setDataView(this.getViewData(),this.getViewDataProductId()),k.setSkipBeforeLayouted(!0)):!1!==m&&k.setDataView(m,v),(0,O.Z)(u)&&k.setSkipBeforeLayouted(u),(0,C.Z)(x)&&k.setDepend(...(0,f.IX)(x)),(0,_.Z)(d)||k.setGroupKey(d),S&&k.setStateSortCallback(S);let h=Object.assign(Object.assign({},i),{morph:null!==(r=i.morph)&&void 0!==r&&r,support3d:(0,N.Xg)(t.type)||(null!==(n=i.support3d)&&void 0!==n?n:e.support3d||!!e.zField),morphKey:(null===(a=e.morph)||void 0===a?void 0:a.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`,morphElementKey:null!==(l=null===(o=e.morph)||void 0===o?void 0:o.morphElementKey)&&void 0!==l?l:i.morphElementKey});k.setMarkConfig(h),this.initMarkStyleWithSpec(k,(0,c.H)({},p,g||e[k.name]))}return k}_getDataIdKey(){var t;return null!==(t=super._getDataIdKey())&&void 0!==t?t:r.XW}_getSeriesDataKey(t){let e="";if(!t)return e;let i=this.getDimensionField();e=i.map(e=>t[e]).join("_");let s=this.getSeriesField();return s&&!i.includes(s)&&(e+=`_${t[s]}`),e}addViewDataFilter(t){var e,i;null===(i=null!==(e=this._viewDataFilter)&&void 0!==e?e:this.getViewData())||void 0===i||i.transform(t,!1)}reFilterViewData(){var t,e;null===(e=null!==(t=this._viewDataFilter)&&void 0!==t?t:this.getViewData())||void 0===e||e.reRunAllTransform()}reTransformViewData(){var t,e;null===(e=null===(t=this._data)||void 0===t?void 0:t.getDataView())||void 0===e||e.reRunAllTransform()}fillData(){var t;null===(t=this.getRawData())||void 0===t||t.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(t){var e;return t!==r.Uq&&t!==r.fB&&t!==r.cQ&&t!==r.x0||(t=this.getStackValueField()),null!==(e=(0,d.tW)(this.getRawData(),t))&&void 0!==e?e:t}_getInvalidConnectType(){return"zero"===this._invalidType?"zero":"link"===this._invalidType?"connect":"none"}_getInvalidDefined(t){let e=this.getInvalidCheckFields();return!e.length||e.every(e=>(0,u.hi)(t[e]))}_getRelatedComponentSpecInfo(t){var e;let i=this.getSpecIndex(),s=null===(e=this._option.getSpecInfo().component[t])||void 0===e?void 0:e.filter(t=>t.seriesIndexes.includes(i));return null!=s?s:[]}_forEachStackGroup(t,e){var i,s;(e=null!=e?e:null===(i=this._viewStackData)||void 0===i?void 0:i.latestData)&&((null===(s=e.values)||void 0===s?void 0:s.length)?t(e):e.nodes&&Object.values(e.nodes).forEach(e=>{this._forEachStackGroup(t,e)}))}isDatumInViewData(t){if(!t)return!1;let e=this.getViewData().latestData;return!!e&&(!!e.includes(t)||e.some(e=>Object.keys(t).every(i=>t[i]===e[i])))}getSeriesFieldValue(t,e){var i;return t[null!==(i=null!=e?e:this.getSeriesField())&&void 0!==i?i:r.lb]}}V.mark=D.UI,V.transformerConstructor=F.G},4331:function(t,e,i){i.d(e,{Aj:()=>l,DO:()=>n,UI:()=>r,V0:()=>a,V2:()=>h,aS:()=>o,yF:()=>d});var s=i(3685);let r={label:{name:"label",type:"text"}},n=`${s.Bq}_rect_x`,a=`${s.Bq}_rect_x1`,o=`${s.Bq}_rect_y`,l=`${s.Bq}_rect_y1`,h={data:!0},d={invalidType:!0,animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0}},7479:function(t,e,i){i.d(e,{z:()=>a});var s=i(6082),r=i(7623),n=i(3558);class a extends n.O{_compileProduct(){var t;let e=null===(t=this._data)||void 0===t?void 0:t.latestData;(0,s.Z)(e)||(0,r.Z)(this.getProduct())||this._initProduct([])}generateProductId(){var t;return null===(t=this._data)||void 0===t?void 0:t.name}}},1889:function(t,e,i){i.d(e,{O:()=>h});var s=i(7623),r=i(4546),n=i(9038),a=i(897),o=i(6281),l=i(6082);class h{constructor(t){this.activeTriggerSet={mark:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set},this._getSeriesCacheInfo=()=>{var t,e,i;let{series:n}=this,a=n.getSeriesField();return{seriesFields:(0,s.Z)(a)?(0,r.IX)(a):null!==(t=n.getSeriesKeys())&&void 0!==t?t:[],dimensionFields:null!==(e=n.getDimensionField())&&void 0!==e?e:[],measureFields:null!==(i=n.getMeasureField())&&void 0!==i?i:[],type:n.type}},this._getDimensionData=t=>{let{dimensionFields:e}=this._seriesCacheInfo;return e[0]&&(null==t?void 0:t[e[0]])},this._getMeasureData=t=>{let{measureFields:e}=this._seriesCacheInfo;return e[0]&&(null==t?void 0:t[e[0]])},this._getSeriesFieldData=t=>{let{dimensionFields:e,seriesFields:i}=this._seriesCacheInfo;if((0,s.Z)(i[0])&&(null==t?void 0:t[i[0]]))return null==t?void 0:t[i[0]];let r=e[e.length-1];return e.length>1&&(0===i.length||this.series.getSeriesKeys().length),null==t?void 0:t[r]},this._getSeriesStyle=(t,e,i)=>{var n;for(let i of(0,r.IX)(e)){let e=null===(n=this.series.getSeriesStyle(t))||void 0===n?void 0:n(i);if((0,s.Z)(e))return e}return i},this.markTooltipKeyCallback=(t,e)=>this._getSeriesFieldData(t),this.markTooltipValueCallback=(t,e)=>this._getMeasureData(t),this.shapeTypeCallback=(t,e)=>{var i;return null!==(i=this._getSeriesStyle(t,"shape",null))&&void 0!==i?i:this._getSeriesStyle(t,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(t,e)=>this._getSeriesStyle(t,["fill","stroke"]),this.shapeStrokeCallback=(t,e)=>this._getSeriesStyle(t,["stroke","fill"]),this.dimensionTooltipTitleCallback=(t,e)=>this._getDimensionData(t),this.groupTooltipTitleCallback=(t,e)=>this._getSeriesFieldData(t),this.groupTooltipKeyCallback=(t,e)=>{let{seriesFields:i}=this._seriesCacheInfo,s=this._seriesCacheInfo.dimensionFields;return i[0]&&(s=s.filter(t=>t!==i[0])),s.map(e=>null==t?void 0:t[e]).join("-")},this.getHasShape=t=>!!t,this.series=t,this.updateTooltipSpec()}updateTooltipSpec(){var t;let e=null===(t=this.series.getSpec())||void 0===t?void 0:t.tooltip;this.spec=e,this._seriesCacheInfo=this._getSeriesCacheInfo()}getShapeAttrs(t,e,i){var s,r,n,a,o,l,h,d,u,c,p,g;let m=e?"content":"title",f=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},null===(s=null==i?void 0:i.style)||void 0===s?void 0:s.shape),null==i?void 0:i[t]),null===(r=null==i?void 0:i[t])||void 0===r?void 0:r[m]),null===(n=this.spec)||void 0===n?void 0:n[t]),null===(o=null===(a=this.spec)||void 0===a?void 0:a[t])||void 0===o?void 0:o[m]);return{shapeType:null!==(l=f.shapeType)&&void 0!==l?l:this.shapeTypeCallback,shapeFill:null!==(d=null!==(h=f.shapeFill)&&void 0!==h?h:f.shapeColor)&&void 0!==d?d:this.shapeColorCallback,shapeStroke:null!==(u=f.shapeStroke)&&void 0!==u?u:this.shapeStrokeCallback,shapeHollow:null!==(c=f.shapeHollow)&&void 0!==c&&c,shapeLineWidth:f.shapeLineWidth,shapeSize:null!==(p=f.shapeSize)&&void 0!==p?p:f.size,hasShape:null!==(g=f.hasShape)&&void 0!==g?g:this.getHasShape(e)}}enableByType(t){return!0}getDefaultContentList(t){return[this.getDefaultContentPattern(t)]}getContentList(t,e,i,s,r,n){var o;return(0,a.nK)(null!==(o=null==e?void 0:e.content)&&void 0!==o?o:this.getDefaultContentList(t),this.getDefaultContentPattern(t),i,s,r,n)}getTitleResult(t,e,i,s,r){let h=(0,n.Z)(e)?e(s,r):e;if(h?(0,l.Z)(h.value)&&(h=Object.assign(Object.assign({},this.getDefaultTitlePattern(t)),h)):h=this.getDefaultTitlePattern(t),h&&!1!==h.visible){let t=(0,o.lg)(s),e={visible:(0,o.Xb)(h.visible,t,r),value:(0,a.u6)((0,o.Xb)(h.value,t,r,h.valueFormatter),h.valueTimeFormat,h.valueTimeFormatMode),valueStyle:(0,o.Xb)(h.valueStyle,t,r),hasShape:h.hasShape};return Object.keys(i).forEach(s=>{e[s]=(0,o.Xb)(i[s],t,r)}),e}return{hasShape:!1,visible:!1}}getTooltipData(t,e,i,s,r){var n,o;let l;if(!(this.enableByType(t)&&(0,a.Lw)(t,this.spec)&&("dimension"!==t||s&&s.length)))return null;let h=null!==(o=null===(n=this.spec)||void 0===n?void 0:n[t])&&void 0!==o?o:null==e?void 0:e[t],d=this.getShapeAttrs(t,!0,e),u=this.getShapeAttrs(t,!1,e);return"dimension"===t?(l=[],this.getContentList(t,h,d,i,s,r).forEach(t=>{l.push(t)})):l=this.getContentList(t,h,d,i,s,r),{visible:!0,activeType:t,data:i,title:this.getTitleResult(t,null==h?void 0:h.title,u,i,r),content:l}}getDefaultTitlePattern(t){return{key:void 0,value:"group"===t?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}}getDefaultContentPattern(t){return{seriesId:this.series.id,key:"group"===t?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,value:this.markTooltipValueCallback}}}},5287:function(t,e,i){i.d(e,{i:()=>c});var s=i(1885),r=i(5669),n=i(4546),a=i(7623),o=i(5173),l=i(4498),h=i(7602),d=i(3722),u=i(3685);class c extends s.y{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var t;return null===(t=this._positionXEncoder)||void 0===t?void 0:t.bind(this)},this._setPositionXEncoder=t=>{this._positionXEncoder=t.bind(this)},this._getPositionYEncoder=()=>{var t;return null===(t=this._positionYEncoder)||void 0===t?void 0:t.bind(this)},this._setPositionYEncoder=t=>{this._positionYEncoder=t.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(t){this._fieldX=(0,n.IX)(t)}get fieldY(){return this._fieldY}setFieldY(t){this._fieldY=(0,n.IX)(t)}get fieldZ(){return this._fieldZ}setFieldZ(t){this._fieldZ=t&&(0,n.IX)(t)}get fieldX2(){return this._fieldX2}setFieldX2(t){this._fieldX2=t}get fieldY2(){return this._fieldY2}setFieldY2(t){this._fieldY2=t}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(t){this._scaleX=t}get scaleY(){return this._scaleY}setScaleY(t){this._scaleY=t}get scaleZ(){return this._scaleZ}setScaleZ(t){this._scaleZ=t}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(t){this._xAxisHelper=t,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(t){this._yAxisHelper=t,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(t){this._zAxisHelper=t,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){let t=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(e=>{e.axisHelper&&e.axisHelper.getScale&&e.fields&&e.fields.forEach(i=>{let s={key:i,operations:[]},r=e.axisHelper.getScale(0);(0,o.z2)(r.type)?(s.operations=["max","min"],"log"===r.type&&(s.filter=t=>t>0)):s.operations=["values"],t.push(s)})}),this.getStack()&&t.push({key:this.getStackValueField(),operations:["allValid"]}),t}getGroupFields(){return"vertical"===this.direction?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var t,e;let i=null===(t="horizontal"===this.direction?this.getXAxisHelper():this.getYAxisHelper())||void 0===t?void 0:t.getAxisId();return null!==(e=this._spec.stackValue)&&void 0!==e?e:`${u.Bq}_series_${this.type}_${i}`}getStackValueField(){return"horizontal"===this.direction?(0,n.IX)(this._spec.xField)[0]:(0,n.IX)(this._spec.yField)[0]}setValueFieldToStack(){"horizontal"===this.direction?(this.setFieldX(r.Uq),this.setFieldX2(r.cQ)):(this.setFieldY(r.Uq),this.setFieldY2(r.cQ))}setValueFieldToPercent(){"horizontal"===this.direction?(this.setFieldX(r.fB),this.setFieldX2(r.x0)):(this.setFieldY(r.fB),this.setFieldY2(r.x0))}setValueFieldToStackOffsetSilhouette(){"horizontal"===this.direction?(this.setFieldX(r.AF),this.setFieldX2(r.Jl)):(this.setFieldY(r.AF),this.setFieldY2(r.Jl))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=(0,n.IX)(this._spec.xField),this._specYField=(0,n.IX)(this._spec.yField),(0,a.Z)(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2(null===(t=this._spec)||void 0===t?void 0:t.x2Field),this.setFieldY2(null===(e=this._spec)||void 0===e?void 0:e.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),(0,a.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}dataToPosition(t,e){return t?e&&!this.isDatumInViewData(t)?null:{x:this.dataToPositionX(t),y:this.dataToPositionY(t)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(t=0)=>{var e,i,s;return null!==(s=null===(i=(e=this.getXAxisHelper()).getBandwidth)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:0},this._markAttributeContext.yBandwidth=(t=0)=>{var e,i,s;return null!==(s=null===(i=(e=this.getYAxisHelper()).getBandwidth)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(t,e){return{x:this.valueToPositionX(t),y:this.valueToPositionY(e)}}_axisPosition(t,e,i){return this._scaleConfig.datum=i,t.isContinuous?t.valueToPosition(e,this._scaleConfig):t.dataToPosition((0,n.IX)(e),this._scaleConfig)}valueToPositionX(t,e){return this._axisPosition(this._xAxisHelper,t,e)}valueToPositionY(t,e){return this._axisPosition(this._yAxisHelper,t,e)}_dataToPosition(t,e,i,s,r,a){let o=r();if(o)return o(t);if(!e)return a(t=>Number.NaN),Number.NaN;let l=(e.getFields?e.getFields():i).slice(0,s);return l&&0!==l.length?(e.isContinuous?a(t=>(this._scaleConfig.datum=t,e.valueToPosition(this.getDatumPositionValue(t,l[0]),this._scaleConfig))):a(t=>(this._scaleConfig.datum=t,e.dataToPosition((0,n.IX)(this.getDatumPositionValues(t,l)),this._scaleConfig))),r()(t)):(a(t=>null),null)}dataToPositionX(t){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(t){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(t){if(!this._zAxisHelper)return Number.NaN;let{dataToPosition:e}=this._zAxisHelper;return e(this.getDatumPositionValues(t,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(t){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in t?this.valueToPositionX(this.getDatumPositionValues(t,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(t){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in t?this.valueToPositionY(this.getDatumPositionValues(t,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(t){return t?{x:this.positionToDataX(t.x),y:this.positionToDataY(t.y)}:null}positionToDataX(t){return this._scaleX?this._scaleX.invert(t):null}positionToDataY(t){return this._scaleY?this._scaleY.invert(t):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;let{getScale:t}=this._xAxisHelper;return t(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;let{getScale:t}=this._xAxisHelper;return t(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return"horizontal"===this._direction?this._specYField:this._specXField}getDimensionContinuousField(){return"horizontal"===this._direction?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return"horizontal"===this._direction?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(d.$7.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===(null===(e="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper)||void 0===e?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e,i;(null===(e=null===(t=this.getViewData())||void 0===t?void 0:t.latestData)||void 0===e?void 0:e.length)&&((0,l.fd)("horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,"horizontal"===this._direction?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),null===(i=this._data)||void 0===i||i.updateData(!0))}getInvalidCheckFields(){let t=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==h.L.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(e=>{t.push(e)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==h.L.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(e=>{t.push(e)}),t}reInit(t){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(t)}}},9208:function(t,e,i){i.d(e,{i:()=>x});var s=i(5287),r=i(3885),n=i(3505),a=i(7773),o=i(208),l=i(4380),h=i(4331),d=i(5919);let u=Object.assign(Object.assign({},h.UI),d.j);var c=i(775),p=i(3679),g=i(8469),m=i(717),f=i(4822),v=i(4498),_=i(1532),y=i(7501);class b extends s.i{constructor(){super(...arguments),this.type=r.A.line,this.transformerConstructor=f.n,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var t;let e={progressiveStep:this._spec.progressiveStep,progressiveThreshold:this._spec.progressiveThreshold,large:this._spec.large,largeThreshold:this._spec.largeThreshold},i=null!==(t=this._spec.seriesMark)&&void 0!==t?t:"line";this.initLineMark(e,"line"===i),this.initSymbolMark(e,"point"===i)}initTooltip(){super.initTooltip();let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var t,e,i,s;let r={direction:this.direction},n=null===(e=null===(t=this._spec)||void 0===t?void 0:t.animationAppear)||void 0===e?void 0:e.preset;if(this._lineMark.setAnimationConfig((0,o._8)(null===(i=g.F.getAnimationInKey("line"))||void 0===i?void 0:i(r,n),(0,o.hT)("line",this._spec,this._markAttributeContext))),this._symbolMark){let t=(0,v.mh)(this);this._symbolMark.setAnimationConfig((0,o._8)(null===(s=g.F.getAnimationInKey("scaleInOut"))||void 0===s?void 0:s(),(0,o.hT)("point",this._spec,this._markAttributeContext),t))}}onLayoutEnd(t){super.onLayoutEnd(t),this.reCompileSampling()}getSeriesStyle(t){var e;let i="point"!==(null===(e=this._spec)||void 0===e?void 0:e.seriesMark);return e=>{var s,r;return i&&"fill"===e&&(e="stroke"),null!==(r=null===(s=this._seriesMark)||void 0===s?void 0:s.getAttribute(e,t))&&void 0!==r?r:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}b.type=r.A.line,b.mark=u,b.transformerConstructor=f.n,(0,a.jB)(b,n.t);let x=()=>{(0,m.pK)(),(0,m.lK)(),(0,c.i)(),(0,p.Ou)(),(0,l.rt)(),(0,l.BV)(),(0,_.N)(),(0,y.E)(),g.F.registerSeries(b.type,b)}},5919:function(t,e,i){i.d(e,{j:()=>s});let s={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}}},4822:function(t,e,i){i.d(e,{n:()=>r});var s=i(9540);class r extends s.G{_transformLabelSpec(t){var e,i,s;!1!==(null===(e=t.point)||void 0===e?void 0:e.visible)&&!1!==(null===(s=null===(i=t.point)||void 0===i?void 0:i.style)||void 0===s?void 0:s.visible)?this._addMarkLabelSpec(t,"point"):this._addMarkLabelSpec(t,"line"),this._addMarkLabelSpec(t,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}},3505:function(t,e,i){i.d(e,{t:()=>p});var s=i(3685),r=i(6338),n=i(3722),a=i(9231),o=i(341),l=i(208),h=i(2687),d=i(5208),u=i(5919),c=i(4218);class p{addSamplingCompile(){if(this._spec.sampling){let{width:t,height:e}=this._region.getLayoutRect(),i=[],s=this._fieldY,r=this._fieldX;i.push({type:"sampling",size:"horizontal"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?r[0]:s[0],groupBy:this._seriesField,mode:this._spec.sampling}),this._data.getProduct().transform(i)}}addOverlapCompile(){var t;if(this._spec.markOverlap){let e=[];e.push({type:"markoverlap",direction:"horizontal"===this._direction&&"cartesian"===this.coordinate?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),null===(t=this._symbolMark)||void 0===t||t.getProduct().transform(e)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(t,e){var i,s;return this._lineMark=this._createMark(u.j.line,{groupKey:this._seriesField,isSeriesMark:null==e||e,stateSort:null===(i=this._spec.line)||void 0===i?void 0:i.stateSort},Object.assign(Object.assign({},t),{setCustomizedShape:null===(s=this._spec.line)||void 0===s?void 0:s.customShape,morphElementKey:this.getDimensionField()[0]})),this._lineMark}initLineMarkStyle(t,e){var i,s;let r=this._lineMark;if(r){if(this.setMarkStyle(r,{stroke:this.getColorAttribute()},"normal",a.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(r,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",a.W.Series),this.event.on(n.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(r,"defined")}),"polar"===this.coordinate)this.setMarkStyle(r,{lineJoin:"bevel",curveType:o.s,closePath:!0},"normal",a.W.Series);else{let n=null!=e?e:null===(s=null===(i=this.getSpec().line)||void 0===i?void 0:i.style)||void 0===s?void 0:s.curveType,l=n===o.l?"horizontal"===t?"monotoneY":"monotoneX":n;this.setMarkStyle(r,{curveType:l},"normal",a.W.Built_In)}this.setMarkStyle(r,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",a.W.Series)}return r}_getEventElement(t,e=!1){let i=[];return t.dimensionInfo.some(t=>(t.data.some(t=>t.series===this&&(i=t.datum,!0)),!i.length)),i}_dimensionTrigger(t){let e=this._getEventElement(t);switch(t.action){case"enter":this._symbolActiveMark.getDataView().parse(e),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(t,e){let i=this._spec.point||{};if(!1!==i.visible&&(this._symbolMark=this._createMark(u.j.point,{groupKey:this._seriesField,isSeriesMark:!!e,stateSort:i.stateSort},Object.assign(Object.assign({},t),{setCustomizedShape:i.customShape,morph:(0,l.yx)(this._spec,u.j.point.name),morphElementKey:this.getDimensionField()[0]}))),!0===this._spec.activePoint){let t=new r.VO(this._option.dataSet,{name:`${s.Bq}_series_${this.id}_active_point`});t.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{groupKey:this._seriesField,isSeriesMark:!1,dataView:t,parent:this._region.getInteractionMark(),stateSort:i.stateSort},{setCustomizedShape:i.customShape,morph:!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){let t=this._symbolMark;if(!t)return this._initSymbolActiveMarkAlone(),t;if(this._initSymbolMark(t),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){for(let e in this._symbolActiveMark.setVisible(!0),this.event.on(h.C.dimensionHover,this._dimensionTrigger.bind(this)),this._symbolMark.stateStyle)for(let i in this._symbolActiveMark.stateStyle[e]={},this._symbolMark.stateStyle[e])"visible"!==i&&(this._symbolActiveMark.stateStyle[e][i]={style:null,level:a.W.Series,referer:t});this._symbolActiveMark.state.changeStateInfo({stateValue:d.q.STATE_DIMENSION_HOVER,filter:()=>!0})}return t}_initSymbolMark(t){t&&(this.setMarkStyle(t,{fill:this.getColorAttribute()},"normal",a.W.Series),this.setMarkStyle(t,{x:t=>"zero"===this._invalidType||this._getInvalidDefined(t)?this.dataToPositionX(t):Number.NaN,y:t=>"zero"===this._invalidType||this._getInvalidDefined(t)?this.dataToPositionY(t):Number.NaN,z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",a.W.Series))}_initSymbolActiveMarkAlone(){var t,e;let i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(null===(e=null===(t=this._spec[u.j.point.name])||void 0===t?void 0:t.state)||void 0===e?void 0:e.dimension_hover)&&(i.setVisible(!0),this.event.on(h.C.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,(0,c.H)({},this._spec[u.j.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:d.q.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(t){var e;t&&("symbol"!==(null===(e=t.getTarget())||void 0===e?void 0:e.type)&&t.setRule("line-data"),this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),"zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",a.W.Series),this.event.on(n.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(t,"visible")}))}initLineLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>{var e;return null!==(e=t[this.getSeriesField()])&&void 0!==e?e:this.getSeriesKeys()[0]},z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(t,e){var i,s,r,n;if(!t)return;let o=this._isFieldAllValid();if("zero"===this._invalidType||o){if(!0===(null===(s=null===(i=t.stateStyle.normal)||void 0===i?void 0:i[e])||void 0===s?void 0:s.style))return;this.setMarkStyle(t,{[e]:!0},"normal",a.W.Series)}else{if(!0!==(null===(n=null===(r=t.stateStyle.normal)||void 0===r?void 0:r[e])||void 0===n?void 0:n.style))return;this.setMarkStyle(t,{[e]:this._getInvalidDefined.bind(this)},"normal",a.W.Series)}t.getProduct()&&t.compileEncode()}_isFieldAllValid(){let t=this.getViewDataStatistics(),e=this.getStackValueField();return!!(t&&t.latestData&&e)&&t.latestData[e]&&t.latestData[e].allValid}}},168:function(t,e,i){i.d(e,{iA:()=>tt});var s=i(7623),r=i(1805),n=i(6338),a=i(8350),o=i(9231),l=i(5669),h=i(3685),d=i(2732),u=i(8118),c=i(7636);function p(t){return function(e){return(0,c.Z)(t)?t.reduce((t,e)=>null==t?void 0:t[e],e):null==e?void 0:e[t]}}var g=i(4546),m=i(6082),f=i(5173),v=i(1885),_=i(4498),y=i(3722);class b extends v.y{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=a.KZ,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(t){return this._angleField=(0,s.Z)(t)?(0,g.IX)(t):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(t){return this._radiusField=(0,s.Z)(t)?(0,g.IX)(t):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(t){return this._innerRadiusField=(0,g.IX)(t),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(t){return this._radiusScale=t,t}get angleScale(){return this._angleScale}setAngleScale(t){return this._angleScale=t,t}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(t){this._angleAxisHelper=t,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(t){this._radiusAxisHelper=t,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(t,e){if((0,m.Z)(t)||(0,m.Z)(e)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};let i=this.radiusAxisHelper.dataToPosition((0,g.IX)(e));if(i<0){if("break"===this._invalidType||"link"===this._invalidType)return{x:Number.NaN,y:Number.NaN};if("zero"===this._invalidType)return this.angleAxisHelper.center()}let s=this.angleAxisHelper.dataToPosition((0,g.IX)(t));return this.angleAxisHelper.coordToPoint({angle:s,radius:i})}dataToPosition(t,e){return t&&this.angleAxisHelper&&this.radiusAxisHelper?e&&!this.isDatumInViewData(t)?null:this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getDatumPositionValues(t,this._radiusField)):null}dataToPositionX(t){var e;return null===(e=this.dataToPosition(t))||void 0===e?void 0:e.x}dataToPositionY(t){var e;return null===(e=this.dataToPosition(t))||void 0===e?void 0:e.y}dataToPositionZ(t){return 0}positionToData(t){}radiusToData(t){}angleToData(t){}getStatisticFields(){var t,e;let i=[];return(null===(t=this.radiusAxisHelper)||void 0===t?void 0:t.getScale)&&this._radiusField.forEach(t=>{let e={key:t,operations:[]};(0,f.z2)(this.radiusAxisHelper.getScale(0).type)?e.operations=["max","min"]:e.operations=["values"],i.push(e)}),(null===(e=this.angleAxisHelper)||void 0===e?void 0:e.getScale)&&this._angleField.forEach(t=>{let e={key:t,operations:[]};(0,f.z2)(this.angleAxisHelper.getScale(0).type)?e.operations=["max","min"]:e.operations=["values"],i.push(e)}),i}setAttrFromSpec(){super.setAttrFromSpec(),(0,s.Z)(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),(0,s.Z)(this._spec.radius)&&(this._outerRadius=this._spec.radius),(0,s.Z)(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),(0,s.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){let t=this._angleAxisHelper||this._radiusAxisHelper;if(t)return t.layoutRadius();let{width:e,height:i}=this._region.getLayoutRect();return Math.min(e/2,i/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(y.$7.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===(null===(e=this._angleAxisHelper)||void 0===e?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e;(null===(e=null===(t=this.getViewData())||void 0===t?void 0:t.latestData)||void 0===e?void 0:e.length)&&(0,_.fd)(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){let t=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(e=>{t.push(e)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(e=>{t.push(e)}),t}}var x=i(3885),S=i(6948);function A(t){return(0,S.hi)(t)?Number.parseFloat(t):0}let k=(t,e)=>{let{asStartAngle:i,asEndAngle:s,asMiddleAngle:n,asRadian:o,asRatio:l,asQuadrant:h,asK:u,showAllZero:c,supportNegative:p,showEmptyCircle:g}=e,m=e.angleField(),f=e.startAngle(),v=e.endAngle(),_=e.minAngle(),y=t.map(t=>Object.assign({},t));if(!y||0===y.length||!c&&g&&w(y,m,p))return y;let b=(t,e,a)=>{t[i]=e,t[s]=e+a,t[n]=e+a/2,t[o]=a,t[h]=(0,r.tc)(e+a/2)},x=0,S=-1/0,k=!0;for(let t=0;t<y.length;t++){let e=p?Math.abs(A(y[t][m])):A(y[t][m]);x+=e,S=Math.max(e,S),k&&0!==e&&(k=!1),y[t][a.E2]=e}let T=y.map(t=>Number(t[m])),C=v-f,M=f,E=C,B=0,O=(0,d.h1)(T);if(y.forEach((t,e)=>{let i=t[a.E2],s=x?i/x:0,r=s*C;r<_?(r=_,E-=_):B+=i;let n=M,o=M+r;t[l]=s,t[u]=S?i/S:0,t._percent_=O[e],b(t,n,r),M=o}),E<C){if(E<=.001){let t=C/y.length;y.forEach((e,i)=>{b(e,f+i*t,t)})}else{let t=E/B;M=f,y.forEach(e=>{let i=e[o]===_?_:e[a.E2]*t;b(e,M,i),M+=i})}}if(0!==x&&(y[y.length-1][s]=v),k&&c){let t=C/y.length;y.forEach((e,i)=>{b(e,f+i*t,t)})}return y},w=(t,e,i)=>!!(0,m.Z)(t)||0===t.length||!!t.every(t=>0===A(t[e]))||!i&&0===t.reduce((t,i)=>t+A(i[e]),0);var T=i(6358),C=i(5719),M=i(8469);function E(t,e,i){return(s,r,n)=>e?"radius"===t.growField?{overall:0}:{overall:t.growFrom(s,r,i)}:{overall:!1}}let B=t=>({type:"radius"===t.growField?"growRadiusIn":"growAngleIn",options:E(t,!0,C.h.appear)}),O={type:"fadeIn"},I=t=>({type:"radius"===t.growField?"growRadiusIn":"growAngleIn",easing:"linear",options:E(t,!0,C.h.enter)}),R=t=>({type:"radius"===t.growField?"growRadiusOut":"growAngleOut",easing:"linear",options:E(t,!0,C.h.exit)}),P=t=>({type:"radius"===t.growField?"growRadiusOut":"growAngleOut",options:E(t,!0,C.h.exit)});function L(t,e){if(!1===e)return{};switch(e){case"fadeIn":return O;case"growRadius":return B(Object.assign(Object.assign({},t),{growField:"radius"}));default:return B(Object.assign(Object.assign({},t),{growField:"angle"}))}}let D=()=>{M.F.registerAnimation("pie",(t,e)=>({appear:L(t,e),enter:I(t),exit:R(t),disappear:P(t)}))},Z=()=>{M.F.registerAnimation("emptyCircle",(t,e)=>({appear:L(t,e)}))};var F=i(208),j=i(7479),H=i(8378),z=i(4268),N=i(4331);let V=Object.assign(Object.assign({},N.UI),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}});Object.assign(Object.assign({},N.UI),{pie3d:{name:"pie3d",type:"arc3d"},labelLine:{name:"labelLine",type:"path"}});var U=i(4218),G=i(9540);class W extends G.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie")}_mergeThemeToSpec(t,e){let i=this._theme,s=t;if(this._shouldMergeThemeToSpec()){let i=this._getDefaultSpecFromChart(e);s=(0,U.H)({},this._theme,i,t);let r=(t,e)=>(0,U.H)({},"inside"===t||"inside-center"===t?this._theme.innerLabel:this._theme.outerLabel,e);(0,c.Z)(s.label)?s.label=s.label.map(t=>r(t.position,t)):s.label=r(s.label.position,s.label)}return{spec:s,theme:i}}_getDefaultSpecFromChart(t){var e;let i=null!==(e=super._getDefaultSpecFromChart(t))&&void 0!==e?e:{},{centerX:r,centerY:n}=t;return(0,s.Z)(r)&&(i.centerX=r),(0,s.Z)(n)&&(i.centerY=n),Object.keys(i).length>0?i:void 0}}h.Bq,h.Bq,h.Bq;let X=`${h.Bq}_LABEL_VISIBLE`;h.Bq,h.Bq;var Y=i(1601),$=i(9038);let K=(t,e,i,s)=>{let n=t();if((0,Y.Z)(n))return n;if((0,$.Z)(n))return n(e(),i());let a=e();if("auto"===n&&a.width>0&&a.height>0){let{startAngle:t=0,endAngle:e=2*Math.PI}=s();return(0,r.Re)(a,i(),t,e)}return Math.min(a.width/2,a.height/2)};var q=i(1960);class J extends b{constructor(){super(...arguments),this.transformerConstructor=W,this._pieMarkName="pie",this._pieMarkType="arc",this.getCenter=()=>{var t,e;let i=this._region.getLayoutRect();return{x:(0,q.Mv)(null===(t=this._spec)||void 0===t?void 0:t.centerX,i.width,i,i.width/2),y:(0,q.Mv)(null===(e=this._spec)||void 0===e?void 0:e.centerY,i.height,i,i.height/2)}},this._startAngle=a.JK,this._endAngle=a.Uw,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this._emptyArcMark=null,this.dataToCentralPosition=t=>{let e=t[a.yz];if((0,m.Z)(e))return null;let i=this.computeDatumRadius(t),s=this.computeDatumInnerRadius(t),n=this.computeCenter(t);return(0,r.op)(n,(i+s)/2,e)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}setAttrFromSpec(){var t,e,i,n,a,o;super.setAttrFromSpec(),this._centerOffset=null!==(t=this._spec.centerOffset)&&void 0!==t?t:0,this._cornerRadius=null!==(e=this._spec.cornerRadius)&&void 0!==e?e:0;let l=(0,d.kq)((0,s.Z)(this._spec.startAngle)?(0,r.M4)(this._spec.startAngle):this._startAngle,(0,s.Z)(this._spec.endAngle)?(0,r.M4)(this._spec.endAngle):this._endAngle);this._startAngle=l.startAngle,this._endAngle=l.endAngle,this._padAngle=(0,s.Z)(this._spec.padAngle)?(0,r.M4)(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=null!==(n=null===(i=this._spec.emptyPlaceholder)||void 0===i?void 0:i.showEmptyCircle)&&void 0!==n&&n,this._showAllZero=null!==(a=this._spec.showAllZero)&&void 0!==a&&a,this._supportNegative=null!==(o=this._spec.supportNegative)&&void 0!==o&&o}initData(){super.initData();let t=this.getViewData();if(!t)return;(0,T.U)(this._dataSet,"pie",k),t.transform({type:"pie",options:{angleField:()=>this._angleField[0],startAngle:()=>this._startAngle,endAngle:()=>this._endAngle,minAngle:()=>(0,s.Z)(this._spec.minAngle)?(0,r.M4)(this._spec.minAngle):0,asStartAngle:a.FI,asEndAngle:a.A8,asRatio:a.Y1,asMiddleAngle:a.yz,asRadian:a.xt,asQuadrant:a.hk,asK:a.dr,showAllZero:this._showAllZero,supportNegative:this._supportNegative,showEmptyCircle:this._showEmptyCircle}},!1);let e=new n.VO(this._dataSet,{name:`${h.Bq}_series_${this.id}_viewDataLabel`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new j.z(this._option,e)}compileData(){var t;super.compileData(),null===(t=this._viewDataLabel)||void 0===t||t.compile()}initMark(){var t,e;this._pieMark=this._createMark(Object.assign(Object.assign({},J.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{key:l.XW,groupKey:this._seriesField,skipBeforeLayouted:!0,isSeriesMark:!0,stateSort:null===(t=this._spec.pie)||void 0===t?void 0:t.stateSort},{setCustomizedShape:null===(e=this._spec.pie)||void 0===e?void 0:e.customShape,morph:(0,F.yx)(this._spec,this._pieMarkName),morphElementKey:this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({name:"emptyCircle",type:"arc"},{dataView:!1}))}startAngleScale(t){return p(a.FI)(t)}endAngleScale(t){return p(a.A8)(t)}_computeLayoutRadius(){return K(()=>this._spec.layoutRadius,this.getLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}initMarkStyle(){let t={x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:(0,u.My)(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:(0,u.My)(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:t=>this.startAngleScale(t),endAngle:t=>this.endAngleScale(t),padAngle:this._padAngle,centerOffset:this._centerOffset},e=this._pieMark;e&&this.setMarkStyle(e,t,"normal",o.W.Series);let i=this._emptyArcMark;i&&this.setMarkStyle(i,Object.assign(Object.assign({},t),{visible:()=>{let t=this.getAngleField()[0];return w(this.getViewData().latestData,t,this._supportNegative)}}),"normal",o.W.Series)}initInteraction(){this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(t,e,i){if(super.initMarkStyleWithSpec(t,e,i),t.name===this._pieMarkName){let e=this.getSpec()[t.name];if(e)for(let i in e.state||{})this.setMarkStyle(t,this.generateRadiusStyle(e.state[i]),i,o.W.User_Mark)}"emptyCircle"===t.name&&this.setMarkStyle(t,this.generateRadiusStyle(e.style),"normal",o.W.User_Mark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{visible:p(X).bind(this),text:t=>t[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var t;super.initEvent(),null===(t=this._viewDataLabel.getDataView())||void 0===t||t.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(t){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd(t)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(y.$7.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(t){if(!t)return;let e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),t.cornerRadius&&(e.cornerRadius=()=>this._computeLayoutRadius()*t.cornerRadius),e}computeCenter(t){return{x:this._pieMark.getAttribute("x",t,"normal"),y:this._pieMark.getAttribute("y",t,"normal")}}getRadius(t="normal"){var e,i,s,r,n,a,o;let l="normal"===t?null===(s=null===(i=this.getSpec()[(null===(e=this._pieMark)||void 0===e?void 0:e.name)||"pie"])||void 0===i?void 0:i.style)||void 0===s?void 0:s.outerRadius:null===(o=null===(a=null===(n=this.getSpec()[(null===(r=this._pieMark)||void 0===r?void 0:r.name)||"pie"])||void 0===n?void 0:n.state)||void 0===a?void 0:a[t])||void 0===o?void 0:o.outerRadius;return null!=l?l:this._outerRadius}getInnerRadius(t="normal"){var e,i,s,r,n,a,o;let l="normal"===t?null===(s=null===(i=this.getSpec()[(null===(e=this._pieMark)||void 0===e?void 0:e.name)||"pie"])||void 0===i?void 0:i.style)||void 0===s?void 0:s.innerRadius:null===(o=null===(a=null===(n=this.getSpec()[(null===(r=this._pieMark)||void 0===r?void 0:r.name)||"pie"])||void 0===n?void 0:n.state)||void 0===a?void 0:a[t])||void 0===o?void 0:o.innerRadius;return null!=l?l:this._innerRadius}computeRadius(t,e){return this._computeLayoutRadius()*t*((0,m.Z)(e)?1:e)+this._centerOffset}computeDatumRadius(t,e){return this._computeLayoutRadius()*this.getRadius(e)+this._centerOffset}_compareSpec(t,e,i){i=null!=i?i:{data:!0};let s=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];s.forEach(t=>{i[t]=!0});let r=super._compareSpec(t,e,i);return t=null!=t?t:{},s.some(i=>t[i]!==e[i])&&(r.reRender=!0,r.change=!0),r}computeDatumInnerRadius(t,e){return this._computeLayoutRadius()*this.getInnerRadius(e)+this._centerOffset}dataToPosition(t,e){let i=t[a.yz];if((0,m.Z)(i)||e&&!this.isDatumInViewData(t))return null;let s=this.computeDatumRadius(t),n=this.computeCenter(t);return(0,r.op)(n,s,i)}initAnimation(){var t,e,i;let s={growFrom:(t,e,i)=>{var s;if(i===C.h.appear)return this._startAngle;if(i===C.h.disappear)return this._endAngle;let r=[C.h.disappear,C.h.exit],n=e.mark.elements,a=null==t?void 0:t[l.vM];if(void 0===n.find(t=>{var e;return(null===(e=t.data[0])||void 0===e?void 0:e[l.vM])<a}))return this._startAngle;if(void 0===n.find(t=>{var e;return(null===(e=t.data[0])||void 0===e?void 0:e[l.vM])>a}))return this._endAngle;let o=[...n].reverse().find(t=>{var e;return(null===(e=t.data[0])||void 0===e?void 0:e[l.vM])<a});return r.includes(i)?null===(s=null==o?void 0:o.getNextGraphicAttributes())||void 0===s?void 0:s.endAngle:null==o?void 0:o.getGraphicAttribute("endAngle",!0)}},n=null===(t=this._spec.animationAppear)||void 0===t?void 0:t.preset;if(this._pieMark){let t=(0,F._8)(null===(e=M.F.getAnimationInKey("pie"))||void 0===e?void 0:e(s,n),(0,F.hT)("pie",this._spec,this._markAttributeContext));t.normal&&t.normal.type&&(t.normal=function(t,e){var i,s,n,o;let l=null!==(s=null===(i=e.options)||void 0===i?void 0:i.distance)&&void 0!==s?s:10,h=(0,H.Z)(e.duration)?e.duration/2:1e3,d=null!==(n=e.options.easing)&&void 0!==n?n:"cubicOut";return{oneByOne:e.oneByOne,loop:null!==(o=e.loop)&&void 0!==o&&o,timeSlices:[{duration:h,effects:{easing:d,channel:{x:{from:e=>t.getAttribute("x",e),to:e=>t.getAttribute("x",e)+(0,r.op)({x:0,y:0},l,e[a.yz]).x},y:{from:e=>t.getAttribute("y",e),to:e=>t.getAttribute("y",e)+(0,r.op)({x:0,y:0},l,e[a.yz]).y}}}},{duration:h,effects:{easing:d,channel:{x:{to:e=>t.getAttribute("x",e),from:e=>t.getAttribute("x",e)+(0,r.op)({x:0,y:0},l,e[a.yz]).x},y:{to:e=>t.getAttribute("y",e),from:e=>t.getAttribute("y",e)+(0,r.op)({x:0,y:0},l,e[a.yz]).y}}}}]}}(this._pieMark,t.normal)),this._pieMark.setAnimationConfig(t)}if(this._emptyArcMark){let t=(0,F._8)(null===(i=M.F.getAnimationInKey("emptyCircle"))||void 0===i?void 0:i(s,null!=n?n:"fadeIn"));this._emptyArcMark.setAnimationConfig(t)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){return e}getActiveMarks(){return[this._pieMark]}}J.transformerConstructor=W,J.mark=V;class Q extends J{constructor(){super(...arguments),this.type=x.A.pie}}Q.type=x.A.pie;let tt=()=>{(0,z.sp)(),D(),Z(),M.F.registerSeries(Q.type,Q)}},4498:function(t,e,i){i.d(e,{fd:()=>r,mh:()=>n});var s=i(5173);function r(t,e,i){let r=t.getScale(0),n="isInverse"in t&&t.isInverse();(0,s.z2)(r.type)?i.sort((t,i)=>(t[e]-i[e])*(n?-1:1)):i.sort((t,i)=>(r.index(t[e])-r.index(i[e]))*(n?-1:1))}function n(t){return{dataIndex:e=>{var i,s;let r="horizontal"===t.direction?t.fieldY[0]:t.fieldX[0],n=null==e?void 0:e[r],a="horizontal"===t.direction?t.scaleY:t.scaleX;return(null!==(s=null===(i=null==a?void 0:a.domain)||void 0===i?void 0:i.call(a))&&void 0!==s?s:[]).indexOf(n)||0},dataCount:()=>{var e,i,s;let r="horizontal"===t.direction?t.scaleY:t.scaleX;return null!==(s=(null!==(i=null===(e=null==r?void 0:r.domain)||void 0===e?void 0:e.call(r))&&void 0!==i?i:[]).length)&&void 0!==s?s:0}}}},341:function(t,e,i){i.d(e,{l:()=>s,s:()=>r});let s="monotone",r="linear"},6962:function(t,e,i){var s,r;i.d(e,{i:()=>s}),(r=s||(s={}))["desktop-browser"]="desktop-browser",r["mobile-browser"]="mobile-browser",r.node="node",r.worker="worker",r.miniApp="miniApp",r.wx="wx",r.tt="tt",r.harmony="harmony",r["desktop-miniApp"]="desktop-miniApp",r.lynx="lynx"},6555:function(t,e,i){i.d(e,{zb:()=>s});function s(t){let e=[];for(let i=0;i<t.length;i++){let s=t[i];0!==i&&s[0]===e[e.length-1]||e.push(s[0]),e.push(s[1])}return e}},9478:function(t,e,i){i.d(e,{Ku:()=>d,Q3:()=>function t(e,i){if("values"in e&&e.values.length){let t=(0,a.Sm)(e.values,i),r=(0,a.Fp)(e.values,s.fB);e.values.forEach(e=>{e[s.Gq]=t,e[s.Iz]=r})}else for(let s in e.nodes)t(e.nodes[s],i)},kL:()=>o,kn:()=>function t(e,i,n,a,o={key:s.eh,start:s.cQ,end:s.Uq,startPercent:s.x0,endPercent:s.fB,max:s.wo,min:s.cL}){let l=a&&(0,r.Z)(o.min),h=a&&(0,r.Z)(o.max);if(e.values.length>0){let t=0,s=0,r=1,a=0,d=null,u=null,c=e.values.length;for(let r=0;r<c;r++){let n=e.values[i?c-1-r:r];(a=n[o.end])>=0?(n[o.start]=t,t+=n[o.end],n[o.end]=t):(n[o.start]=s,s+=n[o.end],n[o.end]=s),n[o.key]=e.key,h&&(delete n[o.max],(!u||n[o.end]>u[o.end])&&(u=n)),l&&(delete n[o.min],(!d||n[o.start]<d[o.start])&&(d=n))}if(h&&u&&(u[o.max]=!0),l&&d&&(d[o.min]=!0),n)for(let n=0;n<c;n++){let l=e.values[i?c-1-n:n],h=(a=l[o.end])>=0?t:s;r=a>=0?1:-1,l[o.startPercent]=0===h?0:Math.min(1,l[o.start]/h)*r,l[o.endPercent]=0===h?0:Math.min(1,l[o.end]/h)*r}}for(let s in e.nodes)t(e.nodes[s],i,n,a,o)},oW:()=>h,tW:()=>l});var s=i(5669),r=i(7623),n=i(6948),a=i(2732);function o(t,e){for(let i=0;i<e.length;i++){let s=e[i],r=function(t,e){return t.find(t=>t.key===e)}(t,s.key);r?r.operations=[...new Set(r.operations.concat(s.operations))]:t.push(s)}return t}function l(t,e){var i;if(!t)return null!=e?e:null;let s=t.getFields();return s&&s[e]?null!==(i=s[e].alias)&&void 0!==i?i:e:null!=e?e:null}function h(t,e,i){let a=t.getStackSort(),o={},l=null;return a&&(l={},t.getSeries().forEach(t=>{let e=t.getSeriesField();if(e){let i=t.getRawDataStatisticsByField(e);i.values&&(l[e]||(l[e]={lastIndex:0,sort:{}}),i.values.forEach((t,i)=>{t in l[e].sort||(l[e].sort[t]=l[e].lastIndex,l[e].lastIndex++)}))}})),t.getSeries().forEach(t=>{var a;let h=t.getStackData(),d=t.getStackValue(),u=t.getStackValueField(),c=!i||i(t);h&&u&&c&&(o[d]=null!==(a=o[d])&&void 0!==a?a:{groupField:h.groupField,nodes:{}},function t(e,i,a,o,l,h,d){var u;if("values"in i){if(l&&i.values.forEach(t=>t[s.Uq]=(0,n.sT)(t[o])),a.series.push({s:e,values:i.values}),h){let t=e.getSeriesField();i.values.forEach(i=>{a.sortDatums.push({series:e,datum:i,index:t?h[t].sort[i[t]]:0})})}else a.values.push(...i.values)}else for(let s in i.nodes){let n=d?`${d}_${s}`:s;a.nodes[s]||(a.nodes[s]={values:[],series:[],nodes:{},sortDatums:[],key:n},(0,r.Z)(null===(u=i.nodes[s])||void 0===u?void 0:u.groupField)&&(a.nodes[s].groupField=i.nodes[s].groupField)),t(e,i.nodes[s],a.nodes[s],o,l,h,n)}}(t,h,o[d],u,e,l))}),a?function t(e,i){var s;for(let r in e)(null===(s=e[r].sortDatums)||void 0===s?void 0:s.length)?(e[r].sortDatums.sort((t,e)=>t.index-e.index),e[r].values=e[r].sortDatums.map(t=>t.datum)):t(e[r].nodes,i);return e}(o,l):o}function d(t){if(!t.values.length)return;let e=t.values[t.values.length-1][s.Uq]/2;for(let i=0;i<t.values.length;i++)t.values[i][s.Jl]=t.values[i][s.cQ]-e,t.values[i][s.AF]=t.values[i][s.Uq]-e}},5205:function(t,e,i){i.d(e,{ZK:()=>n,vU:()=>a});var s=i(9038),r=i(4659);let n=(t,e)=>((0,s.Z)(o.warnHandler)&&o.warnHandler.call(null,t,e),e?r.Y.getInstance().warn(`[VChart warn]: ${t}`,e):r.Y.getInstance().warn(`[VChart warn]: ${t}`)),a=(t,e,i)=>{if(!o.silent){if(!(0,s.Z)(o.errorHandler))throw Error(t);o.errorHandler.call(null,t,e)}},o={silent:!1,warnHandler:!1,errorHandler:!1}},7631:function(t,e,i){i.d(e,{Eh:()=>r,Oy:()=>o,qe:()=>n,wx:()=>a});let s=(0,i(7211).kP)(),r=s&&globalThis?globalThis.document:void 0;function n(t){return("desktop-browser"===t||"mobile-browser"===t)&&s}function a(t){return o(t)||"mobile-browser"===t}function o(t){return t.includes("miniApp")||"lynx"===t||"wx"===t||"harmony"===t}},9013:function(t,e,i){i.d(e,{a:()=>r});let s=0;function r(){return s>=9999999&&(s=0),s++}},2732:function(t,e,i){i.d(e,{CA:()=>b,VV:()=>f,Fp:()=>v,TE:()=>w,C2:()=>S,kq:()=>g,Y8:()=>y,cX:()=>k,Sm:()=>_,VC:()=>A,hA:()=>p,h1:()=>T,Nl:()=>m,IN:()=>x});var s=i(8378),r=i(6082);function n(t,e,i,s){let n,a,o=-1;t.forEach(t=>{n=e(t),a=i(t),!(0,r.Z)(n)&&(n=+n)>=n&&!(0,r.Z)(a)&&(a=+a)>=a&&s(n,a,++o)})}var a=i(5859),o=i(7623),l=i(4546),h=i(2442),d=i(9896);let u=(t,e)=>{let i=t;return!0!==e&&(i=t.sort(h.j)),function(t,e,i=d.H){let s=t.length;if(!s)return;if(s<2)return i(t[0],0,t);let r=(s-1)*e,n=Math.floor(r),a=i(t[n],n,t);return a+(i(t[n+1],n+1,t)-a)*(r-n)}(i,.5)};var c=i(2683);let p=a.Yt;function g(t,e){let i=0,s=2*Math.PI,r=(0,o.Z)(t),n=(0,o.Z)(e);for(r||n?n?(i=r?t:e-2*Math.PI,s=e):(i=t,s=t+2*Math.PI):(i=0,s=2*Math.PI);s<=i;)s+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI,s-=2*Math.PI;for(;s<0;)i+=2*Math.PI,s+=2*Math.PI;return{startAngle:i,endAngle:s}}function m(t,e,i){return t.x1>e||t.x2<e||t.y1>i||t.y2<i}function f(t,e){let i=[];return t.forEach(t=>{let r=+t[e];(0,s.Z)(r)&&i.push(r)}),0===i.length?null:(0,l.iH)(i)}function v(t,e){let i=[];return t.forEach(t=>{let r=+t[e];(0,s.Z)(r)&&i.push(r)}),0===i.length?null:(0,l.CE)(i)}function _(t,e){return t.reduce((t,i)=>{let r=e?+i[e]:+i;return(0,s.Z)(r)&&(t+=r),t},0)}function y(t,e){let i=0,r=0;return t.forEach(t=>{let n=e?+t[e]:+t;(0,s.Z)(n)&&(i+=n,r++)}),i/r}function b(t,e){let i=y(t,e);return t.length<=1?0:t.reduce((t,s)=>t+(e?+s[e]:+s-i)**2,0)/(t.length-1)}function x(t,e){return Math.sqrt(b(t,e))}function S(t,e){return u(t.map(t=>t[e]))}function A(t,e,i){let{predict:s}=function(t,e=t=>t.x,i=t=>t.y){var s;let r,a,o=0,l=0,h=0,d=0,u=0;n(t,e,i,(t,e)=>{++u,o+=(t-o)/u,l+=(e-l)/u,h+=(t*e-h)/u,d+=(t*t-d)/u});let c=function(t,e,i,s){let r=s-t*t,n=1e-24>Math.abs(r)?0:(i-t*e)/r;return[e-n*t,n]}(o,l,h,d),p=t=>c[0]+c[1]*t;return{coef:c,predict:p,rSquared:(s=l,r=0,a=0,n(t,e,i,(t,e)=>{let i=e-p(t),n=e-s;r+=i*i,a+=n*n}),1-r/a)}}(t,t=>t[e],t=>t[i]),r=f(t,e),a=v(t,e),o=s(r),l=s(a);return[{[e]:r,[i]:o},{[e]:a,[i]:l}]}function k(t,e){let i=w(t),s=w(e),r=Math.asin((t.x*e.y-e.x*t.y)/i/s),n=Math.acos((t.x*e.x+t.y*e.y)/i/s);return r<0?-n:n}function w(t,e={x:0,y:0}){return c.HL.distancePP(t,e)}function T(t,e=2){let i=t.reduce((t,e)=>t+(isNaN(e)?0:e),0);if(0===i)return 0;let s=Math.pow(10,e),r=t.map(t=>(isNaN(t)?0:t)/i*s*100),n=100*s,a=r.map(t=>Math.floor(t)),o=a.reduce((t,e)=>t+e,0),l=r.map((t,e)=>t-a[e]);for(;o<n;){let t=Number.NEGATIVE_INFINITY,e=null;for(let i=0;i<l.length;i++)l[i]>t&&(t=l[i],e=i);++a[e],l[e]=0,++o}return a.map(t=>t/s)}},9114:function(t,e,i){i.d(e,{Sr:()=>a,gU:()=>n,xV:()=>r});var s=i(9038);function r(t,e,i){let r=!1;if(e&&(0,s.Z)(e)){for(let s of t)for(let t of s.getSeries(i))if(r=!!e.call(null,t))return r}return r}function n(t,e){let i=[];for(let s of t)for(let t of s.getSeries(e))i.push(t);return i}let a=(t,e)=>{for(let i=0;i<t.length;i++){let s=t[i].getSeries();for(let t=0;t<s.length;t++){let i=s[t];if(e&&i&&i.coordinate===e||!e&&i)return i}}return null}},8118:function(t,e,i){i.d(e,{Ol:()=>_,My:()=>y,Mo:()=>f,lD:()=>v});var s=i(9904),r=i(7623),n=i(6132),a=i(1287),o=i(5173);class l extends a.j{constructor(t){super(!1),this.type=o._f.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}var h=i(8028),d=i(6082),u=i(8378),c=i(8986);class p{constructor(){this.type=o._f.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}scale(t){return!(0,d.Z)(t)&&(0,u.Z)(+t)?this._range[(0,c.b4)(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){let e=this._range.indexOf(t);return[this._domain[e-1],this._domain[e]]}domain(t){return t?(this._domain=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(t){return t?(this._range=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return(new p).domain(this._domain).range(this._range).unknown(this._unknown)}}var g=i(2193);let m={linear:n.f,band:a.j,point:l,ordinal:h.J,threshold:p,colorOrdinal:g.m};function f(t){let e=m[t];return e?new e:null}function v(t,e){var i,r;if("scale"in t&&t.scale)return(0,s.Z)(t.scale)&&(null==e?void 0:e.globalScale)?e.globalScale.registerMarkAttributeScale(t,e.seriesId):t.scale;let n=f(t.type);return n&&(i=n,r=t,i&&r&&(r.domain&&i.domain(r.domain),r.range&&i.range(r.range),r.specified&&i.specified&&i.specified(r.specified),r.clamp&&i.clamp&&i.clamp(r.clamp))),n}function _(t,e,i){if(!e)return t;let s=e.range(),r=i&&e._calculateWholeRange?e._calculateWholeRange(s):e.range();return Math.min(Math.max(Math.min(r[0],r[r.length-1]),t),Math.max(r[0],r[r.length-1]))}function y(t){return(0,r.Z)(null==t?void 0:t.field)&&(0,r.Z)(null==t?void 0:t.scale)}},1960:function(t,e,i){i.d(e,{Ek:()=>m,G$:()=>f,Mv:()=>c,hU:()=>u,qY:()=>p,qt:()=>g,uj:()=>v,vk:()=>d});var s=i(7636),r=i(9904),n=i(6948),a=i(4154),o=i(1601),l=i(9038),h=i(6082);function d(t){switch(t){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function u(t){return!!(0,r.Z)(t)&&!!t.endsWith("%")&&(0,n.hi)(t.substring(0,t.length-1))}function c(t,e,i,s=0){var r,n;return(0,o.Z)(t)?t:u(t)?Number(t.substring(0,t.length-1))*e/100:(0,l.Z)(t)?t(i):(0,a.Z)(t)?e*(null!==(r=t.percent)&&void 0!==r?r:0)+(null!==(n=t.offset)&&void 0!==n?n:0):s}function p(t,e,i){var s,r,n,a;let l={top:0,bottom:0,left:0,right:0};return Object.values(t).every(t=>(0,o.Z)(t))?(l.top=null!==(s=t.top)&&void 0!==s?s:0,l.right=null!==(r=t.right)&&void 0!==r?r:0,l.bottom=null!==(n=t.bottom)&&void 0!==n?n:0,l.left=null!==(a=t.left)&&void 0!==a?a:0):[{orients:["left","right"],size:e.width},{orients:["top","bottom"],size:e.height}].forEach(e=>{e.orients.forEach(s=>{l[s]=c(t[s],e.size,i)})}),l}function g(t,e){return t?{width:Math.ceil(Math.min(t.x2-t.x1,e.width)),height:Math.ceil(Math.min(t.y2-t.y1,e.height))}:{width:0,height:0}}function m(t){let e={};return(0,s.Z)(t)?((0,h.Z)(t[0])||(e.top=e.left=e.bottom=e.right=t[0]),(0,h.Z)(t[1])||(e.left=e.right=t[1]),(0,h.Z)(t[2])||(e.bottom=t[2]),(0,h.Z)(t[3])||(e.left=t[3]),e):(0,o.Z)(t)||u(t)||(0,l.Z)(t)||(0,a.Z)(t)&&("percent"in t||"offset"in t)?(e.top=e.left=e.bottom=e.right=t,e):(0,a.Z)(t)?e=Object.assign({},t):e}function f(t,e,i){return i?{x:t.x+e.x,y:t.y+e.y}:t}let v=(t,e)=>{let i=Number(t),s=t.toString();return isNaN(i)&&"%"===s[s.length-1]?e*(Number(s.slice(0,s.length-1))/100):i}},123:function(t,e,i){i.d(e,{Wi:()=>l,Zv:()=>o,h_:()=>d,ko:()=>h,ro:()=>a});var s=i(9038),r=i(1121),n=i(1805);function a(t={}){let e=Object.assign({},t);if((0,s.Z)(t.style)?e.style=(e,i,s,r)=>d(t.style(e,i,s,r)):(0,r.Z)(t.style)||(e.style=d(t.style)),!(0,r.Z)(t.state)){let i={};Object.keys(t.state).forEach(e=>{(0,s.Z)(t.state[e])?i[e]=(i,s,r,n)=>d(t.state[e](i,s,r,n)):(0,r.Z)(t.state[e])||(i[e]=d(t.state[e]))}),e.state=i}return e}function o(t){if((0,r.Z)(t))return null;let e={};return Object.keys(t).forEach(i=>{(0,s.Z)(t[i])?e[i]=(e,s,r,n)=>d(t[i](e,s,r,n)):(0,r.Z)(t[i])||(e[i]=d(t[i]))}),e}function l(t){if((0,r.Z)(t))return null;let e={};return Object.keys(t).forEach(i=>{(0,s.Z)(t[i])?e[i]=(e,s,r,n)=>d(t[i](e.rawValue,s,e,r,n)):(0,r.Z)(t[i])||(e[i]=d(t[i]))}),e}function h(t,e){if((0,r.Z)(t))return null;let i={};return Object.keys(t).forEach(r=>{(0,s.Z)(t[r])?i[r]=t[r](e):i[r]=t[r]}),d(i)}function d(t){return(null==t?void 0:t.angle)&&(t.angle=(0,n.M4)(t.angle)),t}},6948:function(t,e,i){i.d(e,{S5:()=>h,hi:()=>o,sT:()=>l});var s=i(1601),r=i(8378),n=i(6082),a=i(7636);function o(t){return null!=t&&""!==t&&(!!(0,s.Z)(t)||+t==+t)}function l(t){if((0,r.Z)(t))return t;let e=+t;return(0,r.Z)(e)?e:0}function h(t){return!(!t||0===t.length)&&!(0,n.Z)(t[0])&&!(0,n.Z)(t[0].dataId)&&(0,a.Z)(t[0].fields)}},2449:function(t,e,i){i.d(e,{q:()=>o});var s=i(1312),r=i.n(s),n=i(4659),a=i(5375);class o{constructor(t){var e;let i;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new(r()),i=(null==t?void 0:t.name)?t.name:(0,a.F)("dataset"),this.name=i,this._logger=null!==(e=null==t?void 0:t.logger)&&void 0!==e?e:n.Y.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,e){var i;this.dataViewMap[t]&&(null===(i=this._logger)||void 0===i||i.error(`Error: dataView ${t} 之前已存在，请重新命名`)),this.dataViewMap[t]=e}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,e){var i;this.parserMap[t]&&(null===(i=this._logger)||void 0===i||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.parserMap[t]=e}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,e){var i;this.transformMap[t]&&(null===(i=this._logger)||void 0===i||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.transformMap[t]=e}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,e,i){this._callMap||(this._callMap=new Map);let s=this._callMap.get(i);s||(s=()=>{t.some(t=>t.isRunning)||i()}),t.forEach(t=>{t.target.addListener(e,s)}),this._callMap.set(i,s)}allDataViewAddListener(t,e){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,e)}multipleDataViewRemoveListener(t,e,i){if(this._callMap){let s=this._callMap.get(i);s&&t.forEach(t=>{t.target.removeListener(e,s)}),this._callMap.delete(i)}}multipleDataViewUpdateInParse(t){t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.markRunning()}),t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.parseNewData(t.data,t.options)})}multipleDataViewUpdateInRawData(t){t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.markRunning()}),t.forEach(t=>{var e;return null===(e=this.getDataView(t.name))||void 0===e?void 0:e.updateRawData(t.data,t.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}},6338:function(t,e,i){i.d(e,{VO:()=>u});var s=i(1312),r=i.n(s),n=i(645),a=i(325),o=i(6082),l=i(5375),h=i(6680);let d="_data-view-diff-rank";class u{constructor(t,e){let i;this.dataSet=t,this.options=e,this.isDataView=!0,this.target=new(r()),this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(t={pushHistory:!0,emitMessage:!0})=>(this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(e=>{this.executeTransform(e,{pushHistory:t.pushHistory,emitMessage:!1}),this.isLastTransform(e)&&this.diffLastData()}),this.isRunning=!1,!1!==t.emitMessage&&this.target.emit("change",[]),this),this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},i=(null==e?void 0:e.name)?e.name:(0,l.F)("dataview"),this.name=i,(null==e?void 0:e.history)&&(this.history=e.history,this.historyData=[]),this.dataSet.setDataView(i,this),this.setFields(null==e?void 0:e.fields)}parse(t,e,i=!1){var s;this.isRunning=!0,i&&this.target.emit("beforeParse",[]),e&&(this.parseOption=e);let r=this.cloneParseData(t,e);if(null==e?void 0:e.type){let t=(null!==(s=this.dataSet.getParser(e.type))&&void 0!==s?s:this.dataSet.getParser("bytejson"))(r,e.options,this);this.rawData=r,this.parserData=t,this.history&&this.historyData.push(r,t),this.latestData=t}else this.parserData=r,this.rawData=r,this.history&&this.historyData.push(r),this.latestData=r;return this.isRunning=!1,i&&this.target.emit("afterParse",[]),this}transform(t,e=!0){if(this.isRunning=!0,t&&t.type){let i=!0;if("fields"===t.type){this._fields=t.options.fields;let e=this.transformsArr.findIndex(e=>e.type===t.type);e>=0&&(i=!1,this.transformsArr[e].options.fields=this._fields)}if(i&&this.transformsArr.push(t),e){let e=this.isLastTransform(t);this.executeTransform(t),e&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}isLastTransform(t){return this.transformsArr[this.transformsArr.length-1]===t}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((t,e)=>{var i,s;return(null!==(i=t.level)&&void 0!==i?i:0)-(null!==(s=e.level)&&void 0!==s?s:0)})}executeTransform(t,e={pushHistory:!0,emitMessage:!0}){let{pushHistory:i,emitMessage:s}=e,r=this.dataSet.getTransform(t.type)(this.latestData,t.options);this.history&&!1!==i&&this.historyData.push(r),this.latestData=r,!1!==s&&this.target.emit("change",[])}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}enableDiff(t){this._diffData=!0,this._diffKeys=t,this._diffMap=new Map,this._diffRank=0}disableDiff(){this._diffData=!1,this._diffMap=null,this._diffRank=null}resetDiff(){this._diffMap=new Map,this._diffRank=0}diffLastData(){var t;if(!this._diffData||!this.latestData.forEach||!(null===(t=this._diffKeys)||void 0===t?void 0:t.length))return;let e=this._diffRank+1;if(0===this._diffRank)this.latestData.forEach(t=>{t[d]=e,this._diffMap.set(this._diffKeys.reduce((e,i)=>e+t[i],""),t)}),this.latestDataAUD={add:Array.from(this.latestData),del:[],update:[]};else{let t;this.latestDataAUD={add:[],del:[],update:[]},this.latestData.forEach(i=>{i[d]=e,t=this._diffKeys.reduce((t,e)=>t+i[e],""),this._diffMap.get(t)?this.latestDataAUD.update.push(i):this.latestDataAUD.add.push(i),this._diffMap.set(t,i)}),this._diffMap.forEach((t,i)=>{t[d]<e&&(this.latestDataAUD.del.push(t),this._diffMap.delete(i))})}this._diffRank=e}cloneParseData(t,e){let i=!1;return t instanceof u||!0!==(null==e?void 0:e.clone)||(i=!0),i?(0,n.Z)(t):t}parseNewData(t,e){this.parse(t,e||this.parseOption),this.reRunAllTransform()}updateRawData(t,e){let i=this.cloneParseData(t,e);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:"dataview"===(null===(t=this.parseOption)||void 0===t?void 0:t.type)&&1===this.rawData.length&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,e=!1){this._fields=t&&e?(0,a.Z)({},this._fields,t):t;let i=this.transformsArr.find(t=>"fields"===t.type);!(0,o.Z)(this._fields)&&(0,o.Z)(i)?(this.dataSet.registerTransform("fields",h.X),this.transform({type:"fields",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}},5795:function(t,e,i){i.d(e,{i:()=>n});var s=i(1036),r=i(7636);let n=(t,e,i)=>{let n=!(0,s.Z)(null==e?void 0:e.dependencyUpdate)||(null==e?void 0:e.dependencyUpdate);if(!t||!(0,r.Z)(t))throw TypeError("Invalid data: must be DataView array!");return(0,r.Z)(i.rawData)&&i.rawData.forEach(t=>{t.target&&(t.target.removeListener("change",i.reRunAllTransform),t.target.removeListener("markRunning",i.markRunning))}),n&&t.forEach(t=>{t.target.addListener("change",i.reRunAllTransform),t.target.addListener("markRunning",i.markRunning)}),t}},5375:function(t,e,i){i.d(e,{F:()=>r});let s=0;function r(t="dataset"){return s>1e8&&(s=0),t+"_"+s++}},1996:function(t,e,i){i.d(e,{uy:()=>J,T_:()=>K});var s=i(325),r=i(9904),n=i(6082),a=i(1121),o=i(5859),l=i(1130),h=i(8378),d=i(4546),u=i(9038),c=i(7623),p=i(3215),g=i(7773),m=i(7578),f=i(114),v=i(7449),_=i(645),y=i(8103),b=i(3e3),x=i(8144),S=i(9167),A=i(1670),k=i(1833),w=i(7078),T=i(7413),C=i(3151);class M extends b.k{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=(0,C.fM)(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=(0,C.lO)(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=(0,C.Q6)(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){let e=(0,_.Z)(this.attribute);(0,s.Z)(this.attribute,t);let i=m.i.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=e,i.AABBBounds}render(){this._prevInnerView=this._innerView&&(0,T.uX)(this._innerView),this.removeAllChild(!0),this._innerView=m.i.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}_bindEvent(){if(this.attribute.disableTriggerEvent)return;let{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){let{title:e,label:i,tick:s,line:r,items:n}=this.attribute,a=m.i.group({x:0,y:0,zIndex:1,pickable:!1});if(a.name=A.X9.axisContainer,a.id=this._getNodeId("container"),a.setMode(this.mode),this.axisContainer=a,t.add(a),r&&r.visible&&this.renderLine(a),n&&n.length&&(this.data=this._transformItems(n[0]),s&&s.visible&&this.renderTicks(a),i&&i.visible)){let t=m.i.group({x:0,y:0,pickable:!1});t.name=A.X9.labelContainer,t.id=this._getNodeId("label-container"),this.axisLabelsContainer=t,a.add(t),n.forEach((e,i)=>{let s=this.renderLabels(t,e,i),r=s.getChildren();this.beforeLabelsOverlap(r,e,s,i,n.length),this.handleLabelsOverlap(r,e,s,i,n.length),this.afterLabelsOverlap(r,e,s,i,n.length);let a=0,o=0,l="center",h="middle",d=0;r.forEach((t,e)=>{var i;let s=t.attribute,r=null!==(i=s.angle)&&void 0!==i?i:0,n=t.AABBBounds,u=n.width(),c=n.height();r&&(u=Math.abs(u*Math.cos(r)),c=Math.abs(c*Math.sin(r))),a=Math.max(a,u),o=Math.max(o,c),l=s.textAlign,h=s.textBaseline,0===e&&(d=s.x)}),this.axisLabelLayerSize[i]={width:a,height:o,labelPos:d,textAlign:l,textBaseline:h}})}e&&e.visible&&this.renderTitle(a)}renderTicks(t){let e=this.getTickLineItems(),i=m.i.group({x:0,y:0,pickable:!1});i.name=A.X9.tickContainer,i.id=this._getNodeId("tick-container"),t.add(i),e.forEach((t,r)=>{var n;let o=m.i.line(Object.assign({},this._getTickLineAttribute("tick",t,r,e)));if(o.name=A.X9.tick,o.id=this._getNodeId(t.id),(0,a.Z)(null===(n=this.attribute.tick)||void 0===n?void 0:n.state))o.states=S.n0;else{let t=this.data[r],e=(0,s.Z)({},S.n0,this.attribute.tick.state);Object.keys(e).forEach(i=>{(0,u.Z)(e[i])&&(e[i]=e[i](t.rawValue,r,t,this.data))}),o.states=e}i.add(o)}),this.tickLineItems=e;let{subTick:r}=this.attribute;if(r&&r.visible){let t=this.getSubTickLineItems();t.length&&t.forEach((t,n)=>{let o=m.i.line(Object.assign({},this._getTickLineAttribute("subTick",t,n,e)));if(o.name=A.X9.subTick,o.id=this._getNodeId(`${n}`),(0,a.Z)(r.state))o.states=S.n0;else{let i=(0,s.Z)({},S.n0,r.state);Object.keys(i).forEach(s=>{(0,u.Z)(i[s])&&(i[s]=i[s](t.value,n,t,e))}),o.states=i}i.add(o)}),this.subTickLineItems=t}}renderLabels(t,e,i){let{dataFilter:r}=this.attribute.label;r&&(0,u.Z)(r)&&(e=r(e,i));let n=this._transformItems(e),o=m.i.group({x:0,y:0,pickable:!1});return o.name=`${A.X9.labelContainer}-layer-${i}`,o.id=this._getNodeId(`label-container-layer-${i}`),t.add(o),n.forEach((t,e)=>{var r;let l=this._getLabelAttribute(t,e,n,i),h=(0,x.vS)(l);if(h.name=A.X9.label,h.id=this._getNodeId(`layer${i}-label-${t.id}`),(0,a.Z)(null===(r=this.attribute.label)||void 0===r?void 0:r.state))h.states=S.n0;else{let r=(0,s.Z)({},S.n0,this.attribute.label.state);Object.keys(r).forEach(s=>{(0,u.Z)(r[s])&&(r[s]=r[s](t,e,n,i))}),h.states=r}h.data=Object.assign(Object.assign({},t),{index:e,layer:i}),o.add(h)}),o}renderTitle(t){let e=this.getTitleAttribute(),i=new w.V(Object.assign({},e));i.name=A.X9.title,i.id=this._getNodeId("title"),t.add(i)}getVerticalCoord(t,e,i){return(0,T.cN)(t,this.getVerticalVector(e,i,t))}getTickLineItems(){let{tick:t}=this.attribute,e=this.data,i=[],{alignWithLabel:s,inside:r=!1,length:n,dataFilter:a}=t,o=1;return e.length>=2&&(o=e[1].value-e[0].value),(a&&(0,u.Z)(a)?a(e):e).forEach(t=>{let e=t.point,a=t.value;if(!s){let i=t.value-o/2;if(this.isInValidValue(i))return;e=this.getTickCoord(i),a=i}let l=this.getVerticalCoord(e,n,r);if("3d"===this.mode){let s=this.getVerticalVector(n,r,e),o=0,h=0;(0,y.Wn)(s[0])>(0,y.Wn)(s[1])?o=y.pi/2*(l.x>e.x?1:-1):h=y.pi/2*(l.y>e.y?-1:1),i.push({start:e,end:l,value:a,id:`tick-${t.id}`,anchor:[e.x,e.y],alpha:o,beta:h})}else i.push({start:e,end:l,value:a,id:`tick-${t.id}`})}),i}getSubTickLineItems(){let{subTick:t}=this.attribute,e=[],{count:i=4,inside:s=!1,length:r=2}=t,n=this.tickLineItems,a=n.length;if(a>=2)for(let t=0;t<a-1;t++){let a=n[t],o=n[t+1];for(let t=0;t<i;t++){let n=(t+1)/(i+1),l=(1-n)*a.value+n*o.value,h=this.getTickCoord(l),d=this.getVerticalCoord(h,r,s);e.push({start:h,end:d,value:l,id:`sub-tick-${l}`})}}return e}_getTickLineAttribute(t,e,i,r){let n=(0,l.Z)(this.attribute,`${t}.style`),a=this.data[i];n=(0,u.Z)(n)?(0,s.Z)({},(0,l.Z)(k.p,`${t}.style`),"tick"===t?n(a.rawValue,i,a,this.data):n(e.value,i,e,r)):n;let{start:o,end:h,anchor:d,alpha:c,beta:p}=e;return Object.assign({points:[o,h],anchor:d,alpha:c,beta:p},n)}_getLabelAttribute(t,e,i,r){var n,a;let{space:o=4,inside:h=!1,formatMethod:d,type:c="text",text:p}=this.attribute.label,g=o,m=0;(null===(n=this.attribute.tick)||void 0===n?void 0:n.visible)&&this.attribute.tick.inside===h&&(m=this.attribute.tick.length||4),(null===(a=this.attribute.subTick)||void 0===a?void 0:a.visible)&&this.attribute.subTick.inside===h&&(m=Math.max(m,this.attribute.subTick.length||2)),g+=m;let f=this.getRelativeVector(t.point);r>0&&(0===f[1]?g+=(this.axisLabelLayerSize[r-1].height+(0,l.Z)(this.attribute,"label.space",4))*r:g+=(this.axisLabelLayerSize[r-1].width+(0,l.Z)(this.attribute,"label.space",4))*r);let v=this.getVerticalCoord(t.point,g,h),_=this.getVerticalVector(g||1,h,v),y=d?d(`${t.label}`,t,e,i,r):t.label,{style:b}=this.attribute.label;b=(0,u.Z)(b)?(0,s.Z)({},k.p.label.style,b(t,e,i,r)):b;let x=this.getLabelAlign(_,h,b.angle);return b=(0,s.Z)(x,b),(0,u.Z)(b.text)&&(b.text=b.text({label:t.label,value:t.rawValue,index:t.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(v,_,y,b)),{text:null!=p?p:y,_originText:t.label,lineHeight:null==b?void 0:b.fontSize,type:c}),b)}getLabelPosition(t,e,i,s){return t}_transformItems(t){let e=[];return t.forEach(t=>{var i;e.push(Object.assign(Object.assign({},t),{point:this.getTickCoord(t.value),id:null!==(i=t.id)&&void 0!==i?i:t.label}))}),e}release(){super.release(),this._prevInnerView=null,this._innerView=null}}let E={parity:function(t){return t.filter((t,e)=>e%2?t.setAttribute("opacity",0):1)},greedy:function(t,e){let i;return t.filter((t,s)=>s&&(0,T.qw)(i,t,e)?t.setAttribute("opacity",0):(i=t,1))}};function B(t){let e;return(e=t.OBBBounds.empty()?t.AABBBounds:t.OBBBounds).width()>1&&e.height()>1}function O(t,e,i,s,r=!1){if(i&&!t.attribute.opacity){let i=e.length;if(i>1){t.setAttribute("opacity",1);for(let t=0;t<i;t++){let n=r?e[i-1-t]:e[t];if(!s(n))break;n.setAttribute("opacity",0)}}}}var I=i(1805),R=i(5198);function P(t=0){if(t<0)for(;t<0;)t+=2*Math.PI;if(t>0)for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function L(t,e=0){let i,s=["center","left","left","left","center","right","right","right","left"],r=["top","top","middle","bottom","bottom","bottom","middle","top","top"];"top"===t&&(s=["center","right","right","right","center","left","left","left","right"],r=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);let n=(e=P(e))/(.5*Math.PI);return{textAlign:s[i=n===Math.floor(n)?2*Math.floor(n):2*Math.floor(n)+1],textBaseline:r[i]}}function D(t,e=0){let i,s=["right","right","center","left","left","left","center","right","right"],r=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];"right"===t&&(s=["left","left","center","right","right","right","center","left","left"],r=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);let n=(e=P(e))/(.5*Math.PI);return{textAlign:s[i=n===Math.floor(n)?2*Math.floor(n):2*Math.floor(n)+1],textBaseline:r[i]}}var Z=i(4154);function F(t,e,i){let s;return(0,h.Z)(e)&&(s=Math.abs(e-t)),(0,h.Z)(i)&&(s=(0,h.Z)(s)?Math.min(Math.abs(t-i),s):Math.abs(t-i)),s}var j=i(3924),H=i(7192),z=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};(0,H.Vu)();class N extends M{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,s.Z)({},N.defaultAttributes,t),e)}_renderInner(t){var e;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){let t=[];for(let e=0;e<this.attribute.breaks.length;e++){let{range:i,breakSymbol:s,rawRange:r}=this.attribute.breaks[e];t.push({startPoint:this.getTickCoord(i[0]),endPoint:this.getTickCoord(i[1]),range:i,breakSymbol:s,rawRange:r})}this._breaks=t}super._renderInner(t),this._breaks&&this._breaks.length&&this._breaks.forEach((e,i)=>{let{startPoint:s,endPoint:r,breakSymbol:n,rawRange:a}=e;if(!1!==(null==n?void 0:n.visible)){let e=m.i.group({zIndex:A.bz});e.name=A.X9.axisBreak,e.id=this._getNodeId(`${A.X9.axisBreak}-${i}`),e.data=a;let o=(0,T.uf)(n),l=m.i.symbol(Object.assign({x:s.x,y:s.y},o));l.name=A.X9.axisBreakSymbol;let h=m.i.symbol(Object.assign({x:r.x,y:r.y},o));h.name=A.X9.axisBreakSymbol,e.add(l),e.add(h),t.add(e)}});let{panel:i}=this.attribute;if(i&&i.visible){let t=this.axisContainer,r=t.AABBBounds,n=m.i.rect(Object.assign({x:r.x1,y:r.y1,width:r.width(),height:r.height()},i.style));n.name=A.X9.background,n.id=this._getNodeId("background"),n.states=(0,s.Z)({},A.n0,null!==(e=i.state)&&void 0!==e?e:{}),t.insertBefore(n,t.firstChild)}}renderLine(t){let{start:e,end:i,line:r}=this.attribute,{startSymbol:n,endSymbol:o,style:l,state:h}=r,d=Object.assign({startSymbol:n,endSymbol:o,lineStyle:l},z(r,["startSymbol","endSymbol","style","state"]));if(this._breaks&&this._breaks.length){let t=[],s=e;this._breaks.forEach(e=>{let{startPoint:i,endPoint:r}=e;t.push([s,i]),s=r}),t.push([s,i]),d.points=t,d.multiSegment=!0}else d.points=[e,i];(0,a.Z)(h)||(d.state={line:(0,s.Z)({},A.n0,h),symbol:(0,s.Z)({},A.n0,h)});let u=new f.X(d);u.name=A.X9.line,u.id=this._getNodeId("line"),t.add(u)}getTextAlign(t){let e="center";return(0,o.Yt)(t[0],0)?(0,o.Yt)(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTitleAttribute(){var t,e,i;let r=this.attribute.title,{position:a="middle",space:o=4,textStyle:d={},autoRotate:u=!0,shape:c,background:p,state:g={},maxWidth:m}=r,f=z(r,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]),_=.5;"start"===a?_=0:"end"===a&&(_=1);let{verticalFactor:y=1}=this.attribute,b=this.getTickCoord(_),x=this.getRelativeVector(),S=0;if((null===(t=this.attribute.label)||void 0===t?void 0:t.visible)&&!1===this.attribute.label.inside){let t=+(0,l.Z)(this.attribute,"label.space",4);S+=t;let e=Object.keys(this.axisLabelLayerSize).length;if(0===x[1]){let i=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(i)?S+=i+(e-1)*t:S=0}else if(0===x[0]){if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){let i=this.axisLabelLayerSize[0].labelPos,s=this.axisLabelsContainer.AABBBounds;S+=(1==-1*y?s.x2>i?Math.min(s.x2-i,s.width()):0:s.x1<i?Math.min(i-s.x1,s.width()):0)+(e-1)*t}else S=0}else Object.keys(this.axisLabelLayerSize).forEach((e,i)=>{S+=this.axisLabelLayerSize[e].width+(i>0?t:0)})}let k=0;(null===(e=this.attribute.tick)||void 0===e?void 0:e.visible)&&!1===this.attribute.tick.inside&&(k=this.attribute.tick.length||4),(null===(i=this.attribute.subTick)||void 0===i?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(k=Math.max(k,this.attribute.subTick.length||2));let w=k+S+o,T=this.getVerticalCoord(b,w,!1),C=this.getVerticalVector(w,!1,{x:0,y:0}),M,E,{angle:B}=f;if(M="start"===a?"start":"end"===a?"end":"center",(0,n.Z)(B)&&u){B=(0,v.Dg)(x,[1,0],!0);let{verticalFactor:t=1}=this.attribute;E=1==-1*t?"bottom":"top"}else M=this.getTextAlign(C),E=this.getTextBaseline(C,!1);let O=m;if((0,n.Z)(O)){let{verticalLimitSize:t,verticalMinSize:e,orient:i}=this.attribute,s=Math.min(t||1/0,e||1/0);if((0,h.Z)(s)){if("bottom"===i||"top"===i){if(B!==Math.PI/2){let t=Math.abs(Math.cos(null!=B?B:0));O=t<1e-6?1/0:this.attribute.end.x/t}else O=s-w}else if(B&&0!==B){let t=Math.abs(Math.sin(B));O=t<1e-6?1/0:this.attribute.end.y/t}else O=s-w}}let I=Object.assign(Object.assign(Object.assign({},T),f),{maxWidth:O,textStyle:Object.assign({textAlign:M,textBaseline:E},d),state:{text:(0,s.Z)({},A.n0,g.text),shape:(0,s.Z)({},A.n0,g.shape),panel:(0,s.Z)({},A.n0,g.background)}});return I.angle=B,c&&c.visible&&(I.shape=Object.assign({visible:!0},c.style),c.space&&(I.space=c.space)),p&&p.visible&&(I.panel=Object.assign({visible:!0},p.style)),I}getTextBaseline(t,e){let i="middle",{verticalFactor:s=1}=this.attribute;return(0,o.Yt)(t[1],0)?i=!(0,o.Yt)(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":1==(e?1:-1)*s?"bottom":"top":t[1]>0?i="top":t[1]<0&&(i="bottom"),i}getLabelAlign(t,e,i){let s=this.attribute.orient;if(["top","bottom","right","left"].includes(s)||0===t[0]&&0===t[1]){if("top"===s||"bottom"===s)return L(e?"bottom"===s?"top":"bottom":s,i);if("left"===s||"right"===s)return D(e?"left"===s?"right":"left":s,i)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,i,s,r){var n,a,o,l;let{flush:h=!1}=this.attribute.label||{};if(h&&t.length){let{orient:e,start:i,end:s}=this.attribute,r="bottom"===e||"top"===e,h=t[0],u=(0,d.Z$)(t),c=r?h.attribute.x>u.attribute.x:h.attribute.y<u.attribute.y;if(r){let t=c?u:h,e=c?h:u,r=i.x,o=s.x,l=t.AABBBounds.x1,d=e.AABBBounds.x2;l<r&&(t.attribute.angle?t.setAttributes({dx:(null!==(n=t.attribute.dx)&&void 0!==n?n:0)+r-l}):t.setAttributes({x:r,textAlign:"left"})),d>o&&(e.attribute.angle?e.setAttributes({dx:(null!==(a=e.attribute.dx)&&void 0!==a?a:0)+o-d}):e.setAttributes({x:o,textAlign:"right"}))}else{let t=c?u:h,e=c?h:u,r=t.AABBBounds.y2,n=e.AABBBounds.y1,a=i.y,d=s.y;n<a&&(e.attribute.angle?e.setAttributes({dy:(null!==(o=e.attribute.dy)&&void 0!==o?o:0)+a-n}):e.setAttributes({y:a,textBaseline:"top"})),r>d&&(t.attribute.angle?t.setAttributes({dy:(null!==(l=t.attribute.dy)&&void 0!==l?l:0)+d-r}):t.setAttributes({y:d,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,i,s,r){if((0,a.Z)(t))return;let{verticalLimitSize:o,label:l,orient:c}=this.attribute,p=this._getAxisLabelLimitLength(o,r),{layoutFunc:g,autoRotate:m,autoRotateAngle:f,autoLimit:v,limitEllipsis:_,autoHide:b,autoHideMethod:x,autoHideSeparation:S,lastVisible:A,firstVisible:k,autoWrap:w,overflowLimitLength:C}=l;if((0,u.Z)(g))g(t,e,s,this);else{if(m)!function(t,e){if((0,a.Z)(t))return;let{orient:i,labelRotateAngle:s=[0,45,90]}=e;if(0===s.length||t.some(t=>!!t.attribute.angle))return;let r=0,n=0;for(s&&s.length>0&&(n=s.length);r<n;){var o,l;let e=s[r++];if(t.forEach(t=>{t.attribute.angle=(0,I.M4)(e)}),o=i,l=t,"bottom"!==o&&"top"!==o||function(t,e){e.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},L(t,e.attribute.angle)),{angle:P(e.attribute.angle)}))})}(o,l),"left"!==o&&"right"!==o||function(t,e){e.forEach((e,i)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},D(t,e.attribute.angle)),{angle:P(e.attribute.angle)}))})}(o,l),(0,R.PY)(l),!function(t){for(let e=1;e<t.length;e++)if((0,R.Ph)(t[e-1],t[e]))return!0;return!1}(t))break}}(t,{labelRotateAngle:f,orient:c});else if(w){let e="left"===c||"right"===c?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x);!function(t,e){let{limitLength:i,axisLength:s,ellipsis:r="...",orient:n}=e;if((0,a.Z)(t)||!(0,h.Z)(i))return;let o=t[0].attribute.angle,l=(0,R.nw)(o),d=(0,R.GK)(o),u="top"===n||"bottom"===n,c=s/t.length;t.forEach((e,s)=>{var n,a,o,p,g;if(u){if(d&&Math.floor(e.AABBBounds.height())<=i)return;if(l){let i=F(e.attribute.x,null===(n=t[s+1])||void 0===n?void 0:n.attribute.x,null===(a=t[s-1])||void 0===a?void 0:a.attribute.x);(0,h.Z)(i)&&(c=(0,y.VV)(c,i))}}else{if(d){let i=F(e.attribute.y,null===(o=t[s+1])||void 0===o?void 0:o.attribute.y,null===(p=t[s-1])||void 0===p?void 0:p.attribute.y);(0,h.Z)(i)&&(c=(0,y.VV)(c,i))}if(l&&Math.floor(e.AABBBounds.width())<=i)return}let m=null,f=null;u?d?(m=i,f=c):(m=c,f=i):d?(m=c,f=i):(m=i,f=c),e.setAttributes({maxLineWidth:m,ellipsis:null!==(g=e.attribute.ellipsis)&&void 0!==g?g:r,whiteSpace:"normal",heightLimit:f})})}(t,{orient:c,limitLength:p,axisLength:e,ellipsis:_})}if(!w&&v&&(0,h.Z)(p)&&p>0){let e="left"===c||"right"===c,i=e?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x),s=e?i/t.length:b||m?1/0:i/t.length;!function(t,e){var i;let{limitLength:s,verticalLimitLength:r,ellipsis:o="...",orient:l,axisLength:d}=e;if((0,a.Z)(t)||!(0,h.Z)(s))return;let u=(i=e.overflowLimitLength,(0,h.Z)(i)?{left:i,right:i}:(0,Z.Z)(i)?{left:i.left||0,right:i.right||0}:{left:0,right:0}),c=t[0],p=c.attribute.angle,g=!(0,n.Z)(p),m=g?Math.cos(p):1,f=g?Math.sin(p):0,v=(0,R.nw)(p),_=(0,R.GK)(p),y="top"===l||"bottom"===l,b=c.attribute.direction,x=!v&&!_&&y&&(t.length<2||t.some(t=>Math.abs(t.AABBBounds.width()-c.AABBBounds.width())>=2))&&c.AABBBounds.width()>Math.abs(s/f);t.forEach(t=>{var e;if(y&&(_&&Math.floor(t.AABBBounds.height())<=s||v&&Math.floor(t.AABBBounds.width())<=r)||!y&&("vertical"===b&&Math.floor(t.AABBBounds.height())<=r||"vertical"!==b&&(v&&Math.floor(t.AABBBounds.width())<=s||_&&Math.floor(t.AABBBounds.height())<=r)))return;let i=null;if(v||_)i=y?v?r:s:"vertical"===b||_?r:s;else if(y){let{x1:e,x2:r}=t.AABBBounds,n=f/m,a=Math.abs(s/f);i=x&&n>0&&e<=d+u.right&&s/n+e>d+u.right?Math.min((d-e+u.right)/Math.abs(m),a):x&&n<0&&r>=-u.left&&s/n+r<-u.left?Math.min((r+u.left)/Math.abs(m),a):a}else i=Math.abs(s/m);(0,h.Z)(t.attribute.maxLineWidth)&&(i=(0,h.Z)(i)?Math.min(t.attribute.maxLineWidth,i):t.attribute.maxLineWidth),t.setAttributes({maxLineWidth:i,ellipsis:null!==(e=t.attribute.ellipsis)&&void 0!==e?e:o})})}(t,{limitLength:p,verticalLimitLength:s,ellipsis:_,orient:c,axisLength:i,overflowLimitLength:C})}b&&function(t,e){let i;if((0,a.Z)(t))return;let s=t.filter(B);if((0,a.Z)(s))return;s.forEach(t=>t.setAttribute("opacity",1)),i=s;let{method:r="parity",separation:n=0}=e,o=(0,u.Z)(r)?r:E[r]||E.parity;if(i.length>=3&&(0,T.A9)(i,n)){do i=o(i,n);while(i.length>=3&&(0,T.A9)(i,n));let t=((t,e,i=!0)=>i&&t<3||e)(i.length,e.firstVisible,!1),r=((t,e,i=!0)=>i&&t<3||e)(i.length,e.lastVisible),a=s[0],l=(0,d.Z$)(s);(0,T.qw)(a,l,n)&&t&&r&&(l.setAttribute("opacity",0),r=!1),O(a,i,t,t=>(0,T.qw)(t,a,n)),O(l,i,r,e=>(0,T.qw)(e,l,n)||!(!t||e===a)&&(0,T.qw)(e,a,n),!0)}s.forEach(t=>{t.setAttribute("visible",!!t.attribute.opacity)})}(t,{orient:c,method:x,separation:S,lastVisible:A,firstVisible:k})}}afterLabelsOverlap(t,e,i,s,r){let{verticalLimitSize:n,orient:a}=this.attribute,o="bottom"===a||"top"===a,l=i.AABBBounds,d=o?l.height():l.width(),{verticalMinSize:u}=this.attribute;if((0,h.Z)(u)&&(!(0,h.Z)(n)||u<=n)){let t,e;d=Math.max(d,this._getAxisLabelLimitLength(u,r)),"left"===a?(t=l.x2-d,e=l.y1):"right"===a?(t=l.x1,e=l.y1):"top"===a?(t=l.x1,e=l.y2-d):"bottom"===a&&(t=l.x1,e=l.y1);let s=m.i.rect({x:t,y:e,width:o?l.width():d,height:o?d:l.height(),pickable:!1});s.name=A.X9.axisLabelBackground,s.id=this._getNodeId("axis-label-background"),i.insertBefore(s,i.firstChild)}if((0,c.Z)(this.attribute.label.containerAlign)){var p,g,f;let e;"left"===a?e=l.x2-d:"right"===a?e=l.x1:"top"===a?e=l.y2-d:"bottom"===a&&(e=l.y1),p=e,g=d,f=this.attribute.label.containerAlign,"left"===a||"right"===a?"left"===f?t.forEach(t=>{var e;t.setAttributes({dx:(null!==(e=t.attribute.dx)&&void 0!==e?e:0)+p-t.AABBBounds.x1})}):"right"===f?t.forEach(t=>{var e;t.setAttributes({dx:(null!==(e=t.attribute.dx)&&void 0!==e?e:0)+p+g-t.AABBBounds.x2})}):"center"===f&&t.forEach(t=>{var e;t.setAttributes({dx:(null!==(e=t.attribute.dx)&&void 0!==e?e:0)+p+g/2-(t.AABBBounds.x1+t.AABBBounds.x2)/2})}):"bottom"!==a&&"top"!==a||("top"===f?t.forEach(t=>{var e;t.setAttributes({dy:(null!==(e=t.attribute.dy)&&void 0!==e?e:0)+p-t.AABBBounds.y1})}):"bottom"===f?t.forEach(t=>{var e;t.setAttributes({dy:(null!==(e=t.attribute.dy)&&void 0!==e?e:0)+p+g-t.AABBBounds.y2})}):"middle"===f&&t.forEach(t=>{var e;t.setAttributes({dy:(null!==(e=t.attribute.dy)&&void 0!==e?e:0)+p+g/2-(t.AABBBounds.y1+t.AABBBounds.y2)/2})}))}}_getAxisLabelLimitLength(t,e){var i,s,r,n,a;let{label:o,title:l,line:h,tick:d}=this.attribute,u=null!==(i=o.space)&&void 0!==i?i:4,c=t,g=0,m=0,f=h&&h.visible?null!==(s=h.style.lineWidth)&&void 0!==s?s:1:0,v=d&&d.visible?null!==(r=d.length)&&void 0!==r?r:4:0;if(l&&l.visible&&"string"==typeof l.text){g=(0,x.fe)(l.text,l.textStyle,null===(a=null===(n=this.stage)||void 0===n?void 0:n.getTheme())||void 0===a?void 0:a.text).height;let t=(0,p.o)(l.padding);m=l.space+t[0]+t[2]}return c&&(c=(c-u-m-g-f-v)/e),c}release(){super.release(),this._breaks=null}}N.defaultAttributes=k.p,(0,g.jB)(N,j.b);var V=i(2698),U=i(9528),G=i(4682),W=i(9689),X=i(4761);let Y=(t,e,i,r)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.axis)&&void 0!==a?a:{};if(!t)return(0,s.Z)({},h,null!=i?i:{});let d=[(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,r))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}))];return(0,s.Z)({},h,{items:d},null!=i?i:{})},$=(t,e,i,r)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.circleAxis)&&void 0!==a?a:{};if(!t)return(0,s.Z)({},h,null!=i?i:{});let d=[(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,r))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}))];return(0,s.Z)({},h,{items:d},null!=i?i:{})},K=(t,e,i,s,r,n)=>{var a;let o=t.getCoordinateAxisPosition();r&&"auto"===r.position&&(r.position=i?"content":o);let l=t.getCoordinateAxisPoints(s);if(l){let s={start:l[0],end:l[1],verticalFactor:("top"===o||"left"===o?-1:1)*(i?-1:1)*((null===(a=t.getSpec().range)||void 0===a?void 0:a.reversed)?-1:1)};if(n&&"polar"===e.type){let t=e.angle();s.center=e.origin(),s.startAngle=t[0],s.endAngle=t[1]}return s}let h=e.radius(),d=e.angle();return{center:e.origin(),radius:h[1],innerRadius:h[0],inside:i,startAngle:d[0],endAngle:d[1]}};class q extends U.u{constructor(t,e,i){super(t,V.zH.axis,e),this.spec.componentType=V.zH.axis,this.mode=i}parseAddition(t){return super.parseAddition(t),this.axisType(t.axisType),this.tickCount(t.tickCount),this.inside(t.inside),this.baseValue(t.baseValue),this}scale(t){return super.scale(t),this._axisComponentType=null,this}axisType(t){return this.spec.axisType=t,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}addGraphicItem(t,e){let i=(0,s.Z)({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),r=X.F.createGraphicComponent(this._getAxisComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,r)}tickCount(t){let e=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}getAxisComponentType(){return this._axisComponentType}_updateComponentEncoders(){let t=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,e=Object.assign({update:{}},this.spec.encode),i=Object.keys(e).reduce((i,s)=>{let r=e[s];return r&&(i[s]={callback:(e,i,s)=>{var n,a;let o=this.spec.skipTheme?null:this.view.getCurrentTheme(),l=(0,G.i)(r,e,i,s),h=(0,W.ZO)(this.spec.inside,s,e,i),d=(0,W.ZO)(this.spec.baseValue,s,e,i),u=null===(n=null==t?void 0:t.getCoordinate)||void 0===n?void 0:n.call(t);u&&(l=Object.assign(K(t,u,h,d,this.spec.layout),l));let c=null===(a=null==t?void 0:t.getScale)||void 0===a?void 0:a.call(t),p=(0,W.ZO)(this.spec.tickCount,s,e,i);switch(this._getAxisComponentType()){case V.qs.lineAxis:return Y(c,o,l,p);case V.qs.circleAxis:return $(c,o,l,p)}return l}}),i},{});this._encoders=i}_getAxisComponentType(){var t;if(this._axisComponentType)return this._axisComponentType;let e=this.spec.axisType;if((0,n.Z)(e)){let i=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;e=(null===(t=null==i?void 0:i.getCoordinate)||void 0===t?void 0:t.call(i))?i.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType="circle"===e?V.qs.circleAxis:V.qs.lineAxis,this._axisComponentType}}q.componentType=V.zH.axis;let J=()=>{X.F.registerGraphicComponent(V.qs.lineAxis,(t,e)=>new N(t,e)),X.F.registerComponent(V.zH.axis,q)}},7092:function(t,e,i){i.d(e,{pU:()=>E});var s=i(325),r=i(9904),n=i(2683),a=i(7773),o=i(9038),l=i(8103),h=i(7636),d=i(5859),u=i(7578),c=i(3e3),p=i(1670),g=i(7413);function m(t,e,i,s){let r="";if(!t||0===e.length)return r;let a=e[0],o=n.HL.distancePP(t,a),l=i?0:1;return s?r+=`M${t.x},${t.y-o}A${o},${o},0,0,${l},${t.x},${t.y+o}A${o},${o},0,0,${l},${t.x},${t.y-o}Z`:e.forEach((t,e)=>{0===e?r=`M${t.x},${t.y}`:r+=`A${o},${o},0,0,${l},${t.x},${t.y}`}),r}class f extends c.k{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&(0,g.uX)(this._innerView),this.removeAllChild(!0),this._innerView=u.i.group({x:0,y:0,pickable:!1}),this.add(this._innerView);let{items:t,visible:e}=this.attribute;t&&t.length&&!1!==e&&(this.data=this._transformItems(t),this._renderGrid(this._innerView))}getVerticalCoord(t,e,i){return(0,g.cN)(t,this.getVerticalVector(e,i,t))}_transformItems(t){let e=[];return t.forEach(t=>{var i;e.push(Object.assign(Object.assign({},t),{point:this.getTickCoord(t.value),id:null!==(i=t.id)&&void 0!==i?i:t.label}))}),e}_renderGrid(t){let{visible:e}=this.attribute.subGrid||{};e&&this._renderGridByType(!0,t),this._renderGridByType(!1,t)}_renderGridByType(t,e){let i=(0,s.Z)({},this.attribute,this.getGridAttribute(t)),{type:r,items:a,style:c,closed:v,alternateColor:_,depth:y=0}=i,b=t?`${p.X9.grid}-sub`:`${p.X9.grid}`;if(a.forEach((t,i)=>{let{id:n,points:a}=t,l="";if("line"===r||"polygon"===r)l=(0,g.st)(a,!!v);else if("circle"===r){let{center:t}=this.attribute;l=m(t,a,!1,!!v)}let h=u.i.path(Object.assign({path:l,z:y},(0,o.Z)(c)?(0,s.Z)({},this.skipDefault?null:f.defaultAttributes.style,c(t,i)):c));h.name=`${b}-line`,h.id=this._getNodeId(`${b}-path-${n}`),e.add(h)}),y&&"line"===r&&a.forEach((t,i)=>{let{id:r,points:n}=t,a=[];a.push(n[0]);let h=n[1].x-n[0].x,d=n[1].y-n[0].y,p=y/Math.sqrt(h*h+d*d);a.push({x:n[0].x+h*p,y:n[0].y+d*p});let m=(0,g.st)(a,!!v),_=(0,l.Wn)(a[0].x-a[1].x),x=(0,l.Wn)(a[0].y-a[1].y),S=u.i.path(Object.assign({path:m,z:0,alpha:_>x?(n[1].x-n[0].x>0?-1:1)*l.pi/2:0,beta:_<x?-l.pi/2:0,anchor3d:_>x?[a[0].x,0]:[0,a[0].y]},(0,o.Z)(c)?(0,s.Z)({},this.skipDefault?null:f.defaultAttributes.style,c(t,i)):c));S.name=`${b}-line`,S.id=this._getNodeId(`${b}-path-${r}`),e.add(S)}),a.length>1&&_){let t=(0,h.Z)(_)?_:[_,"transparent"],s=e=>t[e%t.length],r=this.attribute.items,o=r[0],l=r[r.length-1],c=!(0,d.Yt)(o.value,0)&&!(0,d.Yt)(l.value,0),p=!(0,d.Yt)(o.value,1)&&!(0,d.Yt)(l.value,1),f=[],v=o.value>l.value;(v&&p||!v&&c)&&f.push(this.getGridPointsByValue(v?1:0)),a.forEach(t=>{f.push(t.points)}),(v&&c||!v&&p)&&f.push(this.getGridPointsByValue(v?0:1));for(let t=0;t<f.length-1;t++){let r=function(t,e,i){let{type:s,closed:r}=i,a=e.slice(0).reverse(),o="",l="";if("line"===s&&i.smoothLink&&i.center){let e=t[0],s=a[0],h=i.center;o=(0,g.st)(t,!!r),l=(0,g.st)(a,!!r);let d=n.HL.distancePP(s,h),u=n.HL.distancePP(e,h);o+=`A${d},${d},0,0,1,${s.x},${s.y}L${s.x},${s.y}`,l+=`A${u},${u},0,0,0,${e.x},${e.y}`}else if("circle"===s){let{center:e}=i;o=m(e,t,!1,!!r),l=m(e,a,!0,!!r)}else"line"!==s&&"polygon"!==s||(o=(0,g.st)(t,!!r),l=(0,g.st)(a,!!r));return r?o+=l:(o+=l="L"+l.substring(1),o+="Z"),o}(f[t],f[t+1],i),a=u.i.path({path:r,fill:s(t)});a.name=`${b}-region`,a.id=this._getNodeId(`${b}-region-${t}`),e.add(a)}}}_getNodeId(t){return`${this.id}-${t}`}_parseTickSegment(){let t=1;return this.data.length>=2&&(t=this.data[1].value-this.data[0].value),t}_getPointsOfSubGrid(t,e){let i=this.data.length,s=[];return i>=2&&this.data.forEach(i=>{let r=i.value;if(!e){let e=i.value-t/2;if(this.isInValidValue(e))return;r=e}s.push({value:r})}),s}release(){super.release(),this._prevInnerView=null,this._innerView=null}}f.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};var v=i(9167),_=i(3924);(0,i(7192).nZ)();class y extends f{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,s.Z)({},f.defaultAttributes,t),e)}_getGridPoint(t,e){let i;if("line"===t){let{length:t}=this.attribute;i=[e,this.getVerticalCoord(e,t,!0)]}else if("circle"===t||"polygon"===t){let{center:t,sides:s=6,startAngle:r=v.v2,endAngle:a=v.Di}=this.attribute,o=n.HL.distancePP(t,e);i=(0,g.zl)(t,s,o,r,a)}return i}getGridPointsByValue(t){let e=this.getTickCoord(t);return this._getGridPoint(this.attribute.type,e)}getGridAttribute(t){let{type:e,alignWithLabel:i=!0}=this.attribute,r=this._parseTickSegment(),n,a=[];if(t){n=(0,s.Z)({},this.attribute,this.attribute.subGrid);let t=[],{count:e=4}=n;if(this.data.length>=2){let s=this._getPointsOfSubGrid(r,i);for(let i=0;i<s.length-1;i++){let r=s[i],n=s[i+1];t.push({id:`sub-${i}-0`,points:this.getGridPointsByValue(r.value),datum:{}});for(let s=0;s<e;s++){let a=(s+1)/(e+1),o=(1-a)*r.value+a*n.value;t.push({id:`sub-${i}-${s+1}`,points:this.getGridPointsByValue(o),datum:{}})}i===s.length-2&&t.push({id:`sub-${i}-${e+1}`,points:this.getGridPointsByValue(n.value),datum:{}})}a=t}}else{n=this.attribute;let t=[];this.data.forEach(s=>{let{point:n}=s;if(!i){let t=s.value-r/2;if(this.isInValidValue(t))return;n=this.getTickCoord(t)}t.push({id:s.label,datum:s,points:this._getGridPoint(e,n)})}),a=t}return Object.assign(Object.assign({},n),{items:a})}}(0,a.jB)(y,_.b);var b=i(2698),x=i(9528),S=i(4682),A=i(9689),k=i(1996),w=i(4761);let T=(t,e,i,r)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.grid)&&void 0!==a?a:{};if(!t)return(0,s.Z)({},h,null!=i?i:{});let d=(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,r))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}));return(0,s.Z)({},h,{items:d},null!=i?i:{})},C=(t,e,i,r)=>{var n,a,o,l;let h=null!==(a=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.circleGrid)&&void 0!==a?a:{};if(!t)return(0,s.Z)({},h,null!=i?i:{});let d=(null!==(l=null===(o=t.tickData)||void 0===o?void 0:o.call(t,r))&&void 0!==l?l:[]).map(t=>({id:t.index,label:t.tick,value:t.value,rawValue:t.tick}));return(0,s.Z)({},h,{items:d},null!=i?i:{})};class M extends x.u{constructor(t,e,i){super(t,b.zH.grid,e),this.spec.componentType=b.zH.grid,this.mode=i}parseAddition(t){return super.parseAddition(t),this.target(t.target),this.gridType(t.gridType),this.gridShape(t.gridShape),this}scale(t){return super.scale(t),this._gridComponentType=null,this}gridType(t){return this.spec.gridType=t,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}gridShape(t){return this.spec.gridShape=t,this.commit(),this}target(t){if(this.spec.target){let t=(0,r.Z)(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(t)}this.spec.target=t;let e=(0,r.Z)(t)?this.view.getMarkById(t):t;return this.attach(e),this._targetAxis=e,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}tickCount(t){let e=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return e&&e.tickCount(t),this.setFunctionSpec(t,"tickCount")}inside(t){return this.setFunctionSpec(t,"inside")}baseValue(t){return this.setFunctionSpec(t,"baseValue")}addGraphicItem(t,e){let i=(0,s.Z)({x:0,y:0,start:{x:0,y:0},end:{x:0,y:0}},t),r=w.F.createGraphicComponent(this._getGridComponentType(),i,{mode:this.mode,skipDefault:this.spec.skipTheme});return super.addGraphicItem(i,e,r)}_updateComponentEncoders(){let t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((e,i)=>{let s=t[i];return s&&(e[i]={callback:(t,e,i)=>{var n,a,o,l;let h=this.spec.skipTheme?null:this.view.getCurrentTheme(),d,u=(0,S.i)(s,t,e,i),c=(0,A.ZO)(this.spec.baseValue,i,t,e);if(this._targetAxis){let t=null===(n=this._targetAxis.getSpec())||void 0===n?void 0:n.scale;d=(0,r.Z)(t)?this.view.getScaleById(t):t;let e=this._targetAxis.elements[0];if(e)switch(this._getGridComponentType()){case b.Fp.lineAxisGrid:u=Object.assign({x:e.getGraphicAttribute("x"),y:e.getGraphicAttribute("y"),start:e.getGraphicAttribute("start"),end:e.getGraphicAttribute("end"),verticalFactor:null!==(a=e.getGraphicAttribute("verticalFactor"))&&void 0!==a?a:1},u);break;case b.Fp.circleAxisGrid:u=Object.assign({x:e.getGraphicAttribute("x"),y:e.getGraphicAttribute("y"),center:e.getGraphicAttribute("center"),radius:e.getGraphicAttribute("radius"),innerRadius:e.getGraphicAttribute("innerRadius"),inside:e.getGraphicAttribute("inside"),startAngle:e.getGraphicAttribute("startAngle"),endAngle:e.getGraphicAttribute("endAngle")},u)}}else{d=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;let s=(0,A.ZO)(this.spec.inside,i,t,e),n=null===(o=null==d?void 0:d.getCoordinate)||void 0===o?void 0:o.call(d);n&&(u=Object.assign((0,k.T_)(d,n,s,c,this.spec.layout,!0),u))}this._getGridComponentType()===b.Fp.lineAxisGrid&&(u="line"!==this.spec.gridShape&&this.spec.gridShape?Object.assign({center:u.start,closed:!0},u,{type:this.spec.gridShape}):Object.assign({},u,{type:"line"}));let p=null===(l=null==d?void 0:d.getScale)||void 0===l?void 0:l.call(d),g=(0,A.ZO)(this.spec.tickCount,i,t,e);switch(this._getGridComponentType()){case b.Fp.lineAxisGrid:return T(p,h,u,g);case b.Fp.circleAxisGrid:return C(p,h,u,g)}return u}}),e},{});this._encoders=e}_getGridComponentType(){var t;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)"circle"===this.spec.gridType?this._gridComponentType=b.Fp.circleAxisGrid:this._gridComponentType=b.Fp.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case b.qs.circleAxis:this._gridComponentType=b.Fp.circleAxisGrid;break;case b.qs.lineAxis:default:this._gridComponentType=b.Fp.lineAxisGrid}else if(this.spec.scale){let e=(0,r.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=(null===(t=null==e?void 0:e.getCoordinate)||void 0===t?void 0:t.call(e))?e.getCoordinateAxisPoints()?b.Fp.lineAxisGrid:b.Fp.circleAxisGrid:b.Fp.lineAxisGrid}else this._gridComponentType=b.Fp.lineAxisGrid;return this._gridComponentType}}M.componentType=b.zH.grid;let E=()=>{w.F.registerGraphicComponent(b.Fp.lineAxisGrid,(t,e)=>new y(t,e)),w.F.registerComponent(b.zH.grid,M)}},5341:function(t,e,i){i.d(e,{Uq:()=>S});var s=i(325),r=i(6082),n=i(4546),a=i(9904),o=i(8378),l=i(3e3),h=i(3529),d=i(4309),u=i(3309),c=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class p extends l.k{constructor(t,e){let{dataLabels:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({dataLabels:i},(0,s.Z)({},p.defaultAttributes,c(t,["dataLabels"])))),this.name="data-label"}render(){var t;let{dataLabels:e,size:i}=this.attribute;if(!e||0===e.length)return;let{width:s=0,height:r=0,padding:n}=i||{};if(!s||!r||!(0,o.Z)(r*s))return;this._componentMap||(this._componentMap=new Map);let a=(0,h.OM)(s,r,n),l=a.bitmap(),c=new Map,p=this._componentMap;for(let s=0;s<e.length;s++){let r=e[s],n=(0,u.X)(r.type)||d.E;if(n){let{baseMarkGroupName:e,type:o}=r,h=null!==(t=r.id)&&void 0!==t?t:`${e}-${o}-${s}`;"arc"===r.type&&(r.width=i.width,r.height=i.height);let d=this._componentMap.get(h);d?(d.setBitmapTool(a),d.setBitmap(l),d.setAttributes(r)):((d=new n(r)).setBitmap(l),d.setBitmapTool(a),this.add(d)),c.set(h,d)}}p.forEach((t,e)=>{c.get(e)||this.removeChild(t)}),this._componentMap=c}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._componentMap.forEach(t=>{t.disableAnimation()})}enableAnimation(){this._componentMap.forEach(t=>{t.enableAnimation()})}}p.defaultAttributes={pickable:!1};var g=i(2698),m=i(7366),f=i(4682),v=i(9689),_=i(4761),y=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};let b=(t,e,i,n,a,o={})=>{var l;let h=null===(l=o.components)||void 0===l?void 0:l.dataLabel,d=t.map((t,e)=>{var r,l,h,d,u;let c=Object.assign(Object.assign({},a),{labelIndex:e}),p=null!==(r=(0,v.ZO)(n,c,t))&&void 0!==r?r:{},{components:m={}}=o,_={};switch(t.markType){case g.Cm.line:case g.Cm.area:_="line"===p.type?m.lineLabel:"area"===p.type?m.areaLabel:m.lineDataLabel;break;case g.Cm.rect:case g.Cm.rect3d:case g.Cm.interval:_=m.rectLabel;break;case g.Cm.symbol:case g.Cm.circle:case g.Cm.cell:_=m.symbolLabel;break;case g.Cm.arc:case g.Cm.arc3d:_=m.arcLabel;break;case g.Cm.polygon:case g.Cm.path:default:_=m.pointLabel}let b=null!==(l=p.data)&&void 0!==l?l:[],x=null!==(d=null===(h=null==_?void 0:_.data)||void 0===h?void 0:h[0])&&void 0!==d?d:{};if(b&&b.length>0)b.forEach((e,r)=>{if(t.elements[r]){let n=(0,f.i)(i,e,t.elements[r],c);(0,s.Z)(e,x,n)}});else{let e=(t,e)=>{let{data:i}=t,r=y(t,["data"]);return Object.assign(Object.assign({},(0,s.Z)({},e,r)),{data:i})};t.elements.forEach(s=>{if("willRelease"!==s.getGraphicItem().releaseStatus){if(t.isCollectionMark())s.getDatum().forEach(t=>{let r=(0,f.i)(i,t,s,c);b.push(e(r,x))});else{let t=(0,f.i)(i,s.getDatum(),s,c);b.push(e(t,x))}}})}let S=null===(u=t.graphicItem)||void 0===u?void 0:u.name,A=(0,s.Z)({},_,{baseMarkGroupName:S,getBaseMarks:()=>t.elements.map(t=>t.getGraphicItem())},null!=p?p:{});return A.data=null!=b?b:_.data,A}).filter(t=>!(0,r.Z)(t)),u=(0,s.Z)({},h,{size:e});return u.dataLabels=d,u};class x extends m.w{constructor(t,e){super(t,g.zH.label,e),this.spec.componentType=g.zH.label}parseAddition(t){return super.parseAddition(t),this.labelStyle(t.labelStyle),this.size(t.size),this.target(t.target),this}labelStyle(t){return this.setFunctionSpec(t,"labelStyle")}size(t){return this.setFunctionSpec(t,"size")}target(t){if(this.spec.target){let t=(0,n.IX)(this.spec.target).map(t=>(0,a.Z)(t)?this.view.getMarkById(t):t);this.detach(t)}if(this.spec.target=t,t){let e=(0,n.IX)(t).map(t=>(0,a.Z)(t)?this.view.getMarkById(t):t);this.attach(e)}return this.commit(),this}_updateComponentEncoders(){let t=Object.assign({update:{}},this.spec.encode),e=Object.keys(t).reduce((e,i)=>{let s=t[i];return s&&(e[i]={callback:(t,e,i)=>{var r,o,l,h;let d=(0,n.IX)(this.spec.target).map(t=>(0,a.Z)(t)?this.view.getMarkById(t):t),u=null===(o=null===(r=this.group)||void 0===r?void 0:r.getGroupGraphicItem)||void 0===o?void 0:o.call(r),c=(0,v.ZO)(this.spec.size,i);c||(c=u?{width:null!==(l=u.attribute.width)&&void 0!==l?l:u.AABBBounds.width(),height:null!==(h=u.attribute.height)&&void 0!==h?h:u.AABBBounds.height()}:{width:1/0,height:1/0});let p=this.spec.skipTheme?null:this.view.getCurrentTheme();return b(d,c,s,this.spec.labelStyle,i,p)}}),e},{});this._encoders=e}}x.componentType=g.zH.label;let S=()=>{_.F.registerGraphicComponent(g.zH.label,t=>new p(t)),_.F.registerComponent(g.zH.label,x)}},9528:function(t,e,i){i.d(e,{u:()=>n});var s=i(9904),r=i(7366);class n extends r.w{parseAddition(t){return super.parseAddition(t),this.scale(t.scale),this}scale(t){if(this.spec.scale){let t=(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(t),this.spec.scale=void 0}let e=(0,s.Z)(t)?this.view.getScaleById(t):t;return this.spec.scale=e,this.attach(e),this._updateComponentEncoders(),this.commit(),this}getScale(){return(0,s.Z)(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}},4761:function(t,e,i){i.d(e,{F:()=>a});var s=i(9904),r=i(4546);class n{constructor(t,e,i,s){this.channelEncoder={},this.marks=t,e&&this.registerChannelEncoder(e),i&&this.registerDefaultEncoder(i),this.progressiveChannels&&this.registerProgressiveChannels(s)}getMarks(){return this.marks}registerChannelEncoder(t,e){return(0,s.Z)(t)?this.channelEncoder[t]=e:Object.assign(this.channelEncoder,t),this}registerFunctionEncoder(t){return this.functionEncoder=t,this}registerDefaultEncoder(t){return this.defaultEncoder=t,this}registerProgressiveChannels(t){return this.progressiveChannels=(0,r.IX)(t),this}getChannelEncoder(){return this.channelEncoder}getFunctionEncoder(){return this.functionEncoder}getDefaultEncoder(){return this.defaultEncoder}getProgressiveChannels(){return this.progressiveChannels}}class a{static registerPlotMarks(t,e){a._plotMarks[t]=e}static createPlotMark(t,e){return a._plotMarks[t]?new a._plotMarks[t](e):null}static registerMark(t,e){a._marks[t]=e}static createMark(t,e,i){return a._marks[t]?new a._marks[t](e,t,i):null}static hasMark(t){return!!a._marks[t]}static getMark(t){return a._marks[t]}static registerComponent(t,e){a._components[t]=e}static createComponent(t,e,i,s){let r=a._components[t];return r?new r(e,i,s):null}static hasComponent(t){return!!a._components[t]}static registerGraphicComponent(t,e){a._graphicComponents[t]=e}static createGraphicComponent(t,e,i){let s=a._graphicComponents[t];return s?s(e,i):null}static registerTransform(t,e,i){a._transforms[t]=Object.assign(e,{type:t,isBuiltIn:!!i})}static getTransform(t){return a._transforms[t]}static unregisterRuntimeTransforms(){Object.keys(a._transforms).forEach(t=>{a._transforms[t]&&!a._transforms[t].isBuiltIn&&(a._transforms[t]=null)})}static registerGrammar(t,e,i){a._grammars[t]={grammarClass:e,specKey:null!=i?i:t}}static createGrammar(t,e,i){var s;let r=null===(s=a._grammars[t])||void 0===s?void 0:s.grammarClass;return r?new r(e,i):null}static getGrammars(){return this._grammars}static getGlyph(t){return a._glyphs[t]}static createInteraction(t,e,i){let s=a._interactions[t];return s?new s(e,i):null}static hasInteraction(t){return!!a._interactions[t]}}a._plotMarks={},a._marks={},a._components={},a._graphicComponents={},a._transforms={},a._grammars={},a._glyphs={},a._animations={},a._interactions={},a._graphics={},a._stageEventPlugins={},a.registerGlyph=(t,e,i,s,r)=>(a._glyphs[t]=new n(e,i,s,r),a._glyphs[t]),a.registerAnimationType=(t,e)=>{a._animations[t]=e},a.getAnimationType=t=>a._animations[t],a.registerInteraction=(t,e)=>{a._interactions[t]=e},a.registerGraphic=(t,e)=>{a._graphics[t]=e},a.getGraphicType=t=>a._graphics[t],a.createGraphic=(t,e)=>{let i=a._graphics[t];return i?i(e):null},a.registerDefaultLayout=t=>{a.defaultLayout=t},a.getDefaultLayout=()=>a.defaultLayout,a.registerStageEventPlugin=(t,e)=>{a._stageEventPlugins[t]=e},a.getStageEventPlugin=t=>a._stageEventPlugins[t]},1114:function(t,e,i){i.d(e,{B$:()=>o,Hg:()=>d,Wj:()=>l,Y2:()=>a,bw:()=>c,lo:()=>h,ny:()=>u});var s=i(8378),r=i(6082),n=i(2698);function a(t,e){switch(e){case"line":return t.some(t=>["x","y","defined"].includes(t));case"area":return t.some(t=>["x","y","x1","y1","defined"].includes(t));case"largeRects":return t.some(t=>["x","y","width","y1"].includes(t));case"largeSymbols":return t.some(t=>["x","y"].includes(t))}return!1}function o(t){let{x:e,y:i,x1:r,y1:n}=t;return(0,s.Z)(e)&&(0,s.Z)(i)&&(0,s.Z)(r)&&(0,s.Z)(n)?[{x:e,y:i},{x:r,y:n}]:[]}function l(t,e,i,s){return t&&t.length&&(1!==t.length||e)?t.some(t=>a(Object.keys(t.nextAttrs),"line"))?t.map((t,e)=>{var n;let a=t.nextAttrs,{x:o,y:l,x1:h,y1:d,defined:u}=null!==(n=null==i?void 0:i[e])&&void 0!==n?n:{};return(0,r.Z)(a.x)&&(a.x=o),(0,r.Z)(a.y)&&(a.y=l),(0,r.Z)(a.defined)&&!1===u&&(a.defined=!1),a.context=t.key,s&&((0,r.Z)(a.x1)&&(a.x1=h),(0,r.Z)(a.y1)&&(a.y1=d)),a}):null!=i?i:[]:[]}function h(t,e,i=[]){if(!t||!t.length||1===t.length&&!e)return[];let s=new Float32Array(4*t.length);return t.forEach((t,e)=>{var r,n,a,o;let l=t.nextAttrs,h=null!==(r=l.x)&&void 0!==r?r:i[4*e],d=null!==(n=l.y)&&void 0!==n?n:i[4*e+1],u=null!==(a=l.width)&&void 0!==a?a:i[4*e+2],c=null!==(o=l.y1)&&void 0!==o?o:i[4*e+3];s[4*e]=h,s[4*e+1]=d,s[4*e+2]=u,s[4*e+3]=c-d}),s}function d(t,e,i=[]){if(!t||!t.length||1===t.length&&!e)return[];let s=new Float32Array(2*t.length);return t.forEach((t,e)=>{var r,n;let a=t.nextAttrs,o=null!==(r=a.x)&&void 0!==r?r:i[2*e],l=null!==(n=a.y)&&void 0!==n?n:i[2*e+1];s[2*e]=o,s[2*e+1]=l}),s}function u(t,e){if(["x","y","dx","dy"].includes(e))return!0;switch(t){case n.Cm.arc:return["innerRadius","outerRadius","startAngle","endAngle"].includes(e);case n.Cm.group:case n.Cm.rect:case n.Cm.image:return["width","height","y1"].includes(e);case n.Cm.path:case n.Cm.shape:return["path","customPath"].includes(e);case n.Cm.line:return"defined"===e;case n.Cm.area:return["x1","y1","defined"].includes(e);case n.Cm.rule:return["x1","y1"].includes(e);case n.Cm.symbol:return"size"===e;case n.Cm.polygon:return"points"===e;case n.Cm.text:return"text"===e}return!1}function c(t){return[n.Cm.line,n.Cm.area,n.Cm.largeRects,n.Cm.largeSymbols].includes(t)}},8656:function(t,e,i){i.d(e,{N7:()=>c,o$:()=>p,qX:()=>g});var s=i(8378),r=i(5890),n=i(6082),a=i(306),o=i(9904),l=i(2698),h=i(1114);let d=["fillOpacity"],u=(t,e,i)=>{var s;return"fillOpacity"===e?(t.fillOpacity=null!==(s=i.fillOpacity)&&void 0!==s?s:1,["fillOpacity"]):[]},c={rect3d:[{channels:["x","y","z","x1","y1","width","height","length"],transform:(t,e,i)=>{var r,n,a,o,l,h,d,u,c,p,g,m;(0,s.Z)(e.width)||!(0,s.Z)(e.x1)&&(0,s.Z)(i.width)?(t.x=Math.min(null!==(r=i.x)&&void 0!==r?r:0,null!==(n=i.x1)&&void 0!==n?n:1/0),t.width=i.width):(0,s.Z)(e.x1)||!(0,s.Z)(e.width)&&(0,s.Z)(i.x1)?(t.x=Math.min(i.x,i.x1),t.width=Math.abs(i.x1-i.x)):(t.x=Math.min(null!==(a=i.x)&&void 0!==a?a:0,null!==(o=i.x1)&&void 0!==o?o:1/0),t.width=i.width),(0,s.Z)(e.height)||!(0,s.Z)(e.y1)&&(0,s.Z)(i.height)?(t.y=Math.min(null!==(l=i.y)&&void 0!==l?l:0,null!==(h=i.y1)&&void 0!==h?h:1/0),t.height=i.height):(0,s.Z)(e.y1)||!(0,s.Z)(e.height)&&(0,s.Z)(i.y1)?(t.y=Math.min(i.y,i.y1),t.height=Math.abs(i.y1-i.y)):(t.y=Math.min(null!==(d=i.y)&&void 0!==d?d:0,null!==(u=i.y1)&&void 0!==u?u:1/0),t.height=i.height),(0,s.Z)(e.length)||!(0,s.Z)(e.z1)&&(0,s.Z)(i.length)?(t.z=Math.min(null!==(c=i.z)&&void 0!==c?c:0,null!==(p=i.z1)&&void 0!==p?p:1/0),t.length=i.length):(0,s.Z)(e.z1)||!(0,s.Z)(e.length)&&(0,s.Z)(i.z1)?(t.z=Math.min(i.z,i.z1),t.length=Math.abs(i.z1-i.z)):(t.z=Math.min(null!==(g=i.z)&&void 0!==g?g:0,null!==(m=i.z1)&&void 0!==m?m:1/0),t.length=i.length)},storedAttrs:"sizeAttrs"}],[l.Cm.text]:[{channels:["text","limit","autoLimit","maxLineWidth","textType","_originText"],transform:(t,e,i)=>{var s,a,o,l;let h=Math.min(null!==(s=i.limit)&&void 0!==s?s:1/0,null!==(a=i.autoLimit)&&void 0!==a?a:1/0),d=(0,r.Z)(i.text)&&!(0,n.Z)(i.text.text),u=d?i.text.text:i.text;Array.isArray(u),t.maxLineWidth=h===1/0?i.maxLineWidth:h,d||i.textType?"rich"===i.text.type||"rich"===i.textType?t.textConfig=u:"html"===i.text.type?(t.html=u,t.text=null!==(o=i._originText)&&void 0!==o?o:"",t.renderable=!1):"react"===i.text.type?(t.react=u,t.text=null!==(l=i._originText)&&void 0!==l?l:"",t.renderable=!1):t.text=u:t.text=u},storedAttrs:"limitAttrs"}],[l.Cm.rule]:[{channels:["x","y","x1","y1"],transform:(t,e,i)=>{let s=(0,h.B$)(i);t.points=s,t.x=0,t.y=0},storedAttrs:"pointAttrs"}],[l.Cm.symbol]:[{channels:["shape","symbolType"],transform:(t,e,i)=>{var s;t.symbolType=null!==(s=e.shape)&&void 0!==s?s:e.symbolType}},{channels:["image","fill","background"],transform:(t,e,i)=>{e.image?(t.background=e.image,t.fill=!1):i.image?(t.background=i.image,t.fill=!1):(t.fill=i.fill,t.background=i.background)},storedAttrs:"imageAttrs"}]};function p(t,e){var i;return(null!==(i=c[t])&&void 0!==i?i:[]).reduce((t,i)=>(i.channels.forEach(i=>{(0,a.Z)(e,i)&&(t[i]=e[i])}),t),{})}let g=(t,e,i,s)=>{let r={},n=e?Object.keys(e):[],a=(0,o.Z)(t)?c[t]:t;if(a&&a.length){let t=[];n.forEach(n=>{let o=!1;a.forEach((a,l)=>{if(a.channels.includes(n)){if(!t[l]){if(a.storedAttrs){let t=function(t,e,i,s,r,n){let a=r.getGraphicAttribute(t,!1,n);if(a)return e.forEach(t=>{t in s&&(a[t]=s[t])}),a;let o={};return e.forEach(t=>{o[t]=s[t]}),i[t]=o,o}(a.storedAttrs,a.channels,r,e,i,s);a.transform(r,e,t)}else a.transform(r,e,null)}t[l]=!0,o=!0}}),o||(d.includes(n)?u(r,n,e):r[n]=e[n])})}else n.forEach(t=>{d.includes(t)?u(r,t,e):r[t]=e[t]});return r}},6602:function(t,e,i){i.d(e,{$T:()=>h,DK:()=>k,FQ:()=>n,I8:()=>x,IB:()=>d,JE:()=>f,Ji:()=>A,NM:()=>l,Nc:()=>a,Qv:()=>b,bt:()=>g,cK:()=>c,dc:()=>r,dw:()=>m,fx:()=>S,jC:()=>o,ov:()=>p,p6:()=>u,tR:()=>v,uE:()=>w,uX:()=>y,v0:()=>_});var s=i(2698);let r="__vgrammar_scene_item__",n=[s.Cm.line,s.Cm.area],a=[s.Cm.arc3d,s.Cm.rect3d,s.Cm.pyramid3d],o="key",l=[{}],h=["key"],d=!0,u=!0,c=!1,p=null,g=!0,m="VGRAMMAR_IMMEDIATE_ANIMATION",f=0,v=1e3,_=0,y=0,b=!1,x=!1,S="quintInOut",A={stopWhenStateChange:!1,immediatelyApply:!0},k="VGRAMMAR_ANIMATION_PARAMETERS",w="_mo_hide_"},8807:function(t,e,i){i.d(e,{W:()=>B});var s=i(6082),r=i(9038),n=i(9904),a=i(4546),o=i(1036),l=i(4154),h=i(9730),d=i(306),u=i(1121),c=i(1130),p=i(7636),g=i(6602),m=i(2698),f=i(4682),v=i(4643),_=i(8656),y=i(1114);let b=(t,e)=>{var i,s;if(t===e)return!0;let r=null!==(i=t&&t.length)&&void 0!==i?i:0;return r===(null!==(s=e&&e.length)&&void 0!==s?s:0)&&0!==r&&t.every((t,i)=>!t&&!e[i]||t&&e[i]&&t.color===e[i].color&&t.offset===e[i].offset)},x=(t,e)=>{if(t===e)return!0;if(typeof t!=typeof e||(0,n.Z)(t)||t.gradient!==e.gradient)return!1;let i=Object.keys(t),s=Object.keys(e);return i.length===s.length&&i.every(i=>"stops"===i?b(t[i],e[i]):t[i]===e[i])},S=(t,e)=>t.length===e.length&&t.join("-")===e.join("-"),A=(t,e,i)=>!(!(0,s.Z)(t)||!(0,s.Z)(e))||!(0,s.Z)(t)&&!(0,s.Z)(e)&&("lineDash"===i?S(t,e):"stroke"===i||"fill"===i?x(t,e):t===e),k=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"],w=["fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"].concat(k);function T(t,e,i){var r;if(!t||t.length<=1)return null;let n="area"===(null===(r=null==i?void 0:i.mark)||void 0===r?void 0:r.markType)?w:k,a=[],o=null;return t.forEach((t,e)=>{o&&n.every(e=>A(o[e],t[e],e))||(a.length&&(a[a.length-1].endIndex=e),o=t,a.push({attrs:o,startIndex:e}))}),a.length>=2?a.map(t=>{let i=C(t.attrs);return i.points=e.slice(t.startIndex,(0,s.Z)(t.endIndex)?e.length:t.endIndex),i}):null}function C(t){let e={};if(!t)return e;let i=["x","y","x1","y1","defined","size","width","height","context"];return Object.keys(t).forEach(s=>{i.includes(s)||(e[s]=t[s])}),e}var M=i(8908),E=i(9689);class B{constructor(t){this.data=null,this.states=[],this.diffState=m.OJ.enter,this.isReserved=!1,this.runtimeStatesEncoder=null,this.items=[],this.getStateAttrs=(t,e)=>{var i,n,a,o;let l=!(0,s.Z)(null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[t]),h=l?Object.assign(Object.assign({},null===(n=this.mark.getSpec().encode)||void 0===n?void 0:n[t]),this.runtimeStatesEncoder[t]):null===(a=this.mark.getSpec().encode)||void 0===a?void 0:a[t];if(!h)return{};if((0,r.Z)(h))return h(this.getDatum(),this,t,e);if(!l&&(null===(o=this.graphicItem.states)||void 0===o?void 0:o[t]))return this.graphicItem.states[t];let d=this.items.map(t=>Object.assign({},t,{nextAttrs:{}}));(0,f.h)(this,d,h,this.mark.parameters());let u=this.transformElementItems(d,this.mark.markType);return this.graphicItem.states?this.graphicItem.states[t]||(this.graphicItem.states[t]=u):this.graphicItem.states={[t]:u},u},this.mark=t}initGraphicItem(t={}){if(this.graphicItem)return;let e=this.mark.getAttributeTransforms();if(this.graphicItem=this.mark.addGraphicItem(e?(0,_.qX)(e,t,this):t,this.groupKey),!this.graphicItem)return;let{graphicName:i}=this.mark.getSpec();(0,n.Z)(i)?this.graphicItem.name=i:(0,r.Z)(i)&&(this.graphicItem.name=i(this)),this.graphicItem[g.dc]=this,e&&(this.graphicItem.onBeforeAttributeUpdate=t=>this.mark?(0,_.qX)(e,t,this):t),this.clearGraphicAttributes(),this.mark.needAnimate()&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(Object.assign({},t)),this.setFinalGraphicAttributes(Object.assign({},t)))}updateGraphicItem(){var t;if(!this.graphicItem)return;this.diffState===m.OJ.exit?this.graphicItem.releaseStatus="willRelease":this.graphicItem.releaseStatus=void 0;let e=null===(t=this.mark.animate)||void 0===t?void 0:t.getAnimationConfigs("state");e&&0!==e.length&&(this.graphicItem.stateAnimateConfig=e[0].originConfig)}getGraphicItem(){return this.graphicItem}removeGraphicItem(){var t,e;this.graphicItem&&(null===(e=null===(t=this.graphicItem.animates)||void 0===t?void 0:t.forEach)||void 0===e||e.call(t,t=>t.stop())),this.graphicItem&&((0,v.HX)(this.graphicItem),this.graphicItem[g.dc]=null,this.graphicItem=null)}resetGraphicItem(){this.graphicItem&&(this.graphicItem=null)}getBounds(){var t;return null===(t=this.graphicItem)||void 0===t?void 0:t.AABBBounds}getStates(){return this.states}updateData(t,e,i){var s;this.mark.emit(m.ZK.BEFORE_ELEMENT_UPDATE_DATA,{groupKey:t,data:e,key:i},this),this.data=e;let r=(0,E.wn)(i);return this.items=e.map(t=>({datum:t,key:r(t),view:this.mark.view,nextAttrs:{}})),this.groupKey=t,this.key=this.mark.isCollectionMark()?t:null===(s=this.items)||void 0===s?void 0:s[0].key,this.mark.emit(m.ZK.AFTER_ELEMENT_UPDATE_DATA,{groupKey:t,data:e,key:i},this),this.items}state(t,e){var i;let s=this.mark.isCollectionMark(),r=this.states,n=(0,a.IX)((0,E.ZO)(t,e,this.getDatum(),this)),o=null===(i=this.mark.getSpec())||void 0===i?void 0:i.stateSort;o&&n.length&&n.sort(o);let l=n.length!==r.length||n.some((t,e)=>t!==r[e]);this.states=n,!s&&l&&this.diffState===m.OJ.unChange&&(this.diffState=m.OJ.update)}encodeGraphic(t){this.coordinateTransformEncode(this.items);let e=this.transformElementItems(this.items,this.mark.markType);t&&Object.assign(e,t),this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null,g.uE in this.graphicItem.attribute&&"visible"in e&&delete this.graphicItem.attribute[g.uE],this.applyGraphicAttributes(e)):this.initGraphicItem(e),(this.diffState===m.OJ.enter||this.diffState===m.OJ.update)&&this.states.length&&this.useStates(this.states),this.mark.markType===m.Cm.shape&&(this.graphicItem.datum=this.items[0].datum),this.items.forEach(t=>{t.nextAttrs={}}),this._setCustomizedShape()}_setCustomizedShape(){var t;if(!this.graphicItem)return;let e=null===(t=this.mark.getSpec())||void 0===t?void 0:t.setCustomizedShape;e&&(this.graphicItem.pathProxy=t=>e(this.data,t,new M.r))}encodeItems(t,e,i=!1,s){let r=this.mark.isCollectionMark(),n=e[m.Nw.update],a=e[m.Nw.enter],o=e[m.Nw.exit],l=this.mark.isLargeMode()||r&&!this.mark.getSpec().enableSegments;this.diffState===m.OJ.enter?(a&&(0,f.h)(this,t,a,s,l),n&&(0,f.h)(this,t,n,s,l)):this.diffState===m.OJ.update?((r&&a||i)&&(0,f.h)(this,t,a,s,l),n&&(0,f.h)(this,t,n,s,l)):this.diffState===m.OJ.exit&&o&&(i&&(0,f.h)(this,t,a,s,l),(0,f.h)(this,t,o,s,l))}coordinateTransformEncode(t){if(!this.mark.coord||"arc"===this.mark.markType||!0===this.mark.disableCoordinateTransform)return;let e=this.mark.coord.output();t.forEach(t=>{let i=t.nextAttrs,s=e.convert(i);Object.assign(i,s)})}hasStateAnimation(){var t;let e=null===(t=this.mark.animate)||void 0===t?void 0:t.getAnimationConfigs("state");return e&&e.length>0}clearStates(t){let e=(0,o.Z)(t)?t:this.hasStateAnimation();this.states=[],this.graphicItem&&this.graphicItem.clearStates(e),this.runtimeStatesEncoder&&(this.runtimeStatesEncoder={})}_updateRuntimeStates(t,e){this.runtimeStatesEncoder||(this.runtimeStatesEncoder={}),this.runtimeStatesEncoder[t]=e}hasState(t){return this.states&&t&&this.states.includes(t)}updateStates(t){if(!this.graphicItem)return!1;let e=this.states.slice(),i=this.mark.getSpec().encode,s=!1,r=!1;return Object.keys(t).forEach(n=>{var a;if(!n)return;let o=t[n];if((0,l.Z)(o)&&!(0,h.X)(o,null===(a=this.runtimeStatesEncoder)||void 0===a?void 0:a[n]))e.includes(n)?s=!0:e.push(n),this._updateRuntimeStates(n,o),r=!0;else if(o)!e.includes(n)&&(null==i?void 0:i[n])&&(e.push(n),r=!0);else if(e.length){let t=e.filter(t=>t!==n);t.length!==e.length&&(r=!0,e=t),this.runtimeStatesEncoder&&this.runtimeStatesEncoder[n]&&(this.runtimeStatesEncoder[n]=null)}}),s&&this.graphicItem.clearStates(),!!r&&(this.useStates(e),!0)}addState(t,e){var i;if(!this.graphicItem)return!1;if(e&&(0,n.Z)(t)&&!(0,h.X)(e,null===(i=this.runtimeStatesEncoder)||void 0===i?void 0:i[t])){let i=this.states.slice();return i.includes(t)?this.graphicItem.clearStates():i.push(t),this._updateRuntimeStates(t,e),this.useStates(i),!0}let s=this.mark.getSpec().encode,r=(0,a.IX)(t).reduce((t,e)=>(e&&!t.includes(e)&&(null==s?void 0:s[e])&&t.push(e),t),this.states.slice());return r.length!==this.states.length&&(this.useStates(r),!0)}removeState(t){if(!this.graphicItem)return!1;let e=(0,a.IX)(t);if(!e.length)return!1;let i=this.states.filter(t=>!e.includes(t));return i.length!==this.states.length&&(this.runtimeStatesEncoder&&e.forEach(t=>{this.runtimeStatesEncoder[t]=null}),this.useStates(i),!0)}useStates(t,e){var i;if(!this.graphicItem)return!1;this.mark.emit(m.ZK.BEFORE_ELEMENT_STATE,{states:t},this);let s=null===(i=this.mark.getSpec())||void 0===i?void 0:i.stateSort;s&&t.sort(s),this.states=t;let r=(0,o.Z)(e)?e:this.hasStateAnimation();return this.graphicItem.stateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,r),this.mark.emit(m.ZK.AFTER_ELEMENT_STATE,{states:t},this),!0}diffAttributes(t){let e={},i=this.getFinalGraphicAttributes();for(let s in t)(0,d.Z)(i,s)&&(0,h.X)(i[s],t[s])||(e[s]=t[s]);return e}transformElementItems(t,e,i){var r,n,a,o,l;let h=t[0];if(!h.nextAttrs||0===Object.keys(h.nextAttrs).length)return{};let d=h.nextAttrs;if((0,y.bw)(e)&&t&&t.length&&(0,s.Z)(null===(r=h.nextAttrs)||void 0===r?void 0:r.points)&&(!0===i||(0,y.Y2)(Object.keys(h.nextAttrs),this.mark.markType))){let i=this.mark.getSpec(),s=this.getGraphicAttribute("points",!1),r=this.getGraphicAttribute("segments",!1),h=i.enableSegments,u=null===(n=this.mark.getSpec().encode)||void 0===n?void 0:n[m.Nw.connectNulls],c=t.map(t=>t.nextAttrs),p=this.mark.isProgressive();if(d=C(d),e===m.Cm.line||e===m.Cm.area){let i=(0,y.Wj)(t,!0,s,e===m.Cm.area);if(p)d.segments=(null!==(l=null===(o=null===(a=this.graphicItem)||void 0===a?void 0:a.attribute)||void 0===o?void 0:o.segments)&&void 0!==l?l:[]).concat([{points:i}]);else if(u){if(d.segments=function(t,e,i){if(!t||t.length<=1)return null;let s=!!i&&i.mark.getSpec().enableSegments,r,n,a=[],o=null;if(t.forEach((t,i)=>{(o=e[i])&&!1!==o.defined?(r||(n={items:[],points:[]},a.push(n)),n.points.push(o),n.items.push(t),!1===r&&(n.isConnect=!0,n={items:[],points:[]},a.push(n)),r=!0):r=!1}),(a=a.filter(t=>t.points.length>0)).length>=2){let t=[];return a.forEach(e=>{if(e.isConnect)return void t.push({points:e.points,isConnect:!0});if(s){let s=T(e.items,e.points,i);if(s)return void s.forEach(e=>{t.push(e)})}let r=C(e.items[0]);r.points=e.points,t.push(r)}),t}return s?T(t,e,i):null}(c,i,this),d.segments&&d.segments.some(t=>t.isConnect)){let t=(0,f.i)(u,this.getDatum(),this,this.mark.parameters());t&&d.segments.forEach(e=>{e.isConnect&&Object.assign(e,t)})}d.points=i}else if(h){let t=i&&0!==i.length?i:r?r.reduce((t,e)=>t.concat(e.points),[]):null,e=T(c,t,this);e?(d.segments=e,d.points=null):(d.segments=null,d.points=t),d=function(t,e){var i;if(!t||!t.segments||!t.segments.length)return t;let s="area"===(null===(i=null==e?void 0:e.mark)||void 0===i?void 0:i.markType)?["fillOpacity","strokeOpacity"]:["strokeOpacity"],r={};return Object.keys(t).forEach(e=>{s.includes(e)||(r[e]=t[e])}),r}(d,this)}else d.points=i,d.segments=null}else e===m.Cm.largeRects?d.points=(0,y.lo)(t,!0,s):e===m.Cm.largeSymbols&&(d.points=(0,y.Hg)(t,!0,s))}return d}applyGraphicAttributes(t){var e,i,s;if(!(0,u.Z)(t)){if(this.mark.needAnimate()){let r=this.diffAttributes(t),n=null!==(e=this.getPrevGraphicAttributes())&&void 0!==e?e:{},a=null!==(i=this.getFinalGraphicAttributes())&&void 0!==i?i:{};Object.keys(r).forEach(t=>{n[t]=this.getGraphicAttribute(t),a[t]=r[t]}),this.setNextGraphicAttributes(r),this.setPrevGraphicAttributes(n),this.setFinalGraphicAttributes(a);let o=Object.assign({},((null===(s=this.mark.animate)||void 0===s?void 0:s.getElementAnimators(this).filter(t=>{var e;return!(null===(e=t.animationOptions.timeline.controlOptions)||void 0===e?void 0:e.ignoreLoopFinalAttributes)||!t.animationOptions.timeline.loop}))||[]).reduce((t,e)=>Object.assign(t,e.getEndAttributes()),{}),a);this.graphicItem.setAttributes(o)}else this.graphicItem.setAttributes(t)}}getGraphicAttribute(t,e=!1){var i;if(!this.graphicItem)return;if(e){let e;let i=this.getPrevGraphicAttributes();if(!(0,s.Z)(e=(0,c.Z)(i,t)))return e}let r=this.mark.getAttributeTransforms(),n=[t];if(r&&r.length){let e=r.find(e=>e.storedAttrs&&e.channels.includes(t));e&&(n=[e.storedAttrs,t])}return(0,c.Z)(null===(i=this.graphicItem)||void 0===i?void 0:i.attribute,n)}setGraphicAttribute(t,e,i=!0){if(!this.graphicItem)return;let s=this.getFinalGraphicAttributes(),r=this.getPrevGraphicAttributes();i&&s&&(s[t]=e),r&&!(0,d.Z)(r,t)&&(r[t]=this.graphicItem.attribute[t]),this.graphicItem.setAttribute(t,e)}setGraphicAttributes(t,e=!0){if(!this.graphicItem)return;let i=this.getFinalGraphicAttributes(),s=this.getPrevGraphicAttributes();Object.keys(t).forEach(r=>{i&&e&&(i[r]=t[r]),s&&!(0,d.Z)(s,r)&&(s[r]=this.graphicItem.attribute[r])}),this.graphicItem.setAttributes(t)}getFinalGraphicAttributes(){return this.graphicItem.finalAttrs}setFinalGraphicAttributes(t){this.graphicItem.finalAttrs=t}getPrevGraphicAttributes(){return this.graphicItem.prevAttrs}setPrevGraphicAttributes(t){this.graphicItem.prevAttrs=t}getNextGraphicAttributes(){return this.graphicItem.nextAttrs}getFinalAnimationAttribute(t){var e,i;return null!==(i=null===(e=this.getFinalGraphicAttributes())||void 0===e?void 0:e[t])&&void 0!==i?i:this.getGraphicAttribute(t)}getFinalAnimationAttributes(){var t;return null!==(t=this.getFinalGraphicAttributes())&&void 0!==t?t:this.graphicItem.attribute}setNextGraphicAttributes(t){this.graphicItem.nextAttrs=t}clearChangedGraphicAttributes(){this.graphicItem&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null))}clearGraphicAttributes(){this.graphicItem&&(this.graphicItem.prevAttrs&&this.setPrevGraphicAttributes(null),this.graphicItem.nextAttrs&&this.setNextGraphicAttributes(null),this.graphicItem.finalAttrs&&this.setFinalGraphicAttributes(null))}remove(){this.graphicItem&&((0,v.HX)(this.graphicItem),this.graphicItem=null)}release(){this.removeGraphicItem(),this.mark=null,this.data=null,this.items=null}getItemAttribute(t){var e,i;if(null===(e=this.items)||void 0===e?void 0:e.length)return this.mark.isCollectionMark()?(0,s.Z)(t)?this.items.map(t=>t.nextAttrs):this.items.map(e=>{var i;return null===(i=e.nextAttrs)||void 0===i?void 0:i[t]}):(0,s.Z)(t)?this.items[0].nextAttrs:null===(i=this.items[0].nextAttrs)||void 0===i?void 0:i[t]}setItemAttributes(t){var e;(null===(e=this.items)||void 0===e?void 0:e.length)&&(this.mark.isCollectionMark()?(0,p.Z)(t)&&this.items.forEach((e,i)=>{Object.assign(e.nextAttrs,t[i])}):Object.assign(this.items[0].nextAttrs,t))}getItem(){var t,e;return this.mark&&this.mark.isCollectionMark()?null!==(t=this.items)&&void 0!==t?t:[]:null===(e=this.items)||void 0===e?void 0:e[0]}getDatum(){var t,e;return this.mark&&this.mark.isCollectionMark()?null!==(t=this.data)&&void 0!==t?t:[]:null===(e=this.data)||void 0===e?void 0:e[0]}}},2698:function(t,e,i){var s,r,n,a,o,l,h,d,u,c,p,g,m,f,v,_,y,b,x,S,A,k,w,T,C,M,E,B,O,I;i.d(e,{$s:()=>g,Cm:()=>n,Fp:()=>h,Nw:()=>s,OJ:()=>r,YI:()=>v,ZK:()=>m,mr:()=>f,qs:()=>l,zH:()=>a}),(_=s||(s={})).enter="enter",_.update="update",_.exit="exit",_.group="group",_.connectNulls="connectNulls",(y=r||(r={})).enter="enter",y.update="update",y.exit="exit",y.unChange="unChange",(b=n||(n={})).arc="arc",b.arc3d="arc3d",b.area="area",b.image="image",b.line="line",b.path="path",b.rect="rect",b.rect3d="rect3d",b.rule="rule",b.shape="shape",b.symbol="symbol",b.text="text",b.richtext="richtext",b.polygon="polygon",b.pyramid3d="pyramid3d",b.circle="circle",b.cell="cell",b.interval="interval",b.group="group",b.glyph="glyph",b.component="component",b.largeRects="largeRects",b.largeSymbols="largeSymbols",(x=a||(a={})).axis="axis",x.grid="grid",x.legend="legend",x.slider="slider",x.label="label",x.datazoom="datazoom",x.player="player",x.title="title",x.scrollbar="scrollbar",(S=o||(o={}))[S.player=1]="player",S[S.rollUp=2]="rollUp",S[S.drillDown=3]="drillDown",S[S.slider=4]="slider",S[S.datazoom=5]="datazoom",S[S.legend=6]="legend",S[S.scrollbar=7]="scrollbar",S[S.brush=8]="brush",S[S.normal=9]="normal",(A=l||(l={})).lineAxis="lineAxis",A.circleAxis="circleAxis",(k=h||(h={})).lineAxisGrid="lineAxisGrid",k.circleAxisGrid="circleAxisGrid",(w=d||(d={})).discreteLegend="discreteLegend",w.colorLegend="colorLegend",w.sizeLegend="sizeLegend",(T=u||(u={})).lineCrosshair="lineCrosshair",T.rectCrosshair="rectCrosshair",T.sectorCrosshair="sectorCrosshair",T.circleCrosshair="circleCrosshair",T.polygonCrosshair="polygonCrosshair",T.ringCrosshair="ringCrosshair",(C=c||(c={})).symbolLabel="symbolLabel",C.rectLabel="rectLabel",C.lineLabel="lineLabel",C.dataLabel="dataLabel",(M=p||(p={})).continuousPlayer="continuousPlayer",M.discretePlayer="discretePlayer",(E=g||(g={})).before="before",E.layouting="layouting",E.reevaluate="reevaluate",E.after="after",(B=m||(m={})).BEFORE_EVALUATE_DATA="beforeEvaluateData",B.AFTER_EVALUATE_DATA="afterEvaluateData",B.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",B.AFTER_EVALUATE_SCALE="afterEvaluateScale",B.BEFORE_PARSE_VIEW="beforeParseView",B.AFTER_PARSE_VIEW="afterParseView",B.BEFORE_TRANSFORM="beforeTransform",B.AFTER_TRANSFORM="afterTransform",B.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",B.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",B.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",B.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",B.BEFORE_STAGE_RESIZE="beforeStageResize",B.AFTER_STAGE_RESIZE="afterStageResize",B.BEFORE_VRENDER_DRAW="beforeVRenderDraw",B.AFTER_VRENDER_DRAW="afterVRenderDraw",B.BEFORE_MARK_JOIN="beforeMarkJoin",B.AFTER_MARK_JOIN="afterMarkJoin",B.BEFORE_MARK_UPDATE="beforeMarkUpdate",B.AFTER_MARK_UPDATE="afterMarkUpdate",B.BEFORE_MARK_STATE="beforeMarkState",B.AFTER_MARK_STATE="afterMarkState",B.BEFORE_MARK_ENCODE="beforeMarkEncode",B.AFTER_MARK_ENCODE="afterMarkEncode",B.BEFORE_DO_LAYOUT="beforeDoLayout",B.AFTER_DO_LAYOUT="afterDoLayout",B.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",B.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",B.BEFORE_DO_RENDER="beforeDoRender",B.AFTER_DO_RENDER="afterDoRender",B.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",B.AFTER_MARK_RENDER_END="afterMarkRenderEnd",B.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",B.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",B.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",B.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",B.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",B.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",B.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",B.BEFORE_ELEMENT_STATE="beforeElementState",B.AFTER_ELEMENT_STATE="afterElementState",B.BEFORE_ELEMENT_ENCODE="beforeElementEncode",B.AFTER_ELEMENT_ENCODE="afterElementEncode",B.ANIMATION_START="animationStart",B.ANIMATION_END="animationEnd",B.ELEMENT_ANIMATION_START="elementAnimationStart",B.ELEMENT_ANIMATION_END="elementAnimationEnd",B.ALL_ANIMATION_START="allAnimationStart",B.ALL_ANIMATION_END="allAnimationEnd",(O=f||(f={})).signal="signal",O.data="data",O.scale="scale",O.coordinate="coordinate",O.mark="mark",(I=v||(v={})).active="active",I.selected="selected",I.highlight="highlight",I.blur="blur"},4198:function(t,e,i){i.d(e,{Hw:()=>o,UJ:()=>l,pv:()=>a});var s=i(6082),r=i(9689),n=i(6602);function a(t,e,i){let s=new Map;if(!t||0===t.length)return{keys:[],data:s};if(!e)return s.set(n.jC,i?t.slice().sort(i):t.slice()),{keys:n.$T,data:s};let a=(0,r.wn)(e);if(1===t.length){let e=a(t[0]);return s.set(e,[t[0]]),{keys:[e],data:s}}let o=new Set;return t.forEach(t=>{var e;let i=a(t),r=null!==(e=s.get(i))&&void 0!==e?e:[];r.push(t),s.set(i,r),o.add(i)}),i&&o.forEach(t=>{s.get(t).sort(i)}),{keys:Array.from(o),data:s}}class o{constructor(t,e,i){this.prevData=(null==t?void 0:t.length)?a(t,null!=e?e:null,i):null}setCurrentData(t){this.currentData=t}getCurrentData(){return this.currentData}doDiff(){if(this.callback){if(this.currentData&&this.prevData){let t=new Map(this.prevData.data);this.currentData.keys.forEach(e=>{this.callback(e,this.currentData.data.get(e),t.get(e)),t.delete(e)}),this.prevData.keys.forEach(e=>{t.has(e)&&this.callback(e,null,t.get(e))})}else this.currentData?this.currentData.keys.forEach(t=>{this.callback(t,this.currentData.data.get(t),null)}):this.prevData&&this.prevData.keys.forEach(t=>{this.callback(t,null,this.prevData.data.get(t))})}}setCallback(t){this.callback=t}updateToCurrent(){this.prevData=this.currentData,this.currentData=null}reset(){this.prevData=null}}function l(t,e,i){let r={enter:[],exit:[],update:[]},n=new o(t,i);return n.setCallback((t,e,i)=>{(0,s.Z)(e)?r.exit.push({prev:i[0]}):(0,s.Z)(i)?r.enter.push({next:e[0]}):r.update.push({next:e[0],prev:i[0]})}),n.setCurrentData(a(e,i)),n.doDiff(),r}},4682:function(t,e,i){i.d(e,{h:()=>y,i:()=>b});var s=i(6082),r=i(9904),n=i(1601),a=i(9038),o=i(7636);let l=(t,e,i)=>(t.fields=e||[],t.fname=i,t);var h=i(1130);let d=t=>e=>(0,h.Z)(e,t);var u=i(4659);let c=t=>{u.Y.getInstance().error(t)},p=t=>{let e=[],i=t.length,s,r,n,a=null,o=0,l="";t+="";let h=()=>{e.push(l+t.substring(s,r)),l="",s=r+1};for(s=0,r=0;r<i;r+=1)if("\\"===(n=t[r]))l+=t.substring(s,r),l+=t.substring(++r,++r),s=r;else if(n===a)h(),a=null,o=-1;else{if(a)continue;s===o&&'"'===n||s===o&&"'"===n?(s=r+1,a=n):"."!==n||o?"["===n?(r>s&&h(),o=s=r+1):"]"===n&&(o||c("Access path missing open bracket: "+t),o>0&&h(),o=0,s=r+1):r>s?h():s=r+1}return o&&c("Access path missing closing bracket: "+t),a&&c("Access path missing closing quote: "+t),r>s&&(r+=1,h()),e},g=(t,e,i={})=>{if((0,a.Z)(t))return t;let s=p(t),r=1===s.length?s[0]:t;return l((i&&i.get||d)(s),[r],e||r)},m=(t,e,i={})=>{if((0,o.Z)(t)){let s=t.map(t=>g(t,e,i));return t=>s.map(e=>e(t))}return g(t,e,i)};var f=i(7911),v=i(9689),_=i(1114);function y(t,e,i,a,o){i&&((0,v.hR)(i)?e.forEach(e=>{let s=(0,v.ZO)(i,a,e.datum,t);Object.assign(e.nextAttrs,s)}):Object.keys(i).forEach(l=>{var h,d;let u=i[l],c=o&&!(0,_.ny)(t.mark.markType,l)?[e[0]]:e;if((0,f.zO)(u)){let t=(0,v.Ur)(u.scale,a),e=null!==(h=null==u?void 0:u.offset)&&void 0!==h?h:0,i=!(0,s.Z)(u.band)&&t.bandwidth?t.bandwidth()*u.band:null,o=(0,r.Z)(null==u?void 0:u.field),p=o?m(u.field):null,g=o?null:(0,s.Z)(null==u?void 0:u.value)?0:null===(d=t.scale)||void 0===d?void 0:d.call(t,u.value);c.forEach(s=>{var r;o&&(g=null===(r=t.scale)||void 0===r?void 0:r.call(t,p(s.datum))),s.nextAttrs[l]=(0,n.Z)(g)||(0,n.Z)(i)?g+e+i:g})}else if((0,f.CJ)(u)){let t=m(u.field);c.forEach(e=>{e.nextAttrs[l]=t(e.datum)})}else c.forEach(e=>{e.nextAttrs[l]=(0,v.ZO)(u,a,e.datum,t)})}))}function b(t,e,i,a){if(!t)return null;if((0,v.hR)(t))return(0,v.ZO)(t,a,e,i);let o={};return Object.keys(t).forEach(l=>{var h,d,u;let c=t[l];if((0,f.zO)(c)){let t=(0,v.Ur)(c.scale,a),i=null!==(h=null==c?void 0:c.offset)&&void 0!==h?h:0,p=!(0,s.Z)(c.band)&&t.bandwidth?t.bandwidth()*c.band:null,g=(0,r.Z)(null==c?void 0:c.field),f=g?m(c.field):null,_=g?null===(d=t.scale)||void 0===d?void 0:d.call(t,f(e)):(0,s.Z)(null==c?void 0:c.value)?0:null===(u=t.scale)||void 0===u?void 0:u.call(t,c.value);o[l]=(0,n.Z)(_)||(0,n.Z)(p)?_+i+p:_}else if((0,f.CJ)(c)){let t=m(c.field);o[l]=t(e)}else o[l]=(0,v.ZO)(c,a,e,i)}),o}},21:function(t,e,i){i.d(e,{d6:()=>ex,O6:()=>em,__:()=>e_,ML:()=>ef,to:()=>ec,uS:()=>ep,LG:()=>eu,MM:()=>eA,cB:()=>eg,lA:()=>el,vq:()=>ed,Xo:()=>eS,n7:()=>ey,lo:()=>ev,vi:()=>eb,jd:()=>eh});var s,r,n,a,o,l=i(4761),h=i(2698),d=i(411);class u extends d.ZA{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){let e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){let t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function c(t){return new u(t)}var p=i(7578);function g(){g.__loaded||(g.__loaded=!0,p.i.RegisterGraphicCreator("shadowRoot",c))}g.__loaded=!1;var m=i(7881),f=i(5102),v=i(534),_=i(1749),y=i(6502);class b extends f.w{constructor(t){super(t),this.type="arc3d",this.numberType=_.IJ}updateAABBBounds(t,e,i){let s=this.stage;if(!s||!s.camera)return i;let{outerRadius:r=e.outerRadius,height:n=0}=t,a=r+n;return i.setValue(-a,-a,a,a),v.w.graphicService.updateTempAABBBounds(i),v.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}getNoWorkAnimateAttr(){return b.NOWORK_ANIMATE_ATTR}}function x(t){return new b(t)}b.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},y.Wl);var S=i(8103),A=i(9904),k=i(9772),w=i(6420);class T{constructor(t,e,i=.8){this.dir=t,this.color=e,this.colorRgb=k.VH.Get(e,k.Mr.Color1),this.ambient=i;let s=(0,S._b)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this.formatedDir=[t[0]/s,t[1]/s,t[2]/s]}computeColor(t,e){let i;let s=this.formatedDir,r=(0,S.VV)((0,S.Fp)((t[0]*s[0]+t[1]*s[1]+t[2]*s[2])*(1-this.ambient/2),0)+this.ambient,1);i=(0,A.Z)(e)?k.VH.Get(e,k.Mr.Color1):e;let n=this.colorRgb;return`rgb(${n[0]*i[0]*r}, ${n[1]*i[1]*r}, ${n[2]*i[2]*r})`}}let C=()=>{w.F.registerPlugin("DirectionalLight",T)};var M=i(8113),E=i(7317);class B{set params(t){this._params=Object.assign({},t),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(t){this.params=t}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=M.yp.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=M.yp.allocate());let{pos:t,center:e,up:i}=this.params.viewParams;return(0,E.zB)(this._viewMatrixCached,t,e,i),this._vp||(this._vp=M.yp.allocate()),this._vp=(0,E.G9)(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=M.yp.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=M.yp.allocate());let{left:t,top:e,right:i,bottom:s}=this._params;return(0,E.M5)(this._projectionMatrixCached,t,i,s,e,0,-2e6),this._vp||(this._vp=M.yp.allocate()),this._vp=(0,E.G9)(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){let{fieldRatio:t=.8,fieldDepth:e,left:i,right:s}=this._params;return(null!=e?e:s-i)*t}getProjectionScale(t){let e=this.getField();return e/(e+t)}view(t,e,i){let s=[0,0,0];return(0,E.fF)(s,[t,e,i],this._viewMatrixCached),s}vp(t,e,i){let s=[0,0,0],{pos:r}=this._params.viewParams;(0,E.fF)(s,[t,e,i],this._viewMatrixCached),t=s[0],e=s[1],i=s[2];let n=this.getProjectionScale(i);return{x:t*n+r[0],y:e*n+r[1]}}}let O=()=>{w.F.registerPlugin("OrthoCamera",B)};var I=i(6480),R=i(8429),P=i(7428),L=i(8535),D=i(9292);let Z=class extends D.Y{constructor(){super(...arguments),this.numberType=_.IJ}drawShape(t,e,i,s,r,n,a,o){var l;let h=(0,L.gh)(t,null==n?void 0:n.theme).arc,{fill:d=h.fill}=t.attribute,u=this.valid(t,h,a,o);if(!u)return;let{fVisible:c,sVisible:p,doFill:g,doStroke:m}=u,f=null!==(l=this.z)&&void 0!==l?l:0,{outerPadding:v=h.outerPadding,innerPadding:_=h.innerPadding,height:y=10}=t.attribute,{outerRadius:b=h.outerRadius,innerRadius:x=h.innerRadius}=t.attribute;b+=v,x-=_;let A=k.VH.Get(d,k.Mr.Color255),{light:w}=r.stage||{},T=r.hack_pieFace,C={top:f,bottom:f+y},M={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};"bottom"===T||"top"===T?(e.beginPath(),function(t,e,i,s,r,n,a){let{startAngle:o,endAngle:l}=t.getParsedAngle(),h=(0,S.Wn)(l-o),d=l>o,u=!1;if(n<a){let t=n;n=a,a=t}if(n<=S.Ho)e.moveTo(i,s,r);else if(h>=S.f7-S.Ho)e.moveTo(i+n*(0,S.mC)(o),s+n*(0,S.O$)(o),r),e.arc(i,s,n,o,l,!d,r),a>S.Ho&&(e.moveTo(i+a*(0,S.mC)(l),s+a*(0,S.O$)(l),r),e.arc(i,s,a,l,o,d,r));else{let{outerDeltaAngle:h,innerDeltaAngle:u,outerStartAngle:c,outerEndAngle:p,innerEndAngle:g,innerStartAngle:m}=t.getParsePadAngle(o,l),f=n*(0,S.mC)(c),v=n*(0,S.O$)(c),_=a*(0,S.mC)(g),y=a*(0,S.O$)(g);h<.001||(e.moveTo(i+f,s+v,r),e.arc(i,s,n,c,p,!d,r)),!(a>S.Ho)||u<.001?e.lineTo(i+_,s+y,r):(e.lineTo(i+_,s+y,r),e.arc(i,s,a,g,m,d,r))}e.closePath()}(t,e,i,s,C[T],b,x),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),g&&(a?a(e,t.attribute,h):c&&(e.setCommonStyle(t,t.attribute,i,s,h),e.fillStyle=w?w.computeColor(M[T],A):d,e.fill())),m&&(o?o(e,t.attribute,h):p&&(e.setStrokeStyle(t,t.attribute,i,s,h),e.stroke()))):"outside"!==T&&"inside"!==T||("inside"===T&&(e.save(),e.beginPath(),e.arc(i,s,x,0,S.f7,!0,C.top),e.clip()),e.beginPath(),function(t,e,i,s,r,n,a,o){let{startAngle:l,endAngle:h}=t.getParsedAngle(),d=(0,S.Wn)(h-l),u=h>l,c=!1;if(a<=S.Ho)e.moveTo(i,s,r);else if(d>=S.f7-S.Ho)e.moveTo(i+a*(0,S.mC)(l),s+a*(0,S.O$)(l),r),e.arc(i,s,a,l,h,!u,r),e.lineTo(i+a*(0,S.mC)(h),s+a*(0,S.O$)(h),n),e.arc(i,s,a,h,l,u,n);else{let{innerouterDeltaAngle:t,innerouterStartAngle:d,innerouterEndAngle:c}=o(l,h),p=a*(0,S.mC)(d),g=a*(0,S.O$)(d),m=a*(0,S.mC)(c),f=a*(0,S.O$)(c);t<.001||(e.moveTo(i+p,s+g,r),e.arc(i,s,a,d,c,!u,r),e.lineTo(i+m,s+f,n),e.arc(i,s,a,c,d,u,n))}e.closePath()}(t,e,i,s,C.top,C.bottom,"outside"===T?b:x,(e,i)=>{let{outerDeltaAngle:s,innerDeltaAngle:r,outerStartAngle:n,outerEndAngle:a,innerEndAngle:o,innerStartAngle:l}=t.getParsePadAngle(e,i);return"outside"===T?{innerouterDeltaAngle:s,innerouterEndAngle:a,innerouterStartAngle:n}:{innerouterDeltaAngle:r,innerouterEndAngle:o,innerouterStartAngle:l}}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),g&&(a?a(e,t.attribute,h):c&&(e.setCommonStyle(t,t.attribute,i,s,h),e.fillStyle=w?w.computeColor(M[T],A):d,e.fill())),m&&(o?o(e,t.attribute,h):p&&(e.setStrokeStyle(t,t.attribute,i,s,h),e.stroke())),"inside"===T&&e.restore())}draw(t,e,i,s){let r=(0,L.gh)(t,null==s?void 0:s.theme).arc;this._draw(t,r,!1,i,s)}};Z=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)()],Z);var F=i(4481);let j=!1,H=new R.n(t=>{j||(j=!0,t(F.AC).to(Z).inSingletonScope(),t(F.uz).toService(F.AC))});var z=i(479),N=i(1600),V=i(4021);let U=class extends V.D{constructor(t){super(),this.canvasRenderer=t,this.type="arc3d",this.numberType=_.IJ,this.themeType="arc"}};U=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)(),(s=(0,N.f)(F.AC),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],U);let G=!1,W=new R.n((t,e,i,s)=>{G||(G=!0,t(z.Dp).to(U).inSingletonScope(),t(z.EL).toService(z.Dp))});function X(){X.__loaded||(X.__loaded=!0,p.i.RegisterGraphicCreator("arc3d",x),C(),O(),I.n.load(H),I.n.load(W))}X.__loaded=!1;var Y=i(2683),$=i(7795);class K extends $.m{constructor(t){super(t),this.type="pyramid3d",this.numberType=_.jp}updateAABBBounds(t,e,i){let s=this.stage;return s&&s.camera&&(this.findFace().vertices.forEach(t=>{let e=t[0],s=t[1];i.add(e,s)}),v.w.graphicService.updateTempAABBBounds(i),v.w.graphicService.transformAABBBounds(t,i,e,!1,this)),i}findFace(){let{points:t}=this.attribute,e=t.map((e,i)=>{let s=3===i?t[0]:t[i+1],r=e.x-s.x;return 0===r?0:(e.y-s.y)/r}),i=t.map(t=>({p:t,d:0})),s=!1,r=0;for(let t=0;t<e.length-1;t++){for(let n=t+1;n<e.length;n++){if(e[t]===e[n]){s=!0;let e=Y.HL.distancePP(i[t].p,i[t+1].p);i[t].d=e,i[t+1].d=e,r=(0,S.Fp)(r,e);let a=Y.HL.distancePP(i[n].p,i[n+1].p);i[n].d=a,i[n+1].d=a,r=(0,S.Fp)(r,a)}if(s)break}if(s)break}for(let e=t.length-1;e>=0;e--){let s=t[e];i.unshift({p:s,d:0})}for(let e=0;e<t.length;e++){let s=(r-i[e+t.length].d)/2;i[e].d+=s,i[e+t.length].d+=s}let n={polygons:[],vertices:[],edges:[]};return i.forEach(t=>{n.vertices.push([t.p.x,t.p.y,t.d])}),n.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),n.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),n.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),n.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),n.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),n.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),n.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],n}_isValid(){return super._isValid()&&4===this.attribute.points.length}getNoWorkAnimateAttr(){return K.NOWORK_ANIMATE_ATTR}}function q(t){return new K(t)}K.NOWORK_ANIMATE_ATTR=y.Wl;class J extends D.Y{stroke(t,e,i,s,r){let n=s.vertices;s.edges.forEach(s=>{let a=n[s[0]],o={x:t+a[0],y:e+a[1],z:i+a[2]},l=n[s[1]],h={x:t+l[0],y:e+l[1],z:i+l[2]};r.beginPath(),r.moveTo(o.x,o.y,o.z),r.lineTo(h.x,h.y,h.z),r.stroke()})}fill(t,e,i,s,r,n,a,o,l,h,d){let u=k.VH.Get(n,k.Mr.Color255),c=s.vertices,p=c.map(t=>a.view(t[0],t[1],t[2])[2]),g=[];s.polygons.forEach((t,e)=>{if(r&&!r[e])return;g.push({faceIdx:e,polygon:t});let{polygon:i}=t,s=p[i[0]],n=p[i[1]],a=p[i[2]],o=p[i[3]];t.ave_z=s+n+a+o}),g.sort((t,e)=>e.polygon.ave_z-t.polygon.ave_z),g.forEach(s=>{let{polygon:r,normal:p}=s.polygon,g=c[r[0]],m=c[r[1]],f=c[r[2]],v=c[r[3]],_={x:t+g[0],y:e+g[1],z:i+g[2]},y={x:t+m[0],y:e+m[1],z:i+m[2]},b={x:t+f[0],y:e+f[1],z:i+f[2]},x={x:t+v[0],y:e+v[1],z:i+v[2]};a.beginPath(),a.moveTo(_.x,_.y,_.z),a.lineTo(y.x,y.y,y.z),a.lineTo(b.x,b.y,b.z),a.lineTo(x.x,x.y,x.z),a.closePath(),d?d(a,l&&l.attribute,h):(a.fillStyle=o?o.computeColor(p,u):n,a.fill())})}}let Q=class extends J{constructor(){super(...arguments),this.type="pyramid3d",this.numberType=_.jp}drawShape(t,e,i,s,r,n,a,o){var l;let h=(0,L.gh)(t,null==n?void 0:n.theme).polygon,{fill:d=h.fill,stroke:u=h.stroke,face:c=[!0,!0,!0,!0,!0,!0]}=t.attribute,p=null!==(l=this.z)&&void 0!==l?l:0;if(!this.valid(t,h,a,o))return;let{light:g}=r.stage||{},m=t.findFace();if(!1!==d){e.setCommonStyle(t,t.attribute,i,s,h);let r=d;"string"!=typeof r&&(r="black"),this.fill(i,s,p,m,c,r,e,g,t,h,a)}!1!==u&&(e.setStrokeStyle(t,t.attribute,i,s,h),this.stroke(i,s,p,m,e))}draw(t,e,i){let s=(0,L.gh)(t).polygon;this._draw(t,s,!1,i)}};Q=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)()],Q);let tt=!1,te=new R.n(t=>{tt||(tt=!0,t(F.sP).to(Q).inSingletonScope(),t(F.uz).toService(F.sP))}),ti=class extends V.D{constructor(t){super(),this.canvasRenderer=t,this.type="pyramid3d",this.numberType=_.jp,this.themeType="polygon"}};ti=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)(),(r=(0,N.f)(F.sP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],ti);let ts=!1,tr=new R.n((t,e,i,s)=>{ts||(ts=!0,t(z.O2).to(ti).inSingletonScope(),t(z.EL).toService(z.O2))});function tn(){tn.__loaded||(tn.__loaded=!0,p.i.RegisterGraphicCreator("pyramid3d",q),C(),O(),I.n.load(te),I.n.load(tr))}tn.__loaded=!1;var ta=i(3483),to=i(9367),tl=i(4437),th=i(9536),td=i(1369),tu=i(7307),tc=i(5385);let tp=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];class tg extends tc.U{constructor(t){super(t),this.type="rect3d",this.numberType=_.ZV}findFace(){let t={polygons:[],vertices:[],edges:[]},e=this.getGraphicTheme(),{x1:i,y1:s,x:r,y:n,length:a=(0,S.VV)(e.width,e.height)}=this.attribute,{width:o,height:l}=this.attribute;o=null!=o?o:i-r,l=null!=l?l:s-n;for(let e=0;e<tp.length;e++){let i=tp[e];t.vertices.push([i[0]*o,i[1]*l,i[2]*a])}return t.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),t.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),t.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),t.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),t.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),t.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),t.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],t}getNoWorkAnimateAttr(){return tg.NOWORK_ANIMATE_ATTR}}function tm(t){return new tg(t)}tg.NOWORK_ANIMATE_ATTR=y.Wl;var tf=i(6003);let tv=class extends J{constructor(){super(...arguments),this.type="rect3d",this.numberType=_.ZV}drawShape(t,e,i,s,r,n,a,o){var l;let h=(0,L.gh)(t,null==n?void 0:n.theme).rect,{fill:d=h.fill,stroke:u=h.stroke,x1:c,y1:p,x:g,y:m,opacity:f=h.opacity,fillOpacity:v=h.fillOpacity,lineWidth:_=h.lineWidth,strokeOpacity:y=h.strokeOpacity,visible:b=h.visible}=t.attribute,{width:x,height:S}=t.attribute;x=(null!=x?x:c-g)||0,S=(null!=S?S:p-m)||0;let A=null!==(l=this.z)&&void 0!==l?l:0,k=(0,tf.GT)(f,v,x,S,d),w=(0,tf.Ze)(f,y,x,S),T=(0,tf.dz)(d),C=(0,tf.ak)(u,_);if(!t.valid||!b||!T&&!C||!(k||w||a||o))return;let{light:M}=r.stage||{},E=t.findFace();if(!1!==d){e.setCommonStyle(t,t.attribute,i,s,h);let r=d;"string"!=typeof r&&(r="black"),this.fill(i,s,A,E,null,r,e,M,null,null,a)}!1!==u&&(e.setStrokeStyle(t,t.attribute,i,s,h),this.stroke(i,s,A,E,e))}draw(t,e,i){let s=(0,L.gh)(t).rect;this._draw(t,s,!1,i)}};tv=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)()],tv);let t_=!1,ty=new R.n(t=>{t_||(t_=!0,t(F.K2).to(tv).inSingletonScope(),t(F.uz).toService(F.K2))}),tb=class extends V.D{constructor(t){super(),this.canvasRenderer=t,this.type="rect3d",this.numberType=_.ZV,this.themeType="rect"}};tb=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)(),(n=(0,N.f)(F.K2),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tb);let tx=!1,tS=new R.n((t,e,i,s)=>{tx||(tx=!0,t(z.DS).to(tb).inSingletonScope(),t(z.EL).toService(z.DS))});function tA(){tA.__loaded||(tA.__loaded=!0,p.i.RegisterGraphicCreator("rect3d",tm),I.n.load(ty),I.n.load(tS))}tA.__loaded=!1;var tk=i(489),tw=i(5757),tT=i(4683),tC=i(4914);class tM extends y.zs{constructor(t){super(t),this.type="glyph",this.numberType=_.Nd,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(t){this.detachSubGraphic(),this.subGraphic=t,t.forEach(t=>{t.glyphHost=this,Object.setPrototypeOf(t.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(t=>{t.glyphHost=null,Object.setPrototypeOf(t.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(t){this._onInit=t}onUpdate(t){this._onUpdate=t}isValid(){return!0}setAttribute(t,e,i,s){super.setAttribute(t,e,i,s),this.subGraphic.forEach(t=>{t.addUpdateShapeAndBoundsTag(),t.addUpdatePositionTag()})}setAttributes(t,e=!1,i){super.setAttributes(t,e,i),this.subGraphic.forEach(t=>{t.addUpdateShapeAndBoundsTag(),t.addUpdatePositionTag()})}translate(t,e){return super.translate(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}translateTo(t,e){return super.translateTo(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}scale(t,e,i){return super.scale(t,e,i),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}scaleTo(t,e){return super.scaleTo(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotate(t){return super.rotate(t),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotateTo(t){return super.rotate(t),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}getGraphicTheme(){return(0,L.gh)(this).glyph}updateAABBBounds(t,e,i){return this.getSubGraphic().forEach(t=>{i.union(t.AABBBounds)}),i}doUpdateAABBBounds(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();let t=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),t}needUpdateTags(t){return!1}needUpdateTag(t){return!1}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null===(i=this.currentStates)||void 0===i?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;this.stopStateAnimates();let s={},r=this.subGraphic.map(()=>({}));t.forEach(e=>{var i;let n=this.glyphStateProxy?this.glyphStateProxy(e,t):this.glyphStates[e];n&&(Object.assign(s,n.attributes),(null===(i=n.subAttributes)||void 0===i?void 0:i.length)&&r.forEach((t,e)=>{Object.assign(t,n.subAttributes[e])}))}),this.subGraphic.forEach((i,s)=>{i.updateNormalAttrs(r[s]),i.applyStateAttrs(r[s],t,e)}),this.updateNormalAttrs(s),this.currentStates=t,this.applyStateAttrs(s,t,e)}clearStates(t){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.subGraphic.forEach(e=>{e.applyStateAttrs(e.normalAttrs,this.currentStates,t,!0),e.normalAttrs=null}),this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}clone(){let t=new tM(Object.assign({},this.attribute));return t.setSubGraphic(this.subGraphic.map(t=>t.clone())),t}getNoWorkAnimateAttr(){return tM.NOWORK_ANIMATE_ATTR}}function tE(t){return new tM(t)}tM.NOWORK_ANIMATE_ATTR=y.Wl;let tB=class{constructor(){this.numberType=_.Nd}drawShape(t,e,i,s,r,n,a,o){r.drawContribution&&t.getSubGraphic().forEach(t=>{let l=r.drawContribution.getRenderContribution(t);l&&l.drawShape&&l.drawShape(t,e,i,s,r,n,a,o)})}draw(t,e,i,s){let{context:r}=i;if(!r||(r.highPerformanceSave(),!i.drawContribution))return;let n=(0,L.gh)(t),a=t.getSubGraphic();a.length&&a.forEach(t=>{i.drawContribution.renderItem(t,i,{theme:n})}),r.highPerformanceRestore()}};tB=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)()],tB);let tO=!1,tI=new R.n(t=>{tO||(tO=!0,t(F.FU).to(tB).inSingletonScope(),t(F.uz).toService(F.FU))});var tR=i(1671);class tP{constructor(){this.type="glyph",this.numberType=_.Nd}contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:s}=null!=i?i:{};if(!s)return!1;let r=null==i?void 0:i.pickerService;if(r){let s=!1;return t.getSubGraphic().forEach(t=>{if(s)return;let n=r.pickItem(t,e,null,i);s=!(!n||!n.graphic)}),s}return!1}}let tL=class extends tP{constructor(t){super(),this.canvasRenderer=t}};tL=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)(),(a=(0,N.f)(F.FU),function(t,e){a(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tL);let tD=!1,tZ=new R.n((t,e,i,s)=>{tD||(tD=!0,t(z.Se).to(tL).inSingletonScope(),t(z.EL).toService(z.Se))}),tF=class extends tP{constructor(t){super(),this.canvasRenderer=t}};tF=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,P.b)(),(o=(0,N.f)(F.FU),function(t,e){o(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tF);let tj=!1,tH=new R.n((t,e,i,s)=>{tj||(tj=!0,t(z.Uv).to(tF).inSingletonScope(),t(tF).toService(z.Uv))});function tz(){tz.__loaded||(tz.__loaded=!0,p.i.RegisterGraphicCreator("glyph",tE),I.n.load(tI),I.n.load(tR.X?tZ:tH))}tz.__loaded=!1;var tN=i(4951),tV=i(5512),tU=i(7004),tG=i(4051),tW=i(5196),tX=i(2875),tY=i(1636),t$=i(325),tK=i(6082),tq=i(1805),tJ=i(5859),tQ=i(8378),t0=i(4309),t1=i(3901),t2=i(3309),t3=i(9038),t5=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class t8{constructor(t,e,i,s,r,n,a,o,l){this.refDatum=t,this.center=e,this.outerCenter=i,this.quadrant=s,this.radian=r,this.middleAngle=n,this.innerRadius=a,this.outerRadius=o,this.circleCenter=l,this.labelVisible=!0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class t6 extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,t$.Z)({},t6.defaultAttributes,t5(t,["data"])))),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map,this._line2MinLength=0,this._alignOffset=0}_overlapping(t){return["inside","inside-center"].includes(this.attribute.position)?super._overlapping(t):t}labeling(t,e,i="outside",s=0){if(t&&e)return{x:0,y:0}}_layout(t){var e,i,s;if(!t||!t.length)return;let r=super._layout(t),n=r.map(t=>this.getGraphicBounds(t)),a=Object.assign(Object.assign({},this.attribute.textStyle),{text:"…"}),o=1/0;if(!1!==a.ellipsis){let t=this._createLabelText(a),e=this.getGraphicBounds(t);o=e.x2-e.x1}let l=r.map(t=>t.attribute),h=Array.from(this._idToGraphic.values());this._line2MinLength=(0,t3.Z)(this.attribute.line.line2MinLength)?this.attribute.line.line2MinLength(t,h,this.attribute):this.attribute.line.line2MinLength,this._alignOffset=null!==(e=(0,t3.Z)(this.attribute.layout.alignOffset)?this.attribute.layout.alignOffset(t,h,this.attribute):this.attribute.layout.alignOffset)&&void 0!==e?e:0;let d=this.layoutArcLabels(this.attribute.position,this.attribute,h,l,n,o);for(let t=0;t<l.length;t++){let e=l[t],n=d.find(t=>{var i;return(null===(i=t.refDatum)||void 0===i?void 0:i.id)===e.id});if(n){let e={visible:n.labelVisible,x:n.labelPosition.x,y:n.labelPosition.y,angle:n.angle,points:n.pointA&&n.pointB&&n.pointC?[n.pointA,n.pointB,n.pointC]:void 0,line:n.labelLine};"richtext"===r[t].type?e.width=null!==(i=n.labelLimit)&&void 0!==i?i:r[t].attribute.width:e.maxLineWidth=null!==(s=n.labelLimit)&&void 0!==s?s:r[t].attribute.maxLineWidth,n.refArc&&"arc3d"===n.refArc.type&&(e.anchor3d=[n.circleCenter.x-e.x,n.circleCenter.y-e.y],e.beta=n.refArc.attribute.beta),r[t].setAttributes(e)}}return r}layoutArcLabels(t,e,i,s,r,n){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=n;let a=0;i.forEach(t=>{t.attribute.outerRadius>a&&(a=t.attribute.outerRadius)}),s.forEach((t,i)=>{var n,o;let l=this._idToGraphic.get(t.id),h=l.attribute,d={x:null!==(n=null==h?void 0:h.x)&&void 0!==n?n:0,y:null!==(o=null==h?void 0:h.y)&&void 0!==o?o:0};if(!(0,tK.Z)(s[i])&&!(0,tK.Z)(r[i])){let t=s[i]?s[i]:null,n=r[i]?r[i]:{x1:0,x2:0,y1:0,y2:0},o=(h.startAngle+h.endAngle)/2,u=h.endAngle-h.startAngle,c=(0,tq.tc)(h.endAngle-u/2),p=new t8(t,(0,tq.op)(d,h.outerRadius,o),(0,tq.op)(d,a+e.line.line1MinLength,o),c,u,o,h.innerRadius,h.outerRadius,d);p.refArc=l,p.pointA=(0,tq.op)(d,this.computeDatumRadius(2*d.x,2*d.y,h.outerRadius),p.middleAngle),p.labelSize={width:n.x2-n.x1,height:n.y2-n.y1},(0,t1.sk)(p.quadrant)?this._arcRight.set(p.refDatum,p):(0,t1.vE)(p.quadrant)&&this._arcLeft.set(p.refDatum,p)}});let o=Array.from(this._arcLeft.values()),l=Array.from(this._arcRight.values()),h=[];switch(t){case"inside":case"inside-inner":case"inside-outer":case"inside-center":h.push(...this._layoutInsideLabels(l,e,i)),h.push(...this._layoutInsideLabels(o,e,i));break;default:h.push(...this._layoutOutsideLabels(l,e,i)),h.push(...this._layoutOutsideLabels(o,e,i))}return h}_layoutInsideLabels(t,e,i){var s,r;let n=e.spaceWidth,a=null!==(s=e.position)&&void 0!==s?s:"inside",o=null!==(r=e.offsetRadius)&&void 0!==r?r:-n;return t.forEach(t=>{var i,s,r;let l;let{labelSize:h,radian:d}=t,u=t.innerRadius,c=t.outerRadius;l=d<(0,t1.aD)(c,h.height)?0:c-(d>=Math.PI?u:Math.max(u,h.height/2/Math.tan(d/2)))-n,!0!==e.rotate&&(l=c-n);let p=this._getFormatLabelText(t.refDatum,l);t.labelText=p;let g=Math.min(l,t.labelSize.width),m=this._computeAlign(t,e),f,v=0;if("inside"===a&&(v="left"===m?g:"right"===m?0:g/2),f="inside-inner"===a?u-o+v:"inside-center"===a?u+(c-u)/2:c+o-v,t.labelPosition=(0,tq.op)(t.circleCenter,f,t.middleAngle),t.labelLimit=g,(0,tJ.Vy)(g,0)||(t.labelVisible=!1),!1!==e.rotate){t.angle=null!==(s=null===(i=e.textStyle)||void 0===i?void 0:i.angle)&&void 0!==s?s:t.middleAngle;let n=null!==(r=e.offsetAngle)&&void 0!==r?r:0;["inside-inner","inside-outer"].includes(a)&&(n+=Math.PI/2),t.angle+=n}}),t}_layoutOutsideLabels(t,e,i){var s,r,n;let a=null!==(s=i[0].attribute.x)&&void 0!==s?s:0,o=2*(null!==(r=i[0].attribute.y)&&void 0!==r?r:0),l=e.layout,h=e.spaceWidth;if(t.forEach(t=>{let e=(0,t1.vE)(t.quadrant)?-1:1;t.labelPosition={x:t.outerCenter.x+e*(t.labelSize.width/2+this._line2MinLength+h),y:t.outerCenter.y}}),t.sort((t,e)=>t.labelPosition.y-e.labelPosition.y),!1!==e.coverEnable||"none"===l.strategy){for(let s of t){let{labelPosition:t,labelSize:r}=s;s.labelLimit=r.width,s.pointB=(0,t1.vE)(s.quadrant)?{x:t.x+r.width/2+this._line2MinLength+h,y:t.y}:{x:t.x-r.width/2-this._line2MinLength-h,y:t.y},this._computeX(s,e,i)}!1===e.coverEnable&&"none"===l.strategy&&this._coverLabels(t)}else{let s=o/((null===(n=e.textStyle)||void 0===n?void 0:n.fontSize)||16);this._adjustY(t,s,e,i);let{minY:r,maxY:a}=t.reduce((t,e)=>{let{y1:i,y2:s}=e.getLabelBounds();return t.minY=Math.max(0,Math.min(i,t.minY)),t.maxY=Math.min(o,Math.max(s,t.maxY)),t},{minY:1/0,maxY:-1/0}),l=Math.max(Math.abs(o/2-r),Math.abs(a-o/2)),h=this._computeLayoutRadius(l,e,i);for(let s of t)this._computePointB(s,h,e,i),this._computeX(s,e,i)}let d=2*a;return t.forEach(t=>{var i,s;t.labelVisible&&((0,tJ.SQ)(t.pointB.x,this._line2MinLength+h)||(0,tJ.Vy)(t.pointB.x,d-this._line2MinLength-h))&&(t.labelVisible=!1),t.angle=null!==(s=null===(i=e.textStyle)||void 0===i?void 0:i.angle)&&void 0!==s?s:0,e.offsetAngle&&(t.angle+=e.offsetAngle),t.labelLine=Object.assign(Object.assign({},e.line),{visible:t.labelVisible})}),t}_computeX(t,e,i){var s;let r=t.circleCenter,n=this.attribute.width;this.attribute.height;let a=0;i.forEach(t=>{t.attribute.outerRadius>a&&(a=t.attribute.outerRadius)});let o=this.computeLayoutOuterRadius(a,e.width,e.height),l=e.line.line1MinLength,h=null===(s=e.layout)||void 0===s?void 0:s.align,d=e.spaceWidth,{labelPosition:u,quadrant:c,pointB:p}=t;(0,tQ.Z)(p.x*p.y)||(t.pointC={x:NaN,y:NaN},u.x=NaN,t.labelLimit=0);let g=this.computeRadius(o,e.width,e.height),m=(0,t1.vE)(c)?-1:1,f=0,v=(m>0?n-p.x:p.x-0)+this._alignOffset-this._line2MinLength-d;"labelLine"===h&&(f=(g+l+this._line2MinLength)*m+r.x,v=(m>0?n-f:f-0)-d);let _=this._getFormatLabelText(t.refDatum,v);t.labelText=_;let y=Math.min(v,t.labelSize.width);switch(h){case"labelLine":break;case"edge":f=m>0?n-y-d:0+y+d;break;default:f=p.x+m*this._line2MinLength}let b=(y=Math.max(this._ellipsisWidth,y))<t.labelSize.width-1;t.labelLimit=b?y:null,t.pointC={x:f,y:u.y};let x=this._computeAlign(t,e),S=(0,t1.qA)(x)*(b?y:t.labelSize.width);"edge"===h?(u.x=(m>0?n:0)-m*S+m*this._alignOffset,t.pointC.x+=m*this._alignOffset):u.x=f+m*(this._alignOffset+d+S)}_computeAlign(t,e){var i,s,r,n,a,o;let l=null!==(s=null===(i=e.textStyle)||void 0===i?void 0:i.textAlign)&&void 0!==s?s:null===(r=e.textStyle)||void 0===r?void 0:r.align,h=null!==(a=null===(n=e.layout)||void 0===n?void 0:n.textAlign)&&void 0!==a?a:null===(o=e.layout)||void 0===o?void 0:o.align;return"inside"!==e.position?(0,tK.Z)(l)||"auto"===l?"edge"===h?(0,t1.vE)(t.quadrant)?"left":"right":(0,t1.vE)(t.quadrant)?"right":"left":l:(0,tK.Z)(l)||"auto"===l?"center":l}_getFormatLabelText(t,e){var i;return null!==(i=null==t?void 0:t.text)&&void 0!==i?i:""}_adjustY(t,e,i,s){var r;s[0].attribute.x;let n=2*(null!==(r=s[0].attribute.y)&&void 0!==r?r:0),a=i.layout;if("vertical"===a.strategy){let e,i=0,s=t.length;if(s<=0)return;for(let r=0;r<s;r++){let{y1:n}=t[r].getLabelBounds();if(e=n-i,(0,tJ.SQ)(e,0)){let i=this._shiftY(t,r,s-1,-e);this._shiftY(t,i,0,e/2)}let{y2:a}=t[r].getLabelBounds();i=a}let{y1:r}=t[0].getLabelBounds();e=r-0,(0,tJ.SQ)(e,0)&&this._shiftY(t,0,s-1,-e);for(let e=t.length-1;e>=0&&t[e].getLabelBounds().y2>n;e--)t[e].labelVisible=!1}else if("none"!==a.strategy){let r=t.map((t,e)=>({arc:t,originIndex:e,priorityIndex:0}));r.sort((t,e)=>e.arc.radian-t.arc.radian),r.forEach((t,e)=>{t.priorityIndex=e,t.arc.labelVisible=!1});let o=1/0,l=-1/0;for(let h=0;h<e&&h<t.length;h++){let e;this._storeY(t);let d=r[h].arc;this._computeYRange(d,i,s),d.labelVisible=!0;let u=d.labelPosition.y,{lastIndex:c,nextIndex:p}=this._findNeighborIndex(t,r[h]),g=t[c],m=t[p];if(-1===c&&-1!==p){let e=m.labelPosition.y;u>e?d.labelPosition.y=e-m.labelSize.height/2-d.labelSize.height/2:this._twoWayShift(t,d,m,p)}else if(-1!==c&&-1===p){let e=g.labelPosition.y;u<e?d.labelPosition.y=e+g.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(t,g,d,r[h].originIndex)}else if(-1!==c&&-1!==p){let e=g.labelPosition.y,i=m.labelPosition.y;u>i?(d.labelPosition.y=i-m.labelSize.height/2-d.labelSize.height/2,this._twoWayShift(t,g,d,r[h].originIndex)):(u<e?d.labelPosition.y=e+g.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(t,g,d,r[h].originIndex),this._twoWayShift(t,d,m,p))}let f=Math.min(o,r[h].originIndex),v=Math.max(l,r[h].originIndex);if(e=t[v].getLabelBounds().y2-n,(0,tJ.Vy)(e,0)&&this._shiftY(t,v,0,-e),e=t[f].getLabelBounds().y1-0,(0,tJ.SQ)(e,0)&&this._shiftY(t,f,t.length-1,-e),e=t[v].getLabelBounds().y2-n,(0,tJ.Vy)(e,0)){d.labelVisible=!1,this._restoreY(t);break}a.tangentConstraint&&!this._checkYRange(t)?(d.labelVisible=!1,this._restoreY(t)):(o=f,l=v)}}}_shiftY(t,e,i,s){let r=e<i?1:-1,n=e;for(;-1!==n;){t[n].labelPosition.y+=s;let e=this._findNextVisibleIndex(t,n,i,r);if(e>=0&&e<t.length){let{y1:i,y2:s}=t[n].getLabelBounds(),{y1:a,y2:o}=t[e].getLabelBounds();if(r>0&&s<a||r<0&&i>o)return n}n=e}return i}_findNextVisibleIndex(t,e,i,s){let r=(i-e)*s;for(let i=1;i<=r;i++){let r=e+i*s;if(t[r].labelVisible)return r}return -1}_computePointB(t,e,i,s){let r=0;s.forEach(t=>{t.attribute.outerRadius>r&&(r=t.attribute.outerRadius)});let n=this.computeLayoutOuterRadius(r,i.width,i.height),a=i.line.line1MinLength;if("none"===i.layout.strategy)t.pointB={x:t.outerCenter.x,y:t.outerCenter.y};else{let s=t.circleCenter,r=this.computeRadius(n,i.width,i.height),{labelPosition:o,quadrant:l}=t,h=e-Math.max(r+a,t.outerRadius),d=Math.sqrt(e**2-Math.abs(s.y-o.y)**2)-h;(0,tQ.Z)(d)?t.pointB={x:s.x+d*((0,t1.vE)(l)?-1:1),y:o.y}:t.pointB={x:NaN,y:NaN}}}_storeY(t){for(let e of t)e.labelVisible&&(e.lastLabelY=e.labelPosition.y)}_computeYRange(t,e,i){let s,r,n,a,o;let l=t.circleCenter,h={width:2*l.x,height:2*l.y},d=0;i.forEach(t=>{t.attribute.outerRadius>d&&(d=t.attribute.outerRadius)});let u=this.computeLayoutOuterRadius(d,e.width,e.height),c=e.line.line1MinLength,{width:p,height:g}=h,m=this.computeRadius(u,e.width,e.height),f=this._computeLayoutRadius(g/2,e,i),v=Math.abs(t.center.x-p/2),_=t.center.y-g/2;if((0,tJ.Yt)(p/2,v))s=0,r=1,n=-_;else if((0,tJ.Yt)(g/2,_))s=1,r=0,n=-v;else{let t=-1/(_/v);s=t,r=-1,n=_-t*v}let y=(0,t1.KZ)(s,r,n,c+m-f,0,f);y.length<2||(y[0].x>y[1].x&&y.reverse(),y[0].x<0?(0,tJ.Yt)(y[0].y,y[1].y)?(0,tJ.Vy)(t.middleAngle,-Math.PI)&&(0,tJ.SQ)(t.middleAngle,0)||(0,tJ.Vy)(t.middleAngle,Math.PI)&&(0,tJ.SQ)(t.middleAngle,2*Math.PI)?(a=0,o=y[1].y+g/2):(a=y[1].y+g/2,o=g):y[0].y<y[1].y?(a=0,o=y[1].y+g/2):(a=y[1].y+g/2,o=h.height):(a=Math.min(y[0].y,y[1].y)+g/2,o=Math.max(y[0].y,y[1].y)+g/2),t.labelYRange=[a,o])}_computeLayoutRadius(t,e,i){let s=e.layoutArcGap,r=e.line.line1MinLength,n=0;i.forEach(t=>{t.attribute.outerRadius>n&&(n=t.attribute.outerRadius)});let a=this.computeLayoutOuterRadius(n,e.width,e.height),o=this.computeRadius(a,e.width,e.height)+r,l=o-s;return Math.max((l**2+t**2)/(2*l),o)}_findNeighborIndex(t,e){let i=e.originIndex,s=-1,r=-1;for(let e=i-1;e>=0;e--)if(t[e].labelVisible){s=e;break}for(let e=i+1;e<t.length;e++)if(t[e].labelVisible){r=e;break}return{lastIndex:s,nextIndex:r}}_twoWayShift(t,e,i,s){let r=i.getLabelBounds().y1-e.getLabelBounds().y2;if((0,tJ.SQ)(r,0)){let e=this._shiftY(t,s,t.length-1,-r);this._shiftY(t,e,0,r/2)}}_restoreY(t){for(let e of t)e.labelVisible&&(e.labelPosition.y=e.lastLabelY)}_checkYRange(t){for(let e of t){let{labelYRange:t,labelPosition:i}=e;if(e.labelVisible&&t&&((0,tJ.SQ)(i.y,t[0])||(0,tJ.Vy)(i.y,t[1])))return!1}return!0}_coverLabels(t){if(t.length<=1)return;let e=t[0].getLabelBounds();for(let i=1;i<t.length;i++){let s=t[i].getLabelBounds();(0,t1.qP)(e,s)?t[i].labelVisible=!1:e=s}}_getLabelLinePoints(t,e){return t.attribute.points}_createLabelLine(t,e){var i,s,r,n,a;let{line:o={},visible:l}=t.attribute,h=super._createLabelLine(t,e);if(h&&(h.setAttributes({visible:null===(r=null!==(i=o.visible&&l)&&void 0!==i?i:null===(s=t.attribute)||void 0===s?void 0:s.visible)||void 0===r||r,lineWidth:null!==(a=null===(n=o.style)||void 0===n?void 0:n.lineWidth)&&void 0!==a?a:1}),o.smooth&&h.setAttributes({curveType:"basis"}),"arc3d"===e.type&&e)){let{beta:t,x:i,y:s}=e.attribute;h.setAttributes({beta:t,anchor3d:[i,s]})}return h}computeRadius(t,e,i,s){return this.computeLayoutRadius(e||0,i||0)*t*((0,tK.Z)(s)?1:s)}computeLayoutRadius(t,e){return Math.min(t/2,e/2)}_canPlaceInside(t,e){return"inside"===this.attribute.position||"inside-center"===this.attribute.position}computeLayoutOuterRadius(t,e,i){return t/(Math.min(e,i)/2)}computeDatumRadius(t,e,i){let s=this.computeLayoutOuterRadius(i,t,e);return this.computeLayoutRadius(t||0,e||0)*s}}t6.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,boundsPadding:[-1,0,-1,0],ellipsis:!0},position:"outside",line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0}};let t4=()=>{(0,t2.a)("arc",t6)};var t7=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class t9 extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,t$.Z)({},t9.defaultAttributes,t7(t,["data"])))),this.name="line-label"}getGraphicBounds(t,e={},i="end"){if(!t||"line"!==t.type&&"area"!==t.type)return super.getGraphicBounds(t,e);let s=t.attribute.points,r=t.attribute.segments;!s&&r&&r.length&&(s=r.reduce((t,e)=>{var i;return t.concat(null!==(i=e.points)&&void 0!==i?i:[])},[])),s&&0!==s.length||(s=[e]);let n="start"===i?0:s.length-1;return s[n]?{x1:s[n].x,x2:s[n].x,y1:s[n].y,y2:s[n].y}:void 0}labeling(t,e,i="end",s=0){return(0,t1.KN)(t,e,i,s)}}t9.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};let et=()=>{(0,t2.a)("line",t9),(0,t2.a)("area",t9)};var ee=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class ei extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,t$.Z)({},ei.defaultAttributes,ee(t,["data"])))),this.name="symbol-label"}labeling(t,e,i="top",s=0){return(0,t1.hw)(t,e,i,s)}}ei.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let es=()=>{(0,t2.a)("symbol",ei),(0,t2.a)("line-data",ei)};var er=i(8727),en=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};class ea extends t0.E{constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,t$.Z)({},ea.defaultAttributes,en(t,["data"]))))}labeling(t,e,i="top",s=0){if(!t||!e)return;let{x1:r,y1:n,x2:a,y2:o}=t,l=Math.abs(a-r),h=Math.abs(o-n),{x:d,y:u}=(0,er.v)(e,i),c=0,p=0,g=i.includes("inside");switch(i.includes("top")?p=g?1:-1:i.includes("bottom")?p=g?-1:1:i.includes("left")?c=g?1:-1:i.includes("right")&&(c=g?-1:1),i){case"top-right":case"bottom-right":c=-1;break;case"top-left":case"bottom-left":c=1}return{x:d+c*s+c*l/2,y:u+p*s+p*h/2}}}ea.tag="rect-label",ea.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let eo=()=>{(0,t2.a)("rect",ea)},el=()=>{g(),(0,m.x)(),l.F.registerGraphic(h.Cm.arc,f.Q),t4()},eh=()=>{g(),X(),l.F.registerGraphic(h.Cm.arc3d,x)},ed=()=>{g(),tn(),l.F.registerGraphic(h.Cm.pyramid3d,q)},eu=()=>{g(),(0,ta.d)(),l.F.registerGraphic(h.Cm.area,tN.n),et(),es()},ec=()=>{g(),(0,to.M)(),l.F.registerGraphic(h.Cm.group,d.sS)},ep=()=>{g(),(0,tl.i)(),l.F.registerGraphic(h.Cm.image,tV.B)},eg=()=>{g(),(0,th.N)(),et(),es(),l.F.registerGraphic(h.Cm.line,tU.W)},em=()=>{g(),(0,td.N)(),l.F.registerGraphic(h.Cm.path,tG.E)},ef=()=>{g(),(0,tu.k)(),eo(),l.F.registerGraphic(h.Cm.rect,tc.f)},ev=()=>{g(),tA(),l.F.registerGraphic(h.Cm.rect3d,tm)},e_=()=>{g(),(0,th.N)(),l.F.registerGraphic(h.Cm.rule,tU.W)},ey=()=>{g(),(0,tk.k)(),es(),l.F.registerGraphic(h.Cm.symbol,tW.t)},eb=()=>{g(),(0,tw.g)(),(0,tT.v)(),l.F.registerGraphic(h.Cm.text,tX.r)},ex=()=>{g(),(0,tC.M)(),l.F.registerGraphic(h.Cm.polygon,$.p)},eS=()=>{g(),(0,tT.v)(),l.F.registerGraphic(h.Cm.richtext,tY.p)},eA=()=>{g(),tz(),l.F.registerGraphic(h.Cm.glyph,tE)}},2200:function(t,e,i){i.d(e,{Z:()=>h});var s=i(6082),r=i(8378);function n(t){var e,i;return(0,s.Z)(t.offsetX)?(0,s.Z)(t.x)?t.changedTouches&&t.changedTouches.length?function(t){let e=t.changedTouches[0];return{canvasX:e.x,canvasY:e.y}}(t):{canvasX:0,canvasY:0}:{canvasX:(e=t).x,canvasY:e.y}:{canvasX:(i=t).offsetX,canvasY:i.offsetY}}function a(t,e,i=!0){let s=["canvasX","canvasY"];return i&&(s.push("clientX"),s.push("clientY")),s.forEach(i=>{(0,r.Z)(e[i])&&Object.defineProperty(t,i,{value:e[i],writable:!0})}),[e.canvasX,e.canvasY]}var o=i(9524),l=i(6602);function h(t,e,i,s){var r,h;s===o.YJ&&function(t){["touches","changedTouches","targetTouches"].forEach(e=>{t[e]&&t[e].length&&Array.from(t[e]).forEach(t=>{a(t,n(t),!1)})});let e=n(t);a(t,e)}(e.changedTouches?e.changedTouches[0]:e);let d=null===(r=e.target)||void 0===r?void 0:r[l.dc];if(!d&&s===o.Ng){let i=e.target,s=null===(h=t.rootMark)||void 0===h?void 0:h.graphicItem;for(;(null==i?void 0:i.parent)&&i.parent!==s;)if((i=i.parent)[l.dc]){d=i[l.dc];break}}return e.element=d,e}},4643:function(t,e,i){i.d(e,{CJ:()=>l,HX:()=>d,ib:()=>h,ir:()=>o});var s=i(2698),r=i(6602),n=i(4761),a=i(4659);let o=t=>!!s.Cm[t];function l(t,e,i={}){var s;let r=n.F.getGraphicType(e)?n.F.createGraphic(e,i):n.F.createGraphicComponent(e,i,{skipDefault:null===(s=null==t?void 0:t.spec)||void 0===s?void 0:s.skipTheme});return r||a.Y.getInstance().error(`create ${e} graphic failed!`),r}function h(t,e,i={}){if(!n.F.getGraphicType(s.Cm.glyph))return;let r=n.F.createGraphic(s.Cm.glyph,i),a=e.getMarks(),o=Object.keys(a).map(t=>{if(n.F.getGraphicType(a[t])){let e=n.F.createGraphic(a[t]);if(e)return e.name=t,e}});return r.setSubGraphic(o),r}let d=t=>{t&&(t[r.dc]=null,t.release(),t.parent&&t.parent.removeChild(t))}},5042:function(t,e,i){i.d(e,{dze:()=>q,BQt:()=>K});var s=i(5939),r=i(534),n=i(5405),a=i(1312),o=i.n(a);let l=(t,e)=>{let i=e.x-t.x,s=e.y-t.y;return Math.abs(i)>Math.abs(s)?i>0?"right":"left":s>0?"down":"up"},h=(t,e)=>{let i=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);return Math.sqrt(i*i+s*s)},d=t=>{let e=t.length;if(1===e)return{x:Math.round(t[0].x),y:Math.round(t[0].y)};let i=0,s=0,r=0;for(;r<e;)i+=t[r].x,s+=t[r].y,r++;return{x:Math.round(i/e),y:Math.round(s/e)}};class u extends o(){constructor(t,e={}){var i,r,n,a,o,u,c,p,g,m;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=t=>{this.startTime=s.m.now();let{cachedEvents:e,startPoints:i}=this;t&&e.push(t.clone()),i.length=e.length;for(let t=0;t<e.length;t++){let{x:s,y:r}=e[t],n={x:s,y:r};i[t]=n}if(1!==i.length)this.startDistance=h(i[0],i[1]),this.center=d([i[0],i[1]]);else{let t=e[0];this.pressTimeout=setTimeout(()=>{t.direction="none",t.deltaX=0,t.deltaY=0,t.points=i,this.triggerStartEvent("press",t),this.triggerEvent("press",t),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=t=>{this.clearPressTimeout();let{startPoints:e,cachedEvents:i}=this;if(!e.length)return;let r=t.clone(),{x:n,y:a,pointerId:o}=r;for(let t=0,e=i.length;t<e;t++)if(o===i[t].pointerId){i[t]=r;break}let d={x:n,y:a},u=i.map(t=>({x:t.x,y:t.y})),c=s.m.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=c,this.lastMovePoint=d,1===e.length){let t=e[0],i=n-t.x,s=a-t.y,o=this.direction||l(t,d);this.direction=o;let h=this.getEventType(d);return r.direction=o,r.deltaX=i,r.deltaY=s,r.points=u,this.triggerStartEvent(h,r),void this.triggerEvent(h,r)}let{startDistance:p}=this,g=h(u[0],u[1]);r.scale=g/p,r.center=this.center,r.points=u,this.triggerStartEvent("pinch",r),this.triggerEvent("pinch",r)},this.onEnd=t=>{let e=t.clone(),{cachedEvents:i,startPoints:r}=this,n=i.map(t=>({x:t.x,y:t.y}));if(e.points=n,this.triggerEndEvent(e),1===i.length){let i=s.m.now(),n=this.lastMoveTime;if(i-n<100){let t=n-(this.prevMoveTime||this.startTime);if(t>0){let i=this.prevMovePoint||r[0],s=this.lastMovePoint||r[0],n=h(i,s),a=n/t;if(a>this.config.swipe.velocity&&n>this.config.swipe.threshold)return e.velocity=a,e.direction=l(i,s),this.triggerEvent("swipe",e),this.cachedEvents=[],this.startPoints=[],void this.reset()}}i-this.startTime<this.config.press.time&&(i-this.lastTapTime<this.config.tap.interval&&t.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=i,this.lastTapTarget=t.target,1===this.tapCount?this.triggerEvent("tap",e):2===this.tapCount&&(this.triggerEvent("doubletap",e),this.tapCount=0))}for(let t=0,s=i.length;t<s;t++)if(i[t].pointerId===e.pointerId){i.splice(t,1),r.splice(t,1);break}this.reset(),i.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!==(r=null===(i=null==e?void 0:e.press)||void 0===i?void 0:i.time)&&void 0!==r?r:251,threshold:null!==(a=null===(n=null==e?void 0:e.press)||void 0===n?void 0:n.threshold)&&void 0!==a?a:9},swipe:{threshold:null!==(u=null===(o=null==e?void 0:e.swipe)||void 0===o?void 0:o.threshold)&&void 0!==u?u:10,velocity:null!==(p=null===(c=null==e?void 0:e.swipe)||void 0===c?void 0:c.velocity)&&void 0!==p?p:.3},tap:{interval:null!==(m=null===(g=null==e?void 0:e.tap)||void 0===g?void 0:g.interval)&&void 0!==m?m:300}},this.initEvents()}initEvents(){let{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){let{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){let e;let{eventType:i,startTime:r,startPoints:n}=this;return"press"===i?i:(e=s.m.now()-r>this.config.press.time&&h(n[0],t)<this.config.press.threshold?"press":"pan",this.eventType=e,e)}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){let{emitThrottles:i}=this,s={type:t,ev:e};for(let e=0,r=i.length;e<r;e++)if(i[e].type===t)return void i.splice(e,1,s);i.push(s)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);let{throttleTimer:i,emitThrottles:s}=this;i||(this.throttleTimer=r.w.global.getRequestAnimationFrame()(()=>{r.w.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let t=0,e=s.length;t<e;t++){let{type:e,ev:i}=s[t];this.emitEvent(e,i)}this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){let e=this.processEvent;Object.keys(e).forEach(i=>{this.triggerEvent(`${i}end`,t),"press"===i&&this.triggerEvent(`${i}up`,t),delete e[i]})}emitEvent(t,e){if(!this.element)return;let i=this.element._events[n.g];if(i){if("fn"in i)i.fn.call(i.context,e,t);else for(let s=0,r=i.length;s<r&&!e.propagationImmediatelyStopped;s++)i[s].fn.call(i[s].context,e,t)}this.emit(t,e)}}var c=i(4761),p=i(7773),g=i(670),m=i(2698);class f{constructor(t){this._animations=[],this._additionalAnimateMarks=[],this.isEnabled=!0,this._onAnimationStart=t=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(t=>{var e;return null===(e=null==t?void 0:t.animate)||void 0===e?void 0:e.isAnimating()}),0===this._animations.length&&0===this._additionalAnimateMarks.length&&this._view.emit(m.ZK.ALL_ANIMATION_START,{}),this._animations=this._animations.concat({config:t.animationConfig,mark:t.mark})},this._onAnimationEnd=t=>{this._additionalAnimateMarks=this._additionalAnimateMarks.filter(t=>{var e;return null===(e=null==t?void 0:t.animate)||void 0===e?void 0:e.isAnimating()}),this._animations=this._animations.filter(e=>e.config!==t.animationConfig||e.mark!==t.mark),0===this._animations.length&&0===this._additionalAnimateMarks.length&&this._view.emit(m.ZK.ALL_ANIMATION_END,{})},this._view=t,this._view.addEventListener(m.ZK.ANIMATION_START,this._onAnimationStart),this._view.addEventListener(m.ZK.ANIMATION_END,this._onAnimationEnd)}stop(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).stop)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).stop)||void 0===i||i.call(e))}),this._additionalAnimateMarks=[],this}pause(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).pause)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).pause)||void 0===i||i.call(e))}),this}resume(){return this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).resume)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).resume)||void 0===i||i.call(e))}),this}enable(){return this.isEnabled=!0,this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).enable)||void 0===i||i.call(e))}),this}disable(){return this.isEnabled=!1,this._view.traverseMarkTree(t=>{var e,i;t.animate&&(null===(i=(e=t.animate).disable)||void 0===i||i.call(e))}),this._additionalAnimateMarks.forEach(t=>{var e,i;t.view&&t.animate&&(null===(i=(e=t.animate).stop)||void 0===i||i.call(e))}),this._additionalAnimateMarks=[],this}enableAnimationState(t){return this._view.traverseMarkTree(e=>{var i,s;e.animate&&(null===(s=(i=e.animate).enableAnimationState)||void 0===s||s.call(i,t))}),this}disableAnimationState(t){return this._view.traverseMarkTree(e=>{var i,s;e.animate&&(null===(s=(i=e.animate).disableAnimationState)||void 0===s||s.call(i,t))}),this}isAnimating(){return 0!==this._animations.length||this._additionalAnimateMarks.some(t=>{var e;return(null===(e=null==t?void 0:t.animate)||void 0===e?void 0:e.isAnimating())||!1})}animate(){return this.isEnabled&&this._view.traverseMarkTree(t=>{t.isUpdated&&t.animate&&t.animate.animate(),t.cleanExitElements(),t.isUpdated=!1},null,!0),this}animateAddition(t){var e;let i=null===(e=t.animate)||void 0===e?void 0:e.animate();return i&&i.isAnimating()&&this._additionalAnimateMarks.push(t),this}release(){this._additionalAnimateMarks=[],this._animations=[],this._view.removeEventListener(m.ZK.ALL_ANIMATION_START,this._onAnimationStart),this._view.removeEventListener(m.ZK.ALL_ANIMATION_END,this._onAnimationEnd),this._view=null}}class v{initAnimate(t){return this.animate=new f(t),this.animate}}let _=()=>{(0,p.jB)(g.Z,v)};var y=i(6082),b=i(4546),x=i(1601),S=i(8378),A=i(3118),k=i(3872),w=i(3337),T=i(6502),C=i(7623),M=i(9038),E=i(7636),B=i(4154),O=i(1114);let I=(t,e)=>{if(!t)return null;if(t.from){let i=t.from,s=Object.keys(i);s.forEach(t=>{(0,y.Z)(i[t])&&delete i[t]});let r=(0,O.Y2)(s,e.mark.markType)&&!(0,C.Z)(i.segments);if(r){let s=e.items.map(t=>Object.assign({},t,{nextAttrs:Object.assign({},i)}));t.from=e.transformElementItems(s,e.mark.markType,r)}}if(t.to){let i=t.to,s=Object.keys(i);s.forEach(t=>{(0,y.Z)(i[t])&&delete i[t]});let r=(0,O.Y2)(s,e.mark.markType)&&!(0,C.Z)(i.segments);if(r){let s=e.items.map(t=>Object.assign({},t,{nextAttrs:Object.assign({},i)}));t.to=e.transformElementItems(s,e.mark.markType,r)}}return t},R=(t,e,i,s,r)=>(0,M.Z)(i)?i(t.getDatum(),t,r):i;class P extends A.rd{constructor(t,e,i,s,r){super(t,e,i,s,r),this._interpolator=null==r?void 0:r.interpolator,this._element=null==r?void 0:r.element}onBind(){var t,e;this.from=null!==(t=this.from)&&void 0!==t?t:{},this.to=null!==(e=this.to)&&void 0!==e?e:{}}getEndProps(){return this.to}onUpdate(t,e,i){this._interpolator&&this._element&&this._interpolator.call(this,e,this.from,this.to,i,this._element.getDatum(),this._element,this.params.parameters)}}class L extends A.rd{getEndProps(){return this.to}onBind(){var t;let e=null!==(t=this.target.constructor.NOWORK_ANIMATE_ATTR)&&void 0!==t?t:T.Wl,i=Object.keys(e).filter(t=>0!==e[t]);this.subAnimate.animate.preventAttrs(i);let s=Object.assign({},this.from),r=Object.assign({},this.to),n=[];Object.keys(r).forEach(t=>{i.includes(t)?(s[t]=r[t],this.from[t]=r[t]):(0,y.Z)(s[t])?s[t]=this.target.getComputedAttribute(t):n.push(t)}),this.target.animates.forEach(t=>{t!==this.subAnimate.animate&&t.preventAttrs(n)}),this._fromAttribute=s,this._toAttribute=r}onStart(){if(this._fromAttribute){let t={};Object.keys(this._fromAttribute).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(t[e]=this._fromAttribute[e])}),this.target.setAttributes(t,!1,{type:k.Gk.ANIMATE_UPDATE,animationState:{ratio:0,end:!1}})}}onEnd(){if(this._toAttribute){let t={};Object.keys(this._toAttribute).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(t[e]=this._toAttribute[e])}),this.target.setAttributes(t,!1,{type:k.Gk.ANIMATE_END})}}update(t,e,i){0===this.updateCount&&this.onFirstRun(),this.updateCount+=1;let s=this.step.getLastProps();Object.keys(s).forEach(t=>{this.subAnimate.animate.validAttr(t)&&(i[t]=s[t])}),this.onUpdate(t,e,i),t&&this.onEnd()}onUpdate(t,e,i){this.target.stepInterpolate(this.subAnimate,this.subAnimate.animate,i,this.step,e,t,this._toAttribute,this._fromAttribute)}}A.rs.mode|=k.uq.SET_ATTR_IMMEDIATELY;let D=0,Z=t=>{var e;if((0,y.Z)(t)||(0,y.Z)(t.prototype))return!1;let i=null!==(e=t.prototype)&&void 0!==e?e:{};return i instanceof A.rd||"onBind"in i&&"onStart"in i&&"onEnd"in i&&"onUpdate"in i};class F{constructor(t,e,i){this.id=D++,this.isAnimating=!1,this.runnings=[],this.element=t,this.animationOptions=i,this.unit=e}callback(t){return this.callbackFunction=t,this}animate(t,e){return this.isAnimating=!0,this.animateElement(t,e),0===this.runnings.length&&this.animationEnd(),this}stop(t="end",e=!0){return this.runnings.forEach(e=>e.stop(t)),this.animationEnd(e),this}pause(){return this.runnings.forEach(t=>t.pause()),this}resume(){return this.runnings.forEach(t=>t.resume()),this}startAt(t){return this.runnings.forEach(e=>{let i=this.unit.initialDelay;e.startAt(i+t)}),this}getTotalAnimationTime(){var t;let e=this.unit.initialDelay+this.unit.loopDuration*this.unit.loopCount;return null!==(t=this.unit.totalTime)&&void 0!==t?t:e}getEndAttributes(){return this.runnings.reduce((t,e)=>Object.assign(t,e.getEndProps()),{})}animationEnd(t=!0){var e;this.isAnimating=!1,this.runnings=null,t&&(null===(e=this.callbackFunction)||void 0===e||e.call(null))}animateElement(t,e){let i=this.element.getGraphicItem();if(!i)return;let s=i.animate();this.runnings.push(s),s.startAt(this.unit.initialDelay),s.wait(this.unit.loopDelay),this.unit.timeSlices.forEach(i=>{this.animateTimeSlice(s,i,t,e)}),s.wait(this.unit.loopDelayAfter),s.loop(this.unit.loopCount-1),(0,S.Z)(this.unit.totalTime)&&setTimeout(()=>{s&&s.stop("end")},this.unit.totalTime),s.onEnd(()=>{this.runnings=this.runnings.filter(t=>t!==s),0===this.runnings.length&&this.animationEnd()})}animateTimeSlice(t,e,i,s){let r=e.delay,n=e.delayAfter,a=e.duration,o=e.effects;if(r>0&&t.wait(r),o.length<0)t.wait(a);else{let e=o.map((t,e)=>{var r;let n=null!==(r=t.type?function(t,e,i,s){let r=(0,M.Z)(e.options)?e.options.call(null,t.getDatum(),t,s):e.options;return e.type&&c.F.getAnimationType(e.type)?I(c.F.getAnimationType(e.type)(t,r,i),t):null}(this.element,t,i,s):t.channel?function(t,e,i,s){let r=e.channel,n=null;return(0,E.Z)(r)?n=r.reduce((e,i)=>(e.from[i]=t.getGraphicAttribute(i,!0),e.to[i]=t.getGraphicAttribute(i,!1),e),{from:{},to:{}}):(0,B.Z)(r)&&(n=Object.keys(r).reduce((e,i)=>{var n,a;let o=!(0,y.Z)(null===(n=r[i])||void 0===n?void 0:n.from),l=!(0,y.Z)(null===(a=r[i])||void 0===a?void 0:a.to);return(o||l)&&(e.from[i]=o?R(t,0,r[i].from,0,s):void 0,e.to[i]=l?R(t,0,r[i].to,0,s):t.getGraphicAttribute(i,!1)),e},{from:{},to:{}})),I(n,t)}(this.element,t,0,s):void 0)&&void 0!==r?r:{},o=n.custom||(null==t?void 0:t.custom),l=(null==n?void 0:n.customParameters)||(null==t?void 0:t.customParameters);n.from&&Object.keys(n.from).length&&this.unit&&this.animationOptions.timeline.controlOptions.immediatelyApply&&"component"!==this.element.mark.markType&&this.element.getGraphicItem().setAttributes(n.from);let h=Z(o);return(0,y.Z)(o)||Z(o)?h?new o(n.from,n.to,a,t.easing,l):n.to?new L(n.from,n.to,a,t.easing):void 0:new P(n.from,n.to,a,t.easing,{interpolator:o,element:this.element,parameters:l})}).filter(t=>!(0,y.Z)(t));1===e.length?t.play(e[0]):e.length>1&&t.play(new w.xc(a,e))}n>0&&t.wait(n)}}var j=i(325),H=i(6602);function z(t){let e=[];return Object.keys(t).forEach(i=>{e=e.concat(N(i,t[i]))}),e}function N(t,e,i=0){let s=[],r=i;return(0,b.IX)(e).forEach(e=>{var i;let n=function(t){var e,i,s,r,n,a,o,l,h,d,u,c;if((0,y.Z)(t.timeSlices))return{startTime:null!==(e=t.startTime)&&void 0!==e?e:H.JE,totalTime:t.totalTime,oneByOne:null!==(i=t.oneByOne)&&void 0!==i?i:H.I8,loop:null!==(s=t.loop)&&void 0!==s?s:H.Qv,controlOptions:(0,j.Z)({},H.Ji,null!==(r=t.controlOptions)&&void 0!==r?r:{}),timeSlices:[{duration:null!==(n=t.duration)&&void 0!==n?n:H.tR,delay:null!==(a=t.delay)&&void 0!==a?a:H.v0,delayAfter:null!==(o=t.delayAfter)&&void 0!==o?o:H.uX,effects:[{type:t.type,channel:t.channel,custom:t.custom,easing:null!==(l=t.easing)&&void 0!==l?l:H.fx,customParameters:t.customParameters,options:t.options}]}]};let p=(0,b.IX)(t.timeSlices).filter(t=>t.effects&&(0,b.IX)(t.effects).filter(t=>t.channel||t.type).length);if(p.length)return{startTime:null!==(h=t.startTime)&&void 0!==h?h:H.JE,totalTime:t.totalTime,oneByOne:null!==(d=t.oneByOne)&&void 0!==d?d:H.I8,loop:null!==(u=t.loop)&&void 0!==u?u:H.Qv,controlOptions:(0,j.Z)({},H.Ji,null!==(c=t.controlOptions)&&void 0!==c?c:{}),timeSlices:p.map(t=>{var e,i;return{duration:t.duration,delay:null!==(e=t.delay)&&void 0!==e?e:H.v0,delayAfter:null!==(i=t.delayAfter)&&void 0!==i?i:H.uX,effects:(0,b.IX)(t.effects).filter(t=>t.channel||t.type).map(t=>{var e;return{type:t.type,channel:t.channel,custom:t.custom,easing:null!==(e=t.easing)&&void 0!==e?e:H.fx,customParameters:t.customParameters,options:t.options}})}}),partitioner:t.partitioner,sort:t.sort}}(e);n&&(s.push({state:t,id:null!==(i=n.id)&&void 0!==i?i:`${t}-${r}`,timeline:n,originConfig:e}),r+=1)}),s}function V(t,e,i){return(0,M.Z)(t)?t.call(null,e.getDatum(),e,i):t}var U=i(9689);class G{constructor(t){this.parallelArrangers=[this],this.totalTime=0,this.startTime=0,this.endTime=0,this.animators=t.filter(t=>!(0,y.Z)(t)),this.totalTime=this.animators.reduce((t,e)=>Math.max(t,e.getTotalAnimationTime()),0)}parallel(t){let e=Array.from(new Set(this.parallelArrangers.concat(t.parallelArrangers)));return e.forEach(t=>{t.parallelArrangers=e}),this.arrangeTime(),this}after(t){return this.afterArranger=t,this.arrangeTime(),this}arrangeTime(){let t=this.parallelArrangers.reduce((t,e)=>Math.max(t,e.totalTime),this.totalTime),e=this.parallelArrangers.reduce((t,e)=>{var i,s;return Math.max(t,null!==(s=null===(i=e.afterArranger)||void 0===i?void 0:i.endTime)&&void 0!==s?s:0)},0);this.parallelArrangers.forEach(i=>{i.startTime=e,i.endTime=e+t,i.animators.forEach(t=>{t.startAt(e)})})}}class W{constructor(t,e){this.state=null,this.immediateConfigs=[],this.isEnabled=!0,this.disabledStates=[],this.animators=new Map,this.elementRecorder=new WeakMap,this.timelineCount={},this.mark=t,this.configs=z(null!=e?e:{})}getAnimationConfigs(t){var e;return this.isEnabled?(null!==(e=this.configs)&&void 0!==e?e:[]).filter(e=>e.state===t):[]}updateConfig(t){this.configs=z(null!=t?t:{})}updateState(t){this.state=t}animate(){if(!this.isEnabled||!this.configs||!this.configs.length)return;let t=this.mark.getAllElements(),e=this.mark.parameters();return t.forEach(t=>{var e;t.isReserved&&t.diffState!==m.OJ.exit&&(t.isReserved=!1);let i=null===(e=this.elementRecorder.get(t))||void 0===e?void 0:e.prevState;(this.configs.some(e=>i!==t.diffState&&e.state===i&&e.timeline.controlOptions.stopWhenStateChange)||t.diffState===m.OJ.exit)&&this.clearElementAnimation(t,!1)}),this.configs.forEach(i=>{this.animateByTimeline(i,t,e)}),this.mark.cleanExitElements(),this}runAnimationByState(t){if(!this.isEnabled)return;let e=this.configs.filter(e=>e.state===t),i=this.mark.getAllElements(),s=this.mark.parameters();return new G(e.reduce((t,e)=>t.concat(this.animateByTimeline(e,i,s,!0)),[]))}stopAnimationByState(t){let e=this.animators.get(t);return e&&e.forEach(t=>t.stop("end")),this}pauseAnimationByState(t){let e=this.animators.get(t);return e&&e.forEach(t=>t.pause()),this}resumeAnimationByState(t){let e=this.animators.get(t);return e&&e.forEach(t=>t.resume()),this}run(t){if(!this.isEnabled)return;let e=N(H.dw,t,this.immediateConfigs.length);this.immediateConfigs=this.immediateConfigs.concat(e);let i=this.mark.getAllElements(),s=this.mark.parameters();return new G(e.reduce((t,e)=>t.concat(this.animateByTimeline(e,i,s,!0)),[]))}stop(){return this.animators.forEach(t=>{t.forEach(t=>t.stop("end"))}),this}pause(){return this.animators.forEach(t=>t.forEach(t=>t.pause())),this}resume(){return this.animators.forEach(t=>t.forEach(t=>t.resume())),this}reverse(){return this}restart(){return this}record(){return this}recordEnd(){return this}isAnimating(){let t=!1;return this.animators.forEach(e=>{t=t||e.some(t=>t.isAnimating)}),t}isElementAnimating(t){var e;let i=null===(e=this.elementRecorder.get(t))||void 0===e?void 0:e.count;return(0,y.Z)(i)||Object.values(i).every(t=>0===t)}getAnimatorCount(){let t=0;return this.animators.forEach(e=>t+=e.length),t}getAllAnimators(){let t=[];return this.animators.forEach(e=>{t.push(...e)}),t}getElementAnimators(t,e){var i;let s=(0,b.IX)(t),r=[];return e?r=null!==(i=this.animators.get(e))&&void 0!==i?i:[]:this.animators.forEach(t=>{r=r.concat(t)}),r.filter(t=>s.includes(t.element))}enable(){return this.isEnabled=!0,this}disable(){return this.isEnabled=!1,this.stop(),this.animators.clear(),this}enableAnimationState(t){let e=(0,b.IX)(t);return this.disabledStates=this.disabledStates.filter(t=>!e.includes(t)),this}disableAnimationState(t){let e=(0,b.IX)(t);return this.disabledStates=this.disabledStates.concat(e),this}release(){this.stop(),this.animators.clear(),this.configs=null,this.animators=null,this.elementRecorder=null,this.timelineCount=null}animateByTimeline(t,e,i,s=!1){var r;let n=[],a=e.filter(e=>{let r=!(e.isReserved&&e.diffState===m.OJ.exit),n=this.getAnimationState(e),a=!this.disabledStates.includes(n),o=s||n===t.state,l=!t.timeline.partitioner||t.timeline.partitioner(e.getDatum(),e,i);return r&&a&&o&&l});if(a.length){(0,y.Z)(this.timelineCount[t.id])&&(this.timelineCount[t.id]=0),t.timeline.sort&&a.sort((e,s)=>t.timeline.sort(e.getDatum(),s.getDatum(),e,s,i));let e={width:this.mark.view.width(),height:this.mark.view.height(),group:null!==(r=this.mark.group)&&void 0!==r?r:null,mark:this.mark,view:this.mark.view,elementCount:a.length,elementIndex:0};a.forEach(e=>{var i;(null!==(i=this.animators.get(t.state))&&void 0!==i?i:[]).filter(i=>i.element===e&&i.animationOptions.id===t.id).forEach(t=>{t.stop(null,!1),this.handleAnimatorEnd(t,!1)})}),a.forEach((s,r)=>{e.elementIndex=r;let o=Object.assign({[H.DK]:e},i),l=this.getAnimationUnit(t.timeline,s,r,a.length,o);n.push(this.animateElement(t,l,s,e,o))})}return n}animateElement(t,e,i,s,r){var n,a;let o=new F(i,e,t);if(o.animate(s,r),!o.isAnimating)return;i.diffState===m.OJ.exit&&(i.isReserved=!0);let l=0===this.timelineCount[t.id];this.timelineCount[t.id]+=1;let h=null!==(n=this.elementRecorder.get(i))&&void 0!==n?n:{prevState:t.state,count:{}};h.prevState=t.state,h.count[t.state]=(null!==(a=h.count[t.state])&&void 0!==a?a:0)+1,this.elementRecorder.set(i,h);let d=this.animators.get(t.state);d?d.push(o):this.animators.set(t.state,[o]),o.callback(()=>{this.handleAnimatorEnd(o)});let u={mark:this.mark,animationState:t.state,animationConfig:t.originConfig};return l&&this.mark.emit(m.ZK.ANIMATION_START,u),this.mark.emit(m.ZK.ELEMENT_ANIMATION_START,u,i),o}getAnimationState(t){let e=(0,U.ZO)(this.state,this.mark.parameters(),t.getDatum(),t);return null!=e?e:t.diffState}getAnimationUnit(t,e,i,s,r){let n=[],a=V(t.startTime,e,r),o=V(t.totalTime,e,r),l=V(t.oneByOne,e,r),h=V(t.loop,e,r),d=0;t.timeSlices.forEach(t=>{var i;let a=V(t.delay,e,r),l=V(t.delayAfter,e,r),h=null!==(i=V(t.duration,e,r))&&void 0!==i?i:o/s,u=(0,b.IX)(t.effects).map(t=>Object.assign({},t,{customParameters:V(t.customParameters,e,r)}));n.push({effects:u,duration:h,delay:a,delayAfter:l}),d+=a+h+l});let u=(0,x.Z)(l)?l:!0===l?d:0;return{initialDelay:a,loopCount:(0,x.Z)(h)?h:!0===h?1/0:1,loopDelay:u*i,loopDelayAfter:u*(s-i-1),loopAnimateDuration:d,loopDuration:d+u*(s-1),totalTime:o,timeSlices:n}}clearElementAnimation(t,e=!0){this.animators.forEach(i=>{i.forEach(i=>{i.element===t&&(i.animationOptions.state===m.OJ.exit?i.stop("start",!1):i.stop("end",!1),this.handleAnimatorEnd(i,e))})}),this.elementRecorder.delete(t)}clearAllElements(){let t=this.mark.getAllElements();t&&t.forEach((e,i)=>{this.clearElement(e,i===t.length-1)})}clearElement(t,e=!0){this.clearElementAnimation(t),t.getGraphicItem()&&(t.clearGraphicAttributes(),t.diffState===m.OJ.exit&&(t.isReserved=!1),e&&this.mark.cleanExitElements())}handleAnimatorEnd(t,e=!0){let i=t.element,s=t.animationOptions,r=s.state,n=r===H.dw,a=this.elementRecorder.get(i).count;a[r]-=1,this.animators.set(r,this.animators.get(r).filter(e=>e!==t)),0===this.animators.get(r).length&&this.animators.delete(r),this.timelineCount[s.id]-=1;let o=0===this.timelineCount[s.id],l=n?this.immediateConfigs.find(t=>t.id===s.id).originConfig:this.configs.find(t=>t.id===s.id).originConfig;o&&(delete this.timelineCount[s.id],n&&(this.immediateConfigs=this.immediateConfigs.filter(t=>t.id!==s.id))),e&&(0===Object.keys(this.timelineCount).length?this.clearAllElements():r===m.OJ.exit&&0===a[m.OJ.exit]&&this.clearElement(i));let h={mark:this.mark,animationState:r,animationConfig:l};o&&this.mark.emit(m.ZK.ANIMATION_END,h),this.mark.emit(m.ZK.ELEMENT_ANIMATION_END,h,i)}}var X=i(1035);class Y{constructor(){this.animate=new W(this,{})}initAnimate(t){this.animate||(this.animate=new W(this,t.animation),this.needAnimate()&&this.animate.updateState(t.animationState))}reuseAnimate(t){this.animate=t.animate,this.animate.mark=this}updateAnimate(t){this.animate.updateConfig(t.animation),this.animate.updateState(t.animationState)}}let $=()=>{(0,p.jB)(X.v,Y)},K=()=>{c.F.registerStageEventPlugin("gesture",u)},q=()=>{_(),$()}},7911:function(t,e,i){i.d(e,{$C:()=>o,CJ:()=>a,zO:()=>n});var s=i(4546),r=i(9689);function n(t){return!!(null==t?void 0:t.scale)}function a(t){return!!(null==t?void 0:t.field)}function o(t,e){if(!t)return[];let i=[];return t.scale&&(i=(0,r.ch)(t.scale)?[t.scale]:(0,s.IX)(e.getScaleById(t.scale))),i.concat((0,r.Lf)(t,e))}},9818:function(t,e,i){i.d(e,{X:()=>u});var s=i(9038),r=i(6082),n=i(7636),a=i(4761),o=i(9689);let l=(t,e,i)=>{var n;if("callback"===t&&(0,s.Z)(e))return{references:[],value:{callback:e,dependency:[]}};if(!(0,r.Z)(e.data)){let t=i.getDataById(e.data);return{references:[t],value:t}}if(!(0,r.Z)(e.customized)){let t=i.getCustomizedById(e.customized);return{references:[t],value:t}}if(!(0,r.Z)(e.scale)){let t=i.getScaleById(e.scale);return{references:[t],value:t}}if((0,o.$Z)(e)){let t=(0,o.Lf)(e,i);return{references:t,value:e.callback?{value:e.callback,dependency:t}:null!==(n=null==t?void 0:t[0])&&void 0!==n?n:e}}return{value:e}},h=(t,e,i)=>{if((0,r.Z)(e))return{value:e};if((0,n.Z)(e)){let s=e.map(e=>l(t,e,i));return{references:s.reduce((t,e)=>(e.references&&t.concat(e.references),t),[]),value:s.map(t=>t.value)}}return l(t,e,i)},d=(t,e)=>{let i=a.F.getTransform(t.type);if(!i)return;let s={},r=[];return Object.keys(t).forEach(i=>{var n;if("type"===i)return;let a=t[i];if("dependency"===i)return void((null==a?void 0:a.length)&&(r=r.concat((0,o.gx)(a,e))));let l=h(i,a,e);l&&((null===(n=l.references)||void 0===n?void 0:n.length)&&(r=r.concat(l.references)),s[i]=l.value)}),{markPhase:i.markPhase,transform:i.transform,canProgressive:i.canProgressive,type:i.type,options:s,references:r}},u=(t,e)=>{if(null==t?void 0:t.length){let i=[],s=[];return t.forEach(t=>{var r;let n=d(t,e);n&&((null===(r=n.references)||void 0===r?void 0:r.length)&&(s=s.concat(n.references)),i.push(n))}),{transforms:i,refs:s}}return null}},9689:function(t,e,i){i.d(e,{$Z:()=>p,Lf:()=>l,Ur:()=>c,ZO:()=>d,ch:()=>g,gx:()=>o,hR:()=>h,it:()=>u,wn:()=>m});var s=i(4546),r=i(9904),n=i(9038),a=i(6082);function o(t,e){return(0,s.IX)(t).reduce((t,i)=>{let s=(0,r.Z)(i)?e.getGrammarById(i):i;return s&&t.push(s),t},[])}function l(t,e){if((0,a.Z)(t))return[];if(!(0,n.Z)(t)&&(null==t?void 0:t.signal)){let i=t.signal;if((0,r.Z)(i))return(0,s.IX)(e.getGrammarById(i));if("signal"===(null==i?void 0:i.grammarType))return[i]}else if(!(0,n.Z)(t)&&(null==t?void 0:t.callback))return o(t.dependency,e);return[]}function h(t){return(0,n.Z)(t)||(null==t?void 0:t.signal)||!!(null==t?void 0:t.callback)}function d(t,e,i,s){if((0,a.Z)(t))return t;if((0,n.Z)(t))return s?t.call(null,i,s,e):t.call(null,i,e);if(t.signal){let i=t.signal;return(0,r.Z)(i)?null==e?void 0:e[i]:i.output()}return t.callback?s?t.callback.call(null,i,s,e):t.callback.call(null,i,e):t}function u(t,e){if((0,a.Z)(t))return t;if((0,n.Z)(t))return t.call(null,e);if(t.signal){let i=t.signal;return(0,r.Z)(i)?null==e?void 0:e[i]:i.output()}return t.callback?t.callback.call(null,e):t}function c(t,e){return g(t)?t.output():e[t]}function p(t){return t&&(t.signal||t.callback)}let g=t=>t&&!(0,a.Z)(t.grammarType),m=t=>(0,n.Z)(t)?t:e=>e[t]},717:function(t,e,i){i.d(e,{pK:()=>v,lK:()=>_});var s=i(4546);function r(t){return t.reduce((t,e)=>t+e,0)}let n={min:s.iH,max:s.CE,average:function(t){return 0===t.length?0:r(t)/t.length},sum:r};function a(t,e,i,s){let r=Math.floor(e.length/t),n=[],a=e.length,o,l,h,d=0,u=0;n[u++]=d;for(let t=1;t<a-1;t+=r){let i=Math.min(t+r,a-1),c=Math.min(t+2*r,a),p=(c+i)/2,g=0;for(let t=i;t<c;t++){let i=e[t][s];Number.isNaN(i)||(g+=i)}g/=c-i;let m=t,f=Math.min(t+r,a),v=t-1,_=e[d][s];o=-1,h=m;for(let t=m;t<f;t++){let i=e[t][s];Number.isNaN(s)||(l=Math.abs((v-p)*(i-_)-(v-t)*(g-_)))>o&&(o=l,h=t)}n[u++]=h,d=h}return n[u-1]!==a-1&&(n[u++]=a-1),n.map(t=>i?e[t].i:t)}function o(t,e,i,s,r){let a=Math.floor(e.length/t),o=[],l=e.length,h=0,d=[];o.push(h),e[h][r]=e[h][r];for(let t=1;t<l-1;t+=a){a>l-t&&(a=l-t,d.length=a),d=[];for(let i=0;i<a;i++)d.push(e[t+i][r]);let i=n[s](d);e[h=Math.min(Math.round(t+d.length/2)||0,l-1)][r]=i,o.push(h)}return o.map(t=>i?e[t].i:t)}function l(t,e,i,s){return o(t,e,i,"min",s)}function h(t,e,i,s){return o(t,e,i,"max",s)}function d(t,e,i,s){return o(t,e,i,"average",s)}function u(t,e,i,s){return o(t,e,i,"sum",s)}let c=(t,e)=>{let i=t.size,s=t.factor||1;if(Array.isArray(i)&&(i=Math.floor(i[1]-i[0])),(i*=s)<=0)return[];if(e.length<=i)return e;if(t.skipfirst)return e.slice(0,1);let{mode:r,yfield:n,groupBy:o}=t,c=null!=n?n:"y",p=a;if("min"===r?p=l:"max"===r?p=h:"average"===r?p=d:"sum"===r&&(p=u),e.length){let t={};if(o){for(let i=0,s=e.length;i<s;i++){let s=e[i],r=s[o];t[r]||(t[r]=[]),t[r].push({[c]:s[c],i:i})}let s=[];return Object.keys(t).forEach(r=>{let n=t[r];if(n.length<=i){let t=n.map(t=>t.i);s=s.concat(t)}else{let t=p(i,n,!0,c);s=s.concat(t),n.forEach(t=>e[t.i][c]=t[c])}}),s.sort((t,e)=>t-e),s.map(t=>e[t])}return p(i,e,!1,c).map(t=>e[t])}return[]};var p=i(6082),g=i(6602);let m=(t,e)=>{if(!e||0===e.length)return;let{radius:i}=t;(0,p.Z)(i)&&"symbol"===e[0].mark.markType&&(i=!0);let{direction:s,delta:r,deltaMul:n=1,groupBy:a}=t,o=e=>{e.forEach(t=>{t.getGraphicAttribute(g.uE)&&(t.setGraphicAttribute("visible",!0),t.setGraphicAttribute(g.uE,!1))});let a=t.sort?e.slice().sort((t,e)=>t.getGraphicAttribute("x")-e.getGraphicAttribute("x")):e;0===s?function(t,e,i,s){if(s){let s=-1/0,r=-1/0,n=0,a=0,o=(0,p.Z)(e),l=e;t.forEach(t=>{if(!1===t.getGraphicAttribute("visible"))return;let e=t.getGraphicAttribute("size")/2,a=t.getGraphicAttribute("x"),h=t.getGraphicAttribute("y");o&&(l=(e+n)*i),(s-a)**2+(r-h)**2<(l+n+e)**2?t.getGraphicAttribute("forceShow")||(t.setGraphicAttribute(g.uE,!0),t.setGraphicAttribute("visible",!1)):r=h,n=e})}}(a,r,n,i):1===s?function(t,e,i,s){if(s){let s=-1/0,r=0,n=(0,p.Z)(e),a=e;t.forEach(t=>{if(!1===t.getGraphicAttribute("visible"))return;let e=t.getGraphicAttribute("size")/2,o=t.getGraphicAttribute("x");n&&(a=(e+r)*i),Math.abs(o-s)<a+r+e?t.getGraphicAttribute("forceShow")||(t.setGraphicAttribute(g.uE,!0),t.setGraphicAttribute("visible",!1)):s=o,r=e})}}(a,r,n,i):function(t,e,i,s){if(s){let s=-1/0,r=0,n=(0,p.Z)(e),a=e;t.forEach(t=>{if(!1===t.getGraphicAttribute("visible"))return;let e=t.getGraphicAttribute("size")/2,o=t.getGraphicAttribute("y");n&&(a=(e+r)*i),Math.abs(o-s)<a+r+e?t.getGraphicAttribute("forceShow")||(t.setGraphicAttribute(g.uE,!0),t.setGraphicAttribute("visible",!1)):s=o,r=e})}}(a,r,n,i)};if(a){let t=e.reduce((t,e)=>{let i=e.getDatum()[a];return t[i]?t[i].push(e):t[i]=[e],t},{});Object.keys(t).forEach(e=>{o(t[e])})}else o(e);return e};var f=i(4761);let v=()=>{f.F.registerTransform("sampling",{transform:c,markPhase:"afterEncode"},!0)},_=()=>{f.F.registerTransform("markoverlap",{transform:m,markPhase:"afterEncode"},!0)}},670:function(t,e,i){i.d(e,{Z:()=>t$});var s,r,n=i(1312),a=i.n(n),o=i(2937),l=i(4546),h=i(9904),d=i(1725),u=i(6082),c=i(7636),p=i(4659),g=i(8612),m=i(668),f=i(9689),v=i(9818),_=i(2698),y=i(8947),b=i(6338),x=i(2449);let S={csv:y.UI,dsv:y.$W,tsv:y.mK,json:(t,e={},i)=>{if(!(0,h.Z)(t))return(0,l.IX)(t);try{return(0,l.IX)(JSON.parse(t))}catch(t){return[]}}},A=(t,e)=>{if(!e||!S[e.type])return(0,l.IX)(t);let i="dsv"===e.type?{delimiter:e.delimiter}:{};return S[e.type](t,i,new b.VO(new x.q))};class k extends m.S{constructor(t,e,i){super(t),this.grammarType="data",this.spec={},this._dataIDKey=`VGRAMMAR_DATA_ID_KEY_${this.uid}`,this._loadTasks=[],this._postFilters=[],this.ingest=t=>{let e=(0,f.it)(t.format,this.parameters());return this._input=A(t.values,e),this._input},this.load=t=>{if(t.values)return this.ingest(t)},this.relay=t=>t[0],this._loadTasks=[],(0,u.Z)(e)||this.values(e,i)}parse(t){return super.parse(t),this._isLoaded=!1,this.source(t.source,t.format,!1),this.url(t.url,t.format,!1),this.values(t.values,t.format,!1),this.transform(t.transform),this.parseLoad(t),this.commit(),this}parseDataSource(t){let e=[],i=[],s=t.format?(0,f.Lf)(t.format,this.view)[0]:null;if(s&&e.push(s),t.values){let s=(0,f.Lf)(t.values,this.view)[0];s&&e.push(s),i.push({type:"ingest",transform:this.ingest,isRawOptions:!0,options:{values:t.values,format:t.format}})}else if(t.url){let r=(0,f.Lf)(t.url,this.view)[0];r&&e.push(r),i.push({type:"load",transform:this.load,options:{url:null!=r?r:t.url,format:null!=s?s:t.format}})}else if(t.source){let s=[];(0,l.IX)(t.source).forEach(t=>{let i=(0,f.ch)(t)?t:this.view.getDataById(t);i&&(e.push(i),s.push(i))}),s.length&&(i.push({type:"relay",transform:this.relay,options:s}),this.grammarSource=s[0])}return{transforms:i,refs:e}}evaluate(t,e){this.view.emit(_.ZK.BEFORE_EVALUATE_DATA);let i=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms);this.grammarSource&&(this._input=t);let s=this.evaluateTransform(i,this._input,e),r=this._evaluateFilter(s,e);return this.setValues(r),this._isLoaded=!0,this.view.emit(_.ZK.AFTER_EVALUATE_DATA),this}output(){return this._values}getDataIDKey(){return this._dataIDKey}values(t,e,i=!0){let s=Object.assign({},this.spec,{values:t,format:e});return(0,u.Z)(t)||(s.url=void 0,s.source=void 0),i?this.parseLoad(s):this}url(t,e,i=!0){let s=Object.assign({},this.spec,{url:t,format:e});return(0,u.Z)(t)||(s.values=void 0,s.source=void 0),i?this.parseLoad(s):this}source(t,e,i=!0){let s=Object.assign({},this.spec,{source:t,format:e});return(0,u.Z)(t)||(s.values=void 0,s.url=void 0),i?this.parseLoad(s):this}parseLoad(t){this.detach(this.parseDataSource(this.spec).refs),this.spec=t;let e=this.parseDataSource(this.spec);return this.attach(e.refs),this._loadTasks=e.transforms,this._isLoaded=!1,this.commit(),this}setValues(t){this._values=(0,l.IX)(t).map((t,e)=>{let i=t===Object(t)?t:{data:t};return i[this._dataIDKey]=e,i})}field(t){return this._values.map(e=>e[t])}transform(t){let e=(0,v.X)(this.spec.transform,this.view);e&&(this.detach(e.refs),this.transforms=[]),this.spec.transform=t;let i=(0,v.X)(this.spec.transform,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.commit(),this}getValue(){return this._values}getInput(){return this._input}addDataFilter(t){return this._postFilters=this._postFilters.concat((0,l.IX)(t)),this._postFilters.sort((t,e)=>{var i,s;return(null!==(i=t.rank)&&void 0!==i?i:0)-(null!==(s=e.rank)&&void 0!==s?s:0)}),this}removeDataFilter(t){let e=(0,l.IX)(t);return this._postFilters=this._postFilters.filter(t=>!e.includes(t)),this}_evaluateFilter(t,e){return this._postFilters.reduce((t,i)=>i.filter(t,e),t)}reuse(t){return t.grammarType!==this.grammarType||(this._isLoaded=!1,this._values=t.output()),this}clear(){super.clear(),this._input=null,this._values=null}}function w(t,e,i,s){let r,n;let a=t[e];for(;e>i&&(r=t[n=Math.floor((e-1)/2)],a&&r&&0>s(a,r));)t[e]=r,e=n;return t[e]=a}function T(t,e,i,s){let r=e,n=null!=i?i:t.length,a=t[e],o,l=2*e+1;for(;l<n;)(o=l+1)<n&&s(t[l],t[o])>=0&&(l=o),t[e]=t[l],l=2*(e=l)+1;return t[e]=a,w(t,e,r,s)}class C{constructor(t){this.compare=t,this.nodes=[]}size(){return this.nodes.length}last(){return this.nodes[0]}validate(){for(let t=this.nodes.length-1;t>0;t-=1){let e=Math.floor((t-1)/2);if(this.compare(this.nodes[e],this.nodes[t])>0)return!1}return!0}push(t){if(this.nodes.includes(t)){let e=this.nodes.indexOf(t);return w(this.nodes,e,0,this.compare),T(this.nodes,e,null,this.compare)}return this.nodes.push(t),w(this.nodes,this.nodes.length-1,0,this.compare)}remove(t){if(this.nodes.includes(t)){let e=this.nodes.indexOf(t);this.nodes=this.nodes.slice(0,e).concat(this.nodes.slice(e+1)),w(this.nodes,e,0,this.compare),T(this.nodes,e,null,this.compare)}}pop(){let t;let e=this.nodes.pop();return this.nodes.length?(t=this.nodes[0],this.nodes[0]=e,T(this.nodes,0,null,this.compare)):t=e,t}clear(){this.nodes=[]}}let M=t=>t;class E{constructor(t){this.list=[],this.ids={},this.idFunc=t||M}add(t){let e=this.idFunc(t);return this.ids[e]||(this.ids[e]=1,this.list.push(t)),this}remove(t){let e=this.idFunc(t);return this.ids[e]&&(this.ids[e]=0,this.list=this.list.filter(e=>e!==t)),this}forEach(t,e){e?this.list.slice().reverse().forEach(t):this.list.forEach(t)}filter(t){return this.list.filter(t)}get length(){return this.list.length}getElementByIndex(t){return this.list[t]}}class B{constructor(){this.grammars=[],this.logger=p.Y.getInstance(),this._curRank=0,this._committed=new E(t=>t.uid),this._heap=new C((t,e)=>(null==t?void 0:t.qrank)-(null==e?void 0:e.qrank)),this._beforeRunner=null,this._afterRunner=null,this._updateCounter=0,this._finishFirstRender=!1}add(t){if(t)return this._setRankOfGrammar(t),this.commit(t),!this.grammars.includes(t)&&(this.grammars.push(t),!0)}remove(t){t&&(this._committed.remove(t),this._heap.remove(t),this.grammars=this.grammars.filter(e=>e!==t))}_setRankOfGrammar(t){t&&(t.rank=++this._curRank)}_reRank(t){let e=[t];for(;e.length;){let i=e.pop();this._setRankOfGrammar(i);let s=i.targets;s&&s.forEach(i=>{e.push(i),i===t&&this.logger.error("Cycle detected in dataflow graph.")})}}_enqueue(t){t&&(t.qrank=t.rank,this._heap.push(t))}_logGrammarRunInfo(t){if(this.logger.canLogError()){let e=[{key:"id",value:t.id()},{key:"name",value:t.name()}].reduce((t,e,i)=>(0,u.Z)(e.value)?t:`${t}${i?" , ":""}${e.key}: ${e.value}`,"");this.logger.debug("Run Operator: ",t,e)}}hasCommitted(){return!!this._committed.length}commit(t){return this._committed.add(t),this}_beforeEvaluate(){this.grammars.forEach(t=>{t.targets.some(e=>(null==e?void 0:e.rank)<(null==t?void 0:t.rank))&&this._reRank(t)}),this._committed.forEach(t=>this._enqueue(t)),this._committed=new E(t=>t.uid)}_enqueueTargets(t){t.targets&&t.targets.length&&this._finishFirstRender&&t.targets.forEach(t=>this._enqueue(t))}evaluate(){if(this._beforeRunner&&this._beforeRunner(this),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._updateCounter+=1;let t,e,i=0;for(this.logger.canLogInfo()&&(e=Date.now(),this.logger.debug(`-- START PROPAGATION (${this._updateCounter}) -----`)),this._beforeEvaluate();this._heap.size()>0;)(t=this._heap.pop())&&(t.rank===t.qrank?(t.run(),this._logGrammarRunInfo(t),this._enqueueTargets(t),i+=1):this._enqueue(t));return this.logger.canLogInfo()&&(e=Date.now()-e,this.logger.info(`> ${i} grammars updated; ${e} ms`)),this._afterRunner&&this._afterRunner(this),this._finishFirstRender=!0,!0}runBefore(t){this._beforeRunner=t}runAfter(t){this._afterRunner=t}release(){this._heap&&(this._heap.clear(),this._heap=null),this.logger=null,this._committed=null}}let O=(t,e,i,s,r)=>{let n=t=>{if(r||!t||s&&!s(t)||i.call(null,t),t.markType===_.Cm.group){let i=t[e];i&&i.forEach(t=>{n(t)})}r&&t&&(!s||s(t))&&i.call(null,t)};n(t)};var I=i(4154),R=i(8909),P=i(7393),L=i(2683),D=i(2575),Z=i(306),F=i(7846),j=i(1361);class H extends j.x{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,r,n,a,o,l,h,d,u,c,p,g){throw Error("Method not implemented.")}}class z extends H{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw Error("getPredictedEvents is not supported!")}clone(){var t,e,i;let s=new z(this.manager);s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.detailPath=[],s.target=null,s.nativeEvent=this.nativeEvent,s.originalEvent=this.originalEvent,null===(t=this.manager)||void 0===t||t.copyPointerData(this,s),null===(e=this.manager)||void 0===e||e.copyMouseData(this,s),null===(i=this.manager)||void 0===i||i.copyData(this,s),s.target=this.target,s.path=this.composedPath().slice();let r=this.composedDetailPath();return s.detailPath=r&&r.slice(),s.type=this.type,s}}class N extends H{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,i;let s=new N(this.manager);s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.detailPath=[],s.target=null,s.nativeEvent=this.nativeEvent,s.originalEvent=this.originalEvent,null===(t=this.manager)||void 0===t||t.copyWheelData(this,s),null===(e=this.manager)||void 0===e||e.copyMouseData(this,s),null===(i=this.manager)||void 0===i||i.copyData(this,s),s.target=this.target,s.path=this.composedPath().slice();let r=this.composedDetailPath();return s.detailPath=r&&r.slice(),s.type=this.type,s}}N.DOM_DELTA_PIXEL=0,N.DOM_DELTA_LINE=1,N.DOM_DELTA_PAGE=2;var V=i(5405),U=i(5939);function G(t){return"mouse"===t||"pen"===t}class W{constructor(t,e){this.dispatch=new(a()),this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(t,e)=>{if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(i,"pointerdown"),"touch"===i.pointerType)this.dispatchEvent(i,"touchstart");else if(G(i.pointerType)){let t=2===i.button;this.dispatchEvent(i,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)},this.onPointerMove=(t,e)=>{var i,s;if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=this.createPointerEvent(t,t.type,e),n=G(r.pointerType),a=this.trackingData(t.pointerId),o=this.findMountedTarget(a.overTargets);if(a.overTargets&&o&&o!==this.rootTarget&&o!==r.target){let e="mousemove"===t.type?"mouseout":"pointerout",i=this.createPointerEvent(t,e,o||void 0);if(this.dispatchEvent(i,"pointerout"),n&&this.dispatchEvent(i,"mouseout"),!r.composedPath().includes(o)){let e=this.createPointerEvent(t,"pointerleave",o||void 0);for(e.eventPhase=e.AT_TARGET;e.target&&!r.composedPath().includes(e.target);)e.currentTarget=e.target,this.notifyTarget(e),n&&this.notifyTarget(e,"mouseleave"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(i)}if(o!==r.target){let e="mousemove"===t.type?"mouseover":"pointerover",i=this.clonePointerEvent(r,e);this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover");let s=null==o?void 0:o.parent;for(;s&&s!==this.rootTarget.parent&&s!==r.target;)s=s.parent;if(!s||s===this.rootTarget.parent){let t=this.clonePointerEvent(r,"pointerenter");t.eventPhase=t.AT_TARGET;let e=t.target,i=new Set,s=o;for(;s&&s!==this.rootTarget;)i.add(s),s=s.parent;for(;e&&e!==o&&e!==this.rootTarget.parent;)i.has(e)||(t.currentTarget=e,this.notifyTarget(t),n&&this.notifyTarget(t,"mouseenter")),e=e.parent;this.freeEvent(t)}this.freeEvent(i)}this.dispatchEvent(r,"pointermove"),"touch"===r.pointerType&&this.dispatchEvent(r,"touchmove"),n&&(this.dispatchEvent(r,"mousemove"),this.cursorTarget=r.target,this.cursor=(null===(s=null===(i=r.target)||void 0===i?void 0:i.attribute)||void 0===s?void 0:s.cursor)||this.rootTarget.getCursor()),a.overTargets=r.composedPath(),this.freeEvent(r)},this.onPointerOver=(t,e)=>{var i,s;if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=this.trackingData(t.pointerId),n=this.createPointerEvent(t,t.type,e),a=G(n.pointerType);this.dispatchEvent(n,"pointerover"),a&&this.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(this.cursorTarget=n.target,this.cursor=(null===(s=null===(i=n.target)||void 0===i?void 0:i.attribute)||void 0===s?void 0:s.cursor)||this.rootTarget.getCursor());let o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),a&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)},this.onPointerOut=(t,e)=>{if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId);if(i.overTargets){let e=G(t.pointerType),s=this.findMountedTarget(i.overTargets),r=this.createPointerEvent(t,"pointerout",s||void 0);this.dispatchEvent(r),e&&this.dispatchEvent(r,"mouseout");let n=this.createPointerEvent(t,"pointerleave",s||void 0);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),e&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;i.overTargets=[],this.freeEvent(r),this.freeEvent(n)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(t,e)=>{var i;if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let s=U.m.now(),r=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if(G(r.pointerType)){let t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}let n=this.trackingData(t.pointerId),a=this.findMountedTarget(n.pressTargetsByButton[t.button]),o=a;if(a&&!r.composedPath().includes(a)){let e=a;for(;e&&!r.composedPath().includes(e);){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if(G(r.pointerType)){let t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],o=e}if(o){let e=this.clonePointerEvent(r,"click");e.target=o,e.path=[],e.detailPath=[],n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:e.target,timeStamp:s});let a=n.clicksByButton[t.button];a.target===e.target&&s-a.timeStamp<(null!==(i=this._config.clickInterval)&&void 0!==i?i:200)?++a.clickCount:a.clickCount=1,a.target=e.target,a.timeStamp=s,e.detail=a.clickCount,G(e.pointerType)?(this.dispatchEvent(e,"click"),2===a.clickCount&&this.dispatchEvent(e,"dblclick")):"touch"===e.pointerType&&this._config.supportsTouchEvents&&(this.dispatchEvent(e,"tap"),2===a.clickCount&&this.dispatchEvent(e,"dbltap")),this.dispatchEvent(e,"pointertap"),this.freeEvent(e)}this.freeEvent(r)},this.onPointerUpOutside=(t,e)=>{if(!(t instanceof z))return void p.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]),r=this.createPointerEvent(t,t.type,e);if(s){let e=s;for(;e;)r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):G(r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),e=e.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(r)},this.onWheel=(t,e)=>{if(!(t instanceof N))return void p.Y.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");let i=this.createWheelEvent(t,e);this.dispatchEvent(i),this.freeEvent(i)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((t,e)=>t.priority-e.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,i,s,r,n,a,o;let l;if(!this.rootTarget)return;let h=this.mappingTable[t.type],d=`${t.canvasX}-${t.canvasY}`;if((null===(e=this._prePointTargetCache)||void 0===e?void 0:e[d])&&(null===(s=null===(i=this._prePointTargetCache)||void 0===i?void 0:i[d])||void 0===s?void 0:s.stage)&&(null===(n=null===(r=this._prePointTargetCache)||void 0===r?void 0:r[d])||void 0===n?void 0:n.stage.renderCount)===(null===(a=this._prePointTargetCache)||void 0===a?void 0:a.stageRenderCount)?l=this._prePointTargetCache[d]:(l=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[d]:l,stageRenderCount:null!==(o=null==l?void 0:l.stage.renderCount)&&void 0!==o?o:-1})),h)for(let e=0,i=h.length;e<i;e++)h[e].fn(t,l);else p.Y.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,r=i.length-1;s<r;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){let e=[t];for(let i=0;i<2048&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=null!=e?e:t.type;let i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var s,r;let n=this.allocateEvent(z);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i||this.pickTarget(null!==(s=n.viewX)&&void 0!==s?s:n.global.x,null!==(r=n.viewY)&&void 0!==r?r:n.global.y,n),"string"==typeof e&&(n.type=e),n}createWheelEvent(t,e){var i,s;let r=this.allocateEvent(N);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=e||this.pickTarget(null!==(i=r.viewX)&&void 0!==i?i:r.global.x,null!==(s=r.viewY)&&void 0!==s?s:r.global.y,r),r}clonePointerEvent(t,e){let i=this.allocateEvent(z);i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice();let s=t.composedDetailPath();return i.detailPath=s&&s.slice(),i.type=null!=e?e:i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof z&&e instanceof z&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof H&&e instanceof H&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(i=>{e[i].x=t[i].x,e[i].y=t[i].y}))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=U.m.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);let i=(null===(e=this.eventPool.get(t))||void 0===e?void 0:e.pop())||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(t){var e;if(t.manager!==this)throw Error("It is illegal to free an event not managed by this EventManager!");let i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),null===(e=this.eventPool.get(i))||void 0===e||e.push(t)}notifyListeners(t,e){let i=t.currentTarget._events[e];if(i){if("fn"in i)i.once&&t.currentTarget.removeEventListener(e,i.fn,{once:!0}),i.fn.call(i.context,t);else for(let s=0,r=i.length;s<r&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeEventListener(e,i[s].fn,{once:!0}),i[s].fn.call(i[s].context,t)}this.emitDelegation(t,e)}emitDelegation(t,e){let i=t.currentTarget._events[V.g];if(i){if("fn"in i)i.fn.call(i.context,t,e);else for(let s=0,r=i.length;s<r&&!t.propagationImmediatelyStopped;s++)i[s].fn.call(i[s].context,t,e)}}pickTarget(t,e,i){let s;let r=this.rootTarget.pick(t,e);return s=r&&r.graphic?r.graphic:r&&r.group?r.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,i&&(i.pickParams=r.params),s}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}let X={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class Y{constructor(t){this.resolution=1,this.onPointerDown=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(!t.cancelable&&"cancelable"in t||t.preventDefault());for(let t=0,i=e.length;t<i;t++){let i=e[t],s=this.bootstrapEvent(this.rootPointerEvent,i);this.manager.mapEvent(s)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType||this.isEventOutsideOfTargetElement(t))return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.isEventOutsideOfTargetViewPort(t)?"outside":"",i=this.normalizeToPointerData(t);for(let t=0,s=i.length;t<s;t++){let s=this.bootstrapEvent(this.rootPointerEvent,i[t]);s.type+=e,this.manager.mapEvent(s)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=t=>{let e=this.normalizeWheelEvent(t);this.manager.mapEvent(e)};let{targetElement:e,resolution:i,rootNode:s,global:r,autoPreventDefault:n=!1,clickInterval:a,supportsTouchEvents:o=r.supportsTouchEvents,supportsPointerEvents:l=r.supportsPointerEvents}=t;this.manager=new W(s,{clickInterval:a,supportsTouchEvents:o}),this.globalObj=r,this.supportsPointerEvents=l,this.supportsTouchEvents=o,this.supportsMouseEvents=r.supportsMouseEvents,this.applyStyles=r.applyStyles,this.autoPreventDefault=n,this.eventsAdded=!1,this.rootPointerEvent=new z,this.rootWheelEvent=new N,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");let{applyStyles:i,domElement:s}=this;if(this.currentCursor===t)return;this.currentCursor=t;let r=this.cursorStyles[t];r?"string"==typeof r&&i?s.style.cursor=r:"function"==typeof r?r(t):"object"==typeof r&&i&&Object.assign(s.style,r):i&&(0,h.Z)(t)&&!(0,Z.Z)(this.cursorStyles,t)&&(s.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.getDocument().addEventListener("pointermove",this.onPointerMove,!0),t.getDocument().addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.getDocument().addEventListener("mousemove",this.onPointerMove,!0),t.getDocument().addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.getDocument().removeEventListener("pointermove",this.onPointerMove,!0),t.getDocument().removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.getDocument().removeEventListener("mousemove",this.onPointerMove,!0),t.getDocument().removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,i;let s=null===(e=this.globalObj)||void 0===e?void 0:e.mapToCanvasPoint(t,this.domElement);if(s)return s;let r=0,n=0;if(t.changedTouches){let e=null!==(i=t.changedTouches[0])&&void 0!==i?i:{};r=e.clientX||0,n=e.clientY||0}else r=t.clientX||0,n=t.clientY||0;let a=this.domElement.getBoundingClientRect();return{x:r-a.left,y:n-a.top}}normalizeToPointerData(t){let e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let i=0,s=t.changedTouches.length;i<s;i++){let s=t.changedTouches[i];(0,F.Z)(s.button)&&(s.button=0),(0,F.Z)(s.buttons)&&(s.buttons=1),(0,F.Z)(s.isPrimary)&&(s.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,F.Z)(s.width)&&(s.width=s.radiusX||1),(0,F.Z)(s.height)&&(s.height=s.radiusY||1),(0,F.Z)(s.tiltX)&&(s.tiltX=0),(0,F.Z)(s.tiltY)&&(s.tiltY=0),(0,F.Z)(s.pointerType)&&(s.pointerType="touch"),(0,F.Z)(s.pointerId)&&(s.pointerId=s.identifier||0),(0,F.Z)(s.pressure)&&(s.pressure=s.force||.5),(0,F.Z)(s.twist)&&(s.twist=0),(0,F.Z)(s.tangentialPressure)&&(s.tangentialPressure=0),(0,F.Z)(s.layerX)&&(s.layerX=s.offsetX=s.clientX),(0,F.Z)(s.layerY)&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent)||((0,F.Z)(t.isPrimary)&&(t.isPrimary=!0),(0,F.Z)(t.width)&&(t.width=1),(0,F.Z)(t.height)&&(t.height=1),(0,F.Z)(t.tiltX)&&(t.tiltX=0),(0,F.Z)(t.tiltY)&&(t.tiltY=0),(0,F.Z)(t.pointerType)&&(t.pointerType="mouse"),(0,F.Z)(t.pointerId)&&(t.pointerId=1),(0,F.Z)(t.pressure)&&(t.pressure=.5),(0,F.Z)(t.twist)&&(t.twist=0),(0,F.Z)(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e}normalizeWheelEvent(t){let e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;let{x:i,y:s}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=s,e.global.x=i,e.global.y=s,e.offset.x=i,e.offset.y=s;let{x:r,y:n}=this.mapToViewportPoint(e);return e.viewport.x=r,e.viewport.y=n,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);let{x:i,y:s}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=s,t.global.x=i,t.global.y=s,t.offset.x=i,t.offset.y=s;let{x:r,y:n}=this.mapToViewportPoint(t);return t.viewport.x=r,t.viewport.y=n,t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=X[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=U.m.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){let e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),i=this.domElement.getViewBox(),s=i.width(),r=i.height();return!(e.x<s&&e.y<r&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}var $=i(6480),K=i(6403),q=i(411),J=i(8535),Q=i(7141),tt=i(7050),te=i(86),ti=i(534);class ts{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&null!=t.stage&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,ti.w.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),ti.w.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),ti.w.graphicService.hooks.onRemove.tap(this.key,this.handleChange)}deactivate(t){let e=t=>t.filter(t=>t.name!==this.key);ti.w.graphicService.hooks.onAttributeUpdate.taps=e(ti.w.graphicService.hooks.onAttributeUpdate.taps),ti.w.graphicService.hooks.onSetStage.taps=e(ti.w.graphicService.hooks.onSetStage.taps),ti.w.graphicService.hooks.onRemove.taps=e(ti.w.graphicService.hooks.onRemove.taps)}}class tr{constructor(){this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&null!=t.stage&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,this.dpr=ti.w.global.devicePixelRatio,this.refresh()}refresh(){this._refreshByMediaQuery()||this._refreshByRaf()}_refreshByRaf(){let t=ti.w.global.getRequestAnimationFrame();this.rafId=t(()=>{ti.w.global.devicePixelRatio!==this.dpr&&(this.dpr=ti.w.global.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0)),this.refresh()})}_refreshByMediaQuery(){try{let t=`(resolution: ${window.devicePixelRatio}dppx)`,e=()=>{window.devicePixelRatio!==this.dpr&&(this.dpr=window.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0))},i=matchMedia(t);i&&i.addEventListener("change",e),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push(()=>{i&&i.removeEventListener("change",e)})}catch(t){return!1}return!0}deactivate(t){var e;let i=ti.w.global.getCancelAnimationFrame();i&&this.rafId&&i(this.rafId),null===(e=this.autoRefreshCbs)||void 0===e||e.forEach(t=>{t()}),this.autoRefreshCbs=void 0}}class tn{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,ti.w.graphicService.hooks.onAddIncremental.tap(this.key,(e,i,s)=>{e.glyphHost&&(e=e.glyphHost),e.stage===t.stage&&null!=e.stage&&(this.nextUserParams.startAtId=i._uid,this.renderNextFrame(i))}),ti.w.graphicService.hooks.onClearIncremental.tap(this.key,(e,i)=>{e.stage===t.stage&&null!=e.stage&&(this.nextUserParams.startAtId=e._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(e))})}deactivate(t){ti.w.graphicService.hooks.onAddIncremental.taps=ti.w.graphicService.hooks.onAddIncremental.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.onClearIncremental.taps=ti.w.graphicService.hooks.onClearIncremental.taps.filter(t=>t.name!==this.key)}renderNextFrame(t){this.nextFrameRenderGroupSet.add(t),this.willNextFrameRender||(this.willNextFrameRender=!0,ti.w.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){let t=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(e=>{let i=e.layer;if(!i||!e.layer.subLayers)return;let s=e.layer.subLayers.get(e._uid);s&&s.drawContribution&&s.drawContribution.draw(t.renderService,Object.assign({stage:t,layer:i,viewBox:t.window.getViewBox(),transMatrix:t.window.getViewBoxTransform(),clear:"transparent",renderService:t.renderService,updateBounds:!1,startAtId:e._uid,context:s.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}let ta=new P.FB;class to{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=te.R.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,t=>{t&&t===this.pluginService.stage&&t.dirtyBounds.clear()}),ti.w.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(t,e,i,s)=>{t.glyphHost&&(t=t.glyphHost),e&&e===this.pluginService.stage&&e.renderCount&&(t.isContainer&&!t.shouldSelfChangeUpdateAABBBounds()||i&&(ta.setValue(s.x1,s.y1,s.x2,s.y2),e.dirty(ta,t.parent&&t.parent.globalTransMatrix)))}),ti.w.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(t,e,i,s,r)=>{e&&e===this.pluginService.stage&&e.renderCount&&(t.isContainer&&!r||e.dirty(s.globalAABBBounds))}),ti.w.graphicService.hooks.clearAABBBounds.tap(this.key,(t,e,i)=>{e&&e===this.pluginService.stage&&e.renderCount&&e&&e.dirty(i)}),ti.w.graphicService.hooks.onRemove.tap(this.key,t=>{let e=t.stage;e&&e===this.pluginService.stage&&e.renderCount&&e&&e.dirty(t.globalAABBBounds)})}deactivate(t){ti.w.graphicService.hooks.beforeUpdateAABBBounds.taps=ti.w.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.afterUpdateAABBBounds.taps=ti.w.graphicService.hooks.afterUpdateAABBBounds.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.clearAABBBounds.taps=ti.w.graphicService.hooks.clearAABBBounds.taps.filter(t=>t.name!==this.key),t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(t=>t.name!==this.key),ti.w.graphicService.hooks.onRemove.taps=ti.w.graphicService.hooks.onRemove.taps.filter(t=>t.name!==this.key)}}(s=r||(r={}))[s.INITIAL=0]="INITIAL",s[s.RUNNING=1]="RUNNING",s[s.PAUSE=2]="PAUSE";class tl{static Avaliable(){return!!ti.w.global.getRequestAnimationFrame()}avaliable(){return tl.Avaliable()}tick(t,e){ti.w.global.getRequestAnimationFrame()(()=>{this.released||e(this)})}release(){this.released=!0}getTime(){return Date.now()}}class th{static Avaliable(){return!0}avaliable(){return th.Avaliable()}tick(t,e){this.timerId=setTimeout(()=>{e(this)},t)}release(){this.timerId>0&&(clearTimeout(this.timerId),this.timerId=-1)}getTime(){return Date.now()}}class td extends a(){set mode(t){this._mode!==t&&(this._mode=t,this.setupTickHandler())}get mode(){return this._mode}constructor(t=[]){super(),this.handleTick=(t,e)=>{let{once:i=!1}=null!=e?e:{};this.ifCanStop()?this.stop():(this._handlerTick(),i||t.tick(this.interval,this.handleTick))},this._handlerTick=()=>{let t=this.tickerHandler.getTime(),e=0;this.lastFrameTime>=0&&(e=t-this.lastFrameTime),this.lastFrameTime=t,this.status===r.RUNNING&&(this.tickCounts++,this.timelines.forEach(t=>{t.tick(e)}),this.emit("tick"))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.timelines=t,this.autoStop=!0}init(){this.interval=NaN,this.status=r.INITIAL,ti.w.global.hooks.onSetEnv.tap("default-ticker",()=>{this.initHandler()}),ti.w.global.env&&this.initHandler()}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}getTimelines(){return this.timelines}initHandler(){if(this._mode)return null;let t=[{mode:"raf",cons:tl},{mode:"timeout",cons:th}];for(let e=0;e<t.length;e++)if(t[e].cons.Avaliable()){this.mode=t[e].mode;break}return null}setupTickHandler(){let t;switch(this._mode){case"raf":t=new tl;break;case"timeout":t=new th;break;default:p.Y.getInstance().warn("非法的计时器模式"),t=new tl}return!!t.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=t,!0)}setInterval(t){this.interval=t}getInterval(){return this.interval}setFPS(t){this.setInterval(1e3/t)}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,t=>{this.handleTick(t,{once:!0})})}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,t=>{this.handleTick(t,{once:!0})})}pause(){return this.status!==r.INITIAL&&(this.status=r.PAUSE,!0)}resume(){return this.status!==r.INITIAL&&(this.status=r.RUNNING,!0)}ifCanStop(){return!!this.autoStop&&(!this.timelines.length||0===this.timelines.reduce((t,e)=>t+e.animateCount,0))}start(t=!1){return this.status!==r.RUNNING&&!!this.tickerHandler&&(!!t||this.status!==r.PAUSE&&!!this.timelines.length&&0!==this.timelines.reduce((t,e)=>t+e.animateCount,0))&&(this.status=r.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=r.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}release(){this.stop(),this.timelines=[],this.tickerHandler.release(),this.emit("afterTick")}trySyncTickStatus(){this.status===r.RUNNING&&this._handlerTick()}}var tu=i(3419);let tc=new td;tc.addTimeline(tu.P),tc.setFPS(60);var tp=i(1822),tg=i(6106),tm=i(7211),tf=i(6420);let tv={BACKGROUND:"white"};class t_ extends q.ZA{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){let e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){let e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return null!==(t=this._background)&&void 0!==t?t:tv.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}constructor(t={}){var e;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=t=>{if(!(this._skipRender<0)){if(t){if(this.dirtyBounds){let t=this.window.getViewBox();this.dirtyBounds.setValue(t.x1,t.y1,t.width(),t.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1}},this.beforeRender=t=>{this._beforeRender&&this._beforeRender(t)},this.afterRender=t=>{this.renderCount++,this._afterRender&&this._afterRender(t),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(e=>e(t)),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{var t;this.tickedBeforeRender=!0,"performance"===(null===(t=this.params.optimize)||void 0===t?void 0:t.tickRenderMode)||"rendering"!==this.state&&this.render()},this.params=t,this.theme=new J.Q2,this.hooks={beforeRender:new tp.n(["stage"]),afterRender:new tp.n(["stage"])},this.global=ti.w.global,!this.global.env&&(0,tm.kP)()&&this.global.setEnv("browser"),this.window=$.n.get(D.Oo),this.renderService=$.n.get(K.pi),this.pluginService=$.n.get(tt.H),this.layerService=$.n.get(tg.IT),this.pluginService.active(this,t),this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:!1!==t.canvasControled,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=null!==(e=t.background)&&void 0!==e?e:tv.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.autoRefresh&&this.enableAutoRefresh(),!1===t.disableDirtyBounds&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),this._beforeRender=t.beforeRender,this._afterRender=t.afterRender,this.ticker=t.ticker||tc,this.supportInteractiveLayer=!1!==t.interactiveLayer,this.timeline=new tu.L,this.ticker.addTimeline(this.timeline),this.timeline.pause(),t.optimize||(t.optimize={}),this.optmize(t.optimize),t.background&&(0,h.Z)(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.ticker.on("afterTick",this.afterTickCb)}pauseRender(t=-1){this._skipRender=t}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new Y(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){let{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:s=0,beta:r=0,camera:n,fieldRatio:a=1,fieldDepth:o}=t;return Object.assign(Object.assign({},t),{center:e,light:i,alpha:s,beta:r,camera:n,fieldRatio:a,fieldDepth:o})}set3dOptions(t){var e,i,s,r,n,a;this.option3d=t;let{light:o,center:l,camera:h,alpha:d,beta:u,fieldRatio:c,fieldDepth:p}=this.get3dOptions(t),{dir:g=[1,1,-1],color:m="white",ambient:f}=o,v=(null!==(e=l.x)&&void 0!==e?e:this.width/2)+(null!==(i=l.dx)&&void 0!==i?i:0),_=(null!==(s=l.y)&&void 0!==s?s:this.height/2)+(null!==(r=l.dy)&&void 0!==r?r:0),y=[v,_,(null!==(n=l.z)&&void 0!==n?n:0)+(null!==(a=l.dz)&&void 0!==a?a:0)],b=0,x=0,S=0;h||(b=Math.sin(d)+v,x=Math.sin(u)+_,S=Math.cos(d)*Math.cos(u)*1);let A=tf.F.getPlugin("DirectionalLight");A&&(this.light=new A(g,m,f));let k={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:c,fieldDepth:p,viewParams:{pos:[b,x,S],center:y,up:[0,1,0]}};if(this.camera)this.camera.params=k;else{let t=tf.F.getPlugin("OrthoCamera");t&&(this.camera=new t(k))}t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRender=t}setAfterRender(t){this._afterRender=t}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;let t=tf.F.getPlugin("ViewTransform3dPlugin");t&&this.pluginService.register(new t)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new ts))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRefresh(){this.autoRefresh||(this.autoRefresh=!0,this.pluginService.register(new tr))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new tn))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new P.YZ;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new to,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;let t=tf.F.getPlugin("FlexLayoutPlugin");t&&this.pluginService.register(new t)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableHtmlAttribute(t){if(this.htmlAttribute)return;let e=tf.F.getPlugin("HtmlAttributePlugin");e&&(this.htmlAttribute=t,this.pluginService.register(new e))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableReactAttribute(t){if(this.reactAttribute)return;let e=tf.F.getPlugin("ReactAttributePlugin");e&&(this.reactAttribute=t,this.pluginService.register(new e))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){let t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw Error("暂不支持")}createLayer(t,e){if("released"===this.releaseStatus)return;let i=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(i),i}sortLayer(t){let e=this.children;e.sort(t),this.removeAllChild(),e.forEach(t=>{this.appendChild(t)})}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){"released"!==this.releaseStatus&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if("released"===this.releaseStatus)return;this.ticker.start(),this.timeline.resume();let i=this.state;this.state="rendering",this.tickedBeforeRender||this.ticker.trySyncTickStatus(),this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if("harmony"===this.global.env){let t=this.window.getContext().nativeContext;this.forEachChildren((e,i)=>{if(i>0){let i=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(i)}})}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach(t=>{this.nextFrameRenderLayerSet.add(t)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if("released"===this.releaseStatus)return;this.timeline.resume(),this.ticker.start();let t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){let i=[];for(let e=0;e<t.length;e++){let s=t[e];"virtual"===s.layerMode&&(s=s.getNativeHandler().mainHandler.layer),i.includes(s)||i.push(s)}i.forEach(t=>{t.renderCount>this.renderCount||(t.renderCount=this.renderCount+1,t===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),t.render({renderService:this.renderService,background:t===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}resizeWindow(t,e,i=!0){this.window.resize(t,e),i&&this.render()}resize(t,e,i=!0){"released"!==this.releaseStatus&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren(i=>{i.resize(t,e)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(t,e,i=!0){"released"!==this.releaseStatus&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren(i=>{i.resizeView(t,e)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(t,e,i,s,r){let n=!0;"object"==typeof t?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),!1===e&&(n=!1)):(this.viewBox.setValue(t,e,t+i,e+s),!1===r&&(n=!1)),this.forEachChildren(t=>{t.resizeView(this.viewBox.width(),this.viewBox.height())}),n&&this.render()}setDpr(t,e=!0){this.forEachChildren(e=>{e.setDpr(t)}),e&&this.render()}setOrigin(t,e){throw Error("暂不支持")}export(t){throw Error("暂不支持")}pick(t,e){if("released"===this.releaseStatus)return;let i=this.getPickerService().pick(this.children,new L.E9(t,e),{bounds:this.AABBBounds});return!(!(null==i?void 0:i.graphic)&&!(null==i?void 0:i.group))&&i}startAnimate(t){throw Error("暂不支持")}setToFrame(t){throw Error("暂不支持")}release(){super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(t=>{t.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(t=>{t.setStage&&t.setStage(null,null),this.interactiveLayer.removeChild(t)}),this.interactiveLayer.release()),this.window.release(),this.ticker.remTimeline(this.timeline),this.ticker.removeListener("afterTick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){"released"!==this.releaseStatus&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(t){"released"!==this.releaseStatus&&this.forEachChildren((e,i)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:0===i,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(t=!0,e){if("released"===this.releaseStatus)return;let i=$.n.get(D.Oo),s=e?-e.x1:0,r=e?-e.y1:0,n=e?e.x2:this.viewWidth,a=e?e.y2:this.viewHeight,o=e?e.width():this.viewWidth,l=e?e.height():this.viewHeight;return i.create({viewBox:{x1:s,y1:r,x2:n,y2:a},width:o,height:l,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(t=!0,e){if("released"===this.releaseStatus)return;let i=this.renderToNewWindow(t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){let e=this.global.mapToCanvasPoint(t,this.window.getContext().canvas.nativeCanvas);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=$.n.get(Q.hH)),this.pickerService}}var ty=i(4761);class tb{constructor(t){this.handleAfterNextRender=()=>{this._stage&&!this._viewOptions.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._view.emit(_.ZK.AFTER_VRENDER_DRAW),this._view.emit(_.ZK.AFTER_VRENDER_NEXT_RENDER)},this._view=t}initialize(t,e,i,s){return this._width=t,this._height=e,this._viewOptions=i,this._eventConfig=s,this.initStage(),this}stage(){var t;return null!==(t=this._stage)&&void 0!==t?t:null}gestureController(){var t;return null!==(t=this._gestureController)&&void 0!==t?t:null}canvas(){return this._stage?this._stage.window.getNativeHandler().nativeCanvas:null}context(){return this._stage?this._stage.window.getContext().nativeContext:null}combineIncrementalLayers(){return this._stage&&(0,R.b4)(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()}),this}background(t){if(this._stage)return this._stage.background=t,this}setDpr(t,e){var i,s;return null===(s=null===(i=this._stage)||void 0===i?void 0:i.setDpr)||void 0===s||s.call(i,t),e&&this.renderNextFrame(),this}shouldResize(t,e){return t!==this._width||e!==this._height}resize(t,e){return this._view.emit(_.ZK.BEFORE_STAGE_RESIZE),this.shouldResize(t,e)&&(this._width=t,this._height=e,this._stage&&this._stage.resize(t,e)),this._view.emit(_.ZK.AFTER_STAGE_RESIZE),this}setViewBox(t,e=!0){return this._stage&&(!t||this._viewBox&&t.x1===this._viewBox.x1&&t.x2===this._viewBox.x2&&t.y1===this._viewBox.y1&&t.y2===this._viewBox.y2||(this._viewBox=t,this._stage.setViewBox(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1,e))),this}render(t=!1){return this._view.emit(_.ZK.BEFORE_VRENDER_DRAW),this.initStage(),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this.handleAfterNextRender),t&&(this._stage.render(),this._view.emit(_.ZK.AFTER_VRENDER_DRAW)),this}renderNextFrame(){return this.initStage(),this._stage.renderNextFrame(),this}toCanvas(){return this._stage?this._stage.toCanvas():null}preventRender(t){this._stage&&this._stage.preventRender(t)}release(){var t;this._view.traverseMarkTree(t=>{t.release()}),this._dragController&&this._dragController.release(),this._gestureController&&this._gestureController.release(),this._stage!==(null===(t=this._viewOptions)||void 0===t?void 0:t.stage)&&this._stage.release(),this._stage=null,this._layer=null,this._dragController=null,this._gestureController=null}createStage(){var t,e,i,s,r;this._view.emit(_.ZK.BEFORE_CREATE_VRENDER_STAGE);let n=this._viewOptions,a=null!==(t=n.stage)&&void 0!==t?t:new t_({width:this._width,height:this._height,renderStyle:n.renderStyle,viewBox:n.viewBox,dpr:n.dpr,canvas:n.renderCanvas,canvasControled:n.canvasControled,container:n.container,title:n.rendererTitle,beforeRender:n.beforeRender,afterRender:n.afterRender,disableDirtyBounds:!0,autoRender:!0,pluginList:n.pluginList,enableHtmlAttribute:n.enableHtmlAttribute,optimize:n.optimize,ticker:n.ticker,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,event:{clickInterval:this._eventConfig.clickInterval,autoPreventDefault:!!this._eventConfig.autoPreventDefault},ReactDOM:n.ReactDOM,autoRefresh:n.autoRefresh});(null===(e=n.options3d)||void 0===e?void 0:e.enable)&&a.set3dOptions(n.options3d),a.enableIncrementalAutoRender(),this._viewBox=n.viewBox,this._view.emit(_.ZK.AFTER_CREATE_VRENDER_STAGE),this._view.emit(_.ZK.BEFORE_CREATE_VRENDER_LAYER);let o=null!==(i=n.layer)&&void 0!==i?i:a.defaultLayer;if(this._view.emit(_.ZK.AFTER_CREATE_VRENDER_LAYER),(null===(s=this._eventConfig)||void 0===s?void 0:s.drag)&&ty.F.getStageEventPlugin("drag")&&(this._dragController=new(ty.F.getStageEventPlugin("drag"))(a)),(null===(r=this._eventConfig)||void 0===r?void 0:r.gesture)&&ty.F.getStageEventPlugin("gesture")){let t=(0,I.Z)(this._eventConfig.gesture)?this._eventConfig.gesture:{};this._gestureController=new(ty.F.getStageEventPlugin("gesture"))(a,t)}return{stage:a,layer:o}}initStage(){if(!this._stage){let{stage:t,layer:e}=this.createStage();this._stage=t,this._layer=e;let i=this._view.background();this.background(i)}}}var tx=i(2200),tS=i(9524);class tA extends m.S{constructor(){super(...arguments),this.grammarType="signal",this.spec={value:null,update:null}}parse(t){return super.parse(t),this.value(t.value),this.update(t.update),this.commit(),this}evaluate(t,e){return this._signal=this.spec.update?(0,f.ZO)(this.spec.update,e,this._signal):this.spec.value,this.spec.value=this._signal,this}output(){return this._signal}getValue(){return this.output()}set(t){if((0,c.Z)(t)&&(0,c.Z)(this.value)&&t.length===this.value.length){for(let e=0;e<t.length;e++)if(this.value[e]!==t[e])return this._signal=t,this.spec.value=t,!0;return!1}return this._signal!==t&&(this._signal=t,this.spec.value=t,!0)}update(t){return(0,u.Z)(t)||this.value(void 0),this.setFunctionSpec(t,"update")}value(t){return(0,u.Z)(t)||this.update(void 0),this.spec.value=t,this.commit(),this}reuse(t){return t.grammarType!==this.grammarType||(this._signal=t.output()),this}clear(){super.clear(),this._signal=null}}var tk=i(1601),tw=i(6602);let tT=-1,tC=[tS.RD,tS.kw,tS.xA,tS.As,tS.uP,tS.J0,tS.t3],tM=(t,e,i)=>{var s,r,n,a,o;return[{id:tS.RD,value:null!==(s=t[tS.RD])&&void 0!==s?s:0},{id:tS.kw,value:null!==(r=t[tS.kw])&&void 0!==r?r:0},{id:tS.xA,value:tE(null!==(a=null!==(n=t[tS.xA])&&void 0!==n?n:e[tS.xA])&&void 0!==a?a:null==i?void 0:i.padding)},{id:tS.As,update:{callback:(t,e)=>{let i=tE(e[tS.xA]);return e[tS.RD]-i.left-i.right},dependency:[tS.RD,tS.xA]}},{id:tS.uP,update:{callback:(t,e)=>{let i=tE(e[tS.xA]);return e[tS.kw]-i.top-i.bottom},dependency:[tS.kw,tS.xA]}},{id:tS.J0,update:{callback:(t,e)=>{let i=tE(e[tS.xA]);return(t||new P.YZ).setValue(i.left,i.top,i.left+e[tS.As],i.top+e[tS.uP])},dependency:[tS.As,tS.uP,tS.xA]}},{id:tS.t3,value:null!==(o=t[tS.t3])&&void 0!==o?o:e[tS.t3]}]},tE=t=>{var e,i,s,r;return(0,tk.Z)(t)?{top:t,bottom:t,left:t,right:t}:{top:null!==(e=null==t?void 0:t.top)&&void 0!==e?e:0,bottom:null!==(i=null==t?void 0:t.bottom)&&void 0!==i?i:0,left:null!==(s=null==t?void 0:t.left)&&void 0!==s?s:0,right:null!==(r=null==t?void 0:t.right)&&void 0!==r?r:0}},tB=t=>{var e;let i=(t,e)=>{var s,r;t.group=e;let n=null!==(s=t.id)&&void 0!==s?s:"VGRAMMAR_MARK_"+ ++tT;t.id=n,(null!==(r=t.marks)&&void 0!==r?r:[]).forEach(t=>i(t,n))};return(null!==(e=t.marks)&&void 0!==e?e:[]).forEach(t=>i(t,"root")),t},tO=t=>{var e,i,s,r,n;let{reuse:a=tw.IB,morph:o=tw.p6,morphAll:l=tw.cK,animation:h={},enableExitAnimation:d=tw.bt}=null!=t?t:{};return{reuse:a,morph:o,morphAll:l,animation:{easing:null!==(e=h.easing)&&void 0!==e?e:tw.fx,delay:null!==(i=h.delay)&&void 0!==i?i:tw.v0,duration:null!==(s=h.duration)&&void 0!==s?s:tw.tR,oneByOne:null!==(r=h.oneByOne)&&void 0!==r?r:tw.I8,splitPath:null!==(n=h.splitPath)&&void 0!==n?n:tw.ov},enableExitAnimation:d}};var tI=i(8656),tR=i(4643),tP=i(1035),tL=i(9038),tD=i(4682);class tZ extends tP.v{constructor(t,e){super(t,_.Cm.group,e),this.children=[]}parseRenderContext(){return{large:!1}}appendChild(t){return this.children.push(t),this}removeChild(t){return this.children=this.children.filter(e=>e!==t),this}includesChild(t,e=!0){return!!this.children.includes(t)||!!e&&this.children.some(e=>e.markType===_.Cm.group&&e.includesChild(t,!0))}updateLayoutChildren(){return this.children.length&&(this.layoutChildren||(this.layoutChildren=[]),this.layoutChildren=this.children.filter(t=>t.needLayout())),this}getAttributeTransforms(){return tI.N7.rect}evaluateJoin(t){if(!this.elements.length){let t=this.createElement();t.updateData(tw.jC,tw.NM,()=>""),this.elements=[t],this.elementMap.set(tw.jC,t)}}getChannelsFromConfig(t){let e=this.spec,i={};if((0,u.Z)(e.clip)||(i.clip=e.clip),(0,u.Z)(e.zIndex)||(i.zIndex=e.zIndex),!(0,u.Z)(e.clipPath)){let s=(0,tL.Z)(e.clipPath)?e.clipPath([t]):e.clipPath;s&&s.length?i.path=s:(i.path=null,i.clip=!1)}return(0,u.Z)(e.interactive)||(i.pickable=e.interactive),i}evaluateGroupEncode(t,e,i){var s;let r=this.elements[0],n={},a=[Object.assign({},null===(s=r.items)||void 0===s?void 0:s[0],{nextAttrs:n})];return(0,tD.h)(r,a,e,i),this._groupEncodeResult=n,n}evaluateEncode(t,e,i,s){let r=this.getChannelsFromConfig();if(e){this.emit(_.ZK.BEFORE_ELEMENT_ENCODE,{encoders:e,parameters:i},this);let n=s?null:this.evaluateGroupEncode(t,e[_.Nw.group],i);t.forEach(t=>{t.items.forEach(t=>{t.nextAttrs=Object.assign(t.nextAttrs,r,n)}),t.encodeItems(t.items,e,this._isReentered,i)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),t,i),t.forEach(t=>{t.encodeGraphic()}),this.emit(_.ZK.AFTER_ELEMENT_ENCODE,{encoders:e,parameters:i},this)}else t.forEach(t=>{t.initGraphicItem(r)})}addGraphicItem(t,e,i){let s=null!=i?i:(0,tR.CJ)(this,this.markType,t);if(s)return this.emit(_.ZK.BEFORE_ADD_VRENDER_MARK,{graphicItem:s}),s.name=`${this.id()||this.markType}`,this.graphicParent.insertIntoKeepIdx(s,this.graphicIndex),this.emit(_.ZK.AFTER_ADD_VRENDER_MARK,{graphicItem:s}),s}}class tF{constructor(t,e){this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}},this._size=0,this._mapKey=(0,h.Z)(t)?e=>e[t]:t,this._warning=e}record(t){var e,i;let s=t.grammarType,r=this._mapKey(t);return this._grammarMap[s]?(this._grammars[s].push(t),(0,u.Z)(r)||(this._grammarMap[s][r]?null===(e=this._warning)||void 0===e||e.call(this,r,t):this._grammarMap[s][r]=t)):(this._grammars.customized.push(t),(0,u.Z)(r)||(this._grammarMap.customized[r]?null===(i=this._warning)||void 0===i||i.call(this,r,t):this._grammarMap.customized[r]=t)),this._size+=1,this}unrecord(t){let e=t.grammarType,i=this._mapKey(t);return this._grammarMap[e]?(this._grammars[e]=this._grammars[e].filter(e=>e!==t),(0,u.Z)(i)||this._grammarMap[e][i]!==t||delete this._grammarMap[e][i]):(this._grammars.customized=this._grammars.customized.filter(e=>e!==t),(0,u.Z)(i)||this._grammarMap.customized[i]!==t||delete this._grammarMap.customized[i]),this._size-=1,this}size(){return this._size}getSignal(t){var e;return null!==(e=this._grammarMap.signal[t])&&void 0!==e?e:null}getData(t){var e;return null!==(e=this._grammarMap.data[t])&&void 0!==e?e:null}getScale(t){var e;return null!==(e=this._grammarMap.scale[t])&&void 0!==e?e:null}getCoordinate(t){var e;return null!==(e=this._grammarMap.coordinate[t])&&void 0!==e?e:null}getMark(t){var e;return null!==(e=this._grammarMap.mark[t])&&void 0!==e?e:null}getCustomized(t){var e;return null!==(e=this._grammarMap.customized[t])&&void 0!==e?e:null}getGrammar(t){return this._grammarMap.data[t]?this._grammarMap.data[t]:this._grammarMap.signal[t]?this._grammarMap.signal[t]:this._grammarMap.scale[t]?this._grammarMap.scale[t]:this._grammarMap.coordinate[t]?this._grammarMap.coordinate[t]:this._grammarMap.mark[t]?this._grammarMap.mark[t]:this._grammarMap.customized[t]?this._grammarMap.customized[t]:null}getAllSignals(){return this._grammars.signal}getAllData(){return this._grammars.data}getAllScales(){return this._grammars.scale}getAllCoordinates(){return this._grammars.coordinate}getAllMarks(){return this._grammars.mark}getAllCustomized(){return this._grammars.customized}traverse(t){var e;Object.values(null!==(e=this._grammars)&&void 0!==e?e:{}).forEach(e=>(null!=e?e:[]).forEach(e=>{t.call(null,e)}))}find(t){let e=null;return this.traverse(i=>!0===t.call(null,i)&&(e=i,!0)),e}filter(t){let e=[];return this.traverse(i=>{!0===t.call(null,i)&&e.push(i)}),e}clear(){this._size=0,this._grammars={signal:[],data:[],scale:[],coordinate:[],mark:[],customized:[]},this._grammarMap={signal:{},data:{},scale:{},coordinate:{},mark:{},customized:{}}}release(){this._size=0,this._grammars=null,this._grammarMap=null}}class tj extends tF{constructor(){super(...arguments),this._markNodes=[]}record(t){if(super.record(t),"mark"===t.grammarType){let e={mark:t,parent:null,children:[]};this._markNodes.forEach(i=>{let s=i.mark;s.markType===_.Cm.group&&s.includesChild(t,!1)?(i.children.push(e),e.parent=i):t.markType===_.Cm.group&&t.includesChild(s,!1)&&(e.children.push(i),i.parent=e)}),this._markNodes.push(e)}return this}unrecord(t){if(super.unrecord(t),"mark"===t.grammarType){let e=this._markNodes.find(e=>e.mark===t);this._markNodes.forEach(i=>{i.mark.markType===_.Cm.group&&i.children.includes(e)?(i.children=i.children.filter(t=>t!==e),e.parent=null):t.markType===_.Cm.group&&e.children.includes(i)&&(e.children=e.children.filter(t=>t!==i),i.parent=null)}),this._markNodes=this._markNodes.filter(t=>t!==e)}return this}getAllMarkNodes(){return this._markNodes}clear(){super.clear(),this._markNodes=[]}release(){super.release(),this._markNodes=null}}class tH extends tP.v{addGraphicItem(t,e){let i=t&&t.limitAttrs,s=i&&("rich"===i.textType||i.text&&"rich"===i.text.type),r=(0,tR.CJ)(this,s?_.Cm.richtext:_.Cm.text,t);return super.addGraphicItem(t,e,r)}release(){super.release()}}tH.markType=_.Cm.text;let tz={axis:{label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#89909d",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],start:{x:0,y:0},end:{x:100,y:0},x:0,y:0},circleAxis:{title:{space:4,padding:[0,0,0,0],textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1},text:"theta"},label:{visible:!0,inside:!1,space:4,style:{fontSize:12,fill:"#6F6F6F",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},items:[],startAngle:0,endAngle:2*Math.PI,radius:100,innerRadius:0,center:{x:0,y:0},x:0,y:0},grid:{style:{stroke:"#f1f2f5"}},circleGrid:{style:{stroke:"#f1f2f5"}},discreteLegend:{layout:"vertical",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:10,spaceRow:10,shape:{space:4,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",stroke:"#D8D8D8",fillOpacity:.5}}},label:{space:4,style:{fontSize:12,fill:"black",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8",fillOpacity:.5}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"},state:{selectedHover:{fillOpacity:.7,fill:"gray"},unSelectedHover:{fillOpacity:.2,fill:"gray"}}},focus:!1,focusIconStyle:{size:10,fill:"#333",cursor:"pointer"},visible:!0,padding:{top:2,bottom:2,left:2,right:2}},autoPage:!0,pager:{space:12,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!1,items:[{index:0,id:"",label:"",shape:{fill:"#6690F2",stroke:"#6690F2",symbolType:"circle"}}]},colorLegend:{title:{visible:!1,text:""},colors:[],layout:"horizontal",railWidth:200,railHeight:8,railStyle:{cornerRadius:5}},sizeLegend:{title:{visible:!1,text:""},trackStyle:{fill:"#ccc"},layout:"horizontal",align:"bottom",railWidth:200,railHeight:6,min:0,max:1,value:[0,1]},lineCrosshair:{start:{x:0,y:0},end:{x:0,y:0}},rectCrosshair:{start:{x:0,y:0},end:{x:0,y:0},rectStyle:{width:10,height:10}},sectorCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:Math.PI/6},circleCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI},polygonCrosshair:{center:{x:0,y:0},radius:100,startAngle:0,endAngle:2*Math.PI,sides:6},slider:{layout:"horizontal",railWidth:200,railHeight:10,railStyle:{cornerRadius:5},range:{draggableTrack:!0},startText:{visible:!0,text:"",space:8},endText:{visible:!0,text:"",space:8},min:0,max:1,value:[0,1]},dataLabel:{size:{width:400,height:400},dataLabels:[]},pointLabel:{data:[{text:"",fill:"#606773",data:{}}],overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},lineLabel:{type:"line",data:[{text:"",data:{}}],position:"start",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},areaLabel:{type:"area",data:[{text:"",data:{}}],position:"end",overlap:{avoidBaseMark:!1,clampForce:!1,size:{width:1e3,height:1e3}},smartInvert:!1},rectLabel:{type:"rect",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},symbolLabel:{type:"symbol",data:[{text:"",fill:"#606773",data:{}}],position:"top",overlap:{avoidBaseMark:!0,size:{width:1e3,height:1e3},strategy:[{type:"position"}]},smartInvert:!1},arcLabel:{type:"arc",data:[{text:"",fill:"#606773",data:{}}],width:800,height:600,position:"outside",zIndex:302},lineDataLabel:{type:"line-data",data:[{text:""}],position:"top",overlap:{avoidBaseMark:!1,clampForce:!1},smartInvert:!1},datazoom:{orient:"bottom",showDetail:"auto",brushSelect:!0,start:0,end:1,position:{x:0,y:0},size:{width:500,height:40},previewData:[]},continuousPlayer:{},discretePlayer:{},tooltip:{},title:{textStyle:{fill:"#21252c"},subtextStyle:{fill:"#606773"}},scrollbar:{width:12,height:12,padding:[2,2],railStyle:{fill:"rgba(0, 0, 0, .1)"}}},tN={symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}},tV=Object.assign({},tz);tV.axis=Object.assign({},tV.axis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),tV.circleAxis=Object.assign({},tV.circleAxis,{label:{style:{fill:"#bbbdc3"}},line:{style:{stroke:"#4b4f54"}},tick:{style:{stroke:"#4b4f54"}},subTick:{style:{stroke:"#4b4f54"}}}),tV.grid=Object.assign({},tV.grid,{style:{stroke:"#404349"}}),tV.circleGrid=Object.assign({},tV.circleGrid,{style:{stroke:"#404349"}}),tV.rectLabel=Object.assign({},tV.rectLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),tV.lineLabel=Object.assign({},tV.lineLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),tV.symbolLabel=Object.assign({},tV.symbolLabel,{data:[{text:"",fill:"#888c93",data:{}}]}),tV.title=Object.assign({},tV.title,{textStyle:{fill:"#fdfdfd"},subtextStyle:{fill:"#888c93"}});class tU{static registerTheme(t,e){t&&tU._themes.set(t,e)}static unregisterTheme(t){tU._themes.delete(t)}static getTheme(t){return tU._themes.get(t)}static getDefaultTheme(){return tU.getTheme("default")}}tU._themes=new Map,tU.registerTheme("default",{name:"default",padding:5,palette:{default:["#6690F2","#70D6A3","#B4E6E2","#63B5FC","#FF8F62","#FFDC83","#BCC5FD","#A29BFE","#63C4C7","#F68484"]},marks:tN,components:tz}),tU.registerTheme("dark",{name:"dark",padding:5,background:"#202226",palette:{default:["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},marks:tN,components:tV});var tG=i(7366),tW=i(4198);let tX=Symbol.for("key");class tY{diffGrammar(t,e){return(0,tW.UJ)(t,e,t=>{var e;return null!==(e=t.id())&&void 0!==e?e:Symbol()})}diffMark(t,e,i){let s={enter:[],exit:[],update:[]},r=[],n=[];t.forEach(t=>{t.markType!==_.Cm.group&&(i.morph&&t.getMorphConfig().morph||i.morphAll||i.reuse)?r.push(t):s.exit.push({prev:[t]})}),e.forEach(t=>{t.markType!==_.Cm.group&&(i.morph&&t.getMorphConfig().morph||i.morphAll||i.reuse)?n.push(t):s.enter.push({next:[t]})});let a=this.diffUpdateByGroup(r,n,t=>t.getMorphConfig().morphKey,t=>t.getMorphConfig().morphKey);r=a.prev,n=a.next,s.update=s.update.concat(a.update);let o=this.diffUpdateByGroup(r,n,t=>t.id(),t=>t.id());r=o.prev,n=o.next,s.update=s.update.concat(o.update);let l=(0,tW.pv)(r,t=>{var e,i;return null===(i=null===(e=t.group)||void 0===e?void 0:e.id)||void 0===i?void 0:i.call(e)}),h=(0,tW.pv)(n,t=>{var e,i;return null===(i=null===(e=t.group)||void 0===e?void 0:e.id)||void 0===i?void 0:i.call(e)});return Object.keys(h).forEach(t=>{let e=l.data.get(t),i=h.data.get(t);if(e&&i){for(let t=0;t<Math.max(e.length,i.length);t+=1){let r=e[t],n=i[t];r&&n?s.update.push({prev:[r],next:[n]}):r?s.exit.push({prev:[r]}):n&&s.enter.push({next:[n]})}r=r.filter(t=>!e.includes(t)),n=n.filter(t=>!i.includes(t))}}),r.forEach(t=>s.exit.push({prev:[t]})),n.forEach(t=>s.enter.push({next:[t]})),s}diffUpdateByGroup(t,e,i,s){let r=(0,tW.pv)(t,t=>{var e;return null!==(e=i(t))&&void 0!==e?e:tX}),n=(0,tW.pv)(e,t=>{var e;return null!==(e=s(t))&&void 0!==e?e:tX}),a=t,o=e,l=[];return n.keys.forEach(t=>{if(t!==tX){let e=r.data.get(t),i=n.data.get(t);e&&i&&(l.push({prev:e,next:i}),a=a.filter(t=>!e.includes(t)),o=o.filter(t=>!i.includes(t)))}}),{prev:a,next:o,update:l}}}class t$ extends a(){static useRegisters(t){t.forEach(t=>{t()})}constructor(t={},e={}){super(),this._observer=null,this._onResize=(0,o.Z)((...t)=>{let e=this._getContainerSize();e&&this.resize(e.width,e.height)},100),this.delegateEvent=(t,e)=>{let i=(0,tx.Z)(this,t,e,tS.Ng);this.emit(e,i,t.element)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(t=>{t.isDoingProgressive()&&t.evaluateProgressive()}),this.doPreProgressive()},this._config=e,this._options=Object.assign({mode:tS.Uv},t),this.initialize()}getGrammarById(t){return this.grammars.getGrammar(t)}getSignalById(t){return this.grammars.getSignal(t)}getDataById(t){return this.grammars.getData(t)}getScaleById(t){return this.grammars.getScale(t)}getCoordinateById(t){return this.grammars.getCoordinate(t)}getMarkById(t){return this.grammars.getMark(t)}getCustomizedById(t){return this.grammars.getCustomized(t)}getGrammarsByName(t){return this.grammars.filter(e=>e.name()===t)}getGrammarsByType(t){return this.grammars.filter(e=>e.grammarType===t)}getMarksByType(t){return this.grammars.getAllMarks().filter(e=>e.markType===t)}getMarksByName(t){return this.grammars.getAllMarks().filter(e=>e.name()===t)}getMarksBySelector(t){if(!t)return null;let e=(0,l.IX)(t),i=[];return e.forEach(t=>{if((0,f.ch)(t))return void i.push(t);if(t[0]===tS.VK){let e=this.getMarkById(t.slice(1));return void(e&&i.push(e))}let e=t[0]===tS.IL?this.getMarksByName(t.slice(1)):(0,tR.ir)(t)?this.getMarksByType(t):null;e&&e.length&&e.forEach(t=>{i.push(t)})}),i}updateSignal(t,e){(0,h.Z)(t)&&(t=this.getSignalById(t)),t.set(e),this.commit(t)}signal(t,e){let i=new tA(this);return arguments.length>=1&&i.value(t),arguments.length>=2&&i.update(e),this.grammars.record(i),this._dataflow.add(i),i}data(t){let e=new k(this,t);return this.grammars.record(e),this._dataflow.add(e),e}scale(t){let e=ty.F.createGrammar("scale",this,t);return e&&(this.grammars.record(e),this._dataflow.add(e)),e}coordinate(t){let e=ty.F.createGrammar("coordinate",this,t);return e&&(this.grammars.record(e),this._dataflow.add(e)),e}mark(t,e,i){let s;let r=(0,h.Z)(e)?this.getMarkById(e):e;switch(t){case _.Cm.group:s=new tZ(this,r);break;case _.Cm.glyph:let n=ty.F.getMark(_.Cm.glyph);n&&(s=new n(this,null==i?void 0:i.glyphType,r));break;case _.Cm.component:s=ty.F.hasComponent(null==i?void 0:i.componentType)?ty.F.createComponent(null==i?void 0:i.componentType,this,r,null==i?void 0:i.mode):new tG.w(this,null==i?void 0:i.componentType,r,null==i?void 0:i.mode);break;case _.Cm.text:s=new tH(this,t,r);break;default:s=ty.F.hasMark(t)?ty.F.createMark(t,this,r):new tP.v(this,t,r)}return this.grammars.record(s),this._dataflow.add(s),s}group(t){return this.mark(_.Cm.group,t)}glyph(t,e){return this.mark(_.Cm.glyph,e,{glyphType:t})}component(t,e,i="2d"){return this.mark(_.Cm.component,e,{componentType:t,mode:i})}axis(t,e="2d"){return this.mark(_.Cm.component,t,{componentType:_.zH.axis,mode:e})}grid(t,e="2d"){return this.mark(_.Cm.component,t,{componentType:_.zH.grid,mode:e})}legend(t){return this.mark(_.Cm.component,t,{componentType:_.zH.legend})}slider(t){return this.mark(_.Cm.component,t,{componentType:_.zH.slider})}label(t){return this.mark(_.Cm.component,t,{componentType:_.zH.label})}datazoom(t){return this.mark(_.Cm.component,t,{componentType:_.zH.datazoom})}player(t){return this.mark(_.Cm.component,t,{componentType:_.zH.player})}title(t){return this.mark(_.Cm.component,t,{componentType:_.zH.title})}scrollbar(t){return this.mark(_.Cm.component,t,{componentType:_.zH.scrollbar})}customized(t,e){let i=ty.F.createGrammar(t,this,null==e?void 0:e.type);if(i)return i.parse(e),this.grammars.record(i),this._dataflow.add(i),i}addGrammar(t){return this.grammars.find(e=>e.uid===t.uid)||(this.grammars.record(t),this._dataflow.add(t),t.parse(t.getSpec()),this._needBuildLayoutTree=!0),this}removeGrammar(t){let e=(0,h.Z)(t)?this.getGrammarById(t):t;return e&&this.grammars.find(t=>t.uid===e.uid)&&("mark"===e.grammarType&&e.prepareRelease(),this._cachedGrammars.record(e),this._dataflow.remove(e),this.grammars.unrecord(e),this._needBuildLayoutTree=!0),this}removeAllGrammars(){return this.grammars.traverse(t=>{"signal"===t.grammarType&&tC.includes(t.id())||"mark"===t.grammarType&&"root"===t.id()||this.removeGrammar(t)}),this}removeAllGraphicItems(){return this.traverseMarkTree(t=>{t.graphicItem&&((0,tR.HX)(t.graphicItem),t.elementMap.forEach(t=>{t.resetGraphicItem()}),t.graphicItem=null)}),this}parseSpec(t){var e,i,s,r,n,a,o,l;if(this.emit(_.ZK.BEFORE_PARSE_VIEW),this._spec=t,tB(t),t.theme?this.theme(t.theme):this.theme(tU.getDefaultTheme()),t.width&&this.width(t.width),t.height&&this.height(t.height),this.padding(null!==(i=null!==(e=t.padding)&&void 0!==e?e:this._options.padding)&&void 0!==i?i:this._theme.padding),!this.width()||!this.height()){let t=this._getContainerSize();t&&(this.updateSignal(tS.RD,t.width),this.updateSignal(tS.kw,t.height))}(null===(s=t.signals)||void 0===s?void 0:s.length)&&t.signals.forEach(t=>{this.signal().parse(t)}),(null===(r=t.data)||void 0===r?void 0:r.length)&&t.data.forEach(t=>{this.data(null).parse(t)}),(null===(n=t.coordinates)||void 0===n?void 0:n.length)&&t.coordinates.forEach(t=>{var e;null===(e=this.coordinate(t.type))||void 0===e||e.parse(t)}),(null===(a=t.scales)||void 0===a?void 0:a.length)&&t.scales.forEach(t=>{var e;null===(e=this.scale(t.type))||void 0===e||e.parse(t)});let h=ty.F.getGrammars();return Object.keys(h).forEach(e=>{let{specKey:i}=h[e];t[i]&&t[i].length&&t[i].forEach(t=>{this.customized(e,t)})}),t.marks&&t.marks.length&&t.marks.forEach(t=>{this.parseMarkSpec(t)}),t.events&&t.events.length&&t.events.forEach(t=>{var e;null===(e=this.event)||void 0===e||e.call(this,t)}),t.interactions&&t.interactions.length&&t.interactions.forEach(t=>{this.interaction(t.type,t)}),!1===t.animation?null===(o=this.animate)||void 0===o||o.disable():null===(l=this.animate)||void 0===l||l.enable(),this.emit(_.ZK.AFTER_PARSE_VIEW),this._needBuildLayoutTree=!0,this._layoutState=_.$s.before,this}updateSpec(t){return this.removeAllInteractions(),this.removeAllGrammars(),this.parseSpec(t)}parseBuiltIn(){tM(this._options,this._config,this.getCurrentTheme()).forEach(t=>{let e=this.signal().parse(t);t.value&&e.set(t.value)}),this.parseMarkSpec({id:"root",type:"group",encode:{enter:{x:0,y:0},update:{width:{signal:"width"},height:{signal:"height"}}}}),this.rootMark=this.getMarkById("root")}parseMarkSpec(t){var e;let i=t.type===_.Cm.glyph?{glyphType:t.glyphType}:t.type===_.Cm.component?{componentType:t.componentType,mode:t.mode}:null;this.mark(t.type,t.group,i).parse(t),null===(e=t.marks)||void 0===e||e.forEach(t=>{this.parseMarkSpec(t)})}theme(t){var e,i,s,r,n,a;(0,h.Z)(t)?this._theme=null!==(e=tU.getTheme(t))&&void 0!==e?e:tU.getDefaultTheme():this._theme=t;let{background:o,padding:l}=null!==(i=this._spec)&&void 0!==i?i:{};return this._theme?(this.background(null!==(s=null!=o?o:this._options.background)&&void 0!==s?s:this._theme.background),this.padding(null!==(r=null!=l?l:this._options.padding)&&void 0!==r?r:this._theme.padding),null===(a=null===(n=this.renderer.stage())||void 0===n?void 0:n.setTheme)||void 0===a||a.call(n,Object.assign({},this._theme.marks))):(this.background(null!=o?o:this._options.background),this.padding(null!=l?l:this._options.padding)),this}getCurrentTheme(){return this._theme}setCurrentTheme(t,e=!0){return this.theme(t),this.grammars.getAllMarks().forEach(t=>{t.commit()}),e?(this.evaluate(),this.renderer.render(!0)):this._dataflow.evaluate(),this}background(t){return arguments.length?(this._background=t,this.renderer.background(t),t):this._background}width(t){let e=this.getSignalById(tS.RD);return arguments.length?(this._options.width=t,this.updateSignal(e,t),t):e.output()}height(t){let e=this.getSignalById(tS.kw);return arguments.length?(this._options.height=t,this.updateSignal(e,t),t):e.output()}viewWidth(t){let e=this.getSignalById(tS.As);if(arguments.length){let e=this.padding();return this.width(t+e.left+e.right),t}return e.output()}viewHeight(t){let e=this.getSignalById(tS.uP);if(arguments.length){let e=this.padding();return this.height(t+e.top+e.bottom),t}return e.output()}padding(t){let e=this.getSignalById(tS.xA);if(arguments.length){let i=tE(t);return this.updateSignal(e,i),i}return tE(e.output())}autoFit(t){let e=this.getSignalById(tS.t3);return arguments.length?(this.updateSignal(e,t),t):e.output()}getViewBox(){let t=this.getSignalById(tS.J0);return null==t?void 0:t.output()}updateLayoutTag(){return this._layoutState=_.$s.before,this}getLayoutState(){return this._layoutState}buildLayoutTree(){let t={},e=[];this.traverseMarkTree(i=>{t[i.id()]=!0,i.group&&t[i.group.id()]||e.push(i),i.markType===_.Cm.group&&i.updateLayoutChildren()},t=>t.needLayout()),this._layoutMarks=e}doLayout(){var t;let e=this._options.doLayout||ty.F.getDefaultLayout();e&&(null===(t=this._layoutMarks)||void 0===t?void 0:t.length)&&(this.emit(_.ZK.BEFORE_DO_LAYOUT),e(this._layoutMarks,this._options,this),this.emit(_.ZK.AFTER_DO_LAYOUT))}handleLayoutEnd(){this.emit(_.ZK.BEFORE_MARK_LAYOUT_END),this._layoutMarks.forEach(t=>{O(t,"layoutChildren",t=>{t.handleLayoutEnd()},e=>e!==t)}),this.emit(_.ZK.AFTER_MARK_LAYOUT_END)}handleRenderEnd(){this.emit(_.ZK.BEFORE_MARK_RENDER_END),O(this.rootMark,"children",t=>{t.handleRenderEnd()}),this.emit(_.ZK.AFTER_MARK_RENDER_END)}commit(t){return this._dataflow.commit(t),this}run(t){return this.evaluate(t),this}doRender(t){this.emit(_.ZK.BEFORE_DO_RENDER),this.renderer&&(!this._progressiveMarks&&this.animate?this.animate.animate():this.traverseMarkTree(t=>{t.cleanExitElements()},null,!0),this.renderer.render(t),this.handleRenderEnd()),this.emit(_.ZK.AFTER_DO_RENDER)}evaluate(t){var e,i;let s=tO(t),r=this._cachedGrammars.size()>0;r&&(this.reuseCachedGrammars(s),this.detachCachedGrammar());let n=this._resizeRenderer(),a=this._dataflow.hasCommitted();return(r||a||this._layoutState||n)&&(this.clearProgressive(),this._dataflow.evaluate(),this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState&&(this._layoutState=_.$s.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=_.$s.reevaluate,this._dataflow.evaluate()),this._layoutState=_.$s.after,(null===(e=this._layoutMarks)||void 0===e?void 0:e.length)&&this.handleLayoutEnd()),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),null===(i=this.morph)||void 0===i||i.call(this,s),this.releaseCachedGrammars(s),this.doRender(!0),this.doPreProgressive()),this}reuseCachedGrammars(t){if(t.reuse){let t=t=>{t.next.reuse(t.prev),t.prev.detachAll(),t.prev.clear(),this._cachedGrammars.unrecord(t.prev)};this._differ.diffGrammar(this._cachedGrammars.getAllSignals(),this.grammars.getAllSignals().filter(t=>!tC.includes(t.id()))).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllData(),this.grammars.getAllData()).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllScales(),this.grammars.getAllScales()).update.forEach(t),this._differ.diffGrammar(this._cachedGrammars.getAllCoordinates(),this.grammars.getAllCoordinates()).update.forEach(t)}this._differ.diffMark(this._cachedGrammars.getAllMarks(),this.grammars.getAllMarks().filter(t=>"root"!==t.id()),t).update.forEach(e=>{var i;let s=1===e.prev.length&&1===e.next.length&&e.prev[0].markType===e.next[0].markType,r=e.prev.every(t=>t.getMorphConfig().morph)&&e.next.every(t=>t.getMorphConfig().morph);this.morph&&(t.morph&&r||t.morphAll)?null===(i=this.addMorphMarks)||void 0===i||i.call(this,{prev:e.prev,next:e.next}):s&&t.reuse&&(e.next[0].reuse(e.prev[0]),e.prev[0].detachAll(),e.prev[0].clear(),this._cachedGrammars.unrecord(e.prev[0]))})}detachCachedGrammar(){this._cachedGrammars.traverse(t=>{var e,i;t.detachAll(),"mark"===t.grammarType&&(null===(i=null===(e=t.group)||void 0===e?void 0:e.removeChild)||void 0===i||i.call(e,t))})}releaseCachedGrammars(t){this._cachedGrammars.traverse(t=>{"mark"!==t.grammarType&&t.release()});let e=this._cachedGrammars.getAllMarkNodes();e.forEach(e=>{var i;null===(i=e.mark.animate)||void 0===i||i.stop(),t.enableExitAnimation&&this.animate&&this.animate.animateAddition(e.mark)});let i=t=>{if(t.mark.view&&(!t.mark.animate||0===t.mark.animate.getAnimatorCount())&&(!t.children||0===t.children.length)){t.mark.release();let e=t.parent;e&&(t.parent.children=t.parent.children.filter(e=>e!==t),t.parent=null,i(e))}};e.forEach(t=>{let e=t.mark;e.animate&&0!==e.animate.getAnimatorCount()?e.addEventListener("animationEnd",()=>{e.animate&&0===e.animate.getAnimatorCount()&&i(t)}):i(t)}),this._cachedGrammars.clear()}runAfter(t){return this._dataflow.runAfter(()=>{t.call(null,this)}),this}runBefore(t){return this._dataflow.runBefore(()=>{t.call(null,this)}),this}getImageBuffer(){var t,e;if("node"!==this._options.mode)return void this.logger.error(TypeError("getImageBuffer() now only support node environment."));let i=null===(e=null===(t=this.renderer)||void 0===t?void 0:t.stage)||void 0===e?void 0:e.call(t);return i?(i.render(),i.window.getImageBuffer()):(this.logger.error(ReferenceError("render is not defined")),null)}traverseMarkTree(t,e,i){return O(this.rootMark,"children",t,e,i),this}_bindResizeEvent(){var t,e,i,s,r,n;if(this.autoFit()){let a=null===(r=null===(s=null===(i=null===(e=null===(t=this.renderer)||void 0===t?void 0:t.stage)||void 0===e?void 0:e.call(t))||void 0===i?void 0:i.window)||void 0===s?void 0:s.getContainer)||void 0===r?void 0:r.call(s);if(a){let t=window.ResizeObserver;this._observer=new t(this._onResize),null===(n=this._observer)||void 0===n||n.observe(a)}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this.autoFit()&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}_getContainerSize(){var t,e,i,s,r,n,a,o,l,h,u;let c=null===(r=null===(s=null===(i=null===(e=null===(t=this.renderer)||void 0===t?void 0:t.stage)||void 0===e?void 0:e.call(t))||void 0===i?void 0:i.window)||void 0===s?void 0:s.getContainer)||void 0===r?void 0:r.call(s);if(c){let{width:t,height:e}=(0,d.Op)(c);return{width:null!==(o=null!==(a=null===(n=this._spec)||void 0===n?void 0:n.width)&&void 0!==a?a:this._options.width)&&void 0!==o?o:t,height:null!==(u=null!==(h=null===(l=this._spec)||void 0===l?void 0:l.height)&&void 0!==h?h:this._options.height)&&void 0!==u?u:e}}return null}resize(t,e,i=!0){let s=!1;return t!==this.width()&&(s=!0,this.updateSignal(tS.RD,t)),e!==this.height()&&(s=!0,this.updateSignal(tS.kw,e)),s&&(i?this.evaluate({morph:!1}):this._dataflow.evaluate()),this}_resizeRenderer(){let t=this.width(),e=this.height();return!!this.renderer.shouldResize(t,e)&&(this.renderer.resize(t,e),this.emit("resize",{},{width:t,height:e}),!0)}interaction(t,e){let i=ty.F.createInteraction(t,this,e);return i&&(i.bind(),this._boundInteractions||(this._boundInteractions=[]),this._boundInteractions.push(i)),i}removeInteraction(t,e){if(this._boundInteractions){let i=this._boundInteractions.filter(i=>{var s;return(0,u.Z)(e)?(0,h.Z)(t)?i.type===t:t?i===t:void 0:(null===(s=i.options)||void 0===s?void 0:s.id)===e});i.length&&i.forEach(t=>{t.unbind()})}return this}removeAllInteractions(){return this._boundInteractions&&(this._boundInteractions.forEach(t=>{t.unbind()}),this._boundInteractions=null),this}initializeEventConfig(t){let e=Object.assign({defaults:{}},t),i=(t,e)=>{e.forEach(e=>{(0,c.Z)(t[e])&&(t[e]=t[e].reduce((t,e)=>(t[e]=!0,t),{}))})};return i(e.defaults,["prevent","allow"]),i(e,[tS.Ng,tS.YJ]),e}initEvent(){let t=this.renderer.stage();t&&t.on("*",this.delegateEvent)}releaseStageEvent(){let t=this.renderer.stage();t&&t.off("*",this.delegateEvent)}addEventListener(t,e,i){let s=e;return i&&!1===i.trap||((s=e).raw=e),i&&i.target&&(s.target=i.target),this.on(t,s),this}removeEventListener(t,e){return e?this.off(t,e):this.off(t),this}initializeRenderer(){let t=this._options.width,e=this._options.height;this.renderer=new tb(this),this.renderer.initialize(t,e,this._options,this._eventConfig).background(this._background)}initialize(){var t,e,i;this.grammars=new tF(t=>t.id(),(t,e)=>this.logger.warn(`Grammar id '${t}' has been occupied`,e)),this._cachedGrammars=new tj(t=>t.id()),this._options.logger&&p.Y.setInstance(this._options.logger),this.logger=p.Y.getInstance(null!==(t=this._options.logLevel)&&void 0!==t?t:0),this._dataflow=new B,this.animate=null===(e=this.initAnimate)||void 0===e?void 0:e.call(this,this),this._differ=new tY,this._options.hooks&&(Object.keys(this._options.hooks).forEach(t=>{this.on(t,this._options.hooks[t])}),this.hooks=this._options.hooks),this.container=null,this.renderer=null,this._eventListeners=[],this._eventConfig=this.initializeEventConfig(this._options.eventConfig),this._theme=this._options.disableTheme?null:tU.getDefaultTheme(),this.parseBuiltIn(),(i=this._options).mode&&g.rF.setEnv(i.mode,i.modeParams||{}),this.initializeRenderer(),this._eventConfig.disable||this.initEvent(),this._bindResizeEvent(),this._needBuildLayoutTree=!0,this._layoutState=_.$s.before,this.theme(this._theme)}pauseProgressive(){return!1}resumeProgressive(){return!1}restartProgressive(){return!1}findProgressiveMarks(){let t=[];return this.traverseMarkTree(e=>{t.push(e)},t=>t.markType!==_.Cm.group&&t.isProgressive()),t.length?(this._progressiveMarks=t,this.renderer&&this.renderer.combineIncrementalLayers(),t):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(t=>t.isDoingProgressive())){let t=g.rF.getRequestAnimationFrame();this._progressiveRafId=t(this.handleProgressiveFrame)}else this._progressiveMarks&&this.animate&&this._progressiveMarks.every(t=>t.canAnimateAfterProgressive())?this.animate.animate():this._progressiveMarks&&(this._progressiveMarks=null)}clearProgressive(){this._progressiveRafId&&g.rF.getCancelAnimationFrame()(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(t=>{t.clearProgressive()}),this._progressiveMarks=null)}release(){var t,e,i,s;this.removeAllInteractions(),this.releaseStageEvent(),this._unBindResizeEvent(),this.clearProgressive(),ty.F.unregisterRuntimeTransforms(),p.Y.setInstance(null),null===(t=this.animate)||void 0===t||t.stop(),this.grammars.release(),this._cachedGrammars.release(),this._dataflow.release(),this._dataflow=null,null===(i=null===(e=this.renderer)||void 0===e?void 0:e.release)||void 0===i||i.call(e),this.renderer=null,this._boundInteractions=null,this.removeAllListeners(),null===(s=this._eventListeners)||void 0===s||s.forEach(t=>{t.source.removeEventListener(t.type,t.handler)}),this._eventListeners=null}}},7366:function(t,e,i){i.d(e,{w:()=>o});var s=i(6602),r=i(2698),n=i(4761),a=i(1035);class o extends a.v{constructor(t,e,i,n){super(t,r.Cm.component,i),this._componentDatum={[s.jC]:0},this.componentType=e,this.spec.type="component",this.spec.componentType=e,this.mode=n,this._updateComponentEncoders()}configureComponent(t){return this.spec.componentConfig=t,this.commit(),this}addGraphicItem(t,e,i){let s=null!=i?i:n.F.createGraphicComponent(this.componentType,t,{mode:this.mode,skipDefault:this.spec.skipTheme});return s&&(this.emit(r.ZK.BEFORE_ADD_VRENDER_MARK,{graphicItem:s}),this.graphicParent.appendChild(s),this.emit(r.ZK.AFTER_ADD_VRENDER_MARK,{graphicItem:s})),s}join(t){return super.join(t,s.jC)}encodeState(t,e,i){return super.encodeState(t,e,i),this._updateComponentEncoders(),this}parseRenderContext(){return{large:!1}}_prepareRejoin(){this._componentDatum[s.jC]+=1}evaluateJoin(t){return this.spec.key=s.jC,t?(t[s.jC]=this._componentDatum[s.jC],this._componentDatum=t):this._componentDatum={[s.jC]:this._componentDatum[s.jC]},super.evaluateJoin([this._componentDatum])}_updateComponentEncoders(){this._encoders=this.spec.encode}_getEncoders(){var t;return null!==(t=this._encoders)&&void 0!==t?t:{}}}},9524:function(t,e,i){i.d(e,{As:()=>l,IL:()=>p,J0:()=>u,Ng:()=>r,RD:()=>a,Uv:()=>n,VK:()=>g,YJ:()=>s,kw:()=>o,t3:()=>c,uP:()=>h,xA:()=>d});let s="window",r="view",n="browser",a="width",o="height",l="viewWidth",h="viewHeight",d="padding",u="viewBox",c="autoFit",p="@",g="#"},668:function(t,e,i){i.d(e,{S:()=>f});var s=i(1312),r=i.n(s),n=i(4546),a=i(9904),o=i(6082),l=i(7623),h=i(4154),d=i(9038),u=i(9689);let c=(t,e)=>(0,u.ch)(t)?t.output():t&&(0,h.Z)(t)?(0,d.Z)(t.callback)?i=>t.callback(i,e):(0,d.Z)(t.value)?t.value(e):t:t,p=(t,e)=>t?(0,h.Z)(t)?Object.keys(t).reduce((i,s)=>{let r=t[s];return i[s]=c(r,e),i},{}):t.map(t=>c(t,e)):t;var g=i(2698);let m=-1;class f extends r(){constructor(t){super(),this.spec={},this.references=new Map,this.targets=[],this.transforms=[],this.view=t,this.uid=++m}parse(t){return this.id(t.id),this.name(t.name),this.depend(t.dependency),this}depend(t){var e;if(null===(e=this.spec)||void 0===e?void 0:e.dependency){let t=(0,n.IX)(this.spec.dependency).map(t=>(0,a.Z)(t)?this.view.getGrammarById(t):t);this.detach(t)}this.spec.dependency=t;let i=(0,n.IX)(t).map(t=>(0,a.Z)(t)?this.view.getGrammarById(t):t);return this.attach(i),this.commit(),this}addEventListener(t,e,i){let s=e;return i&&!1===i.trap||((s=e).raw=e),i&&i.target&&(s.target=i.target),this.on(t,s),this}removeEventListener(t,e){return e?this.off(t,e):this.off(t),this}emit(t,...e){var i,s;return null===(s=null===(i=this.view)||void 0===i?void 0:i.emit)||void 0===s||s.call(i,t,...e),super.emit(t,...e)}emitGrammarEvent(t,...e){return super.emit(t,...e)}evaluateTransform(t,e,i){if(!t||!t.length)return e;let s=e,r=0,n=t.length;for(;r<n;){let e=t[r];this.emit(g.ZK.BEFORE_TRANSFORM,e.type),s=e.transform(e.isRawOptions?e.options:p(e.options,i),s,i,this.view),r++,this.emit(g.ZK.AFTER_TRANSFORM,e.type)}return s}set(t){return!1}id(t){return arguments.length?(this.view.grammars.unrecord(this),this._id=t,this.view.grammars.record(this),this):this._id}name(t){return arguments.length?(this._name=t,this):this._name}attach(t,e=1){return(0,n.IX)(t).filter(t=>!(0,o.Z)(t)).forEach(i=>{var s;(0,o.Z)(t)||(i.targets.includes(this)||i.targets.push(this),this.references.set(i,(null!==(s=this.references.get(i))&&void 0!==s?s:0)+e))}),this}detach(t,e=1){return(0,n.IX)(t).filter(t=>!(0,o.Z)(t)).forEach(t=>{let i=this.references.get(t)-e;i>0?this.references.set(t,i-1):(this.references.delete(t),t.targets.includes(this)&&(t.targets=t.targets.filter(t=>t!==this)))}),this}detachAll(){this.references.forEach((t,e)=>{this.detach(e,t)})}link(t){this.grammarSource=t}run(){var t;let e=null===(t=this.grammarSource)||void 0===t?void 0:t.output(),i=this.parameters();return this.evaluate(e,i)}commit(){this.view.commit(this)}parameters(){let t={};return this.references.forEach((e,i)=>{(0,l.Z)(i.id())&&(t[i.id()]=i.output())}),t}getSpec(){return this.spec}reuse(t){return this}clear(){this.spec=null,this.view=null}release(){this.clear()}setFunctionSpec(t,e){return(0,o.Z)(this.spec[e])||this.detach((0,u.Lf)(this.spec[e],this.view)),this.spec[e]=t,this.attach((0,u.Lf)(t,this.view)),this.commit(),this}}},1035:function(t,e,i){i.d(e,{v:()=>b});var s=i(9904),r=i(6082),n=i(7636),a=i(7623),o=i(6602),l=i(2698),h=i(4198),d=i(4643),u=i(668),c=i(7911),p=i(9689),g=i(9818),m=i(4682),f=i(8656),v=i(2200),_=i(9524),y=i(8807);class b extends u.S{constructor(t,e,i){super(t),this.grammarType="mark",this.elements=[],this.elementMap=new Map,this.isUpdated=!0,this._isReentered=!1,this.differ=new h.Hw([]),this.markType=e,this.spec.type=e,this.spec.encode={update:{}},this.spec.group=i,i&&(this.group=i,this.attach(i),i.appendChild(this))}parse(t){var e,i,r;if(super.parse(t),this.spec.group){let t=(0,s.Z)(this.spec.group)?this.view.getMarkById(this.spec.group):this.spec.group;this.detach(t)}let n=(0,s.Z)(t.group)?this.view.getMarkById(t.group):t.group;return this.attach(n),this.join(null===(e=t.from)||void 0===e?void 0:e.data,t.key,t.sort,t.groupBy,t.groupSort),this.coordinate(t.coordinate),this.state(t.state,this.spec.stateSort),Object.keys(null!==(i=this.spec.encode)&&void 0!==i?i:{}).forEach(t=>{this.encodeState(t,{},!0)}),Object.keys(null!==(r=t.encode)&&void 0!==r?r:{}).forEach(e=>{this.encodeState(e,t.encode[e])}),this.animation(t.animation),this.animationState(t.animationState),this.morph(t.morph,t.morphKey,t.morphElementKey),this.layout(t.layout),this.configure(t),this.transform(t.transform),this.parseAddition(t),this.spec=t,this.markType=t.type,this.commit(),this}parameters(){var t;return null!==(t=this._finalParameters)&&void 0!==t?t:super.parameters()}parseAddition(t){return this}reuse(t){var e;return t.grammarType!==this.grammarType||(this.markType=t.markType,this.coord=t.coord,this.elementMap=t.elementMap,this.elements=t.elements,this.elementMap.forEach(t=>t.mark=this),this.differ=t.differ,null===(e=this.reuseAnimate)||void 0===e||e.call(this,t),this._context=t._context,this.graphicItem=t.graphicItem,this.graphicIndex=t.graphicIndex,this.graphicParent=t.graphicParent,this.needClear=t.needClear,this.isUpdated=t.isUpdated),this}needLayout(){return!(0,r.Z)(this.spec.layout)}handleLayoutEnd(){}handleRenderEnd(){this.needClear&&(this.cleanExitElements(),this.elementMap.forEach(t=>{t.diffState===l.OJ.exit?t.clearGraphicAttributes():t.clearChangedGraphicAttributes()}),this.differ.updateToCurrent(),this.needClear=!1)}evaluateMainTasks(t,e){var i,s;if(this.needSkipBeforeLayout()&&this.view.getLayoutState()===l.$s.before)return this;let r=null===(i=this.view.renderer)||void 0===i?void 0:i.stage();this.init(r,e);let n=this.evaluateTransform(this._getTransformsBeforeJoin(),null!=t?t:o.NM,e),a=null==n?void 0:n.progressive;if(a?this.renderContext={large:!1}:(this.evaluateGroup(n),this.renderContext=this.parseRenderContext(n,e)),null===(s=this.renderContext)||void 0===s?void 0:s.progressive)this.differ.reset(),this.elementMap.clear(),this.evaluateProgressive();else{let t=null;if(a){if(this.renderContext.parameters=e,this.renderContext.beforeTransformProgressive=n.progressive,t=n.progressive.output(),n.progressive.canAnimate&&n.progressive.unfinished())return this.update(this.spec),this}else t=n;this.emit(l.ZK.BEFORE_MARK_JOIN),this.evaluateJoin(t),this.emit(l.ZK.AFTER_MARK_JOIN),this.emit(l.ZK.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,e),this.emit(l.ZK.AFTER_MARK_STATE),this.emit(l.ZK.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),e),this.emit(l.ZK.AFTER_MARK_ENCODE)}return this.update(this.spec),this}evaluateGroup(t){if(this.markType===l.Cm.group)return;let e=(0,h.pv)(null!=t?t:o.NM,this.spec.groupBy,this.spec.groupSort);this._groupEncodeResult=null,this._groupedData=e}_getTransformsAfterEncodeItems(){return this.transforms&&this.transforms.filter(t=>"afterEncodeItems"===t.markPhase)}_getTransformsAfterEncode(){return this.transforms&&this.transforms.filter(t=>(0,r.Z)(t.markPhase)||"afterEncode"===t.markPhase)}_getTransformsBeforeJoin(){return this.transforms?this.transforms.filter(t=>"beforeJoin"===t.markPhase):[]}evaluate(t,e){var i;return this.evaluateMainTasks(t,e),(null===(i=this.renderContext)||void 0===i?void 0:i.progressive)||this.evaluateTransform(this._getTransformsAfterEncode(),this.elements,e),this}output(){return this}join(t,e,i,n,a){return this.grammarSource&&(this.detach(this.grammarSource),this.grammarSource=null),this.spec.from=null,(0,r.Z)(t)||((0,s.Z)(t)?this.grammarSource=this.view.getDataById(t):this.grammarSource=t,this.spec.from={data:t},this.attach(this.grammarSource)),this.spec.key=e,this.spec.sort=i,this.spec.groupBy=n,this.spec.groupSort=a,this.commit(),this}coordinate(t){return(0,s.Z)(t)?this.coord=this.view.getCoordinateById(t):this.coord=t,this.attach(this.coord),this.commit(),this}state(t,e){return this.spec.stateSort=e,this.setFunctionSpec(t,"state")}encode(t,e,i){return this.encodeState(l.OJ.update,t,e,i)}encodeState(t,e,i,r){if(t===l.OJ.enter&&(this._isReentered=!0),this.spec.encode[t]){let n=this.spec.encode[t];if((0,p.hR)(n))this.detach((0,c.$C)(n,this.view));else{let a=(0,s.Z)(e);a&&r||!a&&i?(Object.keys(n).forEach(t=>{this.detach((0,c.$C)(n[t],this.view))}),this.spec.encode[t]={}):a?this.detach((0,c.$C)(n[e],this.view)):Object.keys(e).forEach(t=>{this.detach((0,c.$C)(n[t],this.view))})}}return e&&(this.spec.encode[t]||(this.spec.encode[t]={}),(0,s.Z)(e)?(this.spec.encode[t][e]=i,this.attach((0,c.$C)(i,this.view))):(0,p.hR)(e)?(this.spec.encode[t]=e,this.attach((0,c.$C)(e,this.view))):e&&(Object.assign(this.spec.encode[t],e),Object.values(e).forEach(t=>{this.attach((0,c.$C)(t,this.view))}))),this.commit(),this}_getEncoders(){var t;return null!==(t=this.spec.encode)&&void 0!==t?t:{}}animation(t){return this.spec.animation=t,this}animationState(t){return this.setFunctionSpec(t,"animationState")}layout(t){return this.spec.layout=t,this.commit(),this}morph(t,e,i){return this.spec.morph=t,this.spec.morphKey=e,this.spec.morphElementKey=i,this}transform(t){let e=(0,g.X)(this.spec.transform,this.view);e&&(this.detach(e.refs),this.transforms=[]);let i=(0,g.X)(t,this.view);return i&&(this.attach(i.refs),this.transforms=i.transforms),this.spec.transform=t,this.commit(),this}configure(t){let e=["clip","clipPath","zIndex","interactive","context","setCustomizedShape","large","largeThreshold","progressiveStep","progressiveThreshold","support3d","morph","morphKey","morphElementKey","attributeTransforms","skipTheme","enableSegments","stateSort","graphicName","overflow"];return null===t?e.forEach(t=>{(0,r.Z)(this.spec[t])||(this.spec[t]=void 0)}):e.forEach(e=>{(0,r.Z)(t[e])||(this.spec[e]=t[e])}),this}context(t){return this.spec.context=t,this._context=t,this}isCollectionMark(){return o.FQ.includes(this.markType)}needAnimate(){var t;return!(null===(t=this.renderContext)||void 0===t?void 0:t.progressive)&&!(0,r.Z)(this.spec.animation)}getAllElements(){let t=this.elements.slice();return this.elementMap.forEach(e=>{e.diffState!==l.OJ.exit||t.includes(e)||t.push(e)}),this.spec.sort&&t.sort((t,e)=>this.spec.sort(t.getDatum(),e.getDatum())),t}getScales(){let t={};return this.references.forEach((e,i)=>{i.grammarType===l.mr.scale&&(t[i.id()]=i.output())}),t}getScalesByChannel(){let t=this.spec.encode;if(!t)return{};let e={},i=this.parameters();return Object.keys(t).forEach(s=>{let r=t[s];r&&!(0,p.hR)(r)&&Object.keys(r).forEach(t=>{(0,c.zO)(r[t])&&(e[t]=(0,p.Ur)(r[t].scale,i))})}),e}getFieldsByChannel(){let t=this.spec.encode;if(!t)return{};let e={};return Object.keys(t).forEach(i=>{let s=t[i];(0,p.hR)(s)||Object.keys(s).forEach(t=>{(0,c.CJ)(s[t])&&(e[t]=s[t].field)})}),e}init(t,e){var i,s,r,n,a;if(this._delegateEvent||(this._delegateEvent=(t,e)=>{let i=(0,v.Z)(this.view,t,e,_.Ng),s=t.element;(null==s?void 0:s.mark)===this&&this.emitGrammarEvent(e,i,s)},this.initEvent()),null===(i=this.initAnimate)||void 0===i||i.call(this,this.spec),!this.group){let t=(0,p.Ur)(this.spec.group,e);this.group=t,t&&t.appendChild(this)}let h=this.group?this.group.getGroupGraphicItem():t.defaultLayer,u=null!==(n=null===(r=null===(s=this.group)||void 0===s?void 0:s.children)||void 0===r?void 0:r.indexOf(this))&&void 0!==n?n:0;if(this.markType!==l.Cm.group){if(!this.graphicItem){let t=(0,d.CJ)(this,l.Cm.group,{pickable:!1,zIndex:null!==(a=this.spec.zIndex)&&void 0!==a?a:0,overflow:this.spec.overflow});(this.spec.support3d||o.Nc.includes(this.markType))&&t.setMode("3d"),t.name=`${this.id()||this.markType}`,this.graphicItem=t}this.graphicParent=this.graphicItem,h&&(this.graphicIndex!==u||this.graphicItem.parent!==h)&&h.insertIntoKeepIdx(this.graphicItem,u)}else this.graphicParent=h,this.graphicParent.setAttributes({overflow:this.spec.overflow});this.graphicIndex=u}update(t){var e;if(this.emit(l.ZK.BEFORE_MARK_UPDATE),this._context=this.spec.context,this.isUpdated=!0,this.renderContext.progressive||null===(e=this.updateAnimate)||void 0===e||e.call(this,t),this.markType!==l.Cm.group){if((0,r.Z)(t.zIndex)||this.graphicItem.setAttribute("zIndex",t.zIndex),(0,r.Z)(t.clip)||this.graphicItem.setAttribute("clip",t.clip),!(0,r.Z)(t.clipPath)){let e=(0,n.Z)(t.clipPath)?t.clipPath:t.clipPath(this.elements);e&&e.length?this.graphicItem.setAttribute("path",e):this.graphicItem.setAttributes({path:e,clip:!1})}(0,r.Z)(t.overflow)||this.graphicItem.setAttribute("overflow",t.overflow),this.elementMap.forEach(t=>{t.updateGraphicItem()})}else this.elementMap.forEach(t=>{t.updateGraphicItem()});this.emit(l.ZK.AFTER_MARK_UPDATE)}createElement(){return new y.W(this)}evaluateJoin(t){var e,i,s,n;this.needClear=!0;let a=(0,p.wn)(null!==(s=null!==(e=this.spec.key)&&void 0!==e?e:null===(i=this.grammarSource)||void 0===i?void 0:i.getDataIDKey())&&void 0!==s?s:()=>o.jC),d=(0,p.wn)(null!==(n=this.spec.groupBy)&&void 0!==n?n:()=>o.jC),u=this.spec.sort,c=this.isCollectionMark(),g=new Set(this.elements.filter(t=>t.diffState===l.OJ.enter)),m=[];this.differ.setCallback((t,e,i)=>{var s;let n;if((0,r.Z)(e))(n=this.elementMap.get(t))&&(n.diffState=l.OJ.exit);else if((0,r.Z)(i)){if((n=this.elementMap.has(t)?this.elementMap.get(t):this.createElement()).diffState===l.OJ.exit){n.diffState=l.OJ.enter;let t=null===(s=this.animate)||void 0===s?void 0:s.getElementAnimators(n,l.OJ.exit);t&&t.forEach(t=>t.stop("start"))}n.diffState=l.OJ.enter;let i=c?t:d(e[0]);n.updateData(i,e,a),this.elementMap.set(t,n),m.push(n)}else if(n=this.elementMap.get(t)){n.diffState=l.OJ.update;let i=c?t:d(e[0]);n.updateData(i,e,a),m.push(n)}g.delete(n)});let f=null!=t?t:o.NM;c?this.differ.setCurrentData(this._groupedData):this.differ.setCurrentData((0,h.pv)(f,t=>`${d(t)}-${a(t)}`,void 0)),this.differ.doDiff(),g.forEach(t=>{this.elementMap.delete(c?t.groupKey:`${t.groupKey}-${t.key}`),t.remove(),t.release()}),this.elements=m,u&&this.elements.length>=2&&this.elements.sort((t,e)=>u(t.getDatum(),e.getDatum()))}evaluateState(t,e,i){e&&t.forEach(t=>{t.state(e,i)})}evaluateGroupEncode(t,e,i){if(!this._groupedData||!e)return;let s={};return this._groupedData.keys.forEach(r=>{let n=t.find(t=>t.groupKey===r);n&&(s[r]=(0,m.i)(e,n.items&&n.items[0]&&n.items[0].datum,n,i))}),this._groupEncodeResult=s,s}getChannelsFromConfig(t){let e=this.spec;return(0,r.Z)(e.interactive)?null:{pickable:e.interactive}}evaluateEncode(t,e,i,s){let r=this.getChannelsFromConfig();if(e){this.emit(l.ZK.BEFORE_ELEMENT_ENCODE,{encoders:e,parameters:i},this);let n=s?null:this.evaluateGroupEncode(t,e[l.Nw.group],i);t.forEach(t=>{this.markType===l.Cm.glyph&&this._groupEncodeResult?t.items.forEach(e=>{e.nextAttrs=Object.assign(e.nextAttrs,r,this._groupEncodeResult[t.groupKey])}):(null==n?void 0:n[t.groupKey])&&!this.isCollectionMark()?t.items.forEach(e=>{e.nextAttrs=Object.assign(e.nextAttrs,r,n[t.groupKey])}):r&&t.items.forEach(t=>{t.nextAttrs=Object.assign(t.nextAttrs,r)}),t.encodeItems(t.items,e,this._isReentered,i),this.isCollectionMark()&&(null==n?void 0:n[t.groupKey])&&(0,a.Z)(n[t.groupKey].defined)&&(t.items.forEach(e=>{e.nextAttrs.defined=n[t.groupKey].defined}),delete n[t.groupKey].defined)}),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),t,i),t.forEach(t=>{t.encodeGraphic(this.isCollectionMark()?null==n?void 0:n[t.groupKey]:null)}),this.emit(l.ZK.AFTER_ELEMENT_ENCODE,{encoders:e,parameters:i},this)}else t.forEach(t=>{t.initGraphicItem(r)})}addGraphicItem(t,e,i){var s;let r=null!=i?i:(0,d.CJ)(this,this.markType,t);if(r){if(null===(s=this.renderContext)||void 0===s?void 0:s.progressive){let t;if(this._groupedData){let i=this._groupedData.keys.indexOf(e);i>=0&&(t=this.graphicParent.getChildAt(i))}else t=this.graphicParent.at(0);this.isCollectionMark()?(r.incremental=1,t.appendChild(r)):t.incrementalAppendChild(r)}else this.graphicParent.appendChild(r);return r}}parseRenderContext(t,e){let i=this.markType!==l.Cm.group&&this.spec.progressiveStep>0&&this.spec.progressiveThreshold>0&&this.spec.progressiveStep<this.spec.progressiveThreshold,s=this.spec.large&&this.spec.largeThreshold>0&&t.length>=this.spec.largeThreshold;if(i){let i=this._groupedData;return i&&i.keys&&i.keys.some(t=>i.data.get(t).length>this.spec.progressiveThreshold)?{large:s,parameters:e,progressive:{data:t,step:this.spec.progressiveStep,currentIndex:0,totalStep:i.keys.reduce((t,e)=>Math.max(Math.ceil(i.data.get(e).length/this.spec.progressiveStep),t),1),groupedData:i.data}}:{large:s}}return{large:s}}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}canAnimateAfterProgressive(){return this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.canAnimate()}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this.elements=[],this.graphicParent.children.forEach(t=>{t.incrementalClearChild()}),this.graphicParent.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}evaluateJoinProgressive(){var t,e,i;let s=this.renderContext.progressive.currentIndex,r=(0,p.wn)(null!==(i=null!==(t=this.spec.key)&&void 0!==t?t:null===(e=this.grammarSource)||void 0===e?void 0:e.getDataIDKey())&&void 0!==i?i:()=>o.jC),n=[];if(this.isCollectionMark())return this._groupedData.keys.forEach((t,e)=>{let i=this.renderContext.progressive.groupedData.get(t),a=this.renderContext.progressive.step,o=i.slice(s*a,(s+1)*a);if(0===s){let e=this.createElement();e.diffState=l.OJ.enter,e.updateData(t,o,r),n.push(e)}else{let i=this.elements[e];i.updateData(t,o,r),n.push(i)}}),n;let a={};return this._groupedData.keys.forEach(t=>{let e=this.renderContext.progressive.groupedData.get(t),i=this.renderContext.progressive.step,o=e.slice(s*i,(s+1)*i),h=[];o.forEach(e=>{let i=this.createElement();i.diffState=l.OJ.enter,i.updateData(t,[e],r),h.push(i),n.push(i)}),a[t]=h}),{groupElements:a,elements:n}}evaluateEncodeProgressive(t,e,i){let s=this.renderContext.progressive.currentIndex;if(0===s){if(this.evaluateEncode(t,e,i),0===s&&this._groupEncodeResult&&!this.isCollectionMark()&&this.markType!==l.Cm.glyph){let e=t[0],i=e.getGraphicItem(),s=null==i?void 0:i.parent;s&&this._groupEncodeResult[e.groupKey]&&s.setTheme({common:this._groupEncodeResult[e.groupKey]})}}else this.evaluateEncode(t,e,i,!0)}evaluateProgressive(){var t,e,i;if(null===(t=this.renderContext)||void 0===t?void 0:t.beforeTransformProgressive){let t=this.renderContext.beforeTransformProgressive;t.progressiveRun();let e=t.output();if(t.canAnimate){if(t.unfinished())return;this.evaluateGroup(e)}return this.emit(l.ZK.BEFORE_MARK_JOIN),this.evaluateJoin(e),this.emit(l.ZK.AFTER_MARK_JOIN),this.emit(l.ZK.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,this.renderContext.parameters),this.emit(l.ZK.AFTER_MARK_STATE),this.emit(l.ZK.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),this.renderContext.parameters),void this.emit(l.ZK.AFTER_MARK_ENCODE)}if(!(null===(e=this.renderContext)||void 0===e?void 0:e.progressive))return;let s=this.renderContext.parameters;this.emit(l.ZK.BEFORE_MARK_JOIN);let r=this.evaluateJoinProgressive(),n=Array.isArray(r)?r:r.elements;if(this.emit(l.ZK.AFTER_MARK_JOIN),0===this.renderContext.progressive.currentIndex?(this.graphicParent.removeAllChild(),this._groupedData.keys.forEach(t=>{let e=(0,d.CJ)(this,l.Cm.group,{pickable:!1,zIndex:this.spec.zIndex});e.incremental=this.renderContext.progressive.step,this.graphicParent.appendChild(e)}),this.elements=n):this.elements=this.elements.concat(n),this.emit(l.ZK.BEFORE_MARK_STATE),this.evaluateState(n,this.spec.state,s),this.emit(l.ZK.AFTER_MARK_STATE),this.emit(l.ZK.BEFORE_MARK_ENCODE),Array.isArray(r))this.evaluateEncodeProgressive(n,this._getEncoders(),s);else{let t=r.groupElements;Object.keys(t).forEach(e=>{this.evaluateEncodeProgressive(t[e],this._getEncoders(),s)})}this.emit(l.ZK.AFTER_MARK_ENCODE);let a=null===(i=this._getTransformsAfterEncode())||void 0===i?void 0:i.filter(t=>!0===t.canProgressive);(null==a?void 0:a.length)&&this.evaluateTransform(a,this.elements,s),this.renderContext.progressive.currentIndex+=1}isLargeMode(){return this.renderContext&&this.renderContext.large}cleanExitElements(){this.elementMap.forEach((t,e)=>{t.diffState!==l.OJ.exit||t.isReserved||(this.elementMap.delete(e),t.remove(),t.release())})}getGroupGraphicItem(){if(this.elements&&this.elements[0]&&this.elements[0].getGraphicItem)return this.elements[0].getGraphicItem()}getBounds(){var t;return this.graphicItem?this.graphicItem.AABBBounds:null===(t=this.getGroupGraphicItem())||void 0===t?void 0:t.AABBBounds}getMorphConfig(){var t;return{morph:null!==(t=this.spec.morph)&&void 0!==t&&t,morphKey:this.spec.morphKey,morphElementKey:this.spec.morphElementKey}}getAttributeTransforms(){var t;return null!==(t=this.spec.attributeTransforms)&&void 0!==t?t:f.N7[this.markType]}getContext(){return this._context}needSkipBeforeLayout(){var t,e;if(!0===(null===(t=this.spec.layout)||void 0===t?void 0:t.skipBeforeLayouted))return!0;let i=this.group;for(;i;){if(!0===(null===(e=i.getSpec().layout)||void 0===e?void 0:e.skipBeforeLayouted))return!0;i=i.group}return!1}initEvent(){if(this._delegateEvent){let t=this.view.renderer.stage();t&&t.on("*",this._delegateEvent)}}releaseEvent(){if(this._delegateEvent){let t=this.view.renderer.stage();t&&t.off("*",this._delegateEvent)}}clear(){var t;this.releaseEvent(),this.transforms=null,this.elementMap=null,this.elements=null,this.graphicItem=null,this.animate=null,null===(t=this.group)||void 0===t||t.removeChild(this),this.group=null,super.clear()}prepareRelease(){var t;this.differ.setCurrentData(null),null===(t=this.animate)||void 0===t||t.stop(),this.elementMap.forEach(t=>t.diffState=l.OJ.exit),this._finalParameters=this.parameters()}release(){this.releaseEvent(),this.elements.forEach(t=>t.release()),this.differ=null,this.elements=[],this.elementMap.clear(),this._finalParameters=null,this.animate&&this.animate.release(),this.graphicItem&&(0,d.HX)(this.graphicItem),this.detachAll(),super.release()}}},1833:function(t,e,i){i.d(e,{P:()=>r,p:()=>s});let s={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},r={size:8,stroke:"#000",lineWidth:1,zIndex:1}},1670:function(t,e,i){var s,r,n,a;i.d(e,{X9:()=>s,bz:()=>l,n0:()=>o}),(n=s||(s={})).innerView="inner-view",n.axisContainer="axis-container",n.labelContainer="axis-label-container",n.tickContainer="axis-tick-container",n.tick="axis-tick",n.subTick="axis-sub-tick",n.label="axis-label",n.title="axis-title",n.gridContainer="axis-grid-container",n.grid="axis-grid",n.gridRegion="axis-grid-region",n.line="axis-line",n.background="axis-background",n.axisLabelBackground="axis-label-background",n.axisBreak="axis-break",n.axisBreakSymbol="axis-break-symbol",(a=r||(r={})).selected="selected",a.selectedReverse="selected_reverse",a.hover="hover",a.hoverReverse="hover_reverse";let o={[r.selectedReverse]:{},[r.selected]:{},[r.hover]:{},[r.hoverReverse]:{}},l=999},3924:function(t,e,i){i.d(e,{b:()=>r});var s=i(7449);class r{isInValidValue(t){return t<0||t>1}getTickCoord(t){let{start:e}=this.attribute,i=this.getRelativeVector();return{x:e.x+i[0]*t,y:e.y+i[1]*t}}getRelativeVector(t){let{start:e,end:i}=this.attribute;return[i.x-e.x,i.y-e.y]}getVerticalVector(t,e=!1,i){let{verticalFactor:r=1}=this.attribute,n=this.getRelativeVector(),a=(0,s.Fv)(n),o=[a[1],-1*a[0]];return(0,s.bA)(o,t*(e?1:-1)*r)}}},5198:function(t,e,i){i.d(e,{GK:()=>l,PY:()=>n,Ph:()=>a,nw:()=>h});var s=i(8654),r=i(6082);function n(t){t.forEach(t=>{if(t.rotatedBounds||!t.attribute.angle)return;let e=function(t){let e=t.AABBBounds;return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,centerX:t.attribute.x,centerY:t.attribute.y,angle:t.attribute.angle}}(t),i=(0,s.xj)({x:t.attribute.x,y:t.attribute.y},e.angle,{x:e.centerX,y:e.centerY}),r=i.x-e.centerX,n=i.y-e.centerY;e.x1+=r,e.x2+=r,e.y1+=n,e.y2+=n,e.centerX+=r,e.centerY+=n,t.rotatedBounds=e})}function a(t,e){var i,r;return(null===(i=t.OBBBounds)||void 0===i?void 0:i.empty())||(null===(r=e.OBBBounds)||void 0===r?void 0:r.empty())?(0,s.SX)(t.AABBBounds,e.AABBBounds,!1)&&(!t.rotatedBounds||!e.rotatedBounds||(0,s.nn)(t.rotatedBounds,e.rotatedBounds,!0)):t.OBBBounds.intersects(e.OBBBounds)}let o=Math.sin(Math.PI/10);function l(t,e=o){let i=!(0,r.Z)(t)&&0!==t,s=i?Math.cos(t):1;return i&&Math.abs(s)<=e}function h(t,e=o){let i=!(0,r.Z)(t)&&0!==t,s=i?Math.sin(t):0;return!i||Math.abs(s)<=e}},7192:function(t,e,i){i.d(e,{Vu:()=>h,nZ:()=>d});var s=i(9367),r=i(9536),n=i(4683),a=i(5757),o=i(7307),l=i(1369);function h(){(0,s.M)(),(0,r.N)(),(0,n.v)(),(0,a.g)(),(0,o.k)()}function d(){(0,s.M)(),(0,l.N)()}},5236:function(t,e,i){i.d(e,{m:()=>u});var s=i(5173),r=i(7623),n=i(9038),a=i(4546),o=i(59),l=i(7413);function h(t,e,i,s){let r;let{breakData:n}=t;if(n&&n()){let{breakDomains:t}=n(),a=e.domain();r=[];for(let e=0;e<a.length-1;e++)s(i,[a[e],a[e+1]]).forEach(e=>{t.some(t=>e>=t[0]&&e<=t[1])||r.push(e)});e.domain(a)}else r=s(i);return r}function d(t,e,i,s,r=!1){if(i&&!e.includes(t)){let i=e.length;if(i>1){r?e.push(t):e.unshift(t);for(let t=0;t<i;t++){let n=r?i-1-t:t;if(!s(e[n]))break;e.splice(n,1),t--,i--}}}}let u=(t,e)=>{var i,u,p,g;let m;if(!(0,s.z2)(t.type))return(0,o.KV)(t.domain());let f=t.range(),v=Math.abs(f[f.length-1]-f[0]);if(v<2)return(0,o.KV)([t.domain()[0]]);let{tickCount:_,forceTickCount:y,tickStep:b,noDecimals:x=!1,labelStyle:S,breakData:A}=e;if((0,r.Z)(b))p=t.stepTicks(b),m=(g=A&&A()?A().breakDomains:null)&&g.length?p.filter(t=>g.every(e=>t<e[0]||t>e[1])):p;else if((0,r.Z)(y))m=h(e,t,y,(e,i)=>i&&i.length?t.domain(i,!0).forceTicks(e):t.forceTicks(e));else if("d3"===e.tickMode)m=h(e,t,null!==(i=(0,n.Z)(_)?_({axisLength:v,labelStyle:S}):_)&&void 0!==i?i:5,(e,i)=>i&&i.length?t.domain(i,!0).d3Ticks(e,{noDecimals:x}):t.d3Ticks(e,{noDecimals:x}));else{let i=null!==(u=(0,n.Z)(_)?_({axisLength:v,labelStyle:S}):_)&&void 0!==u?u:5,s=(0,n.Z)(e.tickMode)?e.tickMode:void 0;m=h(e,t,i,(e,i)=>i&&i.length?t.domain(i,!0).ticks(e,{noDecimals:x,customTicks:s}):t.ticks(e,{noDecimals:x,customTicks:s}))}let k=t.domain();if(e.labelFirstVisible&&k[0]!==m[0]&&!m.includes(k[0])&&m.unshift(k[0]),e.labelLastVisible&&k[k.length-1]!==m[m.length-1]&&!m.includes(k[k.length-1])&&m.push(k[k.length-1]),e.sampling&&m.length>1&&("cartesian"===e.coordinateType||"polar"===e.coordinateType&&"radius"===e.axisOrientType)){let i;let{labelGap:s=4,labelFlush:r}=e;if(6*m.length>v){let s=[],r=Math.floor(6*m.length/v);m.forEach((t,e)=>{e%r!=0&&e!==m.length-1||s.push(t)}),i=(0,o.SZ)(t,s,e).map((t,e)=>({AABBBounds:t,value:s[e]}))}else i=(0,o.SZ)(t,m,e).map((t,e)=>({AABBBounds:t,value:m[e]}));let n=i[0],h=(0,a.Z$)(i),u=A&&A()?c.greedy:c.parity;for(;i.length>=3&&(0,l.A9)(i,s);)i=u(i,s);let p=e.labelFirstVisible,g=e.labelLastVisible;(0,l.qw)(n,h,s)&&i.includes(h)&&i.length>1&&p&&g&&(i.splice(i.indexOf(h),1),g=!1),d(n,i,p,t=>(0,l.qw)(t,n,s)),d(h,i,g,t=>(0,l.qw)(t,h,s)||!(!p||t===n)&&(0,l.qw)(t,n,s),!0);let f=i.map(t=>t.value);f.length<3&&r&&(f.length>1&&f.pop(),(0,a.Z$)(f)!==(0,a.Z$)(m)&&f.push((0,a.Z$)(m))),m=f}return(0,o.KV)(m)},c={parity:function(t){return t.filter((t,e)=>e%2==0)},greedy:function(t,e){let i;return t.filter((t,s)=>(!s||!(0,l.qw)(i,t,e))&&(i=t,!0))}}},59:function(t,e,i){i.d(e,{KV:()=>a,SZ:()=>l,tz:()=>h});var s=i(1805),r=i(7393),n=i(8144);let a=t=>t.map((t,e)=>({index:e,value:t})),o=(t,e,i,s)=>i<t?Math.max(t-e/2,i):i>t?Math.min(t-e/2,i-e):i<s?i:i-e,l=(t,e,i)=>{var a;let{labelStyle:l,axisOrientType:h,labelFlush:d,labelFormatter:u,startAngle:c=0}=i,p=null!==(a=l.angle)&&void 0!==a?a:0;"vertical"===l.direction&&(p+=(0,s.M4)(90));let g=["bottom","top"].includes(h),m=["left","right"].includes(h),f=1,v=0;g||(m?(f=0,v=1):c&&(f=Math.cos(c),v=-Math.sin(c)));let _=(0,n.gM)(l),y=t.range();return e.map((i,s)=>{var n,a;let h=u?u(i):`${i}`,{width:c,height:b}=_.quickMeasure(h),x=Math.max(c,12),S=Math.max(b,12),A=t.scale(i),k=f*A,w=v*A,T,C,M=k,E=w;d&&g&&0===s?M=o(k,x,y[0],y[y.length-1]):d&&g&&s===e.length-1?M=o(k,x,y[y.length-1],y[0]):T=null!==(n=l.textAlign)&&void 0!==n?n:"center","right"===T?M-=x:"center"===T&&(M-=x/2),d&&m&&0===s?E=o(w,S,y[0],y[y.length-1]):d&&m&&s===e.length-1?E=o(w,S,y[y.length-1],y[0]):C=null!==(a=l.textBaseline)&&void 0!==a?a:"middle","bottom"===C?E-=S:"middle"===C&&(E-=S/2);let B=(new r.FB).set(M,E,M+x,E+S);return p&&B.rotate(p,k,w),B})},h=t=>["bottom","top","z"].includes(t)},7413:function(t,e,i){i.d(e,{A9:()=>g,cN:()=>d,qw:()=>p,st:()=>c,uX:()=>h,uf:()=>l,zl:()=>u});var s=i(325),r=i(1805),n=i(3745),a=i(1833),o=i(5198);function l(t={}){var e,i;let{style:r={},angle:n=.5*Math.PI}=t,o=(0,s.Z)({},a.P,r),h=null!==(e=o.size)&&void 0!==e?e:a.P.size;return Object.assign(Object.assign({},o),{symbolType:null!==(i=o.symbolType)&&void 0!==i?i:`M ${-h/2} ${h*Math.sin(n)} L ${h/2} ${-h*Math.sin(n)}`,symbolSize:h})}function h(t){let e={};return(0,n.Ck)(t,t=>{"group"!==t.type&&t.id&&(e[t.id]=t)}),e}function d(t,e){return{x:t.x+e[0],y:t.y+e[1]}}function u(t,e,i,s,n){let a=[],o=n-s;for(let n=0;n<e;n++){let l=s+n*o/e;a.push((0,r.op)(t,i,l))}return a}function c(t,e){let i="";return 0===t.length||(t.forEach((t,e)=>{0===e?i=`M${t.x},${t.y}`:i+=`L${t.x},${t.y}`}),e&&(i+="Z")),i}function p(t,e,i){var s;let r,n;let a=null===(s=t.attribute)||void 0===s?void 0:s.angle,l=(t,e,i)=>(r=t.AABBBounds,i>Math.max((n=e.AABBBounds).x1-r.x2,r.x1-n.x2,n.y1-r.y2,r.y1-n.y2));return(0,o.nw)(a,Number.EPSILON)?l(t,e,i):(r=t.OBBBounds,n=e.OBBBounds,!r||!n||r.empty()||n.empty()?l(t,e,i):r.intersects(n))}function g(t,e){for(let i,s=1,r=t.length,n=t[0];s<r;n=i,++s)if(p(n,i=t[s],e))return!0;return!1}},9167:function(t,e,i){var s,r;i.d(e,{$M:()=>l,Di:()=>a,HW:()=>s,Ze:()=>d,eV:()=>c,gB:()=>p,iR:()=>o,m3:()=>u,n0:()=>h,v2:()=>n});let n=-.5*Math.PI,a=1.5*Math.PI,o="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",l=14;(r=s||(s={})).selected="selected",r.selectedReverse="selected_reverse",r.hover="hover",r.hoverReverse="hover_reverse";let h={[s.selectedReverse]:{},[s.selected]:{},[s.hover]:{},[s.hoverReverse]:{}},d={container:"",width:30,height:30,style:{}},u="scrollDown",c="scrollDrag",p="scrollUp"},3e3:function(t,e,i){i.d(e,{k:()=>d});var s=i(411),r=i(3),n=i(5890),a=i(9038),o=i(325),l=i(6082);let h=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class d extends s.ZA{constructor(t,e){super(t),this._skipRenderAttributes=h,(null==e?void 0:e.mode)&&(this.mode=e.mode,this.setMode(e.mode)),(null==e?void 0:e.skipDefault)&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=t,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(t,e,i,s){let r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,s);if(r)return this._setAttributes(r,i);(0,n.Z)(this.attribute[t])&&(0,n.Z)(e)&&!(0,a.Z)(this.attribute[t])&&!(0,a.Z)(e)?(0,o.Z)(this.attribute[t],e):this.attribute[t]=e,this._skipRenderAttributes.includes(t)||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(t,e,i){return t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t,this._setAttributes(t,e)}_setAttributes(t,e){let i=Object.keys(t);this._mergeAttributes(t,i),i.every(t=>this._skipRenderAttributes.includes(t))||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(i))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(t,e){(0,l.Z)(e)&&(e=Object.keys(t));for(let i=0;i<e.length;i++){let s=e[i];!(0,n.Z)(this.attribute[s])||(0,a.Z)(this.attribute[s])||(0,a.Z)(t[s])?this.attribute[s]=t[s]:(0,o.Z)(this.attribute[s],t[s])}}bindEvents(){}_getNodeId(t){var e;return`${null!==(e=this.id)&&void 0!==e?e:this._uid}-${this.name}-${t}`}_dispatchEvent(t,e){var i;let s=new r.A(t,e);s.manager=null===(i=this.stage)||void 0===i?void 0:i.eventSystem.manager,this.dispatchEvent(s)}}},4309:function(t,e,i){i.d(e,{E:()=>K});var s=i(3872),r=i(7578),n=i(8908),a=i(325),o=i(1121),l=i(6082),h=i(9038),d=i(7623),u=i(4154),c=i(7636),p=i(9904),g=i(8654),m=i(3e3),f=i(9921),v=i(2450);let _=["#ffffff","#000000"];function y(t,e,i,s,r,n){if("string"!=typeof t||"string"!=typeof e)return t;let a=new f.Il(t).toHex(),o=new f.Il(e).toHex();return b(a,o,i,s,n)?a:function(t,e,i,s,r,n){let a=[];for(let o of(r&&(r instanceof Array?a.push(...r):a.push(r)),a.push(..._),a))if(t!==o&&b(o,e,i,s,n))return o}(a,o,i,s,r,n)}function b(t,e,i,s,r){if("lightness"===r){let i=f.Il.getColorBrightness(new f.Il(e));return .5>f.Il.getColorBrightness(new f.Il(t))?i>=.5:i<.5}return s?x(t,e)>s:"largeText"===i?x(t,e)>3:x(t,e)>4.5}function x(t,e){let i=S(t),s=S(e);return((i>s?i:s)+.05)/((i>s?s:i)+.05)}function S(t){let e=(0,v.Z)(t),i=e[0]/255,s=e[1]/255,r=e[2]/255;return .2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}function A(t,e,i,s){let r;switch(t){case"base":r=e;break;case"invertBase":r=i;break;case"similarBase":r=s}return r}var k=i(3745),w=i(8144),T=i(9167),C=i(3529);function M(t,e,i,s=!0,r=0){let n=i;r>0&&(n={x1:i.x1-r,x2:i.x2+r,y1:i.y1-r,y2:i.y2+r}),n=(0,C.dK)(t,n);let a=e.outOfBounds(n);return(!s||!a)&&(a&&(n=(0,C.nR)(t,n)),!e.getRange(n))}function E(t,e,i,s=[],r=!0,n=0,a=!1){let o=s.filter(t=>(0,d.Z)(t));for(let s=0;s<o.length;s++){let l;if((l=a?i:i.clone()).setAttributes(o[s]),M(t,e,l.AABBBounds,r,n))return e.setRange((0,C.dK)(t,l.AABBBounds,!0)),o[s]}return!1}let B=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],O=["top","inside-top","inside"];function I(t,e,i,s={}){let{x1:r,x2:n,y1:a,y2:o}=t.AABBBounds,{top:l=0,left:h=0,right:d=0,bottom:u=0}=s,c=Math.min(r,n),p=Math.max(r,n),g=Math.min(a,o),m=Math.max(a,o),f=e+d,v=i+u,_=0,y=0;return c<0-h?_=-c:p>f&&(_=f-p),g<0-l?y=-g:m>v&&(y=v-m),{dx:_,dy:y}}var R=i(3337),P=i(4546),L=i(8378);let D={fadeIn:(t={})=>{var e,i,s;return{from:{opacity:0,fillOpacity:0,strokeOpacity:0},to:{opacity:null!==(e=t.opacity)&&void 0!==e?e:1,fillOpacity:null!==(i=t.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(s=t.strokeOpacity)&&void 0!==s?s:1}}},fadeOut:(t={})=>{var e,i,s;return{from:{opacity:null!==(e=t.opacity)&&void 0!==e?e:1,fillOpacity:null!==(i=t.fillOpacity)&&void 0!==i?i:1,strokeOpacity:null!==(s=t.strokeOpacity)&&void 0!==s?s:1},to:{opacity:0,fillOpacity:0,strokeOpacity:0}}}};function Z(t,e){var i,s;return null!==(s=null===(i=D[e])||void 0===i?void 0:i.call(D,t))&&void 0!==s?s:{from:{},to:{}}}let F=(t,e,i,s)=>{let r=Object.assign({},t.attribute),n=Object.assign({},e.attribute);return(0,P.IX)(null==s?void 0:s.excludeChannels).forEach(t=>{delete n[t]}),Object.keys(n).forEach(t=>{i&&!i.includes(t)&&delete n[t]}),{from:r,to:n}};function j(t,e,i,s){t.attribute.text!==e.attribute.text&&(0,L.Z)(Number(t.attribute.text)*Number(e.attribute.text))&&t.animate().play(new R.Bm({text:t.attribute.text},{text:e.attribute.text},i,s))}let H={mode:"same-time",duration:300,easing:"linear"};var z=i(3901),N=i(9367),V=i(5757),U=i(4683),G=i(9536),W=i(5859);let X=(t,e)=>Math.ceil(t)>Math.floor(e),Y=([t,e],[i,s])=>s>t&&e>i;var $=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};(0,N.M)(),(0,V.g)(),(0,U.v)(),(0,G.N)();class K extends m.k{setBitmap(t){this._bitmap=t}setBitmapTool(t){this._bmpTool=t}constructor(t,e){let{data:i}=t;super((null==e?void 0:e.skipDefault)?t:Object.assign({data:i},(0,a.Z)({},K.defaultAttributes,$(t,["data"])))),this.name="label",this._onHover=t=>{let e=t.target;e===this._lastHover||(0,o.Z)(e.states)||(e.addState(T.HW.hover,!0),(0,k.Ck)(this,t=>{t===e||(0,o.Z)(t.states)||t.addState(T.HW.hoverReverse,!0)}),this._lastHover=e)},this._onUnHover=t=>{this._lastHover&&((0,k.Ck)(this,t=>{(0,o.Z)(t.states)||(t.removeState(T.HW.hoverReverse),t.removeState(T.HW.hover))}),this._lastHover=null)},this._onClick=t=>{let e=t.target;if(this._lastSelect===e&&e.hasState("selected"))return this._lastSelect=null,void(0,k.Ck)(this,t=>{(0,o.Z)(t.states)||(t.removeState(T.HW.selectedReverse),t.removeState(T.HW.selected))});(0,o.Z)(e.states)||(e.addState(T.HW.selected,!0),(0,k.Ck)(this,t=>{t===e||(0,o.Z)(t.states)||t.addState(T.HW.selectedReverse,!0)}),this._lastSelect=e)},this._handleRelatedGraphicSetState=t=>{var e,i,r,n,a;if((null===(e=t.detail)||void 0===e?void 0:e.type)===s.Gk.STATE||(null===(i=t.detail)||void 0===i?void 0:i.type)===s.Gk.ANIMATE_UPDATE&&(null===(r=t.detail.animationState)||void 0===r?void 0:r.isFirstFrameOfStep)){let e=null!==(a=null===(n=t.target)||void 0===n?void 0:n.currentStates)&&void 0!==a?a:[],i=this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(t.target)];this.updateStatesOfLabels(i,e)}}}labeling(t,e,i,s){}_getLabelLinePoints(t,e){return(0,z.XI)(t.AABBBounds,null==e?void 0:e.AABBBounds)}_createLabelLine(t,e){let i=this._getLabelLinePoints(t,e);if(i){let s=r.i.line({points:i}),{line:a={}}=t.attribute;if(a.customShape){let i=a.customShape;s.pathProxy=s=>i({text:t,baseMark:e},s,new n.r)}return e&&e.attribute.fill&&s.setAttribute("stroke",e.attribute.fill),this.attribute.line&&!(0,o.Z)(this.attribute.line.style)&&s.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(s),s}}render(){if(this._prepare(),(0,l.Z)(this._idToGraphic)||this._isCollectionBase&&(0,l.Z)(this._idToPoint))return;let{overlap:t,smartInvert:e,dataFilter:i,customLayoutFunc:s,customOverlapFunc:r}=this.attribute,n=this.attribute.data;if((0,h.Z)(i)&&(n=i(n)),n&&n.length){let t=new Set;n=n.filter(e=>!t.has(e.id)&&t.add(e.id))}let a=this._initText(n);a=(0,h.Z)(s)?s(n,a,this.getRelatedGraphic.bind(this),this._isCollectionBase?t=>this._idToPoint.get(t.id):null,this):this._layout(a),(0,h.Z)(r)?a=r(a,this.getRelatedGraphic.bind(this),this._isCollectionBase?t=>this._idToPoint.get(t.id):null,this):!1!==t&&(a=this._overlapping(a)),(0,h.Z)(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(a,this.getRelatedGraphic.bind(this),this._isCollectionBase?t=>this._idToPoint.get(t.id):null,this),a&&a.length&&a.forEach(t=>{this._bindEvent(t),this._setStatesOfText(t)}),!1!==e&&this._smartInvert(a),this._renderLabels(a)}_bindEvent(t){if(this.attribute.disableTriggerEvent||!t)return;let{hover:e,select:i}=this.attribute;e&&(t.addEventListener("pointermove",this._onHover),t.addEventListener("pointerout",this._onUnHover)),i&&t.addEventListener("pointerdown",this._onClick)}_setStatesOfText(t){if(!t)return;let e=this.attribute.state;e&&!(0,o.Z)(e)&&(t.states=e)}_setStatesOfLabelLine(t){if(!t)return;let e=this.attribute.labelLineState;e&&!(0,o.Z)(e)&&(t.states=e)}_createLabelText(t){var e,i;let s=Object.assign(Object.assign({},null===(i=null===(e=this.stage)||void 0===e?void 0:e.getTheme())||void 0===i?void 0:i.text),t);return(0,w.vS)(s,"textType")}_prepare(){var t,e;let i=[];if(((0,h.Z)(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():(0,k.tP)(this.getRootNode(),this.attribute.baseMarkGroupName)).forEach(t=>{"willRelease"!==t.releaseStatus&&i.push(t)}),null===(t=this._idToGraphic)||void 0===t||t.clear(),null===(e=this._idToPoint)||void 0===e||e.clear(),this._baseMarks=i,this._isCollectionBase="line-data"===this.attribute.type,!i||0===i.length)return;let{data:s}=this.attribute;if(s&&0!==s.length){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let t=0;for(let e=0;e<i.length;e++){let r=i[e],n=(0,z.CB)(r);if(n&&n.length)for(let e=0;e<n.length;e++){let i=s[t];i&&n[e]&&((0,d.Z)(i.id)||(i.id=`vrender-component-${this.name}-${t}`),this._idToPoint.set(i.id,n[e]),this._idToGraphic.set(i.id,r)),t++}}}else for(let t=0;t<i.length;t++){let e=s[t],r=i[t];e&&r&&((0,d.Z)(e.id)||(e.id=`vrender-component-${this.name}-${t}`),this._idToGraphic.set(e.id,r))}if(!1!==this.attribute.animation){let{animation:t,animationEnter:e,animationExit:i,animationUpdate:s}=this.attribute,r=(0,u.Z)(t)?t:{};this._animationConfig={enter:!1!==e&&(0,a.Z)({},H,r,null!=e?e:{}),exit:!1!==i&&(0,a.Z)({},H,r,null!=i?i:{}),update:!1!==s&&((0,c.Z)(s)?s:(0,a.Z)({},H,r,null!=s?s:{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}getRelatedGraphic(t){return this._idToGraphic.get(t.id)}_initText(t=[]){let{textStyle:e={}}=this.attribute,i=[];for(let s=0;s<t.length;s++){let r=t[s],n=this.getRelatedGraphic(r);if(!n)continue;let a=Object.assign(Object.assign({fill:this._isCollectionBase?(0,c.Z)(n.attribute.stroke)?n.attribute.stroke.find(t=>!!t&&!0!==t):n.attribute.stroke:n.attribute.fill},e),r),o=this._createLabelText(a);i.push(o)}return i}_layout(t){let{position:e,offset:i}=this.attribute;for(let s=0;s<t.length;s++){let r=t[s];if(!r)return;let n=r.attribute,a=this.getRelatedGraphic(n);if(!a)continue;r.attachedThemeGraphic=this;let o=this.getGraphicBounds(r);r.attachedThemeGraphic=null;let l=(0,h.Z)(e)?e(n):e,d=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(n.id),l):this.getGraphicBounds(a,{x:n.x,y:n.y},l),u=this.labeling(o,d,l,i);u&&r.setAttributes(u)}return t}_overlapping(t){var e,i,s;if(0===t.length)return[];let r=(0,u.Z)(this.attribute.overlap)?this.attribute.overlap:{},n=this.getBaseMarkGroup(),a=null!==(e=r.size)&&void 0!==e?e:{width:null!==(i=null==n?void 0:n.AABBBounds.width())&&void 0!==i?i:0,height:null!==(s=null==n?void 0:n.AABBBounds.height())&&void 0!==s?s:0};if(0===a.width||0===a.height)return t;let{strategy:o,priority:l}=r,h=this._bmpTool||(0,C.OM)(a.width,a.height),d=this._bitmap||h.bitmap();return l&&(t=t.sort((t,e)=>l(e.attribute.data)-l(t.attribute.data))),"shiftY"===(null==o?void 0:o.type)?this._overlapGlobal(t,r,h,d):this._overlapByStrategy(t,r,h,d)}_overlapGlobal(t,e,i,s){let r=t.filter(t=>t.attribute.visible&&0!==t.attribute.opacity),{clampForce:n=!0,hideOnHit:a=!0,overlapPadding:o,strategy:l}=e;if(n)for(let e=0;e<r.length;e++){let s=t[e],{dx:r=0,dy:n=0}=I(s,i.width,i.height,i.padding);0===r&&0===n||(s.setAttributes({x:s.attribute.x+r,y:s.attribute.y+n}),s._isClamped=!0)}r=function(t,e){let{maxY:i=Number.MAX_VALUE,labelling:s,globalShiftY:r={enable:!0,maxIterations:10,maxError:.1,padding:1}}=e,n=t.length;if(n<=1)return t;let a=new Map,o=new Map,l=t=>o.get(t).y1Initial,h=t=>o.get(t).height,d=t=>o.get(t).y1,u=t=>o.get(t).x,c=t=>o.get(t).x1,p=t=>o.get(t).x2,g=t=>o.get(t).attempts,m=(t,e)=>{o.get(t).y1=e},f=(t,e)=>{o.get(t).attempts=e};for(let e of(t.sort((t,e)=>t.attribute.x-e.attribute.x),t)){let{y1:t,y2:i,x1:s,x2:r}=e.AABBBounds,{x:n,y:l}=e.attribute;o.set(e,{y1Initial:t,y1:t,y2:i,y:l,height:i-t,x1:s,x2:r,x:n,attempts:0});let h=!1;for(let[t,i]of a){let{start:o,end:l}=t;if(s>=o&&r<=l)i.push(e),h=!0;else if((0,W.Yt)(n,u(i[0]),void 0,5)){let n={start:Math.min(o,s),end:Math.max(l,r)};i.push(e),a.set(n,i),a.delete(t),h=!0}else if(function(t,e){let[i,s]=t,[r,n]=e;return Math.max(0,Math.min(s,n)-Math.max(i,r))}([o,l],[s,r])/(l-o)>.5){let n={start:Math.min(o,s),end:Math.max(l,r)};i.push(e),a.set(n,i),a.delete(t),h=!0}if(h)break}h||a.set({start:s,end:r},[e])}for(let t of a.values())t.sort((t,e)=>l(t)-l(e)),function(t){for(let e=t.length-1;e>=0;e--){let r=t[e],n=t[e-1],a=t[e+1];if(n&&X(d(n)+h(n),d(r))||0===d(r)&&r._isClamped){let{y:t}=s(r);a&&X(t+h(r)/2,d(a))||t+h(r)/2<=i&&m(r,d(r)+t-o.get(r).y)}}}(t);if(!1!==r.enable){let{maxIterations:e=10,maxError:s=.1,padding:a=1,maxAttempts:o=1e3,deltaYTolerance:u=Number.MAX_VALUE}=r;for(let r=0;r<e;r++){t.sort((t,e)=>l(t)-l(e));let e=0;for(let s=0;s<n-1;s++){let r=t[s];if(g(r)>=o)continue;let n,v=s+1;for(;(n=t[v])&&!Y([c(r),p(r)],[c(n),p(n)]);)v+=1;if(n){let t=d(r),s=h(r),o=d(n),c=o-(t+s);if(c<a){let s=(a-c)/2;if(e=Math.max(e,s),t+s+h(n)>i){let e=t-(a-c);Math.abs(l(r)-e)<=u&&(m(r,e),f(r,g(r)+1))}else if(t-s<0){let t=o+(a-c);Math.abs(l(n)-t)<=u&&(m(n,t),f(n,g(n)+1))}else{let e=t-s,i=l(r)-e,a=o+s,h=l(n)-a;Math.abs(i)<=u&&Math.abs(h)<=u&&(m(r,e),m(n,a),f(r,g(r)+1),f(n,g(n)+1))}}}}if(e<s)break}}for(let e of t){let t=e.attribute.y+d(e)-l(e);e.setAttribute("y",t)}let v=[];t.sort((t,e)=>t.attribute.x-e.attribute.x);let _=0,y=t.length-1;for(;_<=y;)_===y?v.push(t[_]):(v.push(t[_]),v.push(t[y])),_++,y--;return v}(r,Object.assign(Object.assign({maxY:i.height},l),{labelling:t=>{let e=this.getRelatedGraphic(t.attribute),i=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(t.attribute.id)):this.getGraphicBounds(e,t);return this.labeling(t.AABBBounds,i,"bottom",this.attribute.offset)}}));for(let t=0;t<r.length;t++){let e=r[t],l=e.AABBBounds,h=(0,C.dK)(i,l,!0);if(M(i,s,l,n,o))s.setRange(h);else{if(n&&this._processClampForce(e,i,s,o))continue;a?e.setAttributes({visible:!1}):s.setRange(h)}}return r}_processClampForce(t,e,i,s=0){let{dy:r=0,dx:n=0}=I(t,e.width,e.height,e.padding);if(0===n&&0===r){if(M(e,i,t.AABBBounds,!1,s))return i.setRange((0,C.dK)(e,t.AABBBounds,!0)),!0}else if(M(e,i,{x1:t.AABBBounds.x1+n,x2:t.AABBBounds.x2+n,y1:t.AABBBounds.y1+r,y2:t.AABBBounds.y2+r}))return t.setAttributes({x:t.attribute.x+n,y:t.attribute.y+r}),i.setRange((0,C.dK)(e,t.AABBBounds,!0)),!0;return!1}_overlapByStrategy(t,e,i,s){var r;let{avoidBaseMark:n,strategy:a=[],hideOnHit:o=!0,clampForce:l=!0,avoidMarks:d=[],overlapPadding:u}=e,c=[],m=a.some(t=>"bound"===t.type);n&&(null===(r=this._baseMarks)||void 0===r||r.forEach(t=>{t.AABBBounds&&s.setRange((0,C.dK)(i,t.AABBBounds,!0))})),d.length>0&&d.forEach(t=>{(0,p.Z)(t)?(0,k.Dh)(this.getRootNode(),t).forEach(t=>{t.AABBBounds&&s.setRange((0,C.dK)(i,t.AABBBounds,!0))}):t.AABBBounds&&s.setRange((0,C.dK)(i,t.AABBBounds,!0))});for(let e=0;e<t.length;e++){if(!1===t[e].attribute.visible)continue;let r=t[e],n=this.getRelatedGraphic(r.attribute);if(r.update(),!(0,g.SX)(n.AABBBounds,{x1:0,x2:i.width,y1:0,y2:i.height},!0))continue;if(M(i,s,r.AABBBounds,l,u)&&(!m||m&&n&&n.AABBBounds&&this._canPlaceInside(r.AABBBounds,n.AABBBounds))){s.setRange((0,C.dK)(i,r.AABBBounds,!0)),c.push(r);continue}let d=!1;for(let o=0;o<a.length;o++)if(!1!==(d=function(t,e,i,s,r,n,a){var o,l;let d=null===(o=s.overlap)||void 0===o?void 0:o.clampForce,u=null===(l=s.overlap)||void 0===l?void 0:l.overlapPadding;if("bound"===i.type||"position"===i.type){if((0,h.Z)(a)){let o=(((0,h.Z)(i.position)?i.position(r.attribute):i.position)||("rect"===s.type?O:B)).map(t=>a(r.AABBBounds,n,t,s.offset));return E(t,e,r,o,d,u,!1===i.restorePosition)}return!1}if("moveY"===i.type){let s=(i.offset?(0,h.Z)(i.offset)?i.offset(r.attribute):i.offset:[]).map(t=>({x:r.attribute.x,y:r.attribute.y+t}));return E(t,e,r,s,d,u)}if("moveX"===i.type){let s=(i.offset?(0,h.Z)(i.offset)?i.offset(r.attribute):i.offset:[]).map(t=>({x:r.attribute.x+t,y:r.attribute.y}));return E(t,e,r,s,d,u)}return!1}(i,s,a[o],this.attribute,r,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(t[e].attribute.id)):this.getGraphicBounds(n,t[e].attribute),this.labeling))){r.setAttributes({x:d.x,y:d.y}),c.push(r);break}if(!d&&l&&this._processClampForce(r,i,s,u)){c.push(r);continue}d||o||c.push(r)}return c}getBaseMarkGroup(){let{baseMarkGroupName:t}=this.attribute;if(t)return this.getRootNode().find(e=>e.name===t,!0)}getGraphicBounds(t,e={},i){if(t){if(!1!==t.attribute.visible)return t.AABBBounds;let{x:e,y:i}=t.attribute;return{x1:e,x2:e,y1:i,y2:i}}if(e&&i&&"inside-middle"===i){let{x:t,y:i,x1:s=t,y1:r=i}=e;return{x1:(t+s)/2,x2:(t+s)/2,y1:(i+r)/2,y2:(i+r)/2}}let{x:s,y:r}=e;return{x1:s,x2:s,y1:r,y2:r}}_renderLabels(t){var e;let{syncState:i}=this.attribute,s=new Map,r=this._graphicToText||new Map,n=[],a=[],{visible:o}=null!==(e=this.attribute.line)&&void 0!==e?e:{};t&&t.forEach((t,e)=>{var l;let h;let d=this.getRelatedGraphic(t.attribute),u=this._isCollectionBase?t.attribute.id:d,c=(null==r?void 0:r.get(u))?"update":"enter";if(o&&(h=this._createLabelLine(t,d)),i&&this.updateStatesOfLabels([h?{text:t,labelLine:h}:{text:t}],null!==(l=d.currentStates)&&void 0!==l?l:[]),"enter"===c)n.push(t),s.set(u,h?{text:t,labelLine:h}:{text:t}),this._addLabel({text:t,labelLine:h},n,a,e);else if("update"===c){let e=r.get(u);r.delete(u),s.set(u,e),this._updateLabel(e,{text:t,labelLine:h})}}),this._removeLabel(r),this._graphicToText=s}_addLabel(t,e,i,s){let{text:r,labelLine:n}=t,a=this.getRelatedGraphic(r.attribute);if(this._syncStateWithRelatedGraphic(a),!1!==this._enableAnimation&&!1!==this._animationConfig.enter){if(a){let{from:t,to:o}=Z(r.attribute,"fadeIn");r&&this.add(r),n&&(i.push(n),this.add(n)),this._animationConfig.enter.duration>0&&a.once("animate-bind",l=>{r.setAttributes(t),n&&n.setAttributes(t);let h=this._afterRelatedGraphicAttributeUpdate(r,e,n,i,s,a,o,this._animationConfig.enter);a.on("afterAttributeUpdate",h)})}}else r&&this.add(r),n&&this.add(n)}_updateLabel(t,e){let{text:i,labelLine:s}=t,{text:r,labelLine:n}=e;if(!1!==this._enableAnimation&&!1!==this._animationConfig.update){let{duration:e,easing:a}=this._animationConfig.update;(function(t,e,i){if(!(0,c.Z)(i)){let{duration:s,easing:r,increaseEffect:n=!0}=i;return t.animate().to(e.attribute,s,r),void(n&&"text"===t.type&&"text"===e.type&&j(t,e,s,r))}i.forEach(i=>{let{duration:s,easing:r,increaseEffect:n=!0,channel:a}=i,{to:l}=F(t,e,a,i.options);(0,o.Z)(l)||t.animate().to(l,s,r),n&&"text"===t.type&&"text"===e.type&&j(t,e,s,r)})})(i,r,this._animationConfig.update),s&&n&&t.labelLine.animate().to(n.attribute,e,a)}else t.text.setAttributes(r.attribute),s&&n&&t.labelLine.setAttributes(n.attribute)}_removeLabel(t){let e=t=>{this.removeChild(t.text),t.labelLine&&this.removeChild(t.labelLine)};if(!1!==this._enableAnimation&&!1!==this._animationConfig.exit){let{duration:i,easing:s}=this._animationConfig.exit;t.forEach(t=>{var r;null===(r=t.text)||void 0===r||r.animate().to(Z(t.text.attribute,"fadeOut").to,i,s).onEnd(()=>{e(t)})})}else t.forEach(t=>{e(t)})}updateStatesOfLabels(t,e){t.forEach(t=>{t&&(t.text&&t.text.useStates(e),t.labelLine&&t.labelLine.useStates(e))})}_syncStateWithRelatedGraphic(t){this.attribute.syncState&&t&&t.on("afterAttributeUpdate",this._handleRelatedGraphicSetState)}_afterRelatedGraphicAttributeUpdate(t,e,i,r,n,a,o,{mode:l,duration:h,easing:d,delay:u}){let c=p=>{var g,m,f;let{detail:v}=p;if(!v)return{};let _=null===(g=v.animationState)||void 0===g?void 0:g.step;if(!(v.type===s.Gk.ANIMATE_UPDATE&&_&&!("wait"===_.type&&null==(null===(m=_.prev)||void 0===m?void 0:m.type))))return{};if(v.type===s.Gk.ANIMATE_END)return t.setAttributes(o),void(i&&i.setAttributes(o));let y=()=>{a&&(a.onAnimateBind=void 0,a.removeEventListener("afterAttributeUpdate",c))};switch(l){case"after":v.animationState.end&&(t.animate({onStart:y}).wait(u).to(o,h,d),i&&i.animate().wait(u).to(o,h,d));break;case"after-all":n===e.length-1&&v.animationState.end&&(e.forEach(t=>{t.animate({onStart:y}).wait(u).to(o,h,d)}),r.forEach(t=>{t.animate().wait(u).to(o,h,d)}));break;default:if(this._isCollectionBase){let e=this._idToPoint.get(t.attribute.id);!e||t.animates&&t.animates.has("label-animate")||!a.containsPoint(e.x,e.y,s.LZ.LOCAL,null===(f=this.stage)||void 0===f?void 0:f.getPickerService())||(t.animate({onStart:y}).wait(u).to(o,h,d),i&&i.animate().wait(u).to(o,h,d))}else v.animationState.isFirstFrameOfStep&&(t.animate({onStart:y}).wait(u).to(o,h,d),i&&i.animate().wait(u).to(o,h,d))}};return c}_smartInvert(t){var e,i,s,r,n,a,o;let l=(0,u.Z)(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:h,contrastRatiosThreshold:d,alternativeColors:c,mode:p,interactInvertType:g}=l,m=null!==(e=l.fillStrategy)&&void 0!==e?e:"invertBase",f=null!==(i=l.strokeStrategy)&&void 0!==i?i:"base",v=null!==(s=l.brightColor)&&void 0!==s?s:"#ffffff",_=null!==(r=l.darkColor)&&void 0!==r?r:"#000000",x=null!==(n=l.outsideEnable)&&void 0!==n&&n;if("null"!==m||"null"!==f)for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;let s=this.getRelatedGraphic(i.attribute),r=s.attribute.fill,n=i.attribute.fill;if((0,u.Z)(r)&&r.gradient){let t=null===(o=null===(a=r.stops)||void 0===a?void 0:a[0])||void 0===o?void 0:o.color;t&&(r=t,n=t)}let l=y(n,r,h,d,c,p),S=b(l,v)?v:_,k=this._canPlaceInside(i.AABBBounds,s.AABBBounds),w=!k&&i.AABBBounds&&s.AABBBounds&&s.AABBBounds.intersects(i.AABBBounds);if(k||x||w&&"inside"===g){let t=A(m,r,l,S);if(t&&i.setAttributes({fill:t}),0===i.attribute.lineWidth||0===i.attribute.strokeOpacity)continue;let e=A(f,r,l,S);e&&i.setAttributes({stroke:e})}else if(w&&"none"!==g){if(0===i.attribute.lineWidth||0===i.attribute.strokeOpacity)continue;if(i.attribute.stroke){i.setAttributes({fill:y(i.attribute.fill,i.attribute.stroke,h,d,c,p)});continue}let t=A(m,r,l,S);t&&i.setAttributes({fill:t});let e=A(f,r,l,S);e&&i.setAttributes({stroke:e})}}}_canPlaceInside(t,e){return!(!t||!e)&&e.encloses(t)}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}K.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-2,-1,-2,-1]},offset:0,pickable:!1}},3309:function(t,e,i){i.d(e,{X:()=>n,a:()=>r});let s={},r=(t,e)=>{s[t]=e},n=t=>s[t]},3529:function(t,e,i){i.d(e,{OM:()=>a,dK:()=>l,nR:()=>o});var s=i(3604);let r=new Uint32Array(33),n=new Uint32Array(33);n[0]=0,r[0]=~n[0];for(let t=1;t<=32;++t)n[t]=n[t-1]<<1|1,r[t]=~n[t];function a(t,e,i={top:0,left:0,right:0,bottom:0}){let{top:s=0,left:o=0,right:l=0,bottom:h=0}=i,d=Math.max(1,Math.sqrt(t*e/1e6)),u=~~((t+o+l+d)/d),c=~~((e+s+h+d)/d),p=t=>~~(t/d);return p.bitmap=()=>(function(t,e){let i=new Uint32Array(~~((t*e+32)/32));return{array:i,get:(e,s)=>{let r=s*t+e;return i[r>>>5]&1<<(31&r)},set:(e,s)=>{var r,n;let a=s*t+e;r=a>>>5,n=1<<(31&a),i[r]|=n},clear:(e,s)=>{var r,n;let a=s*t+e;r=a>>>5,n=~(1<<(31&a)),i[r]&=n},getRange:({x1:s,y1:a,x2:o,y2:l})=>{if(o<0||l<0||s>t||a>e)return!0;let h,d,u,c,p=l;for(;p>=a;--p)if(h=p*t+s,d=p*t+o,(u=h>>>5)==(c=d>>>5)){if(i[u]&r[31&h]&n[1+(31&d)])return!0}else{if(i[u]&r[31&h]||i[c]&n[1+(31&d)])return!0;for(let t=u+1;t<c;++t)if(i[t])return!0}return!1},setRange:({x1:s,y1:a,x2:o,y2:l})=>{var h,d,u,c;let p,g,m,f,v;if(!(o<0)&&!(l<0)&&!(s>t)&&!(a>e))for(;a<=l;++a)if(p=a*t+s,g=a*t+o,(m=p>>>5)==(f=g>>>5))h=r[31&p]&n[1+(31&g)],i[m]|=h;else for(d=r[31&p],i[m]|=d,u=n[1+(31&g)],i[f]|=u,v=m+1;v<f;++v)c=v,i[c]|=0xffffffff},clearRange:({x1:e,y1:s,x2:a,y2:o})=>{var l,h,d,u;let c,p,g,m,f;for(;s<=o;++s)if(c=s*t+e,p=s*t+a,(g=c>>>5)==(m=p>>>5))l=n[31&c]|r[1+(31&p)],i[g]&=l;else for(h=n[31&c],i[g]&=h,d=r[1+(31&p)],i[m]&=d,f=g+1;f<m;++f)u=f,i[u]&=0},outOfBounds:({x1:i,y1:s,x2:r,y2:n})=>i<0||s<0||n>=e||r>=t,toImageData:s=>{let r=s.createImageData(t,e),n=r.data;for(let s=0;s<e;++s)for(let e=0;e<t;++e){let r=s*t+e,a=4*r,o=i[r>>>5]&1<<(31&r);n[a+0]=255*o,n[a+1]=255*o,n[a+2]=255*o,n[a+3]=31}return r}}})(u,c),p.x=t=>~~((t+o)/d),p.y=t=>~~((t+s)/d),p.ratio=d,p.padding=i,p.width=t,p.height=e,p}function o(t,e){let{x1:i,x2:r,y1:n,y2:a}=e,o=(0,s.Z)(i,0,t.width),l=(0,s.Z)(r,0,t.width),h=(0,s.Z)(n,0,t.height),d=(0,s.Z)(a,0,t.height);return{x1:t.x(o),x2:t.x(l),y1:t.y(h),y2:t.y(d)}}function l(t,e,i=!1){return i?o(t,e):{x1:t.x(e.x1),x2:t.x(e.x2),y1:t.y(e.y1),y2:t.y(e.y2)}}},3901:function(t,e,i){i.d(e,{CB:()=>d,KN:()=>u,KZ:()=>a,XI:()=>c,aD:()=>o,hw:()=>h,qA:()=>g,qP:()=>l,sk:()=>n,vE:()=>r});var s=i(8654);function r(t){return 3===t||4===t}function n(t){return 1===t||2===t}function a(t,e,i,s,r,n){if(0===t&&0===e||n<=0)return[];if(0===t){let t=-i/e,a=n**2-(t-r)**2;return a<0?[]:0===a?[{x:s,y:t}]:[{x:Math.sqrt(a)+s,y:t},{x:-Math.sqrt(a)+s,y:t}]}if(0===e){let e=-i/t,a=n**2-(e-s)**2;return a<0?[]:0===a?[{x:e,y:r}]:[{x:e,y:Math.sqrt(a)+r},{x:e,y:-Math.sqrt(a)+r}]}let a=(e/t)**2+1,o=2*(e/t*(i/t+s)-r),l=o**2-4*a*((i/t+s)**2+r**2-n**2);if(l<0)return[];let h=(-o+Math.sqrt(l))/(2*a),d=(-o-Math.sqrt(l))/(2*a),u=-(e*h+i)/t;return 0===l?[{x:u,y:h}]:[{x:u,y:h},{x:-(e*d+i)/t,y:d}]}function o(t,e){return e>2*t?NaN:2*Math.asin(e/2/t)}function l(t,e){let{x1:i,y1:s,x2:r,y2:n}=t,{x1:a,y1:o,x2:l,y2:h}=e;return!(i<=a&&r<=a||i>=l&&r>=l||s<=o&&n<=o||s>=h&&n>=h)}let h=(t,e,i="top",s=0)=>{if(!t)return;let{x1:r,y1:n,x2:a,y2:o}=t,l=Math.abs(a-r),h=Math.abs(o-n),d=(e.x1+e.x2)/2,u=(e.y1+e.y2)/2,c=0,p=0,g=0,m=0;e&&(g=Math.abs(e.x1-e.x2)/2,m=Math.abs(e.y1-e.y2)/2);let f={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(i){case"top":p=-1;break;case"bottom":p=1;break;case"left":c=-1;break;case"right":c=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":c=Math.sin(f[i]*(Math.PI/180)),p=Math.cos(f[i]*(Math.PI/180));break;case"center":c=0,p=0}return{x:d+c*(s+g)+l/2*Math.sign(c),y:u+p*(s+m)+h/2*Math.sign(p)}},d=t=>{if(!t||!t.attribute)return[];let{points:e,segments:i}=t.attribute;if(i&&i.length){let t=[];return i.forEach(e=>{e.points.forEach(e=>{t.push(e)})}),t}return e};function u(t,e,i="end",s=0){if(!t||!e)return{x:1/0,y:1/0};let{x1:r,x2:n}=t,a=Math.abs(n-r),o=e.x1,l=o;return"end"===i?l=o+a/2+s:"start"===i&&(l=o-a/2-s),{x:l,y:e.y1}}function c(t,e){if(!t||!e||(0,s.SX)(t,e,!0))return;let i=Math.min(t.x1,t.x2),r=Math.min(t.y1,t.y2),n=Math.min(e.x1,e.x2),a=Math.min(e.y1,e.y2),o=Math.abs(t.x2-i)/2,l=Math.abs(t.y2-r)/2,h=Math.abs(e.x2-n)/2,d=Math.abs(e.y2-a)/2,u=i+o,c=r+l,g=n+h,m=a+d,f=g-u,v=m-c;return[p(f,v,u,c,o,l),p(-f,-v,g,m,h,d)]}function p(t,e,i,s,r,n){return Math.abs(e/t)<n/r?{x:i+(t>0?r:-r),y:s+e*r/Math.abs(t)}:{x:i+t*n/Math.abs(e),y:s+(e>0?n:-n)}}function g(t){return"left"===t?0:"right"===t?1:.5}},3038:function(t,e,i){i.d(e,{U:()=>h});var s=i(3215),r=i(7623),n=i(7578),a=i(3e3),o=i(7078),l=i(9414);class h extends a.k{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);let{interactive:t=!0,title:e,padding:i=0}=this.attribute;this._parsedPadding=(0,s.o)(i);let r=n.i.group({x:this._parsedPadding[3],y:this._parsedPadding[0],pickable:t,childrenPickable:t});r.name=l.GN.innerView,this.add(r),this._innerView=r,(null==e?void 0:e.visible)&&this._renderTitle(e),this._renderContent(),this._adjustLayout(),t&&this._bindEvents();let a=this._innerView.AABBBounds;this.attribute.width=a.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=a.height()+this._parsedPadding[0]+this._parsedPadding[2]}_renderTitle(t){let{text:e="",textStyle:i,padding:n=0,background:a,minWidth:h,maxWidth:d,shape:u}=t,c={x:0,y:0,text:e,textStyle:i,padding:(0,s.o)(n),minWidth:h,maxWidth:d};u&&u.visible&&(c.shape=Object.assign({visible:!0},u.style),(0,r.Z)(u.space)&&(c.space=u.space)),a&&a.visible&&(c.panel=Object.assign({visible:!0},a.style));let p=new o.V(c);p.name=l.GN.title,this._title=p,this._innerView.add(p)}_adjustLayout(){var t;if(this._title){let e=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),s=null===(t=this.attribute.title)||void 0===t?void 0:t.align;"center"===s?this._title.setAttribute("x",(e-i)/2):"end"===s&&this._title.setAttribute("x",e-i)}}}},9414:function(t,e,i){var s,r,n,a,o,l;i.d(e,{$5:()=>m,DN:()=>u,GN:()=>n,Nu:()=>p,SX:()=>h,Th:()=>f,dk:()=>r,g:()=>d,qL:()=>c,so:()=>g,uu:()=>s});let h=10,d=8,u=8,c=8,p=16,g=8,m=12,f=12;(a=s||(s={})).selected="selected",a.unSelected="unSelected",a.selectedHover="selectedHover",a.unSelectedHover="unSelectedHover",a.focus="focus",(o=r||(r={})).legendItemHover="legendItemHover",o.legendItemUnHover="legendItemUnHover",o.legendItemClick="legendItemClick",o.legendItemAttributeUpdate="legendItemAttributeUpdate",(l=n||(n={})).innerView="innerView",l.title="legendTitle",l.item="legendItem",l.itemShape="legendItemShape",l.itemLabel="legendItemLabel",l.itemValue="legendItemValue",l.focus="legendItemFocus"},4725:function(t,e,i){i.d(e,{Fw:()=>u,Vo:()=>c,cV:()=>d});var s=i(9367),r=i(1369),n=i(5049),a=i(6462),o=i(9895),l=i(6520);function h(){(0,s.M)(),(0,n.b)()}function d(){h(),(0,a.s)(),(0,l.M)()}function u(){h(),(0,o.d)()}function c(){h(),(0,o.d)(),(0,r.N)()}},6462:function(t,e,i){i.d(e,{s:()=>a});var s=i(9367),r=i(489),n=i(5757);function a(){(0,s.M)(),(0,r.k)(),(0,n.g)()}},6520:function(t,e,i){i.d(e,{M:()=>n});var s=i(9367),r=i(7307);function n(){(0,s.M)(),(0,r.k)()}},5767:function(t,e,i){i.d(e,{B:()=>g});var s=i(8612),r=i(2937),n=i(6689),a=i(325),o=i(3604),l=i(3531),h=i(3215),d=i(3e3),u=i(6520),c=i(9167);let p={debounce:r.Z,throttle:n.Z};(0,u.M)();class g extends d.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,a.Z)({},g.defaultAttributes,t)),this.name="scrollbar",this._onRailPointerDown=t=>{let e;let{viewX:i,viewY:s}=t,{direction:r,width:n,height:a,range:l}=this.attribute,h=this._sliderSize,[d,u]=this._getScrollRange();if("vertical"===r){let t=s-this._viewPosition.y,i=(0,o.Z)(t-h/2,d,u);e=t/a,this._slider.setAttribute("y",i,!0)}else{let t=i-this._viewPosition.x,s=(0,o.Z)(t-h/2,d,u);e=t/n,this._slider.setAttribute("x",s,!0)}this.setScrollRange([e-(l[1]-l[0])/2,e+(l[1]-l[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=t=>{let{stopSliderDownPropagation:e=!0}=this.attribute;e&&t.stopPropagation();let{direction:i}=this.attribute,{x:r,y:n}=this.stage.eventPointTransform(t);this._prePos="horizontal"===i?r:n,this._dispatchEvent(c.m3,{pos:this._prePos,event:t}),"browser"===s.rF.env?(s.rF.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),s.rF.addEventListener("pointerup",this._onSliderPointerUp)):(this.stage.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.addEventListener("pointerup",this._onSliderPointerUp),this.stage.addEventListener("pointerupoutside",this._onSliderPointerUp))},this._computeScrollValue=t=>{let{direction:e}=this.attribute,{x:i,y:s}=this.stage.eventPointTransform(t),r,n,a=0,{width:o,height:l}=this.getSliderRenderBounds();return r="vertical"===e?((n=s)-this._prePos)/l:((n=i)-this._prePos)/o,[n,r]},this._onSliderPointerMove=t=>{let{stopSliderMovePropagation:e=!0}=this.attribute;e&&t.stopPropagation();let i=this.getScrollRange(),[s,r]=this._computeScrollValue(t);this.setScrollRange([i[0]+r,i[1]+r],!0),this._prePos=s},this._onSliderPointerMoveWithDelay=0===this.attribute.delayTime?this._onSliderPointerMove:p[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=t=>{t.preventDefault();let{range:e,limitRange:i=[0,1]}=this.attribute,r=this.getScrollRange(),[n,a]=this._computeScrollValue(t),o=[r[0]+a,r[1]+a];this._dispatchEvent(c.gB,{pre:e,value:(0,l.Z)(o,i[0],i[1])}),"browser"===s.rF.env?(s.rF.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),s.rF.removeEventListener("pointerup",this._onSliderPointerUp)):(this.stage.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),this.stage.removeEventListener("pointerup",this._onSliderPointerUp),this.stage.removeEventListener("pointerupoutside",this._onSliderPointerUp))}}setScrollRange(t,e=!0){let{direction:i="horizontal",limitRange:s=[0,1],range:r,realTime:n=!0}=this.attribute,a=(0,l.Z)(t,s[0],s[1]);if(e){let t=this._getSliderPos(a);if(this._slider){let e=t[1]-t[0];this._sliderSize=e,"horizontal"===i?this._slider.setAttributes({x:t[0],width:e},!0):this._slider.setAttributes({y:t[0],height:e},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=a,n&&this._dispatchEvent(c.eV,{pre:r,value:a})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;let{delayType:t="throttle",delayTime:e=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",p[t](this._onRailPointerDown,e)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown)}render(){let t;this._reset();let{direction:e="horizontal",width:i,height:s,range:r,limitRange:n=[0,1],railStyle:a,sliderStyle:o,padding:d=2}=this.attribute,u=this.createOrUpdateChild("scrollbar-container",{},"group"),c=u.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:i,height:s},a),"rect");this._rail=c;let p=this.getSliderRenderBounds(),g=this._getSliderPos((0,l.Z)(r,n[0],n[1])),m=g[1]-g[0];this._sliderSize=m,t="horizontal"===e?{x:g[0],y:p.y1,width:m,height:p.height}:{x:p.x1,y:g[0],width:p.width,height:m};let f=u.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},t),{cornerRadius:this._getDefaultSliderCornerRadius()}),o),{boundsPadding:(0,h.o)(d),pickMode:"imprecise"}),"rect");this._slider=f,this._container=u;let v=this._container.AABBBounds;this._viewPosition={x:v.x1,y:v.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;let{width:t,height:e,padding:i=2}=this.attribute,[s,r,n,a]=(0,h.o)(i),o={x1:a,y1:s,x2:t-r,y2:e-n,width:Math.max(0,t-(a+r)),height:Math.max(0,e-(s+n))};return this._sliderRenderBounds=o,o}_getDefaultSliderCornerRadius(){let{direction:t,round:e}=this.attribute;if(e){let{width:e,height:i}=this.getSliderRenderBounds();return"horizontal"===t?i:e}return 0}_getSliderPos(t){let{direction:e}=this.attribute,{width:i,height:s,x1:r,y1:n}=this.getSliderRenderBounds();return"horizontal"===e?[i*t[0]+r,i*t[1]+r]:[s*t[0]+n,s*t[1]+n]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;let{limitRange:t=[0,1],direction:e}=this.attribute,[i,s]=(0,l.Z)(t,0,1),{width:r,height:n,x1:a,y1:o}=this.getSliderRenderBounds(),h=this._sliderSize;return"horizontal"===e?(0,l.Z)([a+i*r,a+s*r],a,r-h):(0,l.Z)([o+i*n,o+s*n],o,n-h)}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}}g.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0}},1679:function(t,e,i){i.d(e,{O:()=>h,j:()=>l});var s=i(9367),r=i(9536),n=i(4914),a=i(489),o=i(7881);function l(){(0,s.M)(),(0,r.N)(),(0,n.M)(),(0,a.k)()}function h(){(0,s.M)(),(0,r.N)(),(0,o.x)(),(0,a.k)()}},114:function(t,e,i){i.d(e,{X:()=>c});var s=i(325),r=i(8378),n=i(4546),a=i(7636),o=i(1121),l=i(7578),h=i(3e3),d=i(1679),u=i(1805);(0,d.j)();class c extends h.k{getStartAngle(){return(0,u.LW)(this._startAngle)}getEndAngle(){return(0,u.LW)(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,s.Z)({},c.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();let{startSymbol:t,endSymbol:e,lineStyle:i,state:s,visible:h=!0,multiSegment:d,mainSegmentIndex:u}=this.attribute;if(!h)return;this._computeLineAngle();let c=this._getMainSegmentPoints(),p=this._renderSymbol(t,c,"start"),g=this._renderSymbol(e,c,"end");if(this.startSymbol=p,this.endSymbol=g,d){let t=[...this.attribute.points];if((0,r.Z)(u))t[u]=this._clipPoints(t[u]);else{let e=this._clipPoints((0,n.VF)(t));t[0][0]=e[0],t[t.length-1][t[t.length-1].length-1]=e[e.length-1]}t.forEach((t,e)=>{var r,n;let h=l.i.line(Object.assign(Object.assign({points:t},(0,a.Z)(i)?null!==(r=i[e])&&void 0!==r?r:i[i.length-1]:i),{fill:!1}));h.name=`${this.name}-line`,h.id=this._getNodeId("line"+e),(0,o.Z)(null==s?void 0:s.line)||(h.states=(0,a.Z)(s.line)?null!==(n=s.line[e])&&void 0!==n?n:s.line[s.line.length-1]:s.line),this.add(h),this.lines.push(h)})}else{let t=l.i.line;(0,n.IX)(i)[0].cornerRadius&&(t=l.i.polygon);let e=t(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},(0,n.IX)(i)[0]),{fill:!1,closePath:!1}));e.name=`${this.name}-line`,e.id=this._getNodeId("line"),(0,o.Z)(null==s?void 0:s.line)||(e.states=[].concat(s.line)[0]),this.add(e),this.lines.push(e)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,i){let s;if(!e.length)return;let{autoRotate:n=!0}=t;if(t&&t.visible){let a,h;let d=this.getStartAngle(),u=this.getEndAngle(),{state:c}=this.attribute,p=e[0],g=e[e.length-1],{refX:m=0,refY:f=0,refAngle:v=0,style:_,symbolType:y,size:b=12}=t;"start"===i?(a={x:p.x+((0,r.Z)(d)?m*Math.cos(d)+f*Math.cos(d-Math.PI/2):0),y:p.y+((0,r.Z)(d)?m*Math.sin(d)+f*Math.sin(d-Math.PI/2):0)},h=this._computeStartRotate(this._startAngle)):(a={x:g.x+((0,r.Z)(u)?m*Math.cos(u)+f*Math.cos(u-Math.PI/2):0),y:g.y+((0,r.Z)(u)?m*Math.sin(u)+f*Math.sin(u-Math.PI/2):0)},h=this._computeEndRotate(this._endAngle)),(s=l.i.symbol(Object.assign(Object.assign(Object.assign({},a),{symbolType:y,size:b,angle:n?h+v:0,strokeBoundsBuffer:0}),_))).name=`${this.name}-${i}-symbol`,s.id=this._getNodeId(`${i}-symbol`),(0,o.Z)(null==c?void 0:c.symbol)||(s.states=c.symbol),"start"===i?(0,o.Z)(null==c?void 0:c.startSymbol)||(s.states=c.startSymbol):(0,o.Z)(null==c?void 0:c.endSymbol)||(s.states=c.endSymbol),this.add(s)}return s}_getMainSegmentPoints(){let t;if(this._mainSegmentPoints)return this._mainSegmentPoints;let{points:e,multiSegment:i,mainSegmentIndex:s}=this.attribute;return t=i?(0,r.Z)(s)?e[s]:(0,n.VF)(e):e,this._mainSegmentPoints=t,t}_clipPoints(t){let{startSymbol:e={},endSymbol:i={}}=this.attribute,s=t;if(e.visible){let i=e.clip?e.size||10:0;s=[{x:t[0].x-i/2*(Math.cos(this._startAngle)||0),y:t[0].y-i/2*(Math.sin(this._startAngle)||0)},...s.slice(1)]}if(i.visible){let e=i.clip?i.size||10:0,r={x:t[t.length-1].x-e/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-e/2*(Math.sin(this._endAngle)||0)};s=[...s.slice(0,s.length-1),r]}return s}_computeLineAngle(){let t=this._getMainSegmentPoints();if(t.length<=1)return;let e=t[0],i=t[1],s=t[t.length-2],r=t[t.length-1],n=[e.x-i.x,e.y-i.y],a=Math.atan2(n[1],n[0]),o=[r.x-s.x,r.y-s.y],l=Math.atan2(o[1],o[0]);this._startAngle=a,this._endAngle=l}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}c.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}}},9895:function(t,e,i){i.d(e,{d:()=>o});var s=i(9367),r=i(5757),n=i(7307),a=i(489);function o(){(0,s.M)(),(0,r.g)(),(0,n.k)(),(0,a.k)()}},5049:function(t,e,i){i.d(e,{b:()=>l});var s=i(9367),r=i(7307),n=i(489),a=i(4683),o=i(5757);function l(){(0,s.M)(),(0,r.k)(),(0,n.k)(),(0,a.v)(),(0,o.g)()}},7078:function(t,e,i){i.d(e,{V:()=>f});var s=i(8908),r=i(325),n=i(3215),a=i(1036),o=i(1601),l=i(1121),h=i(7623),d=i(4154),u=i(6082),c=i(3e3),p=i(8144),g=i(5049),m=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i};(0,g.b)();class f extends c.k{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},f.defaultAttributes,t)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var t,e,i;let r;this.cacheStates();let{text:c="",textStyle:g={},shape:f={},panel:v={},space:_=4,minWidth:y,maxWidth:b,padding:x=4,visible:S,state:A,type:k,textAlwaysCenter:w,containerTextAlign:T}=this.attribute,C=(0,n.o)(x),M=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group"),E,B=-C[3],O=-C[0],I=C[1]+C[3],R=C[0]+C[2],P=0,L=0,{visible:D}=f,Z=m(f,["visible"]);if((0,a.Z)(D)){let t=(null==Z?void 0:Z.size)||10,e=(0,o.Z)(t)?t:Math.max(t[0],t[1]);E=M.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:t,strokeBoundsBuffer:0},Z),{visible:D,x:e/2,y:e/2}),"symbol"),(0,l.Z)(null==A?void 0:A.shape)||(E.states=A.shape),D&&(L=e+_)}if(I+=L,P+=L,(0,p.TV)({text:c})||"rich"===k){let t=Object.assign(Object.assign(Object.assign({},(0,p.ut)(Object.assign({type:k,text:c},g))),g),{visible:(0,h.Z)(c)&&!1!==S,x:P,y:0});I+=(r=M.createOrUpdateChild("tag-text",t,"richtext")).AABBBounds.width(),R+=r.AABBBounds.height(),B+=r.AABBBounds.x1,O+=r.AABBBounds.y1}else{let s=Object.assign(Object.assign({text:(0,d.Z)(c)&&"type"in c&&"text"===c.type?c.text:c,visible:(0,h.Z)(c)&&!1!==S,lineHeight:null==g?void 0:g.fontSize},g),{x:P,y:0});(0,u.Z)(s.lineHeight)&&(s.lineHeight=g.fontSize),r=M.createOrUpdateChild("tag-text",s,"text"),(0,l.Z)(null==A?void 0:A.text)||(r.states=A.text);let n=(0,p.fe)(s.text,g,null===(e=null===(t=this.stage)||void 0===t?void 0:t.getTheme())||void 0===e?void 0:e.text),a=n.width,m=n.height;I+=a;let v=null!==(i=f.size)&&void 0!==i?i:10,_=(0,o.Z)(v)?v:Math.max(v[0],v[1]);R+=Math.max(m,f.visible?_:0);let{textAlign:x,textBaseline:k}=g;((0,h.Z)(y)||(0,h.Z)(b))&&((0,h.Z)(y)&&I<y&&(I=y),(0,h.Z)(b)&&I>b&&(I=b,r.setAttribute("maxLineWidth",b-C[1]-C[2]))),B=0,O=0;let D=0;if("left"===x||"start"===x?D=1:"right"===x||"end"===x?D=-1:"center"===x&&(D=0),D?D<0?(B-=I,E&&E.setAttribute("x",(E.attribute.x||0)-a),M.setAttribute("x",-C[1]-L)):D>0&&M.setAttribute("x",C[3]):(B-=I/2,E&&E.setAttribute("x",(E.attribute.x||0)-a/2),M.setAttribute("x",-L/2)),(T?"center"===T:w)&&D){let t=I-C[1]-C[3],e=a+L,i=1===D?(t-e)/2+L+a/2:C[0]+L-(I/2+e/2-L)+a/2;if(r.setAttributes({x:i,textAlign:"center"}),E){let t=i-a/2-L+_/2;E.setAttributes({x:t})}}if(("left"===T||"start"===T)&&1!==D){let t=I-C[1]-C[3],e=0===D?-t/2+L/2:-I+C[3]+C[1]+L,i=e+L;r.setAttributes({x:i,textAlign:"left"}),E&&E.setAttributes({x:e+_/2})}if(("right"===T||"end"===T)&&-1!==D){let t=I-C[1]-C[3],e=0===D?t/2+L/2:t;if(r.setAttributes({x:e,textAlign:"right"}),E){let t=e-a-L+_/2;E.setAttributes({x:t})}}"middle"===k?(O-=R/2,E&&E.setAttribute("y",0)):"bottom"===k?(O-=R,E&&E.setAttribute("y",-m/2),M.setAttribute("y",-C[2])):"top"===k&&(M.setAttribute("y",C[0]),E&&E.setAttribute("y",m/2))}let{visible:F}=v,j=m(v,["visible"]);if(S&&(0,a.Z)(F)){let t=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},j),{visible:F&&!!c,width:I,height:R,x:B,y:O}),"rect");if((0,l.Z)(null==A?void 0:A.panel)||(t.states=A.panel),j.customShape){let e=j.customShape;t.pathProxy=t=>e(this,t,new s.r)}this._bgRect=t}this._textShape=r,this._symbol=E,this.resetStates()}initAttributes(t,e){t=(null==e?void 0:e.skipDefault)?t:(0,r.Z)({},f.defaultAttributes,t),super.initAttributes(t),this.render()}addState(t,e,i){super.addState(t,e,i),this._textShape&&this._textShape.addState(t,e,i),this._bgRect&&this._bgRect.addState(t,e,i),this._symbol&&this._symbol.addState(t,e,i)}removeState(t,e){super.removeState(t,e),this._textShape&&this._textShape.removeState(t,e),this._bgRect&&this._bgRect.removeState(t,e),this._symbol&&this._symbol.removeState(t,e)}cacheStates(){var t,e,i,s,r,n,a,o,l,h,d,u,c,p;this._tagStates=null!==(e=null===(t=this.currentStates)||void 0===t?void 0:t.slice())&&void 0!==e?e:[],this._rectStates=null!==(r=null===(s=null===(i=this._bgRect)||void 0===i?void 0:i.currentStates)||void 0===s?void 0:s.slice())&&void 0!==r?r:[],this._symbolStates=null!==(o=null===(a=null===(n=this._symbol)||void 0===n?void 0:n.currentStates)||void 0===a?void 0:a.slice())&&void 0!==o?o:[],this._textStates=null!==(d=null===(h=null===(l=this._textShape)||void 0===l?void 0:l.currentStates)||void 0===h?void 0:h.slice())&&void 0!==d?d:[],this.clearStates(),null===(u=this._bgRect)||void 0===u||u.clearStates(),null===(c=this._symbol)||void 0===c||c.clearStates(),null===(p=this._textShape)||void 0===p||p.clearStates()}resetStates(){var t,e,i;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&(null===(t=this._bgRect)||void 0===t||t.useStates(this._rectStates)),this._symbolStates.length&&(null===(e=this._symbol)||void 0===e||e.useStates(this._symbolStates)),this._textStates.length&&(null===(i=this._textShape)||void 0===i||i.useStates(this._textStates))}}f.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}}},3745:function(t,e,i){function s(t,e){if(!e)return[];let i=t.find(t=>t.name===e,!0);return i?i.getChildren():[]}function r(t,e){if(!e)return[];let i=t.find(t=>t.name===e,!0);return i?i.findAll(t=>"group"!==t.type,!0):[]}function n(t){let e=[t[0]];for(let i=1;i<t.length;i++)t[i].x===t[i-1].x&&t[i].y===t[i-1].y||e.push(t[i]);return e}function a(t){return t>=0&&t<Math.PI/2||t>3*Math.PI/2&&t<=2*Math.PI}function o(t,e,i){return Math.abs(t-e)<i}function l(t,e,i){return t?{textAlign:"right",textBaseline:"middle"}:{textAlign:e<Math.PI&&i.toLocaleLowerCase().includes("top")||e>Math.PI&&i.toLocaleLowerCase().includes("bottom")?"left":e<Math.PI&&i.toLocaleLowerCase().includes("bottom")||e>Math.PI&&i.toLocaleLowerCase().includes("top")?"right":"center",textBaseline:e<Math.PI&&i.includes("inside")||e>Math.PI&&!i.includes("inside")?"bottom":"top"}}i.d(e,{Bh:()=>n,Ck:()=>function t(e,i){e.forEachChildren(e=>{let s=i(e);e.isContainer&&!s&&t(e,i)})},Dh:()=>r,U4:()=>o,WF:()=>a,ic:()=>l,tP:()=>s})},3151:function(t,e,i){i.d(e,{Q6:()=>l,fM:()=>a,lO:()=>o});var s=i(9167),r=i(3745),n=i(1121);let a=(t,e,i)=>{let a=t.target;return a!==i&&a.name&&!(0,n.Z)(a.states)?(a.addState(s.HW.hover,!0),(0,r.Ck)(e,t=>{t!==a&&t.name&&!(0,n.Z)(t.states)&&t.addState(s.HW.hoverReverse,!0)}),a):i},o=(t,e,i)=>i?((0,r.Ck)(e,t=>{t.name&&!(0,n.Z)(t.states)&&(t.removeState(s.HW.hoverReverse),t.removeState(s.HW.hover))}),null):i,l=(t,e,i)=>{let a=t.target;return i===a&&a.hasState(s.HW.selected)?((0,r.Ck)(e,t=>{t.name&&!(0,n.Z)(t.states)&&(t.removeState(s.HW.selectedReverse),t.removeState(s.HW.selected))}),null):a.name&&!(0,n.Z)(a.states)?(a.addState(s.HW.selected,!0),(0,r.Ck)(e,t=>{t!==a&&t.name&&!(0,n.Z)(t.states)&&t.addState(s.HW.selectedReverse,!0)}),a):i}},7449:function(t,e,i){i.d(e,{Dg:()=>a,Fv:()=>n,bA:()=>r});var s=i(8103);function r(t,e){return[t[0]*e,t[1]*e]}function n(t){let e=function(t){let[e,i]=t;return Math.sqrt(e*e+i*i)}(t);return e>0&&(e=1/e),[t[0]*e,t[1]*e]}function a(t,e,i){let r=function(t,e){let[i,s]=t,[r,n]=e,a=Math.sqrt((i*i+s*s)*(r*r+n*n));return Math.acos(Math.min(Math.max(a&&(i*r+s*n)/a,-1),1))}(t,e),n=(0,s.ir)(t,e)>=0;return i?n?2*Math.PI-r:r:n?r:2*Math.PI-r}},8144:function(t,e,i){i.d(e,{TV:()=>u,fe:()=>d,gM:()=>h,ut:()=>p,vS:()=>g});var s=i(1207),r=i(7578),n=i(8485),a=i(4154),o=i(7623),l=i(9167);let h=(t,e,i,r)=>new n.e(Object.assign({defaultFontParams:Object.assign({fontFamily:l.iR,fontSize:l.$M},r),getTextBounds:i?void 0:s.o,specialCharSet:"-/: .,@%'\"~"+n.e.ALPHABET_CHAR_SET+n.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t);function d(t,e,i={}){if(!t)return{width:0,height:0};let r=(0,s.o)({text:t,fontFamily:e.fontFamily||i.fontFamily||l.iR,fontSize:e.fontSize||i.fontSize||12,fontWeight:e.fontWeight||i.fontWeight,textAlign:e.textAlign||"center",textBaseline:e.textBaseline,ellipsis:!!e.ellipsis,maxLineWidth:e.maxLineWidth||1/0,lineHeight:e.fontSize||i.fontSize||12});return{width:r.width(),height:r.height()}}function u(t,e="type"){return"rich"===c(t,e)}function c(t,e="type"){var i,s;return(0,a.Z)(t.text)&&"type"in t.text?null!==(i=t.text.type)&&void 0!==i?i:"text":e in t&&null!==(s=t[e])&&void 0!==s?s:"text"}function p(t){var e,i;return(0,o.Z)(t.maxLineWidth)&&(t.maxWidth=t.maxLineWidth,delete t.maxLineWidth),t.width=null!==(e=t.width)&&void 0!==e?e:0,t.height=null!==(i=t.height)&&void 0!==i?i:0,t.textConfig=t.text.text||t.text,t}function g(t,e="type"){let i=c(t,e);return"rich"===i?r.i.richtext(p(t)):("html"===i?t=function(t){let{text:e,_originText:i}=t,{text:s}=e;return t.html=s,t.text=i,t.renderable=!1,t}(t):"react"===i&&(t=function(t){let{text:e,_originText:i}=t,{text:s}=e;return t.react=s,t.text=i,t.renderable=!1,t}(t)),r.i.text(t))}},6910:function(t,e,i){i.d(e,{et:()=>r});var s=i(7393);Symbol.for("BoundsAllocate");let r=new class{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new s.FB)}allocate(t,e,i,r){if(!this.pools.length)return(new s.FB).setValue(t,e,i,r);let n=this.pools.pop();return n.x1=t,n.y1=e,n.x2=i,n.y2=r,n}allocateByObj(t){if(!this.pools.length)return new s.FB(t);let e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},1164:function(t,e,i){i.d(e,{A:()=>n});var s=i(534),r=i(9355);let n=new class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){let e=(0,r.JN)(Object.assign({nativeCanvas:s.w.global.createCanvas(t)},t));return this.allocatedCanvas.push(e),e}let e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){let e={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},i=(0,r.JN)(Object.assign({nativeCanvas:s.w.global.createCanvas(e)},e));return this.allocatedCanvas.push(i),i}let e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},8113:function(t,e,i){i.d(e,{QE:()=>o,yp:()=>l});var s=i(9935),r=i(7317);function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Symbol.for("MatrixAllocate"),Symbol.for("Mat4Allocate");class a{constructor(){this.pools=[]}static identity(t){return(0,r.TL)(t)}allocate(){if(!this.pools.length)return n();let t=this.pools.pop();return a.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():n();for(let i=0;i<e.length;i++)e[i]=t[i];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}let o=new class{constructor(){this.pools=[]}allocate(t,e,i,r,n,a){if(!this.pools.length)return new s.y(t,e,i,r,n,a);let o=this.pools.pop();return o.a=t,o.b=e,o.c=i,o.d=r,o.e=n,o.f=a,o}allocateByObj(t){if(!this.pools.length)return new s.y(t.a,t.b,t.c,t.d,t.e,t.f);let e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}},l=new a},3118:function(t,e,i){i.d(e,{rd:()=>h,rs:()=>u});var s=i(3872),r=i(2959),n=i(8103),a=i(4659),o=i(3419),l=i(86);class h{constructor(t,e,i,s,r){this.from=t,this.to=e,this.duration=i,this.easing=s,this.params=r,this.updateCount=0}bind(t,e){this.target=t,this.subAnimate=e,this.onBind()}onBind(){}onFirstRun(){}onStart(){}onEnd(){}getEndProps(){return this.to}getFromProps(){return this.from}getMergedEndProps(){var t;let e=this.getEndProps();return e?this._endProps===e?this._mergedEndProps:(this._endProps=e,void(this._mergedEndProps=Object.assign({},null!==(t=this.step.prev.getLastProps())&&void 0!==t?t:{},e))):this.step.prev?this.step.prev.getLastProps():e}update(t,e,i){if(0===this.updateCount){this.onFirstRun();let t=this.step.getLastProps();Object.keys(t).forEach(e=>{this.subAnimate.animate.validAttr(e)&&(i[e]=t[e])})}this.updateCount+=1,this.onUpdate(t,e,i),t&&this.onEnd()}}class d extends h{constructor(t){super(null,null,0,"linear"),this.cb=t}onUpdate(t,e,i){}onStart(){this.cb()}}class u{constructor(t=l.R.GenAutoIncrementId(),e=o.P,i){this.id=t,this.timeline=e||o.P,this.status=s.td.INITIAL,this.tailAnimate=new c(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this),this.slience=i}setTimeline(t){t!==this.timeline&&(this.timeline.removeAnimate(this,!1),t.addAnimate(this))}getStartTime(){return this._startTime}getDuration(){return this.subAnimates.reduce((t,e)=>t+e.totalDuration,0)}after(t){let e=t.getDuration();return this._startTime=e,this}afterAll(t){let e=-1/0;return t.forEach(t=>{e=(0,n.Fp)(t.getDuration(),e)}),this._startTime=e,this}parallel(t){return this._startTime=t.getStartTime(),this}static AddInterpolate(t,e){u.interpolateMap.set(t,e)}play(t){if(this.tailAnimate.play(t),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return 1===this.subAnimates.length&&this.tailAnimate.totalDuration===t.duration&&this.trySetAttribute(t.getFromProps(),t.mode),this}trySetAttribute(t,e=u.mode){t&&e&s.uq.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(t,!1,{type:s.Gk.ANIMATE_PLAY})}runCb(t){let e=new d(()=>{t(this,e.step.prev)});return this.tailAnimate.play(e),this}customInterpolate(t,e,i,s,r,n){let a=u.interpolateMap.get(t)||u.interpolateMap.get("");return!!a&&a(t,e,i,s,r,n)}pause(){this.status===s.td.RUNNING&&(this.status=s.td.PAUSED)}resume(){this.status===s.td.PAUSED&&(this.status=s.td.RUNNING)}to(t,e,i,s){if(this.tailAnimate.to(t,e,i,s),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}from(t,e,i,s){if(this.tailAnimate.from(t,e,i,s),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}wait(t){if(this.tailAnimate.wait(t),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}startAt(t){if(this.tailAnimate.startAt(t),this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}loop(t){if(this.tailAnimate.loop=t,this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}reversed(t){if(this.tailAnimate.reversed=t,this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}bounce(t){if(this.tailAnimate.bounce=t,this.target){let t=this.target.stage;t&&t.renderNextFrame()}return this}subAnimate(){let t=new c(this,this.tailAnimate);return this.tailAnimate=t,this.subAnimates.push(t),t.bind(this.target),this}getStartProps(){return this.subAnimates[0].getStartProps()}getEndProps(){return this.tailAnimate.getEndProps()}depreventAttr(t){this._preventAttrs&&this._preventAttrs.delete(t)}preventAttr(t){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(t)}preventAttrs(t){t.forEach(t=>this.preventAttr(t))}validAttr(t){return!this._preventAttrs||!this._preventAttrs.has(t)}bind(t){return this.target=t,this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.subAnimates.forEach(e=>{e.bind(t)}),this}advance(t){if(this._duringTime<this._startTime){if(this._duringTime+t*this.timeScale<this._startTime)return void(this._duringTime+=t*this.timeScale);t=this._duringTime+t*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===s.td.INITIAL&&(this.status=s.td.RUNNING,this._onStart&&this._onStart.forEach(t=>t())),this.setPosition(Math.max(this.rawPosition,0)+t*this.timeScale)&&this.status===s.td.RUNNING&&(this.status=s.td.END,this._onEnd&&this._onEnd.forEach(t=>t()))}setPosition(t){let e,i=0,s=this.rawPosition,r=this.subAnimates.reduce((t,e)=>t+e.totalDuration,0);t<0&&(t=0);let n=t>=r;if(n&&(t=r),t===s)return n;for(let s=0;s<this.subAnimates.length&&!(i+(e=this.subAnimates[s]).totalDuration>=t);s++)i+=e.totalDuration,e=void 0;return this.rawPosition=t,e.setPosition(t-i),n}onStart(t){this._onStart||(this._onStart=[]),this._onStart.push(t)}onEnd(t){this._onEnd||(this._onEnd=[]),this._onEnd.push(t)}onRemove(t){this._onRemove||(this._onRemove=[]),this._onRemove.push(t)}onFrame(t){this._onFrame||(this._onFrame=[]),this._onFrame.push(t)}release(){this.status=s.td.END}stop(t){t||this.target.onStop(),"start"===t?this.target.onStop(this.getStartProps()):"end"===t?this.target.onStop(this.getEndProps()):this.target.onStop(t),this.release()}}u.mode=s.uq.NORMAL,u.interpolateMap=new Map;class c{get totalDuration(){return this.calcAttr(),this._totalDuration+this._startAt}constructor(t,e){this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=t,this.stepHead=new p(0,0,e?Object.assign({},e.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}calcAttr(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}bind(t){return this.target=t,this}play(t){let e=t.duration;(null==e||e<0)&&(e=0);let i=t.easing,n="string"==typeof i?r.o[i]:i,a=this._addStep(e,null,n);return a.type=s.Tq.customAnimate,this._appendProps(t.getEndProps(),a,!1),this._appendCustomAnimate(t,a),this}to(t,e,i,n){(null==e||e<0)&&(e=0);let a="string"==typeof i?r.o[i]:i,o=this._addStep(e,null,a);return o.type=s.Tq.to,this._appendProps(t,o,!!n&&n.tempProps),o.propKeys||(o.propKeys=Object.keys(o.props)),n&&n.noPreventAttrs||this.target.animates&&this.target.animates.forEach(t=>{t.id!==this.animate.id&&t.preventAttrs(o.propKeys)}),this}from(t,e,i,r){this.to(t,0,i,r);let n={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach(t=>{n[t]=this.getLastPropByName(t,this.stepTail)}),this.to(n,e,i,r),this.stepTail.type=s.Tq.from}startAt(t){return t<0&&(t=0),this._startAt=t,this}getStartProps(){var t;return null===(t=this.stepHead)||void 0===t?void 0:t.props}getEndProps(){return this.stepTail.props}getLastStep(){return this._lastStep}wait(t){if(t>0){let e=this._addStep(+t,null);e.type=s.Tq.wait,e.prev.customAnimate?e.props=e.prev.customAnimate.getEndProps():e.props=e.prev.props,this.target.onAddStep&&this.target.onAddStep(e)}return this}_addStep(t,e,i){let s=new p(this.duration,t,e,i);return this.duration+=t,this.stepTail.append(s),this.stepTail=s,s}_appendProps(t,e,i){e.props=i?t:Object.assign({},t);let s=e.prev,r=e.props;for(e.propKeys||(e.propKeys=Object.keys(e.props)),e.propKeys.forEach(t=>{void 0===e.props[t]&&(e.props[t]=this.target.getDefaultAttribute(t))});s.prev;)s.props&&(s.propKeys||(s.propKeys=Object.keys(s.props)),s.propKeys.forEach(t=>{void 0===r[t]&&(r[t]=s.props[t])})),e.propKeys=Object.keys(e.props),s=s.prev;let n=this.stepHead.props;e.propKeys||(e.propKeys=Object.keys(r)),e.propKeys.forEach(t=>{if(void 0===n[t]){let e=this.animate.getStartProps();n[t]=e[t]=this.target.getComputedAttribute(t)}}),this.target.onAddStep&&this.target.onAddStep(e)}_appendCustomAnimate(t,e){e.customAnimate=t,t.step=e,t.bind(this.target,this)}setPosition(t){var e;let i=this.duration,s=this.loop,r=this.rawPosition,n,a,o=!1,l=null!==(e=this._startAt)&&void 0!==e?e:0;if(t<0&&(t=0),t<l)return this.rawPosition=t,!1;if(t-=l,i<=0&&(o=!0,i<0)||(n=Math.floor(t/i),a=t-n*i,(o=t>=s*i+i)&&(t=(a=i)*(n=s)+i),t===r))return o;let h=!this.reversed!=!(this.bounce&&n%2);return h&&(a=i-a),this._deltaPosition=a-this.position,this.position=a,this.rawPosition=t+l,this.updatePosition(o,h),o}updatePosition(t,e){if(!this.stepHead)return;let i=this.stepHead.next,s=this.position,r=this.duration;if(this.target&&i){let n=i.next;for(;n&&n.position<=s;)n=(i=n).next;let a=t?0===r?1:s/r:(s-i.position)/i.duration;i.easing&&(a=i.easing(a)),this.tryCallCustomAnimateLifeCycle(i,this._lastStep||(e?this.stepTail:this.stepHead),e),this.updateTarget(i,a,t),this._lastStep=i,this.animate._onFrame&&this.animate._onFrame.forEach(t=>t(i,a))}}tryCallCustomAnimateLifeCycle(t,e,i){if(t!==e){if(i){let i=e.prev;for(;i&&i!==t;)i.customAnimate&&(i.customAnimate.onStart&&i.customAnimate.onStart(),i.customAnimate.onEnd&&i.customAnimate.onEnd()),i=t.prev;e&&e.customAnimate&&e.customAnimate.onEnd&&e.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}else{let i=e.next;for(;i&&i!==t;)i.customAnimate&&(i.customAnimate.onStart&&i.customAnimate.onStart(),i.customAnimate.onEnd&&i.customAnimate.onEnd()),i=i.next;e&&e.customAnimate&&e.customAnimate.onEnd&&e.customAnimate.onEnd(),t&&t.customAnimate&&t.customAnimate.onStart&&t.customAnimate.onStart()}}}getLastPropByName(t,e){let i=e.prev;for(;i;){if(i.props&&void 0!==i.props[t])return i.props[t];if(i.customAnimate){let e=i.customAnimate.getEndProps()[t];if(void 0!==e)return e}i=i.prev}return a.Y.getInstance().warn("未知错误，step中找不到属性"),e.props[t]}updateTarget(t,e,i){null==t.props&&null==t.customAnimate||this.target.onStep(this,this.animate,t,e,i)}}class p{constructor(t,e,i,s){this.duration=e,this.position=t,this.props=i,this.easing=s}append(t){t.prev=this,t.next=this.next,this.next=t}getLastProps(){let t=this.prev;for(;t;){if(t.props)return t.props;if(t.customAnimate)return t.customAnimate.getMergedEndProps();t=t.prev}return null}}},3337:function(t,e,i){i.d(e,{Bm:()=>p,fN:()=>g,xc:()=>m});var s,r,n=i(1601),a=i(8103),o=(i(7636),i(2683)),l=i(8378),h=i(3604),d=(i(534),i(3872),i(8908),i(3118)),u=i(2959),c=i(3386);i(7574);class p extends d.rd{constructor(t,e,i,s,r){super(t,e,i,s,r)}getEndProps(){return!1===this.valid?{}:{text:this.to}}onBind(){var t,e,i,s,r,o,l,h;this.fromNumber=(0,n.Z)(null===(t=this.from)||void 0===t?void 0:t.text)?null===(e=this.from)||void 0===e?void 0:e.text:Number.parseFloat(null===(i=this.from)||void 0===i?void 0:i.text),this.toNumber=(0,n.Z)(null===(s=this.to)||void 0===s?void 0:s.text)?null===(r=this.to)||void 0===r?void 0:r.text:Number.parseFloat(null===(o=this.to)||void 0===o?void 0:o.text),Number.isFinite(this.toNumber)||(this.fromNumber=0),Number.isFinite(this.toNumber)||(this.valid=!1),!1!==this.valid&&(this.decimalLength=null!==(h=null===(l=this.params)||void 0===l?void 0:l.fixed)&&void 0!==h?h:Math.max((0,a.i4)(this.fromNumber),(0,a.i4)(this.toNumber)))}onEnd(){}onUpdate(t,e,i){var s;!1!==this.valid&&(i.text=t?null===(s=this.to)||void 0===s?void 0:s.text:(this.fromNumber+(this.toNumber-this.fromNumber)*e).toFixed(this.decimalLength))}}(s=r||(r={}))[s.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",s[s.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",s[s.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",s[s.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP",s[s.STROKE=4]="STROKE",d.rd,d.rd,d.rd,d.rd,d.rd;class g extends d.rd{constructor(t,e,i,s,r){var n,a;super(t,e,i,s,r),this.newPointAnimateType=null!==(n=null==r?void 0:r.newPointAnimateType)&&void 0!==n?n:"grow",this.clipRangeByDimension=null!==(a=null==r?void 0:r.clipRangeByDimension)&&void 0!==a?a:"x"}getPoints(t,e=!1){if(t.points)return t.points;if(t.segments){let i=[];return this.segmentsCache||(this.segmentsCache=[]),t.segments.map(t=>{var s,r;t.points&&i.push(...t.points),e&&this.segmentsCache.push(null!==(r=null===(s=t.points)||void 0===s?void 0:s.length)&&void 0!==r?r:0)}),i}return[]}onBind(){let t=this.getPoints(this.from),e=this.getPoints(this.to,!0);this.fromPoints=t?Array.isArray(t)?t:[t]:[],this.toPoints=e?Array.isArray(e)?e:[e]:[];let i=new Map;this.fromPoints.forEach(t=>{t.context&&i.set(t.context,t)});let s,r,n=1/0,a=-1/0;for(let t=0;t<this.toPoints.length;t+=1)if(i.has(this.toPoints[t].context)){n=t,s=i.get(this.toPoints[t].context);break}for(let t=this.toPoints.length-1;t>=0;t-=1)if(i.has(this.toPoints[t].context)){a=t,r=i.get(this.toPoints[t].context);break}"clip"===this.newPointAnimateType&&0!==this.toPoints.length&&(Number.isFinite(a)?(this.clipRange=this.toPoints[a][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],1===this.clipRange&&(this.shrinkClipRange=this.toPoints[a][this.clipRangeByDimension]/this.fromPoints[this.fromPoints.length-1][this.clipRangeByDimension]),(0,l.Z)(this.clipRange)?this.clipRange=(0,h.Z)(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let d=this.toPoints[0];this.interpolatePoints=this.toPoints.map((t,e)=>{let o=i.get(t.context);return o?(d=o,[o,t]):"appear"===this.newPointAnimateType||"clip"===this.newPointAnimateType?[t,t]:e<n&&s?[s,t]:e>a&&r?[r,t]:[d,t]}),this.points=this.interpolatePoints.map(t=>{let e=t[0],i=t[1],s=new o.E9(e.x,e.y,e.x1,e.y1);return s.defined=i.defined,s.context=i.context,s})}onFirstRun(){let t=this.target.attribute.clipRange;(0,l.Z)(t*this.clipRange)&&(this.clipRange*=t)}onUpdate(t,e,i){if(this.points=this.points.map((t,i)=>{let s=(0,c.q9)(this.interpolatePoints[i][0],this.interpolatePoints[i][1],e);return s.context=t.context,s}),this.clipRange){if(this.shrinkClipRange)return void(t?(i.points=this.toPoints,i.clipRange=1):(i.points=this.fromPoints,i.clipRange=this.clipRange-(this.clipRange-this.shrinkClipRange)*e));i.clipRange=this.clipRange+(1-this.clipRange)*e}if(this.segmentsCache&&this.to.segments){let t=0;i.segments=this.to.segments.map((e,i)=>{let s=t+this.segmentsCache[i],r=this.points.slice(t,s);return t=s,Object.assign(Object.assign({},e),{points:r})})}else i.points=this.points}}d.rd,d.rd,d.rd;class m extends d.rd{constructor(t,e){super(null,null,t,"linear"),this.customAnimates=e}initAnimates(){this.customAnimates.forEach(t=>{t.step=this.step,t.subAnimate=this.subAnimate,t.target=this.target})}getEndProps(){let t={};return this.customAnimates.forEach(e=>{Object.assign(t,e.getEndProps())}),t}onBind(){this.initAnimates(),this.customAnimates.forEach(t=>{t.onBind()})}onEnd(){this.customAnimates.forEach(t=>{t.onEnd()})}onStart(){this.customAnimates.forEach(t=>{t.onStart()})}onUpdate(t,e,i){this.updating||(this.updating=!0,this.customAnimates.forEach(s=>{let r=s.easing;e=("string"==typeof r?u.o[r]:r)(e),s.onUpdate(t,e,i)}),this.updating=!1)}}d.rd},2959:function(t,e,i){i.d(e,{o:()=>r});var s=i(8103);class r{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0===t?e:t<0?e*(-(e*t)+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return 0===t?0:Math.pow(2,10*t-10)}static expoOut(t){return 1===t?1:1-Math.pow(2,-10*t)}static expoInOut(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-r.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*r.bounceIn(2*t):.5*r.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(0===i||1===i)return i;let r=e/s.f7*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*s.f7/e)}}static getElasticOut(t,e){return function(i){if(0===i||1===i)return i;let r=e/s.f7*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-r)*s.f7/e)+1}}static getElasticInOut(t,e){return function(i){let r=e/s.f7*Math.asin(1/t);return(i*=2)<1?-(t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*s.f7/e)*.5):t*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*s.f7/e)*.5+1}}static registerFunc(t,e){r[t]=e}}r.quadIn=r.getPowIn(2),r.quadOut=r.getPowOut(2),r.quadInOut=r.getPowInOut(2),r.cubicIn=r.getPowIn(3),r.cubicOut=r.getPowOut(3),r.cubicInOut=r.getPowInOut(3),r.quartIn=r.getPowIn(4),r.quartOut=r.getPowOut(4),r.quartInOut=r.getPowInOut(4),r.quintIn=r.getPowIn(5),r.quintOut=r.getPowOut(5),r.quintInOut=r.getPowInOut(5),r.backIn=r.getBackIn(1.7),r.backOut=r.getBackOut(1.7),r.backInOut=r.getBackInOut(1.7),r.elasticIn=r.getElasticIn(1,.3),r.elasticOut=r.getElasticOut(1,.3),r.elasticInOut=r.getElasticInOut(1,.3*1.5),r.easeInOutQuad=t=>(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2),r.easeOutElastic=t=>{let e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},r.easeInOutElastic=t=>{let e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1};for(let t=0;t<10;t++)r[`flicker${t}`]=e=>(function(t,e){let i=1/e,s=1;for(;t>i;)t-=i,s*=-1;let r=s*t/i;return r>0?r:1+r})(e,t);for(let t=2;t<10;t++)r[`aIn${t}`]=e=>t*e*e+(1-t)*e},3419:function(t,e,i){i.d(e,{L:()=>n,P:()=>a});var s=i(3872),r=i(86);class n{constructor(){this.id=r.R.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}addAnimate(t){this.animateTail?(this.animateTail.nextAnimate=t,t.prevAnimate=this.animateTail,this.animateTail=t,t.nextAnimate=null):(this.animateHead=t,this.animateTail=t),this.animateCount++}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;let e=this.animateHead;for(this.animateCount=0;e;)e.status===s.td.END?this.removeAnimate(e):e.status===s.td.RUNNING||e.status===s.td.INITIAL?(this.animateCount++,e.advance(t)):e.status===s.td.PAUSED&&this.animateCount++,e=e.nextAnimate}clear(){let t=this.animateHead;for(;t;)t.release(),t=t.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}removeAnimate(t,e=!0){t._onRemove&&t._onRemove.forEach(t=>t()),t===this.animateHead?(this.animateHead=t.nextAnimate,t===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):t===this.animateTail?(this.animateTail=t.prevAnimate,this.animateTail.nextAnimate=null):(t.prevAnimate.nextAnimate=t.nextAnimate,t.nextAnimate.prevAnimate=t.prevAnimate),e&&t.release()}}let a=new n},534:function(t,e,i){i.d(e,{w:()=>s});let s=new class{}},3140:function(t,e,i){i.d(e,{Of:()=>u,MB:()=>d});class s{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){let{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:s=this.L_TIME,R_COUNT:r=this.R_COUNT}=e;if(t.size<i)return 0;let n=0,a=e=>{n++,t.delete(e)},o=Date.now();return t.forEach((t,e)=>{if(t.timestamp.length<r)return a(e);let i=0;for(;o-t.timestamp[t.timestamp.length-1-i]<s&&!(++i>=r););if(i<r)return a(e);for(;o-t.timestamp[0]>s;)t.timestamp.shift()}),n}addLimitedTimestamp(t,e,i){let{R_TIMESTAMP_MAX_SIZE:s=this.R_TIMESTAMP_MAX_SIZE}=i;t.timestamp.length>s&&t.timestamp.shift(),t.timestamp.push(e)}clearTimeStamp(t,e){let{L_TIME:i=this.L_TIME}=e,s=Date.now();t.forEach(t=>{for(;s-t.timestamp[0]>i;)t.timestamp.shift()})}clearItemTimestamp(t,e){let{L_TIME:i=this.L_TIME}=e,s=Date.now();for(;s-t.timestamp[0]>i;)t.timestamp.shift()}}var r=i(8103),n=i(534),a=i(1087);class o{static GetCanvas(){try{return o.canvas||(o.canvas=n.w.global.createCanvas({})),o.canvas}catch(t){return null}}static GetCtx(){if(!o.ctx){let t=o.GetCanvas();o.ctx=t.getContext("2d")}return o.ctx}}class l extends s{static getInstance(){return l._instance||(l._instance=new l),l._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;let i=o.GetCanvas(),s=o.GetCtx();if(i.width=e,i.height=1,!s)return;if(s.translate(0,0),!s)throw Error("获取ctx发生错误");let r=s.createLinearGradient(0,0,e,0);t.forEach(t=>{r.addColorStop(t[0],t[1])}),s.fillStyle=r,s.fillRect(0,0,e,1),this.rgbaSet=s.getImageData(0,0,e,1).data}getColor(t){let e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,i,s,r=[],n=100){let a=`${t}${e}${i}${s}`;r.forEach(t=>a+=t.join()),a+=n;let o=this.dataMap.get(a);return o||(o={data:new l(r,n),timestamp:[]},this.addLimitedTimestamp(o,Date.now(),{}),this.dataMap.set(a,o)),this.clearCache(this.dataMap,this.cacheParams),o.data}}class h{static GetSize(t){for(let e=0;e<h.ImageSize.length;e++)if(h.ImageSize[e]>=t)return h.ImageSize[e];return t}static Get(t,e,i,s,r,n,a){let o=h.GenKey(t,e,i,s,r),l=h.cache[o];if(!l||0===l.length)return null;for(let t=0;t<l.length;t++)if(l[t].width>=n&&l[t].height>=a)return l[t].pattern;return null}static Set(t,e,i,s,r,n,a,o){let l=h.GenKey(t,e,i,s,r);h.cache[l]?h.cache[l].push({width:a,height:o,pattern:n}):h.cache[l]=[{width:a,height:o,pattern:n}]}static GenKey(t,e,i,s,r){return`${e},${i},${s},${r},${t.join()}`}}function d(t,e,i,s){let{stops:n,startAngle:o,endAngle:l}=s;for(;i<0;)i+=r.f7;for(;i>r.f7;)i-=r.f7;if(i<o||i>l)return n[0].color;let h,d,u=(i-o)/(l-o);for(let t=0;t<n.length;t++)if(n[t].offset>=u){h=n[t-1],d=n[t];break}return u=(u-h.offset)/(d.offset-h.offset),(0,a.BM)(h.color,d.color,u,!1)}function u(t,e,i,s,r,n,a,d,u){let c=Math.floor(180*r/Math.PI),p=o.GetCanvas(),g=o.GetCtx();if(!g)return null;let m=h.GetSize(d),f=h.GetSize(u),v=h.Get(e,i,s,n,a,m,f);if(v)return v;let _=Math.sqrt(Math.max(Math.max(Math.pow(i,2)+Math.pow(s,2),Math.pow(m-i,2)+Math.pow(s,2)),Math.max(Math.pow(m-i,2)+Math.pow(f-s,2),Math.pow(i,2)+Math.pow(f-s,2)))),y=c+1,b=r/Math.max(1,y-1),x=l.getInstance().GetOrCreate(i,s,m,f,e,y),S=2*Math.PI*_/360;p.width=m,p.height=f,g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,m,f),g.translate(i,s),g.rotate(n);for(let t=0,e=y-1;t<e&&!(n+t*b>a);t++){let e=x.getColor(t);g.beginPath(),g.rotate(b),g.moveTo(0,0),g.lineTo(_,-2*S),g.lineTo(_,0),g.fillStyle=e,g.closePath(),g.fill()}let A=g.getImageData(0,0,m,f);return p.width=A.width,p.height=A.height,g.putImageData(A,0,0),(v=t.createPattern(p,"no-repeat"))&&h.Set(e,i,s,n,a,v,m,f),v}h.cache={},h.ImageSize=[20,40,80,160,320,640,1280,2560]},4193:function(t,e,i){i.d(e,{A:()=>r,r:()=>s});let s=Symbol.for("CanvasFactory"),r=Symbol.for("Context2dFactory")},9355:function(t,e,i){i.d(e,{JN:()=>a});var s=i(6480),r=i(534),n=i(4193);function a(t){return s.n.getNamed(n.r,r.w.global.env)(t)}},1087:function(t,e,i){i.d(e,{BM:()=>o});var s=i(9772),r=i(1601),n=i(7636);function a(t,e=!1){return Array.isArray(t)&&(0,r.Z)(t[0])?e?`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])},${t[3].toFixed(2)})`:`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])})`:t}function o(t,e,i,s,a){return Array.isArray(t)&&!(0,r.Z)(t[0])||Array.isArray(e)&&!(0,r.Z)(e[0])?[,,,,].fill(0).map((r,a)=>l((0,n.Z)(t)?t[a]:t,(0,n.Z)(e)?e[a]:e,i,s)):l(t,e,i,s,a)}function l(t,e,i,r,n){var l,h,d;if(!t||!e)return t&&a(t)||e&&a(e)||!1;let c,p,g=!1,m=!1;if(Array.isArray(t)?c=t:"string"==typeof t?c=s.VH.Get(t,s.Mr.Color255):g=!0,Array.isArray(e)?p=e:"string"==typeof e?p=s.VH.Get(e,s.Mr.Color255):m=!0,g!==m){let s=g?t:e,l=g?e:t,h=Object.assign(Object.assign({},s),{stops:s.stops.map(t=>Object.assign(Object.assign({},t),{color:a(l)}))});return g?o(s,h,i,r,n):o(h,s,i,r,n)}if(g){if(t.gradient===e.gradient){let s=t.stops,r=e.stops;if(s.length!==r.length)return!1;if("linear"===t.gradient)return function(t,e,i){let s=t.stops,r=e.stops;return{gradient:"linear",x0:t.x0+(e.x0-t.x0)*i,x1:t.x1+(e.x1-t.x1)*i,y0:t.y0+(e.y0-t.y0)*i,y1:t.y1+(e.y1-t.y1)*i,stops:Array(s.length).fill(0).map((t,e)=>({color:u(s[e].color,r[e].color,i),offset:s[e].offset+(r[e].offset-s[e].offset)*i}))}}(t,e,i);if("radial"===t.gradient)return function(t,e,i){let s=t.stops,r=e.stops;return{gradient:"radial",x0:t.x0+(e.x0-t.x0)*i,x1:t.x1+(e.x1-t.x1)*i,y0:t.y0+(e.y0-t.y0)*i,y1:t.y1+(e.y1-t.y1)*i,r0:t.r0+(e.r0-t.r0)*i,r1:t.r1+(e.r1-t.r1)*i,stops:Array(s.length).fill(0).map((t,e)=>({color:u(s[e].color,r[e].color,i),offset:s[e].offset+(r[e].offset-s[e].offset)*i}))}}(t,e,i);if("conical"===t.gradient)return function(t,e,i){let s=t.stops,r=e.stops;return{gradient:"conical",startAngle:t.startAngle+(e.startAngle-t.startAngle)*i,endAngle:t.endAngle+(e.endAngle-t.endAngle)*i,x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i,stops:Array(s.length).fill(0).map((t,e)=>({color:u(s[e].color,r[e].color,i),offset:s[e].offset+(r[e].offset-s[e].offset)*i}))}}(t,e,i)}return!1}return n&&n(c,p),a((l=c,h=p,d=i,[l[0]+(h[0]-l[0])*d,l[1]+(h[1]-l[1])*d,l[2]+(h[2]-l[2])*d,l[3]+(h[3]-l[3])*d]),r)}let h=[0,0,0,0],d=[0,0,0,0];function u(t,e,i){return s.VH.Get(t,s.Mr.Color255,h),s.VH.Get(e,s.Mr.Color255,d),`rgba(${Math.round(h[0]+(d[0]-h[0])*i)},${Math.round(h[1]+(d[1]-h[1])*i)},${Math.round(h[2]+(d[2]-h[2])*i)},${h[3]+(d[3]-h[3])*i})`}},9772:function(t,e,i){i.d(e,{Mr:()=>r,VH:()=>a});var s,r,n=i(9921);(s=r||(r={}))[s.Color255=0]="Color255",s[s.Color1=1]="Color1";class a{static Get(t,e=r.Color1,i=[0,0,0,1]){if(e===r.Color1){let e=a.store1[t];if(e)return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i;let s=n.Il.parseColorString(t);if(s){let e=[s.r/255,s.g/255,s.b/255,s.opacity];a.store1[t]=e,a.store255[t]=[s.r,s.g,s.b,s.opacity],i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]}return i}let s=a.store255[t];if(s)return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i;let o=n.Il.parseColorString(t);return o&&(a.store1[t]=[o.r/255,o.g/255,o.b/255,o.opacity],a.store255[t]=[o.r,o.g,o.b,o.opacity],i[0]=o.r,i[1]=o.g,i[2]=o.b,i[3]=o.opacity),i}static Set(t,e,i){if(e===r.Color1)a.store1[t]||(a.store1[t]=i,a.store255[t]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]);else{if(a.store255[t])return;a.store255[t]=i,a.store1[t]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}a.store255={},a.store1={}},2532:function(t,e,i){var s,r;i.d(e,{Z:()=>n});let n=(s={},function(t){Object.prototype.hasOwnProperty;let e="function"==typeof Symbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=Object.getPrototypeOf(Function),s=("object"==typeof process&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL,Map),r=new WeakMap;function n(t,e,i){let n=r.get(t);if(o(n)){if(!i)return;n=new s,r.set(t,n)}let a=n.get(e);if(o(a)){if(!i)return;a=new s,n.set(e,a)}return a}function a(t,e,i){let s=n(e,i,!1);return!o(s)&&!!s.has(t)}function o(t){return void 0===t}function l(t){return null===t}function h(t){return"object"==typeof t?null!==t:"function"==typeof t}function d(t){let i=function(t,i){switch(function(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}let s="string",r=function(t,e){let i=t[e];if(null!=i){if(!u(i))throw TypeError();return i}}(t,e);if(void 0!==r){let e=r.call(t,s);if(h(e))throw TypeError();return e}return function(t,e){if("string"===e){let e=t.toString;if(u(e)){let i=e.call(t);if(!h(i))return i}let i=t.valueOf;if(u(i)){let e=i.call(t);if(!h(e))return e}}else{let e=t.valueOf;if(u(e)){let i=e.call(t);if(!h(i))return i}let i=t.toString;if(u(i)){let e=i.call(t);if(!h(e))return e}}throw TypeError()}(t,s)}(t,0);return"symbol"==typeof i?i:""+i}function u(t){return"function"==typeof t}function c(t){let e=Object.getPrototypeOf(t);if("function"!=typeof t||t===i||e!==i)return e;let s=t.prototype,r=s&&Object.getPrototypeOf(s);if(null==r||r===Object.prototype)return e;let n=r.constructor;return"function"!=typeof n||n===t?e:n}t("defineMetadata",function(t,e,i,s){if(!h(i))throw TypeError();return function(t,e,i,s){n(i,s,!0).set(t,e)}(t,e,i,s)}),t("hasMetadata",function(t,e,i){if(!h(e))throw TypeError();return o(i)||(i=d(i)),function t(e,i,s){if(a(e,i,s))return!0;let r=c(i);return null!==r&&t(e,r,s)}(t,e,i)}),t("hasOwnMetadata",function(t,e,i){if(!h(e))throw TypeError();return o(i)||(i=d(i)),a(t,e,i)}),t("getMetadata",function(t,e,i){if(!h(e))throw TypeError();return o(i)||(i=d(i)),function t(e,i,s){if(a(e,i,s))return function(t,e,i){let s=n(e,i,!1);if(!o(s))return s.get(t)}(e,i,s);let r=c(i);return null===r?void 0:t(e,r,s)}(t,e,i)})}(function(t,e){"function"!=typeof s[t]&&Object.defineProperty(s,t,{configurable:!0,writable:!0,value:e}),r&&r(t,e)}),s)},4412:function(t,e,i){i.d(e,{Ci:()=>n,P:()=>o,Pv:()=>h,hN:()=>d});var s=i(2683);function r(t,e){let i=0,r=t.length;for(let n=0;n<r;n++){let a=t[n],o=e[n],l=t[(n+1)%r],h=e[(n+1)%r];i+=s.HL.distanceNN(a,o,l,h)}return i/2}function n(t,e,i,s,n){return r([t.x,e.x,i.x,s.x],[t.y,e.y,i.y,s.y])}function a(t,e,i,s,r){let n=1-r;return n*n*n*t+3*e*r*n*n+3*i*r*r*n+s*r*r*r}function o(t,e,i,r,n){let o=a(t.x,e.x,i.x,r.x,n),l=a(t.y,e.y,i.y,r.y,n);return new s.E9(o,l)}function l(t,e,i,s){let r=1-s;return r*r*t+2*r*s*e+s*s*i}function h(t,e,i,r){let n=l(t.x,e.x,i.x,r),a=l(t.y,e.y,i.y,r);return new s.E9(n,a)}function d(t,e,i,s){return r([t.x,e.x,i.x],[t.y,e.y,i.y])}},4286:function(t,e,i){i.d(e,{C:()=>n});var s=i(8103);let r=s.BZ-1e-8;class n{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,i,n,a,o){if(Math.abs(a-n)>r)return this.bounds.add(t-i,e-i),void this.bounds.add(t+i,e+i);let l,h,d,u,c=1/0,p=-1/0,g=1/0,m=-1/0;function f(t){d=i*Math.cos(t),u=i*Math.sin(t),d<c&&(c=d),d>p&&(p=d),u<g&&(g=u),u>m&&(m=u)}if(f(n),f(a),a!==n){if((n%=s.BZ)<0&&(n+=s.BZ),(a%=s.BZ)<0&&(a+=s.BZ),a<n&&(o=!o,l=n,n=a,a=l),o)for(a-=s.BZ,l=n-n%s.ou,h=0;h<4&&l>a;++h,l-=s.ou)f(l);else for(l=n-n%s.ou+s.ou,h=0;h<4&&l<a;++h,l+=s.ou)f(l)}this.bounds.add(t+c,e+g),this.bounds.add(t+p,e+m)}arcTo(t,e,i,s,r){this.bounds.add(t,e)}bezierCurveTo(t,e,i,s,r,n){this.bounds.add(t,e),this.bounds.add(i,s),this.bounds.add(r,n)}closePath(){}ellipse(){throw Error("不支持ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,i,s){this.bounds.add(t,e),this.bounds.add(i,s)}rect(t,e,i,s){this.bounds.add(t,e),this.bounds.add(t+i,e+s)}clear(){this.bounds.clear()}release(...t){}}},3116:function(t,e,i){i.d(e,{D:()=>o,L:()=>l});var s=i(7636),r=i(8103);let n=function(){let t={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i},e="";function i(t){let i=Error(e+": "+t);throw i.source=e,i}function s(){return r("linear",t.linearGradient,n)||r("radial",t.radialGradient,o)||r("conic",t.conicGradient,a)}function r(e,s,r){return function(e,s){let r=v(e);if(r){v(t.startCall)||i("Missing (");let e=s(r);return v(t.endCall)||i("Missing )"),e}}(s,function(s){let n=r();return n&&(v(t.comma)||i("Missing comma before color stops")),{type:e,orientation:n,colorStops:c(p)}})}function n(){return f("directional",t.sideOrCorner,1)||f("angular",t.angleValue,1)}function a(){return f("angular",t.fromAngleValue,1)}function o(){let i,s,r=l();return r&&((i=[]).push(r),s=e,v(t.comma)&&((r=l())?i.push(r):e=s)),i}function l(){let t=function(){let t=f("shape",/^(circle)/i,0);return t&&(t.style=m()||h()),t}()||function(){let t=f("shape",/^(ellipse)/i,0);return t&&(t.style=g()||h()),t}();if(t)t.at=d();else{let e=h();if(e){t=e;let i=d();i&&(t.at=i)}else{let e=u();e&&(t={type:"default-radial",at:e})}}return t}function h(){return f("extent-keyword",t.extentKeywords,1)}function d(){if(f("position",/^at/,0)){let t=u();return t||i("Missing positioning value"),t}}function u(){let t={x:g(),y:g()};if(t.x||t.y)return{type:"position",value:t}}function c(e){let s=e(),r=[];if(s)for(r.push(s);v(t.comma);)(s=e())?r.push(s):i("One extra comma");return r}function p(){let e=f("hex",t.hexColor,1)||f("rgba",t.rgbaColor,1)||f("rgb",t.rgbColor,1)||f("literal",t.literalColor,0);return e||i("Expected color definition"),e.length=g(),e}function g(){return f("%",t.percentageValue,1)||f("position-keyword",t.positionKeywords,1)||m()}function m(){return f("px",t.pixelValue,1)||f("em",t.emValue,1)}function f(t,e,i){let s=v(e);if(s)return{type:t,value:s[i]}}function v(t){let i=/^[\n\r\t\s]+/.exec(e);i&&_(i[0].length);let s=t.exec(e);return s&&_(s[0].length),s}function _(t){e=e.substr(t)}return function(t){return e=t.toString(),function(){let t=c(s);return e.length>0&&i("Invalid input not EOF"),t}()}}();class a{static IsGradient(t){return!("string"==typeof t&&!t.includes("gradient"))}static IsGradientStr(t){return"string"==typeof t&&t.includes("gradient")}static Parse(t){if(a.IsGradientStr(t))try{let e=n(t)[0];if(e){if("linear"===e.type)return a.ParseLinear(e);if("radial"===e.type)return a.ParseRadial(e);if("conic"===e.type)return a.ParseConic(e)}}catch(t){}return t}static ParseConic(t){let{orientation:e,colorStops:i=[]}=t,s=r.pi/2,n=parseFloat(e.value)/180*r.pi-s;return{gradient:"conical",x:.5,y:.5,startAngle:n,endAngle:n+r.f7,stops:i.map(t=>({color:t.value,offset:parseFloat(t.length.value)/100}))}}static ParseRadial(t){let{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:e.map(t=>({color:t.value,offset:parseFloat(t.length.value)/100}))}}static ParseLinear(t){let{orientation:e,colorStops:i=[]}=t,s=r.pi/2,n="angular"===e.type?parseFloat(e.value)/180*r.pi:0;for(;n<0;)n+=r.f7;for(;n>=r.f7;)n-=r.f7;let a=0,o=0,l=0,h=0;return n<s?(a=0,o=1,l=Math.sin(n),h=o-Math.cos(n)):n<r.pi?(a=0,o=0,l=Math.cos(n-s),h=Math.sin(n-s)):n<r.pi+s?(o=0,l=(a=1)-Math.sin(n-r.pi),h=Math.cos(n-r.pi)):(l=(a=1)-Math.cos(n-s-r.pi),h-=Math.sin(n-s-r.pi)),{gradient:"linear",x0:a,y0:o,x1:l,y1:h,stops:i.map(t=>({color:t.value,offset:parseFloat(t.length.value)/100}))}}}function o(t,e,i){let s=e,{a:r,b:n,c:a,d:o}=t.currentMatrix,l=Math.sign(r)*Math.sqrt(r*r+n*n),h=Math.sign(o)*Math.sqrt(a*a+o*o);return l+h===0?0:s=s/Math.abs(l+h)*2*i}function l(t,e,i,r=0,n=0){let o,h;if(!e||!0===e)return"black";if((0,s.Z)(e))for(let t=0;t<e.length&&!(h=e[t]);t++);else h=e;if("string"==typeof(h=a.Parse(h)))return h;if(i.AABBBounds&&(!i.attribute||0!==i.attribute.scaleX||0!==i.attribute.scaleY)){let e=i.AABBBounds,s=e.x2-e.x1,a=e.y2-e.y1,l=e.x1-r,d=e.y1-n;if(i.attribute){let{scaleX:t=1,scaleY:e=1}=i.attribute;s/=t,a/=e,l/=t,d/=e}"linear"===h.gradient?o=function(t,e,i,s,r,n){var a,o,l,h;let d=t.createLinearGradient(i+(null!==(a=e.x0)&&void 0!==a?a:0)*r,s+(null!==(o=e.y0)&&void 0!==o?o:0)*n,i+(null!==(l=e.x1)&&void 0!==l?l:1)*r,s+(null!==(h=e.y1)&&void 0!==h?h:0)*n);return e.stops.forEach(t=>{d.addColorStop(t.offset,t.color)}),d}(t,h,l,d,s,a):"conical"===h.gradient?o=function(t,e,i,s,r,n){var a,o;let l=t.createConicGradient(i+(null!==(a=e.x)&&void 0!==a?a:0)*r,s+(null!==(o=e.y)&&void 0!==o?o:0)*n,e.startAngle,e.endAngle);return e.stops.forEach(t=>{l.addColorStop(t.offset,t.color)}),l.GetPattern(r+i,n+s,void 0)}(t,h,l,d,s,a):"radial"===h.gradient&&(o=function(t,e,i,s,r,n){var a,o,l,h,d,u;let c=t.createRadialGradient(i+(null!==(a=e.x0)&&void 0!==a?a:.5)*r,s+(null!==(o=e.y0)&&void 0!==o?o:.5)*n,Math.max(r,n)*(null!==(l=e.r0)&&void 0!==l?l:0),i+(null!==(h=e.x1)&&void 0!==h?h:.5)*r,s+(null!==(d=e.y1)&&void 0!==d?d:.5)*n,Math.max(r,n)*(null!==(u=e.r1)&&void 0!==u?u:.5));return e.stops.forEach(t=>{c.addColorStop(t.offset,t.color)}),c}(t,h,l,d,s,a))}return o||"orange"}},8906:function(t,e,i){i.d(e,{EM:()=>a,Qc:()=>s,yb:()=>n});let s=Symbol("ContributionProvider");class r{constructor(t,e){this.serviceIdentifier=t,this.container=e}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}}function n(t,e){t(s).toDynamicValue(({container:t})=>new r(e,t)).inSingletonScope().whenTargetNamed(e)}function a(t,e){t(s).toDynamicValue(({container:t})=>new r(e,t)).whenTargetNamed(e)}},8908:function(t,e,i){let s,r,n,a,o;i.d(e,{r:()=>T});var l=i(4286),h=i(7393);class d{constructor(){this._curves=[],this.bounds=new h.FB}get curves(){return this._curves}getCurveLengths(){return this._curves.map(t=>t.getLength())}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}let u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},p={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};var g=i(8103),m=i(3872),f=i(1805);function v(t,e,i,s){let r=function(t,e,i,s,r,n,a,o,l){let h=(0,f.M4)(a),d=Math.sin(h),u=Math.cos(h),c=u*(o-t)*.5+d*(l-e)*.5,p=u*(l-e)*.5-d*(o-t)*.5,m=c*c/((i=Math.abs(i))*i)+p*p/((s=Math.abs(s))*s);m>1&&(i*=m=Math.sqrt(m),s*=m);let v=u/i,_=d/i,y=-d/s,b=u/s,x=v*o+_*l,S=y*o+b*l,A=v*t+_*e,k=y*t+b*e,w=1/((A-x)*(A-x)+(k-S)*(k-S))-.25;w<0&&(w=0);let T=Math.sqrt(w);n===r&&(T=-T);let C=.5*(x+A)-T*(k-S),M=.5*(S+k)+T*(A-x),E=Math.atan2(S-M,x-C),B=Math.atan2(k-M,A-C)-E;B<0&&1===n?B+=g.BZ:B>0&&0===n&&(B-=g.BZ);let O=Math.ceil(Math.abs(B/(g.ou+.001))),I=[];for(let t=0;t<O;++t){let e=E+t*B/O,r=E+(t+1)*B/O;I[t]=[C,M,e,r,i,s,d,u]}return I}(s[5],s[6],s[0],s[1],s[3],s[4],s[2],e,i);for(let e=0;e<r.length;++e){let i=function(t){let e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=t[6],l=t[7],h=l*n,d=-o*a,u=o*n,c=l*a,p=Math.cos(s),g=Math.sin(s),m=Math.cos(r),f=Math.sin(r),v=.5*(r-s),_=Math.sin(.5*v),y=8/3*_*_/Math.sin(v),b=e+p-y*g,x=i+g+y*p,S=e+m,A=i+f,k=S+y*f,w=A-y*m;return[h*b+d*x,u*b+c*x,h*k+d*w,u*k+c*w,h*S+d*A,u*S+c*A]}(r[e]);t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}}let _=(t,e,i,s,r,n,a)=>{let o=Math.abs(i-e),l=o>.5*Math.PI?Math.ceil(2*o/Math.PI):1,h=(i-e)/l;for(let i=0;i<l;i++){let o=e+h*i,l=e+h*(i+1),d=4*Math.tan(Math.abs(h)/4)/3,u=l<o?-1:1,c=Math.cos(o),p=Math.sin(o),g=Math.cos(l),m=Math.sin(l),f=c*n+s,v=p*a+r,_=g*n+s,y=m*a+r,b=n*d*u,x=a*d*u;t.push(f-b*p,v+x*c,_+b*m,y-x*g,_,y)}};var y=i(5399),b=i(2683),x=i(1123),S=i(7574),A=i(4884);class k{constructor(t){this.path=t,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(t,e){return this._lastX=this._startX=t,this._lastY=this._startY=e,this}lineTo(t,e){let i=this.addLinearCurve(t,e);this.path.addCurve(i),this._lastX=t,this._lastY=e}addLinearCurve(t,e){return new x.g(new b.E9(this._lastX,this._lastY),new b.E9(t,e))}quadraticCurveTo(t,e,i,s){let r=new A.Z(new b.E9(this._lastX,this._lastY),new b.E9(t,e),new b.E9(i,s));this.path.addCurve(r),this._lastX=i,this._lastY=s}bezierCurveTo(t,e,i,s,r,n){let a=new S.AX(new b.E9(this._lastX,this._lastY),new b.E9(t,e),new b.E9(i,s),new b.E9(r,n));this.path.addCurve(a),this._lastX=r,this._lastY=n}arcTo(t,e,i,s,r){throw Error("CurveContext不支持调用arcTo")}ellipse(t,e,i,s,r,n,a,o){throw Error("CurveContext不支持调用ellipse")}rect(t,e,i,s){throw Error("CurveContext不支持调用rect")}arc(t,e,i,s,r,n){throw Error("CurveContext不支持调用arc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}var w=i(613);class T extends d{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new l.C(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([p.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([p.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,i,s){return this.commandList.push([p.Q,t,e,i,s]),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,s),this}bezierCurveTo(t,e,i,s,r,n){return this.commandList.push([p.C,t,e,i,s,r,n]),this._ctx&&this._ctx.bezierCurveTo(t,e,i,s,r,n),this}arcTo(t,e,i,s,r){return this.commandList.push([p.AT,t,e,i,s,r]),this._ctx&&this._ctx.arcTo(t,e,i,s,r),this}ellipse(t,e,i,s,r,n,a,o){return this.commandList.push([p.E,t,e,i,s,r,n,a,o]),this._ctx&&this._ctx.ellipse(t,e,i,s,r,n,a,o),this}rect(t,e,i,s){return this.commandList.push([p.R,t,e,i,s]),this._ctx&&this._ctx.rect(t,e,i,s),this}arc(t,e,i,s,r,n){return this.commandList.push([p.A,t,e,i,s,r,n]),this._ctx&&this._ctx.arc(t,e,i,s,r,n),this}closePath(){return this.commandList.push([p.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this._curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){let t=new k(this);(0,y.h)(this.commandList,t,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){let t=[];t[p.M]=t=>`M${t[1]} ${t[2]}`,t[p.L]=t=>`L${t[1]} ${t[2]}`,t[p.Q]=t=>`Q${t[1]} ${t[2]} ${t[3]} ${t[4]}`,t[p.C]=t=>`C${t[1]} ${t[2]} ${t[3]} ${t[4]} ${t[5]} ${t[6]}`,t[p.A]=t=>{let e=[];_(e,t[4],t[5],t[1],t[2],t[3],t[3]);let i="";for(let t=0;t<e.length;t+=6)i+=`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`;return i},t[p.R]=t=>`M${t[1]} ${t[2]} h${t[3]} v${t[4]} H${t[1]}Z`,t[p.Z]=t=>"Z",this.toStringCbList=t}let t=this.toStringCbList,e="";return this.commandList.forEach(i=>{e+=t[i[0]](i)}),e}fromString(t,e,i,l,h){this.clear();let d=function(t){let e,i;if(!t)return[];let l=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===l)return[];let h=[];for(let t=0,d=l.length;t<d;t++)if(r=(s=l[t]).slice(1),e=[n=s[0]],null!==(i=r.match(u))){for(let t=0,s=i.length;t<s;t++)Number.isNaN(a=parseFloat(i[t]))||e.push(a);if(o=c[n],e.length-1>o){let t,i=n;for(let s=1,r=e.length;s<r;s+=o){t=[i];for(let i=s,r=s+o;i<r;i++)t.push(e[i]);h.push(t),"m"===i?i="l":"M"===i&&(i="L")}}else h.push(e)}else h.push(e);return h}(t);return this._runCommandStrList(d,e,i,l,h),this._updateBounds(),this}fromLine(t){let{points:e,curveType:i,clipRangeByDimension:s}=t.attribute;if(!e)return;let r=(0,w.X0)(e,i);"x"===s?this.direction=m.Nm.ROW:"y"===s?this.direction=m.Nm.COLUMN:"auto"===s&&(this.direction=r.direction),this._curves=r.curves}fromCustomPath2D(t,e,i,s,r){return this.clear(),this._runCommandList(t.commandList,e,i,s,r),this._updateBounds(),this}transform(t,e,i,s){let r=this.commandList;if(!this.transformCbList){let t=[];t[p.M]=this.moveToTransform,t[p.L]=this.lineToTransform,t[p.Q]=this.quadraticCurveToTransform,t[p.C]=this.bezierCurveToTransform,t[p.AT]=this.arcToTransform,t[p.E]=this.ellipseTransform,t[p.R]=this.rectTransform,t[p.A]=this.arcTransform,t[p.Z]=this.closePathTransform,this.transformCbList=t}r.forEach(r=>{this.transformCbList[r[0]](r,t,e,i,s)}),this._updateBounds()}moveToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i}lineToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i}quadraticCurveToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s+e,t[4]=t[4]*r+i}bezierCurveToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s+e,t[4]=t[4]*r+i,t[5]=t[5]*s+e,t[6]=t[6]*r+i}arcToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s+e,t[4]=t[4]*r+i,t[5]=t[5]*(s+r)/2}ellipseTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s,t[4]=t[4]*r}rectTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s,t[4]=t[4]*r}arcTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*(s+r)/2}closePathTransform(){}_runCommandStrList(t,e=0,i=0,s=1,r=1){let n,a,o,l,h,d=null,u=0,c=0,p=0,g=0;for(let m=0,f=t.length;m<f;++m){switch(n=t[m],1===s&&1===r||(n=function(t,e,i){let s=C[0]=t[0];if("a"===s||"A"===s)C[1]=e*t[1],C[2]=i*t[2],C[3]=t[3],C[4]=t[4],C[5]=t[5],C[6]=e*t[6],C[7]=i*t[7];else if("h"===s||"H"===s)C[1]=e*t[1];else if("v"===s||"V"===s)C[1]=i*t[1];else for(let s=1,r=t.length;s<r;++s)C[s]=(s%2==1?e:i)*t[s];return C}(n,s,r)),n[0]){case"l":u+=n[1],c+=n[2],this.lineTo(u+e,c+i);break;case"L":u=n[1],c=n[2],this.lineTo(u+e,c+i);break;case"h":u+=n[1],this.lineTo(u+e,c+i);break;case"H":u=n[1],this.lineTo(u+e,c+i);break;case"v":c+=n[1],this.lineTo(u+e,c+i);break;case"V":c=n[1],this.lineTo(u+e,c+i);break;case"m":u+=n[1],c+=n[2],this.moveTo(u+e,c+i);break;case"M":u=n[1],c=n[2],this.moveTo(u+e,c+i);break;case"c":a=u+n[5],o=c+n[6],p=u+n[3],g=c+n[4],this.bezierCurveTo(u+n[1]+e,c+n[2]+i,p+e,g+i,a+e,o+i),u=a,c=o;break;case"C":u=n[5],c=n[6],p=n[3],g=n[4],this.bezierCurveTo(n[1]+e,n[2]+i,p+e,g+i,u+e,c+i);break;case"s":a=u+n[3],o=c+n[4],null===d[0].match(/[CcSs]/)?(p=u,g=c):(p=2*u-p,g=2*c-g),l=u+n[1],h=c+n[2],this.bezierCurveTo(p+e,g+i,l+e,h+i,a+e,o+i),p=l,g=h,u=a,c=o;break;case"S":a=n[3],o=n[4],null===d[0].match(/[CcSs]/)?(p=u,g=c):(p=2*u-p,g=2*c-g),l=n[1],h=n[2],this.bezierCurveTo(p+e,g+i,l+e,h+i,a+e,o+i),p=l,g=h,u=a,c=o;break;case"q":a=u+n[3],o=c+n[4],p=u+n[1],g=c+n[2],this.quadraticCurveTo(p+e,g+i,a+e,o+i),u=a,c=o;break;case"Q":a=n[3],o=n[4],this.quadraticCurveTo(n[1]+e,n[2]+i,a+e,o+i),u=a,c=o,p=n[1],g=n[2];break;case"t":a=u+n[1],o=c+n[2],null===d[0].match(/[QqTt]/)?(p=u,g=c):"t"===d[0]?(p=2*u-l,g=2*c-h):"q"===d[0]&&(p=2*u-p,g=2*c-g),l=p,h=g,this.quadraticCurveTo(p+e,g+i,a+e,o+i),u=a,c=o,p=u+n[1],g=c+n[2];break;case"T":a=n[1],o=n[2],p=2*u-p,g=2*c-g,this.quadraticCurveTo(p+e,g+i,a+e,o+i),u=a,c=o;break;case"a":v(this,u+e,c+i,[n[1],n[2],n[3],n[4],n[5],n[6]+u+e,n[7]+c+i]),u+=n[6],c+=n[7];break;case"A":v(this,u+e,c+i,[n[1],n[2],n[3],n[4],n[5],n[6]+e,n[7]+i]),u=n[6],c=n[7];break;case"z":case"Z":this.closePath()}d=n}}_runCommandList(t,e=0,i=0,s=1,r=1){if(0!==e||0!==i||1!==s||1!==r)for(let n=0,a=t.length;n<a;++n){let a=t[n].slice();switch(a[0]){case p.L:this.lineToTransform(a,e,i,s,r);break;case p.M:this.moveToTransform(a,e,i,s,r);break;case p.C:this.bezierCurveToTransform(a,e,i,s,r);break;case p.Q:this.quadraticCurveToTransform(a,e,i,s,r);break;case p.A:this.arcToTransform(a,e,i,s,r);break;case p.E:this.ellipseTransform(a,e,i,s,r);break;case p.R:this.rectTransform(a,e,i,s,r);break;case p.AT:this.arcToTransform(a,e,i,s,r);break;case p.Z:this.closePath()}}else this.commandList=t.map(t=>t.slice())}_updateBounds(){this.bounds.clear(),(0,y.h)(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===m.Nm.COLUMN){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,g.Wn)(t.p0.y-e.p1.y)}if(this.direction===m.Nm.ROW){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,g.Wn)(t.p0.x-e.p1.x)}return this._curves.reduce((t,e)=>t+e.getLength(),0)}getYAt(t){if(!this.curves)return 1/0;for(let e=0;e<this.curves.length;e++){let i=this.curves[e];if(i.includeX(t))return i.getYAt(t)}return 1/0}getAttrAt(t){if(!this._curves)return{pos:{x:0,y:0},angle:0};let e,i=0;for(let s=0;s<this._curves.length;s++){let r=(e=this._curves[s]).getLength(this.direction);if(i+r>=t)break;i+=r}let s=(t-i)/e.getLength(this.direction);return{pos:e.getPointAt(s),angle:e.getAngleAt(s)}}drawWithClipRange(t,e,i,s,r){this.tryBuildCurves();let n=this.getLength()*r,a=0;for(let r=0;r<this._curves.length;r++){let o=this._curves[r],l=o.getLength(this.direction);if(!(a+l<=n)){let r=1-(a+l-n)/l;o.draw(t,i,s,e,e,r);break}o.draw(t,i,s,e,e,1),a+=l}}}let C=["l",0,0,0,0,0,0,0]},3872:function(t,e,i){var s,r,n,a,o,l,h,d,u,c,p,g,m,f,v,_,y,b;i.d(e,{D5:()=>d,Gk:()=>n,Gz:()=>s,LZ:()=>r,Nm:()=>h,Oh:()=>u,Tq:()=>l,td:()=>a,uq:()=>o}),(c=s||(s={}))[c.NONE=0]="NONE",c[c.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",c[c.UPDATE_SHAPE=2]="UPDATE_SHAPE",c[c.CLEAR_SHAPE=253]="CLEAR_SHAPE",c[c.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",c[c.INIT=179]="INIT",c[c.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",c[c.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",c[c.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",c[c.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",c[c.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",c[c.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",c[c.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",c[c.CLEAR_LAYOUT=127]="CLEAR_LAYOUT",(p=r||(r={}))[p.GLOBAL=1]="GLOBAL",p[p.LOCAL=16]="LOCAL",p[p.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",p[p.LOCAL_ACCURATE=48]="LOCAL_ACCURATE",(g=n||(n={}))[g.INIT=0]="INIT",g[g.DEFAULT=1]="DEFAULT",g[g.STATE=2]="STATE",g[g.ANIMATE_BIND=10]="ANIMATE_BIND",g[g.ANIMATE_PLAY=11]="ANIMATE_PLAY",g[g.ANIMATE_START=12]="ANIMATE_START",g[g.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",g[g.ANIMATE_END=14]="ANIMATE_END",g[g.TRANSLATE=20]="TRANSLATE",g[g.TRANSLATE_TO=21]="TRANSLATE_TO",g[g.SCALE=22]="SCALE",g[g.SCALE_TO=23]="SCALE_TO",g[g.ROTATE=24]="ROTATE",g[g.ROTATE_TO=25]="ROTATE_TO",(m=a||(a={}))[m.INITIAL=0]="INITIAL",m[m.RUNNING=1]="RUNNING",m[m.PAUSED=2]="PAUSED",m[m.END=3]="END",(f=o||(o={}))[f.NORMAL=0]="NORMAL",f[f.SET_ATTR_IMMEDIATELY=1]="SET_ATTR_IMMEDIATELY",(v=l||(l={})).wait="wait",v.from="from",v.to="to",v.customAnimate="customAnimate",(_=h||(h={}))[_.ROW=1]="ROW",_[_.COLUMN=2]="COLUMN",(y=d||(d={}))[y.CubicBezierCurve=0]="CubicBezierCurve",y[y.QuadraticBezierCurve=1]="QuadraticBezierCurve",y[y.ArcCurve=2]="ArcCurve",y[y.LineCurve=3]="LineCurve",y[y.EllipseCurve=4]="EllipseCurve",y[y.MoveCurve=5]="MoveCurve",(b=u||(u={}))[b.beforeFillStroke=0]="beforeFillStroke",b[b.afterFillStroke=1]="afterFillStroke"},86:function(t,e,i){i.d(e,{R:()=>s});class s{static GenAutoIncrementId(){return s.auto_increment_id++}}s.auto_increment_id=0},1600:function(t,e,i){i.d(e,{f:()=>r});var s=i(6040);let r=(0,i(592).v)(s.B8)},592:function(t,e,i){i.d(e,{f:()=>a,v:()=>o});var s=i(2230),r=i(6040),n=i(2532);function a(t){return(e,i,s)=>{var a,o;let l,h;a=r.LD,o=s.toString(),l={},n.Z.hasOwnMetadata(a,e)&&(l=n.Z.getMetadata(a,e)),void 0===(h=l[o])&&(h=[]),h.push(t),l[o]=h,n.Z.defineMetadata(a,l,e)}}function o(t){return e=>(i,r,n)=>a(new s.S(t,e))(i,r,n)}},7428:function(t,e,i){i.d(e,{b:()=>n});var s=i(6040),r=i(2532);function n(){return function(t){return r.Z.defineMetadata(s.FL,null,t),t}}},7089:function(t,e,i){i.d(e,{t:()=>a});var s=i(2230),r=i(6040),n=i(592);function a(t){return(0,n.f)(new s.S(r.vO,t))}},8429:function(t,e,i){i.d(e,{n:()=>r});var s=i(86);class r{constructor(t){this.id=s.R.GenAutoIncrementId(),this.registry=t}}},2230:function(t,e,i){i.d(e,{S:()=>r});var s=i(6040);class r{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===s.vO?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}},6040:function(t,e,i){i.d(e,{B8:()=>r,FL:()=>o,LD:()=>a,Lc:()=>n,vO:()=>s});let s="named",r="inject",n="multi_inject",a="inversify:tagged",o="inversify:paramtypes"},7317:function(t,e,i){i.d(e,{B$:()=>h,G9:()=>u,Iu:()=>l,M5:()=>p,TL:()=>r,fF:()=>g,jI:()=>o,lM:()=>n,mN:()=>d,uD:()=>a,zB:()=>c});var s=i(8103);function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e,i){let s=Math.sin(i),r=Math.cos(i),n=e[4],a=e[5],o=e[6],l=e[7],h=e[8],d=e[9],u=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*r+h*s,t[5]=a*r+d*s,t[6]=o*r+u*s,t[7]=l*r+c*s,t[8]=h*r-n*s,t[9]=d*r-a*s,t[10]=u*r-o*s,t[11]=c*r-l*s,t}function a(t,e,i){let s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],o=e[2],l=e[3],h=e[8],d=e[9],u=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r-h*s,t[1]=a*r-d*s,t[2]=o*r-u*s,t[3]=l*r-c*s,t[8]=n*s+h*r,t[9]=a*s+d*r,t[10]=o*s+u*r,t[11]=l*s+c*r,t}function o(t,e,i){let s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],o=e[2],l=e[3],h=e[4],d=e[5],u=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r+h*s,t[1]=a*r+d*s,t[2]=o*r+u*s,t[3]=l*r+c*s,t[4]=h*r-n*s,t[5]=d*r-a*s,t[6]=u*r-o*s,t[7]=c*r-l*s,t}function l(t,e,i){let s,r,n,a,o,l,h,d,u,c,p,g;let m=i[0],f=i[1],v=i[2];return e===t?(t[12]=e[0]*m+e[4]*f+e[8]*v+e[12],t[13]=e[1]*m+e[5]*f+e[9]*v+e[13],t[14]=e[2]*m+e[6]*f+e[10]*v+e[14],t[15]=e[3]*m+e[7]*f+e[11]*v+e[15]):(s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],l=e[5],h=e[6],d=e[7],u=e[8],c=e[9],p=e[10],g=e[11],t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=l,t[6]=h,t[7]=d,t[8]=u,t[9]=c,t[10]=p,t[11]=g,t[12]=s*m+o*f+u*v+e[12],t[13]=r*m+l*f+c*v+e[13],t[14]=n*m+h*f+p*v+e[14],t[15]=a*m+d*f+g*v+e[15]),t}function h(t,e){t[0]=e.a,t[1]=e.b,t[2]=0,t[3]=0,t[4]=e.c,t[5]=e.d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e.e,t[13]=e.f,t[14]=0,t[15]=1}function d(t,e,i){let s=i[0],r=i[1],n=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,i){let s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],l=e[5],h=e[6],d=e[7],u=e[8],c=e[9],p=e[10],g=e[11],m=e[12],f=e[13],v=e[14],_=e[15],y=i[0],b=i[1],x=i[2],S=i[3];return t[0]=y*s+b*o+x*u+S*m,t[1]=y*r+b*l+x*c+S*f,t[2]=y*n+b*h+x*p+S*v,t[3]=y*a+b*d+x*g+S*_,y=i[4],b=i[5],x=i[6],S=i[7],t[4]=y*s+b*o+x*u+S*m,t[5]=y*r+b*l+x*c+S*f,t[6]=y*n+b*h+x*p+S*v,t[7]=y*a+b*d+x*g+S*_,y=i[8],b=i[9],x=i[10],S=i[11],t[8]=y*s+b*o+x*u+S*m,t[9]=y*r+b*l+x*c+S*f,t[10]=y*n+b*h+x*p+S*v,t[11]=y*a+b*d+x*g+S*_,y=i[12],b=i[13],x=i[14],S=i[15],t[12]=y*s+b*o+x*u+S*m,t[13]=y*r+b*l+x*c+S*f,t[14]=y*n+b*h+x*p+S*v,t[15]=y*a+b*d+x*g+S*_,t}function c(t,e,i,n){let a,o,l,h,d,u,c,p,g,m;let f=e[0],v=e[1],_=e[2],y=n[0],b=n[1],x=n[2],S=i[0],A=i[1],k=i[2];return Math.abs(f-S)<s.Ho&&Math.abs(v-A)<s.Ho&&Math.abs(_-k)<s.Ho?r(t):(m=1/Math.hypot(c=f-S,p=v-A,g=_-k),c*=m,p*=m,g*=m,(m=Math.hypot(a=b*g-x*p,o=x*c-y*g,l=y*p-b*c))?(a*=m=1/m,o*=m,l*=m):(a=0,o=0,l=0),(m=Math.hypot(h=p*l-g*o,d=g*a-c*l,u=c*o-p*a))?(h*=m=1/m,d*=m,u*=m):(h=0,d=0,u=0),t[0]=a,t[1]=h,t[2]=c,t[3]=0,t[4]=o,t[5]=d,t[6]=p,t[7]=0,t[8]=l,t[9]=u,t[10]=g,t[11]=0,t[12]=-(a*f+o*v+l*_),t[13]=-(h*f+d*v+u*_),t[14]=-(c*f+p*v+g*_),t[15]=1,t)}function p(t,e,i,s,r,n,a){let o=1/(e-i),l=1/(s-r),h=1/(n-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*o,t[13]=(r+s)*l,t[14]=(a+n)*h,t[15]=1,t}function g(t,e,i){let s=e[0],r=e[1],n=e[2],a=i[3]*s+i[7]*r+i[11]*n+i[15];return a=a||1,t[0]=(i[0]*s+i[4]*r+i[8]*n+i[12])/a,t[1]=(i[1]*s+i[5]*r+i[9]*n+i[13])/a,t[2]=(i[2]*s+i[6]*r+i[10]*n+i[14])/a,t}},5399:function(t,e,i){i.d(e,{h:()=>r});let s=[(t,e,i,s,r,n,a)=>e.arc(t[1]*r+i,t[2]*n+s,t[3]*(r+n)/2,t[4],t[5],t[6],a),(t,e,i,s,r,n,a)=>e.arcTo(t[1]*r+i,t[2]*n+s,t[3]*r+i,t[4]*n+s,t[5]*(r+n)/2,a),(t,e,i,s,r,n,a)=>e.bezierCurveTo(t[1]*r+i,t[2]*n+s,t[3]*r+i,t[4]*n+s,t[5]*r+i,t[6]*n+s,a),(t,e,i,s)=>e.closePath(),(t,e,i,s,r,n)=>e.ellipse(t[1]*r+i,t[2]*n+s,t[3]*r,t[4]*n,t[5],t[6],t[7],t[8]),(t,e,i,s,r,n,a)=>e.lineTo(t[1]*r+i,t[2]*n+s,a),(t,e,i,s,r,n,a)=>e.moveTo(t[1]*r+i,t[2]*n+s,a),(t,e,i,s,r,n,a)=>e.quadraticCurveTo(t[1]*r+i,t[2]*n+s,t[3]*r+i,t[4]*n+s,a),(t,e,i,s,r,n,a)=>e.rect(t[1]*r+i,t[2]*n+s,t[3]*r,t[4]*n,a)];function r(t,e,i=0,n=0,a=1,o=1,l){for(let r=0;r<t.length;r++){let h=t[r];s[h[0]](h,e,i,n,a,o,l)}}},231:function(t,e,i){i.d(e,{V3:()=>l,fW:()=>o,hJ:()=>h});var s=i(8103),r=i(3872),n=i(1481);function a(t,e,i,s,r,n,a){var o;let l=e.p0,h=s;if(i&&i.originP1===i.originP2&&(l=i.p0),e.defined)s||(t.lineTo(l.x+r,l.y+n,a),h=!s);else{let d;let{originP1:u,originP2:c}=e;if(u&&!1!==u.defined&&!i?d=l:u&&!1!==c.defined&&(d=null!==(o=e.p3)&&void 0!==o?o:e.p1),s){h=!s;let i=d?d.x:e.p0.x,o=d?d.y:e.p0.y;t.moveTo(i+r,o+n,a)}else d&&(h=!s,t.lineTo(d.x+r,d.y+n,a))}return h}function o(t,e,i,o,l){let h;let{offsetX:d=0,offsetY:u=0,offsetZ:c=0,mode:p="none",drawConnect:g=!1}=l||{};if(g&&"none"===p||!e)return;let m=!0,{curves:f}=e;if(i>=1){if(g){let e,i=!0;f.forEach((s,r)=>{s.originP1!==s.originP2&&(i=a(t,s,e,i,d,u,c)),e=s})}else f.forEach(e=>{e.defined?(m&&t.moveTo(e.p0.x+d,e.p0.y+u,c),(0,n.w)(t,e,1,l),m=!1):m=!0});return}if(i<=0)return;"x"===o?h=r.Nm.ROW:"y"===o?h=r.Nm.COLUMN:"auto"===o&&(h=e.direction);let v=i*e.tryUpdateLength(h),_=0,y=!0,b=null;for(let e=0,i=f.length;e<i;e++){let i=f[e],r=i.getLength(h),o=(v-_)/r;if(_+=r,o<0)break;if(g){if(i.originP1===i.originP2){b=i;continue}y=a(t,i,b,y,d,u,c),b=i}else{if(!i.defined){m=!0;continue}m&&t.moveTo(i.p0.x+d,i.p0.y+u,c),(0,n.w)(t,i,(0,s.VV)(o,1),l),m=!1}}}function l(t,e,i,s){let{offsetX:r=0,offsetY:n=0}=s||{},a=e?e.points[e.points.length-1]:i.points[0];t.moveTo(a.x+r,a.y+n),i.points.forEach(e=>{!1!==e.defined?t.lineTo(e.x+r,e.y+n):t.moveTo(e.x+r,e.y+n)})}function h(t,e,i,s){let{offsetX:r=0,offsetY:n=0}=s||{},{points:a}=i,o=[],l=0;for(let t=0;t<a.length;t++)!1===a[t].defined&&(l+1!==t&&o.slice(l,t),l=t);o.push(a),o.forEach((i,s)=>{var a,o,l,h;let d=e&&0===s?e.points[e.points.length-1]:i[0];t.moveTo(d.x+r,d.y+n),i.forEach(e=>{!1!==e.defined?t.lineTo(e.x+r,e.y+n):t.moveTo(e.x+r,e.y+n)});for(let e=i.length-1;e>=0;e--){let s=i[e];t.lineTo(null!==(a=s.x1)&&void 0!==a?a:s.x,null!==(o=s.y1)&&void 0!==o?o:s.y)}t.lineTo(null!==(l=d.x1)&&void 0!==l?l:d.x,null!==(h=d.y1)&&void 0!==h?h:d.y),t.closePath()})}},1481:function(t,e,i){i.d(e,{w:()=>r});var s=i(7574);function r(t,e,i,r){if(!e.p1)return;let{offsetX:n=0,offsetY:a=0,offsetZ:o=0}=r||{};if(1===i)e.p2&&e.p3?t.bezierCurveTo(n+e.p1.x,a+e.p1.y,n+e.p2.x,a+e.p2.y,n+e.p3.x,a+e.p3.y,o):t.lineTo(n+e.p1.x,a+e.p1.y,o);else if(e.p2&&e.p3){let[r]=(0,s.mG)(e,i);t.bezierCurveTo(n+r.p1.x,a+r.p1.y,n+r.p2.x,a+r.p2.y,n+r.p3.x,a+r.p3.y,o)}else{let s=e.getPointAt(i);t.lineTo(n+s.x,a+s.y,o)}}},2569:function(t,e,i){i.d(e,{H:()=>s});class s{getLength(t){return null!=t?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}},7574:function(t,e,i){i.d(e,{AX:()=>u,OB:()=>d,mG:()=>h});var s=i(2683),r=i(8103),n=i(2569),a=i(3872),o=i(4412),l=i(4884);function h(t,e){let{p0:i,p1:r,p2:n,p3:a}=t,l=(0,o.P)(i,r,n,a,e),h=s.HL.pointAtPP(i,r,e),d=s.HL.pointAtPP(r,n,e),c=s.HL.pointAtPP(n,a,e),p=s.HL.pointAtPP(h,d,e),g=s.HL.pointAtPP(d,c,e);return[new u(i,h,p,l),new u(l,g,c,a)]}function d(t,e){let{p0:i,p1:r,p2:n}=t,a=(0,o.Pv)(i,r,n,e),h=s.HL.pointAtPP(i,r,e),d=s.HL.pointAtPP(r,n,e);return[new l.Z(i,h,a),new l.Z(a,d,n)]}class u extends n.H{constructor(t,e,i,s){super(),this.type=a.D5.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=i,this.p3=s}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(!1!==this.defined)return(0,o.P)(this.p0,this.p1,this.p2,this.p3,t);throw Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?(0,o.Ci)(this.p0,this.p1,this.p2,this.p3,0):60}calcProjLength(t){return t===a.Nm.ROW?(0,r.Wn)(this.p0.x-this.p3.x):t===a.Nm.COLUMN?(0,r.Wn)(this.p0.y-this.p3.y):0}getAngleAt(t){let e=(0,r.Fp)(t-.01,0),i=(0,r.VV)(t+.01,1),s=this.getPointAt(e),n=this.getPointAt(i);return(0,r.fv)(n.y-s.y,n.x-s.x)}draw(t,e,i,s,r,n){if(t.moveTo(this.p0.x*s+e,this.p0.y*r+i),n>=1)t.bezierCurveTo(this.p1.x*s+e,this.p1.y*r+i,this.p2.x*s+e,this.p2.y*r+i,this.p3.x*s+e,this.p3.y*r+i);else if(n>0){let[a]=h(this,n);t.bezierCurveTo(a.p1.x*s+e,a.p1.y*r+i,a.p2.x*s+e,a.p2.y*r+i,a.p3.x*s+e,a.p3.y*r+i)}}includeX(t){let e=(0,r.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(0,r.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return t>=e&&t<=i}getYAt(t){let e=(0,r.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(t-e)/((0,r.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-e);return this.getPointAt(i).y}}},1123:function(t,e,i){i.d(e,{d:()=>o,g:()=>l});var s=i(2683),r=i(8103),n=i(2569),a=i(3872);function o(t,e){let{p0:i,p1:r}=t,n=s.HL.pointAtPP(i,r,e);return[new l(i,n),new l(n,r)]}class l extends n.H{constructor(t,e){super(),this.type=a.D5.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(!1!==this.defined)return s.HL.pointAtPP(this.p0,this.p1,t);throw Error("defined为false的点不能getPointAt")}getAngleAt(t){return null==this.angle&&(this.angle=(0,r.fv)(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?s.HL.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===a.Nm.ROW?(0,r.Wn)(this.p0.x-this.p1.x):t===a.Nm.COLUMN?(0,r.Wn)(this.p0.y-this.p1.y):0}draw(t,e,i,s,r,n){if(t.moveTo(this.p0.x*s+e,this.p0.y*r+i),n>=1)t.lineTo(this.p1.x*s+e,this.p1.y*r+i);else if(n>0){let a=this.getPointAt(n);t.lineTo(a.x*s+e,a.y*r+i)}}includeX(t){return t>=this.p0.x&&t<=this.p1.x||t>=this.p1.x&&t<=this.p0.x}getYAt(t){if(this.includeX(t)){let e=this.p0,i=this.p1;this.p0.x>this.p1.x&&(e=this.p1,i=this.p0);let s=(t-e.x)/(i.x-e.x);return e.y+s*(i.y-e.y)}return 1/0}}},4884:function(t,e,i){i.d(e,{Z:()=>l});var s=i(4412),r=i(3872),n=i(2569),a=i(8103),o=i(7574);class l extends n.H{constructor(t,e,i){super(),this.type=r.D5.QuadraticBezierCurve,this.p0=t,this.p1=e,this.p2=i}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(t){if(!1!==this.defined)return(0,s.Pv)(this.p0,this.p1,this.p2,t);throw Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?(0,s.hN)(this.p0,this.p1,this.p2,0):60}calcProjLength(t){return t===r.Nm.ROW?(0,a.Wn)(this.p0.x-this.p2.x):t===r.Nm.COLUMN?(0,a.Wn)(this.p0.y-this.p2.y):0}getAngleAt(t){let e=(0,a.Fp)(t-.01,0),i=(0,a.VV)(t+.01,1),s=this.getPointAt(e),r=this.getPointAt(i);return(0,a.fv)(r.y-s.y,r.x-s.x)}draw(t,e,i,s,r,n){if(t.moveTo(this.p0.x*s+e,this.p0.y*r+i),n>=1)t.quadraticCurveTo(this.p1.x*s+e,this.p1.y*r+i,this.p2.x*s+e,this.p2.y*r+i);else if(n>0){let[a]=(0,o.OB)(this,n);t.quadraticCurveTo(a.p1.x*s+e,a.p1.y*r+i,a.p2.x*s+e,a.p2.y*r+i)}}getYAt(t){throw Error("QuadraticBezierCurve暂不支持getYAt")}includeX(t){throw Error("QuadraticBezierCurve暂不支持includeX")}}},613:function(t,e,i){i.d(e,{X0:()=>M});var s=i(8103),r=i(2683),n=i(3872),a=i(7574),o=i(1123);class l{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,i,s,n,o,l,h){let d=new a.AX(new r.E9(this._lastX,this._lastY),new r.E9(t,e),new r.E9(i,s),new r.E9(n,o));d.originP1=this._lastOriginP,d.originP2=h,d.defined=l,this.curves.push(d),this._lastX=n,this._lastY=o,this._lastOriginP=h}closePath(){if(this.curves.length<2)return;let t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw Error("SegContext不支持调用ellipse")}lineTo(t,e,i,s){let r=this.addLinearCurve(t,e,i,this._lastOriginP,s);this.curves.push(r),this._lastX=t,this._lastY=e,this._lastOriginP=s}moveTo(t,e,i){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(t,e,i,s){throw Error("SegContext不支持调用quadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,i,s,n){let a=new o.g(new r.E9(this._lastX,this._lastY),new r.E9(t,e));return a.originP1=s,a.originP2=n,a.defined=i,a}getPointAt(t){throw Error("暂未实现")}getCurveLengths(){return[]}getLength(t){var e,i;if(t===n.Nm.COLUMN){if(!this.curves.length)return 0;let t=this.curves[0],i=this.curves[this.curves.length-1],r=null!==(e=i.p3)&&void 0!==e?e:i.p1;return(0,s.Wn)(t.p0.y-r.y)}if(t===n.Nm.ROW){if(!this.curves.length)return 0;let t=this.curves[0],e=this.curves[this.curves.length-1],r=null!==(i=e.p3)&&void 0!==i?i:e.p1;return(0,s.Wn)(t.p0.x-r.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((t,e)=>t+e.getLength(),0)),this.length}}class h extends l{bezierCurveTo(t,e,i,s,r,n,a,o){return super.bezierCurveTo(e,t,s,i,n,r,a,o)}lineTo(t,e,i,s){return super.lineTo(e,t,i,s)}moveTo(t,e,i){return super.moveTo(e,t,i)}clear(){return super.clear()}}function d(t,e,i=1){let s=!1;for(let i=0,r=e.length;i<=r;i++)i>=r===s&&((s=!s)?t.lineStart():t.lineEnd()),s&&t.point(e[i])}function u(t,e,i){let r=null!=e?e:(0,s.Wn)(i[i.length-1].x-i[0].x)>(0,s.Wn)(i[i.length-1].y-i[0].y)?n.Nm.ROW:n.Nm.COLUMN;return"monotoneY"===t?new h(t,r):new l(t,r)}class c{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function p(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;let r=u("linear",i,t);return d(new c(r,s),t,1),r}function g(t,e,i,s,r){t.context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6,s,t.lastPoint1)}class m{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&g(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;break;default:g(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function f(t,e,i){let s=t._x1-t._x0,r=e-t._x1,n=(t._y1-t._y0)/(s||Number(r<0&&-0)),a=(i-t._y1)/(r||Number(s<0&&-0));return((n<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(n),Math.abs(a),.5*Math.abs((n*r+a*s)/(s+r)))||0}function v(t,e){let i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function _(t,e,i,s,r){let n=t._x0,a=t._y0,o=t._x1,l=t._y1,h=(o-n)/3;t.context.bezierCurveTo(n+h,a+h*e,o-h,l-h*i,o,l,s,t.lastPoint1)}class y{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:_(this,this._t0,v(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN,i=t.x,s=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,s,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(i,s,t);break;case 1:this._point=2;break;case 2:this._point=3,_(this,v(this,e=f(this,i,s)),e,!1!==this._lastDefined1&&!1!==this._lastDefined2,t);break;default:_(this,this._t0,e=f(this,i,s),!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class b extends y{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}class x{constructor(t,e=.5,i){this.context=t,this._t=e,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t);else{let s=this._x*(1-this._t)+e*this._t;.5===this._t?this.context.lineTo(s,this._y,!1!==this._lastDefined,this.lastPoint):this.context.lineTo(s,this._y,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(s,i,!1!==this._lastDefined&&!1!==t.defined,t)}}this._lastDefined=t.defined,this._x=e,this._y=i,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function S(t,e,i={}){let{direction:r,startPoint:a}=i;if(t.length<2-Number(!!a))return null;let o=new l("step",null!=r?r:(0,s.Wn)(t[t.length-1].x-t[0].x)>(0,s.Wn)(t[t.length-1].y-t[0].y)?n.Nm.ROW:n.Nm.COLUMN);return d(new x(o,e,a),t,1),o}class A extends c{lineEnd(){this.context.closePath()}}function k(t,e,i,r,n){let a=t._x1,o=t._y1,l=t._x2,h=t._y2;if(t._l01_a>s.Ho){let e=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*e-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,o=(o*e-t._y0*t._l12_2a+t._y2*t._l01_2a)/i}if(t._l23_a>s.Ho){let s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,r=3*t._l23_a*(t._l23_a+t._l12_a);l=(l*s+t._x1*t._l23_2a-e*t._l12_2a)/r,h=(h*s+t._y1*t._l23_2a-i*t._l12_2a)/r}t.context.bezierCurveTo(a,o,l,h,t._x2,t._y2,r,t.lastPoint1)}function w(t,e){return function(i,s,r={}){let{direction:n,startPoint:a}=r;if(i.length<2-Number(!!a))return null;if(i.length<3-Number(!!a))return p(i,r);let o=u(t,n,i);return d(new e(o,s,a),i,2),o}}let T=w("catmullRom",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2):this.context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3;default:k(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}),C=w("catmullRomClosed",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=i;break;case 1:this._point=2,this.context.moveTo(this._x4=e,this._y4=i,t);break;case 2:this._point=3,this._x5=e,this._y5=i;break;default:k(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}});function M(t,e,i){var s,r;switch(e){case"linear":default:return p(t,i);case"basis":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;if(t.length<3-Number(!!s))return p(t,e);let r=u("basis",i,t);return d(new m(r,s),t,2),r}(t,i);case"monotoneX":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;if(t.length<3-Number(!!s))return p(t,e);let r=u("monotoneX",i,t);return d(new y(r,s),t,2),r}(t,i);case"monotoneY":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;if(t.length<3-Number(!!s))return p(t,e);let r=u("monotoneY",i,t);return d(new b(r,s),t,2),r}(t,i);case"step":return S(t,.5,i);case"stepBefore":return S(t,0,i);case"stepAfter":return S(t,1,i);case"catmullRom":return T(t,null!==(s=null==i?void 0:i.curveTension)&&void 0!==s?s:.5,i);case"catmullRomClosed":return C(t,null!==(r=null==i?void 0:i.curveTension)&&void 0!==r?r:.5,i);case"linearClosed":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;let r=u("linear",i,t);return d(new A(r,s),t,1),r}(t,i)}}},6490:function(t,e,i){i.d(e,{U:()=>o});var s=i(8103),r=i(1601),n=i(4546);let a=s.pi/2;function o(t,e,i,l,h,d,u=!0,c){let p;if(Array.isArray(u)&&(c=u,u=!0),l<0&&(e+=l,l=-l),h<0&&(i+=h,h=-h),(0,r.Z)(d,!0))p=[d=(0,s.Wn)(d),d,d,d];else if(Array.isArray(d)){let t,e;let i=d;switch(i.length){case 0:p=[0,0,0,0];break;case 1:p=[t=(0,s.Wn)(i[0]),t,t,t];break;case 2:case 3:p=[t=(0,s.Wn)(i[0]),e=(0,s.Wn)(i[1]),t,e];break;default:(p=i)[0]=(0,s.Wn)(p[0]),p[1]=(0,s.Wn)(p[1]),p[2]=(0,s.Wn)(p[2]),p[3]=(0,s.Wn)(p[3])}}else p=[0,0,0,0];if(l<0||p[0]+p[1]+p[2]+p[3]<1e-12)return t.rect(e,i,l,h);let[g,m,f,v]=[[e,i],[e+l,i],[e+l,i+h],[e,i+h]],_=Math.min(l/2,h/2),y=[Math.min(_,p[0]),Math.min(_,p[1]),Math.min(_,p[2]),Math.min(_,p[3])],b=[g[0]+y[0],g[1]],x=[g[0],g[1]+y[0]],S=[m[0]-y[1],m[1]],A=[m[0],m[1]+y[1]],k=[f[0]-y[2],f[1]],w=[f[0],f[1]-y[2]],T=[v[0]+y[3],v[1]],C=[v[0],v[1]-y[3]];if(t.moveTo(b[0],b[1]),u){if(c&&c[0]?c[0](b[0],b[1],S[0],S[1]):t.lineTo(S[0],S[1]),!(0,n.h6)(S,A)){c&&c[0]&&t.moveTo(S[0],S[1]);let e=S[0],i=S[1]+y[1];t.arc(e,i,y[1],-a,0,!1)}if(c&&c[1]?c[1](A[0],A[1],w[0],w[1]):t.lineTo(w[0],w[1]),!(0,n.h6)(k,w)){let e=w[0]-y[2],i=w[1];c&&c[1]&&t.moveTo(w[0],w[1]),t.arc(e,i,y[2],0,a,!1)}if(c&&c[2]?c[2](k[0],k[1],T[0],T[1]):t.lineTo(T[0],T[1]),!(0,n.h6)(T,C)){let e=T[0],i=T[1]-y[3];c&&c[2]&&t.moveTo(T[0],T[1]),t.arc(e,i,y[3],a,s.pi,!1)}if(c&&c[3]?c[3](C[0],C[1],x[0],x[1]):t.lineTo(x[0],x[1]),!(0,n.h6)(b,x)){let e=b[0],i=b[1]+y[0];c&&c[3]&&t.moveTo(x[0],x[1]),t.arc(e,i,y[0],s.pi,s.pi+a,!1)}}else c&&c[0]?c[0](b[0],b[1],S[0],S[1]):t.lineTo(S[0],S[1]),c&&c[1]?c[1](S[0],S[1],k[0],k[1]):t.lineTo(k[0],k[1]),c&&c[2]?c[2](k[0],k[1],T[0],T[1]):t.lineTo(T[0],T[1]),c&&c[2]?c[2](T[0],T[1],b[0],b[1]):t.lineTo(b[0],b[1]);return c||t.closePath(),t}},6562:function(t,e,i){function s(t,e,i){let s={},r=[];return t.forEachChildren(t=>{let{zIndex:i=e}=t.attribute;s[i]?s[i].push(t):(s[i]=[t],r.push(i))},i),r.sort((t,e)=>i?e-t:t-e),{childMap:s,zIdxArray:r}}function r(t,e,i,n=!1,a=!1){let o=!1;if(a)o=!0;else{let i;t.forEachChildren((t,s)=>{let{zIndex:r=e}=t.attribute;if(0===s)i=r;else if(i!==r)return o=!0,!0;return!1},n)}if(o){let{childMap:r,zIdxArray:o}=s(t,e,n),l=!1;for(let t=0;t<o.length&&!l;t++){let e=r[o[t]];a&&e.sort((t,e)=>{var i,s;return(n?-1:1)*((null!==(i=e.attribute.z)&&void 0!==i?i:0)-(null!==(s=t.attribute.z)&&void 0!==s?s:0))});for(let t=0;t<e.length;t++)if(i(e[t],t)){l=!0;break}}}else t.forEachChildren(i,n)}function n(t,e,i,s=!1){var r,a,o,l;return r=this,a=void 0,o=void 0,l=function*(){yield t.forEachChildrenAsync(i,s)},new(o||(o=Promise))(function(t,e){function i(t){try{n(l.next(t))}catch(t){e(t)}}function s(t){try{n(l.throw(t))}catch(t){e(t)}}function n(e){var r;e.done?t(e.value):((r=e.value)instanceof o?r:new o(function(t){t(r)})).then(i,s)}n((l=l.apply(r,a||[])).next())})}function a(t,e,i,r=!1){let n=!1;t.forEachChildren((t,e)=>{let{zIndex:s=i}=t.attribute;if(0===e);else if(void 0!==s)return n=!0,!0;return!1},r);let o=null,l=!1;if(n){let{childMap:n,zIdxArray:a}=s(t,i,r),h=!1;for(let t=0;t<a.length&&!h;t++){let i=n[a[t]];for(let t=0;t<i.length;t++){if(l){h=!0,o=i[t];break}i[t]._uid!==e||(l=!0)}}}else t.forEachChildren(t=>l?(o=t,!0):(t._uid===e&&(l=!0),!1),r);return o}i.d(e,{Ud:()=>n,kD:()=>r,qA:()=>a})},5575:function(t,e,i){i.d(e,{WD:()=>h,js:()=>o,nV:()=>l});var s=i(1725),r=i(6082),n=i(7623),a=i(9904);function o(t,e){return"end"===t||"right"===t?-e:"center"===t?-e/2:0}function l(t,e,i,s=0){return"middle"===t?-e/2:"top"===t?0:"bottom"===t?s-e:t&&"alphabetic"!==t?0:(i||(i=e),-(e-i)/2-.79*i)}function h(t){let e={},i=t=>/^\d+(\.\d+)?$/.test(`${t}`)?`${t}px`:`${t}`;return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(i=>{t[i]&&(e[(0,s.Z2)(i)]=t[i])}),["fontSize","lineHeight"].forEach(n=>{let a=(0,s.Z2)(n);(0,r.Z)(t[n])||(e[a]=i(t[n]))}),(0,n.Z)(t.maxLineWidth)&&(e["max-width"]=i(t.maxLineWidth)),t.underline?e["text-decoration"]="underline":t.lineThrough&&(e["text-decoration"]="line-through"),t.fill&&(0,a.Z)(t.fill)&&(e.color=t.fill),e}},3386:function(t,e,i){i.d(e,{Dn:()=>u,SA:()=>_,VA:()=>A,dZ:()=>x,dj:()=>p,hT:()=>y,jx:()=>f,q9:()=>v});var s,r,n=i(1036),a=i(7636),o=i(8103),l=i(2683),h=i(9904);(s=r||(r={}))[s.Top=1]="Top",s[s.Right=2]="Right",s[s.Bottom=4]="Bottom",s[s.Left=8]="Left",s[s.ALL=15]="ALL";let d=[!1,!1,!1,!1],u=t=>{var e;let i=!0;if((0,n.Z)(t,!0)){for(let s=0;s<4;s++)d[s]=t,i&&(i=!(null!==(e=d[s])&&void 0!==e&&!e));i=t}else if(Array.isArray(t))for(let e=0;e<4;e++)d[e]=!!t[e],i&&(i=!!d[e]);else d[0]=!1,d[1]=!1,d[2]=!1,d[3]=!1;return{isFullStroke:i,stroke:d}},c=[0,0,0,0],p=t=>t?(0,a.Z)(t)?0===t.length?0:1===t.length?t[0]:2===t.length?(c[0]=t[0],c[2]=t[0],c[1]=t[1],c[3]=t[1],c):t:t:0,g=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],m=[1,2,3,0,1,2,3,0];function f(t,e,i,s){for(;t>=o.f7;)t-=o.f7;for(;t<0;)t+=o.f7;for(;t>e;)e+=o.f7;g[0].x=i,g[1].y=i,g[2].x=-i,g[3].y=-i;let r=Math.ceil(t/o.ou)%4,n=Math.ceil(e/o.ou)%4;if(s.add((0,o.mC)(t)*i,(0,o.O$)(t)*i),s.add((0,o.mC)(e)*i,(0,o.O$)(e)*i),r!==n||e-t>o.pi){let t=!1;for(let e=0;e<m.length;e++)if(t||r!==m[e]){if(t&&n===m[e])break;if(t){let t=g[m[e]];s.add(t.x,t.y)}}else{t=!0;let e=g[r];s.add(e.x,e.y)}}}function v(t,e,i){let{x:s,y:r}=(0,o.KU)(t.x,t.y,e.x,e.y,i),{x:n,y:a}=(0,o.KU)(t.x1,t.y1,e.x1,e.y1,i),h=new l.E9(s,r,n,a);return h.defined=e.defined,h}function _(t,e,i){if(!t||!e)return[];Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);let s=[];if(t.length>e.length){s=e.map(t=>{let e=new l.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let r=0;r<e.length;r++)s[r]=v(t[r],e[r],i)}else{s=e.map(t=>{let e=new l.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let r=0;r<t.length;r++)s[r]=v(t[r],e[r],i)}return s}function y(t,e){if((0,a.Z)(t)){let i;for(let s=0;s<t.length&&void 0===i;s++)i=t[s][e];return i}return t[e]}class b{constructor(t=b.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),t(0)},this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((t,e)=>t+e,0)/this.durations.length,1e3/60),1e3/30)}}b.TimeOut=1e3/60;let x=new b,S=(t,e)=>(0,h.Z)(t)&&"%"===t[t.length-1]?e*(Number.parseFloat(t.substring(0,t.length-1))/100):t,A=(t,e)=>{let i=S(t,e);return isNaN(i)?i:Math.max(e,i)}},3239:function(t,e,i){i.d(e,{D0:()=>s,iR:()=>n,y2:()=>r});let s=Symbol.for("EnvContribution"),r=Symbol.for("VGlobal"),n="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol"},6480:function(t,e,i){let s;i.d(e,{n:()=>m});var r=i(86);let n={Singleton:"Singleton",Transient:"Transient"},a={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class o{constructor(t,e){this.id=r.R.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=a.Invalid,this.constraint=t=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){let t=new o(this.serviceIdentifier,this.scope);return t.activated=t.scope===n.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}var l=i(6040),h=i(2532);class d{getConstructorMetadata(t){return{compilerGeneratedMetadata:h.Z.getMetadata(l.FL,t),userGeneratedMetadata:h.Z.getMetadata(l.LD,t)||{}}}getPropertiesMetadata(t){throw Error("暂未实现")}}var u=i(2230);let c=(s=l.vO,t=>{let e=e=>{if(null==e)return!1;if(e.key===s&&e.value===t)return!0;if(null==e.constructorArgsMetadata)return!1;let i=e.constructorArgsMetadata;for(let e=0;e<i.length;e++)if(i[e].key===s&&i[e].value===t)return!0;return!1};return e.metaData=new u.S(s,t),e});class p{constructor(t){this._binding=t}inRequestScope(){throw Error("暂未实现")}inSingletonScope(){return this._binding.scope=n.Singleton,this}inTransientScope(){return this._binding.scope=n.Transient,this}whenTargetNamed(t){return this._binding.constraint=c(t),this}}class g{constructor(t){this._binding=t}to(t){return this._binding.type=a.Instance,this._binding.implementationType=t,new p(this._binding)}toSelf(){let t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=a.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new p(this._binding)}toConstantValue(t){return this._binding.type=a.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=n.Singleton,new p(this._binding)}toFactory(t){return this._binding.type=a.Factory,this._binding.factory=t,this._binding.scope=n.Singleton,new p(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}}let m=new class{constructor(t){let e=t||{};e.defaultScope=e.defaultScope||n.Transient,this.options=e,this.id=r.R.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new d}load(t){let e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){let e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){let e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,i){let s=this._getNotAllArgs(t,!1,e,i);return this._get(s)}getNamed(t,e){return this.getTagged(t,l.vO,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){let e=new o(t,this.options.defaultScope),i=this._bindingDictionary.get(t)||[];return i.push(e),this._bindingDictionary.set(t,i),new g(e)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){let t=(t,e)=>{t._binding.moduleId=e},e=e=>i=>{let s=this.bind(i);return t(s,e),s},i=()=>t=>this.unbind(t),s=()=>t=>this.isBound(t),r=e=>i=>{let s=this.rebind(i);return t(s,e),s};return t=>({bindFunction:e(t),isboundFunction:s(),rebindFunction:r(t),unbindFunction:i(),unbindAsyncFunction:t=>null})}_getNotAllArgs(t,e,i,s){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:i,value:s}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){let e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(e=>e.constraint(t)).forEach(t=>{e.push(this._resolveFromBinding(t))}),t.isMultiInject||1!==e.length?e:e[0]}_getChildRequest(t){let e=t.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(e),s=Object.keys(i),r=[];for(let t=0;t<s.length;t++){let e=i[t],s={};e.forEach(t=>{s[t.key]=t.value});let n={inject:s[l.B8],multiInject:s[l.Lc]},a=n.inject||n.multiInject,o={serviceIdentifier:a,constructorArgsMetadata:e},h=(this._bindingDictionary.get(a)||[]).filter(t=>t.constraint(o));if(h.length){let t={injectIdentifier:a,metadata:e,bindings:h};r.push(t)}}return r}_resolveFromBinding(t){let e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case a.ConstantValue:case a.Function:e=t.cache;break;case a.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;let i=this._getChildRequest(t);return this._createInstance(e,i)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map(t=>t.bindings.length>1?t.bindings.map(t=>this._resolveFromBinding(t)):this._resolveFromBinding(t.bindings[0]))}_saveToScope(t,e){t.scope===n.Singleton&&(t.cache=e,t.activated=!0)}}},6106:function(t,e,i){i.d(e,{Gp:()=>s,IT:()=>n,XJ:()=>l,kj:()=>a,no:()=>r,ym:()=>o});let s=Symbol.for("TransformUtil"),r=Symbol.for("GraphicUtil"),n=Symbol.for("LayerService"),a=Symbol.for("StaticLayerHandlerContribution"),o=Symbol.for("DynamicLayerHandlerContribution"),l=Symbol.for("VirtualLayerHandlerContribution")},2575:function(t,e,i){i.d(e,{Il:()=>u,Oo:()=>h,zd:()=>d});var s=i(7428),r=i(5859),n=i(86),a=i(6480),o=i(1822),l=i(534);let h=Symbol.for("VWindow"),d=Symbol.for("WindowHandlerContribution"),u=class{get width(){if(this._handler){let t=this._handler.getWH();return this._width=t.width}return this._width}get height(){if(this._handler){let t=this._handler.getWH();return this._height=t.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){this.hooks={onChange:new o.n(["x","y","width","height"])},this.active=()=>{let t=this.global;t.env&&!this.actived&&(a.n.getNamed(d,t.env).configure(this,t),this.actived=!0)},this._uid=n.R.GenAutoIncrementId(),this.global=l.w.global,this.postInit()}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var t;return null!==(t=this._handler.getStyle())&&void 0!==t?t:{}}set style(t){this._handler.setStyle(t)}create(t){var e,i;this._handler.createWindow(t);let s=this._handler.getWH();this._width=s.width,this._height=s.height,t.viewBox?this.setViewBox(t.viewBox):!1!==t.canvasControled?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:null!==(e=t.width)&&void 0!==e?e:this._width,y2:null!==(i=t.height)&&void 0!==i?i:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(t){this._handler=t}setDpr(t){return this._handler.setDpr(t)}resize(t,e){return this._handler.resizeWindow(t,e)}configure(){throw Error("暂不支持")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(t){return this._handler.getImageBuffer?this._handler.getImageBuffer(t):null}addEventListener(t,e,i){return this._handler.addEventListener(t,e,i)}removeEventListener(t,e,i){return this._handler.removeEventListener(t,e,i)}dispatchEvent(t){return this._handler.dispatchEvent(t)}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(t){this._handler.clearViewBox(t)}setViewBox(t){this._handler.setViewBox(t)}setViewBoxTransform(t,e,i,s,r,n){this._handler.setViewBoxTransform(t,e,i,s,r,n)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(t,e){let i=this._handler.getViewBox(),s={x:t,y:e};return this._handler.getViewBoxTransform().transformPoint({x:t,y:e},s),s.x-=i.x1,s.y-=i.y1,s}hasSubView(){let t=this._handler.getViewBox();return!(0===t.x1&&0===t.y1&&(0,r.Yt)(this.width,t.width())&&(0,r.Yt)(this.height,t.height()))}isVisible(t){return this._handler.isVisible(t)}onVisibleChange(t){return this._handler.onVisibleChange(t)}getTopLeft(t){return this._handler.getTopLeft(t)}};u=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],u)},7211:function(t,e,i){let s;i.d(e,{kP:()=>n});var r=i(534);function n(){!function(){if(null==s)try{let t=document.createElement("canvas"),e=t.getContext("2d");(s=!!(window&&t.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&e&&e.isPointInPath&&e.isPointInStroke))&&(s=!!document.createElement)}catch(t){s=!1}}();let t=r.w.global&&r.w.global.env;return t?"browser"===t:s}},5405:function(t,e,i){i.d(e,{g:()=>s});let s="*"},1361:function(t,e,i){i.d(e,{x:()=>r});var s=i(9038);class r{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){let e=this.pickParams.graphic;if(e.stage){let i=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(i),this._composedDetailPath(t.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch(t){this.nativeEvent.preventDefault&&(0,s.Z)(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch(t){this.nativeEvent.stopPropagation&&(0,s.Z)(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw Error("Method not implemented.")}}},3:function(t,e,i){i.d(e,{A:()=>r});var s=i(1361);class r extends s.x{constructor(t,e){super(),this.type=t,this.detail=e}}},5939:function(t,e,i){i.d(e,{m:()=>s});let s="object"==typeof performance&&performance.now?performance:Date},6420:function(t,e,i){i.d(e,{F:()=>s});class s{static registerPlugin(t,e){s._pluginClasses[t]=e}static getPlugin(t){return s._pluginClasses[t]}}s._pluginClasses={}},5102:function(t,e,i){i.d(e,{Q:()=>f,w:()=>m});var s=i(1601),r=i(7636),n=i(1805),a=i(8103),o=i(6502),l=i(8908),h=i(3386),d=i(8535),u=i(534),c=i(1749),p=i(8035);let g=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...o.DH];class m extends o.zs{constructor(t){super(t),this.type="arc",this.numberType=c.r_}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:t,endAngle:e,outerRadius:i,innerRadius:s}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)&&this._validNumber(s)}getParsedCornerRadius(){let t=this.getGraphicTheme(),{cornerRadius:e=t.cornerRadius,innerPadding:i=t.innerPadding,outerPadding:n=t.outerPadding}=this.attribute,{outerRadius:a=t.outerRadius,innerRadius:o=t.innerRadius}=this.attribute;if(a+=n,o-=i,0===e||"0%"===e)return 0;let l=Math.abs(a-o),h=t=>Math.min((0,s.Z)(t,!0)?t:l*parseFloat(t)/100,l/2);if((0,r.Z)(e)){let t=e.map(t=>h(t)||0);return 0===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:(3===t.length&&t.push(0),t)}return h(e)}getParsedAngle(){let t=this.getGraphicTheme(),{startAngle:e=t.startAngle,endAngle:i=t.endAngle}=this.attribute,{cap:s=t.cap}=this.attribute,r=i-e>=0?1:-1,o=i-e;if(i=(e=(0,n.gt)(e))+o,s&&(0,a.Wn)(o)<a.f7-a.Ho){let n=1,o=1;s.length&&(n=Number(s[0]),o=Number(s[1]));let{outerRadius:l=t.outerRadius,innerRadius:h=t.innerRadius}=this.attribute,{outerPadding:d=t.outerPadding,innerPadding:u=t.innerPadding}=this.attribute,c=Math.abs((l+=d)-(h-=u))/2,p=c/l;if(c>a.Ho&&l>a.Ho)return{startAngle:e-r*p*n,endAngle:i+r*p*o,sc:r*p*n,ec:r*p*o}}return{startAngle:e,endAngle:i}}getParsePadAngle(t,e){let i=this.getGraphicTheme(),{innerPadding:s=i.innerPadding,outerPadding:r=i.outerPadding,padAngle:n=i.padAngle}=this.attribute,{outerRadius:o=i.outerRadius,innerRadius:l=i.innerRadius}=this.attribute;o+=r,l-=s;let{padRadius:h=(0,a._b)(o*o+l*l)}=this.attribute,d=(0,a.Wn)(e-t),u=t,c=e,p=t,g=e,m=n/2,f=d,v=d;if(m>a.Ho&&h>a.Ho){let i=e>t?1:-1,s=(0,a.ZR)(Number(h)/l*(0,a.O$)(m)),r=(0,a.ZR)(Number(h)/o*(0,a.O$)(m));return(f-=2*s)>a.Ho?(s*=i,p+=s,g-=s):(f=0,p=g=(t+e)/2),(v-=2*r)>a.Ho?(r*=i,u+=r,c-=r):(v=0,u=c=(t+e)/2),{outerStartAngle:u,outerEndAngle:c,innerStartAngle:p,innerEndAngle:g,innerDeltaAngle:f,outerDeltaAngle:v}}return{outerStartAngle:u,outerEndAngle:c,innerStartAngle:p,innerEndAngle:g,innerDeltaAngle:f,outerDeltaAngle:v}}getGraphicTheme(){return(0,d.gh)(this).arc}updateAABBBounds(t,e,i,s){this.updatePathProxyAABBBounds(i)||(s?this.updateArcAABBBoundsImprecise(t,e,i):this.updateArcAABBBoundsAccurate(t,e,i));let{tb1:r,tb2:n}=u.w.graphicService.updateTempAABBBounds(i);(0,p.E)(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2);let{lineJoin:a=e.lineJoin}=t;return u.w.graphicService.transformAABBBounds(t,i,e,"miter"===a,this),i}updateArcAABBBoundsImprecise(t,e,i){let{outerRadius:s=e.outerRadius,innerRadius:r=e.innerRadius}=t,{outerPadding:n=e.outerPadding,innerPadding:a=e.innerPadding}=t;return(s+=n)<(r-=a)&&(s=r),i.set(-s,-s,s,s),i}updateArcAABBBoundsAccurate(t,e,i){let{outerRadius:s=e.outerRadius,innerRadius:r=e.innerRadius}=t,{outerPadding:n=e.outerPadding,innerPadding:o=e.innerPadding}=t;if((s+=n)<(r-=o)){let t=s;s=r,r=t}let{endAngle:l=e.endAngle,startAngle:d=e.startAngle}=t;if(d>l){let t=d;d=l,l=t}return s<=a.Ho?i.set(0,0,0,0):Math.abs(l-d)>a.f7-a.Ho?i.set(-s,-s,s,s):((0,h.jx)(d,l,s,i),(0,h.jx)(d,l,r,i)),i}needUpdateTags(t){return super.needUpdateTags(t,g)}needUpdateTag(t){return super.needUpdateTag(t,g)}toCustomPath(){var t,e,i,s;let r=this.attribute,{startAngle:n,endAngle:o}=this.getParsedAngle(),h=(null!==(t=r.innerRadius)&&void 0!==t?t:0)-(null!==(e=r.innerPadding)&&void 0!==e?e:0),d=(null!==(i=r.outerRadius)&&void 0!==i?i:0)-(null!==(s=r.outerPadding)&&void 0!==s?s:0),u=(0,a.Wn)(o-n),c=o>n;if(d<h){let t=d;d=h,h=t}let p=new l.r;if(d<=a.Ho)p.moveTo(0,0);else if(u>=a.f7-a.Ho)p.moveTo(0+d*(0,a.mC)(n),0+d*(0,a.O$)(n)),p.arc(0,0,d,n,o,!c),h>a.Ho&&(p.moveTo(0+h*(0,a.mC)(o),0+h*(0,a.O$)(o)),p.arc(0,0,h,o,n,c));else{let t=d*(0,a.mC)(n),e=d*(0,a.O$)(n),i=h*(0,a.mC)(o),s=h*(0,a.O$)(o);p.moveTo(0+t,0+e),p.arc(0,0,d,n,o,!c),p.lineTo(0+i,0+s),p.arc(0,0,h,o,n,c),p.closePath()}return p}clone(){return new m(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return m.NOWORK_ANIMATE_ATTR}}function f(t){return new m(t)}m.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},o.Wl)},4951:function(t,e,i){i.d(e,{n:()=>u});var s=i(6502),r=i(8908),n=i(3386),a=i(8535),o=i(534),l=i(1749);let h=["segments","points","curveType","curveTension",...s.DH];class d extends s.zs{constructor(t){super(t),this.type="area",this.numberType=l.Ri}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&0!==t.length}getGraphicTheme(){return(0,a.gh)(this).area}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateAreaAABBBoundsBySegments(t,e,i):this.updateAreaAABBBoundsByPoints(t,e,i)),o.w.graphicService.updateTempAABBBounds(i);let{lineJoin:s=e.lineJoin}=t;return o.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}updateAreaAABBBoundsByPoints(t,e,i,s){let{points:r=e.points}=t;return r.forEach(t=>{var e,s;i.add(t.x,t.y),i.add(null!==(e=t.x1)&&void 0!==e?e:t.x,null!==(s=t.y1)&&void 0!==s?s:t.y)}),i}updateAreaAABBBoundsBySegments(t,e,i,s){let{segments:r=e.segments}=t;return r.forEach(t=>{t.points.forEach(t=>{var e,s;i.add(t.x,t.y),i.add(null!==(e=t.x1)&&void 0!==e?e:t.x,null!==(s=t.y1)&&void 0!==s?s:t.y)})}),i}_interpolate(t,e,i,s,r){"points"===t&&(r.points=(0,n.SA)(i,s,e))}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=new r.r,e=this.attribute,i=e.segments,s=e=>{if(e&&e.length){let i=!0,s=[];if(e.forEach(e=>{var r,n;!1!==e.defined&&(i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y),s.push({x:null!==(r=e.x1)&&void 0!==r?r:e.x,y:null!==(n=e.y1)&&void 0!==n?n:e.y}),i=!1)}),s.length){for(let e=s.length-1;e>=0;e--)t.lineTo(s[e].x,s[e].y);t.closePath()}}};return e.points?s(e.points):i&&i.length&&i.forEach(t=>{s(t.points)}),t}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function u(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},s.Wl)},1207:function(t,e,i){let s;i.d(e,{o:()=>n});var r=i(7578);function n(t){return s||(s=r.i.CreateGraphic("text",{})),s.initAttributes(t),s.AABBBounds}},9607:function(t,e,i){i.d(e,{F1:()=>l,Iq:()=>C,J7:()=>S,T5:()=>T,Up:()=>f,WC:()=>u,YW:()=>E,ZD:()=>A,bZ:()=>y,e9:()=>b,eh:()=>v,h8:()=>x,jK:()=>M,kx:()=>k,pp:()=>h,q9:()=>c,t8:()=>_,th:()=>w,xF:()=>m});var s=i(9935),r=i(8103),n=i(4659),a=i(8908),o=i(2008);let l={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new s.y},h={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},d={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},u=Object.assign({outerBorder:Object.assign(Object.assign({},d),{distance:0}),innerBorder:Object.assign(Object.assign({},d),{distance:0})},d),c={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",fontWeight:"",ellipsis:"…",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:o.r.fontBounding,keepCenterInLine:!1},p=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null},h),u),{alignSelf:"auto"}),{pickStrokeBuffer:0}),g={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},m=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null},{_debug_bounds:!1}),p),l),f=Object.assign(Object.assign({},m),{startAngle:0,endAngle:r.f7,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),v=Object.assign(Object.assign(Object.assign({},m),g),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),_=Object.assign(Object.assign({},m),{radius:1,startAngle:0,endAngle:r.f7}),y=Object.assign(Object.assign({},m),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),b=Object.assign(Object.assign({},m),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),x=Object.assign(Object.assign(Object.assign({},m),g),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),S=Object.assign(Object.assign({},m),{path:new a.r,fillStrokeOrder:1,clipRange:1,customPath:()=>{n.Y.getInstance().warn("空函数")}}),A=Object.assign(Object.assign({},m),{points:[],cornerRadius:0,closePath:!0}),k=Object.assign(Object.assign({},m),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round"});Object.assign(Object.assign({},m),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round"});let w=Object.assign(Object.assign({},m),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),T=Object.assign(Object.assign(Object.assign({},m),c),{strokeBoundsBuffer:0,keepDirIn3d:!0}),C=Object.assign(Object.assign(Object.assign({},m),c),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),M=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},m),{fill:!0,cornerRadius:0,cornerType:"round"}),E=Object.assign(Object.assign({},M),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1})},1749:function(t,e,i){i.d(e,{$M:()=>f,B5:()=>v,Hf:()=>d,IJ:()=>n,IO:()=>x,I_:()=>l,Kh:()=>c,Lo:()=>S,Nd:()=>o,PN:()=>h,Ri:()=>a,Us:()=>_,ZV:()=>m,_u:()=>g,fB:()=>y,jp:()=>p,qm:()=>u,r_:()=>r,tA:()=>b});var s=i(8909);let r=(0,s.Gg)(),n=(0,s.Gg)(),a=(0,s.Gg)();(0,s.Gg)();let o=(0,s.Gg)(),l=(0,s.Gg)(),h=(0,s.Gg)(),d=(0,s.Gg)(),u=(0,s.Gg)(),c=(0,s.Gg)(),p=(0,s.Gg)(),g=(0,s.Gg)(),m=(0,s.Gg)(),f=(0,s.Gg)(),v=(0,s.Gg)(),_=(0,s.Gg)(),y=Symbol.for("GraphicService"),b=Symbol.for("GraphicCreator"),x={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},S=Object.keys(x)},7578:function(t,e,i){i.d(e,{i:()=>s});let s=new class{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){let i=this.store.get(t);return i?i(e):null}}},8035:function(t,e,i){i.d(e,{E:()=>s});let s=(t,e,i)=>{let{outerBorder:s,shadowBlur:r=e.shadowBlur}=t;if(s){let t=e.outerBorder,{distance:n=t.distance,lineWidth:a=t.lineWidth}=s;i.expand(n+(r+a)/2)}return i}},5977:function(t,e,i){i.d(e,{JG:()=>y,M_:()=>_,RT:()=>v});var s,r=i(7428),n=i(1600),a=i(7393),o=i(1601),l=i(1822),h=i(5575),d=i(8909),u=i(8113),c=i(4286),p=i(5399),g=i(1749),m=i(7317),f=i(534);function v(t,e,i){var s;let{x:r=i.x,y:n=i.y,z:a=i.z,dx:o=i.dx,dy:l=i.dy,dz:h=i.dz,scaleX:d=i.scaleX,scaleY:c=i.scaleY,scaleZ:p=i.scaleZ,alpha:g=i.alpha,beta:f=i.beta,angle:v=i.angle,anchor3d:_=e.attribute.anchor,anchor:y}=e.attribute,b=[0,0,0];if(_){if("string"==typeof _[0]){let t=parseFloat(_[0])/100,i=e.AABBBounds;b[0]=i.x1+(i.x2-i.x1)*t}else b[0]=_[0];if("string"==typeof _[1]){let t=parseFloat(_[1])/100,i=e.AABBBounds;b[1]=i.x1+(i.x2-i.x1)*t}else b[1]=_[1];b[2]=null!==(s=_[2])&&void 0!==s?s:0}if((0,m.TL)(t),(0,m.Iu)(t,t,[r+o,n+l,a+h]),(0,m.Iu)(t,t,[b[0],b[1],b[2]]),(0,m.lM)(t,t,f),(0,m.uD)(t,t,g),(0,m.Iu)(t,t,[-b[0],-b[1],b[2]]),(0,m.mN)(t,t,[d,c,p]),v){let i=u.yp.allocate(),s=[0,0];if(y){if("string"==typeof _[0]){let t=parseFloat(_[0])/100,i=e.AABBBounds;s[0]=i.x1+(i.x2-i.x1)*t}else s[0]=_[0];if("string"==typeof _[1]){let t=parseFloat(_[1])/100,i=e.AABBBounds;s[1]=i.x1+(i.x2-i.x1)*t}else s[1]=_[1]}(0,m.Iu)(i,i,[s[0],s[1],0]),(0,m.jI)(i,i,v),(0,m.Iu)(i,i,[-s[0],-s[1],0]),(0,m.G9)(t,t,i)}}function _(t){let{alpha:e,beta:i}=t.attribute;return e||i}let y=class{constructor(t){this.creator=t,this.hooks={onAttributeUpdate:new l.n(["graphic"]),onSetStage:new l.n(["graphic","stage"]),onRemove:new l.n(["graphic"]),onRelease:new l.n(["graphic"]),onAddIncremental:new l.n(["graphic","group","stage"]),onClearIncremental:new l.n(["graphic","group","stage"]),beforeUpdateAABBBounds:new l.n(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new l.n(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new l.n(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new a.FB,this.tempAABBBounds2=new a.FB}onAttributeUpdate(t){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(t)}onSetStage(t,e){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(t,e)}onRemove(t){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(t)}onRelease(t){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(t)}onAddIncremental(t,e,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(t,e,i)}onClearIncremental(t,e){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(t,e)}beforeUpdateAABBBounds(t,e,i,s){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(t,e,i,s)}afterUpdateAABBBounds(t,e,i,s,r){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(t,e,i,s,r)}clearAABBBounds(t,e,i){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(t,e,i)}updatePathProxyAABBBounds(t,e){let i="function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy;if(!i)return!1;let s=new c.C(t);return(0,p.h)(i.commandList,s,0,0),!0}updateHTMLTextAABBBounds(t,e,i,s){let{textAlign:r,textBaseline:n}=t;if(null!=t.forceBoundsHeight){let e=(0,o.Z)(t.forceBoundsHeight)?t.forceBoundsHeight:t.forceBoundsHeight(),s=(0,h.nV)(n,e,e);i.set(i.x1,s,i.x2,s+e)}if(null!=t.forceBoundsWidth){let e=(0,o.Z)(t.forceBoundsWidth)?t.forceBoundsWidth:t.forceBoundsWidth(),s=(0,h.js)(r,e);i.set(s,i.y1,s+e,i.y2)}}combindShadowAABBBounds(t,e){if(e&&e.shadowRoot){let i=e.shadowRoot.AABBBounds;t.union(i)}}transformAABBBounds(t,e,i,s,r){if(!e.empty()){let{scaleX:r=i.scaleX,scaleY:n=i.scaleY,stroke:a=i.stroke,shadowBlur:o=i.shadowBlur,lineWidth:l=i.lineWidth,pickStrokeBuffer:h=i.pickStrokeBuffer,strokeBoundsBuffer:u=i.strokeBoundsBuffer}=t,c=this.tempAABBBounds1,p=this.tempAABBBounds2;if(a&&l){let t=(l+h)/Math.abs(r+n);(0,d.ph)(c,t,s,u),e.union(c),c.setValue(p.x1,p.y1,p.x2,p.y2)}if(o){let{shadowOffsetX:s=i.shadowOffsetX,shadowOffsetY:a=i.shadowOffsetY}=t,l=o/Math.abs(r+n)*2;(0,d.ph)(c,l,!1,u+1),c.translate(s,a),e.union(c)}}if(this.combindShadowAABBBounds(e,r),e.empty())return;let n=!0,o=r.transMatrix;r&&r.isContainer&&(n=!(1===o.a&&0===o.b&&0===o.c&&1===o.d&&0===o.e&&0===o.f)),n&&(0,a.n2)(e,e,o)}validCheck(t,e,i,s){if(!s||null!=t.forceBoundsHeight||null!=t.forceBoundsWidth||s.shadowRoot||s.isContainer)return!0;let{visible:r=e.visible}=t;return!(!s.valid||!r)||(i.empty()||(s.parent&&i.transformWithMatrix(s.parent.globalTransMatrix),f.w.graphicService.clearAABBBounds(s,s.stage,i),i.clear()),!1)}updateTempAABBBounds(t){let e=this.tempAABBBounds1,i=this.tempAABBBounds2;return e.setValue(t.x1,t.y1,t.x2,t.y2),i.setValue(t.x1,t.y1,t.x2,t.y2),{tb1:e,tb2:i}}};y=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),(s=(0,n.f)(g.tA),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],y)},6502:function(t,e,i){i.d(e,{zs:()=>t2,DH:()=>tK,Wl:()=>t1});var s=i(7393),r=i(7636),n=i(8103),a=i(9935),o=i(2683),l=i(6082),h=i(306),d=i(9904);let u=t=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(t),c=t=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(t);var p=i(4154),g=i(1312),m=i.n(g),f=i(4659),v=i(1036),_=i(9038),y=i(86);class b extends m(){get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=y.R.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let e=this._lastChild,i=0;for(;e;){if(t(e,i++))return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){if(t(e,i++))return;e=e._next}}}forEachChildrenAsync(t,e=!1){var i,s,r,n;return i=this,s=void 0,r=void 0,n=function*(){if(e){let e=this._lastChild,i=0;for(;e;){let s=t(e,i++);if(s.then&&(s=yield s),s)return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){let s=t(e,i++);if(s.then&&(s=yield s),s)return;e=e._next}}},new(r||(r=Promise))(function(t,e){function a(t){try{l(n.next(t))}catch(t){e(t)}}function o(t){try{l(n.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof r?i:new r(function(t){t(i)})).then(a,o)}l((n=n.apply(i,s||[])).next())})}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw Error("【Node::appendChild】不能将父辈元素append为子元素");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return console.error("暂不支持该函数"),t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertBefore】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertAfter】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&f.Y.getInstance().warn("insertIntoKeepIdx和insertInto混用可能会存在错误"),e>=this.childrenCount)return this.appendChild(t);if(this===t)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertBefore】不能将父辈元素insert为子元素");if(t.parent&&t.parent.removeChild(t),t.parent=this,0===e)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let i=this._firstChild;for(let t=0;t<e;t++){if(!i)return null;t>0&&(i=i._next)}if(!i)return null;t._next=i._next,t._prev=i,i._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){let i;if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){let i=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,i)}this._nodeList[e]=t;for(let t=e-1;t>=0&&!(i=this._nodeList[t]);t--);if(i)return i._next?this.insertBefore(t,i._next):this.appendChild(t);this._ignoreWarn=!0;let s=this.insertInto(t,0);return this._ignoreWarn=!1,s}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){let e=this._nodeList.findIndex(e=>e===t);e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){let t=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=t}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw Error("暂不支持")}find(t,e=!1){let i=null;return this.forEachChildren((e,s)=>!(e===this||!t(e,s))&&(i=e,!0)),e&&this.forEachChildren(e=>{if(e.isContainer){let s=e.find(t,!0);if(s)return i=s,!0}return!1}),i}findAll(t,e=!1){let i=[];return this.forEachChildren((e,s)=>{e!==this&&t(e,s)&&i.push(e)}),e&&this.forEachChildren(e=>{if(e.isContainer){let s=e.findAll(t,!0);s.length&&(i=i.concat(s))}}),i}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(e=>e.name===t,e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<t;i++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;null==t?void 0:t.parent;)t=t.parent;return t||this}hasChildNodes(){return null!==this._firstChild}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){let t=[],e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(null!==e);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw Error("暂不支持")}setAllDescendantsProps(t,e){let i=this._firstChild;for(;i;)i[t]=e,i.setAllDescendantsProps(t,e),i=i._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(null!==e)}clone(){throw Error("暂不支持")}cloneTo(t){throw Error("暂不支持")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,i){let s=(0,v.Z)(i,!0)&&i||(0,p.Z)(i)&&i.capture,r=(0,p.Z)(i)&&i.once,n=(0,_.Z)(e)?void 0:e;return t=s?`${t}capture`:t,e=(0,_.Z)(e)?e:e.handleEvent,r?super.once(t,e,n):super.on(t,e,n),this}on(t,e,i){return this.addEventListener(t,e,i)}removeEventListener(t,e,i){let s=(0,v.Z)(i,!0)&&i||(0,p.Z)(i)&&i.capture,r=(0,_.Z)(e)?void 0:e;t=s?`${t}capture`:t,e=(0,_.Z)(e)?e:e.handleEvent;let n=(0,p.Z)(i)&&i.once;return super.off(t,e,r,n),this}off(t,e,i){return this.removeEventListener(t,e,i)}once(t,e,i){return(0,p.Z)(i)?(i.once=!0,this.addEventListener(t,e,i)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}}var x=i(3),S=i(1361),A=i(9607),k=i(534),w=i(3118);let T={duration:200,easing:"cubicOut"};var C=i(3419),M=i(1087),E=i(8908),B=i(9156),O=i(3872),I=i(4286),R=i(5399),P=i(3386),L=i(1601);class D{bounds(t,e){if((0,L.Z)(t)){let i=t/2;e.x1=-i,e.x2=i,e.y1=-i,e.y2=i}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}parseSize(t){return(0,L.Z)(t)?t:Math.min(t[0],t[1])}}function Z(t,e,i,s,r){return r?t.arc(i,s,e,0,n.BZ,!1,r):t.arc(i,s,e,0,n.BZ),!1}let F=new class extends D{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,i,s,r){return Z(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return Z(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e-r}, ${i} a ${r},${r} 0 1,0 ${2*r},0 a ${r},${r} 0 1,0 -${2*r},0`}},j=new class extends D{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,i,s,r){var n;return n=this.parseSize(e)/6,t.moveTo(-3*n+i,-n+s,r),t.lineTo(-n+i,-n+s,r),t.lineTo(-n+i,-3*n+s,r),t.lineTo(n+i,-3*n+s,r),t.lineTo(n+i,-n+s,r),t.lineTo(3*n+i,-n+s,r),t.lineTo(3*n+i,n+s,r),t.lineTo(n+i,n+s,r),t.lineTo(n+i,3*n+s,r),t.lineTo(-n+i,3*n+s,r),t.lineTo(-n+i,n+s,r),t.lineTo(-3*n+i,n+s,r),t.closePath(),!0}drawOffset(t,e,i,s,r,n){var a;return a=this.parseSize(e)/6,t.moveTo(-3*a+i-r,-a+s-r,n),t.lineTo(-a+i-r,-a+s-r,n),t.lineTo(-a+i-r,-3*a+s-r,n),t.lineTo(a+i+r,-3*a+s-r,n),t.lineTo(a+i+r,-a+s-r,n),t.lineTo(3*a+i+r,-a+s-r,n),t.lineTo(3*a+i+r,a+s+r,n),t.lineTo(a+i+r,a+s+r,n),t.lineTo(a+i+r,3*a+s+r,n),t.lineTo(-a+i-r,3*a+s+r,n),t.lineTo(-a+i-r,a+s+r,n),t.lineTo(-3*a+i-r,a+s+r,n),t.closePath(),!0}};function H(t,e,i,s,r){return t.moveTo(i,s-e,r),t.lineTo(e+i,s,r),t.lineTo(i,s+e,r),t.lineTo(i-e,s,r),t.closePath(),!0}let z=new class extends D{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,i,s,r){return H(t,this.parseSize(e)/2,i,s,r)}drawFitDir(t,e,i,s,r){return H(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return H(t,this.parseSize(e)/2+r,i,s,n)}};function N(t,e,i,s){let r=2*e;return t.rect(i-e,s-e,r,r),!1}let V=new class extends D{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,i,s){return N(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return N(t,this.parseSize(e)/2+r,i,s)}};function U(t,e,i,s,r=0){return t.moveTo(i+e+2*r,e+s+r),t.lineTo(i-e-2*r,e+s+r),t.lineTo(i,s-e-2*r),t.closePath(),!0}class G extends D{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,i,s){return U(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return U(t,this.parseSize(e)/2,i,s,r)}}let W=new G,X=new class extends G{constructor(){super(...arguments),this.type="triangle"}},Y=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),$=Math.sin(n.BZ/10)*Y,K=-Math.cos(n.BZ/10)*Y;function q(t,e,i,s){let r=$*e,a=K*e;t.moveTo(i,-e+s),t.lineTo(r+i,a+s);for(let o=1;o<5;++o){let l=n.BZ*o/5,h=Math.cos(l),d=Math.sin(l);t.lineTo(d*e+i,-h*e+s),t.lineTo(h*r-d*a+i,d*r+h*a+s)}return t.closePath(),!0}let J=new class extends D{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,i,s){return q(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return q(t,this.parseSize(e)/2+r,i,s)}},Q=(0,n._b)(3);function tt(t,e,i,s){let r=e/Q,n=r/5;return t.moveTo(0+i,-e+s),t.lineTo(r/2+i,s),t.lineTo(n/2+i,s),t.lineTo(n/2+i,e+s),t.lineTo(-n/2+i,e+s),t.lineTo(-n/2+i,s),t.lineTo(-r/2+i,s),t.closePath(),!0}let te=new class extends D{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,i,s){return tt(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return tt(t,this.parseSize(e)/2+r,i,s)}};function ti(t,e,i,s){let r=2*e;return t.moveTo(i,-e+s),t.lineTo(r/3/2+i,e+s),t.lineTo(-r/3/2+i,e+s),t.closePath(),!0}let ts=new class extends D{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,i,s){return ti(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return ti(t,this.parseSize(e)/2+r,i,s)}};function tr(t,e,i,s){return t.moveTo(-e+i,s),t.lineTo(i,e+s),!1}let tn=new class extends D{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,i,s){return tr(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return tr(t,this.parseSize(e)/2+r,i,s)}},ta=(0,n._b)(3)/2,to=1/(0,n._b)(12);function tl(t,e,i,s){let r=e/2,n=e*to,a=e*to+e,o=-r;return t.moveTo(r+i,n+s),t.lineTo(r+i,a+s),t.lineTo(o+i,a+s),t.lineTo(-.5*r-ta*n+i,ta*r+-.5*n+s),t.lineTo(-.5*r-ta*a+i,ta*r+-.5*a+s),t.lineTo(-.5*o-ta*a+i,ta*o+-.5*a+s),t.lineTo(-.5*r+ta*n+i,-.5*n-ta*r+s),t.lineTo(-.5*r+ta*a+i,-.5*a-ta*r+s),t.lineTo(-.5*o+ta*a+i,-.5*a-ta*o+s),t.closePath(),!1}let th=new class extends D{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,i,s){return tl(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return tl(t,this.parseSize(e)/2+r,i,s)}};function td(t,e,i,s,r){return t.moveTo(-e+i-2*r,s),t.lineTo(e+i+r,e+s+2*r),t.lineTo(e+i+r,s-e-2*r),t.closePath(),!0}let tu=new class extends D{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,i,s){return td(t,this.parseSize(e)/2,i,s,0)}drawOffset(t,e,i,s,r){return td(t,this.parseSize(e)/2,i,s,r)}};function tc(t,e,i,s,r=0){return t.moveTo(i-e-r,e+s+2*r),t.lineTo(e+i+2*r,s),t.lineTo(i-e-r,s-e-2*r),t.closePath(),!0}let tp=new class extends D{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,i,s){return tc(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return tc(t,this.parseSize(e)/2,i,s,r)}};function tg(t,e,i,s,r=0){return t.moveTo(i-e-2*r,s-e-r),t.lineTo(i+e+2*r,s-e-r),t.lineTo(i,s+e+2*r),t.closePath(),!0}let tm=new class extends D{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,i,s){return tg(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return tg(t,this.parseSize(e)/2,i,s,r)}},tf=(0,n._b)(3);function tv(t,e,i,s){let r=e*tf;return t.moveTo(i,s+-r/3*2),t.lineTo(e+i,s+r),t.lineTo(i-e,s+r),t.closePath(),!0}let t_=new class extends D{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,i,s){return tv(t,this.parseSize(e)/2/tf,i,s)}drawOffset(t,e,i,s,r){return tv(t,this.parseSize(e)/2/tf+r,i,s)}};function ty(t,e,i,s){let r=2*e;return t.moveTo(e+i,s-r),t.lineTo(i-e,s),t.lineTo(e+i,r+s),!0}let tb=new class extends D{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,i,s){return ty(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return ty(t,this.parseSize(e)/4+r,i,s)}};function tx(t,e,i,s){let r=2*e;return t.moveTo(i-e,s-r),t.lineTo(i+e,s),t.lineTo(i-e,r+s),!0}let tS=new class extends D{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,i,s){return tx(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return tx(t,this.parseSize(e)/4+r,i,s)}};function tA(t,e,i,s){let r=2*e;return t.moveTo(i-r,s+e),t.lineTo(i,s-e),t.lineTo(i+r,s+e),!0}let tk=new class extends D{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,i,s){return tA(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return tA(t,this.parseSize(e)/4+r,i,s)}};function tw(t,e,i,s){let r=2*e;return t.moveTo(i-r,s-e),t.lineTo(i,s+e),t.lineTo(i+r,s-e),!0}let tT=new class extends D{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,i,s){return tw(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return tw(t,this.parseSize(e)/4+r,i,s)}};function tC(t,e,i,s,r){return t.moveTo(i,s-e),t.lineTo(i,s+e),!0}let tM=new class extends D{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,i,s,r){return tC(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return tC(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e}, ${i-r} L ${e},${i+r}`}};function tE(t,e,i,s,r){return t.moveTo(i-e,s),t.lineTo(i+e,s),!0}let tB=new class extends D{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,i,s,r){return tE(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return tE(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e-r}, ${i} L ${e+r},${i}`}};function tO(t,e,i,s,r){return t.moveTo(i-e,s-e),t.lineTo(i+e,s+e),t.moveTo(i+e,s-e),t.lineTo(i-e,s+e),!0}let tI=new class extends D{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,i,s,r){return tO(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return tO(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e-r}, ${i-r} L ${e+r},${i+r} M ${e+r}, ${i-r} L ${e-r},${i+r}`}};function tR(t,e,i,s){return t.rect(i-e[0]/2,s-e[1]/2,e[0],e[1]),!1}function tP(t,e,i,s){let r=e/2;return t.rect(i-e/2,s-r/2,e,r),!1}let tL=new class extends D{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,i,s){return(0,L.Z)(e)?tP(t,e,i,s):tR(t,e,i,s)}drawWithClipRange(t,e,i,s,r,n,a){(0,L.Z)(e)&&(e=[e,e/2]);let o=2*(e[0]+e[1])*r,l=[{x:i+e[0]/2,y:s-e[1]/2},{x:i+e[0]/2,y:s+e[1]/2},{x:i-e[0]/2,y:s+e[1]/2},{x:i-e[0]/2,y:s-e[1]/2}],h=0,d=l[3];t.moveTo(d.x,d.y);for(let e=0;e<l.length;e++){let i=l[e],s=Math.sqrt((i.x-d.x)*(i.x-d.x)+(i.y-d.y)*(i.y-d.y));if(h+s>o){let e=(i.x-d.x)*(o-h)/s,r=(i.y-d.y)*(o-h)/s;t.lineTo(d.x+e,d.y+r);break}t.lineTo(i.x,i.y),d=i,h+=s}return!1}drawOffset(t,e,i,s,r){return(0,L.Z)(e)?tP(t,e+2*r,i,s):tR(t,[e[0]+2*r,e[1]+2*r],i,s)}},tD={};[F,j,z,V,t_,X,J,te,ts,tn,th,tu,tp,W,tm,tb,tS,tk,tT,tL,tM,tB,tI].forEach(t=>{tD[t.type]=t});let tZ={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},tF=new s.FB;class tj{constructor(t,e,i=!1){this.pathStr="",this.type=t,(0,r.Z)(e)?this.svgCache=e:this.path=e,this.isSvg=i}drawOffset(t,e,i,s,r,n,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(r=>{t.beginPath(),(0,R.h)(r.path.commandList,t,i,s,e,e),a&&a(r.path,r.attribute)}),!1):((0,R.h)(this.path.commandList,t,i,s,e+r,e+r),!1)}draw(t,e,i,s,r,n){return e=this.parseSize(e),this.drawOffset(t,e,i,s,0,r,n)}parseSize(t){return(0,L.Z)(t)?t:Math.min(t[0],t[1])}drawWithClipRange(t,e,i,s,r,n,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(n=>{n.path.drawWithClipRange(t,e,i,s,r),a&&a(n.path,n.attribute)}),!1):(this.path.drawWithClipRange(t,e,i,s,r),!1)}bounds(t,e){if(t=this.parseSize(t),this.isSvg){if(!this.svgCache)return;return e.clear(),void this.svgCache.forEach(({path:i})=>{tF.x1=i.bounds.x1*t,tF.y1=i.bounds.y1*t,tF.x2=i.bounds.x2*t,tF.y2=i.bounds.y2*t,e.union(tF)})}this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}class tH{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function tz(t,e,i,s){let r=t.indexOf(e,i);if(-1===r)throw Error(s);return r+e.length-1}function tN(t,e,i,s=">"){let r=function(t,e,i=">"){let s,r="";for(let n=e;n<t.length;n++){let e=t[n];if(s)e===s&&(s="");else if('"'===e||"'"===e)s=e;else if(e===i[0]){if(!i[1]||t[n+1]===i[1])return{data:r,index:n}}else"	"===e&&(e=" ");r+=e}}(t,e+1,s);if(!r)return;let n=r.data,a=r.index,o=n.search(/\s/),l=n,h=!0;-1!==o&&(l=n.substr(0,o).replace(/\s\s*$/,""),n=n.substr(o+1));let d=l;if(i){let t=l.indexOf(":");-1!==t&&(h=(l=l.substr(t+1))!==r.data.substr(t+1))}return{tagName:l,tagExp:n,closeIndex:a,attrExpPresent:h,rawTagName:d}}let tV=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");class tU{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,i){let s=e.tagname;"string"==typeof s&&(e.tagname=s),t.addChild(e)}buildAttributesMap(t,e,i){let s={};if(!t)return;let r=function(t,e){let i=[],s=e.exec(t);for(;s;){let r=[];r.startIndex=e.lastIndex-s[0].length;let n=s.length;for(let t=0;t<n;t++)r.push(s[t]);i.push(r),s=e.exec(t)}return i}(t,tV),n=r.length;for(let t=0;t<n;t++){let e=r[t][1],i=r[t][4];e&&(s[e]=void 0===i||(isNaN(i)?i:Number(i)))}return s}parseXml(t){t=t.replace(/\r\n?/g,"\n");let e=new tH("!xml"),i=e,s="",r="";for(let n=0;n<t.length;n++)if("<"===t[n]){if("/"===t[n+1]){let e=tz(t,">",n,"Closing Tag is not closed."),a=r.lastIndexOf(".");r=r.substring(0,a),(i=this.tagsNodeStack.pop())&&i.child&&s&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=s),s="",n=e}else if("?"===t[n+1])n=tN(t,n,!1,"?>").closeIndex+1;else if("!--"===t.substr(n+1,3))n=tz(t,"--\x3e",n+4,"Comment is not closed.");else{let a=tN(t,n,!1),o=a.tagName,l=a.tagExp,h=a.attrExpPresent,d=a.closeIndex;if(o!==e.tagname&&(r+=r?"."+o:o),l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===o[o.length-1]?(o=o.substr(0,o.length-1),r=r.substr(0,r.length-1),l=o):l=l.substr(0,l.length-1);let t=new tH(o);o!==l&&h&&(t[":@"]=this.buildAttributesMap(l,r,o)),this.addChild(i,t,r),r=r.substr(0,r.lastIndexOf("."))}else{let t=new tH(o);this.tagsNodeStack.push(i),o!==l&&h&&(t[":@"]=this.buildAttributesMap(l,r,o)),this.addChild(i,t,r),i=t}s="",n=d}}else s+=t[n];return e.child}}class tG{constructor(t){this.options=Object.assign({},tG.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){var e,i;return!!this.valid&&(e=new tU(this.options).parseXml(t),this.options,function t(e,i){let s={};for(let r=0;r<e.length;r++){let n=e[r],a=function(t){let e=Object.keys(t);for(let t=0;t<e.length;t++){let i=e[t];if(":@"!==i)return i}}(n),o="";if(o=void 0===i?a:i+"."+a,void 0!==a&&n[a]){let e=t(n[a],o);Object.keys(e).length,n[":@"]&&function(t,e,i){if(e){let i=Object.keys(e),s=i.length;for(let r=0;r<s;r++){let s=i[r];t[s]=e[s]}}}(e,n[":@"],0),void 0!==s[a]&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(e)):s[a]=e}}return s}(e))}}tG.defaultOptions={};var tW=i(1749);let tX=new s.FB,tY=new a.y,t$=new s.FB,tK=["lineWidth","scaleX","scaleY","angle","anchor","visible"],tq=["x","y"],tJ=["scaleX","scaleY"],tQ=["angle"],t0=new o.E9,t1={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class t2 extends b{static mixin(t){let e=Object.keys(t);for(let i=0;i<e.length;++i){let s=e[i];Object.defineProperty(t2.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new s.FB,this._updateTag=O.Gz.INIT,this.attribute=t,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,t.background?this.loadImage(null!==(e=t.background.background)&&void 0!==e?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var i,s;let{dx:r=t.dx,dy:n=t.dy}=this.attribute;if(e&&this.parent){let t=this.parent.attribute;t0.x=r+(null!==(i=t.scrollX)&&void 0!==i?i:0),t0.y=n+(null!==(s=t.scrollY)&&void 0!==s?s:0)}else t0.x=r,t0.y=n;return t0}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(){let t="imprecise"===this.attribute.boundsMode;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;k.w.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let e=this.doUpdateAABBBounds(t);return k.w.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),"empty"===this.attribute.boundsMode&&e.clear(),e}tryUpdateOBBBounds(){return(this._OBBBounds||(this._OBBBounds=new s.a5),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp)?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid)?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds)}combindShadowAABBBounds(t){if(this.shadowRoot){let e=this.shadowRoot.AABBBounds.clone();t.union(e)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){let{clipConfig:t}=this.attribute;if(!t)return null;this.clipPathMap||(this.clipPathMap=new Map);let{shape:e}=t,i=this.clipPathMap.get(e)||null;return i||(this.clipPathMap.size>10&&this.clipPathMap.clear(),(i=this.parsePath(e))&&this.clipPathMap.set(e,i)),i}parsePath(t){var e;if(!t)return null;let i=tD[t];if(i||(i=t2.userSymbolMap[t]))return i;if(!0===((e=t=tZ[t]||t).startsWith("<svg")||e.startsWith("<?xml"))){let{svg:e}=(new tG).parse(t);if(!e)return null;let i=(0,r.Z)(e.path)?e.path:[e.path];tX.clear();let s=[];i.forEach(t=>{let e=(new E.r).fromString(t.d),i={};tW.Lo.forEach(e=>{t[e]&&(i[tW.IO[e]]=t[e])}),s.push({path:e,attribute:i}),tX.union(e.bounds)});let a=tX.width(),o=tX.height(),l=1/(0,n.Fp)(a,o);s.forEach(t=>t.path.transform(0,0,l,l));let h=new tj(t,s,!0);return t2.userSymbolMap[t]=h,h}let s=(new E.r).fromString(t),a=s.bounds.width(),o=s.bounds.height(),l=1/(0,n.Fp)(a,o);s.transform(0,0,l,l);let h=new tj(t,s);return t2.userSymbolMap[t]=h,h}doUpdateAABBBounds(t){this.updateAABBBoundsStamp++;let e=this.getGraphicTheme();this._AABBBounds.clear();let i=this.attribute,s=this.updateAABBBounds(i,e,this._AABBBounds,t),{boundsPadding:r=e.boundsPadding}=i,n=(0,P.dj)(r);return n&&s.expand(n),this.clearUpdateBoundTag(),s}updatePathProxyAABBBounds(t){let e="function"==typeof this.pathProxy?this.pathProxy(this.attribute):this.pathProxy;if(!e)return!1;let i=new I.C(t);return(0,R.h)(e.commandList,i,0,0),!0}tryUpdateGlobalAABBBounds(){let t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new a.y),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&O.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&k.w.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&O.Gz.UPDATE_BOUNDS)&&k.w.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&O.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&O.Gz.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&O.Gz.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;let i=this.attribute;return Number.isFinite((null!==(t=i.x)&&void 0!==t?t:0)+(null!==(e=i.y)&&void 0!==e?e:0))}_validNumber(t){return null==t||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&O.Gz.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=O.Gz.CLEAR_SHAPE}containsPoint(t,e,i,s){if(!s)return!1;if(i===O.LZ.GLOBAL){let i=new o.E9(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),t=i.x,e=i.y}return s.containsPoint(this,{x:t,y:e})}setAttributes(t,e=!1,i){(t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,i)}_setAttributes(t,e=!1,i){let s=Object.keys(t);for(let e=0;e<s.length;e++){let i=s[e];this.attribute[i]=t[i]}this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(s))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(t,e,i,s){var r;let n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,s);n?this._setAttributes(n,i,s):(0,l.Z)(null===(r=this.normalAttrs)||void 0===r?void 0:r[t])?(this.attribute[t]=e,this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)):this.normalAttrs[t]=e,"background"===t?this.loadImage(e,!0):"shadowGraphic"===t&&this.setShadowGraphic(e)}needUpdateTags(t,e=tK){for(let i=0;i<e.length;i++){let s=e[i];if(-1!==t.indexOf(s))return!0}return!1}needUpdateTag(t,e=tK){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}initAttributes(t){let e={type:O.Gk.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=O.Gz.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var i,s;if(0===t&&0===e)return this;let r={type:O.Gk.TRANSLATE},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tq,r);n&&(t=n.x,e=n.y,delete n.x,delete n.y,this._setAttributes(n));let a=this.attribute,o=a.postMatrix;return o?k.w.transformUtil.fromMatrix(o,o).translate(t,e):(a.x=(null!==(i=a.x)&&void 0!==i?i:A.F1.x)+t,a.y=(null!==(s=a.y)&&void 0!==s?s:A.F1.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}translateTo(t,e){let i=this.attribute;if(i.x===t&&i.y===e)return this;let s={type:O.Gk.TRANSLATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tq,s);return r?this._setAttributes(r,!1,s):(i.x=t,i.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)),this}scale(t,e,i){var s,r;if(1===t&&1===e)return this;let n={type:O.Gk.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:i},this.attribute,tJ,n);o&&(t=o.scaleX,e=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));let l=this.attribute;if(i){let{postMatrix:s}=this.attribute;s||(s=new a.y,l.postMatrix=s),k.w.transformUtil.fromMatrix(s,s).scale(t,e,i)}else l.scaleX=(null!==(s=l.scaleX)&&void 0!==s?s:A.F1.scaleX)*t,l.scaleY=(null!==(r=l.scaleY)&&void 0!==r?r:A.F1.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this}scaleTo(t,e){let i=this.attribute;if(i.scaleX===t&&i.scaleY===e)return this;let s={type:O.Gk.SCALE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,tJ,s);return r?this._setAttributes(r,!1,s):(i.scaleX=t,i.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)),this}rotate(t,e){var i;if(0===t)return this;let s={type:O.Gk.ROTATE},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,tQ,s);r&&(delete r.angle,this._setAttributes(r,!1,s));let n=this.attribute;if(e){let{postMatrix:i}=this.attribute;i||(i=new a.y,n.postMatrix=i),k.w.transformUtil.fromMatrix(i,i).rotate(t,e)}else n.angle=(null!==(i=n.angle)&&void 0!==i?i:A.F1.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}rotateTo(t){let e=this.attribute;if(e.angle===t)return this;let i={type:O.Gk.ROTATE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,tQ,i);return s?this._setAttributes(s,!1,i):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)),this}skewTo(t,e){return this}animate(t){var e;this.animates||(this.animates=new Map);let i=new w.rs(null==t?void 0:t.id,null!==(e=null==t?void 0:t.timeline)&&void 0!==e?e:this.stage&&this.stage.getTimeline(),null==t?void 0:t.slience);if(i.bind(this),t){let{onStart:e,onFrame:s,onEnd:r,onRemove:n}=t;null!=e&&i.onStart(e),null!=s&&i.onFrame(s),null!=r&&i.onEnd(r),null!=n&&i.onRemove(n),i.interpolateFunc=t.interpolate}return this.animates.set(i.id,i),i.onRemove(()=>{i.stop(),this.animates.delete(i.id)}),i}onAttributeUpdate(t){t&&t.skipUpdateCallback||(k.w.graphicService.onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!(0,l.Z)(t)||this.currentStates.includes(t))}getState(t){var e;return null===(e=this.states)||void 0===e?void 0:e[t]}applyStateAttrs(t,e,i,s){var r,n,a,o;if(i){let i;let l=Object.keys(t),h=this.getNoWorkAnimateAttr(),d={};l.forEach(e=>{h[e]?(i||(i={}),i[e]=t[e]):d[e]=s&&void 0===t[e]?this.getDefaultAttribute(e):t[e]});let u=this.animate({slience:!0});u.stateNames=e,u.to(d,null!==(n=null===(r=this.stateAnimateConfig)||void 0===r?void 0:r.duration)&&void 0!==n?n:T.duration,null!==(o=null===(a=this.stateAnimateConfig)||void 0===a?void 0:a.easing)&&void 0!==o?o:T.easing),i&&this.setAttributes(i,!1,{type:O.Gk.STATE})}else this.stopStateAnimates(),this.setAttributes(t,!1,{type:O.Gk.STATE})}updateNormalAttrs(t){let e={};this.normalAttrs?(Object.keys(t).forEach(t=>{t in this.normalAttrs?(e[t]=this.normalAttrs[t],delete this.normalAttrs[t]):e[t]=this.getNormalAttribute(t)}),Object.keys(this.normalAttrs).forEach(e=>{t[e]=this.normalAttrs[e]})):Object.keys(t).forEach(t=>{e[t]=this.getNormalAttribute(t)}),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach(e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))})}getNormalAttribute(t){let e=this.attribute[t];return this.animates&&this.animates.forEach(i=>{if(i.stateNames){let s=i.getEndProps();(0,h.Z)(s,t)&&(e=s[t])}}),e}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if(this.currentStates){let i=(0,r.Z)(t)?e=>!t.includes(e):e=>e!==t,s=this.currentStates.filter(i);s.length!==this.currentStates.length&&this.useStates(s,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){let i=this.currentStates?this.currentStates.slice():[];i.push(t),this.useStates(i,e)}}addState(t,e,i){var s;if(this.currentStates&&this.currentStates.includes(t)&&(e||1===this.currentStates.length))return;let r=e&&(null===(s=this.currentStates)||void 0===s?void 0:s.length)?this.currentStates.concat([t]):[t];this.useStates(r,i)}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null===(i=this.currentStates)||void 0===i?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;let s={};t.forEach(e=>{var i;let r=this.stateProxy?this.stateProxy(e,t):null===(i=this.states)||void 0===i?void 0:i[e];r&&Object.assign(s,r)}),this.updateNormalAttrs(s),this.currentStates=t,this.applyStateAttrs(s,t,e)}addUpdateBoundTag(){this._updateTag|=O.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=O.Gz.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=O.Gz.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&O.Gz.UPDATE_SHAPE_AND_BOUNDS)===O.Gz.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=O.Gz.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=O.Gz.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=O.Gz.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=O.Gz.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=O.Gz.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=O.Gz.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=O.Gz.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&O.Gz.UPDATE_LAYOUT)}getAnchor(t,e){let i=[0,0],s=()=>{if(e.b)return e.b;let{scaleX:t,scaleY:i,angle:s}=this.attribute;return t$.copy(this._AABBBounds),this.setAttributes({scaleX:1,scaleY:1,angle:0}),e.b=this.AABBBounds.clone(),this._AABBBounds.copy(t$),this.setAttributes({scaleX:t,scaleY:i,angle:s}),e.b};if("string"==typeof t[0]){let e=parseFloat(t[0])/100,r=s();i[0]=r.x1+(r.x2-r.x1)*e}else i[0]=t[0];if("string"==typeof t[1]){let e=parseFloat(t[1])/100,r=s();i[1]=r.y1+(r.y2-r.y1)*e}else i[1]=t[1];return i}doUpdateLocalMatrix(){let{x:t=A.F1.x,y:e=A.F1.y,scaleX:i=A.F1.scaleX,scaleY:s=A.F1.scaleY,angle:r=A.F1.angle,scaleCenter:n,anchor:o,postMatrix:l}=this.attribute,h=[0,0],d={};if(o&&(h=this.getAnchor(o,d)),n&&(1!==i||1!==s)){let a=this._transMatrix;a.reset(),a.translate(h[0],h[1]),a.rotate(r),a.translate(-h[0],-h[1]),a.translate(t,e),h=this.getAnchor(n,d),k.w.transformUtil.fromMatrix(a,a).scale(i,s,{x:h[0],y:h[1]})}else(0,a.X)(this._transMatrix,this._transMatrix.reset(),t,e,i,s,r,o&&h);let u=this.getOffsetXY(A.F1);if(this._transMatrix.e+=u.x,this._transMatrix.f+=u.y,l){let t=tY.setValue(l.a,l.b,l.c,l.d,l.e,l.f),e=this._transMatrix;t.multiply(e.a,e.b,e.c,e.d,e.e,e.f),e.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);let{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){let e=t.getTimeline();this.animates.forEach(t=>{t.timeline===C.P&&t.setTimeline(e)})}this._onSetStage&&this._onSetStage(this,t,e),k.w.graphicService.onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:O.Gk.ANIMATE_END})}onStep(t,e,i,s,r){let n={};if(i.customAnimate)i.customAnimate.update(r,s,n);else{let a=i.props,o=i.parsedProps,l=i.propKeys;this.stepInterpolate(t,e,n,i,s,r,a,void 0,o,l)}this.setAttributes(n,!1,{type:O.Gk.ANIMATE_UPDATE,animationState:{ratio:s,end:r,step:i,isFirstFrameOfStep:t.getLastStep()!==i}}),this.stage&&this.stage.renderNextFrame()}stepInterpolate(t,e,i,s,r,n,a,o,l,h){h||(h=Object.keys(a),s.propKeys=h),n?s.propKeys.forEach(t=>{e.validAttr(t)&&(i[t]=a[t])}):h.forEach(n=>{var h;let d;if(!e.validAttr(n))return;let u=a[n],c=null!==(h=o&&o[n])&&void 0!==h?h:t.getLastPropByName(n,s);if(null==u||null==c||u===c)return void(i[n]=u);e.interpolateFunc&&e.interpolateFunc(n,r,c,u,i)||e.customInterpolate(n,r,c,u,this,i)||this.defaultInterpolate(u,c,n,i,l,r)||this._interpolate(n,r,c,u,i)}),s.parsedProps=l}defaultInterpolate(t,e,i,s,r,n){if(Number.isFinite(t)&&Number.isFinite(e))return s[i]=e+(t-e)*n,!0;if("fill"===i){r||(r={});let a=r.fillColorArray,o=(0,M.BM)(e,null!=a?a:t,n,!1,(t,e)=>{r.fillColorArray=e});return o&&(s[i]=o),!0}if("stroke"===i){r||(r={});let a=r.strokeColorArray,o=(0,M.BM)(e,null!=a?a:t,n,!1,(t,e)=>{r.strokeColorArray=e});return o&&(s[i]=o),!0}if("shadowColor"===i){r||(r={});let a=r.shadowColorArray,o=(0,M.BM)(e,null!=a?a:t,n,!0,(t,e)=>{r.shadowColorArray=e});return o&&(s[i]=o),!0}if(Array.isArray(t)&&t.length===e.length){let r=[],a=!0;for(let i=0;i<t.length;i++){let s=e[i],o=s+(t[i]-s)*n;if(!Number.isFinite(o)){a=!1;break}r.push(o)}a&&(s[i]=r)}return!1}_interpolate(t,e,i,s,r){}getDefaultAttribute(t){return this.getGraphicTheme()[t]}getComputedAttribute(t){var e;return null!==(e=this.attribute[t])&&void 0!==e?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=null!=t?t:k.w.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(t=>t.toJson())}}createPathProxy(t){return(0,d.Z)(t,!0)?this.pathProxy=(new E.r).fromString(t):this.pathProxy=new E.r,this.pathProxy}loadImage(t,e=!1){var i;if(!t||e&&!(!(i=t).fill&&!i.stroke))return;this.resources||(this.resources=new Map);let s={data:"init",state:null};this.resources.set(t,s),"string"==typeof t?(s.state="loading",t.startsWith("<svg")?(B.h.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):(u(t)||t.includes("/")||c(t))&&(B.h.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):(0,p.Z)(t)?(s.state="success",s.data=t,this.backgroundImg=this.backgroundImg||e):s.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,i){if(!this.resources)return;let s=this.resources.get(t);s&&(s.state="success",s.data=e,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;let i=this.resources.get(t);i&&(i.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach(t=>{t.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus="released",this.stopAnimates(),k.w.graphicService.onRelease(this)}_emitCustomEvent(t,e){var i,s;if(this._events&&t in this._events){let r=new x.A(t,e);r.bubbles=!1,r.manager=null===(s=null===(i=this.stage)||void 0===i?void 0:i.eventSystem)||void 0===s?void 0:s.manager,this.dispatchEvent(r)}}}t2.userSymbolMap={},t2.mixin({dispatchEvent(t){var e;if(!(t instanceof S.x))throw Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=[],t.detailPath&&(t.detailPath=[]),t.target=this,null===(e=null==t?void 0:t.manager)||void 0===e||e.dispatchEvent(t),!t.defaultPrevented},emit(t,e){return this.dispatchEvent(new x.A(t,e))}})},411:function(t,e,i){i.d(e,{ZA:()=>c,sS:()=>p});var s,r,n=i(2683),a=i(534),o=i(6502),l=i(8535),h=i(3872),d=i(1749),u=i(9607);(s=r||(r={}))[s.LESS_GROUP=0]="LESS_GROUP",s[s.MORE_GROUP=1]="MORE_GROUP";class c extends o.zs{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=d.I_,this._childUpdateTag=h.Gz.UPDATE_BOUNDS}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new l.Q2),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new l.Q2)}visibleAll(t){this.setAttribute("visible",t),this.forEachChildren(e=>{e.isContainer&&e.visibleAll?e.visibleAll(t):e.setAttribute("visible",t)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(t,e,i){if(i===h.LZ.GLOBAL){let i=new n.E9(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),this.AABBBounds.contains(i.x,i.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&h.Gz.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;a.w.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),a.w.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),"empty"===this.attribute.boundsMode&&e.clear(),e}doUpdateLocalMatrix(){let{x:t=u.F1.x,y:e=u.F1.y,dx:i=u.F1.dx,dy:s=u.F1.dy,scaleX:r=u.F1.scaleX,scaleY:n=u.F1.scaleY,angle:a=u.F1.angle,postMatrix:o}=this.attribute;if(0!==t||0!==e||0!==i||0!==s||1!==r||1!==n||0!==a||o)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return(0,l.gh)(this).group}updateAABBBounds(t,e,i){let s=i;i=i.clone();let{width:r,height:n,path:o,clip:l=e.clip}=t;if(o&&o.length?o.forEach(t=>{i.union(t.AABBBounds)}):null!=r&&null!=n&&i.set(0,0,Math.max(0,r),Math.max(0,n)),!l){this.forEachChildren(t=>{i.union(t.AABBBounds)});let{scrollX:e=0,scrollY:s=0}=t;i.translate(e,s)}return a.w.graphicService.updateTempAABBBounds(i),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),s.copy(i),s}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;let t=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),t}clearUpdateBoundTag(){this._updateTag&=h.Gz.CLEAR_BOUNDS,this._childUpdateTag&=h.Gz.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=h.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&h.Gz.UPDATE_BOUNDS||(this._childUpdateTag|=h.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){let e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),a.w.graphicService.onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),a.w.graphicService.onClearIncremental(this,this.stage)}_updateChildToStage(t){return this.stage&&t&&t.setStage(this.stage,this.layer),this.addUpdateBoundTag(),t}appendChild(t,e=!0){let i=super.appendChild(t);return e&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(t,e){return this._updateChildToStage(super.insertBefore(t,e))}insertAfter(t,e){return this._updateChildToStage(super.insertAfter(t,e))}insertInto(t,e){return this._updateChildToStage(super.insertInto(t,e))}removeChild(t){let e=super.removeChild(t);return t.stage=null,a.w.graphicService.onRemove(t),this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren(e=>{a.w.graphicService.onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),a.w.graphicService.onSetStage(this,t),this.forEachChildren(e=>{e.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&h.Gz.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(e=>e.name===t,e)}createOrUpdateChild(t,e,i){let s=this._getChildByName(t);return s?s.setAttributes(e):((s=a.w.graphicService.creator[i](e)).name=t,this.add(s)),s}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}release(t){t&&this.forEachChildren(e=>{e.release(t)}),super.release()}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=o.Wl},5512:function(t,e,i){i.d(e,{B:()=>u,E:()=>d});var s=i(6502),r=i(9607),n=i(8535),a=i(534),o=i(1749),l=i(8035);let h=["width","height","image",...s.DH];class d extends s.zs{constructor(t){super(t),this.type="image",this.numberType=o.PN,this.loadImage(this.attribute.image)}getImageElement(){let{image:t}=this.attribute;if(!t||!this.resources)return null;let e=this.resources.get(t);return"success"!==e.state?null:e.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var t;return null!==(t=this.attribute.repeatX)&&void 0!==t?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return null!==(t=this.attribute.repeatY)&&void 0!==t?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,i){super.imageLoadSuccess(t,e,()=>{this.successCallback&&this.successCallback()}),this.addUpdateBoundTag()}imageLoadFail(t,e){super.imageLoadFail(t,()=>{this.failCallback&&this.failCallback()})}setAttributes(t,e,i){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,i)}setAttribute(t,e,i,s){return"image"===t&&this.loadImage(e),super.setAttribute(t,e,i,s)}getGraphicTheme(){return(0,n.gh)(this).image}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{maxWidth:s=e.maxWidth,maxHeight:r=e.maxHeight}=t,{width:n,height:a}=t;if(null==n||null==a){let t=this.getImageElement();if(t){let e=t.width,i=t.height;if(null!=n)a=i/e*n;else if(null!=a)n=e/i*a;else{let t=e/i;t>s/r?(n=s,a=s/t):(a=r,n=r*t)}}else n=s,a=r}this._actualWidth=n,this._actualHeight=a,i.set(0,0,n,a)}let{tb1:s,tb2:r}=a.w.graphicService.updateTempAABBBounds(i);return(0,l.E)(t,e,s),i.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}getDefaultAttribute(t){return r.jK[t]}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function u(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},s.Wl)},7004:function(t,e,i){i.d(e,{W:()=>u});var s=i(6502),r=i(8535),n=i(534),a=i(3386),o=i(8908),l=i(1749);let h=["segments","points","curveType","curveTension",...s.DH];class d extends s.zs{constructor(t={}){super(t),this.type="line",this.numberType=l.Hf}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&!(t.length<=1)}_interpolate(t,e,i,s,r){"points"===t&&(r.points=(0,a.SA)(i,s,e))}getGraphicTheme(){return(0,r.gh)(this).line}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateLineAABBBoundsBySegments(t,e,i):this.updateLineAABBBoundsByPoints(t,e,i)),n.w.graphicService.updateTempAABBBounds(i);let{lineJoin:s=e.lineJoin}=t;return n.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}updateLineAABBBoundsByPoints(t,e,i,s){let{points:r=e.points,connectedType:n}=t;return r.forEach(t=>{!1===t.defined&&"connect"!==n||i.add(t.x,t.y)}),i}updateLineAABBBoundsBySegments(t,e,i,s){let{segments:r=e.segments,connectedType:n}=t;return r.forEach(t=>{t.points.forEach(t=>{!1===t.defined&&"connect"!==n||i.add(t.x,t.y)})}),i}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=this.attribute,e=new o.r,i=t.segments,s=t=>{if(t&&t.length){let i=!0;t.forEach(t=>{!1!==t.defined&&(i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y),i=!1)})}};return i&&i.length?i.forEach(t=>{s(t.points)}):t.points&&s(t.points),e}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function u(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},s.Wl)},4051:function(t,e,i){i.d(e,{E:()=>p});var s=i(6082),r=i(9904),n=i(6502),a=i(8908),o=i(8535),l=i(534),h=i(1749),d=i(8035);let u=["path","customPath",...n.DH];class c extends n.zs{constructor(t){super(t),this.type="path",this.numberType=h.qm}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{path:t}=this.attribute;return null!=t&&""!==t}getParsedPathShape(){let t=this.getGraphicTheme();if(!this.valid)return t.path;let e=this.attribute;return e.path instanceof a.r?e.path:((0,s.Z)(this.cache)&&this.doUpdatePathShape(),this.cache instanceof a.r?this.cache:t.path)}getGraphicTheme(){return(0,o.gh)(this).path}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let t=this.getParsedPathShape();i.union(t.getBounds())}let{tb1:s,tb2:r}=l.w.graphicService.updateTempAABBBounds(i);(0,d.E)(t,e,s),i.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2);let{lineJoin:n=e.lineJoin}=t;return l.w.graphicService.transformAABBBounds(t,i,e,"miter"===n,this),i}doUpdateAABBBounds(t){return this.doUpdatePathShape(),super.doUpdateAABBBounds(t)}doUpdatePathShape(){let t=this.attribute;(0,r.Z)(t.path,!0)?this.cache=(new a.r).fromString(t.path):t.customPath&&(this.cache=new a.r,t.customPath(this.cache,this))}needUpdateTags(t){return super.needUpdateTags(t,u)}needUpdateTag(t){return super.needUpdateTag(t,u)}toCustomPath(){return(new a.r).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},n.Wl)},7795:function(t,e,i){i.d(e,{m:()=>d,p:()=>u});var s=i(6502),r=i(8535),n=i(3386),a=i(8908),o=i(534),l=i(1749);let h=["points","cornerRadius",...s.DH];class d extends s.zs{constructor(t){super(t),this.type="polygon",this.numberType=l.Kh}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{points:t}=this.attribute;return t&&t.length>=2}getGraphicTheme(){return(0,r.gh)(this).polygon}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||this.updatePolygonAABBBoundsImprecise(t,e,i),o.w.graphicService.updateTempAABBBounds(i);let{lineJoin:s=e.lineJoin}=t;return o.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}updatePolygonAABBBoundsImprecise(t,e,i){let{points:s=e.points}=t;return s.forEach(t=>{i.add(t.x,t.y)}),i}_interpolate(t,e,i,s,r){"points"===t&&(r.points=(0,n.SA)(i,s,e))}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=this.attribute.points,e=new a.r;return t.forEach((t,i)=>{0===i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)}),e.closePath(),e}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function u(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=s.Wl},5385:function(t,e,i){i.d(e,{U:()=>c,f:()=>p});var s=i(6502),r=i(8908),n=i(8535),a=i(534),o=i(1749),l=i(6082);let h=t=>{if(!t)return{x:0,y:0,width:0,height:0};let e=(0,l.Z)(t.width)?t.x1-t.x:t.width,i=(0,l.Z)(t.height)?t.y1-t.y:t.height,s=0,r=0;return e<0?(s=e,e=-e):Number.isNaN(e)&&(e=0),i<0?(r=i,i=-i):Number.isNaN(i)&&(i=0),{x:s,y:r,width:e,height:i}};var d=i(8035);let u=["width","x1","y1","height","cornerRadius",...s.DH];class c extends s.zs{constructor(t){super(t),this.type="rect",this.numberType=o._u}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return(0,n.gh)(this).rect}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{width:e,height:s}=t,{x1:r,y1:n,x:a,y:o}=t;e=null!=e?e:r-a,s=null!=s?s:n-o,(isFinite(e)||isFinite(s)||isFinite(a)||isFinite(o))&&i.set(0,0,e||0,s||0)}let{tb1:s,tb2:r}=a.w.graphicService.updateTempAABBBounds(i);return(0,d.E)(t,e,s),i.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}needUpdateTags(t){return super.needUpdateTags(t,u)}needUpdateTag(t){return super.needUpdateTag(t,u)}toCustomPath(){let{x:t,y:e,width:i,height:s}=h(this.attribute),n=new r.r;return n.moveTo(t,e),n.rect(t,e,i,s),n}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=s.Wl},1636:function(t,e,i){i.d(e,{p:()=>A});var s=i(9904),r=i(1601),n=i(6502),a=i(9607),o=i(3570);class l{constructor(t,e,i,s,r,n,a,l,h,d,u,c,p,g){this.left=t,this.top=e,this.width=i,this.height=s,this.actualHeight=0,this.bottom=e+s,this.right=t+i,this.ellipsis=r,this.wordBreak=n,this.verticalDirection=a,this.lines=[],this.globalAlign=l,this.globalBaseline=h,this.layoutDirection=d,this.directionKey=o.i7[this.layoutDirection],this.isWidthMax=u,this.isHeightMax=c,this.singleLine=p,g?(g.clear(),this.icons=g):this.icons=new Map}draw(t,e){let{width:i,height:s}=this.getActualSize(),r=this.isWidthMax?Math.min(this.width,i):this.width||i||0,n=this.isHeightMax?Math.min(this.height,s):this.height||s||0;n=Math.min(n,s);let a=0;switch(this.globalBaseline){case"top":a=0;break;case"middle":a=-n/2;break;case"bottom":a=-n}let o=0;"right"===this.globalAlign||"end"===this.globalAlign?o=-r:"center"===this.globalAlign&&(o=-r/2);let l=this[this.directionKey.height];this.singleLine&&(l=this.lines[0].height+1);let h=!1;if("middle"===this.verticalDirection){if(this.actualHeight>=l&&0!==l)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i];if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+l)break;let n=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(n=!0,h=!0),this.lines[i].draw(t,n,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}else{let i=Math.floor((l-this.actualHeight)/2);"vertical"===this.layoutDirection?o+=i:a+=i;for(let i=0;i<this.lines.length;i++)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i],n=l-this.lines[i].top-this.lines[i].height;if(0===l)this.lines[i].draw(t,!1,o,n+a,this.ellipsis,e);else{if(n+r>this[this.directionKey.top]+l||n<this[this.directionKey.top])return h;{let s=!1;this.ellipsis&&this.lines[i+1]&&n-this.lines[i+1].height<this[this.directionKey.top]&&(s=!0,h=!0),this.lines[i].draw(t,s,o,n+a,this.ellipsis,e)}}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(o+=this.lines[0].height+1);for(let i=0;i<this.lines.length;i++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&(o-=this.lines[i].height+this.lines[i].top);let{top:s,height:r}=this.lines[i];if(0===l)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e);else{if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+l)return h;{let s=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(s=!0,h=!0),this.lines[i].draw(t,s,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}}}}return h}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){let s=this.lines[i];s.actualWidth>t&&(t=s.actualWidth),e+=s.height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0,{width:i,height:s}=this.getRawActualSize();this.width;let r=this.height||s||0;r=Math.min(r,s);let n=this[this.directionKey.height];if(this.singleLine&&(n=this.lines[0].height+1),"middle"===this.verticalDirection){if(this.actualHeight>=n&&0!==n)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i];if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+n);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+n){let s=!0===this.ellipsis?"...":this.ellipsis||"",r=this.lines[i].getWidthWithEllips(s);r>t&&(t=r),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else{this.actualHeight;for(let i=0;i<this.lines.length;i++)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}}else if("bottom"===this.verticalDirection)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i],a=n-this.lines[i].top-this.lines[i].height;if(0===n)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(a+r>this[this.directionKey.top]+n||a<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[i+1]&&a-this.lines[i+1].height<this[this.directionKey.top]){let s=!0===this.ellipsis?"...":this.ellipsis||"",r=this.lines[i].getWidthWithEllips(s);r>t&&(t=r),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i];if(0===n)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+n);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+n){let s=!0===this.ellipsis?"...":this.ellipsis||"",r=this.lines[i].getWidthWithEllips(s);r>t&&(t=r),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}}var h=i(3386);function d(t,e,i,s){let r=Math.round(t),n=Math.round(i),a=Math.round(e),o=Math.round(s);return{left:t>r?r:r-.5,top:i>n?n:n-.5,right:a>e?a:a+.5,bottom:o>s?o:o+.5}}class u{constructor(t,e,i,s){this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic",this.ascentDescentMode=s;let r=(0,h.VA)(i.lineHeight,this.fontSize);this.lineHeight="number"==typeof r?r>this.fontSize?r:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;let{ascent:n,height:a,descent:l,width:d}=(0,o.MS)(t,i,this.ascentDescentMode),u=0,c=0,p=0;this.height>a&&(c=Math.ceil(u=(this.height-a)/2),p=Math.floor(u)),"top"===this.textBaseline?(this.ascent=u,this.descent=a-u):"bottom"===this.textBaseline?(this.ascent=a-u,this.descent=u):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=n+c,this.descent=l+p),this.length=t.length,this.width=d||0,this.text=t||"",this.newLine=e||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,"vertical"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){let{width:t}=(0,o.MS)(this.text,this.character,this.ascentDescentMode);this.width=t,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(t,e,i,s,r,n,a){if(""===this.text||"\n"===this.text||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let l=e+i,h=this.text,u=this.left+s;l+=this.top;let c=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,c="vertical",l-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)h+=this.ellipsisStr,"right"!==n&&"end"!==n||(u-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,o.Hi)(h,("vertical"===c?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,t)+this.ellipsisStr,"right"===n||"end"===n){let{width:e}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);"vertical"===c||(u-=this.ellipsisWidth-e)}}}return Object.assign(Object.assign({},d(u,u+(this.widthOrigin||this.width),e,e+a)),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(t,e,i,s,r,n,a){let l=e+i,h=this.text,u=this.left+s;l+=this.top;let c=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,c="vertical",l-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)h+=this.ellipsisStr,"right"!==n&&"end"!==n||(u-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,o.Hi)(h,("vertical"===c?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,t)+this.ellipsisStr,"right"===n||"end"===n){let{width:e}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);"vertical"===c||(u-=this.ellipsisWidth-e)}}}switch(this.character.script){case"super":l-=this.ascent*(1/3);break;case"sub":l+=this.descent/2}"vertical"===c&&(t.save(),t.rotateAbout(Math.PI/2,u,l),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(u,l),u=0,l=0);let{lineWidth:p=1}=this.character;if(this.character.stroke&&p&&t.strokeText(h,u,l),this.character.fill&&t.fillText(h,u,l),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){let e=1+l,i=d(u,u+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){let e=1+l-this.ascent/2,i=d(u,u+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if("underline"===this.character.textDecoration){let e=1+l,i=d(u,u+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if("line-through"===this.character.textDecoration){let e=1+l-this.ascent/2,i=d(u,u+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}"vertical"===c&&t.restore()}getWidthWithEllips(t){let e=this.text,i="vertical"===t?this.height:this.width;if("hide"===this.ellipsis)return i;if("add"===this.ellipsis)return i+this.ellipsisWidth;if("replace"===this.ellipsis){let t=(0,o.Hi)(e,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,t)+this.ellipsisStr;let{width:s}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);return i+this.ellipsisWidth-s}return i}}var c=i(7636),p=i(5512);class g extends p.E{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],"always"===t.backgroundShowMode&&(this._hovered=!0),t.margin){let e=(0,h.dj)(t.margin);this._marginArray="number"==typeof e?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(t,e,i)=>{if((0,c.Z)(i)&&-1!==i.indexOf("margin")||"margin"===i){if(e.margin){let t=(0,h.dj)(e.margin);this._marginArray="number"==typeof t?[t,t,t,t]:t}else this._marginArray=[0,0,0,0]}}}get width(){var t;return(null!==(t=this.attribute.width)&&void 0!==t?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return(null!==(t=this.attribute.height)&&void 0!==t?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();let{width:t=a.jK.width,height:e=a.jK.height}=this.attribute,{backgroundWidth:i=t,backgroundHeight:s=e}=this.attribute;return this._AABBBounds.expand([0,(i-t)/2*2,(s-e)/2*2,0]),this._AABBBounds}setHoverState(t){"hover"===this.attribute.backgroundShowMode&&this._hovered!==t&&(this._hovered=t)}}class m{constructor(t,e,i,s,r,n,a,l){this.left=t,this.width=e,this.baseline=i,this.ascent=s,this.descent=r,this.top=i-s,this.paragraphs=n.map(t=>t),this.textAlign=(this.paragraphs[0]instanceof g?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=a,this.directionKey=o.i7[this.direction],this.actualWidth=0;let h=0;this.paragraphs.forEach((t,e)=>{if(0===e&&t instanceof u){let e=o.cV.exec(t.text);0!==(null==e?void 0:e.index)&&(t.text=t.text.slice(null==e?void 0:e.index),t.updateWidth())}this.actualWidth+=t[this.directionKey.width],h=Math.max(t[this.directionKey.height],h)}),this.height=h,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(e,l)}calcOffset(t,e){let i=this.directionKey,s=this.height,r=this.left,n=0;this.actualWidth<t&&!e&&("right"===this.textAlign||"end"===this.textAlign?r=t-this.actualWidth:"center"===this.textAlign?r=(t-this.actualWidth)/2:"justify"===this.textAlign&&(this.paragraphs.length<2?r=(t-this.actualWidth)/2:n=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(t){t instanceof g?(t["_"+i.x]=r,r+=t[i.width]+n,t["_"+i.y]="top"===t.attribute.textBaseline?0:"bottom"===t.attribute.textBaseline?s-t.height:(s-t.height)/2):(t[i.left]=r,r+=t[i.width]+n)})}draw(t,e,i,s,r,n){if(r&&(e||this.paragraphs.some(t=>t.overflow))){let t=!0,i=!1;for(let e=this.paragraphs.length-1;e>=0;e--){let s=this.paragraphs[e];if(s.overflow)t=t&&""===s.text;else if(t){i=!0;break}}let s=0;if(!i)for(let t=this.paragraphs.length-1;t>=0;t--){let i=this.paragraphs[t];if(i.overflow){if(""===i.text)break;continue}if(i instanceof g)break;if("vertical"===this.direction&&"vertical"!==i.direction){i.verticalEllipsis=!0;break}let n=!0===r?"...":r||"";i.ellipsisStr=n;let{width:a}=(0,o.MS)(n,i.character,i.ascentDescentMode),l=a||0;if(l<=this.blankWidth+s){e&&(i.ellipsis="add");break}if(l<=this.blankWidth+s+i.width){i.ellipsis="replace",i.ellipsisWidth=l,i.ellipsisOtherParagraphWidth=this.blankWidth+s;break}i.ellipsis="hide",s+=i.width}}let a="",l=-1,h=[],d=[h];this.paragraphs.forEach((e,r)=>{if(e instanceof g)return;let n=e.drawBackground(t,s,this.ascent,i,0===r,this.textAlign,this.height);n&&(a===n.fillStyle&&l===n.globalAlpha||(h=[],d.push(h),a=n.fillStyle,l=n.globalAlpha),h.push(n))}),d.forEach(e=>{if(0===e.length)return;let i=e[0],s=e[e.length-1];t.fillStyle=i.fillStyle,t.globalAlpha=i.globalAlpha,t.fillRect(i.left,i.top,s.right-i.left,s.bottom-i.top)}),this.paragraphs.forEach((e,r)=>{if(e instanceof g)return e.setAttributes({x:i+e._x,y:s+e._y}),void n(e,t,i+e._x,s+e._y,this.ascent);let a={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};(0,o.p3)(t,e.character),(0,o.nq)(t,e.character,a),e.draw(t,s,this.ascent,i,0===r,this.textAlign,this.height)})}getWidthWithEllips(t){let e=0;for(let i=this.paragraphs.length-1;i>=0;i--){let s=this.paragraphs[i];if(s instanceof g)break;let{width:r}=(0,o.MS)(t,s.character,s.ascentDescentMode),n=r||0;if(n<=this.blankWidth+e){s.ellipsis="add",s.ellipsisWidth=n;break}if(n<=this.blankWidth+e+s.width){s.ellipsis="replace",s.ellipsisWidth=n,s.ellipsisOtherParagraphWidth=this.blankWidth+e;break}s.ellipsis="hide",e+=s.width}let i=0;return this.paragraphs.forEach((t,e)=>{i+=t instanceof g?t.width:t.getWidthWithEllips(this.direction)}),i}}class f{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=o.i7[this.direction]}store(t){if(t instanceof g){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,i=0;"top"===t.attribute.textBaseline?(e=0,i=t.height):"bottom"===t.attribute.textBaseline?(e=t.height,i=0):(e=t.height/2,i=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(t),0!==t.text.length?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(0===this.lineBuffer.length)return;let t=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,e=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,i=new m(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t,e=!1){t instanceof g?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):0===this.lineBuffer.length?(this.store(t),this.send()):(this.send(),this.deal(t)):"number"!=typeof this.width||this.width<0||(t.newLine&&this.send(),(0!==t.text.length||this.newLine)&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t,e)))}cut(t,e){let i=this[this.directionKey.width]-this.lineWidth||0,s=Math.ceil(i/t[this.directionKey.width]*t.length)||0,r=(0,o.Hi)(t.text,i,t.character,s,"break-word"===this.frame.wordBreak);if(0!==r){let[i,s]=function(t,e){let i=t.text.slice(0,e),s=t.text.slice(e);return[new u(i,t.newLine,t.character,t.ascentDescentMode),new u(s,!0,t.character,t.ascentDescentMode)]}(t,r);this.store(i),e?this.send():this.deal(s)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(t))}}var v=i(8535),_=i(534),y=i(1749);let b=!1;try{b=Intl&&"function"==typeof Intl.Segmenter}catch(t){b=!1}let x=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...n.DH];class S extends n.zs{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=y.$M,this.onBeforeAttributeUpdate=(t,e,i)=>{for(let i in t)if("hoverIconId"===i){if(t[i]===e[i])continue;let s=this._frameCache.icons.get(t[i]);this.updateHoverIconState(s)}}}get width(){var t;return null!==(t=this.attribute.width)&&void 0!==t?t:a.Iq.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return null!==(t=this.attribute.height)&&void 0!==t?t:a.Iq.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return null!==(t=this.attribute.ellipsis)&&void 0!==t?t:a.Iq.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return null!==(t=this.attribute.wordBreak)&&void 0!==t?t:a.Iq.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return null!==(t=this.attribute.verticalDirection)&&void 0!==t?t:a.Iq.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return null!==(t=this.attribute.textAlign)&&void 0!==t?t:a.Iq.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return null!==(t=this.attribute.textBaseline)&&void 0!==t?t:a.Iq.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return null!==(t=this.attribute.textConfig)&&void 0!==t?t:a.Iq.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return(0,v.gh)(this).richtext}static AllSingleCharacter(t){return t.lines?t.lines.every(t=>t.paragraphs.every(t=>!(t.text&&(0,s.Z)(t.text)&&S.splitText(t.text).length>1))):t.every(t=>t.isComposing||!(t.text&&(0,s.Z)(t.text)&&S.splitText(t.text).length>1))}static splitText(t){if(b){let e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),i=[];for(let{segment:s}of e.segment(t))i.push(s);return i}return Array.from(t)}static TransformTextConfig2SingleCharacter(t){let e=[];return t.forEach(t=>{let i=S.splitText(t.text.toString());if((0,s.Z)(t.text)&&i.length>1)for(let s=0;s<i.length;s++){let r=i[s];e.push(Object.assign(Object.assign({},t),{text:r}))}else e.push(t)}),e}updateAABBBounds(t,e,i){var s,r,n,a;let{width:o=e.width,height:l=e.height,maxWidth:h=e.maxWidth,maxHeight:d=e.maxHeight,textAlign:u=e.textAlign,verticalDirection:c=null!==(r=null!==(s=t.textBaseline)&&void 0!==s?s:e.textBaseline)&&void 0!==r?r:e.verticalDirection,editOptions:p}=t;if(o>0&&l>0)i.set(0,0,o,l);else{let{width:t,height:e}=this.getFrameCache().getActualSize(),s=o||t||0,r=l||e||0;r="number"==typeof d&&r>d?d:r||0,s="number"==typeof h&&s>h?h:s||0,i.set(0,0,s,r)}!p||!p.keepHeightWhileEmpty||i.height()||(null===(n=t.textConfig)||void 0===n?void 0:n.length)||(i.y2=i.y1+(null!==(a=t.fontSize)&&void 0!==a?a:12),i.x2=i.x1+2);let g=0;switch(c){case"top":g=0;break;case"middle":g=-i.height()/2;break;case"bottom":g=-i.height()}let m=0;switch(u){case"left":m=0;break;case"center":m=-i.width()/2;break;case"right":m=-i.width()}return i.translate(m,g),_.w.graphicService.updateTempAABBBounds(i),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||_.w.graphicService.updateHTMLTextAABBBounds(t,e,i),_.w.graphicService.transformAABBBounds(t,i,e,!1,this),0===i.width()&&0===i.height()&&i.clear(),i}needUpdateTags(t){return super.needUpdateTags(t,x)}needUpdateTag(t){return super.needUpdateTag(t,x)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){let t=this.getFrameCache();if(t.actualHeight>t.height)return!0;let{disableAutoWrapLine:e}=this.attribute;if(e)for(let e=0;e<t.lines.length;e++){let i=t.lines[e];for(let t=0;t<i.paragraphs.length;t++){let e=i.paragraphs[t];if(e.overflow&&""!==e.text)return!0}}return!1}combinedStyleToCharacter(t){let{fill:e,stroke:i,fontSize:s,fontFamily:r,fontStyle:n,fontWeight:a,lineWidth:o,opacity:l,fillOpacity:h,lineHeight:d,strokeOpacity:u,upgradeAttrs:c}=this.attribute,p=Object.assign({fill:e,stroke:i,fontSize:s,fontFamily:r,fontStyle:n,fontWeight:a,lineWidth:o,opacity:l,fillOpacity:h,strokeOpacity:u},t);return(null==c?void 0:c.lineHeight)&&(p.lineHeight=d),p}doUpdateFrameCache(t){var e;let{maxWidth:i,maxHeight:s,width:n,height:a,ellipsis:o,wordBreak:h,verticalDirection:d,textAlign:c,textBaseline:p,layoutDirection:m,singleLine:v,disableAutoWrapLine:_,editable:y,ascentDescentMode:b,upgradeAttrs:x}=this.attribute,A=x&&x.multiBreakLine,{textConfig:k=[]}=this.attribute;y&&k.length>0&&!S.AllSingleCharacter(k)&&(k=S.TransformTextConfig2SingleCharacter(k),this.attribute.textConfig=k);let w=[],T=null!=t?t:k;for(let t=0;t<T.length;t++)if("image"in T[t]){let e=this.combinedStyleToCharacter(T[t]);e.lineWidth=void 0;let i=e.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(e.id);if(i)w.push(i);else{let t=new g(e);t.successCallback=()=>{var t;this.addUpdateBoundTag(),null===(t=this.stage)||void 0===t||t.renderNextFrame()},t.richtextId=e.id,w.push(t)}}else{let e=this.combinedStyleToCharacter(T[t]);if((0,r.Z)(e.text)&&(e.text=`${e.text}`),e.text&&e.text.includes("\n")){let i=e.text.split("\n");for(let s=0;s<i.length;s++)if(0===s)w.push(new u(i[s],!1,e,b));else if(i[s]||t===T.length-1)w.push(new u(i[s],!0,e,b));else{let e=this.combinedStyleToCharacter(T[t+1]);w.push(new u(i[s],!0,e,b))}}else e.text&&w.push(new u(e.text,!1,e,b))}let C="number"==typeof i&&Number.isFinite(i)&&i>0,M="number"==typeof s&&Number.isFinite(s)&&s>0,E="number"==typeof n&&Number.isFinite(n)&&n>0&&(!C||n<=i),B="number"==typeof a&&Number.isFinite(a)&&a>0&&(!M||a<=s),O=new l(0,0,(E?n:C?i:0)||0,(B?a:M?s:0)||0,o,h,d,c,p,m||"horizontal",!E&&C,!B&&M,v||!1,null===(e=this._frameCache)||void 0===e?void 0:e.icons),I=new f(O);if(I.newLine=A,_){let t=0,e=!1;for(let i=0;i<w.length;i++){let s=w[i];e?(s.overflow=!0,s.left=1/0,s.top=1/0,s.newLine||O.lines[O.lines.length-1].paragraphs.push(s)):I.deal(s,!0),O.lines.length!==t&&(t=O.lines.length,I.lineBuffer.length=0,s.overflow=!0,s.left=1e3,s.top=1e3,O.lines[O.lines.length-1].paragraphs.push(s),e=!0),s.newLine&&(e=!1,I.lineWidth=0),I.send()}}else for(let t=0;t<w.length;t++)I.deal(w[t]);if(I.send(),!("horizontal"===O.layoutDirection?E:B)){let t=O.getActualSizeWidthEllipsis(),e="horizontal"===O.layoutDirection?t.width:t.height;("horizontal"===O.layoutDirection?C:M)&&(e=Math.min(e,"horizontal"===O.layoutDirection?i:s)),O.lines.forEach(function(t){t.calcOffset(e,!1)})}A&&O.lines.forEach(t=>{let e=t.paragraphs;t.paragraphs=t.paragraphs.filter(t=>""!==t.text),0===t.paragraphs.length&&e.length&&(e[0].text="\n",t.paragraphs.push(e[0]))}),this._frameCache=O}clone(){return new S(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach(i=>{i.setStage(t,e)})}bindIconEvent(){this.addEventListener("pointermove",t=>{let e=this.pickIcon(t.global);e&&e===this._currentHoverIcon||(e?this.setAttribute("hoverIconId",e.richtextId):!e&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",t=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(t){var e,i,s,r,n;t?(null===(e=this._currentHoverIcon)||void 0===e||e.setHoverState(!1),this._currentHoverIcon=t,this._currentHoverIcon.setHoverState(!0),null===(i=this.stage)||void 0===i||i.setCursor(t.attribute.cursor),null===(s=this.stage)||void 0===s||s.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null===(r=this.stage)||void 0===r||r.setCursor(),null===(n=this.stage)||void 0===n||n.renderNextFrame())}pickIcon(t){let e;let i=this.getFrameCache(),{e:s,f:r}=this.globalTransMatrix;return i.icons.forEach((i,n)=>{var a,o;let l=i.AABBBounds.clone();l.translate(i._marginArray[3],i._marginArray[0]),l.containsPoint({x:t.x-s,y:t.y-r})&&((e=i).globalX=(null!==(a=e.attribute.x)&&void 0!==a?a:0)+s+i._marginArray[3],e.globalY=(null!==(o=e.attribute.y)&&void 0!==o?o:0)+r+i._marginArray[0])}),e}getNoWorkAnimateAttr(){return S.NOWORK_ANIMATE_ATTR}}function A(t){return new S(t)}S.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},n.Wl)},3570:function(t,e,i){i.d(e,{Hi:()=>g,MS:()=>f,SZ:()=>m,cV:()=>d,i7:()=>a,nq:()=>c,p3:()=>p});var s=i(534),r=i(3116),n=i(3239);let a={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},o={fontSize:16,fontFamily:n.iR,fill:!0,stroke:!1,fontWeight:"normal",lineHeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",script:"normal"};String.fromCharCode(160);let l=/\w|\(|\)|-/,h=/[.?!,;:/，。？！、；：]/,d=/\S/,u=(t,e)=>{let i=e.fontSize||16;switch(e.script){case"super":case"sub":i*=.8}t.setTextStyle({textAlign:"left",textBaseline:e.textBaseline||"alphabetic",fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||"",fontSize:i,fontFamily:e.fontFamily})};function c(t,e,i){let s=e&&e.fill||o.fill;if(!s)return void(t.globalAlpha=0);let{fillOpacity:n=1,opacity:a=1}=e;t.globalAlpha=n*a,t.fillStyle=i?(0,r.L)(t,s,{AABBBounds:i}):s,u(t,e)}function p(t,e){let i=e&&e.stroke||o.stroke;if(!i)return void(t.globalAlpha=0);let{strokeOpacity:s=1,opacity:r=1}=e;t.globalAlpha=s*r,t.lineWidth=e&&"number"==typeof e.lineWidth?e.lineWidth:1,t.strokeStyle=i,u(t,e)}function g(t,e,i,r,n){if(!e||e<=0)return 0;let a=s.w.graphicUtil.textMeasure,o=r,l=t.slice(0,o),h=Math.floor(a.measureText(l,i).width),d=t.slice(0,o+1),u=Math.floor(a.measureText(d,i).width);for(;h>e||u<=e;){if(h>e?o--:o++,o>t.length){o=t.length;break}if(o<0){o=0;break}l=t.slice(0,o),h=Math.floor(a.measureText(l,i).width),d=t.slice(0,o+1),u=Math.floor(a.measureText(d,i).width)}return n&&(o=m(t,o)),o}function m(t,e,i=!1){let s=e;for(;l.test(t[s-1])&&l.test(t[s])||h.test(t[s]);)if(--s<=0)return i?function(t,e){let i=e;for(;l.test(t[i+1])&&l.test(t[i])||h.test(t[i]);)if(++i>=t.length)return i;return i+1}(t,e):e;return s}function f(t,e,i="actual"){let r=s.w.graphicUtil.textMeasure.measureText(t,e),n={ascent:0,height:0,descent:0,width:0},a="actual"===i?r.actualBoundingBoxAscent:r.fontBoundingBoxAscent,o="actual"===i?r.actualBoundingBoxDescent:r.fontBoundingBoxDescent;return"number"!=typeof a||"number"!=typeof o?(n.width=Math.floor(r.width),n.height=e.fontSize||0,n.ascent=n.height,n.descent=0):(n.width=Math.floor(r.width),n.height=Math.floor(a+o),n.ascent=Math.floor(a),n.descent=n.height-n.ascent),n}},5196:function(t,e,i){i.d(e,{t:()=>p,m:()=>c});var s=i(7636),r=i(6502),n=i(8535),a=i(534),o=i(8908),l=i(1749),h=i(8909);let d=(t,e,i)=>{let{outerBorder:s,shadowBlur:r=e.shadowBlur,strokeBoundsBuffer:n=e.strokeBoundsBuffer}=t;if(s){let t=e.outerBorder,{distance:a=t.distance,lineWidth:o=t.lineWidth}=s;(0,h.ph)(i,a+(r+o)/2,!0,n)}return i},u=["symbolType","size",...r.DH];class c extends r.zs{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=l.B5}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(t=0,e=0,i=1){let s=null;try{s=new Path2D}catch(t){return null}let r=this.getParsedPath();if(!r)return null;r.draw(s,i,t,e)}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{size:t}=this.attribute;return(0,s.Z)(t)?2===t.length&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){let{symbolType:t="circle"}=this.attribute;return super.parsePath(t)}getGraphicTheme(){return(0,n.gh)(this).symbol}updateAABBBounds(t,e,i,s){this.updatePathProxyAABBBounds(i)||(s?this.updateSymbolAABBBoundsImprecise(t,e,i):this.updateSymbolAABBBoundsAccurate(t,e,i));let{tb1:r,tb2:n}=a.w.graphicService.updateTempAABBBounds(i);d(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2);let{lineJoin:o=e.lineJoin}=t;return a.w.graphicService.transformAABBBounds(t,i,e,"miter"===o,this),i}updateSymbolAABBBoundsImprecise(t,e,i){let{size:r=e.size}=t;if((0,s.Z)(r))i.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{let t=r/2;i.set(-t,-t,t,t)}return i}updateSymbolAABBBoundsAccurate(t,e,i){let{size:s=e.size}=t;return this.getParsedPath().bounds(s,i),i}needUpdateTags(t){return super.needUpdateTags(t,u)}needUpdateTag(t){return super.needUpdateTag(t,u)}toCustomPath(){let t=this.getParsedPath(),e=this.attribute.size,i=(0,s.Z)(e)?e:[e,e];return t.path?(new o.r).fromCustomPath2D(t.path,0,0,i[0],i[1]):(new o.r).fromString(t.pathStr,0,0,i[0],i[1])}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},r.Wl)},2875:function(t,e,i){i.d(e,{r:()=>y});var s=i(7183),r=i(7636),n=i(8654),a=i(7393),o=i(8103),l=i(5575),h=i(2008);class d{constructor(t,e,i){this.fontFamily=t,this.textOptions=e,this.textMeasure=i}LayoutBBox(t,e,i,s){if(t.xOffset="left"===e||"start"===e?0:"center"===e?-(t.width/2):"right"===e||"end"===e?-t.width:0,"top"===i)t.yOffset=0;else if("middle"===i)t.yOffset=-(t.height/2);else if("alphabetic"===i){let e=.79;if(1===s.length){let t=s[0];e=t.ascent/(t.ascent+t.descent)}t.yOffset=-(t.height*e)}else t.yOffset=-t.height;return t}GetLayoutByLines(t,e,i,s,r="",n,a){let{lineWidth:o,suffixPosition:l="end",measureMode:d=h.r.actualBounding,keepCenterInLine:u=!1}=null!=a?a:{};t=t.map(t=>t.toString());let c=[],p=[0,0];if("number"==typeof o&&o!==1/0){let e;for(let i=0,s=t.length;i<s;i++){let s=this.textMeasure.measureTextPixelADscentAndWidth(t[i],this.textOptions,d),a=t[i].toString();if(s.width>o){let s=this.textMeasure.clipTextWithSuffix(t[i],this.textOptions,o,r,n,l);a=s.str,e=s.width}else e=s.width;c.push({str:a,width:e,ascent:s.ascent,descent:s.descent,keepCenterInLine:u})}p[0]=o}else{let e,i,s=0;for(let r=0,n=t.length;r<n;r++){i=t[r];let n=this.textMeasure.measureTextPixelADscentAndWidth(t[r],this.textOptions,d);s=Math.max(s,e=n.width),c.push({str:i,width:e,ascent:n.ascent,descent:n.descent,keepCenterInLine:u})}p[0]=s}p[1]=c.length*s,p[0]=c.reduce((t,e)=>Math.max(t,e.width),0);let g={xOffset:0,yOffset:0,width:p[0],height:p[1]};return this.LayoutBBox(g,e,i,c),this.layoutWithBBox(g,c,e,i,s)}layoutWithBBox(t,e,i,s,r){let n=[0,0],a=e.length*r;"top"===s||("middle"===s?n[1]=(t.height-a)/2:"bottom"===s&&(n[1]=t.height-a));for(let a=0;a<e.length;a++)this.lineOffset(t,e[a],i,s,r,n);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:r,textAlign:i,textBaseline:s}}lineOffset(t,e,i,s,r,n){if("left"===i||"start"===i?e.leftOffset=0:"center"===i?e.leftOffset=(t.width-e.width)/2:"right"!==i&&"end"!==i||(e.leftOffset=t.width-e.width),e.topOffset=r/2+(e.ascent-e.descent)/2+n[1],!e.keepCenterInLine){let t=e.ascent+e.descent+0;if(t<r-0&&("bottom"===s?e.topOffset+=(r-t)/2:"top"===s&&(e.topOffset-=(r-t)/2)),"alphabetic"===s){let t=r/(e.ascent+e.descent);e.topOffset=r/2+(e.ascent-e.descent)/2*t+n[1]}}return n[1]+=r,e}}var u=i(534),c=i(6502),p=i(8535),g=i(3386),m=i(1749),f=i(8909);let v=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...c.DH];class _ extends c.zs{get font(){let t=this.getGraphicTheme();return this._font||(this._font=(0,s.U)(this.attribute,t)),this._font}get clipedText(){var t;let e=this.attribute,i=this.getGraphicTheme();return Number.isFinite(this.getMaxWidth(i))?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!==(t=e.text)&&void 0!==t?t:i.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var t,e;let i=this.getGraphicTheme(),s=this.attribute;if(!Number.isFinite(this.getMaxWidth(i)))return!1;let{text:r}=this.attribute;if(this.tryUpdateAABBBounds(),null===(e=null===(t=this.cache)||void 0===t?void 0:t.layoutData)||void 0===e?void 0:e.lines){let t="";return this.cache.layoutData.lines.forEach(e=>{t+=e.str}),(Array.isArray(r)?r.join(""):r)!==t}return"vertical"===s.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(t=>t.text).join("")!==s.text.toString():null!=this.clipedText&&this.clipedText!==s.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=m.Us,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{text:t}=this.attribute;return(0,r.Z)(t)?!t.every(t=>null==t||""===t):null!=t&&""!==t}getGraphicTheme(){return(0,p.gh)(this).text}doUpdateOBBBounds(){let t=this.getGraphicTheme();this._OBBBounds.clear();let e=this.attribute,{angle:i=t.angle}=e;if(!i){let t=this.AABBBounds;return this._OBBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._OBBBounds}this.obbText||(this.obbText=new _({})),this.obbText.setAttributes(Object.assign(Object.assign({},e),{angle:0}));let s=this.obbText.AABBBounds,{x:r,y:a}=e,o={x:(s.x1+s.x2)/2,y:(s.y1+s.y2)/2},l=(0,n.xj)(o,i,{x:r,y:a});return this._OBBBounds.copy(s),this._OBBBounds.translate(l.x-o.x,l.y-o.y),this._OBBBounds.angle=i,this._OBBBounds}updateAABBBounds(t,e,i){let{text:s=e.text}=this.attribute;Array.isArray(s)?this.updateMultilineAABBBounds(s):this.updateSingallineAABBBounds(s);let{tb1:r}=u.w.graphicService.updateTempAABBBounds(i),{scaleX:n=e.scaleX,scaleY:o=e.scaleY,shadowBlur:l=e.shadowBlur,strokeBoundsBuffer:h=e.strokeBoundsBuffer}=t;if(l){let t=l/Math.abs(n+o);(0,f.ph)(r,t,!0,h),i.union(r)}return u.w.graphicService.combindShadowAABBBounds(i,this),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||u.w.graphicService.updateHTMLTextAABBBounds(t,e,i),(0,a.n2)(i,i,this.transMatrix),i}updateSingallineAABBBounds(t){this.updateMultilineAABBBounds([t]);let e=this.cache.layoutData;if(e&&e.lines&&e.lines.length){let t=e.lines[0];this.cache.clipedText=t.str,this.cache.clipedWidth=t.width}return this._AABBBounds}updateMultilineAABBBounds(t){let e=this.getGraphicTheme(),{direction:i=e.direction,underlineOffset:s=e.underlineOffset}=this.attribute,r="horizontal"===i?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return"horizontal"===i&&s&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+s),r}guessLineHeightBuf(t){return t?.1*t:0}updateHorizontalMultilineAABBBounds(t){var e;let i=this.getGraphicTheme(),s=this.attribute,{fontFamily:r=i.fontFamily,textAlign:n=i.textAlign,textBaseline:a=i.textBaseline,fontSize:o=i.fontSize,fontWeight:l=i.fontWeight,ellipsis:h=i.ellipsis,maxLineWidth:c,stroke:p=i.stroke,wrap:g=i.wrap,measureMode:m=i.measureMode,lineWidth:f=i.lineWidth,whiteSpace:v=i.whiteSpace,suffixPosition:_=i.suffixPosition,ignoreBuf:y=i.ignoreBuf,keepCenterInLine:b=i.keepCenterInLine}=s,x=y?0:this.guessLineHeightBuf(o),S=this.getLineHeight(s,i,x);if("normal"===v||g)return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(null===(e=this.cache)||void 0===e?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}let A=new d(r,{fontSize:o,fontWeight:l,fontFamily:r,lineHeight:S},u.w.graphicUtil.textMeasure).GetLayoutByLines(t,n,a,S,!0===h?i.ellipsis:h||void 0,!1,{lineWidth:c,suffixPosition:_,measureMode:m,keepCenterInLine:b}),{bbox:k}=A;return this.cache.layoutData=A,this.clearUpdateShapeTag(),this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),p&&this._AABBBounds.expand(f/2),this._AABBBounds}updateWrapAABBBounds(t){var e,i,s;let n=this.getGraphicTheme(),{fontFamily:a=n.fontFamily,textAlign:o=n.textAlign,textBaseline:l=n.textBaseline,fontSize:h=n.fontSize,ellipsis:c=n.ellipsis,maxLineWidth:p,stroke:g=n.stroke,lineWidth:m=n.lineWidth,wordBreak:f=n.wordBreak,fontWeight:v=n.fontWeight,ignoreBuf:_=n.ignoreBuf,measureMode:y=n.measureMode,suffixPosition:b=n.suffixPosition,heightLimit:x=0,lineClamp:S,keepCenterInLine:A=n.keepCenterInLine}=this.attribute,k=_?0:this.guessLineHeightBuf(h),w=this.getLineHeight(this.attribute,n,k);if(!this.shouldUpdateShape()&&(null===(e=this.cache)||void 0===e?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),g&&this._AABBBounds.expand(m/2),this._AABBBounds}let T=u.w.graphicUtil.textMeasure,C={fontSize:h,fontWeight:v,fontFamily:a,lineHeight:w},M=new d(a,C,T),E=(0,r.Z)(t)?t.map(t=>t.toString()):[t.toString()],B=[],O=[0,0],I=1/0;if(x>0&&(I=Math.max(Math.floor(x/w),1)),S&&(I=Math.min(I,S)),"number"==typeof p&&p!==1/0){if(p>0)for(let t=0;t<E.length;t++){let e=E[t],r=!0;if(t===I-1){let i=T.clipTextWithSuffix(e,C,p,c,!1,b,t!==E.length-1),s=T.measureTextPixelADscentAndWidth(i.str,C,y);B.push({str:i.str,width:i.width,ascent:s.ascent,descent:s.descent,keepCenterInLine:A});break}let n=T.clipText(e,C,p,"break-all"!==f,"keep-all"===f);if(""!==e&&""===n.str||n.wordBreaked){if(c){let t=T.clipTextWithSuffix(e,C,p,c,!1,b);n.str=null!==(i=t.str)&&void 0!==i?i:"",n.width=null!==(s=t.width)&&void 0!==s?s:0}else n.str="",n.width=0;r=!1}let a=T.measureTextPixelADscentAndWidth(n.str,C,y);B.push({str:n.str,width:n.width,ascent:a.ascent,descent:a.descent,keepCenterInLine:A});let o=n.str.length;if(n.wordBreaked&&(""===e||""!==n.str)&&(r=!0,o=n.wordBreaked),n.str.length===e.length);else if(r){let i=e.substring(o);"keep-all"===f&&(i=i.replace(/^\s+/g,"")),E.splice(t+1,0,i)}}let t=0;B.forEach(e=>{t=Math.max(t,e.width)}),O[0]=t}else{let t,e,i=0;for(let s=0,r=E.length;s<r;s++){if(s===I-1){let t=T.clipTextWithSuffix(E[s],C,p,c,!1,b),e=T.measureTextPixelADscentAndWidth(t.str,C,y);B.push({str:t.str,width:t.width,ascent:e.ascent,descent:e.descent,keepCenterInLine:A}),i=Math.max(i,t.width);break}e=E[s],i=Math.max(i,t=T.measureTextWidth(e,C));let r=T.measureTextPixelADscentAndWidth(e,C,y);B.push({str:e,width:t,ascent:r.ascent,descent:r.descent,keepCenterInLine:A})}O[0]=i}O[1]=B.length*w;let R={xOffset:0,yOffset:0,width:O[0],height:O[1]};M.LayoutBBox(R,o,l,B);let P=M.layoutWithBBox(R,B,o,l,w);return this.cache.layoutData=P,this.clearUpdateShapeTag(),this._AABBBounds.set(R.xOffset,R.yOffset,R.xOffset+R.width,R.yOffset+R.height),g&&this._AABBBounds.expand(m/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,i;let s;let r=this.getGraphicTheme(),n=u.w.graphicUtil.textMeasure,a=this.attribute,{maxLineWidth:h=r.maxLineWidth,ellipsis:d=r.ellipsis,fontFamily:c=r.fontFamily,fontSize:p=r.fontSize,fontWeight:g=r.fontWeight,stroke:m=r.stroke,lineWidth:v=r.lineWidth,verticalMode:y=r.verticalMode,suffixPosition:b=r.suffixPosition}=a,x=this.getLineHeight(a,r,0),{textAlign:S=r.textAlign,textBaseline:A=r.textBaseline}=a;if(!y){let t=S;S=null!==(e=_.baselineMapAlign[A])&&void 0!==e?e:"left",A=null!==(i=_.alignMapBaseline[t])&&void 0!==i?i:"top"}if(s=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);s=(0,o.Fp)(e,s)});let t=(0,l.js)(S,s),e=this.cache.verticalList.length*x,i=(0,l.nV)(A,e,p);return this._AABBBounds.set(i,t,i+e,t+s),m&&this._AABBBounds.expand(v/2),this._AABBBounds}let k=t.map(t=>(0,f.Xk)(t.toString()));k.forEach((t,e)=>{if(Number.isFinite(h)){if(d){let i=!0===d?r.ellipsis:d,a=n.clipTextWithSuffixVertical(t,{fontSize:p,fontWeight:g,fontFamily:c},h,i,!1,b);k[e]=a.verticalList,s=a.width}else{let i=n.clipTextVertical(t,{fontSize:p,fontWeight:g,fontFamily:c},h,!1);k[e]=i.verticalList,s=i.width}}else s=0,t.forEach(t=>{let e=t.direction===f.m5.HORIZONTAL?p:n.measureTextWidth(t.text,{fontSize:p,fontWeight:g,fontFamily:c});s+=e,t.width=e})}),this.cache.verticalList=k,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);s=(0,o.Fp)(e,s)});let w=(0,l.js)(S,s),T=this.cache.verticalList.length*x,C=(0,l.nV)(A,T,p);return this._AABBBounds.set(C,w,C+T,w+s),m&&this._AABBBounds.expand(v/2),this._AABBBounds}getMaxWidth(t){var e,i;let s=this.attribute;return null!==(i=null!==(e=s.maxLineWidth)&&void 0!==e?e:s.maxWidth)&&void 0!==i?i:t.maxWidth}getLineHeight(t,e,i){var s;return null!==(s=(0,g.VA)(t.lineHeight,t.fontSize||e.fontSize))&&void 0!==s?s:(t.fontSize||e.fontSize)+i}needUpdateTags(t,e=v){return super.needUpdateTags(t,e)}needUpdateTag(t,e=v){return super.needUpdateTag(t,e)}_interpolate(t,e,i,s,r){"text"===t&&(r.text=s)}clone(){return new _(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return _.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return _.baselineMapAlign}getAlignMapBaseline(){return _.alignMapBaseline}}function y(t){return new _(t)}_.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},c.Wl),_.baselineMapAlign={top:"left",bottom:"right",middle:"center"},_.alignMapBaseline={left:"top",right:"bottom",center:"middle"}},8535:function(t,e,i){i.d(e,{Q2:()=>h,gh:()=>function t(e,i){return e.glyphHost?t(e.glyphHost):i?(e.isContainer,i):function(t){let e;if(e=t.isContainer?t:t.parent){for(;e&&!e.theme;)e=e.parent;return e?(e.theme||e.createTheme(),e.theme.getTheme(e)):d.getTheme()}return null}(e)||e.attachedThemeGraphic&&t(e.attachedThemeGraphic)||d.getTheme()}});var s=i(4659),r=i(9607);let n={arc:r.Up,area:r.eh,circle:r.t8,line:r.h8,path:r.J7,symbol:r.th,text:r.T5,rect:r.kx,polygon:r.ZD,richtext:r.Iq,richtextIcon:r.YW,image:r.jK,group:r.bZ,glyph:r.e9},a=Object.keys(n);function o(t,e){Object.keys(e).forEach(i=>{t[i]=e[i]})}let l={arc:Object.assign({},n.arc),area:Object.assign({},n.area),circle:Object.assign({},n.circle),line:Object.assign({},n.line),path:Object.assign({},n.path),symbol:Object.assign({},n.symbol),text:Object.assign({},n.text),rect:Object.assign({},n.rect),polygon:Object.assign({},n.polygon),richtext:Object.assign({},n.richtext),richtextIcon:Object.assign({},n.richtextIcon),image:Object.assign({},n.image),group:Object.assign({},n.group),glyph:Object.assign({},n.glyph)};class h{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},a.forEach(t=>{this._defaultTheme[t]=Object.create(l[t])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t||!this.dirty)return this.combinedTheme;let e={},i=this.getParentWithTheme(t);return i&&(e=i.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,i=!1){if(this.dirty){let r=this.getParentWithTheme(t);if(r){let t=r.theme;(t.dirty||i)&&t.applyTheme(r,e,!0)}this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,s.Y.getInstance().warn("未知错误，走到不应该走的区域里")),this.dirty=!1)}return this.combinedTheme}doCombine(t){let e=this.userTheme,i=this.combinedTheme;a.forEach(s=>{let r=Object.create(l[s]);t&&t[s]&&o(r,t[s]),i[s]&&o(r,i[s]),e[s]&&o(r,e[s]),this.combinedTheme[s]=r}),e.common&&a.forEach(t=>{o(this.combinedTheme[t],e.common)}),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach(e=>{i[e]?Object.assign(i[e],t[e]):i[e]=Object.assign({},t[e])}):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren(t=>{t.isContainer&&(t.theme&&(t.theme.dirty=!0),this.dirtyChildren(t))})}}let d=new h},8909:function(t,e,i){i.d(e,{Gg:()=>h,Xk:()=>d,b4:()=>a,m5:()=>r,ph:()=>o});var s,r,n=i(534);function a(t){var e,i,s,r;return e=this,i=void 0,s=void 0,r=function*(){let e=[],i=t.getChildren();yield new Promise(t=>{n.w.global.getRequestAnimationFrame()(()=>{t(null)})}),i.forEach(t=>{t.subLayers.size&&t.subLayers.forEach(t=>{t.drawContribution&&t.drawContribution.hooks&&t.drawContribution.rendering&&e.push(new Promise(e=>{t.drawContribution.hooks.completeDraw.tap("outWait",()=>{t.drawContribution.hooks.completeDraw.taps=t.drawContribution.hooks.completeDraw.taps.filter(t=>"outWait"!==t.name),e(null)})}))})}),yield Promise.all(e)},new(s||(s=Promise))(function(t,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function o(t){try{l(r.throw(t))}catch(t){n(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(t){t(i)})).then(a,o)}l((r=r.apply(e,i||[])).next())})}function o(t,e,i,s=0){var r,n;return t.expand(e+(s/2+(i?(r=i,n=e,r?n:0):0))),t}let l=0;function h(){return l++}function d(t){let e=[],i=0,s="";for(let n=0;n<t.length;n++)!function(t){if(u.has(t))return!0;if(c.has(t))return!1;let e=!1;return 256>t.codePointAt(0)&&(e=!0),e}(t[n])?(i&&(e.push({text:s,direction:r.VERTICAL}),s="",i=0),e.push({text:t[n],direction:r.HORIZONTAL})):i?s+=t[n]:(i=1,s=t[n]);return s&&e.push({text:s,direction:r.VERTICAL}),e}(s=r||(r={}))[s.HORIZONTAL=0]="HORIZONTAL",s[s.VERTICAL=1]="VERTICAL";let u=new Map;["…","（","）","—","【","】","「","」","《","》"].forEach(t=>u.set(t,!0));let c=new Map;[""].forEach(t=>c.set(t,!0))},2008:function(t,e,i){var s,r;i.d(e,{r:()=>s}),(r=s||(s={}))[r.estimate=0]="estimate",r[r.actualBounding=1]="actualBounding",r[r.fontBounding=2]="fontBounding"},8612:function(t,e,i){i.d(e,{rF:()=>tJ});var s,r=i(8429),n=i(7428),a=i(1600),o=i(7089),l=i(8906),h=i(1822),d=i(3239),u=i(86),c=function(t,e){return function(i,s){e(i,s,t)}};let p=class{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(t){this._isImageAnonymous=t}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(t){this._env||this.setEnv("browser"),this.envContribution.supportEvent=t}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=t}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=t}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=t}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(t){this._env||this.setEnv("browser"),this.envContribution.applyStyles=t}constructor(t){this.contributions=t,this._isImageAnonymous=!0,this.id=u.R.GenAutoIncrementId(),this.hooks={onSetEnv:new h.n(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}bindContribution(t){let e=[];if(this.contributions.getContributions().forEach(i=>{let s=i.configure(this,t);s&&s.then&&e.push(s)}),e.length)return Promise.all(e)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(t,e){if(e&&!0===e.force||this._env!==t)return this.deactiveCurrentEnv(),this.activeEnv(t,e)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(t,e){let i=this._env;this._env=t;let s=this.bindContribution(e);if(s&&s.then)return s.then(()=>{this.envParams=e,this.hooks.onSetEnv.call(i,t,this)});this.envParams=e,this.hooks.onSetEnv.call(i,t,this)}setActiveEnvContribution(t){this.envContribution=t}createCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(t)}createOffscreenCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(t)}releaseCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(t)}addEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(t,e,i)}removeEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(t,e,i)}dispatchEvent(t){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(t)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(t){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(t):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(t,e){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(t,e):null}loadImage(t){return this._env||this.setEnv("browser"),this.envContribution.loadImage(t)}loadSvg(t){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(t)}loadJson(t){return this._env||this.setEnv("browser"),this.envContribution.loadJson(t)}loadArrayBuffer(t){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(t)}loadBlob(t){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(t)}loadFont(t,e,i){var s,r,n,a;return s=this,r=void 0,n=void 0,a=function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(t,e,i)},new(n||(n=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var s;e.done?t(e.value):((s=e.value)instanceof n?s:new n(function(t){t(s)})).then(i,o)}l((a=a.apply(s,r||[])).next())})}isChrome(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(t){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(t)}removeDom(t){return this._env||this.setEnv("browser"),this.envContribution.removeDom(t)}createDom(t){return this._env||this.setEnv("browser"),this.envContribution.createDom(t)}updateDom(t,e){return this._env||this.setEnv("browser"),this.envContribution.updateDom(t,e)}getElementTop(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(t,e)}getElementLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(t,e)}getElementTopLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(t,e)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(t){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(t)}};p=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),c(0,(0,a.f)(l.Qc)),c(0,(0,o.t)(d.D0)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],p);var g=i(2008),m=i(9607),f=i(3570),v=i(4659);let _=class{configure(t,e){this.canvas=t.canvas,this.context=t.context,t.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(t,e,i){this.context.setTextStyleWithoutAlignBaseline(e);let s=this.context.measureText(t);return i?this.compatibleMetrics(s,e):s}_measureTextWithAlignBaseline(t,e,i){this.context.setTextStyle(e);let s=this.context.measureText(t);return i?this.compatibleMetrics(s,e):s}compatibleMetrics(t,e){if(null==t.actualBoundingBoxAscent||null==t.actualBoundingBoxDescent||null==t.fontBoundingBoxAscent||null==t.fontBoundingBoxDescent){t={width:t.width};let{ascent:i,descent:s}=this.measureTextBoundADscentEstimate(e);t.actualBoundingBoxAscent=i,t.actualBoundingBoxDescent=s,t.fontBoundingBoxAscent=i,t.fontBoundingBoxDescent=s}if(null==t.actualBoundingBoxLeft||null==t.actualBoundingBoxRight){t={width:t.width,actualBoundingBoxAscent:t.actualBoundingBoxAscent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent};let{left:i,right:s}=this.measureTextBoundLeftRightEstimate(e);t.actualBoundingBoxLeft=i,t.actualBoundingBoxRight=s}return t}estimate(t,{fontSize:e=m.T5.fontSize}){let i=0,s=0;for(let e=0;e<t.length;e++)128>t.charCodeAt(e)?i++:s++;return{width:~~(.8*i*e+s*e),height:e}}measureTextWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsLeftRight(t,e,i){return this.context?{left:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxLeft,right:i.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(e)}measureTextPixelHeight(t,e,i){var s;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).actualBoundingBoxAscent-i.actualBoundingBoxDescent):null!==(s=e.fontSize)&&void 0!==s?s:m.q9.fontSize}measureTextPixelADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundHieght(t,e,i){var s;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).fontBoundingBoxAscent-i.fontBoundingBoxDescent):null!==(s=e.fontSize)&&void 0!==s?s:m.q9.fontSize}measureTextBoundADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).fontBoundingBoxAscent,descent:i.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundADscentEstimate(t){var e;let i=null!==(e=t.fontSize)&&void 0!==e?e:m.q9.fontSize;return{ascent:.79*i,descent:.21*i}}measureTextBoundLeftRightEstimate(t){var e;let i=null!==(e=t.fontSize)&&void 0!==e?e:m.q9.fontSize,{textAlign:s}=t;return"center"===s?{left:i/2,right:i/2}:"right"===s||"end"===s?{left:i,right:0}:{left:0,right:i}}measureTextPixelADscentAndWidth(t,e,i){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:this.estimate(t,e).width});let s=this._measureTextWithoutAlignBaseline(t,e,!0);if(i===g.r.actualBounding)return{ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,width:s.width};if(i===g.r.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:s.width});if(i===g.r.fontBounding){let t=s.fontBoundingBoxAscent,e=s.fontBoundingBoxDescent;if(s.actualBoundingBoxDescent&&e<s.actualBoundingBoxDescent){let i=s.actualBoundingBoxDescent-e;e+=i,t-=i}else if(s.actualBoundingBoxAscent&&t<s.actualBoundingBoxAscent){let i=s.actualBoundingBoxAscent-t;t+=i,e-=i}return{ascent:t,descent:e,width:s.width}}return{ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,width:s.width}}measureText(t,e){return this.context?(this.context.setTextStyleWithoutAlignBaseline(e),this.context.measureText(t)):this.estimate(t,e)}clipTextVertical(t,e,i,s){if(0===t.length)return{verticalList:t,width:0};let{fontSize:r=12}=e;t.forEach(t=>{t.width=0===t.direction?r:this.measureTextWidth(t.text,e)});let n=[],a=0,o=0;for(;o<t.length&&a+t[o].width<i;o++)a+=t[o].width,n.push(t[o]);if(t[o]&&t[o].text.length>1){let r=this._clipText(t[o].text,e,i-a,0,t[o].text.length-1,"end",!1);if(s&&r.str!==t[o].text){let i="",s=0;for(let e=0;e<o;e++){let r=t[e];i+=r.text,s+=r.text.length}i+=t[o].text;let n=s+r.str.length,a=(0,f.SZ)(i,n);(a-=s)!=r.str.length-1&&(r.str=r.str.substring(0,a),r.width=this.measureTextWidth(r.str,e))}n.push(Object.assign(Object.assign({},t[o]),{text:r.str,width:r.width})),a+=r.width}return{verticalList:n,width:a}}clipText(t,e,i,s,r){if(0===t.length)return{str:"",width:0};let n=this.measureTextWidth(t,e);if(n<=i)return{str:t,width:n};if((n=this.measureTextWidth(t[0],e))>i)return{str:"",width:0};let a=this._clipText(t,e,i,0,t.length-1,"end",!1);if(s&&a.str!==t){let i=(0,f.SZ)(t,a.str.length,r);i!==a.str.length&&(i>a.str.length&&(a.wordBreaked=i,i=a.str.length),a.str=t.substring(0,i),a.width=this.measureTextWidth(a.str,e))}return a}_clipText(t,e,i,s,r,n,a){let o;if("start"===n)o=this._clipTextStart(t,e,i,s,r),a&&(o.result=a+o.str);else if("middle"===n){let s=this._clipTextMiddle(t,e,i,"","",0,0,1);o={str:"none",width:s.width,result:s.left+a+s.right}}else o=this._clipTextEnd(t,e,i,s,r),a&&(o.result=o.str+a);return o}_clipTextEnd(t,e,i,s,r){let n;if(s===r){v.Y.getInstance().warn(`【_clipTextEnd】不应该走到这里${t}, ${s}, ${r}`);let i=t.substring(0,r+1);return{str:i,width:this.measureTextWidth(i,e)}}let a=Math.floor((s+r)/2),o=t.substring(0,a+1),l=this.measureTextWidth(o,e);if(l>i){if(o.length<=1)return{str:"",width:0};let r=t.substring(0,a);return(n=this.measureTextWidth(r,e))<=i?{str:r,width:n}:this._clipTextEnd(t,e,i,s,a)}if(l<i){if(a>=t.length-1)return{str:t,width:this.measureTextWidth(t,e)};let s=t.substring(0,a+2);return(n=this.measureTextWidth(s,e))>=i?{str:o,width:l}:this._clipTextEnd(t,e,i,a,r)}return{str:o,width:l}}_clipTextStart(t,e,i,s,r){let n;let a=Math.ceil((s+r)/2),o=t.substring(a-1,t.length),l=this.measureTextWidth(o,e);if(l>i){if(o.length<=1)return{str:"",width:0};let s=t.substring(a,t.length);return(n=this.measureTextWidth(s,e))<=i?{str:s,width:n}:this._clipTextStart(t,e,i,a,t.length)}if(l<i){if(a<=0)return{str:t,width:this.measureTextWidth(t,e)};let r=t.substring(a-2,t.length);return(n=this.measureTextWidth(r,e))>=i?{str:o,width:l}:this._clipTextStart(t,e,i,s,a)}return{str:o,width:l}}_clipTextMiddle(t,e,i,s,r,n,a,o){let l=t.substring(0,o),h=this.measureTextWidth(l,e);if(h+a>i)return{left:s,right:r,width:n+a};let d=t.substring(t.length-o,t.length),u=this.measureTextWidth(d,e);return h+u>i?{left:l,right:r,width:h+a}:this._clipTextMiddle(t,e,i,l,d,h,u,o+1)}clipTextWithSuffixVertical(t,e,i,s,r,n){let a;if(""===s)return this.clipTextVertical(t,e,i,r);if(0===t.length)return{verticalList:t,width:0};let o=this.clipTextVertical(t,e,i,r);if(o.verticalList.length===t.length&&o.verticalList[o.verticalList.length-1].width===t[t.length-1].width)return o;let l=this.measureTextWidth(s,e);if(l>i)return o;if(i-=l,"start"===n){let n=this.revertVerticalList(t);a=this.clipTextVertical(n,e,i,r);let o=this.revertVerticalList(a.verticalList);o.unshift({text:s,direction:1,width:l}),a.verticalList=o}else if("middle"===n){let n=this.clipTextVertical(t,e,i/2,r),o=this.revertVerticalList(t),h=this.clipTextVertical(o,e,i/2,r);n.verticalList.push({text:s,direction:1,width:l}),this.revertVerticalList(h.verticalList).forEach(t=>n.verticalList.push(t)),a={verticalList:n.verticalList,width:n.width+h.width}}else(a=this.clipTextVertical(t,e,i,r)).verticalList.push({text:s,direction:1,width:l});return a.width+=l,a}revertVerticalList(t){return t.reverse().map(t=>{let e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})})}clipTextWithSuffix(t,e,i,s,r,n,a=!1){if(""===s)return this.clipText(t,e,i,r);if(0===t.length)return{str:"",width:0};let o=this.measureTextWidth(t,e);if(!a&&o<=i)return{str:t,width:o};let l=this.measureTextWidth(s,e);if(l>i)return{str:"",width:0};if(a&&o+l<=i)return{str:t+s,width:o+l};i-=l;let h=this._clipText(t,e,i,0,t.length-1,n,s);if(r&&h.str!==t){let i=(0,f.SZ)(t,h.str.length);i!==h.str.length&&(h.result=t.substring(0,i),h.width=this.measureTextWidth(h.str,e))}else a&&h.str===t&&(h.result=t+s);return h.str=h.result,h.width+=l,h}};_=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],_);let y=Symbol.for("TextMeasureContribution"),b=class extends _{};b=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],b);var x=i(8485),S=i(9935),A=i(1164),k=i(534),w=i(6480),T=i(2575),C=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},M=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},E=function(t,e){return function(i,s){e(i,s,t)}};let B=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(t){this.contributions=t,this.configured=!1,this.global=k.w.global,this.global.hooks.onSetEnv.tap("graphic-util",(t,e,i)=>{this.configured=!1,this.configure(i,e)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}configure(t,e){this.configured||(this.contributions.getContributions().forEach(t=>{t.configure(this,e)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){let t=A.A.shareCanvas();this._canvas=t,this._context=t.getContext("2d")}}bindTextMeasure(t){this._textMeasure=t}measureText(t,e,i="native"){var s;this.configure(this.global,this.global.env);let r=this.global.measureTextMethod;this.global.measureTextMethod=i;let n={width:this._textMeasure.measureTextWidth(t,e),height:null!==(s=e.fontSize)&&void 0!==s?s:m.q9.fontSize};return this.global.measureTextMethod=r,n}createTextMeasureInstance(t,e,i){return this.configure(this.global,this.global.env),new x.e(Object.assign({defaultFontParams:{fontFamily:m.q9.fontFamily,fontSize:m.q9.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:"-/: .,@%'\"~"+x.e.ALPHABET_CHAR_SET+x.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t)}drawGraphicToCanvas(t,e,i){if(!e.defaultLayer)return null;let s=w.n.get(T.Oo),r=t.AABBBounds,n=r.width(),a=r.height(),o=-r.x1,l=-r.y1;s.create({viewBox:{x1:o,y1:l,x2:r.x2,y2:r.y2},width:n,height:a,canvas:i,dpr:e.window.dpr,canvasControled:!0,offscreen:!0,title:""});let h=e.params.optimize.disableCheckGraphicWidthOutRange;e.params.optimize.disableCheckGraphicWidthOutRange=!0,e.defaultLayer.getNativeHandler().drawTo(s,[t],{transMatrix:s.getViewBoxTransform(),viewBox:s.getViewBox(),stage:e,layer:e.defaultLayer,renderService:e.renderService,background:"transparent",clear:!0,updateBounds:!1}),e.params.optimize.disableCheckGraphicWidthOutRange=h;let d=s.getNativeHandler();return d.nativeCanvas?d.nativeCanvas:null}};B=C([(0,n.b)(),E(0,(0,a.f)(l.Qc)),E(0,(0,o.t)(y)),M("design:paramtypes",[Object])],B),(tH=tz||(tz={}))[tH.transform=0]="transform",tH[tH.matrix=1]="matrix";let O=new S.y,I=class{constructor(){this.matrix=new S.y}init(t){return this.mode=tz.transform,this.originTransform=t,this.matrix.reset(),this}fromMatrix(t,e){return this.mode=tz.matrix,this.outSourceMatrix=t,this.outTargetMatrix=e,this}scaleMatrix(t,e,i){let s=this.outSourceMatrix;if(O.setValue(s.a,s.b,s.c,s.d,s.e,s.f),this.outTargetMatrix.reset(),i){let{x:s,y:r}=i;this.outTargetMatrix.translate(s,r),this.outTargetMatrix.scale(t,e),this.outTargetMatrix.translate(-s,-r)}else this.outTargetMatrix.scale(t,e);return this.outTargetMatrix.multiply(O.a,O.b,O.c,O.d,O.e,O.f),this}rotateMatrix(t,e){let i=this.outSourceMatrix;if(O.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),e){let{x:i,y:s}=e;this.outTargetMatrix.translate(i,s),this.outTargetMatrix.rotate(t),this.outTargetMatrix.translate(-i,-s)}else this.outTargetMatrix.rotate(t);return this.outTargetMatrix.multiply(O.a,O.b,O.c,O.d,O.e,O.f),this}scale(t,e,i){return this.mode===tz.matrix?this.scaleMatrix(t,e,i):this}rotate(t,e){return this.mode===tz.matrix?this.rotateMatrix(t,e):this}translateMatrix(t,e){let i=this.outSourceMatrix;return O.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(t,e),this.outTargetMatrix.multiply(O.a,O.b,O.c,O.d,O.e,O.f),this}translate(t,e){return this.mode===tz.matrix?this.translateMatrix(t,e):this}simplify(t){return this.mode===tz.matrix?this.simplifyMatrix(t):this}simplifyMatrix(t){return this}};I=C([(0,n.b)(),M("design:paramtypes",[])],I);var R=i(8535),P=i(411);class L extends P.ZA{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw Error("暂不支持")}get dpr(){return this._dpr}constructor(t,e,i,s){var r;super({}),this.stage=t,this.global=e,this.window=i,this.main=s.main,this.layerHandler=s.layerHandler,this.layerHandler.init(this,i,{main:s.main,canvasId:s.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!==(r=s.zIndex)&&void 0!==r?r:0}),this.layer=this,this.subLayers=new Map,this.theme=new R.Q2,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){let e=Array.from(this.subLayers.values()).sort((t,e)=>t.zIndex-e.zIndex);this.layerHandler.merge(e.map(e=>(e.layer.subLayers.size&&e.layer.combineSubLayer(t),e.layer.getNativeHandler()))),t&&e.forEach(t=>{t.group&&(t.group.incremental=0)}),e.forEach(t=>{k.w.layerService.releaseLayer(this.stage,t.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw Error("暂不支持")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(i=>{i.layer.renderCount=this.renderCount,i.layer.render(t,e)})}render(t,e){var i;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:null!==(i=t.background)&&void 0!==i?i:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach(t=>t(this)),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw Error("暂不支持")}setToFrame(t){throw Error("暂不支持")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(t=>{k.w.layerService.releaseLayer(this.stage,t.layer)})}drawTo(t,e){var i;this.layerHandler.drawTo(t,[this],Object.assign({background:null!==(i=e.background)&&void 0!==i?i:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach(t=>t(this))}}var D=i(6106);let Z=tN=class{static GenerateLayerId(){return`${tN.idprefix}_${tN.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=k.w.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(t){return this.layerMap.get(t)}getRecommendedLayerType(t){return t||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}getLayerHandler(t){return"static"===t?w.n.get(D.kj):"dynamic"===t?w.n.get(D.ym):w.n.get(D.XJ)}createLayer(t,e={main:!1}){var i;this.tryInit();let s=this.getRecommendedLayerType(e.layerMode);s=e.main||e.canvasId?"static":s;let r=this.getLayerHandler(s),n=new L(t,this.global,t.window,Object.assign(Object.assign({main:!1},e),{layerMode:s,canvasId:null!==(i=e.canvasId)&&void 0!==i?i:tN.GenerateLayerId(),layerHandler:r})),a=this.layerMap.get(t)||[];return a.push(n),this.layerMap.set(t,a),this.staticLayerCountInEnv--,n}prepareStageLayer(t){let e;t.forEachChildren(t=>{let i=t.getNativeHandler();"virtual"===i.type?(i.mainHandler=e,e.secondaryHandlers.push(i)):(e=i).secondaryHandlers=[]})}releaseLayer(t,e){e.release();let i=this.layerMap.get(t)||[];this.layerMap.set(t,i.filter(t=>t!==e))}layerCount(t){return(this.layerMap.get(t)||[]).length}restLayerCount(t){return"browser"===this.global.env?10:0}releaseStage(t){this.layerMap.delete(t)}};Z.idprefix="visactor_layer",Z.prefix_count=0,Z=tN=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],Z);let F=new r.n(t=>{t(d.y2).to(p).inSingletonScope(),t(T.Oo).to(T.Il),t(D.no).to(B).inSingletonScope(),t(D.Gp).to(I).inSingletonScope(),t(D.IT).to(Z).inSingletonScope()});var j=i(6403);let H=new r.n(t=>{t(j.pi).to(j.I2)});var z=i(7141),N=i(2683),V=i(8113),U=i(8103),G=i(1749);let W=(t,e,i,s)=>{let r,n=!1,a=!1;if(e.forEachChildren(t=>!(n=t.numberType===G.IJ)),e.forEachChildren(t=>!(a=!!t.findFace)),n){let t=e.getChildren(),o=[...t];o.sort((t,e)=>{var i,s,r,n;let a=(null!==(s=null!==(i=t.attribute.startAngle)&&void 0!==i?i:0+t.attribute.endAngle)&&void 0!==s?s:0)/2,o=(null!==(n=null!==(r=e.attribute.startAngle)&&void 0!==r?r:0+e.attribute.endAngle)&&void 0!==n?n:0)/2;for(;a<0;)a+=U.f7;for(;o<0;)o+=U.f7;return o-a}),o.forEach(t=>{t._next=null,t._prev=null}),e.removeAllChild(),e.update(),o.forEach(t=>{e.appendChild(t)}),s.hack_pieFace="outside",(r=i(n,a))&&r.graphic||(s.hack_pieFace="inside",r=i(n,a)),r&&r.graphic||(s.hack_pieFace="top",r=i(n,a)),e.removeAllChild(),t.forEach(t=>{t._next=null,t._prev=null}),t.forEach(t=>{e.appendChild(t)})}else if(a){let s=e.getChildren(),o=s.map(e=>({ave_z:e.findFace().vertices.map(i=>{var s;return t.view(i[0],i[1],null!==(s=i[2]+e.attribute.z)&&void 0!==s?s:0)[2]}).reduce((t,e)=>t+e,0),g:e}));o.sort((t,e)=>e.ave_z-t.ave_z),e.removeAllChild(),o.forEach(t=>{t.g._next=null,t.g._prev=null}),e.update(),o.forEach(t=>{e.add(t.g)}),r=i(n,a),e.removeAllChild(),s.forEach(t=>{t._next=null,t._prev=null}),e.update(),s.forEach(t=>{e.add(t)})}else r=i(n,a);return r};var X=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};let Y=class{constructor(){this.order=1}afterPickItem(t,e,i,s,r){if(t.graphic){let e=t.graphic;for(;e.parent;)e=e.parent;e.shadowHost&&(t.params={shadowTarget:t.graphic},t.graphic=e.shadowHost)}return t}};Y=X([(0,n.b)()],Y);let $=class{constructor(){this.order=1}afterPickItem(t,e,i,s,r){return t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx?this._pickItem(t,e,i,s,r):null}beforePickItem(t,e,i,s,r){return t.attribute.shadowRootIdx<0?this._pickItem(t,e,i,s,r):null}_pickItem(t,e,i,s,r){var n;if(!t.shadowRoot)return null;let{parentMatrix:a}=r||{};if(!a)return null;let o=e.pickContext;o.highPerformanceSave();let l=null===(n=(0,R.gh)(t))||void 0===n?void 0:n[t.type],{shadowPickMode:h=null==l?void 0:l.shadowPickMode}=t.attribute,d=t.shadowRoot,u=V.QE.allocateByObj(a),c=new N.E9(u.a*i.x+u.c*i.y+u.e,u.b*i.x+u.d*i.y+u.f),p=e.pickGroup(d,c,u,s);return o.highPerformanceRestore(),!p.graphic&&p.group&&"full"===h&&(p.graphic=p.group),p}};$=X([(0,n.b)()],$);let K=class{constructor(){this.order=1}beforePickItem(t,e,i,s,r){let n=t.baseGraphic;if(n&&n.parent){let t=new N.E9(i.x,i.y),r=e.pickContext;r.highPerformanceSave();let a=n.parent.globalTransMatrix;a.transformPoint(t,t);let o=n.isContainer?e.pickGroup(n,t.clone(),a,s):e.pickItem(n,t.clone(),a,s);return r.highPerformanceRestore(),o}return null}};K=X([(0,n.b)()],K);let q=class{constructor(){this.order=1}beforePickItem(t,e,i,s,r){if(!t.in3dMode||s.in3dInterceptor)return null;let n=e.pickContext,a=t.stage;if(!n||!a)return null;if(s.in3dInterceptor=!0,n.save(),this.initCanvasCtx(n),n.camera=a.camera,t.isContainer){let a=W(n,t,()=>e.pickGroup(t,i,r.parentMatrix,s),s);return n.camera=null,s.in3dInterceptor=!1,n.restore(),a}return n.restore(),null}initCanvasCtx(t){t.setTransformForCurrent()}};q=X([(0,n.b)()],q);let J=new r.n((t,e,i)=>{i(z.hH)||(t(z.BR).toSelf(),t(z.hH).toService(z.BR)),t(q).toSelf().inSingletonScope(),t(z.uH).toService(q),t($).toSelf().inSingletonScope(),t(z.uH).toService($),t(K).toSelf().inSingletonScope(),t(z.uH).toService(K),(0,l.yb)(t,z.uH),t(Y).toSelf().inSingletonScope(),t(z.tn).toService(Y),(0,l.yb)(t,z.tn)});var Q=i(5977),tt=i(7578);let te=new r.n(t=>{t(G.fB).to(Q.JG).inSingletonScope(),t(G.tA).toConstantValue(tt.i)});var ti=i(7050),ts=function(t,e){return function(i,s){e(i,s,t)}};let tr=class{constructor(t){this.autoEnablePlugins=t,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(t,e){this.stage=t,this.actived=!0;let{pluginList:i}=e;i&&w.n.isBound(ti.X)&&this.autoEnablePlugins.getContributions().forEach(t=>{i.includes(t.name)&&this.register(t)})}findPluginsByName(t){let e=[];return this.onStartupFinishedPlugin.forEach(i=>{i.name===t&&e.push(i)}),this.onRegisterPlugin.forEach(i=>{i.name===t&&e.push(i)}),e}register(t){"onStartupFinished"===t.activeEvent?this.onStartupFinishedPlugin.push(t):"onRegister"===t.activeEvent&&(this.onRegisterPlugin.push(t),t.activate(this))}unRegister(t){"onStartupFinished"===t.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(t),1):"onRegister"===t.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(t),1),t.deactivate(this)}release(...t){this.onStartupFinishedPlugin.forEach(t=>{t.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(t=>{t.deactivate(this)}),this.onRegisterPlugin=[]}};tr=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),ts(0,(0,a.f)(l.Qc)),ts(0,(0,o.t)(ti.X)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tr);let tn=new r.n(t=>{t(ti.H).to(tr),(0,l.EM)(t,ti.X)}),ta=new r.n(t=>{(0,l.yb)(t,d.D0)}),to=new r.n(t=>{t(y).to(b).inSingletonScope(),(0,l.yb)(t,y)});var tl=i(9355);let th=class{constructor(){this.type="static",this.offscreen=!1,this.global=k.w.global}setDpr(t){this.canvas.dpr=t}init(t,e,i){if(this.layer=t,this.window=e,i.main)this.main=!0,this.context=e.getContext(),this.canvas=this.context.getCanvas();else{let t;this.main=!1,i.canvasId&&(t=this.global.getElementById(i.canvasId)),t||(t=this.global.createCanvas({width:e.width,height:e.height})),t.style&&(t.style["pointer-events"]="none");let s=e.getContext().getCanvas().nativeCanvas,r=(0,tl.JN)({nativeCanvas:t,width:e.width,height:e.height,dpr:e.dpr,id:i.canvasId,canvasControled:!0,container:e.getContainer(),x:s.offsetLeft,y:s.offsetTop});r.applyPosition(),this.canvas=r,this.context=r.getContext()}}resize(t,e){this.canvas.resize(t,e)}resizeView(t,e){}render(t,e,i){var s;if(!this.main){let t=this.window.getContext().getCanvas().nativeCanvas;t&&(this.canvas.x!==t.offsetLeft||this.canvas.y!==t.offsetTop)&&(this.canvas.x=t.offsetLeft,this.canvas.y=t.offsetTop,this.canvas.applyPosition())}e.renderService.render(t,Object.assign(Object.assign({context:this.context,clear:null!==(s=e.background)&&void 0!==s?s:"#ffffff"},e),i))}merge(t){t.forEach(t=>{let e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)})}prepare(t,e){}drawTo(t,e,i){var s;let r=t.getContext();i.renderService.render(e,Object.assign(Object.assign({context:r},i),{clear:i.clear?null!==(s=i.background)&&void 0!==s?s:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};th=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],th);let td=new r.n(t=>{t(th).toSelf(),t(D.kj).toService(th)});var tu=i(6040);let tc=(0,i(592).v)(tu.Lc);var tp=i(6562),tg=i(7393),tm=i(7636),tf=i(8654),tv=i(4481),t_=i(7317);let ty=Symbol.for("DrawItemInterceptor"),tb=new tg.FB,tx=new tg.FB;class tS{constructor(){this.order=1}afterDrawItem(t,e,i,s,r){return null==t.attribute.shadowRootIdx&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0||(t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(t,e,i,s,r),!1}beforeDrawItem(t,e,i,s,r){return null==t.attribute.shadowRootIdx&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0||(t.attribute.shadowRootIdx<0||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(t,e,i,s,r),!1}drawItem(t,e,i,s,r){if(!t.shadowRoot)return!1;let{context:n}=i;if(n.highPerformanceSave(),n.transformFromMatrix(t.transMatrix,!0),s.dirtyBounds&&s.backupDirtyBounds){tb.copy(s.dirtyBounds),tx.copy(s.backupDirtyBounds);let e=t.globalTransMatrix.getInverse();s.dirtyBounds.copy(s.backupDirtyBounds).transformWithMatrix(e),s.backupDirtyBounds.copy(s.dirtyBounds)}return s.renderGroup(t.shadowRoot,i,V.QE.allocate(1,0,0,1,0,0)),n.highPerformanceRestore(),s.dirtyBounds&&s.backupDirtyBounds&&(s.dirtyBounds.copy(tb),s.backupDirtyBounds.copy(tx)),!0}}class tA{constructor(){this.order=1}afterDrawItem(t,e,i,s,r){return t.attribute._debug_bounds&&this.drawItem(t,e,i,s,r),!1}drawItem(t,e,i,s,r){if(!t.attribute._debug_bounds)return!1;let{context:n}=i;n.highPerformanceSave(),t.parent&&n.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&n.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);let a=t.AABBBounds;return!0!==t.attribute._debug_bounds&&t.attribute._debug_bounds(n,t),n.strokeRect(a.x1,a.y1,a.width(),a.height()),n.highPerformanceRestore(),!0}}let tk=class{constructor(){this.order=1,this.interceptors=[new tS,new tT,new tw,new tA]}afterDrawItem(t,e,i,s,r){for(let n=0;n<this.interceptors.length;n++)if(this.interceptors[n].afterDrawItem&&this.interceptors[n].afterDrawItem(t,e,i,s,r))return!0;return!1}beforeDrawItem(t,e,i,s,r){if((!t.in3dMode||i.in3dInterceptor)&&!t.shadowRoot&&!(t.baseGraphic||t.attribute.globalZIndex||t.interactiveGraphic))return!1;for(let n=0;n<this.interceptors.length;n++)if(this.interceptors[n].beforeDrawItem&&this.interceptors[n].beforeDrawItem(t,e,i,s,r))return!0;return!1}};tk=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],tk);class tw{constructor(){this.order=1}beforeDrawItem(t,e,i,s,r){return!this.processing&&(t.baseGraphic?this.beforeDrawInteractive(t,e,i,s,r):this.beforeSetInteractive(t,e,i,s,r))}beforeSetInteractive(t,e,i,s,r){let n=t.interactiveGraphic;if(t.attribute.globalZIndex){n||(n=t.clone(),t.interactiveGraphic=n,n.baseGraphic=t),n.setAttributes({globalZIndex:0,zIndex:t.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();let e=i.stage.getLayer("_builtin_interactive");return e&&this.getShadowRoot(e).add(n),!0}if(n){i.stage.tryInitInteractiveLayer();let e=i.stage.getLayer("_builtin_interactive");e&&this.getShadowRoot(e).removeChild(n),t.interactiveGraphic=null,n.baseGraphic=null}return!1}beforeDrawInteractive(t,e,i,s,r){let n=t.baseGraphic,a=!!n.stage,o=n.parent;for(;a&&o&&o.stage!==o;)a=!!o.stage,o=o.parent;if(!a){let e=i.stage.getLayer("_builtin_interactive");return e&&this.getShadowRoot(e).removeChild(t),!0}if(n){this.processing=!0;let{context:t}=i;return t.highPerformanceSave(),t.setTransformFromMatrix(n.parent.globalTransMatrix,!0),n.isContainer?s.renderGroup(n,i,n.parent.globalTransMatrix):s.renderItem(n,i),t.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(t){var e;let i=t.getElementById("_interactive_group");return i||((i=tt.i.CreateGraphic("group",{})).id="_interactive_group",t.add(i)),null!==(e=i.shadowRoot)&&void 0!==e?e:i.attachShadow()}}class tT{constructor(){this.order=1}beforeDrawItem(t,e,i,s,r){if(!t.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;let{context:n,stage:a}=e.drawParams;n.canvas,n.save(),this.initCanvasCtx(n),n.camera=a.camera;let o=n.currentMatrix;o.a/=n.dpr,o.b/=n.dpr,o.c/=n.dpr,o.d/=n.dpr,o.e/=n.dpr,o.f/=n.dpr;let l=V.yp.allocate();(0,t_.B$)(l,o);let h=n.modelMatrix;if(h){if(l){let t=V.yp.allocate();n.modelMatrix=(0,t_.G9)(t,h,l)}}else n.modelMatrix=l;return n.setTransform(1,0,0,1,0,0,!0),t.isContainer?W(n,t,(e,r)=>s.renderGroup(t,i,t.parent.globalTransMatrix,!e&&r),i):s.renderItem(t,i),n.camera=null,n.restore(),n.modelMatrix!==h&&V.yp.free(n.modelMatrix),n.modelMatrix=h,i.in3dInterceptor=!1,!0}initCanvasCtx(t){t.setTransformForCurrent()}}var tC=i(3116),tM=i(6910),tE=function(t,e){return function(i,s){e(i,s,t)}};let tB=class{constructor(t,e){this.contributions=t,this.drawItemInterceptorContributions=e,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new tg.YZ,this.backupDirtyBounds=new tg.YZ,this.global=k.w.global,this.layerService=k.w.layerService,(0,tm.Z)(this.contributions)||(this.contributions=[this.contributions]),this.init()}init(){this.contributions.forEach(t=>{if(t.style){let e=this.styleRenderMap.get(t.style)||new Map;e.set(t.numberType,t),this.styleRenderMap.set(t.style,e)}else this.defaultRenderMap.set(t.numberType,t)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order)}prepareForDraw(t,e){e.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!e.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(t,e){this.prepareForDraw(t,e),e.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(e.renderStyle)||this.defaultRenderMap,this.currentRenderService=t;let{context:i,stage:s,viewBox:r,transMatrix:n}=e;if(!i)return;let a=this.dirtyBounds.setValue(0,0,r.width(),r.height());if(s.dirtyBounds&&!s.dirtyBounds.empty()){let t=(0,tf.di)(a,s.dirtyBounds,!1);a.x1=Math.floor(t.x1),a.y1=Math.floor(t.y1),a.x2=Math.ceil(t.x2),a.y2=Math.ceil(t.y2)}let o=i.dpr%1;(o||.5!==o)&&(a.x1=Math.floor(a.x1*i.dpr)/i.dpr,a.y1=Math.floor(a.y1*i.dpr)/i.dpr,a.x2=Math.ceil(a.x2*i.dpr)/i.dpr,a.y2=Math.ceil(a.y2*i.dpr)/i.dpr),this.backupDirtyBounds.copy(a),i.inuse=!0,i.setClearMatrix(n.a,n.b,n.c,n.d,n.e,n.f),i.clearMatrix(),i.setTransformForCurrent(!0),i.translate(r.x1,r.y1,!0),i.beginPath(),i.rect(a.x1,a.y1,a.width(),a.height()),i.clip(),s.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(t,i,e),i.save(),t.renderTreeRoots.sort((t,e)=>{var i,s;return(null!==(i=t.attribute.zIndex)&&void 0!==i?i:m.xF.zIndex)-(null!==(s=e.attribute.zIndex)&&void 0!==s?s:m.xF.zIndex)}).forEach(t=>{t.isContainer?this.renderGroup(t,e,V.QE.allocate(1,0,0,1,0,0)):this.renderItem(t,e)}),i.restore(),i.setClearMatrix(1,0,0,1,0,0),i.inuse=!1,i.draw()}doRegister(){throw Error("暂不支持")}_findNextGraphic(t){let e=t.parent,i=t._uid;for(;e;){let t=(0,tp.qA)(e,i,m.xF.zIndex);if(t)return t;i=e._uid,e=e.parent}return null}renderGroup(t,e,i,s){if(e.break||!1===t.attribute.visibleAll)return;if(t.incremental&&(null==e.startAtId||e.startAtId===t._uid))return e.break=!0,void this._increaseRender(t,e);if(this.useDirtyBounds&&!(0,tf.SX)(t.AABBBounds,this.dirtyBounds,!1)&&"empty"!==t.attribute.boundsMode)return;let r,n=i;if(this.useDirtyBounds){r=tM.et.allocateByObj(this.dirtyBounds);let e=t.transMatrix;n=V.QE.allocateByObj(i).multiply(e.a,e.b,e.c,e.d,e.e,e.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(n.getInverse())}this.renderItem(t,e,{drawingCb:()=>{var i;s?t.forEachChildren(t=>{e.break||(t.isContainer?this.renderGroup(t,e,n):this.renderItem(t,e))}):(0,tp.kD)(t,m.xF.zIndex,t=>{e.break||(t.isContainer?this.renderGroup(t,e,n):this.renderItem(t,e))},!1,!!(null===(i=e.context)||void 0===i?void 0:i.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(r),tM.et.free(r),V.QE.free(n))}_increaseRender(t,e){let{layer:i,stage:s}=e,{subLayers:r}=i,n=r.get(t._uid);n||(n={layer:this.layerService.createLayer(s),zIndex:r.size,group:t},r.set(t._uid,n));let a=n.layer.getNativeHandler().getContext(),o=n.drawContribution||w.n.get(tv.Pf);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:n.layer,context:a,startAtId:t._uid,break:!1})),n.drawContribution=o;let l=this._findNextGraphic(t);if(l){if(l.isContainer&&l.incremental)this._increaseRender(l,e);else{let t=r.get(l._uid);t||(t={layer:this.layerService.createLayer(s),zIndex:r.size},r.set(l._uid,t));let i=t.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:t.layer,context:i,startAtId:l._uid,break:!1}))}}}getRenderContribution(t){let e;return e||(e=this.selectRenderByNumberType(t.numberType,t)),e||(e=this.selectRenderByType(t.type)),e}renderItem(t,e,i){if(this.InterceptorContributions.length)for(let s=0;s<this.InterceptorContributions.length;s++){let r=this.InterceptorContributions[s];if(r.beforeDrawItem&&r.beforeDrawItem(t,this.currentRenderService,e,this,i))return}let s=this.getRenderContribution(t);if(!s)return;let r,n=this.scrollMatrix&&(0!==this.scrollMatrix.e||0!==this.scrollMatrix.f);if(t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;(e||i)&&(n=!0,this.scrollMatrix||(this.scrollMatrix=V.QE.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-e,-i))}if(n&&(r=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),this.useDirtyBounds&&!t.isContainer&&"empty"!==t.attribute.boundsMode&&!(0,tf.SX)(t.AABBBounds,null!=r?r:this.dirtyBounds,!1)){if(n&&t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(e,i)}return}let a=null!=e.startAtId&&t._uid!==e.startAtId;if(t._uid===e.startAtId&&(e.startAtId=null),i&&(i.skipDraw=a),a?t.isContainer&&s.draw(t,this.currentRenderService,e,i):s.draw(t,this.currentRenderService,e,i),n&&t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(e,i)}if(this.InterceptorContributions.length)for(let i=0;i<this.InterceptorContributions.length;i++){let s=this.InterceptorContributions[i];if(s.afterDrawItem&&s.afterDrawItem(t,this.currentRenderService,e,this))return}}selectRenderByType(t){return v.Y.getInstance().warn("未知错误，不应该走到这里"),null}selectRenderByNumberType(t,e){let i;if(e.attribute.renderStyle){let s=this.styleRenderMap.get(e.attribute.renderStyle);i=s&&s.get(t)}return i||this.currentRenderMap.get(t)||this.defaultRenderMap.get(t)}clearScreen(t,e,i){var s,r;let{clear:n,viewBox:a}=i,o=a.width(),l=a.height();if(n){e.clearRect(0,0,o,l);let i=null===(s=t.drawParams)||void 0===s?void 0:s.stage;if(i&&(e.globalAlpha=null!==(r=i.attribute.opacity)&&void 0!==r?r:1),i&&i.backgroundImg&&i.resources){let t=i.resources.get(n);t&&"success"===t.state&&t.data&&e.drawImage(t.data,0,0,o,l)}else e.fillStyle=(0,tC.L)(e,n,{AABBBounds:{x1:0,y1:0,x2:0+o,y2:0+l}},0,0),e.fillRect(0,0,o,l)}}afterDraw(t,e){}};tB=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tE(0,tc(tv.uz)),tE(1,(0,a.f)(l.Qc)),tE(1,(0,o.t)(ty)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Array,Object])],tB);var tO=i(6490),tI=i(6003),tR=i(3482),tP=i(3872),tL=i(623);class tD extends tL.M2{constructor(){super(...arguments),this.time=tP.Oh.beforeFillStroke}drawShape(t,e,i,s,r,n,a,o,l,h,d,u){let{background:c,backgroundMode:p=l.backgroundMode,backgroundFit:g=l.backgroundFit,backgroundKeepAspectRatio:m=l.backgroundKeepAspectRatio,backgroundScale:f=l.backgroundScale,backgroundOffsetX:v=l.backgroundOffsetX,backgroundOffsetY:_=l.backgroundOffsetY}=t.attribute;if(c){if(t.backgroundImg&&t.resources){let i=t.resources.get(c);if("success"!==i.state||!i.data)return;e.highPerformanceSave(),e.setTransformFromMatrix(t.parent.globalTransMatrix,!0);let s=t.AABBBounds;this.doDrawImage(e,i.data,s,{backgroundMode:p,backgroundFit:g,backgroundKeepAspectRatio:m,backgroundScale:f,backgroundOffsetX:v,backgroundOffsetY:_}),e.highPerformanceRestore(),e.setTransformForCurrent()}else e.highPerformanceSave(),e.fillStyle=c,e.fill(),e.highPerformanceRestore()}}}let tZ=new tD;var tF=function(t,e){return function(i,s){e(i,s,t)}};let tj=class{constructor(t){this.groupRenderContribitions=t,this.numberType=G.I_}drawShape(t,e,i,s,r,n,a,o){let l=(0,R.gh)(t,null==n?void 0:n.theme).group,{fill:h=l.fill,background:d,stroke:u=l.stroke,opacity:c=l.opacity,width:p=l.width,height:g=l.height,clip:m=l.clip,fillOpacity:f=l.fillOpacity,strokeOpacity:v=l.strokeOpacity,cornerRadius:_=l.cornerRadius,path:y=l.path,lineWidth:b=l.lineWidth,visible:x=l.visible,fillStrokeOrder:S=l.fillStrokeOrder,cornerType:A=l.cornerType,x:k=l.x,y:w=l.y}=t.attribute,T=(0,tI.GT)(c,f,p,g,h),C=(0,tI.Ze)(c,v,p,g),M=(0,tI.dz)(h,d),E=(0,tI.ak)(u,b);if(!t.valid||!x||!m&&(!M&&!E||!(T||C||a||o||d)))return;if(y&&y.length&&r.drawContribution){let t=e.disableFill,i=e.disableStroke,s=e.disableBeginPath;e.disableFill=!0,e.disableStroke=!0,e.disableBeginPath=!0,y.forEach(t=>{r.drawContribution.getRenderContribution(t).draw(t,r.renderService,r,n)}),e.disableFill=t,e.disableStroke=i,e.disableBeginPath=s}else 0===_||(0,tm.Z)(_)&&_.every(t=>0===t)?(e.beginPath(),e.rect(i,s,p,g)):(e.beginPath(),(0,tO.U)(e,i,s,p,g,_,"bevel"!==A));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(tZ));let B={doFill:M,doStroke:E};e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this._groupRenderContribitions.forEach(n=>{n.time===tP.Oh.beforeFillStroke&&n.drawShape(t,e,i,s,M,E,T,C,l,r,a,o,B)}),m&&e.clip();let O=()=>{B.doFill&&(a?a(e,t.attribute,l):T&&(e.setCommonStyle(t,t.attribute,k-i,w-s,l),e.fill()))},I=()=>{B.doStroke&&(o?o(e,t.attribute,l):C&&(e.setStrokeStyle(t,t.attribute,k-i,w-s,l),e.stroke()))};S?(I(),O()):(O(),I()),this._groupRenderContribitions.forEach(n=>{n.time===tP.Oh.afterFillStroke&&n.drawShape(t,e,i,s,M,E,T,C,l,r,a,o)})}draw(t,e,i,s){let r;let{context:n}=i;if(!n)return;let{clip:a,baseOpacity:o=1,drawMode:l,x:h,y:d,width:u,height:c}=t.attribute,p=n.nativeContext,g=n.canvas.nativeCanvas;if(l>0){let t=n.canvas,e=tJ.createCanvas({width:t.width,height:t.height,dpr:1}),i=e.getContext("2d"),s=n.nativeContext.getTransform();i.setTransform(s.a,s.b,s.c,s.d,s.e,s.f),1===l&&(i.save(),i.clearRect(0,0,t.width,t.height),i.beginPath(),i.rect(h,d,u,c),i.clip(),i.drawImage(t.nativeCanvas,0,0,t.width,t.height,0,0,t.displayWidth,t.displayHeight),i.restore()),n.nativeContext=i,t.nativeCanvas=e}a?n.save():n.highPerformanceSave();let m=n.baseGlobalAlpha;n.baseGlobalAlpha*=o;let f=(0,R.gh)(t,null==s?void 0:s.theme).group,v=n.modelMatrix;if(n.camera){let e=V.yp.allocate(),i=V.yp.allocate();(0,Q.RT)(i,t,f),(0,t_.G9)(e,v||e,i),n.modelMatrix=e,V.yp.free(i),n.setTransform(1,0,0,1,0,0,!0)}else n.transformFromMatrix(t.transMatrix,!0);n.beginPath(),s.skipDraw?this.drawShape(t,n,0,0,i,s,()=>!1,()=>!1):this.drawShape(t,n,0,0,i);let{scrollX:_=f.scrollX,scrollY:y=f.scrollY}=t.attribute;if((_||y)&&n.translate(_,y),s&&s.drawingCb&&(r=s.drawingCb()),n.modelMatrix!==v&&V.yp.free(n.modelMatrix),n.modelMatrix=v,n.baseGlobalAlpha=m,l>0){let t=n.nativeContext,e=n.canvas.nativeCanvas;p.save(),p.setTransform(n.dpr,0,0,n.dpr,0,0,!0),1===l&&t.rect(h,d,u,c),p.drawImage(e,0,0,e.width,e.height,0,0,n.canvas.displayWidth,n.canvas.displayHeight);let i=t.getTransform();p.setTransform(i.a,i.b,i.c,i.d,i.e,i.f),n.nativeContext=p,n.canvas.nativeCanvas=g,p.restore()}r&&r.then?r.then(()=>{a?n.restore():n.highPerformanceRestore()}):a?n.restore():n.highPerformanceRestore()}};tj=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tF(0,(0,a.f)(l.Qc)),tF(0,(0,o.t)(tR.jd)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tj);var tH,tz,tN,tV,tU=i(7999),tG=i(6401),tW=function(t,e){return function(i,s){e(i,s,t)}},tX=function(t,e,i,s){return new(i||(i=Promise))(function(r,n){function a(t){try{l(s.next(t))}catch(t){n(t)}}function o(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,o)}l((s=s.apply(t,e||[])).next())})};(s=tV||(tV={}))[s.NORMAL=0]="NORMAL",s[s.STOP=1]="STOP";let tY=class extends tB{constructor(t,e,i,s){super(t,s),this.contributions=t,this.lineRender=e,this.areaRender=i,this.drawItemInterceptorContributions=s,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=tV.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new h.n([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(t,e){return tX(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=t,this.lastDrawContext=e,this.checkingForDrawPromise=this.checkForDraw(e);let i=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,i)return;this.currentRenderService=t;let{context:s,viewBox:r}=e;s&&(s.inuse=!0,s.clearMatrix(),s.setTransformForCurrent(!0),s.save(),e.restartIncremental&&this.clearScreen(this.currentRenderService,s,e),s.translate(r.x1,r.y1,!0),s.save(),t.renderTreeRoots.sort((t,e)=>{var i,s;return(null!==(i=t.attribute.zIndex)&&void 0!==i?i:m.xF.zIndex)-(null!==(s=e.attribute.zIndex)&&void 0!==s?s:m.xF.zIndex)}).forEach(t=>{this.renderGroup(t,e)}),this.hooks.completeDraw.tap("top-draw",()=>{s.restore(),s.restore(),s.draw(),s.inuse=!1,this.rendering=!1}))})}_increaseRender(t,e){return tX(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(t,e)})}_renderIncrementalGroup(t,e){return tX(this,void 0,void 0,function*(){this.count=t.count,yield new Promise(i=>{this.renderItem(t,e,{drawingCb:()=>tX(this,void 0,void 0,function*(){if(2!==t.count)yield(0,tp.Ud)(t,m.xF.zIndex,(i,s)=>{if(this.status===tV.STOP)return!0;if(i.isContainer||s<this.currentIdx)return!1;let r=this.currFrameStartAt+t.incremental;return s<r&&(this.currentIdx=s+1,this.renderItem(i,e)),s===r-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),i(!1);else{let s=t.getChildAt(0);if(s.incremental&&s.attribute.segments)for(s.incrementalAt||(s.incrementalAt=0);s.incrementalAt<s.attribute.segments.length;)e.multiGraphicOptions={startAtIdx:s.incrementalAt,length:s.incremental},this.renderItem(s,e),s.incrementalAt+=s.incremental,yield this.waitToNextFrame();else this.renderItem(s,e);i(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return tX(this,void 0,void 0,function*(){return new Promise(t=>{this.global.getRequestAnimationFrame()(()=>{t(!1)})})})}checkForDraw(t){return tX(this,void 0,void 0,function*(){let e=this.rendering;return t.restartIncremental&&(e=!1,yield this.forceStop(),this.resetToInit()),e})}forceStop(){return tX(this,void 0,void 0,function*(){this.rendering&&(this.status=tV.STOP,yield new Promise(t=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=tV.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(t=>"stopCb"!==t.name),t(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(t,e){return tX(this,void 0,void 0,function*(){if(!e.break&&!1!==t.attribute.visibleAll)return t.incremental&&e.startAtId===t._uid?(yield this._increaseRender(t,e),void(e.break=!0)):void(yield new Promise(i=>{this.renderItem(t,e,{drawingCb:()=>tX(this,void 0,void 0,function*(){yield(0,tp.Ud)(t,m.xF.zIndex,t=>tX(this,void 0,void 0,function*(){e.break||t.isContainer&&(yield this.renderGroup(t,e))})),i(!1)})})}))})}};tY=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),tW(0,tc(tv.uz)),tW(1,(0,a.f)(tU.U)),tW(2,(0,a.f)(tG.K)),tW(3,(0,a.f)(l.Qc)),tW(3,(0,o.t)(ty)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Array,Object,Object,Object])],tY);var t$=i(6936);let tK=new r.n(t=>{t(tL.M2).toSelf().inSingletonScope(),t(t$.$).toSelf().inSingletonScope(),t(tv.Iv).to(tB),t(tv.Pf).to(tY),t(tv.Cb).to(tj).inSingletonScope(),t(tv.uz).toService(tv.Cb),(0,l.yb)(t,tR.jd),t(tL.Sg).toSelf().inSingletonScope(),(0,l.yb)(t,tR.tg),(0,l.yb)(t,tv.uz),t(tk).toSelf().inSingletonScope(),t(ty).toService(tk),(0,l.yb)(t,ty)});function tq(){var t;tq.__loaded||(tq.__loaded=!0,w.n.load(F),w.n.load(te),w.n.load(H),w.n.load(J),w.n.load(tn),(t=w.n).load(ta),t.load(to),t.load(td),function(t){t.load(tK)}(w.n))}tq.__loaded=!1,tq();let tJ=w.n.get(d.y2);k.w.global=tJ;let tQ=w.n.get(D.no);k.w.graphicUtil=tQ;let t0=w.n.get(D.Gp);k.w.transformUtil=t0;let t1=w.n.get(G.fB);k.w.graphicService=t1;let t2=w.n.get(D.IT);k.w.layerService=t2},7141:function(t,e,i){i.d(e,{BR:()=>r,hH:()=>s,tn:()=>a,uH:()=>n}),Symbol.for("GraphicPicker");let s=Symbol.for("PickerService");Symbol.for("BoundsPicker");let r=Symbol.for("GlobalPickerService"),n=Symbol.for("PickItemInterceptor"),a=Symbol.for("PickServiceInterceptor")},4159:function(t,e,i){i.d(e,{B:()=>v});var s=i(86),r=i(534),n=i(8535),a=i(9607),o=i(5575),l=i(6082),h=i(8727),d=i(9038),u=i(4154),c=i(9904),p=i(1725);class g{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=s.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0,this.onWheel=t=>{try{let e=new t.constructor(t.type,t);this.pluginService.stage.window.getContext().getCanvas().nativeCanvas.dispatchEvent(e)}catch(t){return}}}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&this.drawHTML([...t.stage.getChildren()])})}deactivate(t){t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(t=>t.name!==this.key),r.w.graphicService.hooks.onRemove.unTap(this.key),r.w.graphicService.hooks.onRelease.unTap(this.key),this.release()}getWrapContainer(t,e,i){let s;return s=e?"string"==typeof e?r.w.global.getElementById(e):e:t.window.getContainer(),{wrapContainer:r.w.global.createDom(Object.assign({tagName:"div",parent:s},i)),nativeContainer:s}}parseDefaultStyleFromGraphic(t){let e="text"===t.type&&t.attribute?t.attribute:(0,n.gh)(t).text;return(0,o.WD)(e)}getTransformOfText(t){let e=(0,n.gh)(t).text,{textAlign:i=e.textAlign,textBaseline:s=e.textBaseline}=t.attribute,{rotateDeg:r,scaleX:a,scaleY:o}=t.globalTransMatrix.toTransformAttrs(),l={left:"0",start:"0",end:"-100%",center:"-50%",right:"-100%",top:"0",middle:"-50%",bottom:"-100%",alphabetic:"-79%"},h={left:"0",start:"0",end:"100%",center:"50%",right:"100%",top:"0",middle:"50%",bottom:"100%",alphabetic:"79%"};return{textAlign:i,transform:`translate(${l[i]},${l[s]}) rotate(${r}deg) scaleX(${a}) scaleY(${o})`,transformOrigin:`${h[i]} ${h[s]}`}}updateStyleOfWrapContainer(t,e,i,s,n){let{pointerEvents:a,penetrateEventList:o=[]}=n,g=this.parseDefaultStyleFromGraphic(t);g.display=!1!==t.attribute.visible?"block":"none",g.pointerEvents=!0===a?"all":a||"none","none"!==g.pointerEvents&&(this.removeWrapContainerEventListener(i),o.forEach(t=>{"wheel"===t&&i.addEventListener("wheel",this.onWheel)})),i.style.position||(i.style.position="absolute",s.style.position="relative");let m=0,f=0,v=t.globalAABBBounds,_=n.anchorType;if((0,l.Z)(_)&&(_="text"===t.type?"position":"boundsLeftTop"),"boundsLeftTop"===_&&(_="top-left"),"position"===_||v.empty()){let e=t.globalTransMatrix;m=e.e,f=e.f}else{let t=(0,h.v)(v,_);m=t.x,f=t.y}let y=r.w.global.getElementTopLeft(s,!1),b=e.window.getTopLeft(!1),x=e.viewBox,S=m+b.left-y.left+x.x1,A=f+b.top-y.top+x.y1;if(g.left=`${S}px`,g.top=`${A}px`,"text"===t.type&&"position"===_&&(g=Object.assign(Object.assign({},g),this.getTransformOfText(t))),(0,d.Z)(n.style)){let e=n.style({top:A,left:S,width:v.width(),height:v.height()},t,i);e&&(g=Object.assign(Object.assign({},g),e))}else(0,u.Z)(n.style)?g=Object.assign(Object.assign({},g),n.style):(0,c.Z)(n.style)&&n.style&&(g=Object.assign(Object.assign({},g),(0,p.wv)(n.style)));r.w.global.updateDom(i,{width:n.width,height:n.height,style:g})}clearCacheContainer(){this.htmlMap&&Object.keys(this.htmlMap).forEach(t=>{this.htmlMap[t]&&this.htmlMap[t].renderId!==this.renderId&&this.removeElement(t)}),this.renderId+=1}drawHTML(t){"browser"===r.w.global.env&&(t.sort((t,e)=>{var i,s;return(null!==(i=t.attribute.zIndex)&&void 0!==i?i:a.xF.zIndex)-(null!==(s=e.attribute.zIndex)&&void 0!==s?s:a.xF.zIndex)}).forEach(t=>{this.renderGroupHTML(t)}),this.clearCacheContainer())}renderGroupHTML(t){this.renderGraphicHTML(t),t.forEachChildren(t=>{t.isContainer?this.renderGroupHTML(t):this.renderGraphicHTML(t)})}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;let{wrapContainer:e}=this.htmlMap[t];e&&r.w.global.removeDom(e),this.htmlMap[t]=null}removeWrapContainerEventListener(t){t.removeEventListener("wheel",this.onWheel)}renderGraphicHTML(t){var e;let{html:i}=t.attribute;if(!i)return;let s=t.stage;if(!s)return;let{dom:r,container:n}=i;if(!r)return;let a=(0,l.Z)(i.id)?`${null!==(e=t.id)&&void 0!==e?e:t._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[a]&&n&&n!==this.htmlMap[a].container&&this.removeElement(a),this.htmlMap&&this.htmlMap[a])"string"==typeof r?this.htmlMap[a].wrapContainer.innerHTML=r:r!==this.htmlMap[a].wrapContainer.firstChild&&(this.htmlMap[a].wrapContainer.removeChild(this.htmlMap[a].wrapContainer.firstChild),this.htmlMap[a].wrapContainer.appendChild(r));else{let{wrapContainer:t,nativeContainer:e}=this.getWrapContainer(s,n);t&&("string"==typeof r?t.innerHTML=r:t.appendChild(r),this.htmlMap||(this.htmlMap={}),this.htmlMap[a]={wrapContainer:t,nativeContainer:e,container:n,renderId:this.renderId})}if(!this.htmlMap||!this.htmlMap[a])return;let{wrapContainer:o,nativeContainer:h}=this.htmlMap[a];this.updateStyleOfWrapContainer(t,s,o,h,i),this.htmlMap[a].renderId=this.renderId}release(){"browser"===r.w.global.env&&this.removeAllDom(this.pluginService.stage.defaultLayer)}removeAllDom(t){this.htmlMap&&(Object.keys(this.htmlMap).forEach(t=>{this.removeElement(t)}),this.htmlMap=null)}}var m=i(6420);class f extends g{constructor(){super(...arguments),this.name="ReactAttributePlugin",this.activeEvent="onRegister",this._uid=s.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={}}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;let{root:e,wrapContainer:i,unmount:s}=this.htmlMap[t];e?r.w.global.getRequestAnimationFrame()(()=>{e.unmount()}):s&&s(),i&&r.w.global.removeDom(i),this.htmlMap[t]=null}renderGraphicHTML(t){var e;let{react:i}=t.attribute;if(!i)return;let s=t.stage;if(!s)return;let r=s.params.ReactDOM,{element:n,container:a}=i;if(!n||!r||!r.createRoot&&!r.render)return;let o=(0,l.Z)(i.id)?`${null!==(e=t.id)&&void 0!==e?e:t._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[o]&&a&&a!==this.htmlMap[o].container&&this.removeElement(o),this.htmlMap&&this.htmlMap[o])r.createRoot?this.htmlMap[o].root.render(n):r.render(n,this.htmlMap[o].wrapContainer);else{let{wrapContainer:t,nativeContainer:e}=this.getWrapContainer(s,a);if(t){if(this.htmlMap||(this.htmlMap={}),r.createRoot){let i=r.createRoot(t);i.render(n),this.htmlMap[o]={root:i,wrapContainer:t,nativeContainer:e,container:a,renderId:this.renderId}}else r.render(n,t),this.htmlMap[o]={wrapContainer:t,nativeContainer:e,container:a,renderId:this.renderId,unmount:()=>{r.unmountComponentAtNode(t)}}}}if(!this.htmlMap||!this.htmlMap[o])return;let{wrapContainer:h,nativeContainer:d}=this.htmlMap[o];this.updateStyleOfWrapContainer(t,s,h,d,i),this.htmlMap[o].renderId=this.renderId}}let v=()=>{m.F.registerPlugin("ReactAttributePlugin",f)}},7050:function(t,e,i){i.d(e,{H:()=>r,X:()=>s});let s=Symbol.for("AutoEnablePlugins"),r=Symbol.for("PluginService")},98:function(t,e,i){i.d(e,{j:()=>C});var s=i(7636),r=i(8103),n=i(7428),a=i(1600),o=i(7089),l=i(8906),h=i(613),d=i(8535),u=i(3482),c=i(3872),p=i(7574),g=i(1123),m=i(1481);function f(t,e,i,s){let{offsetX:r=0,offsetY:n=0,offsetZ:a=0}=s||{},o=!0;e.forEach(e=>{e.defined?(o&&t.moveTo(e.p0.x+r,e.p0.y+n,a),(0,m.w)(t,e,1,s),o=!1):o=!0}),o=!0;for(let e=i.length-1;e>=0;e--){let l=i[e];l.defined?(o&&t.lineTo(l.p0.x+r,l.p0.y+n,a),(0,m.w)(t,l,1,s),o=!1):o=!0}t.closePath()}var v=i(1749),_=i(231),y=i(9292),b=i(623),x=i(6936),S=i(3386);class A extends x.${constructor(){super(...arguments),this.time=c.Oh.afterFillStroke}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){var p,g,m,f;this.textureMap||this.initTextureMap(e,t.stage);let{attribute:v=t.attribute}=c||{},{texture:_=null!==(p=t.attribute.texture)&&void 0!==p?p:(0,S.hT)(l,"texture"),textureColor:y=null!==(g=t.attribute.textureColor)&&void 0!==g?g:(0,S.hT)(l,"textureColor"),textureSize:b=null!==(m=t.attribute.textureSize)&&void 0!==m?m:(0,S.hT)(l,"textureSize"),texturePadding:x=null!==(f=t.attribute.texturePadding)&&void 0!==f?f:(0,S.hT)(l,"texturePadding")}=v;_&&this.drawTexture(_,t,e,i,s,l,y,b,x)}}let k=new A,w=b.R6;var T=function(t,e){return function(i,s){e(i,s,t)}};let C=class extends y.Y{constructor(t){super(),this.areaRenderContribitions=t,this.numberType=v.Ri,this.builtinContributions=[k,w],this.init(t)}drawLinearAreaHighPerformance(t,e,i,r,n,a,o,l,h,d,u,c,p){var g,m,f;let{points:v}=t.attribute;if(v.length<2)return;e.beginPath();let _=null!==(g=this.z)&&void 0!==g?g:0,y=v[0];e.moveTo(y.x+o,y.y+l,_);for(let t=1;t<v.length;t++){let i=v[t];e.lineTo(i.x+o,i.y+l,_)}for(let t=v.length-1;t>=0;t--){let i=v[t];e.lineTo((null!==(m=i.x1)&&void 0!==m?m:i.x)+o,(null!==(f=i.y1)&&void 0!==f?f:i.y)+l,_)}e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,o,l,!!n,!1,i,!1,h,d,c,null,{attribute:t.attribute});let{x:b=0,x:x=0}=t.attribute;!1!==i&&(c?c(e,t.attribute,h):n&&(e.setCommonStyle(t,t.attribute,b-o,x-l,h),e.fill())),this.afterRenderStep(t,e,o,l,!!n,!1,i,!1,h,d,c,null,{attribute:t.attribute}),(()=>{var i,n;if(r){let{stroke:r=h&&h.stroke}=t.attribute;if((0,s.Z)(r)&&(r[0]||r[2])&&!1===r[1]){if(e.beginPath(),r[0]){e.moveTo(y.x+o,y.y+l,_);for(let t=1;t<v.length;t++){let i=v[t];e.lineTo(i.x+o,i.y+l,_)}}else if(r[2]){let t=v[v.length-1];e.moveTo(t.x+o,t.y+l,_);for(let t=v.length-2;t>=0;t--){let s=v[t];e.lineTo((null!==(i=s.x1)&&void 0!==i?i:s.x)+o,(null!==(n=s.y1)&&void 0!==n?n:s.y)+l,_)}}}p?p(e,t.attribute,h):(e.setStrokeStyle(t,t.attribute,b-o,x-l,h),e.stroke())}})()}drawShape(t,e,i,s,n,a,o,l){var u,c,p,g,m,f;let v=(0,d.gh)(t,null==a?void 0:a.theme).area,{fill:_=v.fill,stroke:y=v.stroke,fillOpacity:b=v.fillOpacity,z:x=v.z,strokeOpacity:S=v.strokeOpacity,curveTension:A=v.curveTension,connectedType:k=v.connectedType}=t.attribute,w=this.valid(t,v,o,l);if(!w)return;let{doFill:T}=w,C=w.doStroke&&w.sVisible,{clipRange:M=v.clipRange,closePath:E,points:B,segments:O}=t.attribute,{curveType:I=v.curveType}=t.attribute;function R(t,e){return"connect"!==e?t:t.filter(t=>!1!==t.defined)}if(E&&"linear"===I&&(I="linearClosed"),1===M&&!O&&!B.some(t=>!1===t.defined)&&"linear"===I)return this.drawLinearAreaHighPerformance(t,e,!!_,C,b,S,i,s,v,n,a,o,l);if(t.shouldUpdateShape()){if(O&&O.length){let e,i,s;let r=O.map((t,s)=>{if(t.points.length<=1&&0===s)return t.points[0]&&(i={endX:t.points[0].x,endY:t.points[0].y}),null;1===s?e={x:i.endX,y:i.endY}:s>1&&(e.x=i.endX,e.y=i.endY);let r=(0,h.X0)(R(t.points,k),I,{startPoint:e,curveTension:A});return i=r,r}).filter(t=>!!t),n=[];for(let t=O.length-1;t>=0;t--){let e=O[t].points,i=[];for(let t=e.length-1;t>=0;t--)i.push({x:null!==(u=e[t].x1)&&void 0!==u?u:e[t].x,y:null!==(c=e[t].y1)&&void 0!==c?c:e[t].y});if(0!==t){let e=O[t-1].points,s=e[e.length-1];s&&i.push({x:null!==(p=s.x1)&&void 0!==p?p:s.x,y:null!==(g=s.y1)&&void 0!==g?g:s.y})}i.length>1&&(s=(0,h.X0)(R(i,k),"stepBefore"===I?"stepAfter":"stepAfter"===I?"stepBefore":I,{curveTension:A}),n.unshift(s))}t.cacheArea=n.map((t,e)=>({top:r[e],bottom:t}))}else{if(!B||!B.length)return t.cacheArea=null,void t.clearUpdateShapeTag();{let e=R(B,k),i=[];for(let t=e.length-1;t>=0;t--)i.push({x:null!==(m=e[t].x1)&&void 0!==m?m:e[t].x,y:null!==(f=e[t].y1)&&void 0!==f?f:e[t].y});let s=(0,h.X0)(e,I,{curveTension:A}),r=(0,h.X0)(i,"stepBefore"===I?"stepAfter":"stepAfter"===I?"stepBefore":I,{curveTension:A});t.cacheArea={top:s,bottom:r}}}t.clearUpdateShapeTag()}if(Array.isArray(t.cacheArea)){let a=t.attribute.segments.filter(t=>t.points.length);if(1===a[0].points.length&&a.shift(),1===M){let r=!1;t.cacheArea.forEach((h,d)=>{r||(r=this.drawSegmentItem(e,h,T,b,C,S,a[d],[v,t.attribute],M,i,s,x,t,n,o,l))})}else{let h=M*t.cacheArea.reduce((t,e)=>t+e.top.getLength(),0),d=0,u=!1;t.cacheArea.forEach((c,p)=>{if(u)return;let g=c.top.getLength(),m=(h-d)/g;d+=g,m>0&&(u=this.drawSegmentItem(e,c,T,b,C,S,a[p],[v,t.attribute],(0,r.VV)(m,1),i,s,x,t,n,o,l))})}}else this.drawSegmentItem(e,t.cacheArea,T,b,C,S,t.attribute,v,M,i,s,x,t,n,o,l)}draw(t,e,i,s){let r=(0,d.gh)(t,null==s?void 0:s.theme).area;this._draw(t,r,!1,i,s)}drawSegmentItem(t,e,i,s,r,n,a,o,l,h,d,u,c,p,g,m){return this._drawSegmentItem(t,e,i,s,r,n,a,o,l,h,d,u,c,p,g,m)}_drawSegmentItem(t,e,i,n,a,o,l,h,d,u,m,v,y,b,x,S){if(!(e&&e.top&&e.bottom&&e.top.curves&&e.top.curves.length&&e.bottom.curves&&e.bottom.curves.length))return;t.beginPath();let{points:A,segments:k}=y.attribute,w,T,C=c.Nm.ROW;if(k){let t=k[k.length-1];T=k[0].points[0],w=t.points[t.points.length-1]}else T=A[0],w=A[A.length-1];let M=(0,r.Wn)(w.x-T.x),E=(0,r.Wn)(w.y-T.y);C=null==w.x1?c.Nm.ROW:null==w.y1?c.Nm.COLUMN:Number.isFinite(M+E)?M>E?c.Nm.ROW:c.Nm.COLUMN:c.Nm.ROW,function(t,e,i,s){var n;let{top:a,bottom:o}=e;if(a.curves.length!==o.curves.length)return;if(i>=1){let e=[],i=[],r=!0;for(let n=0,l=a.curves.length;n<l;n++){let h=a.curves[n];r!==h.defined?(r?(f(t,e,i,s),e.length=0,i.length=0):(e.push(h),i.push(o.curves[l-n-1])),r=!r):r&&(e.push(h),i.push(o.curves[l-n-1]))}return void f(t,e,i,s)}if(i<=0)return;let{direction:l}=s||{},{curves:h}=a,d=null!==(n=h[h.length-1].p3)&&void 0!==n?n:h[h.length-1].p1,u=(0,r.Wn)(d.x-h[0].p0.x),m=(0,r.Wn)(d.y-h[0].p0.y);l=null!=l?l:u>m?c.Nm.ROW:c.Nm.COLUMN,Number.isFinite(u)||(l=c.Nm.COLUMN),Number.isFinite(m)||(l=c.Nm.ROW);let v=i*(l===c.Nm.ROW?u:m),_=0,y=!0,b=[],x=[];for(let e=0,i=a.curves.length;e<i;e++){let r=a.curves[e],n=r.getLength(l),h=(v-_)/n;if(h<0)break;_+=n;let d=null,u=null;y!==r.defined?(y?(f(t,b,x,s),b.length=0,x.length=0):(d=r,u=o.curves[i-e-1]),y=!y):y&&(d=r,u=o.curves[i-e-1]),d&&u&&(h<1&&(d=d.p2&&d.p3?(0,p.mG)(d,h)[0]:(0,g.d)(d,h)[0],u=u.p2&&u.p3?(0,p.mG)(u,1-h)[1]:(0,g.d)(u,1-h)[1]),d.defined=y,u.defined=y,b.push(d),x.push(u)),d=null,u=null}f(t,b,x,s)}(t.camera?t:t.nativeContext,e,d,{offsetX:u,offsetY:m,offsetZ:v,direction:C}),this.beforeRenderStep(y,t,u,m,!!n,!1,i,!1,h,b,x,null,{attribute:l}),t.setShadowBlendStyle&&t.setShadowBlendStyle(y,l,h);let{x:B=0,x:O=0}=l;return!1!==i&&(x?x(t,l,h):n&&(t.setCommonStyle(y,l,B-u,O-m,h),t.fill())),this.afterRenderStep(y,t,u,m,!!n,!1,i,!1,h,b,x,null,{attribute:l}),(()=>{if(!1!==a){if(S)S(t,l,h);else{let{stroke:i=h&&h[1]&&h[1].stroke}=l;(0,s.Z)(i)&&(i[0]||i[2])&&!1===i[1]&&(t.beginPath(),(0,_.fW)(t.camera?t:t.nativeContext,i[0]?e.top:e.bottom,d,C===c.Nm.ROW?"x":"y",{offsetX:u,offsetY:m,offsetZ:v})),t.setStrokeStyle(y,l,B-u,O-m,h),t.stroke()}}})(),!1}};C=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),T(0,(0,a.f)(l.Qc)),T(0,(0,o.t)(u.Gq)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],C)},9292:function(t,e,i){i.d(e,{Y:()=>c});var s=i(5977),r=i(8113),n=i(6003),a=i(3872),o=i(7317),l=i(8535),h=i(5399),d=i(623);let u={x:0,y:0,z:0,lastModelMatrix:null};class c{init(t){t&&(this._renderContribitions=t.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(d.rJ),this.builtinContributions.push(d.Eo),this.builtinContributions.forEach(t=>this._renderContribitions.push(t)),this._renderContribitions.length&&(this._renderContribitions.sort((t,e)=>e.order-t.order),this._beforeRenderContribitions=this._renderContribitions.filter(t=>t.time===a.Oh.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(t=>t.time===a.Oh.afterFillStroke))}beforeRenderStep(t,e,i,s,r,n,a,o,l,h,d,u,c){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(p=>{(!p.supportedAppName||!t.stage||!t.stage.params||!t.stage.params.context||!t.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName))&&p.drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c)})}afterRenderStep(t,e,i,s,r,n,a,o,l,h,d,u,c){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(p=>{(!p.supportedAppName||!t.stage||!t.stage.params||!t.stage.params.context||!t.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName))&&p.drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c)})}drawPathProxy(t,e,i,s,r,a,o,d){if(!t.pathProxy)return!1;let u=(0,l.gh)(t,null==a?void 0:a.theme)[t.type.replace("3d","")],{fill:c=u.fill,stroke:p=u.stroke,opacity:g=u.opacity,fillOpacity:m=u.fillOpacity,lineWidth:f=u.lineWidth,strokeOpacity:v=u.strokeOpacity,visible:_=u.visible,x:y=u.x,y:b=u.y}=t.attribute,x=(0,n.Bv)(g,m,c),S=(0,n.Kf)(g,v),A=(0,n.dz)(c),k=(0,n.ak)(p,f);if(!_||!A&&!k||!(x||S||o||d))return!0;e.beginPath();let w="function"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy;return(0,h.h)(w.commandList,e,i,s),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),this.beforeRenderStep(t,e,i,s,A,k,x,S,u,r,o,d),k&&(d?d(e,t.attribute,u):S&&(e.setStrokeStyle(t,t.attribute,i-y,s-b,u),e.stroke())),A&&(o?o(e,t.attribute,u):x&&(e.setCommonStyle(t,t.attribute,i-y,s-b,u),e.fill())),this.afterRenderStep(t,e,i,s,A,k,x,S,u,r,o,d),!0}valid(t,e,i,s){let{fill:r=e.fill,background:a,stroke:o=e.stroke,opacity:l=e.opacity,fillOpacity:h=e.fillOpacity,lineWidth:d=e.lineWidth,strokeOpacity:u=e.strokeOpacity,visible:c=e.visible}=t.attribute,p=(0,n.Bv)(l,h,r),g=(0,n.Kf)(l,u),m=(0,n.dz)(r,a),f=(0,n.ak)(o,d);return!(!t.valid||!c)&&!(!m&&!f)&&!!(p||g||i||s||a)&&{fVisible:p,sVisible:g,doFill:m,doStroke:f}}transform(t,e,i,n=!1){let{x:a=e.x,y:l=e.y,z:h=e.z,scaleX:d=e.scaleX,scaleY:c=e.scaleY,angle:p=e.angle,postMatrix:g}=t.attribute,m=i.modelMatrix,f=i.camera;u.x=a,u.y=l,u.z=h,u.lastModelMatrix=m;let v=f&&(n||(0,s.M_)(t)),_=v?t.transMatrix.onlyTranslate()&&!g:1===d&&1===c&&0===p&&!g;if(v){let n=r.yp.allocate(),a=r.yp.allocate();(0,s.RT)(a,t,e),(0,o.G9)(n,m||n,a),u.x=0,u.y=0,u.z=0,i.modelMatrix=n,i.setTransform(1,0,0,1,0,0,!0),r.yp.free(a)}if(_&&!m){let s=t.getOffsetXY(e);u.x+=s.x,u.y+=s.y,u.z=h,i.setTransformForCurrent()}else if(v)u.x=0,u.y=0,u.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(f&&i.project){let s=t.getOffsetXY(e);u.x+=s.x,u.y+=s.y,this.transformWithoutTranslate(i,u.x,u.y,u.z,d,c,p)}else i.transformFromMatrix(t.transMatrix,!0),u.x=0,u.y=0,u.z=0;return u}transformUseContext2d(t,e,i,s){let r=s.camera;if(this.camera=r,r){let e=t.AABBBounds,r=e.x2-e.x1,n=e.y2-e.y1,a=s.project(0,0,i),o=s.project(r,0,i),l=s.project(r,n,i),h={x:0,y:0},d={x:r,y:0},u={x:r,y:n};s.camera=null;let c=1/(h.x*(u.y-d.y)-d.x*u.y+u.x*d.y+(d.x-u.x)*h.y),p=-(h.y*(l.x-o.x)-d.y*l.x+u.y*o.x+(d.y-u.y)*a.x)*c,g=(d.y*l.y+h.y*(o.y-l.y)-u.y*o.y+(u.y-d.y)*a.y)*c,m=(h.x*(l.x-o.x)-d.x*l.x+u.x*o.x+(d.x-u.x)*a.x)*c,f=-(d.x*l.y+h.x*(o.y-l.y)-u.x*o.y+(u.x-d.x)*a.y)*c,v=(h.x*(u.y*o.x-d.y*l.x)+h.y*(d.x*l.x-u.x*o.x)+(u.x*d.y-d.x*u.y)*a.x)*c,_=(h.x*(u.y*o.y-d.y*l.y)+h.y*(d.x*l.y-u.x*o.y)+(u.x*d.y-d.x*u.y)*a.y)*c;s.setTransform(p,g,m,f,v,_,!0)}}restoreTransformUseContext2d(t,e,i,s){this.camera&&(s.camera=this.camera)}transformWithoutTranslate(t,e,i,s,r,n,a){let o=t.project(e,i,s);t.translate(o.x,o.y,!1),t.scale(r,n,!1),t.rotate(a,!1),t.translate(-o.x,-o.y,!1),t.setTransformForCurrent()}_draw(t,e,i,s,n){let{context:a}=s;if(!a)return;let{renderable:o}=t.attribute;if(!1===o)return;a.highPerformanceSave();let{x:l,y:h,z:d,lastModelMatrix:u}=this.transform(t,e,a,i);this.z=d,this.drawPathProxy(t,a,l,h,s,n)||(this.drawShape(t,a,l,h,s,n),this.z=0,a.modelMatrix!==u&&r.yp.free(a.modelMatrix),a.modelMatrix=u),a.highPerformanceRestore()}}},623:function(t,e,i){i.d(e,{Eo:()=>f,M2:()=>c,R6:()=>p,Sg:()=>g,rJ:()=>m});var s=i(7428),r=i(1600),n=i(7089),a=i(8535),o=i(1164),l=i(3872),h=i(8906),d=i(3482),u=function(t,e){return function(i,s){e(i,s,t)}};class c{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,o,l,h,d,u,c,p){var g;let{background:m,backgroundOpacity:f=null!==(g=t.attribute.fillOpacity)&&void 0!==g?g:h.backgroundOpacity,opacity:v=h.opacity,backgroundMode:_=h.backgroundMode,backgroundFit:y=h.backgroundFit,backgroundKeepAspectRatio:b=h.backgroundKeepAspectRatio,backgroundScale:x=h.backgroundScale,backgroundOffsetX:S=h.backgroundOffsetX,backgroundOffsetY:A=h.backgroundOffsetY,backgroundClip:k=h.backgroundClip}=t.attribute;if(m){if(t.backgroundImg&&t.resources){let r=t.resources.get(m);if("success"!==r.state||!r.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){let i=(0,a.gh)(t.parent).group,{scrollX:s=i.scrollX,scrollY:r=i.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(s,r)}k&&e.clip();let n=t.AABBBounds;e.setCommonStyle(t,t.attribute,i,s,h),e.globalAlpha=f*v,this.doDrawImage(e,r.data,n,{backgroundMode:_,backgroundFit:y,backgroundKeepAspectRatio:b,backgroundScale:x,backgroundOffsetX:S,backgroundOffsetY:A}),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,s,h),e.globalAlpha=f*v,e.fillStyle=m,e.fill(),e.highPerformanceRestore()}}doDrawImage(t,e,i,s){let{backgroundMode:r,backgroundFit:n,backgroundKeepAspectRatio:a,backgroundScale:l=1,backgroundOffsetX:h=0,backgroundOffsetY:d=0}=s,u=i.width(),c=i.height(),p=u,g=c;if("no-repeat"===r){if(n){if(a){let s=Math.max(u/e.width,c/e.height);t.drawImage(e,i.x1+h,i.y1+d,e.width*s*l,e.height*s*l)}else t.drawImage(e,i.x1,i.y1,i.width(),i.height())}else{let s=e.width*l,r=e.height*l;t.drawImage(e,i.x1+h,i.y1+d,s,r)}}else{if(n&&"repeat"!==r&&(e.width||e.height)){let i=e.width,s=e.height;"repeat-x"===r?(p=c/s*i,g=c):"repeat-y"===r&&(g=u/i*s,p=u);let n=t.dpr,a=o.A.allocate({width:p,height:g,dpr:n}),l=a.getContext("2d");l&&(l.inuse=!0,l.clearMatrix(),l.setTransformForCurrent(!0),l.clearRect(0,0,p,g),l.drawImage(e,0,0,p,g),e=a.nativeCanvas),o.A.free(a)}let s=t.dpr,a=t.createPattern(e,r);a.setTransform&&a.setTransform(new DOMMatrix([1/s,0,0,1/s,0,0])),t.fillStyle=a,t.translate(i.x1,i.y1),t.fillRect(0,0,u,c),t.translate(-i.x1,-i.y1)}}}let p=new c,g=class{constructor(t){this.subRenderContribitions=t,this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(p=>{p.render(t,e,i,s,r,n,a,o,l,h,d,u,c)})}};g=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),u(0,(0,r.f)(h.Qc)),u(0,(0,n.t)(d.tg)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=new class{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){var p,g;let{clipConfig:m}=t.attribute;if(!m)return;let f=t.getClipPath();if(!f)return;let v=!(d||u),_=t.AABBBounds,y=null!==(p=t.attribute.width)&&void 0!==p?p:_.width(),b=null!==(g=t.attribute.height)&&void 0!==g?g:_.height();v&&e.save(),e.beginPath(),!1===f.draw(e,[y,b],i+y/2,s+b/2,0)&&e.closePath(),d&&d(e,t.attribute,l,!0),v&&e.clip()}},f=new class{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){let{clipConfig:p}=t.attribute;p&&t.getClipPath()&&(d||u||e.restore())}}},6936:function(t,e,i){i.d(e,{$:()=>o,H:()=>l});var s=i(1164),r=i(3872),n=i(5196),a=i(8103);class o{constructor(){this.time=r.Oh.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}createCommonPattern(t,e,i,r,n){let a=(t-2*e)/2,o=r.dpr,l=s.A.allocate({width:t,height:t,dpr:o}),h=l.getContext("2d");if(!h)return null;h.inuse=!0,h.clearMatrix(),h.setTransformForCurrent(!0),h.clearRect(0,0,t,t),n(a,h);let d=r.createPattern(l.nativeCanvas,"repeat");return d.setTransform&&d.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),s.A.free(l),d}createCirclePattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(t,e)=>{e.fillStyle=i,e.arc(t,t,t,0,a.f7),e.fill()})}createDiamondPattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(e,s)=>{let r=t/2;s.fillStyle=i,s.moveTo(r,r-e),s.lineTo(e+r,r),s.lineTo(r,r+e),s.lineTo(r-e,r),s.closePath(),s.fill()})}createRectPattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(t,s)=>{s.fillStyle=i,s.fillRect(e,e,2*t,2*t)})}createVerticalLinePattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(s,r)=>{r.fillStyle=i,r.fillRect(e,0,2*s,t)})}createHorizontalLinePattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(s,r)=>{r.fillStyle=i,r.fillRect(0,e,t,2*s)})}createBiasLRLinePattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(e,s)=>{s.strokeStyle=i,s.lineWidth=e,s.moveTo(0,0),s.lineTo(t,t);let r=t/2,n=-r;s.moveTo(r,n),s.lineTo(r+t,n+t),s.moveTo(-r,-n),s.lineTo(-r+t,-n+t),s.stroke()})}createBiasRLLinePattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(e,s)=>{s.strokeStyle=i,s.lineWidth=e,s.moveTo(t,0),s.lineTo(0,t);let r=t/2;s.moveTo(t+r,r),s.lineTo(r,r+t),s.moveTo(t-r,-r),s.lineTo(-r,-r+t),s.stroke()})}createGridPattern(t,e,i,s){return this.createCommonPattern(t,e,i,s,(t,s)=>{s.fillStyle=i,s.fillRect(e,e,t,t),s.fillRect(e+t,e+t,t,t)})}initTextureMap(t,e){this.textureMap=new Map}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){this.textureMap||this.initTextureMap(e,t.stage);let{texture:p=l.texture,textureColor:g=l.textureColor,textureSize:m=l.textureSize,texturePadding:f=l.texturePadding}=t.attribute;p&&this.drawTexture(p,t,e,i,s,l,g,m,f)}drawTexture(t,e,i,r,a,o,l,h,d){var u;let{textureRatio:c=o.textureRatio,textureOptions:p=null}=e.attribute,g=this.textureMap.get(t);if(!g)switch(t){case"circle":g=this.createCirclePattern(h,d,l,i);break;case"diamond":g=this.createDiamondPattern(h,d,l,i);break;case"rect":g=this.createRectPattern(h,d,l,i);break;case"vertical-line":g=this.createVerticalLinePattern(h,d,l,i);break;case"horizontal-line":g=this.createHorizontalLinePattern(h,d,l,i);break;case"bias-lr":g=this.createBiasLRLinePattern(h,d,l,i);break;case"bias-rl":g=this.createBiasRLLinePattern(h,d,l,i);break;case"grid":g=this.createGridPattern(h,d,l,i)}if(p&&p.dynamicTexture){let g;let{gridConfig:m={},useNewCanvas:f}=p,v=e.AABBBounds;r=v.x1,a=v.y1;let _=i;if(f){let t=(g=s.A.allocate({width:v.width(),height:v.height(),dpr:i.dpr})).getContext("2d");t.clearRect(0,0,v.width(),v.height()),r=0,a=0,i=t}if(_.save(),e.parent&&!e.transMatrix.onlyTranslate()){let{scrollX:t=0,scrollY:i=0}=e.parent.attribute;_.setTransformFromMatrix(e.parent.globalTransMatrix),_.translate(t,i,!0)}_.setCommonStyle(e,e.attribute,r,a,o),_.clip();let y=v.width(),b=v.height(),x=m.columns?m.columns:Math.ceil(y/h),S=m.rows?m.rows:Math.ceil(b/h),A=m.gutterColumn?m.gutterColumn:2*d,k=m.gutterRow?m.gutterRow:2*d;this._tempSymbolGraphic||(this._tempSymbolGraphic=(0,n.t)({}));let w=m.columns?y/m.columns:h,T=m.rows?b/m.rows:h;this._tempSymbolGraphic.setAttributes({size:[w-A,T-k],symbolType:t});let C=this._tempSymbolGraphic.getParsedPath();for(let t=0;t<S;t++)for(let s=0;s<x;s++){let n=r+h/2+s*h,o=a+h/2+t*h;null===(u=p.beforeDynamicTexture)||void 0===u||u.call(p,i,t,s,S,x,c,e,v.width(),v.height()),i.beginPath(),!1===C.draw(i,Math.min(w-A,T-k),n,o,0)&&i.closePath(),i.fillStyle=l,p.dynamicTexture(i,t,s,S,x,c,e,v.width(),v.height())}f&&(_.globalAlpha=1,_.drawImage(g.nativeCanvas,0,0,g.nativeCanvas.width,g.nativeCanvas.height,v.x1,v.y1,v.width()*_.dpr,v.height()*_.dpr)),_.restore()}else if(g)i.highPerformanceSave(),i.setCommonStyle(e,e.attribute,r,a,o),i.fillStyle=g,i.fill(),i.highPerformanceRestore();else if("wave"===t){i.save(),i.setCommonStyle(e,e.attribute,r,a,o),i.clip();let t=e.AABBBounds;(function(t,e,i,s,r,n,a){let{fill:o="orange",percent:l=.6,frequency:h=4,opacity:d,phi:u=0}=r,{amplitude:c=10}=r;c*=e<=.5?4*e-1:-4*e+3;let p=s*(1-l),g=Math.max(Math.round(i/70),2);t.beginPath(),t.moveTo(0+n,s+a),t.lineTo(0+n,p+a);let m=i/h*e,f=i/Math.PI/(2*h);for(let e=0;e<i;e+=g){let i=c*Math.sin((e+m+u)/f+u);t.lineTo(e+n,p+i+a)}t.lineTo(i+n,s+a),t.closePath(),t.fillStyle=o,isFinite(d)&&(t.globalAlpha=d),t.fill()})(i,c,t.width(),t.height(),Object.assign(Object.assign({},p||{}),{fill:l}),r+t.x1-r,a+t.y1-a),i.restore()}}}let l=new o},3482:function(t,e,i){i.d(e,{$K:()=>u,Gq:()=>r,JO:()=>a,Mj:()=>o,OL:()=>s,U7:()=>l,X3:()=>d,d5:()=>h,jd:()=>n,tg:()=>c});let s=Symbol.for("ArcRenderContribution"),r=Symbol.for("AreaRenderContribution");Symbol.for("CircleRenderContribution");let n=Symbol.for("GroupRenderContribution"),a=Symbol.for("ImageRenderContribution"),o=Symbol.for("PathRenderContribution"),l=Symbol.for("PolygonRenderContribution"),h=Symbol.for("RectRenderContribution"),d=Symbol.for("SymbolRenderContribution"),u=Symbol.for("TextRenderContribution");Symbol.for("CommonRenderContribution");let c=Symbol.for("InteractiveSubRenderContribution")},8792:function(t,e,i){i.d(e,{Er:()=>p,NB:()=>g,d4:()=>c,gq:()=>f,k7:()=>m,sH:()=>u});var s=i(7636),r=i(7428),n=i(3116),a=i(623),o=i(6490),l=i(3872),h=i(6936),d=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a};class u{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,a,l,h,d,u,c,p,g){let{outerBorder:m,innerBorder:f}=t.attribute,v=m&&!1!==m.visible,_=f&&!1!==f.visible;if(!v&&!_)return;let{cornerRadius:y=u.cornerRadius,cornerType:b=u.cornerType,opacity:x=u.opacity,x:S=u.x,y:A=u.y,scaleX:k=u.scaleX,scaleY:w=u.scaleY,x1:T,y1:C,keepStrokeScale:M=u.keepStrokeScale}=t.attribute,{width:E,height:B}=t.attribute;E=(null!=E?E:T-i)||0,B=(null!=B?B:C-r)||0;let O=(a,l)=>{let h=!(!a||!a.stroke),d="outerBorder"===l?-1:1,{distance:c=u[l].distance}=a,p=M?c:(0,n.D)(e,c,e.dpr),m=i+d*p,f=r+d*p,v=2*p;if(0===y||(0,s.Z)(y)&&y.every(t=>0===t)?(e.beginPath(),e.rect(m,f,E-d*v,B-d*v)):(e.beginPath(),(0,o.U)(e,m,f,E-d*v,B-d*v,y,"bevel"!==b)),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),g)g(e,a,u[l]);else if(h){let s=u[l].opacity;u[l].opacity=x,e.setStrokeStyle(t,a,(S-i)/k,(A-r)/w,u[l]),u[l].opacity=s,e.stroke()}};v&&O(m,"outerBorder"),_&&O(f,"innerBorder")}}let c=class{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){let{stroke:p=l.stroke}=t.attribute;Array.isArray(p)&&p.some(t=>!1===t)&&(c.doStroke=!1)}};c=d([(0,r.b)()],c);let p=class{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,a,l,h,d,u,c,p){let{x1:g,y1:m,x:f=d.x,y:v=d.y,stroke:_=d.stroke,cornerRadius:y=d.cornerRadius,cornerType:b=d.cornerType}=t.attribute,{width:x,height:S}=t.attribute;if(x=(null!=x?x:g-f)||0,S=(null!=S?S:m-v)||0,Array.isArray(_)&&_.some(t=>!1===t)){if(e.setStrokeStyle(t,t.attribute,i,r,d),!(0===y||(0,s.Z)(y)&&y.every(t=>0===t))){let s,n=0;return(0,o.U)(e,i,r,x,S,y,"bevel"!==b,[,,,,].fill(0).map((a,o)=>(a,l,h,u)=>{_[o]&&(n===o-1&&_[o]===s||(e.setStrokeStyle(t,Object.assign(Object.assign({},t.attribute),{stroke:_[o]}),i,r,d),e.beginPath(),e.moveTo(a,l),s=_[o]),n=o,e.lineTo(h,u),e.stroke(),3===o&&e.beginPath())})),void e.stroke()}if(e.beginPath(),e.moveTo(i,r),_[0]?e.lineTo(i+x,r):e.moveTo(i+x,r),_[1]?e.lineTo(i+x,r+S):e.moveTo(i+x,r+S),_[2]?e.lineTo(i,r+S):e.moveTo(i,r+S),_[3]){let t=_[0]?r-e.lineWidth/2:r;e.lineTo(i,t)}else e.moveTo(i,r);e.stroke()}}};p=d([(0,r.b)()],p);let g=new u,m=h.H,f=a.R6},4033:function(t,e,i){i.d(e,{C:()=>d});var s=i(4154),r=i(3872),n=i(623),a=i(6910),o=i(1207),l=i(6490);class h extends n.M2{constructor(){super(...arguments),this.time=r.Oh.beforeFillStroke}drawShape(t,e,i,r,n,h,d,u,c,p,g,m){var f,v,_,y,b,x,S,A,k,w;let T;let{backgroundMode:C=c.backgroundMode,backgroundFit:M=c.backgroundFit,backgroundKeepAspectRatio:E=c.backgroundKeepAspectRatio}=t.attribute,B,{background:O}=t.attribute;if(!O)return;let I=()=>{"richtext"===t.type&&(e.restore(),e.save(),B&&e.setTransformFromMatrix(B,!0,1))};"richtext"===t.type&&(B=e.currentMatrix.clone(),e.restore(),e.save(),e.setTransformForCurrent());let R=(0,s.Z)(O)&&O.background,P=t.transMatrix.onlyTranslate();if(R){let e=t.AABBBounds,i=(null!==(f=O.x)&&void 0!==f?f:e.x1)+(null!==(v=O.dx)&&void 0!==v?v:0),s=(null!==(_=O.y)&&void 0!==_?_:e.y1)+(null!==(y=O.dy)&&void 0!==y?y:0),r=null!==(b=O.width)&&void 0!==b?b:e.width(),n=null!==(x=O.height)&&void 0!==x?x:e.height();if(T=a.et.allocate(i,s,i+r,s+n),O=O.background,!P){let t=T.width(),e=T.height();T.set((null!==(S=O.x)&&void 0!==S?S:0)+(null!==(A=O.dx)&&void 0!==A?A:0),(null!==(k=O.y)&&void 0!==k?k:0)+(null!==(w=O.dy)&&void 0!==w?w:0),t,e)}}else T=t.AABBBounds,P||(T=(0,o.o)(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(t.backgroundImg&&t.resources){let s=t.resources.get(O);if("success"!==s.state||!s.data)return void I();e.highPerformanceSave(),P&&e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.setCommonStyle(t,t.attribute,i,r,c),this.doDrawImage(e,s.data,T,{backgroundMode:C,backgroundFit:M,backgroundKeepAspectRatio:E}),e.highPerformanceRestore(),e.setTransformForCurrent()}else{let{backgroundCornerRadius:s}=t.attribute;e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,c),e.fillStyle=O,s?((0,l.U)(e,T.x1,T.y1,T.width(),T.height(),s,!0),e.fill()):e.fillRect(T.x1,T.y1,T.width(),T.height()),e.highPerformanceRestore()}R&&a.et.free(T),I()}}let d=new h},6401:function(t,e,i){i.d(e,{K:()=>h});var s=i(7428),r=i(1749),n=i(8535),a=i(6003),o=i(98),l=i(231);let h=class extends o.j{constructor(){super(...arguments),this.numberType=r.Ri}drawShape(t,e,i,s,r,o,l){if(t.incremental&&r.multiGraphicOptions){let{startAtIdx:o,length:h}=r.multiGraphicOptions,{segments:d=[]}=t.attribute;if(o>d.length)return;let u=(0,n.gh)(t).area,{fill:c=u.fill,fillOpacity:p=u.fillOpacity,opacity:g=u.opacity,visible:m=u.visible}=t.attribute,f=(0,a.Bv)(g,p,c),v=(0,a.dz)(c);if(t.valid&&m&&v&&(f||l))for(let r=o;r<o+h;r++)this.drawIncreaseSegment(t,e,d[r-1],d[r],t.attribute.segments[r],[u,t.attribute],i,s)}else super.drawShape(t,e,i,s,r,o,l)}drawIncreaseSegment(t,e,i,s,r,n,a,o){s&&(e.beginPath(),(0,l.hJ)(e.camera?e:e.nativeContext,i,s,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,r,n),e.setCommonStyle(t,r,a,o,n),e.fill())}};h=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],h)},7999:function(t,e,i){i.d(e,{U:()=>h});var s=i(7428),r=i(8535),n=i(1749),a=i(6003),o=i(1132),l=i(231);let h=class extends o.X{constructor(){super(...arguments),this.numberType=n.Hf}drawShape(t,e,i,s,n,o,l,h){if(t.incremental&&n.multiGraphicOptions){let{startAtIdx:e,length:o}=n.multiGraphicOptions,{segments:d=[]}=t.attribute;if(e>d.length)return;let u=(0,r.gh)(t).line,{fill:c=u.fill,stroke:p=u.stroke,opacity:g=u.opacity,fillOpacity:m=u.fillOpacity,strokeOpacity:f=u.strokeOpacity,lineWidth:v=u.lineWidth,visible:_=u.visible}=t.attribute,y=(0,a.Bv)(g,m,c),b=(0,a.Kf)(g,f),x=(0,a.dz)(c),S=(0,a.ak)(p,v);if(!t.valid||!_||!x&&!S||!(y||b||l||h))return;let{context:A}=n;for(let r=e;r<e+o;r++)this.drawIncreaseSegment(t,A,d[r-1],d[r],t.attribute.segments[r],[u,t.attribute],i,s)}else super.drawShape(t,e,i,s,n,o,l,h)}drawIncreaseSegment(t,e,i,s,r,n,a,o){s&&(e.beginPath(),(0,l.V3)(e.nativeContext,i,s,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,r,n),e.setStrokeStyle(t,r,a,o,n),e.stroke())}};h=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],h)},1132:function(t,e,i){i.d(e,{X:()=>u});var s=i(7636),r=i(8103),n=i(7428),a=i(8535),o=i(1749),l=i(9292),h=i(231),d=i(613);let u=class extends l.Y{constructor(){super(...arguments),this.numberType=o.Hf}draw(t,e,i,s){let r=(0,a.gh)(t,null==s?void 0:s.theme).line;this._draw(t,r,!1,i,s)}drawSegmentItem(t,e,i,r,n,a,o,l,d,u,c,p,g,m,f){var v;if(!e)return;t.beginPath();let _=null!==(v=this.z)&&void 0!==v?v:0;(0,h.fW)(t.camera?t:t.nativeContext,e,d,u,{offsetX:c,offsetY:p,offsetZ:_}),g.cache&&!(0,s.Z)(g.cache)&&g.cache.curves.every(t=>t.defined)&&g.attribute.curveType&&g.attribute.curveType.includes("Closed")&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(g,o,l);let{x:y=0,x:b=0}=o;return!1!==i&&(m?m(t,o,l):n&&(t.setCommonStyle(g,o,y-c,b-p,l),t.fill())),!1!==r&&(f?f(t,o,l):a&&(t.setStrokeStyle(g,o,y-c,b-p,l),t.stroke())),!1}drawLinearLineHighPerformance(t,e,i,s,r,n,a,o,l,h,d,u,c){var p;e.beginPath();let g=null!==(p=this.z)&&void 0!==p?p:0,{points:m}=t.attribute,f=m[0];e.moveTo(f.x+a,f.y+o,g);for(let t=1;t<m.length;t++){let i=m[t];e.lineTo(i.x+a,i.y+o,g)}e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l);let{x:v=0,x:_=0}=t.attribute;!1!==i&&(u?u(e,t.attribute,l):r&&(e.setCommonStyle(t,t.attribute,v-a,_-o,l),e.fill())),!1!==s&&(c?c(e,t.attribute,l):n&&(e.setStrokeStyle(t,t.attribute,v-a,_-o,l),e.stroke()))}drawShape(t,e,i,s,n,o,l,h){let u=(0,a.gh)(t,null==o?void 0:o.theme).line,{fill:c=u.fill,stroke:p=u.stroke,fillOpacity:g=u.fillOpacity,strokeOpacity:m=u.strokeOpacity,segments:f,points:v,closePath:_,curveTension:y=u.curveTension,connectedType:b=u.connectedType}=t.attribute;if(!this.valid(t,u,l,h))return;let{curveType:x=u.curveType}=t.attribute;_&&"linear"===x&&(x="linearClosed");let{clipRange:S=u.clipRange,clipRangeByDimension:A=u.clipRangeByDimension}=t.attribute;if(1===S&&!f&&!v.some(t=>!1===t.defined)&&"linear"===x)return this.drawLinearLineHighPerformance(t,e,!!c,!!p,g,m,i,s,u,n,o,l,h);function k(t,e){return"none"===e?t:t.filter(t=>!1!==t.defined)}if(t.shouldUpdateShape()){let{points:e,segments:i}=t.attribute;if(i&&i.length){let e,s;if(t.cache=i.map((t,i)=>{if(t.points.length<=1&&0===i)return t.points[0]&&(s={endX:t.points[0].x,endY:t.points[0].y,curves:[{defined:!1!==t.points[0].defined}]}),null;1===i?e={x:s.endX,y:s.endY,defined:s.curves[s.curves.length-1].defined}:i>1&&(e.x=s.endX,e.y=s.endY,e.defined=s.curves[s.curves.length-1].defined);let r=(0,d.X0)(k(t.points,b),x,{startPoint:e,curveTension:y});return s=r,r}).filter(t=>!!t),"linearClosed"===x){let e;for(let i=0;i<t.cache.length;i++){let s=t.cache[i];for(let t=0;t<s.curves.length;t++)if(s.curves[t].defined){e=s.curves[t].p0;break}if(e)break}t.cache[t.cache.length-1]&&t.cache[t.cache.length-1].lineTo(e.x,e.y,!0)}}else{if(!e||!e.length)return t.cache=null,void t.clearUpdateShapeTag();t.cache=(0,d.X0)(k(e,b),x,{curveTension:y})}t.clearUpdateShapeTag()}if(Array.isArray(t.cache)){let n=t.attribute.segments.filter(t=>t.points.length);if(1===n[0].points.length&&n.shift(),1===S){let r=!1;t.cache.forEach((a,o)=>{r||(r=this.drawSegmentItem(e,a,!!c,!!p,g,m,n[o],[u,t.attribute],S,A,i,s,t,l,h))})}else{let a=S*t.cache.reduce((t,e)=>t+e.getLength(),0),o=0,d=!1;t.cache.forEach((f,v)=>{if(d)return;let _=f.getLength(),y=(a-o)/_;o+=_,y>0&&(d=this.drawSegmentItem(e,f,!!c,!!p,g,m,n[v],[u,t.attribute],(0,r.VV)(y,1),A,i,s,t,l,h))})}}else this.drawSegmentItem(e,t.cache,!!c,!!p,g,m,t.attribute,u,S,A,i,s,t,l,h)}};u=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],u)},4481:function(t,e,i){i.d(e,{AC:()=>n,Cb:()=>l,EY:()=>m,FU:()=>_,Gs:()=>a,Iv:()=>b,K2:()=>p,O:()=>h,Pf:()=>s,Uj:()=>c,Xe:()=>r,ZT:()=>u,e0:()=>y,fS:()=>f,lG:()=>d,sP:()=>v,tP:()=>g,uz:()=>o});let s=Symbol.for("IncrementalDrawContribution"),r=Symbol.for("ArcRender"),n=Symbol.for("Arc3dRender"),a=Symbol.for("AreaRender");Symbol.for("CircleRender");let o=Symbol.for("GraphicRender"),l=Symbol.for("GroupRender"),h=Symbol.for("LineRender"),d=Symbol.for("PathRender"),u=Symbol.for("PolygonRender"),c=Symbol.for("RectRender"),p=Symbol.for("Rect3DRender"),g=Symbol.for("SymbolRender"),m=Symbol.for("TextRender"),f=Symbol.for("RichTextRender"),v=Symbol.for("Pyramid3dRender"),_=Symbol.for("GlyphRender"),y=Symbol.for("ImageRender");Symbol.for("RenderSelector");let b=Symbol.for("DrawContribution")},6003:function(t,e,i){i.d(e,{Bv:()=>o,Eg:()=>p,GT:()=>l,Kf:()=>h,ZN:()=>c,Ze:()=>d,ak:()=>a,dz:()=>n,gI:()=>u});var s=i(7636),r=i(8103);function n(t,e){return!(!t&&!e)}function a(t,e){return((0,s.Z)(t)?t.some(t=>t||void 0===t):!!t)&&e>0}function o(t,e,i){return i&&t*e>0}function l(t,e,i,s,r){return r&&t*e>0&&0!==i&&0!==s}function h(t,e){return t*e>0}function d(t,e,i,s){return t*e>0&&0!==i&&0!==s}function u(t,e,i,s,r,n,a){let o=t-i,l=e-s,h=(a?n:-n)/Math.sqrt(o*o+l*l),d=h*l,u=-h*o,c=t+d,p=e+u,g=i+d,m=s+u,f=(c+g)/2,v=(p+m)/2,_=g-c,y=m-p,b=_*_+y*y,x=r-n,S=c*m-g*p,A=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-S*S)),k=(S*y-_*A)/b,w=(-S*_-y*A)/b,T=(S*y+_*A)/b,C=(-S*_+y*A)/b,M=k-f,E=w-v,B=T-f,O=C-v;return M*M+E*E>B*B+O*O&&(k=T,w=C),{cx:k,cy:w,x01:-d,y01:-u,x11:k*(r/x-1),y11:w*(r/x-1)}}function c(t,e,i,n,a){let o,l,h,d;let u=(0,r.Wn)(i-e),c=t.getParsedCornerRadius(),p=(0,s.Z)(c),{outerDeltaAngle:g,innerDeltaAngle:m,outerStartAngle:f,outerEndAngle:v,innerEndAngle:_,innerStartAngle:y}=t.getParsePadAngle(e,i),b=p?c[0]:c,x=p?c[1]:c,S=p?c[2]:c,A=p?c[3]:c,k=Math.max(x,b),w=Math.max(S,A),T=k,C=w,M=a*(0,r.mC)(f),E=a*(0,r.O$)(f),B=n*(0,r.mC)(_),O=n*(0,r.O$)(_);if((w>r.Ho||k>r.Ho)&&(o=a*(0,r.mC)(v),l=a*(0,r.O$)(v),h=n*(0,r.mC)(y),d=n*(0,r.O$)(y),u<r.pi)){let t=function(t,e,i,s,n,a,o,l){let h=i-t,d=s-e,u=o-n,c=l-a,p=c*h-u*d;return p*p<r.Ho?[]:(p=(u*(e-a)-c*(t-n))/p,[t+p*h,e+p*d])}(M,E,h,d,o,l,B,O);if(t){let e=M-t[0],i=E-t[1],s=o-t[0],h=l-t[1],d=1/(0,r.O$)((0,r.Kh)((e*s+i*h)/((0,r._b)(e*e+i*i)*(0,r._b)(s*s+h*h)))/2),u=(0,r._b)(t[0]*t[0]+t[1]*t[1]);C=(0,r.VV)(w,(n-u)/(d-1)),T=(0,r.VV)(k,(a-u)/(d+1))}}return{outerDeltaAngle:g,xors:M,yors:E,xirs:h,yirs:d,xore:o,yore:l,xire:B,yire:O,limitedOcr:T,limitedIcr:C,outerCornerRadiusStart:b,outerCornerRadiusEnd:x,maxOuterCornerRadius:k,maxInnerCornerRadius:w,outerStartAngle:f,outerEndAngle:v,innerDeltaAngle:m,innerEndAngle:_,innerStartAngle:y,innerCornerRadiusStart:A,innerCornerRadiusEnd:S}}function p(t,e,i,s,n,a,o){let{startAngle:l,endAngle:h}=t.getParsedAngle(),d=(0,r.Wn)(h-l),p=h>l,g=!1;if(n<a){let t=n;n=a,a=t}if(n<=r.Ho)e.moveTo(i,s);else if(d>=r.f7-r.Ho)e.moveTo(i+n*(0,r.mC)(l),s+n*(0,r.O$)(l)),e.arc(i,s,n,l,h,!p),a>r.Ho&&(e.moveTo(i+a*(0,r.mC)(h),s+a*(0,r.O$)(h)),e.arc(i,s,a,h,l,p));else{let{outerDeltaAngle:d,xors:m,yors:f,xirs:v,yirs:_,limitedOcr:y,outerCornerRadiusStart:b,outerCornerRadiusEnd:x,maxOuterCornerRadius:S,xore:A,yore:k,xire:w,yire:T,outerStartAngle:C,outerEndAngle:M,limitedIcr:E,innerDeltaAngle:B,innerEndAngle:O,innerStartAngle:I,innerCornerRadiusStart:R,innerCornerRadiusEnd:P,maxInnerCornerRadius:L}=c(t,l,h,a,n);if(d<.001)o&&(o[3]||o[1])&&e.moveTo(i+m,s+f),g=!0;else if(y>r.Ho){let t=(0,r.VV)(b,y),a=(0,r.VV)(x,y),l=u(v,_,m,f,n,t,Number(p)),h=u(A,k,w,T,n,a,Number(p));y<S&&t===a?!o||o[0]?(e.moveTo(i+l.cx+l.x01,s+l.cy+l.y01),e.arc(i+l.cx,s+l.cy,y,(0,r.fv)(l.y01,l.x01),(0,r.fv)(h.y01,h.x01),!p)):e.moveTo(i+l.cx+y*(0,r.mC)((0,r.fv)(h.y01,h.x01)),s+l.cy+y*(0,r.O$)((0,r.fv)(h.y01,h.x01))):!o||o[0]?(e.moveTo(i+l.cx+l.x01,s+l.cy+l.y01),t>0&&e.arc(i+l.cx,s+l.cy,t,(0,r.fv)(l.y01,l.x01),(0,r.fv)(l.y11,l.x11),!p),e.arc(i,s,n,(0,r.fv)(l.cy+l.y11,l.cx+l.x11),(0,r.fv)(h.cy+h.y11,h.cx+h.x11),!p),a>0&&e.arc(i+h.cx,s+h.cy,a,(0,r.fv)(h.y11,h.x11),(0,r.fv)(h.y01,h.x01),!p)):a>0?e.moveTo(i+h.cx+a*(0,r.mC)((0,r.fv)(h.y01,h.x01)),s+h.cy+a*(0,r.O$)((0,r.fv)(h.y01,h.x01))):e.moveTo(i+A,s+n*(0,r.O$)(M))}else!o||o[0]?(e.moveTo(i+m,s+f),e.arc(i,s,n,C,M,!p)):e.moveTo(i+n*(0,r.mC)(M),s+n*(0,r.O$)(M));if(!(a>r.Ho)||B<.001)!o||o[1]?e.lineTo(i+w,s+T):e.moveTo(i+w,s+T),g=!0;else if(E>r.Ho){let t=(0,r.VV)(R,E),n=(0,r.VV)(P,E),l=u(w,T,A,k,a,-n,Number(p)),h=u(m,f,v,_,a,-t,Number(p));if(!o||o[1]?e.lineTo(i+l.cx+l.x01,s+l.cy+l.y01):e.moveTo(i+l.cx+l.x01,s+l.cy+l.y01),E<L&&t===n){let t=(0,r.fv)(h.y01,h.x01);!o||o[2]?e.arc(i+l.cx,s+l.cy,E,(0,r.fv)(l.y01,l.x01),t,!p):e.moveTo(i+l.cx+(0,r.mC)(t),s+l.cy+(0,r.O$)(t))}else!o||o[2]?(n>0&&e.arc(i+l.cx,s+l.cy,n,(0,r.fv)(l.y01,l.x01),(0,r.fv)(l.y11,l.x11),!p),e.arc(i,s,a,(0,r.fv)(l.cy+l.y11,l.cx+l.x11),(0,r.fv)(h.cy+h.y11,h.cx+h.x11),p),t>0&&e.arc(i+h.cx,s+h.cy,t,(0,r.fv)(h.y11,h.x11),(0,r.fv)(h.y01,h.x01),!p)):t>0?e.moveTo(i+h.cx+t*(0,r.mC)((0,r.fv)(h.y01,h.x01)),s+h.cy+t*(0,r.O$)((0,r.fv)(h.y01,h.x01))):e.moveTo(i+v,s+_)}else!o||o[1]?e.lineTo(i+w,s+T):e.moveTo(i+w,s+T),!o||o[2]?e.arc(i,s,a,O,I,p):e.moveTo(i+a*(0,r.mC)(I),s+a*(0,r.O$)(I))}return o?o[3]&&e.lineTo(i+n*(0,r.mC)(l),s+n*(0,r.O$)(l)):e.closePath(),g}},6403:function(t,e,i){i.d(e,{I2:()=>l,pi:()=>o});var s,r=i(7428),n=i(1600),a=i(4481);let o=Symbol.for("RenderService");Symbol.for("BeforeRenderConstribution");let l=class{constructor(t){this.drawContribution=t}prepare(t){t&&this.renderTreeRoots.forEach(e=>{this._prepare(e,t)})}_prepare(t,e){t.forEachChildren(t=>{this._prepare(t,e)}),t.update({bounds:e,trans:!0})}prepareRenderList(){}beforeDraw(t){}draw(t){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(t){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}render(t,e){this.renderTreeRoots=t,this.drawParams=e;let i=e.updateBounds;this.prepare(i),this.prepareRenderList(),this.beforeDraw(e),this.draw(e),this.afterDraw(e),this.drawParams=null}};l=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),(s=(0,n.f)(a.Iv),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],l)},9156:function(t,e,i){i.d(e,{h:()=>r});var s=i(534);class r{static GetImage(t,e){var i;let n=r.cache.get(t);n?"fail"===n.loadState?s.w.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):"init"===n.loadState||"loading"===n.loadState?null===(i=n.waitingMark)||void 0===i||i.push(e):e&&e.imageLoadSuccess(t,n.data):r.loadImage(t,e)}static GetSvg(t,e){var i;let n=r.cache.get(t);n?"fail"===n.loadState?s.w.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):"init"===n.loadState||"loading"===n.loadState?null===(i=n.waitingMark)||void 0===i||i.push(e):e&&e.imageLoadSuccess(t,n.data):(n={type:"image",loadState:"init"},r.cache.set(t,n),n.dataPromise=s.w.global.loadSvg(t),n.dataPromise?(n.waitingMark=[e],n.dataPromise.then(e=>{var i;n.loadState=(null==e?void 0:e.data)?"success":"fail",n.data=null==e?void 0:e.data,null===(i=n.waitingMark)||void 0===i||i.map((i,s)=>{(null==e?void 0:e.data)?(n.loadState="success",n.data=e.data,i.imageLoadSuccess(t,e.data)):(n.loadState="fail",i.imageLoadFail(t))}),n.waitingMark&&(n.waitingMark=[])})):(n.loadState="fail",e.imageLoadFail(t)))}static GetFile(t,e){let i=r.cache.get(t);return i?"fail"===i.loadState?Promise.reject():"init"===i.loadState||"loading"===i.loadState?i.dataPromise.then(t=>t.data):Promise.resolve(i.data):(i={type:e,loadState:"init"},r.cache.set(t,i),"arrayBuffer"===e?i.dataPromise=s.w.global.loadArrayBuffer(t):"blob"===e?i.dataPromise=s.w.global.loadBlob(t):"json"===e&&(i.dataPromise=s.w.global.loadJson(t)),i.dataPromise.then(t=>t.data))}static loading(){setTimeout(()=>{if(!r.isLoading&&r.toLoadAueue.length){r.isLoading=!0;let t=r.toLoadAueue.splice(0,10),e=[];t.forEach(t=>{let{url:i,marks:n}=t,a={type:"image",loadState:"init"};if(r.cache.set(i,a),a.dataPromise=s.w.global.loadImage(i),a.dataPromise){a.waitingMark=n;let t=a.dataPromise.then(t=>{var e;a.loadState=(null==t?void 0:t.data)?"success":"fail",a.data=null==t?void 0:t.data,null===(e=a.waitingMark)||void 0===e||e.map((e,s)=>{(null==t?void 0:t.data)?(a.loadState="success",a.data=t.data,e.imageLoadSuccess(i,t.data)):(a.loadState="fail",e.imageLoadFail(i))}),a.waitingMark&&(a.waitingMark=[])});e.push(t)}else a.loadState="fail",n.forEach(t=>t.imageLoadFail(i))}),Promise.all(e).then(()=>{r.isLoading=!1,this.onLoadSuccessCb.forEach(t=>t()),r.loading()}).catch(t=>{console.error(t),r.isLoading=!1,this.onLoadSuccessCb.forEach(t=>t()),r.loading()})}},0)}static loadImage(t,e){let i=n(t,r.toLoadAueue);if(-1!==i)return r.toLoadAueue[i].marks.push(e),void r.loading();r.toLoadAueue.push({url:t,marks:[e]}),r.loading()}static improveImageLoading(t){let e=n(t,r.toLoadAueue);if(-1!==e){let t=r.toLoadAueue.splice(e,1);r.toLoadAueue.unshift(t[0])}}static onLoadSuccess(t){this.onLoadSuccessCb.push(t)}}function n(t,e){for(let i=0;i<e.length;i++)if(e[i].url===t)return i;return -1}r.cache=new Map,r.isLoading=!1,r.toLoadAueue=[],r.onLoadSuccessCb=[]},1822:function(t,e,i){i.d(e,{n:()=>r});class s{constructor(t,e){this._args=t,this.name=e,this.taps=[]}tap(t,e){this._tap("sync",t,e)}unTap(t,e){let i="string"==typeof t?t.trim():t.name;i&&(this.taps=this.taps.filter(t=>!(t.name===i&&(!e||t.fn===e))))}_parseOptions(t,e,i){let s;if("string"==typeof e)s={name:e.trim()};else if("object"!=typeof e||null===e)throw Error("Invalid tap options");if("string"!=typeof s.name||""===s.name)throw Error("Missing name for tap");return Object.assign({type:t,fn:i},s)}_tap(t,e,i){this._insert(this._parseOptions(t,e,i))}_insert(t){let e;"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let i=0;"number"==typeof t.stage&&(i=t.stage);let s=this.taps.length;for(;s>0;){s--;let t=this.taps[s];this.taps[s+1]=t;let r=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(r>i)){s++;break}}this.taps[s]=t}}class r extends s{call(...t){this.taps.map(t=>t.fn).forEach(e=>e(...t))}}},4021:function(t,e,i){i.d(e,{D:()=>n});var s=i(9292),r=i(8113);class n extends s.Y{contains(t,e,i){let{pickContext:s}=null!=i?i:{};if(!s)return!1;let n=t.getGraphicTheme();s.highPerformanceSave();let{x:a,y:o,z:l,lastModelMatrix:h}=this.transform(t,n,s),d=e;if(s.camera){d=e.clone();let i=t.parent.globalTransMatrix;d.x=i.a*e.x+i.c*e.y+i.e,d.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=l;let u=!1;return this.canvasRenderer.drawShape(t,s,a,o,i,null,(t,e,i)=>!!u||(u=t.isPointInPath(d.x,d.y))),this.canvasRenderer.z=0,s.modelMatrix!==h&&r.yp.free(s.modelMatrix),s.modelMatrix=h,s.highPerformanceRestore(),u}}},1434:function(t,e,i){i.d(e,{Q:()=>a});var s=i(9292),r=i(3116),n=i(8113);class a extends s.Y{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:s}=null!=i?i:{};if(!s)return!1;s.highPerformanceSave();let a=t.getGraphicTheme(),{x:o,y:l,z:h,lastModelMatrix:d}=this.transform(t,a,s),u=e;if(s.camera){u=e.clone();let i=t.parent.globalTransMatrix;u.x=i.a*e.x+i.c*e.y+i.e,u.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=h;let c=!1;return this.canvasRenderer.drawShape(t,s,o,l,{},null,t=>!!c||(c=t.isPointInPath(u.x,u.y)),(t,e,i)=>{if(c)return!0;let n=e.lineWidth||i.lineWidth,a=e.pickStrokeBuffer||i.pickStrokeBuffer,o=e.keepStrokeScale||i.keepStrokeScale;return s.lineWidth=o?n+a:(0,r.D)(s,n+a,s.dpr),c=t.isPointInStroke(u.x,u.y)}),this.canvasRenderer.z=0,s.modelMatrix!==d&&n.yp.free(s.modelMatrix),s.modelMatrix=d,s.highPerformanceRestore(),c}}},1335:function(t,e,i){i.d(e,{o:()=>r});var s=i(3116);class r{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode||!this.canvasRenderer)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=t.getGraphicTheme();r.highPerformanceSave();let{x:a=n.x,y:o=n.y}=t.attribute;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(n);a+=e.x,o+=e.y,r.setTransformForCurrent()}else a=0,o=0,r.transformFromMatrix(t.transMatrix,!0);let l=!1,h=!1;return this.canvasRenderer.drawShape(t,r,a,o,{},null,(t,i,s,r)=>!(!l&&!h)||(l=t.isPointInPath(e.x,e.y),h=r||h,l),(t,i,n,a)=>{if(l||h)return!0;let o=i.lineWidth||n.lineWidth,d=i.pickStrokeBuffer||n.pickStrokeBuffer,u=i.keepStrokeScale||n.keepStrokeScale;return r.lineWidth=u?o+d:(0,s.D)(r,o+d,r.dpr),l=t.isPointInStroke(e.x,e.y),h=a||h,l}),r.highPerformanceRestore(),l}}},479:function(t,e,i){i.d(e,{$Y:()=>n,CV:()=>f,DS:()=>x,Dp:()=>m,EL:()=>E,ES:()=>_,Ex:()=>l,O2:()=>w,RC:()=>S,Rz:()=>v,Se:()=>C,Sp:()=>A,TF:()=>b,Uv:()=>p,XN:()=>s,Yr:()=>d,ZY:()=>T,cs:()=>a,e_:()=>g,g2:()=>o,ks:()=>y,nb:()=>h,p1:()=>u,pE:()=>M,t3:()=>r,uV:()=>c,ww:()=>k});let s=Symbol.for("MathPickerContribution"),r=Symbol.for("MathArcPicker"),n=Symbol.for("MathAreaPicker");Symbol.for("MathCirclePicker");let a=Symbol.for("MathImagePicker"),o=Symbol.for("MathLinePicker"),l=Symbol.for("MathPathPicker"),h=Symbol.for("MathRectPicker"),d=Symbol.for("MathSymbolPicker"),u=Symbol.for("MathTextPicker"),c=Symbol.for("MathPolygonPicker"),p=Symbol.for("MathGlyphPicker"),g=Symbol.for("CanvasArcPicker"),m=Symbol.for("CanvasArc3dPicker"),f=Symbol.for("CanvasAreaPicker");Symbol.for("CanvasCirclePicker");let v=Symbol.for("CanvasImagePicker");Symbol.for("CanvasGifImagePicker");let _=Symbol.for("CanvasLinePicker");Symbol.for("CanvasLottiePicker");let y=Symbol.for("CanvasPathPicker"),b=Symbol.for("CanvasRectPicker"),x=Symbol.for("CanvasRect3dPicker"),S=Symbol.for("CanvasSymbolPicker"),A=Symbol.for("CanvasTextPicker"),k=Symbol.for("CanvasPolygonPicker"),w=Symbol.for("CanvasPyramid3dPicker"),T=Symbol.for("CanvasRichTextPicker"),C=Symbol.for("CanvasGlyphPicker"),M=Symbol.for("CanvasGroupPicker"),E=Symbol.for("CanvasPickerContribution")},873:function(t,e,i){i.d(e,{Z:()=>n});var s=i(1749),r=i(7428);let n=class{constructor(){this.type="image",this.numberType=s.PN}contains(t,e,i){let{pickContext:s}=null!=i?i:{};return!!s&&!!t.AABBBounds.containsPoint(e)}};n=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],n)},1671:function(t,e,i){i.d(e,{X:()=>s});let s=(0,i(7211).kP)()},7881:function(t,e,i){i.d(e,{x:()=>U});var s,r,n=i(5102),a=i(7578),o=i(6480),l=i(8906),h=i(8429),d=i(8103),u=i(1036),c=i(7428),p=i(1600),g=i(7089),m=i(8535),f=i(3386),v=i(6003),_=i(3140),y=i(3482),b=i(1749),x=i(9292),S=i(3116),A=i(623),k=i(3872),w=i(6936);let T=new class{constructor(){this.time=k.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u){let{outerBorder:c,innerBorder:p}=t.attribute,g=c&&!1!==c.visible,m=p&&!1!==p.visible;if(!g&&!m)return;let{innerPadding:f=l.innerPadding,outerPadding:_=l.outerPadding,startAngle:y=l.startAngle,endAngle:b=l.endAngle,opacity:x=l.opacity,x:A=l.x,y:k=l.y,scaleX:w=l.scaleX,scaleY:T=l.scaleY,keepStrokeScale:C=l.keepStrokeScale}=t.attribute,{innerRadius:M=l.innerRadius,outerRadius:E=l.outerRadius}=t.attribute;E+=_,M-=f;let B=(r,n)=>{let a=!(!r||!r.stroke),{distance:o=l[n].distance}=r,h=C?o:(0,S.D)(e,o,e.dpr),d=o/E,c="outerBorder"===n?1:-1;if(t.setAttributes({outerRadius:E+c*h,innerRadius:M-c*h,startAngle:y-c*d,endAngle:b+c*d}),e.beginPath(),(0,v.Eg)(t,e,i,s,E+c*h,M-c*h),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),u)u(e,r,l[n]);else if(a){let a=l[n].opacity;l[n].opacity=x,e.setStrokeStyle(t,r,(A-i)/w,(k-s)/T,l[n]),l[n].opacity=a,e.stroke()}};g&&B(c,"outerBorder"),m&&B(p,"innerBorder"),t.setAttributes({outerRadius:E,innerRadius:M,startAngle:y,endAngle:b})}},C=w.H,M=A.R6;var E=function(t,e){return function(i,s){e(i,s,t)}};let B=class extends x.Y{constructor(t){super(),this.arcRenderContribitions=t,this.numberType=b.r_,this.builtinContributions=[T,M,C],this.init(t)}drawArcTailCapPath(t,e,i,s,r,n,a,o){let l=o-a,h=t.getParsedAngle(),u=h.startAngle,c=h.endAngle;c=o,(0,d.Wn)(c-u);let p=c>u,g=!1;if(r<n){let t=r;r=n,n=t}let{outerDeltaAngle:m,xors:f,yors:_,xirs:y,yirs:b,limitedOcr:x,outerCornerRadiusStart:S,outerCornerRadiusEnd:A,maxOuterCornerRadius:k,xore:w,yore:T,xire:C,yire:M,limitedIcr:E,innerDeltaAngle:B,innerStartAngle:O,innerCornerRadiusStart:I,innerCornerRadiusEnd:R,maxInnerCornerRadius:P}=(0,v.ZN)(t,u,c,n,r);if(x>d.Ho){let t=(0,d.VV)(S,x),n=(0,d.VV)(A,x),a=(0,v.gI)(y,b,f,_,r,t,Number(p)),o=(0,v.gI)(w,T,C,M,r,n,Number(p));if(x<k&&t===n)e.moveTo(i+a.cx+a.x01,s+a.cy+a.y01),e.arc(i+a.cx,s+a.cy,x,(0,d.fv)(a.y01,a.x01),(0,d.fv)(o.y01,o.x01),!p);else{let t=c-l-.03,a=(0,d.fv)(o.y11,o.x11);e.arc(i,s,r,t,a,!p),n>0&&e.arc(i+o.cx,s+o.cy,n,(0,d.fv)(o.y11,o.x11),(0,d.fv)(o.y01,o.x01),!p)}}else e.moveTo(i+f,s+_);if(!(n>d.Ho)||B<.001)e.lineTo(i+C,s+M),g=!0;else if(E>d.Ho){let t=(0,d.VV)(I,E),r=(0,d.VV)(R,E),a=(0,v.gI)(C,M,w,T,n,-r,Number(p)),o=(0,v.gI)(f,_,y,b,n,-t,Number(p));if(e.lineTo(i+a.cx+a.x01,s+a.cy+a.y01),E<P&&t===r){let t=(0,d.fv)(o.y01,o.x01);e.arc(i+a.cx,s+a.cy,E,(0,d.fv)(a.y01,a.x01),t,!p)}else{r>0&&e.arc(i+a.cx,s+a.cy,r,(0,d.fv)(a.y01,a.x01),(0,d.fv)(a.y11,a.x11),!p);let t=(0,d.fv)(a.cy+a.y11,a.cx+a.x11),o=c-l-.03;e.arc(i,s,n,t,o,p)}}else e.lineTo(i+n*(0,d.mC)(O),s+n*(0,d.O$)(O));return g}drawShape(t,e,i,s,r,n,a,o){let l=(0,m.gh)(t,null==n?void 0:n.theme).arc,{fill:h=l.fill,stroke:c=l.stroke,x:p=l.x,y:g=l.y,fillStrokeOrder:y=l.fillStrokeOrder}=t.attribute,b=this.valid(t,l,a,o);if(!b)return;let{fVisible:x,sVisible:S,doFill:A,doStroke:k}=b,{outerPadding:w=l.outerPadding,innerPadding:T=l.innerPadding,cap:C=l.cap,forceShowCap:M=l.forceShowCap}=t.attribute,{outerRadius:E=l.outerRadius,innerRadius:B=l.innerRadius}=t.attribute;E+=w,B-=T;let O=0,I=((0,u.Z)(C)&&C||C[0])&&"conical"===h.gradient;if(I){let{sc:e,startAngle:i,endAngle:s}=t.getParsedAngle();(0,d.Wn)(s-i)<d.f7-d.Ho&&(O=e||0,h.startAngle-=O,h.endAngle-=O)}let R=!1,{isFullStroke:P,stroke:L}=(0,f.Dn)(c);if(A||P){e.beginPath(),(0,v.Eg)(t,e,i,s,E,B),R=!0,e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,s,A,k,x,S,l,r,a,o);let n=()=>{A&&(a?a(e,t.attribute,l):x&&(e.setCommonStyle(t,t.attribute,p-i,g-s,l),e.fill()))},h=()=>{k&&P&&(o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,p-i,g-s,l),e.stroke()))};y?(h(),n()):(n(),h())}if(!P&&k&&(e.beginPath(),(0,v.Eg)(t,e,i,s,E,B,L),R||this.beforeRenderStep(t,e,i,s,A,k,x,S,l,r,a,o),o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,i,s,l),e.stroke())),((0,u.Z)(C)&&C||C[1])&&M){let{startAngle:n,endAngle:h}=t.getParsedAngle();if((0,d.Wn)(h-n)>=d.f7-d.Ho){e.beginPath();let n=Math.abs(E-B)/2/E,{endAngle:h=l.endAngle,fill:d=l.fill}=t.attribute;this.drawArcTailCapPath(t,e,i,s,E,B,h,h+n),R||this.beforeRenderStep(t,e,i,s,A,k,x,S,l,r,a,o),(()=>{if(A&&"conical"===d.gradient){let r=(0,_.MB)(0,0,h,d);a||v.Bv&&(e.setCommonStyle(t,t.attribute,i,s,l),e.fillStyle=r,e.fill())}})(),k&&(o||S&&(e.setStrokeStyle(t,t.attribute,i,s,l),e.stroke()))}}this.afterRenderStep(t,e,i,s,A,k,x,S,l,r,a,o),I&&(h.startAngle+=O,h.endAngle+=O)}draw(t,e,i,s){let r=(0,m.gh)(t,null==s?void 0:s.theme).arc;this._draw(t,r,!1,i,s)}};B=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),E(0,(0,p.f)(l.Qc)),E(0,(0,g.t)(y.OL)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],B);var O=i(4481);let I=!1,R=new h.n(t=>{I||(I=!0,t(B).toSelf().inSingletonScope(),t(O.Xe).to(B).inSingletonScope(),t(O.uz).toService(O.Xe),t(y.OL).toService(A.Sg),(0,l.yb)(t,y.OL))});var P=i(1671),L=i(1335);let D=class extends L.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=b.r_}};D=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(s=(0,p.f)(O.Xe),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],D);var Z=i(479);let F=!1,j=new h.n((t,e,i,s)=>{F||(F=!0,t(Z.e_).to(D).inSingletonScope(),t(Z.EL).toService(Z.e_))}),H=class extends L.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=b.r_}};H=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(r=(0,p.f)(O.Xe),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],H);let z=!1,N=new h.n((t,e,i,s)=>{z||(z=!0,t(Z.t3).to(H).inSingletonScope(),t(Z.XN).toService(Z.t3))});function V(){V.__loaded||(V.__loaded=!0,a.i.RegisterGraphicCreator("arc",n.Q),o.n.load(R),o.n.load(P.X?j:N))}V.__loaded=!1;let U=V},3483:function(t,e,i){i.d(e,{d:()=>B});var s,r,n=i(4951),a=i(7578),o=i(6480),l=i(8906),h=i(8429),d=i(98),u=i(623),c=i(3482),p=i(6401),g=i(4481);let m=!1,f=new h.n(t=>{m||(m=!0,t(d.j).toSelf().inSingletonScope(),t(g.Gs).to(d.j).inSingletonScope(),t(g.uz).toService(g.Gs),t(c.Gq).toService(u.Sg),(0,l.yb)(t,c.Gq),t(p.K).toSelf().inSingletonScope())});var v=i(1671),_=i(479),y=i(1749),b=i(7428),x=i(1600),S=i(1335);let A=class extends S.o{constructor(t){super(),this.canvasRenderer=t,this.type="area",this.numberType=y.Ri}};A=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,b.b)(),(s=(0,x.f)(g.Gs),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],A);let k=!1,w=new h.n((t,e,i,s)=>{k||(k=!0,t(_.CV).to(A).inSingletonScope(),t(_.EL).toService(_.CV))}),T=class extends S.o{constructor(t){super(),this.canvasRenderer=t,this.type="area",this.numberType=y.Ri}};T=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,b.b)(),(r=(0,x.f)(g.Gs),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],T);let C=!1,M=new h.n((t,e,i,s)=>{C||(C=!0,t(_.$Y).to(T).inSingletonScope(),t(_.XN).toService(_.$Y))});function E(){E.__loaded||(E.__loaded=!0,a.i.RegisterGraphicCreator("area",n.n),o.n.load(f),o.n.load(v.X?w:M))}E.__loaded=!1;let B=E},9367:function(t,e,i){i.d(e,{M:()=>a});var s=i(411),r=i(7578);function n(){n.__loaded||(n.__loaded=!0,r.i.RegisterGraphicCreator("group",s.sS))}n.__loaded=!1;let a=n},4437:function(t,e,i){i.d(e,{i:()=>N});var s,r=i(5512),n=i(7578),a=i(6480),o=i(8906),l=i(8429),h=i(623),d=i(3482),u=i(7428),c=i(1600),p=i(7089),g=i(8535),m=i(1749),f=i(7636),v=i(9904),_=i(6490),y=i(9292),b=i(3872),x=i(8792);class S extends x.sH{constructor(){super(...arguments),this.time=b.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u){return super.drawShape(t,e,i,s,r,n,a,o,l,h,d,u)}}let A=new S,k=h.R6;var w=i(9156),T=function(t,e){return function(i,s){e(i,s,t)}};let C=["","repeat-x","repeat-y","repeat"],M=class extends y.Y{constructor(t){super(),this.imageRenderContribitions=t,this.numberType=m.PN,this.builtinContributions=[A,k],this.init(t)}drawShape(t,e,i,s,r,n,a,o){let l=(0,g.gh)(t).image,{repeatX:h=l.repeatX,repeatY:d=l.repeatY,x:u=l.x,y:c=l.y,cornerRadius:p=l.cornerRadius,fillStrokeOrder:m=l.fillStrokeOrder,cornerType:v=l.cornerType,image:y}=t.attribute,b=this.valid(t,l,a);if(!b)return;let{fVisible:x,sVisible:S,doFill:A,doStroke:k}=b;if(!y||!t.resources)return;let w=t.resources.get(y);if("success"!==w.state)return;let T=t.width,M=t.height;e.beginPath();let E=!1;0===p||(0,f.Z)(p)&&p.every(t=>0===t)?e.rect(i,s,T,M):((0,_.U)(e,i,s,T,M,p,"bevel"!==v),E=!0),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l);let B=()=>{if(A){if(a)a(e,t.attribute,l);else if(x){e.setCommonStyle(t,t.attribute,i,s,l);let r=0;if("repeat"===h&&(r|=1),"repeat"===d&&(r|=2),r){let t=e.createPattern(w.data,C[r]);e.fillStyle=t,e.translate(i,s,!0),e.fillRect(0,0,T,M),e.translate(-i,-s,!0)}else e.drawImage(w.data,i,s,T,M)}}},O=()=>{k&&(o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,u-i,c-s,l),e.stroke()))};m?(O(),E&&(e.save(),e.clip()),this.beforeRenderStep(t,e,i,s,A,!1,x,!1,l,r,a),B(),E&&e.restore()):(E&&(e.save(),e.clip()),this.beforeRenderStep(t,e,i,s,A,!1,x,!1,l,r,a),B(),E&&e.restore(),O()),this.afterRenderStep(t,e,i,s,A,!1,x,!1,l,r,a)}draw(t,e,i){let{image:s}=t.attribute;if(!s||!t.resources)return;let r=t.resources.get(s);if("loading"===r.state&&(0,v.Z)(s))return void w.h.improveImageLoading(s);if("success"!==r.state)return;let{context:n}=e.drawParams;if(!n)return;let a=(0,g.gh)(t).image;this._draw(t,a,!1,i)}};M=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,u.b)(),T(0,(0,c.f)(o.Qc)),T(0,(0,p.t)(d.JO)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],M);var E=i(4481);let B=!1,O=new l.n(t=>{B||(B=!0,t(E.e0).to(M).inSingletonScope(),t(E.uz).toService(E.e0),t(d.JO).toService(h.Sg),(0,o.yb)(t,d.JO))});var I=i(1671),R=i(479),P=i(1335);let L=class extends P.o{constructor(t){super(),this.canvasRenderer=t,this.type="image",this.numberType=m.PN}};L=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,u.b)(),(s=(0,c.f)(E.e0),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],L);let D=!1,Z=new l.n((t,e,i,s)=>{D||(D=!0,t(R.Rz).to(L).inSingletonScope(),t(R.EL).toService(R.Rz))});var F=i(873);let j=!1,H=new l.n((t,e,i,s)=>{j||(j=!0,t(R.cs).to(F.Z).inSingletonScope(),t(F.Z).toService(R.cs))});function z(){z.__loaded||(z.__loaded=!0,n.i.RegisterGraphicCreator("image",r.B),a.n.load(O),a.n.load(I.X?Z:H))}z.__loaded=!1;let N=z},9536:function(t,e,i){i.d(e,{N:()=>M});var s,r,n=i(7004),a=i(7578),o=i(6480),l=i(8429),h=i(7999),d=i(1132),u=i(4481);let c=!1,p=new l.n(t=>{c||(c=!0,t(d.X).toSelf().inSingletonScope(),t(h.U).toSelf().inSingletonScope(),t(u.O).to(d.X).inSingletonScope(),t(u.uz).toService(u.O))});var g=i(1671),m=i(479),f=i(1749),v=i(7428),_=i(1600),y=i(1434);let b=class extends y.Q{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};b=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,v.b)(),(s=(0,_.f)(u.O),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],b);let x=!1,S=new l.n((t,e,i,s)=>{x||(x=!0,t(m.ES).to(b).inSingletonScope(),t(m.EL).toService(m.ES))});var A=i(1335);let k=class extends A.o{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};k=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,v.b)(),(r=(0,_.f)(u.O),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],k);let w=!1,T=new l.n((t,e,i,s)=>{w||(w=!0,t(m.g2).to(k).inSingletonScope(),t(m.XN).toService(m.g2))});function C(){C.__loaded||(C.__loaded=!0,a.i.RegisterGraphicCreator("line",n.W),o.n.load(p),o.n.load(g.X?S:T))}C.__loaded=!1;let M=C},1369:function(t,e,i){i.d(e,{N:()=>Z});var s,r,n=i(4051),a=i(7578),o=i(6480),l=i(8906),h=i(8429),d=i(623),u=i(3482),c=i(7428),p=i(1600),g=i(7089),m=i(5399),f=i(8535),v=i(1749),_=i(9292);let y=i(6936).H,b=d.R6;var x=function(t,e){return function(i,s){e(i,s,t)}};let S=class extends _.Y{constructor(t){super(),this.pathRenderContribitions=t,this.numberType=v.qm,this.builtinContributions=[b,y],this.init(t)}drawShape(t,e,i,s,r,n,a,o){var l,h,d;let u=null!==(l=this.tempTheme)&&void 0!==l?l:(0,f.gh)(t,null==n?void 0:n.theme).path,{x:c=u.x,y:p=u.y,fillStrokeOrder:g=u.fillStrokeOrder}=t.attribute,v=null!==(h=this.z)&&void 0!==h?h:0,_=this.valid(t,u,a,o);if(!_)return;let{fVisible:y,sVisible:b,doFill:x,doStroke:S}=_;if(e.beginPath(),t.pathShape)(0,m.h)(t.pathShape.commandList,e,i,s,1,1,v);else{let r=null!==(d=t.attribute.path)&&void 0!==d?d:u.path;(0,m.h)(r.commandList,e,i,s,1,1,v)}e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),this.beforeRenderStep(t,e,i,s,x,S,y,b,u,r,a,o);let A=()=>{S&&(o?o(e,t.attribute,u):b&&(e.setStrokeStyle(t,t.attribute,c-i,p-s,u),e.stroke()))},k=()=>{x&&(a?a(e,t.attribute,u):y&&(e.setCommonStyle(t,t.attribute,c-i,p-s,u),e.fill()))};g?(A(),k()):(k(),A()),this.afterRenderStep(t,e,i,s,x,S,y,b,u,r,a,o)}draw(t,e,i,s){let r=(0,f.gh)(t,null==s?void 0:s.theme).path;this.tempTheme=r,this._draw(t,r,!1,i,s),this.tempTheme=null}};S=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),x(0,(0,p.f)(l.Qc)),x(0,(0,g.t)(u.Mj)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);var A=i(4481);let k=!1,w=new h.n(t=>{k||(k=!0,t(S).toSelf().inSingletonScope(),t(A.lG).to(S).inSingletonScope(),t(A.uz).toService(A.lG),t(u.Mj).toService(d.Sg),(0,l.yb)(t,u.Mj))});var T=i(1671),C=i(479),M=i(1434);let E=class extends M.Q{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=v.qm}};E=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(s=(0,p.f)(A.lG),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],E);let B=!1,O=new h.n((t,e,i,s)=>{B||(B=!0,t(C.ks).to(E).inSingletonScope(),t(C.EL).toService(C.ks))});var I=i(1335);let R=class extends I.o{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=v.qm}};R=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(r=(0,p.f)(A.lG),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],R);let P=!1,L=new h.n((t,e,i,s)=>{P||(P=!0,t(C.Ex).to(R).inSingletonScope(),t(C.XN).toService(C.Ex))});function D(){D.__loaded||(D.__loaded=!0,a.i.RegisterGraphicCreator("path",n.E),o.n.load(w),o.n.load(T.X?O:L))}D.__loaded=!1;let Z=D},4914:function(t,e,i){i.d(e,{M:()=>j});var s,r,n=i(7795),a=i(7578),o=i(6480),l=i(8906),h=i(8429),d=i(623),u=i(3482),c=i(7636),p=i(7428),g=i(1600),m=i(7089),f=i(8535),v=i(1749);function _(t,e,i,s){t.moveTo(e[0].x+i,e[0].y+s);for(let r=1;r<e.length;r++)t.lineTo(e[r].x+i,e[r].y+s)}function y(t,e){return Math.sqrt(t*t+e*e)}function b(t,e,i,s,r){let n=e/i;return{x:t.x-s*n,y:t.y-r*n}}var x=i(9292);let S=i(6936).H,A=d.R6;var k=function(t,e){return function(i,s){e(i,s,t)}};let w=class extends x.Y{constructor(t){super(),this.polygonRenderContribitions=t,this.numberType=v.Kh,this.builtinContributions=[A,S],this.init(t)}drawShape(t,e,i,s,r,n,a,o){let l=(0,f.gh)(t,null==n?void 0:n.theme).polygon,{points:h=l.points,cornerRadius:d=l.cornerRadius,x:u=l.x,y:p=l.y,closePath:g=l.closePath,fillStrokeOrder:m=l.fillStrokeOrder}=t.attribute,v=this.valid(t,l,a,o);if(!v)return;let{fVisible:x,sVisible:S,doFill:A,doStroke:k}=v;e.beginPath(),d<=0||(0,c.Z)(d)&&d.every(t=>0===t)?_(e.camera?e:e.nativeContext,h,i,s):function(t,e,i,s,r,n=!0){var a;if(e.length<3)return void _(t,e,i,s);let o=0,l=e.length-1;n||(o+=1,l-=1,t.moveTo(e[0].x+i,e[0].y+s));for(let n=o;n<=l;n++){let o=e[0===n?l:(n-1)%e.length],h=e[n%e.length],d=e[(n+1)%e.length],u=h.x-o.x,c=h.y-o.y,p=h.x-d.x,g=h.y-d.y,m=Math.abs(Math.tan((Math.atan2(c,u)-Math.atan2(g,p))/2)),f=Array.isArray(r)?null!==(a=r[n%e.length])&&void 0!==a?a:0:r,v=f/m,_=y(u,c),x=y(p,g),S=Math.min(_,x);v>S&&(v=S,f=S*m);let A=b(h,v,_,u,c),k=b(h,v,x,p,g),w=2*h.x-A.x-k.x,T=2*h.y-A.y-k.y,C=y(w,T),M=b(h,y(v,f),C,w,T),E=Math.atan2(A.y-M.y,A.x-M.x),B=Math.atan2(k.y-M.y,k.x-M.x),O=B-E;O<0&&(E=B,O=-O),O>Math.PI&&(O-=Math.PI),0===n?t.moveTo(A.x+i,A.y+s):t.lineTo(A.x+i,A.y+s),O&&t.arcTo(h.x+i,h.y+s,k.x+i,k.y+s,f),t.lineTo(k.x+i,k.y+s)}n||t.lineTo(e[l+1].x+i,e[l+1].y+s)}(e.camera?e:e.nativeContext,h,i,s,d,g),g&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,s,A,k,x,S,l,r,a,o);let w=()=>{A&&(a?a(e,t.attribute,l):x&&(e.setCommonStyle(t,t.attribute,u-i,p-s,l),e.fill()))},T=()=>{k&&(o?o(e,t.attribute,l):S&&(e.setStrokeStyle(t,t.attribute,u-i,p-s,l),e.stroke()))};m?(T(),w()):(w(),T()),this.afterRenderStep(t,e,i,s,A,k,x,S,l,r,a,o)}draw(t,e,i,s){let r=(0,f.gh)(t,null==s?void 0:s.theme).polygon;this._draw(t,r,!1,i,s)}};w=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),k(0,(0,g.f)(l.Qc)),k(0,(0,m.t)(u.U7)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],w);var T=i(4481);let C=!1,M=new h.n(t=>{C||(C=!0,t(T.ZT).to(w).inSingletonScope(),t(T.uz).toService(T.ZT),t(u.U7).toService(d.Sg),(0,l.yb)(t,u.U7))});var E=i(1671),B=i(479),O=i(1335);let I=class extends O.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=v.Kh}};I=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(s=(0,g.f)(T.ZT),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],I);let R=!1,P=new h.n((t,e,i,s)=>{R||(R=!0,t(B.ww).to(I).inSingletonScope(),t(B.EL).toService(B.ww))}),L=class extends O.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=v.Kh}};L=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(r=(0,g.f)(T.ZT),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],L);let D=!1,Z=new h.n((t,e,i,s)=>{D||(D=!0,t(B.uV).to(L).inSingletonScope(),t(B.XN).toService(B.uV))});function F(){F.__loaded||(F.__loaded=!0,a.i.RegisterGraphicCreator("polygon",n.p),o.n.load(M),o.n.load(E.X?P:Z))}F.__loaded=!1;let j=F},7307:function(t,e,i){i.d(e,{k:()=>z});var s,r,n=i(5385),a=i(7578),o=i(6480),l=i(8906),h=i(8429),d=i(8792),u=i(623),c=i(3482),p=i(7636),g=i(7428),m=i(1600),f=i(7089),v=i(8535),_=i(1749),y=i(6490),b=i(6003),x=i(9292),S=function(t,e){return function(i,s){e(i,s,t)}};let A=class extends x.Y{constructor(t){super(),this.rectRenderContribitions=t,this.type="rect",this.numberType=_._u,this.builtinContributions=[d.NB,d.gq,d.k7],this.init(t)}drawShape(t,e,i,s,r,n,a,o){var l;let h=null!==(l=this.tempTheme)&&void 0!==l?l:(0,v.gh)(t,null==n?void 0:n.theme).rect,{fill:d=h.fill,background:u,stroke:c=h.stroke,cornerRadius:g=h.cornerRadius,cornerType:m=h.cornerType,opacity:f=h.opacity,fillOpacity:_=h.fillOpacity,lineWidth:x=h.lineWidth,strokeOpacity:S=h.strokeOpacity,visible:A=h.visible,x1:k,y1:w,x:T=h.x,y:C=h.y,fillStrokeOrder:M=h.fillStrokeOrder}=t.attribute,{width:E,height:B}=t.attribute;E=(null!=E?E:k-T)||0,B=(null!=B?B:w-C)||0;let O=(0,b.GT)(f,_,E,B,d),I=(0,b.Ze)(f,S,E,B),R=(0,b.dz)(d,u),P=(0,b.ak)(c,x);if(!t.valid||!A||!R&&!P||!(O||I||a||o||u))return;0===g||(0,p.Z)(g)&&g.every(t=>0===t)?(e.beginPath(),e.rect(i,s,E,B)):(e.beginPath(),(0,y.U)(e,i,s,E,B,g,"bevel"!==m));let L={doFill:R,doStroke:P};e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,i,s,R,P,O,I,h,r,a,o,L);let D=()=>{L.doFill&&(a?a(e,t.attribute,h):O&&(e.setCommonStyle(t,t.attribute,T-i,C-s,h),e.fill()))},Z=()=>{L.doStroke&&(o?o(e,t.attribute,h):I&&(e.setStrokeStyle(t,t.attribute,T-i,C-s,h),e.stroke()))};M?(Z(),D()):(D(),Z()),this.afterRenderStep(t,e,i,s,R,P,O,I,h,r,a,o)}draw(t,e,i,s){let r=(0,v.gh)(t,null==s?void 0:s.theme).rect;this.tempTheme=r,this._draw(t,r,!1,i,s),this.tempTheme=null}};A=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,g.b)(),S(0,(0,m.f)(l.Qc)),S(0,(0,f.t)(c.d5)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],A);var k=i(4481);let w=!1,T=new h.n(t=>{w||(w=!0,t(A).toSelf().inSingletonScope(),t(k.Uj).to(A).inSingletonScope(),t(k.uz).toService(k.Uj),t(d.Er).toSelf(),t(d.d4).toSelf(),t(c.d5).toService(d.Er),t(c.d5).toService(d.d4),t(c.d5).toService(u.Sg),(0,l.yb)(t,c.d5))});var C=i(1671),M=i(479),E=i(7393),B=i(1601),O=i(3116);let I=new E.FB;class R{constructor(){this.type="rect",this.numberType=_._u}contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:s}=null!=i?i:{};if(!s)return!1;let r=t.getGraphicTheme(),{cornerRadius:n=r.cornerRadius}=t.attribute,{x:a=r.x,y:o=r.y}=t.attribute;s.highPerformanceSave();let l=!0;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(r);a+=e.x,o+=e.y,s.setTransformForCurrent()}else a=0,o=0,l=!1,s.transformFromMatrix(t.transMatrix,!0);let h=!0;if(!l||t.shadowRoot||(0,B.Z)(n,!0)&&0!==n||(0,p.Z)(n)&&n.some(t=>0!==t))h=!1,this.canvasRenderer.drawShape(t,s,a,o,{},null,(t,i,s)=>!!h||(h=t.isPointInPath(e.x,e.y)),(t,i,r)=>{if(h)return!0;let n=i.lineWidth||r.lineWidth,a=i.pickStrokeBuffer||r.pickStrokeBuffer,o=i.keepStrokeScale||r.keepStrokeScale;return s.lineWidth=o?n+a:(0,O.D)(s,n+a,s.dpr),h=t.isPointInStroke(e.x,e.y)});else{let{fill:i=r.fill,stroke:s=r.stroke,lineWidth:n=r.lineWidth}=t.attribute;if(i)h=!0;else if(s){let i=t.AABBBounds;I.setValue(i.x1,i.y1,i.x2,i.y2),I.expand(-n/2),h=!I.containsPoint(e)}}return s.highPerformanceRestore(),h}}let P=class extends R{constructor(t){super(),this.canvasRenderer=t}};P=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,g.b)(),(s=(0,m.f)(k.Uj),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],P);let L=!1,D=new h.n((t,e,i,s)=>{L||(L=!0,t(M.TF).to(P).inSingletonScope(),t(M.EL).toService(M.TF))}),Z=class extends R{constructor(t){super(),this.canvasRenderer=t}};Z=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,g.b)(),(r=(0,m.f)(k.Uj),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],Z);let F=!1,j=new h.n((t,e,i,s)=>{F||(F=!0,t(M.nb).to(Z).inSingletonScope(),t(M.XN).toService(M.nb))});function H(){H.__loaded||(H.__loaded=!0,a.i.RegisterGraphicCreator("rect",n.f),o.n.load(T),o.n.load(C.X?D:j))}H.__loaded=!1;let z=H},4683:function(t,e,i){i.d(e,{v:()=>E});var s,r=i(1636),n=i(7578),a=i(6480),o=i(8429),l=i(7428),h=i(6490),d=i(8535),u=i(1749),c=i(6003),p=i(9292),g=i(4033);let m=class extends p.Y{constructor(){super(),this.numberType=u.$M,this.builtinContributions=[g.C],this.init()}drawShape(t,e,i,s,r){let n=(0,d.gh)(t).richtext,{strokeOpacity:a=n.strokeOpacity,opacity:o=n.opacity,fillOpacity:l=n.fillOpacity,visible:h=n.visible}=t.attribute;if(!t.valid||!h)return;let u=(0,c.Bv)(o,l,!0),p=(0,c.Bv)(o,a,!0);u&&(e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,n),e.translate(i,s),this.beforeRenderStep(t,e,i,s,u,p,u,p,n,r),t.getFrameCache().draw(e,this.drawIcon),this.afterRenderStep(t,e,i,s,u,p,u,p,n,r))}drawIcon(t,e,i,s,r){var n;let a=(0,d.gh)(t).richtextIcon,{width:o=a.width,height:l=a.height,opacity:u=a.opacity,image:c,backgroundFill:p=a.backgroundFill,backgroundFillOpacity:g=a.backgroundFillOpacity,backgroundStroke:m=a.backgroundStroke,backgroundStrokeOpacity:f=a.backgroundStrokeOpacity,backgroundRadius:v=a.backgroundRadius,margin:_}=t.attribute,{backgroundWidth:y=o,backgroundHeight:b=l}=t.attribute;if(_&&(i+=t._marginArray[3],s+=t._marginArray[0]),t._hovered){let t=(y-o)/2,r=(b-l)/2;0===v?(e.beginPath(),e.rect(i-t,s-r,y,b)):(e.beginPath(),(0,h.U)(e,i-t,s-r,y,b,v,!0)),p&&(e.globalAlpha=g,e.fillStyle=p,e.fill()),m&&(e.globalAlpha=f,e.strokeStyle=m,e.stroke())}let x=c&&(null===(n=null==t?void 0:t.resources)||void 0===n?void 0:n.get(c));x&&"success"===x.state&&(e.globalAlpha=u,e.drawImage(x.data,i,s,o,l))}draw(t,e,i){let s=(0,d.gh)(t).richtext;this._draw(t,s,!1,i)}};m=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],m);var f=i(4481);let v=!1,_=new o.n(t=>{v||(v=!0,t(f.fS).to(m).inSingletonScope(),t(f.uz).toService(f.fS))});var y=i(1671),b=i(479),x=i(1600);let S=class{constructor(t){this.canvasRenderer=t,this.type="richtext",this.numberType=u.$M}contains(t,e,i){return!!t.AABBBounds.containsPoint(e)}};S=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),(s=(0,x.f)(f.fS),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);let A=!1,k=new o.n((t,e,i,s)=>{A||(A=!0,t(b.ZY).to(S).inSingletonScope(),t(b.EL).toService(b.ZY))});var w=i(873);let T=!1,C=new o.n((t,e,i,s)=>{T||(T=!0,t(b.cs).to(w.Z).inSingletonScope(),t(w.Z).toService(b.cs))});function M(){M.__loaded||(M.__loaded=!0,n.i.RegisterGraphicCreator("richtext",r.p),a.n.load(_),a.n.load(y.X?k:C))}M.__loaded=!1;let E=M},489:function(t,e,i){i.d(e,{k:()=>V});var s,r,n=i(5196),a=i(7578),o=i(6480),l=i(8906),h=i(8429),d=i(623),u=i(3482),c=i(4481),p=i(7428),g=i(1600),m=i(7089),f=i(8535),v=i(1749),_=i(9292),y=i(7636),b=i(3116),x=i(3872),S=i(6936);let A=new class{constructor(){this.time=x.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u){let c=t.getParsedPath();if(!c)return;let{outerBorder:p,innerBorder:g}=t.attribute,m=p&&!1!==p.visible,f=g&&!1!==g.visible;if(!m&&!f)return;let{size:v=l.size,opacity:_=l.opacity,x:y=l.x,y:x=l.y,scaleX:S=l.scaleX,scaleY:A=l.scaleY,keepStrokeScale:k=l.keepStrokeScale}=t.attribute,w=(r,n)=>{let a=!(!r||!r.stroke),{distance:o=l[n].distance}=r,h=k?o:(0,b.D)(e,o,e.dpr);if(e.beginPath(),!1===c.drawOffset(e,v,i,s,("outerBorder"===n?1:-1)*h)&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),u)u(e,r,l[n]);else if(a){let a=l[n].opacity;l[n].opacity=_,e.setStrokeStyle(t,r,(y-i)/S,(x-s)/A,l[n]),l[n].opacity=a,e.stroke()}};m&&w(p,"outerBorder"),f&&w(g,"innerBorder")}},k=new class{constructor(){this.time=x.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,s,r,n,a,o,l,h,d,u,c){let{clipRange:p=l.clipRange,x:g=l.x,y:m=l.y,z:f=l.z,size:v=l.size,scaleX:_=l.scaleX,scaleY:y=l.scaleY}=t.attribute,b=t.getParsedPath();b&&p<1&&p>0&&(e.beginPath(),b.drawWithClipRange&&b.drawWithClipRange(e,v,i,s,p,f,(r,n)=>{var a,h,d,c;if(t._parsedPath.svgCache){let e=Object.assign({},n);e.fill=null!==(a=n.fill)&&void 0!==a?a:t.attribute.fill,e.opacity=null!==(h=n.opacity)&&void 0!==h?h:t.attribute.opacity,e.fillOpacity=t.attribute.fillOpacity,e.stroke=null!==(d=n.stroke)&&void 0!==d?d:t.attribute.stroke,e.lineWidth=null!==(c=n.lineWidth)&&void 0!==c?c:t.attribute.lineWidth,n=e}n.stroke&&(u?u(e,t.attribute,l):o&&(e.setStrokeStyle(t,n,(g-i)/_,(m-s)/y,l),e.stroke()))}),n&&!b.isSvg&&(u?u(e,t.attribute,l):o&&(e.setStrokeStyle(t,t.attribute,(g-i)/_,(m-s)/y,l),e.stroke())))}},w=S.H,T=d.R6;var C=function(t,e){return function(i,s){e(i,s,t)}};let M=class extends _.Y{constructor(t){super(),this.symbolRenderContribitions=t,this.numberType=v.B5,this.builtinContributions=[A,T,w,k],this.init(t)}drawShape(t,e,i,s,r,n,a,o){var l;let h=(0,f.gh)(t,null==n?void 0:n.theme).symbol,{size:d=h.size,x:u=h.x,y:c=h.y,scaleX:p=h.scaleX,scaleY:g=h.scaleY,fillStrokeOrder:m=h.fillStrokeOrder,clipRange:v=h.clipRange}=t.attribute,_=this.valid(t,h,a,o);if(!_)return;let{fVisible:b,sVisible:x,doFill:S,doStroke:A}=_,k=t.getParsedPath();if(!k)return;let{keepDirIn3d:w=h.keepDirIn3d}=t.attribute,T=null!==(l=this.z)&&void 0!==l?l:0;e.beginPath();let C=i,M=s,E=T,B=e.camera;if(w&&B&&e.project){let t=e.project(i,s,T);e.camera=null,(0,y.Z)(d)&&(d[0],d[1]),C=t.x,M=t.y,E=void 0}!1===k.draw(e,d,C,M,E,(r,n)=>{var l,d,f,_;if(t._parsedPath.svgCache){let e=Object.assign({},n);e.fill=null!==(l=n.fill)&&void 0!==l?l:t.attribute.fill,e.opacity=null!==(d=n.opacity)&&void 0!==d?d:t.attribute.opacity,e.fillOpacity=t.attribute.fillOpacity,e.stroke=null!==(f=n.stroke)&&void 0!==f?f:t.attribute.stroke,e.lineWidth=null!==(_=n.lineWidth)&&void 0!==_?_:t.attribute.lineWidth,n=e}let y=()=>{n.fill&&(a?a(e,t.attribute,h):(e.setCommonStyle(t,n,u-i,c-s,h),e.fill()))},b=()=>{n.stroke&&(o?o(e,t.attribute,h):x&&v>=1&&(e.setStrokeStyle(t,n,(u-i)/p,(c-s)/g,h),e.stroke()))};m?(b(),y()):(y(),b())})&&e.closePath(),e.camera=B,e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,h),this.beforeRenderStep(t,e,i,s,S,A,b,x,h,r,a,o);let O=()=>{S&&!k.isSvg&&(a?a(e,t.attribute,h):b&&(e.setCommonStyle(t,t.attribute,u-i,c-s,h),e.fill()))},I=()=>{A&&!k.isSvg&&(o?o(e,t.attribute,h):x&&v>=1&&(e.setStrokeStyle(t,t.attribute,(u-i)/p,(c-s)/g,h),e.stroke()))};m?(I(),O()):(O(),I()),this.afterRenderStep(t,e,i,s,S,A,b,x,h,r,a,o)}draw(t,e,i,s){let r=(0,f.gh)(t,null==s?void 0:s.theme).symbol;this._draw(t,r,!1,i,s)}};M=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),C(0,(0,g.f)(l.Qc)),C(0,(0,m.t)(u.X3)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],M);let E=!1,B=new h.n(t=>{E||(E=!0,t(M).toSelf().inSingletonScope(),t(c.tP).to(M).inSingletonScope(),t(c.uz).toService(c.tP),t(u.X3).toService(d.Sg),(0,l.yb)(t,u.X3))});var O=i(1671),I=i(479),R=i(8113),P=i(4021);let L=class extends P.D{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=v.B5}contains(t,e,i){let{pickContext:s}=null!=i?i:{};if(!s)return!1;let r=t.getParsedPath();if(!s.camera){if(!t.AABBBounds.containsPoint(e))return!1;if(r.isSvg||"imprecise"===t.attribute.pickMode)return!0}s.highPerformanceSave();let n=t.getGraphicTheme(),{x:a,y:o,z:l,lastModelMatrix:h}=this.transform(t,n,s),d=e;if(s.camera){d=e.clone();let i=t.parent.globalTransMatrix;d.x=i.a*e.x+i.c*e.y+i.e,d.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=l;let u=!1;return this.canvasRenderer.drawShape(t,s,a,o,{},null,(t,e,i)=>!!u||(u=t.isPointInPath(d.x,d.y)),(t,e,i)=>{if(u)return!0;let r=e.lineWidth||i.lineWidth,n=e.pickStrokeBuffer||i.pickStrokeBuffer,a=e.keepStrokeScale||i.keepStrokeScale;return s.lineWidth=a?r+n:(0,b.D)(s,r+n,s.dpr),u=t.isPointInStroke(d.x,d.y)}),this.canvasRenderer.z=0,s.modelMatrix!==h&&R.yp.free(s.modelMatrix),s.modelMatrix=h,s.highPerformanceRestore(),u}};L=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(s=(0,g.f)(c.tP),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],L);let D=!1,Z=new h.n((t,e,i,s)=>{D||(D=!0,t(I.RC).to(L).inSingletonScope(),t(I.EL).toService(I.RC))});var F=i(1335);let j=class extends F.o{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=v.B5}};j=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(r=(0,g.f)(c.tP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],j);let H=!1,z=new h.n((t,e,i,s)=>{H||(H=!0,t(I.Yr).to(j).inSingletonScope(),t(I.XN).toService(I.Yr))});function N(){N.__loaded||(N.__loaded=!0,a.i.RegisterGraphicCreator("symbol",n.t),o.n.load(B),o.n.load(O.X?Z:z))}N.__loaded=!1;let V=N},5757:function(t,e,i){i.d(e,{g:()=>F});var s,r=i(2875),n=i(7578),a=i(6480),o=i(8906),l=i(8429),h=i(623),d=i(3482),u=i(4481),c=i(7428),p=i(1600),g=i(7089),m=i(8535),f=i(1749),v=i(5575),_=i(9292),y=i(8113),b=i(8103),x=i(6082),S=i(3386),A=i(4033),k=function(t,e){return function(i,s){e(i,s,t)}};let w=class extends _.Y{constructor(t){super(),this.textRenderContribitions=t,this.numberType=f.Us,this.builtinContributions=[A.C],this.init(t)}drawShape(t,e,i,s,r,n,a,o){var l,h,d;let u=(0,m.gh)(t,null==n?void 0:n.theme).text,{text:c,underline:p=u.underline,lineThrough:g=u.lineThrough,keepDirIn3d:f=u.keepDirIn3d,direction:v=u.direction,fontSize:_=u.fontSize,verticalMode:x=u.verticalMode,x:A=u.x,y:k=u.y}=t.attribute,w=null!==(l=(0,S.VA)(t.attribute.lineHeight,_))&&void 0!==l?l:_,T=this.valid(t,u,a,o);if(!T)return;let{fVisible:C,sVisible:M,doFill:E,doStroke:B}=T,O=!f,I=this.z||0;e.beginPath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),this.beforeRenderStep(t,e,i,s,E,B,C,M,u,r,a,o),O&&this.transformUseContext2d(t,u,I,e);let R=(r,n,l,h)=>{let d=i+n,c=s+l;if(h){e.highPerformanceSave(),d+=_;let t=y.QE.allocate(1,0,0,1,0,0);t.rotateByCenter(Math.PI/2,d,c),e.transformFromMatrix(t,!0),y.QE.free(t)}B&&(o?o(e,t.attribute,u):M&&(e.setStrokeStyle(t,t.attribute,A-i,k-s,u),e.strokeText(r,d,c,I))),E&&(a?a(e,t.attribute,u):C&&(e.setCommonStyle(t,t.attribute,A-i,k-s,u),e.fillText(r,d,c,I))),h&&(e.highPerformanceRestore(),e.setTransformForCurrent())};if(e.setTextStyleWithoutAlignBaseline(t.attribute,u,I),"horizontal"===v){let{multilineLayout:r}=t;if(!r)return void e.highPerformanceRestore();let{xOffset:n,yOffset:l}=r.bbox;B&&(o?o(e,t.attribute,u):M&&(e.setStrokeStyle(t,t.attribute,A-i,k-s,u),r.lines.forEach(t=>{e.strokeText(t.str,(t.leftOffset||0)+n+i,(t.topOffset||0)+l+s,I)}))),E&&(a?a(e,t.attribute,u):C&&(e.setCommonStyle(t,t.attribute,A-i,k-s,u),r.lines.forEach(r=>{e.fillText(r.str,(r.leftOffset||0)+n+i,(r.topOffset||0)+l+s,I),this.drawUnderLine(p,g,t,(r.leftOffset||0)+n+i,(r.topOffset||0)+l+s,r.descent,(r.descent-r.ascent)/2,I,u,e,{width:r.width})})))}else{let{textAlign:i=u.textAlign,textBaseline:s=u.textBaseline}=t.attribute;if(!x){let e=i;i=null!==(h=t.getBaselineMapAlign()[s])&&void 0!==h?h:"left",s=null!==(d=t.getAlignMapBaseline()[e])&&void 0!==d?d:"top"}t.tryUpdateAABBBounds();let{verticalList:r}=t.cache;e.textAlign="left",e.textBaseline="top";let n=w*r.length,a=0;r.forEach(t=>{let e=t.reduce((t,e)=>t+(e.width||0),0);a=(0,b.Fp)(e,a)});let o=0,l=0;"bottom"===s?l=-n:"middle"===s&&(l=-n/2),"center"===i?o-=a/2:"right"===i&&(o-=a),r.forEach((t,e)=>{let s=t.reduce((t,e)=>t+(e.width||0),0),r=a-s,h=o;"center"===i?h+=r/2:"right"===i&&(h+=r),t.forEach(t=>{let{text:i,width:s,direction:r}=t;R(i,n-(e+1)*w+l,h,r),h+=s})})}O&&this.restoreTransformUseContext2d(t,u,I,e),this.afterRenderStep(t,e,i,s,E,B,C,M,u,r,a,o)}draw(t,e,i,s){let r=(0,m.gh)(t,null==s?void 0:s.theme).text,{keepDirIn3d:n=r.keepDirIn3d}=t.attribute;this._draw(t,r,!n,i,s)}drawUnderLine(t,e,i,s,r,n,a,o,l,h,d){if(e+t<=0)return;let{textAlign:u=l.textAlign,fill:c=l.fill,opacity:p=l.opacity,underlineOffset:g=l.underlineOffset,underlineDash:m=l.underlineDash,fillOpacity:f=l.fillOpacity}=i.attribute,_=!(0,x.Z)(d),y=_?d.width:i.clipedWidth,b=_?0:(0,v.js)(u,y),S={lineWidth:0,stroke:c,opacity:p,strokeOpacity:f};if(t){S.lineWidth=t,h.setStrokeStyle(i,S,s,r,l),m&&h.setLineDash(m),h.beginPath();let e=r+n+g;h.moveTo(s+b,e,o),h.lineTo(s+b+y,e,o),h.stroke()}if(e){S.lineWidth=e,h.setStrokeStyle(i,S,s,r,l),h.beginPath();let t=r+a;h.moveTo(s+b,t,o),h.lineTo(s+b+y,t,o),h.stroke()}}};w=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),k(0,(0,p.f)(o.Qc)),k(0,(0,g.t)(d.$K)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],w);let T=!1,C=new l.n(t=>{T||(T=!0,t(u.EY).to(w).inSingletonScope(),t(u.uz).toService(u.EY),t(d.$K).toService(h.Sg),(0,o.yb)(t,d.$K))});var M=i(1671),E=i(479),B=i(4021);let O=class extends B.D{constructor(t){super(),this.canvasRenderer=t,this.type="text",this.numberType=f.Us}contains(t,e,i){let{pickContext:s}=null!=i?i:{};if(!s)return!1;let r=t.AABBBounds;if(!s.camera)return!!r.containsPoint(e);s.highPerformanceSave();let n=t.getGraphicTheme(),{keepDirIn3d:a=n.keepDirIn3d}=t.attribute,{x:o,y:l,z:h,lastModelMatrix:d}=this.transform(t,n,s,!a);this.canvasRenderer.z=h;let u=e;if(s.camera){u=e.clone();let i=t.parent.globalTransMatrix;u.x=i.a*e.x+i.c*e.y+i.e,u.y=i.b*e.x+i.d*e.y+i.f}let c=!1;return this.canvasRenderer.drawShape(t,s,o,l,{},null,(e,i,s)=>{if(c)return!0;let{fontSize:r=n.fontSize,textBaseline:a=n.textBaseline,textAlign:d=n.textAlign}=t.attribute,p=t.AABBBounds,g=p.height(),m=p.width(),f=(0,v.nV)(a,g,r),_=(0,v.js)(d,m);return e.rect(_+o,f+l,m,g,h),c=e.isPointInPath(u.x,u.y)},(t,e,i)=>c),this.canvasRenderer.z=0,s.modelMatrix!==d&&y.yp.free(s.modelMatrix),s.modelMatrix=d,s.highPerformanceRestore(),c}};O=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(s=(0,p.f)(u.EY),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],O);let I=!1,R=new l.n((t,e,i,s)=>{I||(I=!0,t(E.Sp).to(O).inSingletonScope(),t(E.EL).toService(E.Sp))}),P=class{constructor(){this.type="text",this.numberType=f.Us}contains(t,e,i){return!!t.AABBBounds.containsPoint(e)}};P=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)()],P);let L=!1,D=new l.n((t,e,i,s)=>{L||(L=!0,t(E.p1).to(P).inSingletonScope(),t(E.XN).toService(E.p1))});function Z(){Z.__loaded||(Z.__loaded=!0,n.i.RegisterGraphicCreator("text",r.r),a.n.load(C),a.n.load(M.X?R:D))}Z.__loaded=!1;let F=Z},1287:function(t,e,i){i.d(e,{j:()=>g});var s=i(7623),r=i(9896),n=i(5859),a=i(6082),o=i(1601),l=i(8028),h=i(8919),d=i(5173),u=i(1319);function c(t,e,i,s){let r=[],n=t;for(;n<=e;)r.push(n),n+=i;return s&&r.reverse(),r}function p(t,e,i,s){let r,n;if(e=Math.floor(+e),t=Math.floor(+t),!(i=Math.floor(+i)))return[];if(t===e)return[t];if(r=e<t){let i=t;t=e,e=i}let a=(0,u.i)(1,e-t+1)(i);if(n=Math.floor((e-t+1)/a),!s)for(;Math.ceil((e-t+1)/n)>i&&a>1;)a-=1,n=Math.floor((e-t)/a);return c(t,e,n,r)}class g extends l.J{constructor(t){super(),this.type=d._f.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,e){if(t)return this;this._wholeRange=null;let i=this._calculateWholeRange(this._range,e),s=super.domain().length,r=i[1]<i[0],n=i[Number(r)-0],a=i[1-Number(r)],o=(0,h.U6)(s,this._paddingInner,this._paddingOuter);return this._step=(a-n)/Math.max(1,o||1),this._round&&(this._step=Math.floor(this._step)),n+=(a-n-this._step*(s-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(n=Math.round(n),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:r,start:r?n+this._step*(s-1):n,count:s},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let s=this._index.get(e);if(!s){if(this._unknown!==l.O)return this._unknown;s=this._domain.push(t),this._index.set(e,s)}let{count:r,start:n,reverse:a}=this._bandRangeState,o=n+(s-1)%r*(a?-1:1)*this._step;return this._fishEyeTransform?this._fishEyeTransform(o):o}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let e;if((0,s.Z)(this._rangeFactorStart)&&(0,s.Z)(this._rangeFactorEnd)&&2===t.length){let i=(0,h.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]);e=Math.abs(i[1]-i[0])}else e=Math.abs(t[1]-t[0]);let i=(0,h.at)(super.domain().length,e,this._paddingInner,this._paddingOuter,this._round);i<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):i>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=i,this._isFixed=!1)}if(this.isBandwidthFixed()){let i=(0,h.$l)(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/i,1);if((0,s.Z)(this._rangeFactorStart)&&(0,s.Z)(this._rangeFactorEnd)){let s=this._rangeFactorStart+r<=1,n=this._rangeFactorEnd-r>=0;if("rangeFactorStart"===e&&s?this._rangeFactorEnd=this._rangeFactorStart+r:"rangeFactorEnd"===e&&n?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?s?this._rangeFactorEnd=this._rangeFactorStart+r:n?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):n?this._rangeFactorStart=this._rangeFactorEnd-r:s?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1),i>0){let e=t[0]-i*this._rangeFactorStart;this._wholeRange=[e,e+i]}else{let e=t[1]+i*(1-this._rangeFactorEnd);this._wholeRange=[e-i,e]}}else this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+i];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){let t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){let e=this._domain;if((0,s.Z)(this._rangeFactorStart)&&(0,s.Z)(this._rangeFactorEnd)&&e.length){let i=this._getInvertIndex(t[0]),s=this._getInvertIndex(t[1]);return e.slice(Math.min(i,s),Math.max(i,s)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[(0,r.H)(t[0]),(0,r.H)(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[(0,r.H)(t[0]),(0,r.H)(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return -1===t?e:p(0,e.length-1,t,!1).map(t=>e[t])}tickData(t=10){return this.ticks(t).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return p(0,e.length-1,t,!0).filter(t=>t<e.length).map(t=>e[t])}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(function(t,e,i){let s;if(e=Math.floor(+e),t=Math.floor(+t),i=(0,u.i)(1,e-t+1)(Math.floor(+i)),s=e<t){let i=t;t=e,e=i}return c(t,e,i,s)})(0,e.length-1,t).map(t=>e[t])}_getInvertIndex(t){let e=0,i=this.step()/2,s=this.bandwidth()/2,r=this._domain.length,a=this.range(),o=a[0]>a[a.length-1];for(e=0;e<r;e++){let a=this.scale(this._domain[e])+s;if(0===e&&(!o&&!(0,n.Vy)(t,a+i)||o&&!(0,n.SQ)(t,a-i))||e===r-1||!(0,n.SQ)(t,a-i)&&!(0,n.Vy)(t,a+i))break}return e>=0&&e<=r-1?e:r-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return void 0!==t?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return void 0!==t?(this._round=t,this.rescale(e)):this._round}align(t,e){return void 0!==t?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return(0,a.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return(0,a.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?("auto"===t?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth="auto"===t?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth="auto"===t?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&(0,o.Z)(this._userBandwidth)}clone(){var t,e,i;return new g(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!==(t=this._userBandwidth)&&void 0!==t?t:"auto",!0).maxBandwidth(null!==(e=this._maxBandwidth)&&void 0!==e?e:"auto",!0).minBandwidth(null!==(i=this._maxBandwidth)&&void 0!==i?i:"auto")}}},2342:function(t,e,i){i.d(e,{s:()=>o});var s=i(7623),r=i(6082),n=i(3604),a=i(8919);class o{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:(0,s.Z)(this._rangeFactorStart)&&(0,s.Z)(this._rangeFactorEnd)&&2===t.length?(this._wholeRange=(0,a.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(2===t.length&&t.every(t=>t>=0&&t<=1)&&(this._wholeRange=null,0===t[0]&&1===t[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):(0,s.Z)(this._rangeFactorStart)&&(0,s.Z)(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return(0,r.Z)(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,r.Z)(this._rangeFactorEnd)||1===this._rangeFactorEnd)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t,this._rangeFactorEnd=null!==(i=this._rangeFactorEnd)&&void 0!==i?i:1)),this)}rangeFactorEnd(t,e){var i;return(0,r.Z)(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,r.Z)(this._rangeFactorStart)||0===this._rangeFactorStart)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorEnd=t,this._rangeFactorStart=null!==(i=this._rangeFactorStart)&&void 0!==i?i:0)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);let{distortion:e=2,radiusRatio:i=.1,radius:s}=this._fishEyeOptions,a=this.range(),o=a[0],l=a[a.length-1],h=Math.min(o,l),d=Math.max(o,l),u=(0,n.Z)(null!==(t=this._fishEyeOptions.focus)&&void 0!==t?t:0,h,d),c=(0,r.Z)(s)?(d-h)*i:s,p=Math.exp(e);p=p/(p-1)*c;let g=e/c;this._fishEyeTransform=t=>{let e=Math.abs(t-u);return e>=c?t:e<=1e-6?u:u+(t-u)*(p*(1-Math.exp(-e*g))/e*.75+.25)}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var i;return null!==(i=null==this?void 0:this[t])&&void 0!==i?i:e}}},4878:function(t,e,i){i.d(e,{y:()=>y});var s={};i.r(s),i.d(s,{Color:()=>n.Il,DEFAULT_COLORS:()=>n.QP,RGB:()=>n.eX,hexToRgb:()=>a.Z,hslToRgb:()=>o.Z,interpolateRgb:()=>d,rgbToHex:()=>l,rgbToHsl:()=>h.Z});var r=i(2342),n=i(9921),a=i(2450),o=i(4287);function l(t,e,i){return Number(0x1000000+(t<<16)+(e<<8)+i).toString(16).slice(1)}var h=i(6879);function d(t,e){let i=t.r,s=e.r,r=t.g,a=e.g,o=t.b,l=e.b,h=t.opacity,d=e.opacity;return t=>{let e=Math.round(i*(1-t)+s*t),u=Math.round(r*(1-t)+a*t),c=Math.round(o*(1-t)+l*t);return new n.eX(e,u,c,h*(1-t)+d*t)}}var u=i(6082),c=i(5660);let{interpolateRgb:p}=s;function g(t,e){let i;let s=typeof e;if((0,u.Z)(e)||"boolean"===s)return()=>e;if("number"===s)return(0,c.k4)(t,e);if("string"===s){if(i=n.Il.parseColorString(e)){let e=p(n.Il.parseColorString(t),i);return t=>e(t).formatRgb()}return(0,c.k4)(Number(t),Number(e))}return e instanceof n.eX?p(t,e):e instanceof n.Il?p(t.color,e.color):e instanceof Date?(0,c.NW)(t,e):(0,c.k4)(Number(t),Number(e))}var m=i(8919),f=i(7623),v=i(9896),_=i(1319);class y extends r.s{constructor(t=m.yR,e=m.yR){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=m.yR,this._piecewise=m.Pd,this._interpolate=g}calculateVisibleDomain(t){var e;return(0,f.Z)(this._rangeFactorStart)&&(0,f.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:null!==(e=this._niceDomain)&&void 0!==e?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!==(e=this._niceDomain)&&void 0!==e?e:this._domain).map(this.transformer),c.k4)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return(null!==(i=this._niceDomain)&&void 0!==i?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;let s=Array.from(t,v.H);return this._domain=s,this.rescale(e)}range(t,e){if(!t)return this._range.slice();let i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){let i=Array.from(t);return this._range=i,this._interpolate=c.OD,this.rescale(e)}rescale(t){var e;if(t)return this;let i=null!==(e=this._niceDomain)&&void 0!==e?e:this._domain,s=i.length,r=this._range.length,n=Math.min(s,r);if(s&&s<r&&this._forceAlign){let t=r-s+1,e=i[s-1],a=s>=2?(e-i[s-2])/t:0;for(let r=1;r<=t;r++)i[s-2+r]=e-a*(t-r);n=r}return this._autoClamp&&(this._clamp=(0,_.i)(i[0],i[n-1])),this._piecewise=n>2?m.PP:m.Pd,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:m.yR),this.rescale(i)):this._clamp!==m.yR}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){let e=this.ticks(t);return(null!=e?e:[]).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return(0,u.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return(0,u.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}},6132:function(t,e,i){i.d(e,{f:()=>l});var s=i(5173),r=i(855),n=i(4878),a=i(9038),o=i(7623);class l extends n.y{constructor(){super(...arguments),this.type=s._f.Linear}clone(){return(new l).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}tickFormat(){return()=>{}}d3Ticks(t=10,e){let i=this.calculateVisibleDomain(this._range);return(0,r.Z6)(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if((0,a.Z)(null==e?void 0:e.customTicks))return e.customTicks(this,t);if((0,o.Z)(this._rangeFactorStart)&&(0,o.Z)(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(t,e);let s=null!==(i=this._niceDomain)&&void 0!==i?i:this._domain,n=this._domain,l=s[0],h=s[s.length-1],d=(0,r.sd)(n[0],n[n.length-1],t,e);if(!d.length)return d;if(this._domainValidator)d=d.filter(this._domainValidator);else if((d[0]!==l||d[d.length-1]!==h)&&this._niceType){let t=s.slice();if("all"===this._niceType?(t[0]=d[0],t[t.length-1]=d[d.length-1],this._niceDomain=t,this.rescale()):"min"===this._niceType&&d[0]!==l?(t[0]=d[0],this._niceDomain=t,this.rescale()):"max"===this._niceType&&d[d.length-1]!==h&&(t[t.length-1]=d[d.length-1],this._niceDomain=t,this.rescale()),"all"!==this._niceType){let e=Math.min(t[0],t[t.length-1]),i=Math.max(t[0],t[t.length-1]);d=d.filter(t=>t>=e&&t<=i)}}return d}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,r.S8)(e[0],e[e.length-1],t)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,r.Hb)(e[0],e[e.length-1],t)}nice(t=10,e){var i,s;let n=this._domain,a=[];if(e){let t=(0,r.OQ)(n,e);if(a=t.niceMinMax,this._domainValidator=t.domainValidator,this._niceType=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){let e=(0,r.EL)(n.slice(),t);"min"===this._niceType?e[e.length-1]=null!==(i=a[1])&&void 0!==i?i:e[e.length-1]:"max"===this._niceType&&(e[0]=null!==(s=a[0])&&void 0!==s?s:e[0]),this._niceDomain=e,this.rescale()}return this}niceMin(t=10){this._niceType="min";let e=this._domain[this._domain.length-1],i=(0,r.EL)(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";let e=this._domain[0],i=(0,r.EL)(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}}},8028:function(t,e,i){i.d(e,{J:()=>o,O:()=>a});var s=i(5173),r=i(2342),n=i(7623);let a=Symbol("implicit");class o extends r.s{specified(t){var e;return t?(this._specified=Object.assign(null!==(e=this._specified)&&void 0!==e?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=s._f.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=a}clone(){let t=(new o).domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return(0,n.Z)(this._rangeFactorStart)&&(0,n.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let s=this._index.get(e);if(!s){if(this._unknown!==a)return this._unknown;s=this._domain.push(t),this._index.set(e,s)}let r=this._ordinalRange[(s-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(r):r}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();for(let e of(this._domain=[],this._index=new Map,t)){let t=`${e}`;this._index.has(t)||this._index.set(t,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();let e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&null!==(e=this._index.get(`${t}`))&&void 0!==e?e:-1}}},5173:function(t,e,i){var s,r;i.d(e,{_f:()=>s,dx:()=>o,lK:()=>l,z2:()=>a}),(r=s||(s={})).Identity="identity",r.Linear="linear",r.Log="log",r.Pow="pow",r.Sqrt="sqrt",r.Symlog="symlog",r.Time="time",r.Quantile="quantile",r.Quantize="quantize",r.Threshold="threshold",r.Ordinal="ordinal",r.Point="point",r.Band="band";let n={};function a(t){switch(t){case s.Linear:case s.Log:case s.Pow:case s.Sqrt:case s.Symlog:case s.Time:return!0;default:return!1}}function o(t){return!!n[t]}function l(t){switch(t){case s.Ordinal:case s.Point:case s.Band:return!0;default:return!1}}Object.values(s).forEach(t=>{n[t]=!0})},855:function(t,e,i){i.d(e,{sd:()=>g,Hb:()=>_,e3:()=>S,jb:()=>A,EL:()=>y,RX:()=>k,OQ:()=>b,S8:()=>v,Z6:()=>u});var s=i(7623);let r=t=>{let e=null,i=null;return(...s)=>(e&&s.every((t,i)=>t===e[i])||(e=s,i=t(...s)),i)};var n=i(1601),a=i(8919);let o=Math.sqrt(50),l=Math.sqrt(10),h=Math.sqrt(2),d=(t,e,i)=>{let r=1,n=t,a=Math.floor((e-1)/2),o=Math.abs(t);return t>=0&&t<=Number.MIN_VALUE?n=0:t<0&&t>=-Number.MIN_VALUE?n=-(e-1):!i&&o<1?r=m(o).step:(i||o>1)&&(n=Math.floor(t)-a*r),r>0?(t>0?n=Math.max(n,0):t<0&&(n=Math.min(n,-(e-1)*r)),(function(t,e,i){(0,s.Z)(e)||(e=t,t=0),(0,s.Z)(i)||(i=1);let r=-1,n=0|Math.max(0,Math.ceil((e-t)/i)),a=Array(n);for(;++r<n;)a[r]=t+r*i;return a})(0,e).map(t=>n+t*r)):t>0?c(0,-(e-1)/r,r):c((e-1)/r,0,r)},u=r((t,e,i,s)=>{let r,n,a,o,l=-1;if(i=+i,(t=+t)==(e=+e)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return[t];if((r=e<t)&&(n=t,t=e,e=n),!isFinite(o=f(t,e,i).step))return[];if(o>0){let i=Math.round(t/o),s=Math.round(e/o);for(i*o<t&&++i,s*o>e&&--s,a=Array(n=s-i+1);++l<n;)a[l]=(i+l)*o}else if(o<0&&(null==s?void 0:s.noDecimals)){o=1;let i=Math.ceil(t),s=Math.floor(e);if(!(i<=s))return[];for(a=Array(n=s-i+1);++l<n;)a[l]=i+l}else{let i=Math.round(t*(o=-o)),s=Math.round(e*o);for(i/o<t&&++i,s/o>e&&--s,a=Array(n=s-i+1);++l<n;)a[l]=(i+l)/o}return r&&a.reverse(),a}),c=(t,e,i)=>{let s,r,n=-1;if(i>0){let a=Math.floor(t/i),o=Math.ceil(e/i);for((a+1)*i<t&&++a,(o-1)*i>e&&--o,r=Array(s=o-a+1);++n<s;)r[n]=(a+n)*i}else{let a=Math.floor(t*(i=-i)),o=Math.ceil(e*i);for((a+1)/i<t&&++a,(o-1)/i>e&&--o,r=Array(s=o-a+1);++n<s;)r[n]=(a+n)/i}return r},p=(t,e,i)=>{let s;let r=t[0],n=t[t.length-1],a=e-t.length;if(n<=0){let e=[];for(s=a;s>=1;s--)e.push(r-s*i);return e.concat(t)}if(r>=0){for(s=1;s<=a;s++)t.push(n+s*i);return t}let o=[],l=[];for(s=1;s<=a;s++)s%2==0?o=[r-Math.floor(s/2)*i].concat(o):l.push(n+Math.ceil(s/2)*i);return o.concat(t).concat(l)},g=r((t,e,i,s)=>{let r,n,a;if(i=+i,(t=+t)==(e=+e)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return d(t,i,null==s?void 0:s.noDecimals);(r=e<t)&&(a=t,t=e,e=a);let o=f(t,e,i),l=o.step;if(!isFinite(l))return[];if(l>0){let s=1,{power:r,gap:a}=o,h=10===a?2*10**r:1*10**r;for(;s<=5&&(n=c(t,e,l)).length>i+1&&i>2;)l+=h,s+=1;i>2&&n.length<i-1&&(n=p(n,i,l))}else(null==s?void 0:s.noDecimals)&&l<0&&(l=1),n=c(t,e,l);return r&&n.reverse(),n}),m=t=>{let e=Math.floor(Math.log(t)/Math.LN10),i=t/10**e,s=1;return i>=o?s=10:i>=l?s=5:i>=h&&(s=2),e>=0?{step:s*10**e,gap:s,power:e}:{step:-(10**-e)/s,gap:s,power:e}};function f(t,e,i){return m((e-t)/Math.max(0,i))}function v(t,e,i){let s;if(i=+i,(t=+t)==(e=+e)&&i>0)return[t];if(i<=0||0==(s=(e-t)/Math.max(1,i-1))||!isFinite(s))return[];let r=Array(i);for(let e=0;e<i;e++)r[e]=t+e*s;return r}function _(t,e,i){let s,r,n=-1;if(i=+i,(r=(e=+e)<(t=+t))&&(s=t,t=e,e=s),!isFinite(i)||e-t<=i)return[t];let a=Math.floor((e-t)/i+1),o=Array(a);for(;++n<a;)o[n]=t+n*i;return r&&o.reverse(),o}function y(t,e=10){let i,s,r=0,n=t.length-1,a=t[r],o=t[n],l=10;for(o<a&&(s=a,a=o,o=s,s=r,r=n,n=s);l-- >0;){if((s=f(a,o,e).step)===i)return t[r]=a,t[n]=o,t;if(s>0)a=Math.floor(a/s)*s,o=Math.ceil(o/s)*s;else{if(!(s<0))break;a=Math.ceil(a*s)/s,o=Math.floor(o*s)/s}i=s}}function b(t,e){let i=(0,n.Z)(e.forceMin),s=(0,n.Z)(e.forceMax),r=null,a=[],o=null,l=i&&s?t=>t>=e.forceMin&&t<=e.forceMax:i?t=>t>=e.forceMin:s?t=>t<=e.forceMax:null;return i?a[0]=e.forceMin:(0,n.Z)(e.min)&&e.min<=Math.min(t[0],t[t.length-1])&&(a[0]=e.min),s?a[1]=e.forceMax:(0,n.Z)(e.max)&&e.max>=Math.max(t[0],t[t.length-1])&&(a[1]=e.max),(0,n.Z)(a[0])&&(0,n.Z)(a[1])?((o=t.slice())[0]=a[0],o[o.length-1]=a[1]):r=(0,n.Z)(a[0])||(0,n.Z)(a[1])?(0,n.Z)(a[0])?"max":"min":"all",{niceType:r,niceDomain:o,niceMinMax:a,domainValidator:l}}let x=(t,e,i)=>1>Math.abs(e-t)?+i.toFixed(1):Math.round(+i),S=r((t,e,i,s,r,n,a)=>{let o=t,l=e,h=l<o;h&&([o,l]=[l,o]);let d,u,c=r(o),p=r(l),m=[];if(!(s%1)&&p-c<i){if(c=Math.floor(c),p=Math.ceil(p),o>0){for(;c<=p;++c)for(d=1;d<s;++d)if(!((u=c<0?d/n(-c):d*n(c))<o)){if(u>l)break;m.push(u)}}else for(;c<=p;++c)for(d=s-1;d>=1;--d)if(!((u=c>0?d/n(-c):d*n(c))<o)){if(u>l)break;m.push(u)}2*m.length<i&&(m=g(o,l,i))}else m=g(c,p,Math.min(p-c,i)).map(n);return m=m.filter(t=>0!==t),(null==a?void 0:a.noDecimals)&&(m=Array.from(new Set(m.map(t=>Math.floor(t))))),h?m.reverse():m}),A=r((t,e,i,s,r,n)=>{let o=[],l={},h=r(t),d=r(e),u=[];if(Number.isInteger(s))u=g(h,d,i);else{let t=(d-h)/(i-1);for(let e=0;e<i;e++)u.push(h+e*t)}return u.forEach(i=>{let r=n(i),h=Number.isInteger(s)?x(t,e,r):x(t,e,(0,a.ok)(r)),d=x(t,e,(0,a.uT)(h,[t,e]));l[d]||isNaN(d)||!(u.length>1)||(l[d]=1,o.push(d))}),o}),k=r((t,e,i,s,r)=>v(s(t),s(e),i).map(t=>(0,a.ok)(r(t))));r((t,e,i,s,r)=>_(s(t),s(e),i).map(t=>(0,a.ok)(r(t))))},8919:function(t,e,i){i.d(e,{$l:()=>p,BK:()=>m,J7:()=>h,PP:()=>f,Pd:()=>u,U6:()=>c,at:()=>g,ge:()=>a,kx:()=>v,ok:()=>_,op:()=>n,uT:()=>y,yR:()=>r,ye:()=>l});var s=i(8986);function r(t){return t}let n=t=>-Math.log(-t),a=t=>-Math.exp(-t),o=t=>isFinite(t)?Math.pow(10,t):t<0?0:t,l=t=>10===t?o:t===Math.E?Math.exp:e=>Math.pow(t,e),h=t=>t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:(t=Math.log(t),e=>Math.log(e)/t);function d(t,e){if(t=Number(t),e=Number(e)-t)return i=>(i-t)/e;let i=Number.isNaN(e)?NaN:.5;return()=>i}function u(t,e,i){let s,r;let n=t[0],a=t[1],o=e[0],l=e[1];return a<n?(s=d(a,n),r=i(l,o)):(s=d(n,a),r=i(o,l)),t=>r(s(t))}function c(t,e,i){let s;return s=1===t?t+2*i:t-e+2*i,t?s>0?s:1:0}function p(t,e,i,s){return 1===i&&(i=0),c(t,i,s)*(e/(1-i))}function g(t,e,i,s,r){let n=e/Math.max(1,c(t,i,s)||1);r&&(n=Math.floor(n));let a=n*(1-i);return r&&(a=Math.round(a)),a}function m(t,e){let i=(t[1]-t[0])/(e[1]-e[0]),s=t[0]-i*e[0];return[s,i+s]}function f(t,e,i){let r=Math.min(t.length,e.length)-1,n=Array(r),a=Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)n[o]=d(t[o],t[o+1]),a[o]=i(e[o],e[o+1]);return function(e){let i=(0,s.b4)(t,e,1,r)-1;return a[i](n[i](e))}}let v=(t,e)=>{let i=t.slice(),s=0,r=i.length-1,n=i[s],a=i[r];return a<n&&([s,r]=[r,s],[n,a]=[a,n]),i[s]=e.floor(n),i[r]=e.ceil(a),i},_=(t,e=!1)=>{let i=Math.floor(Math.log10(t)),s=t/Math.pow(10,i);return(e?s<1.5?1:s<3?2:s<7?5:10:s<=1?1:s<=2?2:s<=5?5:10)*Math.pow(10,i)},y=(t,e)=>{let i,s;return e[0]<e[1]?(i=e[0],s=e[1]):(i=e[1],s=e[0]),Math.min(Math.max(t,i),s)}},1071:function(t,e,i){i.d(e,{$s:()=>a,Hn:()=>n});var s=i(6082),r=i(1130);let n=(t,e,i)=>{if((0,s.Z)(e))return t;let r=e[0];return(0,s.Z)(r)?t:1===e.length?(t[r]=i,t):((0,s.Z)(t[r])&&("number"==typeof e[1]?t[r]=[]:t[r]={}),n(t[r],e.slice(1),i))},a=(t,e,i)=>{if(!(0,s.Z)(e))return(0,r.Z)(t,e,i)}},1805:function(t,e,i){i.d(e,{Dt:()=>n,LW:()=>l,M4:()=>r,Re:()=>h,gt:()=>a,op:()=>o,tc:()=>d});var s=i(8103);function r(t){return Math.PI/180*t}function n(t){return 180*t/Math.PI}let a=(t=0)=>{if(t<0)for(;t<-s.BZ;)t+=s.BZ;else if(t>0)for(;t>s.BZ;)t-=s.BZ;return t};function o(t,e,i){return e?{x:t.x+e*Math.cos(i),y:t.y+e*Math.sin(i)}:{x:t.x,y:t.y}}function l(t){for(;t<0;)t+=2*Math.PI;for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function h(t,e,i,s){let{x:r,y:n}=e,a=function(t,e){let i=Math.abs(e-t);if(i>=2*Math.PI||2*Math.PI-i<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];let s=l(Math.min(t,e)),r=s+i,n=[s,r],a=Math.floor(s/Math.PI)*Math.PI/2;for(;a<r;)a>s&&n.push(a),a+=Math.PI/2;return n}(i,s),{width:o,height:h}=t,d=[];return a.forEach(t=>{let e=Math.sin(t),i=Math.cos(t);1===e?d.push(h-n):-1===e?d.push(n):1===i?d.push(o-r):-1===i?d.push(r):(e>0?d.push(Math.abs((h-n)/e)):d.push(Math.abs(n/e)),i>0?d.push(Math.abs((o-r)/i)):d.push(Math.abs(r/i)))}),Math.min.apply(null,d)}function d(t){return(t=l(t))>0&&t<=Math.PI/2?2:t>Math.PI/2&&t<=Math.PI?3:t>Math.PI&&t<=3*Math.PI/2?4:1}},2450:function(t,e,i){i.d(e,{Z:()=>s});function s(t){let e="",i="",s="",r="#"===t[0]?1:0;for(let n=r;n<t.length;n++)"#"!==t[n]&&(n<r+2?e+=t[n]:n<r+4?i+=t[n]:n<r+6&&(s+=t[n]));return[parseInt(e,16),parseInt(i,16),parseInt(s,16)]}},2442:function(t,e,i){i.d(e,{j:()=>s});function s(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},8986:function(t,e,i){i.d(e,{b4:()=>n,o0:()=>a});var s=i(2442),r=i(6082);function n(t,e,i=0,a){for((0,r.Z)(a)&&(a=t.length);i<a;){let r=i+a>>>1;(0,s.j)(t[r],e)>0?a=r:i=r+1}return i}let a=(t,e,i)=>{let s=t,r=e;for(;s<r;){let t=Math.floor((s+r)/2);i(t)>=0?r=t:s=t+1}return s}},3531:function(t,e,i){i.d(e,{Z:()=>s});let s=(t,e,i)=>{let[s,r]=t;r<s&&(s=t[1],r=t[0]);let n=r-s;return n>=i-e?[e,i]:[s=Math.min(Math.max(s,e),i-n),s+n]}},1319:function(t,e,i){i.d(e,{i:()=>s});function s(t,e){let i;return t>e&&(i=t,t=e,e=i),i=>Math.max(t,Math.min(e,i))}},2937:function(t,e,i){i.d(e,{Z:()=>a});var s=i(4154),r=i(8378);let n=!1;try{n="function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame}catch(t){n=!1}n=!1;let a=function(t,e,i){let a,o,l,h,d,u,c=0,p=!1,g=!1,m=!0,f=!e&&0!==e&&n;if("function"!=typeof t)throw TypeError("Expected a function");function v(e){let i=a,s=o;return a=o=void 0,c=e,h=t.apply(s,i)}function _(t,e){return f?(cancelAnimationFrame(d),requestAnimationFrame(t)):setTimeout(t,e)}function y(t){let i=t-u;return void 0===u||i>=e||i<0||g&&t-c>=l}function b(){let t=Date.now();if(y(t))return x(t);d=_(b,function(t){let i=t-c,s=e-(t-u);return g?Math.min(s,l-i):s}(t))}function x(t){return d=void 0,m&&a?v(t):(a=o=void 0,h)}function S(...t){let i=Date.now(),s=y(i);if(a=t,o=this,u=i,s){if(void 0===d){var r;return c=r=u,d=_(b,e),p?v(r):h}if(g)return d=_(b,e),v(u)}return void 0===d&&(d=_(b,e)),h}return e=+e||0,(0,s.Z)(i)&&(p=!!i.leading,(g="maxWait"in i)&&(l=Math.max((0,r.Z)(i.maxWait)?i.maxWait:0,e)),m="trailing"in i?!!i.trailing:m),S.cancel=function(){void 0!==d&&function(t){if(f)return cancelAnimationFrame(t);clearTimeout(t)}(d),c=0,a=u=o=d=void 0},S.flush=function(){return void 0===d?h:x(Date.now())},S.pending=function(){return void 0!==d},S}},1130:function(t,e,i){i.d(e,{Z:()=>r});var s=i(9904);let r=(t,e,i)=>{let r=(0,s.Z)(e)?e.split("."):e;for(let e=0;e<r.length;e++)t=t?t[r[e]]:void 0;return void 0===t?i:t}},306:function(t,e,i){i.d(e,{Z:()=>r});let s=Object.prototype.hasOwnProperty,r=(t,e)=>null!=t&&s.call(t,e)},5660:function(t,e,i){function s(t,e){return i=>t*(1-i)+e*i}function r(t,e){return function(i){return Math.round(t*(1-i)+e*i)}}function n(t,e){let i=t.valueOf(),s=e.valueOf(),r=new Date;return t=>(r.setTime(i*(1-t)+s*t),r)}i.d(e,{IT:()=>l,NW:()=>n,OD:()=>r,k4:()=>s});let a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=RegExp(a.source,"g");function l(t,e){var i,r;let n,l,h,d=a.lastIndex=o.lastIndex=0,u=-1,c=[],p=[];for(t+="",e+="";(n=a.exec(t))&&(l=o.exec(e));)(h=l.index)>d&&(h=e.slice(d,h),c[u]?c[u]+=h:c[++u]=h),(n=n[0])===(l=l[0])?c[u]?c[u]+=l:c[++u]=l:(c[++u]=null,p.push({i:u,x:s(n,l)})),d=o.lastIndex;return d<e.length&&(h=e.slice(d),c[u]?c[u]+=h:c[++u]=h),c.length<2?p[0]?(i=p[0].x,function(t){return i(t)+""}):(r=e,function(){return r}):(e=p.length,function(t){for(let i,s=0;s<e;++s)c[(i=p[s]).i]=i.x(t);return c.join("")})}},1121:function(t,e,i){i.d(e,{Z:()=>h});var s=i(6082),r=i(9626);let n=t=>({}).toString.call(t).replace(/^\[object /,"").replace(/]$/,""),a=Object.prototype,o=function(t){let e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||a)},l=Object.prototype.hasOwnProperty,h=function(t){if((0,s.Z)(t))return!0;if((0,r.Z)(t))return!t.length;let e=n(t);if("Map"===e||"Set"===e)return!t.size;if(o(t))return!Object.keys(t).length;for(let e in t)if(l.call(t,e))return!1;return!0}},9730:function(t,e,i){i.d(e,{X:()=>function t(e,i,l){if(e===i)return!0;if(typeof e!=typeof i||null==e||null==i)return!1;if(Number.isNaN(e)&&Number.isNaN(i))return!0;if(a(e)!==a(i))return!1;if((0,r.Z)(e))return!!(null==l?void 0:l.skipFunction);if("object"!=typeof e)return!1;if((0,s.Z)(e)){if(e.length!==i.length)return!1;for(let s=e.length-1;s>=0;s--)if(!t(e[s],i[s],l))return!1;return!0}if(!(0,n.Z)(e))return!1;let h=o(e),d=o(i);if(h.length!==d.length)return!1;h.sort(),d.sort();for(let t=h.length-1;t>=0;t--)if(h[t]!=d[t])return!1;for(let s=h.length-1;s>=0;s--){let r=h[s];if(!t(e[r],i[r],l))return!1}return!0}});var s=i(7636),r=i(9038),n=i(5890);function a(t){return Object.prototype.toString.call(t)}function o(t){return Object.keys(t)}},7846:function(t,e,i){i.d(e,{Z:()=>s});let s=t=>void 0===t},8378:function(t,e,i){i.d(e,{Z:()=>r});var s=i(1601);let r=t=>(0,s.Z)(t)&&Number.isFinite(t)},7773:function(t,e,i){i.d(e,{jB:()=>s});function s(t,e,i=!0){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames){let s=Object.getOwnPropertyNames(e);for(let r=0;r<s.length;r++){let n=s[r];"constructor"!==n&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n])}}else!function(t,e,i){let s=function(t){if(!t)return[];if(Object.keys)return Object.keys(t);let e=[];for(let i in t)t.hasOwnProperty(i)&&e.push(i);return e}(e);for(let r=0;r<s.length;r++){let n=s[r];(i?null!=e[n]:null==t[n])&&(t[n]=e[n])}}(t,e,i)}},5859:function(t,e,i){function s(t,e,i=1e-10,r=1e-10){let n=i*Math.max(t,e);return Math.abs(t-e)<=Math.max(r,n)}function r(t,e,i,r){return t>e&&!s(t,e,i,r)}function n(t,e,i,r){return t<e&&!s(t,e,i,r)}i.d(e,{SQ:()=>n,Vy:()=>r,Yt:()=>s})},9198:function(t,e,i){i.d(e,{Z:()=>n});var s=i(5890),r=i(9904);function n(t,e){if(!t||!(0,s.Z)(t))return t;let i={};return Object.keys(t).forEach(s=>{let n=t[s],a=!1;e.forEach(t=>{((0,r.Z)(t)&&t===s||t instanceof RegExp&&s.match(t))&&(a=!0)}),a||(i[s]=n)}),i}},6689:function(t,e,i){i.d(e,{Z:()=>n});var s=i(2937),r=i(4154);let n=function(t,e,i){let n=!0,a=!0;if("function"!=typeof t)throw TypeError("Expected a function");return(0,r.Z)(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),(0,s.Z)(t,e,{leading:n,trailing:a,maxWait:e})}},9896:function(t,e,i){i.d(e,{H:()=>s});function s(t){return Number(t)}},7393:function(t,e,i){i.d(e,{FB:()=>o,YZ:()=>a,a5:()=>l,n2:()=>n});var s=i(7636),r=i(8654);function n(t,e,i){let{x1:s,y1:r,x2:n,y2:a}=e;return i.onlyTranslate()?(t!==e&&t.setValue(e.x1,e.y1,e.x2,e.y2),t.translate(i.e,i.f)):(t.clear(),t.add(i.a*s+i.c*r+i.e,i.b*s+i.d*r+i.f),t.add(i.a*n+i.c*r+i.e,i.b*n+i.d*r+i.f),t.add(i.a*n+i.c*a+i.e,i.b*n+i.d*a+i.f),t.add(i.a*s+i.c*a+i.e,i.b*s+i.d*a+i.f)),e}class a{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new a(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,s=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=s,this}set(t=0,e=0,i=0,s=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),s<e?(this.y2=e,this.y1=s):(this.y1=e,this.y2=s),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return(0,s.Z)(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){let s=this.rotatedPoints(t,e,i);return this.clear().add(s[0],s[1]).add(s[2],s[3]).add(s[4],s[5]).add(s[6],s[7])}scale(t=0,e=0,i=0,s=0){let r=this.scalePoints(t,e,i,s);return this.clear().add(r[0],r[1]).add(r[2],r[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return n(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){let{x1:s,y1:r,x2:n,y2:a}=this,o=Math.cos(t),l=Math.sin(t),h=e-e*o+i*l,d=i-e*l-i*o;return[o*s-l*r+h,l*s+o*r+d,o*s-l*a+h,l*s+o*a+d,o*n-l*r+h,l*n+o*r+d,o*n-l*a+h,l*n+o*a+d]}scalePoints(t,e,i,s){let{x1:r,y1:n,x2:a,y2:o}=this;return[t*r+(1-t)*i,e*n+(1-e)*s,t*a+(1-t)*i,e*o+(1-e)*s]}}class o extends a{}class l extends a{constructor(t,e=0){var i;super(t),t&&(this.angle=null!==(i=t.angle)&&void 0!==i?i:e)}intersects(t){return(0,r.nn)(this,t)}setValue(t=0,e=0,i=0,s=0,r=0){return super.setValue(t,e,i,s),this.angle=r,this}clone(){return new l(this)}}},9935:function(t,e,i){i.d(e,{X:()=>a,y:()=>n});var s=i(1805),r=i(8103);class n{constructor(t=1,e=0,i=0,s=1,r=0,n=0){this.a=t,this.b=e,this.c=i,this.d=s,this.e=r,this.f=n}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,e,i,s,r,n){return!(this.e!==r||this.f!==n||this.a!==t||this.d!==s||this.b!==e||this.c!==i)}setValue(t,e,i,s,r,n){return this.a=t,this.b=e,this.c=i,this.d=s,this.e=r,this.f=n,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){let t=this.a,e=this.b,i=this.c,s=this.d,r=this.e,a=this.f,o=new n,l=t*s-e*i;return o.a=s/l,o.b=-e/l,o.c=-i/l,o.d=t/l,o.e=(i*a-s*r)/l,o.f=-(t*a-e*r)/l,o}rotate(t){let e=Math.cos(t),i=Math.sin(t),s=this.a*e+this.c*i,r=this.b*e+this.d*i,n=-(this.a*i)+this.c*e,a=-(this.b*i)+this.d*e;return this.a=s,this.b=r,this.c=n,this.d=a,this}rotateByCenter(t,e,i){let s=Math.cos(t),r=Math.sin(t),n=s*this.a-r*this.b,a=r*this.a+s*this.b,o=s*this.c-r*this.d,l=r*this.c+s*this.d,h=s*this.e-r*this.f+((1-s)*e+r*i),d=r*this.e+s*this.f+((1-s)*i-r*e);return this.a=n,this.b=a,this.c=o,this.d=l,this.e=h,this.f=d,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,i,s,r,n){return this.multiply(t,e,i,s,r,n),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){let{a:t,b:e,c:i,d:s,e:r,f:n}=this;return this.a=e,this.b=t,this.c=s,this.d=i,this.e=n,this.f=r,this}multiply(t,e,i,s,r,n){let a=this.a,o=this.b,l=this.c,h=this.d,d=a*r+l*n+this.e,u=o*r+h*n+this.f;return this.a=a*t+l*e,this.b=o*t+h*e,this.c=a*i+l*s,this.d=o*i+h*s,this.e=d,this.f=u,this}interpolate(t,e){let i=new n;return i.a=this.a+(t.a-this.a)*e,i.b=this.b+(t.b-this.b)*e,i.c=this.c+(t.c-this.c)*e,i.d=this.d+(t.d-this.d)*e,i.e=this.e+(t.e-this.e)*e,i.f=this.f+(t.f-this.f)*e,i}transformPoint(t,e){let{a:i,b:s,c:r,d:n,e:a,f:o}=this,l=i*n-s*r,{x:h,y:d}=t;e.x=n/l*h+-r/l*d+(r*o-n*a)/l,e.y=-s/l*h+i/l*d+-(i*o-s*a)/l}onlyTranslate(t=1){return this.a===t&&0===this.b&&0===this.c&&this.d===t}clone(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){let t=this.a,e=this.b,i=this.c,r=this.d,n=t*r-e*i,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!==t||0!==e){let s=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/s):-Math.acos(t/s),a.scaleX=s,a.scaleY=n/s,a.skewX=(t*i+e*r)/n,a.skewY=0}else if(0!==i||0!==r){let s=Math.sqrt(i*i+r*r);a.rotateDeg=Math.PI/2-(r>0?Math.acos(-i/s):-Math.acos(i/s)),a.scaleX=n/s,a.scaleY=s,a.skewX=0,a.skewY=(t*i+e*r)/n}return a.rotateDeg=(0,s.Dt)(a.rotateDeg),a}}function a(t,e,i,s,n,a,o,l){let h,d;let u=e.a,c=e.b,p=e.c,g=e.d,m=e.e,f=e.f,v=(0,r.mC)(o),_=(0,r.O$)(o);l?(h=l[0],d=l[1]):(h=i,d=s);let y=h-i,b=d-s,x=u*v+p*_,S=c*v+g*_,A=p*v-u*_,k=g*v-c*_;t.a=n*x,t.b=n*S,t.c=a*A,t.d=a*k,t.e=m+u*h+p*d-x*y-A*b,t.f=f+c*h+g*d-S*y-k*b}},2683:function(t,e,i){i.d(e,{E9:()=>n,HL:()=>a});var s=i(1601),r=i(8103);class n{constructor(t=0,e=0,i,s){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=i,this.y1=s}clone(){return new n(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return(0,s.Z)(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return(0,s.Z)(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw Error("暂不支持")}div(t){throw Error("暂不支持")}}class a{static distancePP(t,e){return(0,r._b)((0,r.sQ)(t.x-e.x,2)+(0,r.sQ)(t.y-e.y,2))}static distanceNN(t,e,i,s){return(0,r._b)((0,r.sQ)(t-i,2)+(0,r.sQ)(e-s,2))}static distancePN(t,e,i){return(0,r._b)((0,r.sQ)(e-t.x,2)+(0,r.sQ)(i-t.y,2))}static pointAtPP(t,e,i){return new n((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y)}}},1725:function(t,e,i){function s(t,e=0,i=0){let r;if(!t)return{width:e,height:i};try{r=null==window?void 0:window.getComputedStyle}catch(t){r=()=>({})}let n=r(t);if(/^(\d*\.?\d+)(px)$/.exec(n.width)){let s=parseFloat(n.width)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)||t.clientWidth-1,r=parseFloat(n.height)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)||t.clientHeight-1;return{width:s<=0?e:s,height:r<=0?i:r}}return{width:e,height:i}}function r(t){let{x:e,y:i}=t.getBoundingClientRect();return{x:e,y:i}}i.d(e,{Op:()=>s,Z2:()=>a,to:()=>r,wv:()=>n});let n=(t="")=>{let e={};return t.split(";").forEach(t=>{if(t){let i=t.split(":");if(2===i.length){let t=i[0].trim(),s=i[1].trim();t&&s&&(e[t]=s)}}}),e},a=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase()},9711:function(t,e,i){i.d(e,{k:()=>s});class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=t=>this.locale_shortWeekdays[t.getDay()],this.formatWeekday=t=>this.locale_weekdays[t.getDay()],this.formatShortMonth=t=>this.locale_shortMonths[t.getMonth()],this.formatMonth=t=>this.locale_months[t.getMonth()],this.formatDayOfMonth=(t,e)=>this.pad(t.getDate(),e,2),this.formatHour24=(t,e)=>this.pad(t.getHours(),e,2),this.formatHour12=(t,e)=>this.pad(t.getHours()%12||12,e,2),this.formatMilliseconds=(t,e)=>this.pad(t.getMilliseconds(),e,3),this.formatMonthNumber=(t,e)=>this.pad(t.getMonth()+1,e,2),this.formatMinutes=(t,e)=>this.pad(t.getMinutes(),e,2),this.formatPeriod=t=>this.locale_periods[+(t.getHours()>=12)],this.formatSeconds=(t,e)=>this.pad(t.getSeconds(),e,2),this.formatFullYear=(t,e)=>this.pad(t.getFullYear()%1e4,e,4),this.formatUTCShortWeekday=t=>this.locale_shortWeekdays[t.getUTCDay()],this.formatUTCWeekday=t=>this.locale_weekdays[t.getUTCDay()],this.formatUTCShortMonth=t=>this.locale_shortMonths[t.getUTCMonth()],this.formatUTCMonth=t=>this.locale_months[t.getUTCMonth()],this.formatUTCDayOfMonth=(t,e)=>this.pad(t.getUTCDate(),e,2),this.formatUTCHour24=(t,e)=>this.pad(t.getUTCHours(),e,2),this.formatUTCHour12=(t,e)=>this.pad(t.getUTCHours()%12||12,e,2),this.formatUTCMilliseconds=(t,e)=>this.pad(t.getUTCMilliseconds(),e,3),this.formatUTCMonthNumber=(t,e)=>this.pad(t.getUTCMonth()+1,e,2),this.formatUTCMinutes=(t,e)=>this.pad(t.getUTCMinutes(),e,2),this.formatUTCPeriod=t=>this.locale_periods[+(t.getUTCHours()>=12)],this.formatUTCSeconds=(t,e)=>this.pad(t.getUTCSeconds(),e,2),this.formatUTCFullYear=(t,e)=>this.pad(t.getUTCFullYear()%1e4,e,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(t,e,i)=>{let s=this.shortWeekdayRe.exec(e.slice(i));return s?(t.w=this.shortWeekdayLookup.get(s[0].toLowerCase()),i+s[0].length):-1},this.parseWeekday=(t,e,i)=>{let s=this.weekdayRe.exec(e.slice(i));return s?(t.w=this.weekdayLookup.get(s[0].toLowerCase()),i+s[0].length):-1},this.parseShortMonth=(t,e,i)=>{let s=this.shortMonthRe.exec(e.slice(i));return s?(t.m=this.shortMonthLookup.get(s[0].toLowerCase()),i+s[0].length):-1},this.parseMonth=(t,e,i)=>{let s=this.monthRe.exec(e.slice(i));return s?(t.m=this.monthLookup.get(s[0].toLowerCase()),i+s[0].length):-1},this.parseDayOfMonth=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+2));return s?(t.d=+s[0],i+s[0].length):-1},this.parseHour24=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+2));return s?(t.H=+s[0],i+s[0].length):-1},this.parseMilliseconds=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+3));return s?(t.L=+s[0],i+s[0].length):-1},this.parseMonthNumber=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+2));return s?(t.m=s-1,i+s[0].length):-1},this.parseMinutes=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+2));return s?(t.M=+s[0],i+s[0].length):-1},this.parsePeriod=(t,e,i)=>{let s=this.periodRe.exec(e.slice(i));return s?(t.p=this.periodLookup.get(s[0].toLowerCase()),i+s[0].length):-1},this.parseSeconds=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+2));return s?(t.S=+s[0],i+s[0].length):-1},this.parseFullYear=(t,e,i)=>{let s=this.numberRe.exec(e.slice(i,i+4));return s?(t.y=+s[0],i+s[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(t,e)=>this.newFormat(t,this.formats)(new Date(this.getFullTimeStamp(e))),this.timeUTCFormat=(t,e)=>this.newFormat(t,this.utcFormats)(new Date(this.getFullTimeStamp(e))),this.timeParse=(t,e)=>this.newParse(t,!1)(e+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(t){return t.replace(this.requoteRe,"\\$&")}localDate(t){if(0<=t.y&&t.y<100){let e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}utcDate(t){if(0<=t.y&&t.y<100){let e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}newDate(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}formatRe(t){return RegExp("^(?:"+t.map(this.requoteF).join("|")+")","i")}formatLookup(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}pad(t,e,i){let s=t<0?"-":"",r=(s?-t:t)+"",n=r.length;return s+(n<i?Array(i-n+1).join(e)+r:r)}parseSpecifier(t,e,i,s){let r,n,a=0,o=e.length,l=i.length;for(;a<o;){if(s>=l)return -1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(n=this.parses[r in this.pads?e.charAt(a++):r])||(s=n(t,i,s))<0)return -1}else if(r!==i.charCodeAt(s++))return -1}return s}newParse(t,e){let i=this;return function(s){let r=i.newDate(1900,void 0,1);return i.parseSpecifier(r,t,s+="",0)!==s.length?null:"Q"in r?new Date(r.Q):"s"in r?new Date(1e3*r.s+("L"in r?r.L:0)):(!e||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,i.utcDate(r)):i.localDate(r))}}newFormat(t,e){let i=this;return function(s){let r,n;let a=[],o=-1,l=0,h=t.length;for(s instanceof Date||(s=new Date(+s));++o<h;)37===t.charCodeAt(o)&&(a.push(t.slice(l,o)),(n=i.pads[r=t.charAt(++o)])?r=t.charAt(++o):n="e"===r?" ":"0",a.push(r=(0,e[r])(s,n)),l=o+1);return a.push(t.slice(l,o)),a.join("")}}getFullTimeStamp(t){let e=parseInt(t+"",10);return 10===String(e).length?1e3*e:e}}},8654:function(t,e,i){i.d(e,{Kj:()=>o,SX:()=>d,di:()=>l,nn:()=>f,qr:()=>u,xj:()=>p});var s,r,n=i(1805),a=i(8103);function o(t,e,i,s){let r=t[0],n=e[0],a=i[0],o=s[0];return n<r&&([r,n]=[n,r]),o<a&&([o,a]=[a,o]),!(n<a||o<r)&&(r=t[1],n=e[1],a=i[1],o=s[1],n<r&&([r,n]=[n,r]),o<a&&([o,a]=[a,o]),!(n<a||o<r))}function l(t,e,i){if(null===t)return e;if(null===e)return t;let{x11:s,x12:r,y11:n,y12:a,x21:o,x22:l,y21:d,y22:u}=h(t,e,i);return s>=l||r<=o||n>=u||a<=d?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(s,o),y1:Math.max(n,d),x2:Math.min(r,l),y2:Math.min(a,u)}}(s=r||(r={}))[s.NONE=0]="NONE",s[s.BBOX1=1]="BBOX1",s[s.BBOX2=2]="BBOX2";let h=(t,e,i)=>{let s=t.x1,r=t.x2,n=t.y1,a=t.y2,o=e.x1,l=e.x2,h=e.y1,d=e.y2;return i&&(s>r&&([s,r]=[r,s]),n>a&&([n,a]=[a,n]),o>l&&([o,l]=[l,o]),h>d&&([h,d]=[d,h])),{x11:s,x12:r,y11:n,y12:a,x21:o,x22:l,y21:h,y22:d}};function d(t,e,i){if(t&&e){if(!i)return!(t.x1>e.x2||t.x2<e.x1||t.y1>e.y2||t.y2<e.y1);let{x11:s,x12:r,y11:n,y12:a,x21:o,x22:l,y21:d,y22:u}=h(t,e,!0);return!(s>l||r<o||n>u||a<d)}return!0}function u(t,e,i){if(!e)return!0;if(!i)return t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2;let s=e.x1,r=e.x2,n=e.y1,a=e.y2;return s>r&&([s,r]=[r,s]),n>a&&([n,a]=[a,n]),t.x>=s&&t.x<=r&&t.y>=n&&t.y<=a}function c(t,e){return Math.abs(e[0]*t[0]+e[1]*t[1])}function p({x:t,y:e},i,s={x:0,y:0}){return{x:(t-s.x)*Math.cos(i)-(e-s.y)*Math.sin(i)+s.x,y:(t-s.x)*Math.sin(i)+(e-s.y)*Math.cos(i)+s.y}}function g(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}}function m(t,e){let i=e?(0,n.M4)(t.angle):t.angle,s=g(t);return[p({x:t.x1,y:t.y1},i,s),p({x:t.x2,y:t.y1},i,s),p({x:t.x2,y:t.y2},i,s),p({x:t.x1,y:t.y2},i,s)]}function f(t,e,i=!1){let s=m(t,i),r=m(e,i),o=(t,e)=>[e.x-t.x,e.y-t.y],l=o(g(t),g(e)),h=o(s[0],s[1]),d=o(s[1],s[2]),u=o(r[0],r[1]),p=o(r[1],r[2]),v=i?(0,n.M4)(t.angle):t.angle,_=i?(0,n.M4)(90-t.angle):t.angle+a.ou,y=i?(0,n.M4)(e.angle):e.angle,b=i?(0,n.M4)(90-e.angle):e.angle+a.ou;_>a.f7&&(_-=a.f7),b>a.f7&&(b-=a.f7);let x=(t,e,i,s)=>{let r=[Math.cos(e),Math.sin(e)];return t+(c(r,i)+c(r,s))/2>c(r,l)};return x((t.x2-t.x1)/2,v,u,p)&&x((t.y2-t.y1)/2,_,u,p)&&x((e.x2-e.x1)/2,y,h,d)&&x((e.y2-e.y1)/2,b,h,d)}},8727:function(t,e,i){i.d(e,{v:()=>s});let s=(t,e)=>{let{x1:i,x2:s,y1:r,y2:n}=t,a=Math.abs(s-i),o=Math.abs(n-r),l=(i+s)/2,h=(r+n)/2,d=0,u=0;switch(e){case"top":case"inside-top":u=-.5;break;case"bottom":case"inside-bottom":u=.5;break;case"left":case"inside-left":d=-.5;break;case"right":case"inside-right":d=.5;break;case"top-right":d=.5,u=-.5;break;case"top-left":d=-.5,u=-.5;break;case"bottom-right":d=.5,u=.5;break;case"bottom-left":d=-.5,u=.5}return{x:l+=d*a,y:h+=u*o}}},8485:function(t,e,i){i.d(e,{e:()=>h});var s=i(7623),r=i(6082),n=i(9904),a=i(7636);let o=t=>{let e=t.charCodeAt(0),i=2===t.length?t.charCodeAt(1):0,s=e;return 55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e&=1023,i&=1023,s=(e<<10|i)+65536),12288===s||65281<=s&&s<=65376||65504<=s&&s<=65510?"F":8361===s||65377<=s&&s<=65470||65474<=s&&s<=65479||65482<=s&&s<=65487||65490<=s&&s<=65495||65498<=s&&s<=65500||65512<=s&&s<=65518?"H":4352<=s&&s<=4447||4515<=s&&s<=4519||4602<=s&&s<=4607||9001<=s&&s<=9002||11904<=s&&s<=11929||11931<=s&&s<=12019||12032<=s&&s<=12245||12272<=s&&s<=12283||12289<=s&&s<=12350||12353<=s&&s<=12438||12441<=s&&s<=12543||12549<=s&&s<=12589||12593<=s&&s<=12686||12688<=s&&s<=12730||12736<=s&&s<=12771||12784<=s&&s<=12830||12832<=s&&s<=12871||12880<=s&&s<=13054||13056<=s&&s<=19903||19968<=s&&s<=42124||42128<=s&&s<=42182||43360<=s&&s<=43388||44032<=s&&s<=55203||55216<=s&&s<=55238||55243<=s&&s<=55291||63744<=s&&s<=64255||65040<=s&&s<=65049||65072<=s&&s<=65106||65108<=s&&s<=65126||65128<=s&&s<=65131||110592<=s&&s<=110593||127488<=s&&s<=127490||127504<=s&&s<=127546||127552<=s&&s<=127560||127568<=s&&s<=127569||131072<=s&&s<=194367||177984<=s&&s<=196605||196608<=s&&s<=262141?"W":32<=s&&s<=126||162<=s&&s<=163||165<=s&&s<=166||172===s||175===s||10214<=s&&s<=10221||10629<=s&&s<=10630?"Na":161===s||164===s||167<=s&&s<=168||170===s||173<=s&&s<=174||176<=s&&s<=180||182<=s&&s<=186||188<=s&&s<=191||198===s||208===s||215<=s&&s<=216||222<=s&&s<=225||230===s||232<=s&&s<=234||236<=s&&s<=237||240===s||242<=s&&s<=243||247<=s&&s<=250||252===s||254===s||257===s||273===s||275===s||283===s||294<=s&&s<=295||299===s||305<=s&&s<=307||312===s||319<=s&&s<=322||324===s||328<=s&&s<=331||333===s||338<=s&&s<=339||358<=s&&s<=359||363===s||462===s||464===s||466===s||468===s||470===s||472===s||474===s||476===s||593===s||609===s||708===s||711===s||713<=s&&s<=715||717===s||720===s||728<=s&&s<=731||733===s||735===s||768<=s&&s<=879||913<=s&&s<=929||931<=s&&s<=937||945<=s&&s<=961||963<=s&&s<=969||1025===s||1040<=s&&s<=1103||1105===s||8208===s||8211<=s&&s<=8214||8216<=s&&s<=8217||8220<=s&&s<=8221||8224<=s&&s<=8226||8228<=s&&s<=8231||8240===s||8242<=s&&s<=8243||8245===s||8251===s||8254===s||8308===s||8319===s||8321<=s&&s<=8324||8364===s||8451===s||8453===s||8457===s||8467===s||8470===s||8481<=s&&s<=8482||8486===s||8491===s||8531<=s&&s<=8532||8539<=s&&s<=8542||8544<=s&&s<=8555||8560<=s&&s<=8569||8585===s||8592<=s&&s<=8601||8632<=s&&s<=8633||8658===s||8660===s||8679===s||8704===s||8706<=s&&s<=8707||8711<=s&&s<=8712||8715===s||8719===s||8721===s||8725===s||8730===s||8733<=s&&s<=8736||8739===s||8741===s||8743<=s&&s<=8748||8750===s||8756<=s&&s<=8759||8764<=s&&s<=8765||8776===s||8780===s||8786===s||8800<=s&&s<=8801||8804<=s&&s<=8807||8810<=s&&s<=8811||8814<=s&&s<=8815||8834<=s&&s<=8835||8838<=s&&s<=8839||8853===s||8857===s||8869===s||8895===s||8978===s||9312<=s&&s<=9449||9451<=s&&s<=9547||9552<=s&&s<=9587||9600<=s&&s<=9615||9618<=s&&s<=9621||9632<=s&&s<=9633||9635<=s&&s<=9641||9650<=s&&s<=9651||9654<=s&&s<=9655||9660<=s&&s<=9661||9664<=s&&s<=9665||9670<=s&&s<=9672||9675===s||9678<=s&&s<=9681||9698<=s&&s<=9701||9711===s||9733<=s&&s<=9734||9737===s||9742<=s&&s<=9743||9748<=s&&s<=9749||9756===s||9758===s||9792===s||9794===s||9824<=s&&s<=9825||9827<=s&&s<=9829||9831<=s&&s<=9834||9836<=s&&s<=9837||9839===s||9886<=s&&s<=9887||9918<=s&&s<=9919||9924<=s&&s<=9933||9935<=s&&s<=9953||9955===s||9960<=s&&s<=9983||10045===s||10071===s||10102<=s&&s<=10111||11093<=s&&s<=11097||12872<=s&&s<=12879||57344<=s&&s<=63743||65024<=s&&s<=65039||65533===s||127232<=s&&s<=127242||127248<=s&&s<=127277||127280<=s&&s<=127337||127344<=s&&s<=127386||917760<=s&&s<=917999||983040<=s&&s<=1048573||1048576<=s&&s<=1114109?"A":"N"};var l=i(7183);class h{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet="-/: .,@%'\"~",this._option=t,this._userSpec=null!=e?e:{},this.textSpec=this._initSpec(),(0,s.Z)(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=(0,s.Z)(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if((0,r.Z)(this._canvas)&&((0,s.Z)(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),(0,r.Z)(this._canvas)&&"undefined"!=typeof window&&void 0!==window.document&&globalThis&&(0,s.Z)(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),(0,r.Z)(this._context)&&(0,s.Z)(this._canvas)){let t=this._canvas.getContext("2d");(0,s.Z)(t)&&(t.save(),t.font=(0,l.U)(this.textSpec),this._contextSaved=!0,this._context=t)}return!(0,r.Z)(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;let{defaultFontParams:s={}}=this._option,{fontStyle:r=s.fontStyle,fontVariant:a=s.fontVariant,fontWeight:o=null!==(t=s.fontWeight)&&void 0!==t?t:"normal",fontSize:l=null!==(e=s.fontSize)&&void 0!==e?e:12,fontFamily:h=null!==(i=s.fontFamily)&&void 0!==i?i:"sans-serif",align:d,textAlign:u=null!=d?d:"center",baseline:c,textBaseline:p=null!=c?c:"middle",ellipsis:g,limit:m}=this._userSpec,{lineHeight:f=l}=this._userSpec;return(0,n.Z)(f)&&"%"===f[f.length-1]&&(f=l*(Number.parseFloat(f.substring(0,f.length-1))/100)),{fontStyle:r,fontVariant:a,fontFamily:h,fontSize:l,fontWeight:o,textAlign:u,textBaseline:p,ellipsis:g,limit:m,lineHeight:f}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){let e;if((0,r.Z)(t))return{width:0,height:0};if((0,r.Z)(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);let{fontFamily:i,fontSize:s,fontWeight:n,textAlign:a,textBaseline:o,ellipsis:l,limit:h,lineHeight:d}=this.textSpec;try{let r=this._option.getTextBounds({text:t,fontFamily:i,fontSize:s,fontWeight:n,textAlign:a,textBaseline:o,ellipsis:!!l,maxLineWidth:h||1/0,lineHeight:d});e={width:r.width(),height:r.height()}}catch(i){this._notSupportVRender=!0,e=this.measureWithNaiveCanvas(t)}return e}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){if(!this.initContext())return this._quickMeasureWithoutCanvas(t);let e=this._context.measureText(t),{fontSize:i,lineHeight:s}=this.textSpec;return{width:e.width,height:null!=s?s:i,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){let e={width:0,height:0};for(let i=0;i<t.length;i++){let s=t[i],n=this._measureSpecialChar(s);(0,r.Z)(n)&&h.NUMBERS_CHAR_SET.includes(s)&&(n=this._measureNumberChar()),(0,r.Z)(n)&&["F","W"].includes(o(s))&&(n=this._measureFullSizeChar()),(0,r.Z)(n)&&(n=this._measureLetterChar()),e.width+=n.width,e.height=Math.max(e.height,n.height),(0,r.Z)(n.fontBoundingBoxAscent)||(e.fontBoundingBoxAscent=n.fontBoundingBoxAscent),(0,r.Z)(n.fontBoundingBoxDescent)||(e.fontBoundingBoxDescent=n.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){let e={width:0,height:0},{fontSize:i,lineHeight:s}=this.textSpec;for(let s=0;s<t.length;s++){let r=["F","W"].includes(o(t[s]))?1:.53;e.width+=r*i}return e.height=null!=s?s:i,e}_measureReduce(t,e){let{fontSize:i,lineHeight:n}=this.textSpec,o={width:0,height:0};if((0,r.Z)(t))return o;if((0,a.Z)(t)){let r=t.filter(s.Z).map(t=>t.toString());return 0===r.length?o:1===r.length?e(r[0]):{width:r.reduce((t,i)=>Math.max(t,e(i).width),0),height:r.length*((null!=n?n:i)+1)+1}}return e(t.toString())}_measureNumberChar(){if((0,r.Z)(this._numberCharSize)){let t=this._standardMethod(h.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/h.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return(0,r.Z)(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(h.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if((0,r.Z)(this._letterCharSize)){let t=this._standardMethod(h.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/h.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return(0,s.Z)(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){(0,s.Z)(this._canvas)&&(this._canvas=null),(0,s.Z)(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}h.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",h.NUMBERS_CHAR_SET="0123456789",h.FULL_SIZE_CHAR="字"},7183:function(t,e,i){i.d(e,{U:()=>s});function s(t,e={},i){i||(i=1);let{fontStyle:r=e.fontStyle,fontVariant:n=e.fontVariant,fontWeight:a=e.fontWeight,fontSize:o=e.fontSize,fontFamily:l=e.fontFamily}=t;return(r?r+" ":"")+(n?n+" ":"")+(a?a+" ":"")+o*i+"px "+(l||"sans-serif")}},4659:function(t,e,i){i.d(e,{Y:()=>l,h:()=>r});var s,r,n=i(1601);let a="undefined"!=typeof console;function o(t,e,i){let s=[e].concat([].slice.call(i));a&&console[t].apply(console,s)}(s=r||(r={}))[s.None=0]="None",s[s.Error=1]="Error",s[s.Warn=2]="Warn",s[s.Info=3]="Info",s[s.Debug=4]="Debug";class l{static getInstance(t,e){return l._instance&&(0,n.Z)(t)?l._instance.level(t):l._instance||(l._instance=new l(t,e)),l._instance}static setInstance(t){return l._instance=t}static setInstanceLevel(t){l._instance?l._instance.level(t):l._instance=new l(t)}static clearInstance(){l._instance=null}constructor(t=r.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){let e=this._onErrorHandler.findIndex(e=>e===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=r.Info}canLogDebug(){return this._level>=r.Debug}canLogError(){return this._level>=r.Error}canLogWarn(){return this._level>=r.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=r.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):o(null!==(e=this._method)&&void 0!==e?e:"error","ERROR",t)),this}warn(...t){return this._level>=r.Warn&&o(this._method||"warn","WARN",t),this}info(...t){return this._level>=r.Info&&o(this._method||"log","INFO",t),this}debug(...t){return this._level>=r.Debug&&o(this._method||"log","DEBUG",t),this}}l._instance=null},8103:function(t,e,i){i.d(e,{BZ:()=>a,Fp:()=>u,Ho:()=>s,KU:()=>_,Kh:()=>f,O$:()=>p,VV:()=>c,Wn:()=>l,ZR:()=>v,_b:()=>g,f2:()=>x,f7:()=>o,fv:()=>h,i4:()=>b,ir:()=>y,mC:()=>d,ou:()=>n,pi:()=>r,sQ:()=>m});let s=1e-12,r=Math.PI,n=r/2,a=2*r,o=2*Math.PI,l=Math.abs,h=Math.atan2,d=Math.cos,u=Math.max,c=Math.min,p=Math.sin,g=Math.sqrt,m=Math.pow;function f(t){return t>1?0:t<-1?r:Math.acos(t)}function v(t){return t>=1?n:t<=-1?-n:Math.asin(t)}function _(t,e,i,s,r){let n=i,a=s;return"number"==typeof t&&"number"==typeof i&&(n=(1-r)*t+r*i),"number"==typeof e&&"number"==typeof s&&(a=(1-r)*e+r*s),{x:n,y:a}}function y(t,e){return t[0]*e[1]-t[1]*e[0]}function b(t){let e=t.toString().split(/[eE]/),i=(e[0].split(".")[1]||"").length-(+e[1]||0);return i>0?i:0}function x(t,e){return function(t,e=10){return Math.round(t*e)/e}(t-e,10**Math.max(b(t),b(e)))}},3215:function(t,e,i){i.d(e,{o:()=>a});var s=i(8378),r=i(7636),n=i(4154);function a(t){if((0,s.Z)(t))return[t,t,t,t];if((0,r.Z)(t)){let e=t.length;if(1===e){let e=t[0];return[e,e,e,e]}if(2===e){let[e,i]=t;return[e,i,e,i]}if(3===e){let[e,i,s]=t;return[e,i,s,i]}if(4===e)return t}if((0,n.Z)(t)){let{top:e=0,right:i=0,bottom:s=0,left:r=0}=t;return[e,i,s,r]}return[0,0,0,0]}},1312:function(t){var e=Object.prototype.hasOwnProperty,i="~";function s(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function n(t,e,s,n,a){if("function"!=typeof s)throw TypeError("The listener must be a function");var o=new r(s,n||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1)),o.prototype.eventNames=function(){var t,s,r=[];if(0===this._eventsCount)return r;for(s in t=this._events)e.call(t,s)&&r.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,a=Array(n);r<n;r++)a[r]=s[r].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},o.prototype.emit=function(t,e,s,r,n,a){var o=i?i+t:t;if(!this._events[o])return!1;var l,h,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,s),!0;case 4:return d.fn.call(d.context,e,s,r),!0;case 5:return d.fn.call(d.context,e,s,r,n),!0;case 6:return d.fn.call(d.context,e,s,r,n,a),!0}for(h=1,l=Array(u-1);h<u;h++)l[h-1]=arguments[h];d.fn.apply(d.context,l)}else{var c,p=d.length;for(h=0;h<p;h++)switch(d[h].once&&this.removeListener(t,d[h].fn,void 0,!0),u){case 1:d[h].fn.call(d[h].context);break;case 2:d[h].fn.call(d[h].context,e);break;case 3:d[h].fn.call(d[h].context,e,s);break;case 4:d[h].fn.call(d[h].context,e,s,r);break;default:if(!l)for(c=1,l=Array(u-1);c<u;c++)l[c-1]=arguments[c];d[h].fn.apply(d[h].context,l)}}return!0},o.prototype.on=function(t,e,i){return n(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return n(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,s,r){var n=i?i+t:t;if(!this._events[n])return this;if(!e)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||r&&!o.once||s&&o.context!==s||a(this,n);else{for(var l=0,h=[],d=o.length;l<d;l++)(o[l].fn!==e||r&&!o[l].once||s&&o[l].context!==s)&&h.push(o[l]);h.length?this._events[n]=1===h.length?h[0]:h:a(this,n)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},8621:function(t,e){var i,s=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),e.isFragment=function(t){return function(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case s:switch(t=t.type){case n:case o:case a:case c:case p:return t;default:switch(t=t&&t.$$typeof){case d:case h:case u:case m:case g:case l:return t;default:return e}}case r:return e}}}(t)===n}},6479:function(t,e,i){t.exports=i(8621)}}]);